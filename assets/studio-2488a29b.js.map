{"version":3,"file":"studio-2488a29b.js","sources":["../../node_modules/@rgossiaux/svelte-heroicons/solid/InformationCircle/InformationCircle.svelte","../../node_modules/@babeard/svelte-heroicons/mini/QuestionMarkCircle/QuestionMarkCircle.svelte","../../node_modules/@rgossiaux/svelte-heroicons/outline/Pencil/Pencil.svelte","../../node_modules/@rgossiaux/svelte-heroicons/outline/Trash/Trash.svelte","../../src/Customizations/AllSharedLayers.ts","../../src/UI/Studio/EditLayerState.ts","../../src/UI/Studio/configMeta.ts","../../src/UI/Studio/ShowConversionMessage.svelte","../../src/UI/Studio/SchemaBasedField.svelte","../../src/UI/Studio/QuestionPreview.svelte","../../src/UI/Studio/SchemaBasedMultiType.svelte","../../src/UI/Studio/SchemaBasedArray.svelte","../../src/UI/Studio/ArrayMultiAnswer.svelte","../../src/UI/Studio/SchemaBasedInput.svelte","../../src/UI/Studio/Region.svelte","../../src/UI/Studio/ErrorIndicatorForRegion.svelte","../../src/UI/Studio/MappingInput.svelte","../../src/UI/Studio/TagRenderingInput.svelte","../../src/UI/Studio/ShowConversionMessages.svelte","../../src/UI/Studio/EditLayer.svelte","../../src/assets/svg/Loading.svelte","../../src/UI/Studio/StudioServer.ts","../../src/UI/Studio/EditItemButton.svelte","../../src/UI/Studio/ChooseLayerToEdit.svelte","../../src/UI/Walkthrough/WalkthroughStep.svelte","../../src/UI/Walkthrough/Walkthrough.svelte","../../src/UI/Studio/EditTheme.svelte","../../src/UI/StudioGUI.svelte","../../src/UI/StudioGui.ts"],"sourcesContent":["<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z\" clip-rule=\"evenodd\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"/>\n</svg>","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>\n</svg>","import LayerConfig from \"../Models/ThemeConfig/LayerConfig\"\nimport { Utils } from \"../Utils\"\nimport known_layers from \"../assets/generated/known_layers.json\"\nimport { LayerConfigJson } from \"../Models/ThemeConfig/Json/LayerConfigJson\"\n\nexport class AllSharedLayers {\n    public static sharedLayers: Map<string, LayerConfig> = AllSharedLayers.getSharedLayers()\n    public static getSharedLayersConfigs(): Map<string, LayerConfigJson> {\n        const sharedLayers = new Map<string, LayerConfigJson>()\n        for (const layer of known_layers.layers) {\n            // @ts-ignore\n            sharedLayers.set(layer.id, layer)\n        }\n\n        return sharedLayers\n    }\n    private static getSharedLayers(): Map<string, LayerConfig> {\n        const sharedLayers = new Map<string, LayerConfig>()\n        for (const layer of known_layers.layers) {\n            try {\n                // @ts-ignore\n                const parsed = new LayerConfig(layer, \"shared_layers\")\n                sharedLayers.set(layer.id, parsed)\n            } catch (e) {\n                if (!Utils.runningFromConsole) {\n                    console.error(\n                        \"CRITICAL: Could not parse a layer configuration!\",\n                        layer.id,\n                        \" due to\",\n                        e\n                    )\n                }\n            }\n        }\n\n        return sharedLayers\n    }\n}\n","import { ConfigMeta } from \"./configMeta\"\nimport { Store, UIEventSource } from \"../../Logic/UIEventSource\"\nimport { LayerConfigJson } from \"../../Models/ThemeConfig/Json/LayerConfigJson\"\nimport {\n    Conversion,\n    ConversionMessage,\n    DesugaringContext,\n    Pipe,\n} from \"../../Models/ThemeConfig/Conversion/Conversion\"\nimport { PrepareLayer } from \"../../Models/ThemeConfig/Conversion/PrepareLayer\"\nimport { ValidateLayer, ValidateTheme } from \"../../Models/ThemeConfig/Conversion/Validation\"\nimport { AllSharedLayers } from \"../../Customizations/AllSharedLayers\"\nimport { QuestionableTagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\"\nimport { TagUtils } from \"../../Logic/Tags/TagUtils\"\nimport StudioServer from \"./StudioServer\"\nimport { Utils } from \"../../Utils\"\nimport { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\nimport { OsmTags } from \"../../Models/OsmFeature\"\nimport { Feature, Point } from \"geojson\"\nimport LayerConfig from \"../../Models/ThemeConfig/LayerConfig\"\nimport { LayoutConfigJson } from \"../../Models/ThemeConfig/Json/LayoutConfigJson\"\nimport { PrepareTheme } from \"../../Models/ThemeConfig/Conversion/PrepareTheme\"\nimport { ConversionContext } from \"../../Models/ThemeConfig/Conversion/ConversionContext\"\n\nexport interface HighlightedTagRendering {\n    path: ReadonlyArray<string | number>\n    schema: ConfigMeta\n}\n\nexport abstract class EditJsonState<T> {\n    public readonly schema: ConfigMeta[]\n    public readonly category: \"layers\" | \"themes\"\n    public readonly server: StudioServer\n\n    public readonly expertMode: UIEventSource<boolean>\n\n    public readonly configuration: UIEventSource<Partial<T>> = new UIEventSource<Partial<T>>({})\n    public readonly messages: Store<ConversionMessage[]>\n\n    /**\n     * The EditLayerUI shows a 'schemaBasedInput' for this path to pop advanced questions out\n     */\n    public readonly highlightedItem: UIEventSource<HighlightedTagRendering> = new UIEventSource(\n        undefined\n    )\n    private sendingUpdates = false\n    private readonly _stores = new Map<string, UIEventSource<any>>()\n\n    constructor(\n        schema: ConfigMeta[],\n        server: StudioServer,\n        category: \"layers\" | \"themes\",\n        options?: {\n            expertMode?: UIEventSource<boolean>\n        }\n    ) {\n        this.schema = schema\n        this.server = server\n        this.category = category\n        this.expertMode = options?.expertMode ?? new UIEventSource<boolean>(false)\n\n        this.messages = this.setupErrorsForLayers()\n\n        const layerId = this.getId()\n        this.highlightedItem.addCallbackD((hl) => console.log(\"Highlighted item is\", hl))\n        this.configuration\n            .mapD((config) => {\n                if (!this.sendingUpdates) {\n                    console.log(\"Not sending updates yet! Trigger 'startSendingUpdates' first\")\n                    return undefined\n                }\n                return JSON.stringify(config, null, \"  \")\n            })\n            .stabilized(100)\n            .addCallbackD(async (config) => {\n                const id = layerId.data\n                if (id === undefined) {\n                    console.warn(\"No id found in layer, not updating\")\n                    return\n                }\n                await this.server.update(id, config, this.category)\n            })\n    }\n\n    public startSavingUpdates(enabled = true) {\n        this.sendingUpdates = enabled\n        if (enabled) {\n            this.configuration.ping()\n        }\n    }\n\n    public getCurrentValueFor(path: ReadonlyArray<string | number>): any | undefined {\n        // Walk the path down to see if we find something\n        let entry = this.configuration.data\n        for (let i = 0; i < path.length; i++) {\n            if (entry === undefined) {\n                // We reached a dead end - no old vlaue\n                return undefined\n            }\n            const breadcrumb = path[i]\n            entry = entry[breadcrumb]\n        }\n        return entry\n    }\n\n    public getStoreFor<T>(path: ReadonlyArray<string | number>): UIEventSource<T | undefined> {\n        const key = path.join(\".\")\n\n        // TODO check if this gives problems when changing the order of e.g. mappings and questions\n        if (this._stores.has(key)) {\n            return this._stores.get(key)\n        }\n        const store = new UIEventSource<any>(this.getCurrentValueFor(path))\n        store.addCallback((v) => {\n            this.setValueAt(path, v)\n        })\n        this._stores.set(key, store)\n        this.configuration.addCallbackD((config) => {\n            store.setData(this.getCurrentValueFor(path))\n        })\n        return store\n    }\n\n    public register(\n        path: ReadonlyArray<string | number>,\n        value: Store<any>,\n        noInitialSync: boolean = true\n    ): () => void {\n        const unsync = value.addCallback((v) => {\n            this.setValueAt(path, v)\n        })\n        if (!noInitialSync) {\n            this.setValueAt(path, value.data)\n        }\n        return unsync\n    }\n\n    public getSchemaStartingWith(path: string[]) {\n        return this.schema.filter(\n            (sch) =>\n                !path.some((part, i) => !(sch.path.length > path.length && sch.path[i] === part))\n        )\n    }\n\n    public getTranslationAt(path: string[]): ConfigMeta {\n        const origConfig = this.getSchema(path)[0]\n        return {\n            path,\n            type: \"translation\",\n            hints: {\n                typehint: \"translation\",\n            },\n            required: origConfig.required ?? false,\n            description: origConfig.description ?? \"A translatable object\",\n        }\n    }\n\n    public getSchema(path: string[]): ConfigMeta[] {\n        const schemas = this.schema.filter(\n            (sch) =>\n                sch !== undefined &&\n                !path.some((part, i) => !(sch.path.length == path.length && sch.path[i] === part))\n        )\n        if (schemas.length == 0) {\n            console.warn(\"No schemas found for path\", path.join(\".\"))\n        }\n        return schemas\n    }\n\n    public setValueAt(path: ReadonlyArray<string | number>, v: any) {\n        let entry = this.configuration.data\n        const isUndefined =\n            v === undefined ||\n            v === null ||\n            v === \"\" ||\n            (typeof v === \"object\" && Object.keys(v).length === 0)\n\n        for (let i = 0; i < path.length - 1; i++) {\n            const breadcrumb = path[i]\n            if (entry[breadcrumb] === undefined) {\n                if (isUndefined) {\n                    // we have a dead end _and_ we do not need to set a value - we do an early return\n                    return\n                }\n                entry[breadcrumb] = typeof path[i + 1] === \"number\" ? [] : {}\n            }\n            entry = entry[breadcrumb]\n        }\n\n        const lastBreadcrumb = path.at(-1)\n        if (isUndefined) {\n            if (entry && entry[lastBreadcrumb]) {\n                delete entry[lastBreadcrumb]\n                this.configuration.ping()\n            }\n        } else if (entry[lastBreadcrumb] !== v) {\n            entry[lastBreadcrumb] = v\n            this.configuration.ping()\n        }\n    }\n\n    public messagesFor(path: ReadonlyArray<string | number>): Store<ConversionMessage[]> {\n        return this.messages.map((msgs) => {\n            if (!msgs) {\n                return []\n            }\n            return msgs.filter((msg) => {\n                const pth = msg.context.path\n                for (let i = 0; i < Math.min(pth.length, path.length); i++) {\n                    if (pth[i] !== path[i]) {\n                        return false\n                    }\n                }\n                return true\n            })\n        })\n    }\n\n    protected abstract buildValidation(state: DesugaringContext): Conversion<T, any>\n\n    protected abstract getId(): Store<string>\n\n    private setupErrorsForLayers(): Store<ConversionMessage[]> {\n        const layers = AllSharedLayers.getSharedLayersConfigs()\n        const questions = layers.get(\"questions\")\n        const sharedQuestions = new Map<string, QuestionableTagRenderingConfigJson>()\n        for (const question of questions.tagRenderings) {\n            sharedQuestions.set(question[\"id\"], <QuestionableTagRenderingConfigJson>question)\n        }\n        let state: DesugaringContext = {\n            tagRenderings: sharedQuestions,\n            sharedLayers: layers,\n        }\n        const prepare = this.buildValidation(state)\n        return this.configuration.mapD((config) => {\n            const context = ConversionContext.construct([], [\"prepare\"])\n            try {\n                prepare.convert(<T>config, context)\n            } catch (e) {\n                console.error(e)\n                context.err(e)\n            }\n            return context.messages\n        })\n    }\n}\n\nexport default class EditLayerState extends EditJsonState<LayerConfigJson> {\n    // Needed for the special visualisations\n    public readonly osmConnection: OsmConnection\n    public readonly imageUploadManager = {\n        getCountsFor() {\n            return 0\n        },\n    }\n    public readonly layout: { getMatchingLayer: (key: any) => LayerConfig }\n    public readonly featureSwitches: {\n        featureSwitchIsDebugging: UIEventSource<boolean>\n    }\n\n    /**\n     * Used to preview and interact with the questions\n     */\n    public readonly testTags = new UIEventSource<OsmTags>({ id: \"node/-12345\" })\n    public readonly exampleFeature: Feature<Point> = {\n        type: \"Feature\",\n        properties: this.testTags.data,\n        geometry: {\n            type: \"Point\",\n            coordinates: [3.21, 51.2],\n        },\n    }\n\n    constructor(\n        schema: ConfigMeta[],\n        server: StudioServer,\n        osmConnection: OsmConnection,\n        options: { expertMode: UIEventSource<boolean> }\n    ) {\n        super(schema, server, \"layers\", options)\n        this.osmConnection = osmConnection\n        this.layout = {\n            getMatchingLayer: (_) => {\n                try {\n                    return new LayerConfig(<LayerConfigJson>this.configuration.data, \"dynamic\")\n                } catch (e) {\n                    return undefined\n                }\n            },\n        }\n        this.featureSwitches = {\n            featureSwitchIsDebugging: new UIEventSource<boolean>(true),\n        }\n\n        this.addMissingTagRenderingIds()\n\n        this.configuration.addCallbackAndRunD((layer) => {\n            if (layer.tagRenderings) {\n                // A bit of cleanup\n                const lBefore = layer.tagRenderings.length\n                const cleaned = Utils.NoNull(layer.tagRenderings)\n                if (cleaned.length != lBefore) {\n                    layer.tagRenderings = cleaned\n                    this.configuration.ping()\n                }\n            }\n        })\n    }\n\n    protected buildValidation(state: DesugaringContext) {\n        return new Pipe(\n            new PrepareLayer(state),\n            new ValidateLayer(\"dynamic\", false, undefined, true)\n        )\n    }\n\n    protected getId(): Store<string> {\n        return this.configuration.mapD((config) => config.id)\n    }\n\n    private addMissingTagRenderingIds() {\n        this.configuration.addCallbackD((config) => {\n            const trs = Utils.NoNull(config.tagRenderings ?? [])\n            for (let i = 0; i < trs.length; i++) {\n                const tr = trs[i]\n                if (typeof tr === \"string\") {\n                    continue\n                }\n                if (!tr[\"id\"] && !tr[\"override\"]) {\n                    const qtr = <QuestionableTagRenderingConfigJson>tr\n                    let id = \"\" + i + \"_\" + Utils.randomString(5)\n                    if (qtr?.freeform?.key) {\n                        id = qtr?.freeform?.key\n                    } else if (qtr.mappings?.[0]?.if) {\n                        id =\n                            qtr.freeform?.key ??\n                            TagUtils.Tag(qtr.mappings[0].if).usedKeys()?.[0] ??\n                            \"\" + i\n                    }\n                    qtr[\"id\"] = id\n                }\n            }\n        })\n    }\n}\n\nexport class EditThemeState extends EditJsonState<LayoutConfigJson> {\n    constructor(\n        schema: ConfigMeta[],\n        server: StudioServer,\n        options: { expertMode: UIEventSource<boolean> }\n    ) {\n        super(schema, server, \"themes\", options)\n    }\n\n    protected buildValidation(state: DesugaringContext): Conversion<LayoutConfigJson, any> {\n        return new Pipe(\n            new PrepareTheme(state),\n            new ValidateTheme(undefined, \"\", false, new Set(state.tagRenderings.keys()))\n        )\n    }\n\n    protected getId(): Store<string> {\n        return this.configuration.mapD((config) => config.id)\n    }\n}\n","import { JsonSchema, JsonSchemaType } from \"./jsonSchema\"\n\nexport interface ConfigMeta {\n    path: string[]\n    type: JsonSchemaType | JsonSchema[]\n    /**\n     * All fields are lowercase, as they should be case-insensitive\n     */\n    hints: {\n        group?: string\n        typehint?: string\n        typehelper?: string\n        /**\n         * If multiple subcategories can be chosen\n         */\n        types?: string\n        question?: string\n        iftrue?: string\n        iffalse?: string\n        ifunset?: string\n        inline?: string\n        default?: string\n        typesdefault?: string\n        suggestions?: []\n        title?: string\n        multianswer?: \"true\" | string\n    }\n    required: boolean\n    description: string\n}\n\nexport class ConfigMetaUtils {\n    static isTranslation(configMeta: ConfigMeta) {\n        /*      {\n    \"$ref\": \"#/definitions/Record<string,string>\"\n  },\n  {\n    \"type\": \"string\"\n  }*/\n        if (!configMeta.type) {\n            return false\n        }\n        if (Array.isArray(configMeta.type)) {\n            return configMeta.type.some((t) => t[\"$ref\"] === \"#/definitions/Record<string,string>\")\n        } else {\n            return configMeta.type[\"$ref\"] === \"#/definitions/Record<string,string>\"\n        }\n    }\n}\n","<script lang=\"ts\">\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\";\n  import { ExclamationIcon, InformationCircleIcon } from \"@rgossiaux/svelte-heroicons/solid\";\n\n  /**\n   * Single conversion message, styled depending on the type\n   */\n  export let message: ConversionMessage;\n</script>\n\n{#if message.level === \"error\"}\n  <div class=\"alert flex justify-between items-center\">\n    <ExclamationIcon class=\"w-6 h-6 mx-1 shrink-0\" />\n    {message.message}\n    <div/>\n  </div>\n{:else if message.level === \"warning\"}\n  <div class=\"warning flex justify-between items-center\">\n    <ExclamationIcon class=\"w-6 h-6 mx-1 shrink-0\" />\n    {message.message}\n    <div/>\n  </div>\n{:else if message.level === \"information\"}\n  <div class=\"information flex justify-between items-center\">\n    <InformationCircleIcon class=\"w-6 h-6 mx-1 shrink-0\" />\n    {message.message}\n    <div/>\n  </div>\n{/if}\n","<script lang=\"ts\">\n\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import type { ConfigMeta } from \"./configMeta\";\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\";\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\";\n  import nmd from \"nano-markdown\";\n  import type {\n    QuestionableTagRenderingConfigJson\n  } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\";\n  import EditLayerState from \"./EditLayerState\";\n  import { onDestroy } from \"svelte\";\n  import type { JsonSchemaType } from \"./jsonSchema\";\n  import { ConfigMetaUtils } from \"./configMeta.ts\";\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\";\n\n  export let state: EditLayerState;\n  export let path: (string | number)[] = [];\n  export let schema: ConfigMeta;\n  export let startInEditModeIfUnset: boolean = schema.hints && !schema.hints.ifunset\n  let value = new UIEventSource<string | any>(undefined);\n\n  const isTranslation = schema.hints?.typehint === \"translation\" || schema.hints?.typehint === \"rendered\" || ConfigMetaUtils.isTranslation(schema);\n  let type = schema.hints.typehint ?? \"string\";\n\n  let rendervalue = (schema.hints.inline ?? schema.path.join(\".\")) + (isTranslation ? \" <b>{translated(value)}</b>\": \" <b>{value}</b>\");\n \n  if(schema.type === \"boolean\"){\n    rendervalue = undefined\n  }\n  if(schema.hints.typehint === \"tag\" || schema.hints.typehint === \"simple_tag\") {\n    rendervalue = \"{tags()}\"\n  }\n  \n  let helperArgs = schema.hints.typehelper?.split(\",\");\n  let inline = schema.hints.inline !== undefined;\n  if (isTranslation) {\n    type = \"translation\";\n    if (schema.hints.inline) {\n      const inlineValue = schema.hints.inline;\n      rendervalue = inlineValue;\n      inline = false;\n      helperArgs = [inlineValue.substring(0, inlineValue.indexOf(\"{\")), inlineValue.substring(inlineValue.indexOf(\"}\") + 1)];\n    }\n  }\n  if (type.endsWith(\"[]\")) {\n    type = type.substring(0, type.length - 2);\n  }\n\n  const configJson: QuestionableTagRenderingConfigJson = {\n    id: path.join(\"_\"),\n    render: rendervalue,\n    question: schema.hints.question,\n    questionHint: nmd(schema.description),\n    freeform: schema.type === \"boolean\" ? undefined : {\n      key: \"value\",\n      type,\n      inline,\n      helperArgs\n    }\n  };\n\n  if (schema.hints.default) {\n    configJson.mappings = [{\n      if: \"value=\", // We leave this blank\n      then: path.at(-1) + \" is not set. The default value <b>\" + schema.hints.default + \"</b> will be used. \" + (schema.hints.ifunset ?? \"\")\n    }];\n  } else if (!schema.required) {\n    configJson.mappings = [{\n      if: \"value=\",\n      then: path.at(-1) + \" is not set. \" + (schema.hints.ifunset ?? \"\")\n    }];\n  }\n\n  function mightBeBoolean(type: undefined | JsonSchemaType): boolean {\n    if (type === undefined) {\n      return false;\n    }\n    if (type[\"type\"]) {\n      type = type[\"type\"];\n    }\n    if (type === \"boolean\") {\n      return true;\n    }\n    if (!Array.isArray(type)) {\n      return false;\n    }\n\n    return type.some(t => mightBeBoolean(t));\n  }\n\n  if (mightBeBoolean(schema.type)) {\n    configJson.mappings = configJson.mappings ?? [];\n    configJson.mappings.push(\n      {\n        if: \"value=true\",\n        then: schema.hints?.iftrue ?? \"Yes\"\n      },\n      {\n        if: \"value=false\",\n        then: schema.hints?.iffalse ?? \"No\"\n      }\n    );\n  }\n\n  if (schema.hints.suggestions) {\n    if (!configJson.mappings) {\n      configJson.mappings = [];\n    }\n    configJson.mappings.push(...schema.hints.suggestions);\n  }\n  let config: TagRenderingConfig;\n  let err: string = undefined;\n  let messages = state.messagesFor(path)\n  try {\n    config = new TagRenderingConfig(configJson, \"config based on \" + schema.path.join(\".\"));\n  } catch (e) {\n    console.error(e, config);\n    err = path.join(\".\") + \" \" + e;\n  }\n  let startValue = state.getCurrentValueFor(path);\n  let startInEditMode = !startValue && startInEditModeIfUnset\n  const tags = new UIEventSource<Record<string, string>>({ value: startValue });\n  try {\n    onDestroy(state.register(path, tags.map(tgs => {\n      const v = tgs[\"value\"];\n      if (typeof v !== \"string\") {\n        return { ... v };\n      }\n      if (schema.type === \"boolan\") {\n        return v === \"true\" || v === \"yes\" || v === \"1\";\n      }\n      if (mightBeBoolean(schema.type)) {\n        if (v === \"true\" || v === \"yes\" || v === \"1\") {\n          return true;\n        }\n        if (v === \"false\" || v === \"no\" || v === \"0\") {\n          return false;\n        }\n      }\n      if (schema.type === \"number\") {\n        if (v === \"\") {\n          return undefined;\n        }\n        return Number(v);\n      }\n      if (isTranslation && typeof v === \"string\") {\n        if (v === \"\") {\n          return {};\n        }\n        return JSON.parse(v);\n      }\n      return v;\n    }), isTranslation));\n  } catch (e) {\n    console.error(\"Could not register\", path, \"due to\", e);\n  }\n</script>\n{#if err !== undefined}\n  <span class=\"alert\">{err}</span>\n{:else}\n  <div class=\"w-full flex flex-col\">\n    <TagRenderingEditable editMode={startInEditMode} {config} selectedElement={undefined} showQuestionIfUnknown={true} {state} {tags} />\n    {#if $messages.length > 0}\n      {#each $messages as message}\n        <ShowConversionMessage {message}/>\n      {/each}\n    {/if}\n    {#if window.location.hostname === \"127.0.0.1\"}\n      <span class=\"subtle\">SchemaBasedField <b>{path.join(\".\")}</b> <span class=\"cursor-pointer\" on:click={() => console.log(schema)}>{schema.hints.typehint}</span></span>\n    {/if}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import type { ConfigMeta } from \"./configMeta\";\n  import EditLayerState from \"./EditLayerState\";\n  import * as questions from \"../../assets/generated/layers/questions.json\";\n  import { ImmutableStore, Store } from \"../../Logic/UIEventSource\";\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\";\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\";\n  import nmd from \"nano-markdown\";\n  import type {\n    QuestionableTagRenderingConfigJson\n  } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson.js\";\n  import type { TagRenderingConfigJson } from \"../../Models/ThemeConfig/Json/TagRenderingConfigJson\";\n  import FromHtml from \"../Base/FromHtml.svelte\";\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\";\n  import NextButton from \"../Base/NextButton.svelte\";\n\n  export let state: EditLayerState;\n  export let path: ReadonlyArray<string | number>;\n  export let schema: ConfigMeta;\n  let value = state.getStoreFor(path);\n\n  let perId: Record<string, TagRenderingConfigJson[]> = {};\n  for (let tagRendering of questions.tagRenderings) {\n    if (tagRendering.labels) {\n      for (let label of tagRendering.labels) {\n        perId[label] = (perId[label] ?? []).concat(tagRendering);\n      }\n    }\n    perId[tagRendering.id] = [tagRendering];\n  }\n\n  let configJson: Store<QuestionableTagRenderingConfigJson[]> = value.map(x => {\n    if (typeof x === \"string\") {\n      return perId[x];\n    } else {\n      return [x];\n    }\n  });\n  let configs: Store<TagRenderingConfig[]> = configJson.map(configs => {\n    if (!configs) {\n      return [{ error: \"No configuartions found\" }];\n    }\n    console.log(\"Regenerating configs\");\n    return configs.map(config => {\n      try {\n        return new TagRenderingConfig(config);\n      } catch (e) {\n        return { error: e };\n      }\n    });\n  });\n  let id: Store<string> = value.mapD(c => {\n    if (c?.id) {\n      return c.id;\n    }\n    if (typeof c === \"string\") {\n      return c;\n    }\n    return undefined;\n  });\n\n  let tags = state.testTags;\n\n  let messages = state.messagesFor(path);\n\n  let description = schema.description;\n  if (description) {\n    try {\n      description = nmd(description);\n    } catch (e) {\n      console.error(\"Could not convert description to markdown\", { description });\n    }\n  }\n</script>\n\n<div class=\"flex\">\n\n  <div class=\"flex flex-col interactive border-interactive m-4 w-full\">\n\n    {#if $id}\n      TagRendering {$id}\n    {/if}\n    <NextButton clss=\"primary\" on:click={() => state.highlightedItem.setData({path, schema})}>\n      {#if schema.hints.question}\n        {schema.hints.question}\n      {/if}\n    </NextButton>\n    {#if description}\n      <FromHtml src={description} />\n    {/if}\n    {#each $messages as message}\n      <ShowConversionMessage {message} />\n    {/each}\n\n    <slot class=\"self-end my-4\"></slot>\n\n\n  </div>\n\n  <div class=\"flex flex-col w-full m-4\">\n    <h3>Preview of this question</h3>\n    {#each $configs as config}\n      {#if config.error !== undefined}\n        <div class=\"alert\">Could not create a preview of this tagRendering: {config.error}</div>\n      {:else}\n        {#if config.condition && !config.condition.matchesProperties($tags)}\n          This tagRendering is currently not shown. It will appear if the feature matches the condition\n          <b>\n            <FromHtml src={config.condition.asHumanString(true, false, {})} />\n          </b>\n          \n          Try to answer the relevant question above\n          {:else if config.metacondition && !config.metacondition.matchesProperties($tags)}\n            This tagRendering is currently not shown. It will appear if the feature matches the metacondition\n            <b>\n              <FromHtml src={config.metacondition.asHumanString(true, false, {})} />\n            </b>\n          For a breakdown of usable meta conditions, go to a mapcomplete theme > settings and enable debug-data. The meta-tags will appear at the bottom \n        {:else}\n          <TagRenderingEditable\n            selectedElement={state.exampleFeature}\n            config={config} editingEnabled={new ImmutableStore(true)} showQuestionIfUnknown={true}\n            {state}\n            {tags}></TagRenderingEditable>\n        {/if}\n      {/if}\n    {/each}\n  </div>\n\n\n</div>\n","<script lang=\"ts\">\n\n  import EditLayerState from \"./EditLayerState\";\n  import type { ConfigMeta } from \"./configMeta\";\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import type {\n    QuestionableTagRenderingConfigJson\n  } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\";\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\";\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\";\n  import { onDestroy } from \"svelte\";\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\";\n  import type { JsonSchemaType } from \"./jsonSchema\";\n  // @ts-ignore\n  import nmd from \"nano-markdown\";\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\";\n  import exp from \"constants\";\n\n  /**\n   * If 'types' is defined: allow the user to pick one of the types to input.\n   */\n\n  export let state: EditLayerState;\n  export let path: (string | number)[] = [];\n  export let schema: ConfigMeta;\n  let expertMode = state.expertMode;\n  const defaultOption = schema.hints.typesdefault ? Number(schema.hints.typesdefault) : undefined;\n\n  const hasBooleanOption = (<JsonSchemaType[]>schema.type)?.findIndex(t => t[\"type\"] === \"boolean\");\n  const types = schema.hints.types.split(\";\");\n  if (hasBooleanOption >= 0) {\n    types.splice(hasBooleanOption);\n  }\n\n\n  let lastIsString = false;\n  {\n    const types: string | string[] = Array.isArray(schema.type) ? schema.type[schema.type.length - 1].type : [];\n    lastIsString = types === \"string\" || (Array.isArray(types) && types.some(i => i === \"string\"));\n  }\n\n  if (lastIsString) {\n    types.splice(types.length - 1, 1);\n  }\n  const configJson: QuestionableTagRenderingConfigJson = {\n    id: \"TYPE_OF:\" + path.join(\"_\"),\n    question: \"Which subcategory is needed for \" + schema.path.at(-1) + \"?\",\n    questionHint: nmd(schema.description),\n    mappings: types.map(opt => opt.trim()).filter(opt => opt.length > 0).map((opt, i) => ({\n      if: \"chosen_type_index=\" + i,\n      addExtraTags: [\"value=\"],\n      then: opt + (i === defaultOption ? \" (Default)\" : \"\")\n    })),\n    render: !lastIsString ? undefined : (schema.hints.inline ?? \"Use a hardcoded value: <b>{value}</b>\"),\n    freeform: !lastIsString ? undefined : {\n      key: \"value\",\n      inline: true,\n      type: schema.hints.typehint,\n      addExtraTags: [\"chosen_type_index=\"]\n    }\n  };\n  let tags = new UIEventSource<Record<string, string>>({});\n\n  if (schema.hints.ifunset) {\n    configJson.mappings.push(\n      {\n        if: { and: [\"value=\", \"chosen_type_index=\"] },\n        then: schema.hints.ifunset\n      }\n    );\n  }\n  if (schema.hints.suggestions) {\n    configJson.mappings.push(...schema.hints.suggestions);\n  }\n\n  if (hasBooleanOption >= 0) {\n    configJson.mappings.unshift(\n      {\n        if: \"value=true\",\n        then: (schema.hints.iftrue ?? \"Yes\"),\n        addExtraTags: [\"chosen_type_index=\"]\n      },\n      {\n        if: \"value=false\",\n        then: (schema.hints.iffalse ?? \"No\"),\n        addExtraTags: [\"chosen_type_index=\"]\n      }\n    );\n  }\n  const config = new TagRenderingConfig(configJson, \"config based on \" + schema.path.join(\".\"));\n  let chosenOption: number = (defaultOption);\n\n\n  const existingValue = state.getCurrentValueFor(path);\n  let hasOverride = existingValue?.override !== undefined;\n  if (hasBooleanOption >= 0 && (existingValue === true || existingValue === false)) {\n    tags.setData({ value: \"\" + existingValue });\n  } else if (lastIsString && typeof existingValue === \"string\") {\n    tags.setData({ value: existingValue });\n    chosenOption = undefined;\n  } else if (existingValue) {\n    // We found an existing value. Let's figure out what type it matches and select that one\n    // We run over all possibilities and check what is required\n    const possibleTypes: { index: number, matchingPropertiesCount: number, optionalMatches: number }[] = [];\n    outer: for (let i = 0; i < (<[]>schema.type).length; i++) {\n      const type = schema.type[i];\n      let optionalMatches = 0;\n      for (const key of Object.keys(type.properties ?? {})) {\n        if (!!existingValue[key]) {\n          optionalMatches++;\n        }\n      }\n      if (type.required) {\n        let numberOfMatches = 0;\n\n        for (const requiredAttribute of type.required) {\n          if (existingValue[requiredAttribute] === undefined) {\n            // The 'existingValue' does _not_ have this required attribute, so it cannot be of this type\n            continue outer;\n          }\n          numberOfMatches++;\n        }\n        possibleTypes.push({ index: i, matchingPropertiesCount: numberOfMatches, optionalMatches });\n      } else {\n        possibleTypes.push({ index: i, matchingPropertiesCount: 0, optionalMatches });\n      }\n\n\n    }\n    possibleTypes.sort((a, b) => b.optionalMatches - a.optionalMatches);\n    possibleTypes.sort((a, b) => b.matchingPropertiesCount - a.matchingPropertiesCount);\n    if (possibleTypes.length > 0) {\n      chosenOption = possibleTypes[0].index;\n      tags.setData({ chosen_type_index: \"\" + chosenOption });\n\n    }\n  } else if (defaultOption !== undefined) {\n    tags.setData({ chosen_type_index: \"\" + defaultOption });\n  } else {\n    chosenOption = defaultOption;\n  }\n\n  if (hasBooleanOption >= 0 || lastIsString) {\n\n    const directValue = tags.mapD(tags => {\n      if (tags[\"chosen_type_index\"]) {\n        return \"\";\n      }\n      if (lastIsString) {\n        return tags[\"value\"];\n      }\n      return tags[\"value\"] === \"true\";\n    });\n    onDestroy(state.register(path, directValue));\n  }\n\n  let subSchemas: ConfigMeta[] = [];\n\n  let subpath = path;\n  const store = state.getStoreFor(path);\n  onDestroy(tags.addCallbackAndRun(tags => {\n    if (tags[\"value\"] !== undefined && tags[\"value\"] !== \"\") {\n      chosenOption = undefined;\n      return;\n    }\n    const oldOption = chosenOption;\n    chosenOption = tags[\"chosen_type_index\"] ? Number(tags[\"chosen_type_index\"]) : defaultOption;\n    const type = schema.type[chosenOption];\n    if (chosenOption !== oldOption) {\n      // Reset the values beneath\n      subSchemas = [];\n      const o = state.getCurrentValueFor(path) ?? {};\n      for (const key of type?.required ?? []) {\n        o[key] ??= {};\n      }\n      store.setData(o);\n    }\n    if (!type) {\n      return;\n    }\n    subpath = path;\n    const cleanPath = <string[]>path.filter(p => typeof p === \"string\");\n    if (type[\"$ref\"] === \"#/definitions/Record<string,string>\") {\n      // The subtype is a translation object\n      const schema = state.getTranslationAt(cleanPath);\n      subSchemas.push(schema);\n      subpath = path.slice(0, path.length - 2);\n      return;\n    }\n    if (!type.properties) {\n      return;\n    }\n    for (const crumble of Object.keys(type.properties)) {\n      subSchemas.push(...(state.getSchema([...cleanPath, crumble])));\n    }\n  }));\n  let messages = state.messagesFor(path);\n\n\n</script>\n\n<div class=\"p-2 border-2 border-dashed border-gray-300 flex flex-col gap-y-2 m-1\">\n  {#if schema.hints.title !== undefined}\n    <h3>{schema.hints.title}</h3>\n    <div> {schema.description} </div>\n  {/if}\n  {#if hasOverride}\n    This object refers to {existingValue.builtin} and overrides some properties. This cannot be edited with MapComplete\n    Studio\n  {:else}\n    <div>\n      <TagRenderingEditable {config} selectedElement={undefined} showQuestionIfUnknown={true} {state} {tags} />\n    </div>\n\n    {#if chosenOption !== undefined}\n      {#each subSchemas as subschema}\n        {#if $expertMode || subschema.hints?.group !== \"expert\"}\n          <SchemaBasedInput {state} schema={subschema}\n                            path={[...subpath, (subschema?.path?.at(-1) ?? \"???\")]}></SchemaBasedInput>\n          {:else if window.location.hostname === \"127.0.0.1\"}\n            <span class=\"subtle\">Omitted expert question {subschema.path.join(\".\")}</span>\n          \n        {/if}\n      {/each}\n    {:else if $messages.length > 0}\n      {#each $messages as message}\n        <ShowConversionMessage {message} />\n      {/each}\n    {/if}\n  {/if}\n  {#if window.location.hostname === \"127.0.0.1\"}\n    <span class=\"subtle\">SchemaBasedMultiType <b>{path.join(\".\")}</b> <span class=\"cursor-pointer\"\n                                                                            on:click={() => console.log(schema)}>{schema.hints.typehint}</span></span>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import EditLayerState from \"./EditLayerState\";\n  import type { ConfigMeta } from \"./configMeta\";\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\";\n  import SchemaBasedField from \"./SchemaBasedField.svelte\";\n  import { TrashIcon } from \"@babeard/svelte-heroicons/mini\";\n  import QuestionPreview from \"./QuestionPreview.svelte\";\n  import { Utils } from \"../../Utils\";\n  import SchemaBasedMultiType from \"./SchemaBasedMultiType.svelte\";\n  import ShowConversionMessage from \"./ShowConversionMessage.svelte\";\n\n  export let state: EditLayerState;\n  export let schema: ConfigMeta;\n\n\n  let title = schema.path.at(-1);\n  let singular = title;\n  if (title?.endsWith(\"s\")) {\n    singular = title.slice(0, title.length - 1);\n  }\n  let article = \"a\";\n  if (singular?.match(/^[aeoui]/)) {\n    article = \"an\";\n  }\n  export let path: (string | number)[] = [];\n  const isTagRenderingBlock = path.length === 1 && path[0] === \"tagRenderings\";\n\n  if (isTagRenderingBlock) {\n    schema = { ...schema };\n    schema.description = undefined;\n  }\n\n  const subparts: ConfigMeta = state.getSchemaStartingWith(schema.path)\n    .filter(part => part.path.length - 1 === schema.path.length);\n  /**\n   * Store the _indices_\n   */\n  export let values: UIEventSource<number[]> = new UIEventSource<number[]>([]);\n\n  const currentValue = <[]>state.getCurrentValueFor(path);\n  if (currentValue) {\n    if (!Array.isArray(currentValue)) {\n      console.error(\"SchemaBaseArray for path\", path, \"expected an array as initial value, but got a\", typeof currentValue, currentValue);\n    } else {\n      values.setData(currentValue.map((_, i) => i));\n    }\n  }\n  let createdItems = values.data.length;\n  let messages = state.messagesFor(path)\n\n\n  function createItem(valueToSet?: any) {\n    values.data.push(createdItems);\n    if (valueToSet) {\n      state.getStoreFor([...path, createdItems]).setData(valueToSet);\n    }\n    createdItems++;\n    values.ping();\n    \n    if(isTagRenderingBlock){\n      if(typeof valueToSet === \"string\"){\n        // THis is very broken state.highlightedItem.setData({path: [...path, createdItems], schema})\n      }else{\n        state.highlightedItem.setData({path: [...path, createdItems], schema})\n      }\n    }\n  }\n\n  function fusePath(i: number, subpartPath: string[]): (string | number)[] {\n    const newPath = [...path, i];\n    const toAdd = [...subpartPath];\n    for (const part of path) {\n      if (toAdd[0] === part) {\n        toAdd.splice(0, 1);\n      }\n    }\n    newPath.push(...toAdd);\n    return newPath;\n  }\n\n  function del(i) {\n    const index = i;\n    console.log(\"Deleting\", index);\n    values.data.splice(index, 1);\n    values.ping();\n\n    const store = <UIEventSource<[]>>state.getStoreFor(path);\n    store.data.splice(index, 1);\n    store.setData(Utils.NoNull(store.data));\n    state.configuration.ping();\n  }\n\n  function swap(indexA, indexB) {\n    const valueA = values.data[indexA];\n    const valueB = values.data[indexB];\n\n    values.data[indexA] = valueB;\n    values.data[indexB] = valueA;\n    values.ping();\n\n    const store = <UIEventSource<[]>>state.getStoreFor(path);\n    const svalueA = store.data[indexA];\n    const svalueB = store.data[indexB];\n    store.data[indexA] = svalueB;\n    store.data[indexB] = svalueA;\n    store.ping();\n    state.configuration.ping();\n  }\n\n  function moveTo(currentIndex, targetIndex) {\n    const direction = currentIndex > targetIndex ? -1 : +1;\n    do {\n      swap(currentIndex, currentIndex + direction);\n      currentIndex = currentIndex + direction;\n    } while (currentIndex !== targetIndex);\n  }\n\n  function schemaForMultitype() {\n    const sch = {...schema}\n    sch.hints.typehint = undefined\n    return sch\n  }\n\n\n</script>\n<div class=\"pl-2\">\n  <h3>{schema.path.at(-1)}</h3>\n\n  {#if subparts.length > 0}\n        <span class=\"subtle\">\n            {schema.description}\n        </span>\n  {/if}\n\n  {#if $values.length === 0}\n    No values are defined\n    {#if $messages.length > 0}\n      {#each $messages as message}\n        <ShowConversionMessage {message}/>\n      {/each}\n    {/if}\n  {:else if subparts.length === 0}\n    <!-- We need an array of values, so we use the typehint of the _parent_ element as field -->\n    {#each $values as value, i (value)}\n      <div class=\"flex w-full\">\n        <SchemaBasedField {state} {schema} path={[...path, value]} />\n        <button class=\"border-black border rounded-full p-1 w-fit h-fit\"\n                on:click={() => {del(i)}}>\n          <TrashIcon class=\"w-4 h-4\" />\n        </button>\n      </div>\n    {/each}\n  {:else}\n    {#each $values as value, i (value)}\n\n      {#if !isTagRenderingBlock}\n        <div class=\"flex justify-between items-center\">\n          <h3 class=\"m-0\">{singular} {value}</h3>\n          <button class=\"border-black border rounded-full p-1 w-fit h-fit\"\n                  on:click={() => {del(i)}}>\n            <TrashIcon class=\"w-4 h-4\" />\n          </button>\n        </div>\n      {/if}\n      <div class=\"border border-black\">\n        {#if isTagRenderingBlock}\n          <QuestionPreview {state} path={[...path, value]} {schema}>\n            <button on:click={() => {del(i)}}>\n              <TrashIcon class=\"w-4 h-4\" />\n              Delete this question\n            </button>\n\n            {#if i > 0}\n              <button on:click={() => {moveTo(i, 0)}}>\n                Move to front\n              </button>\n\n              <button on:click={() => {swap(i, i-1)}}>\n                Move up\n              </button>\n            {/if}\n            {#if i + 1 < $values.length}\n              <button on:click={() => {swap(i, i+1)}}>\n                Move down\n              </button>\n              <button on:click={() => {moveTo(i, $values.length-1)}}>\n                Move to back\n              </button>\n            {/if}\n\n          </QuestionPreview>\n          {:else if schema.hints.types}\n         <SchemaBasedMultiType {state} path={fusePath(value, [])} schema={schemaForMultitype()}/>\n        {:else}\n          {#each subparts as subpart}\n            <SchemaBasedInput {state} path={fusePath(value, subpart.path)} schema={subpart} />\n          {/each}\n        {/if}\n      </div>\n    {/each}\n  {/if}\n  <div class=\"flex\">\n    <button on:click={() => createItem()}>Add {article} {singular}</button>\n    {#if path.length === 1 && path[0] === \"tagRenderings\"}\n      <button on:click={() => {createItem(\"images\");}}>Add a builtin tagRendering</button>\n    {/if}\n    <slot name=\"extra-button\" />\n  </div>\n</div>\n","<script lang=\"ts\">\n  import type { ConfigMeta } from \"./configMeta\";\n  import EditLayerState from \"./EditLayerState\";\n  import type {\n    QuestionableTagRenderingConfigJson\n  } from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\";\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\";\n  import TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\";\n\n  export let schema: ConfigMeta;\n  export let state: EditLayerState;\n  export let path: (string | number)[] = [];\n\n  const configJson: QuestionableTagRenderingConfigJson = {\n    mappings: schema.hints.suggestions,\n    multiAnswer: true,\n    id: \"multi_anwser_\"+path.join(\"_\"),\n    question: schema.hints.question\n  }\n  const tags = new UIEventSource({})\n\n  {\n    // Setting the initial value\n    const v = <string[]> state.getCurrentValueFor(path)\n    if(v && v.length > 0){\n      tags.setData({value: v.join(\";\")})\n    }\n  }\n  \n  tags.addCallbackD(tags => {\n    const values = tags[\"value\"]?.split(\";\")\n    if(!values){\n      return\n    }\n    state.setValueAt(path, values)\n  })\n  \n  const config = new TagRenderingConfig(configJson)\n</script>\n\n<div>\n  <TagRenderingEditable {config} selectedElement={undefined} showQuestionIfUnknown={true} {state} {tags} />\n</div>\n","<script lang=\"ts\">\n  import type { ConfigMeta } from \"./configMeta\";\n  import SchemaBasedField from \"./SchemaBasedField.svelte\";\n  import EditLayerState from \"./EditLayerState\";\n  import SchemaBasedArray from \"./SchemaBasedArray.svelte\";\n  import SchemaBasedMultiType from \"./SchemaBasedMultiType.svelte\";\n  import ArrayMultiAnswer from \"./ArrayMultiAnswer.svelte\";\n\n  export let schema: ConfigMeta;\n  export let state: EditLayerState;\n  export let path: (string | number)[] = [];\n  \n</script>\n{#if schema.hints?.typehint?.endsWith(\"[]\")}\n  <!-- We cheat a bit here by matching this 'magical' type... -->\n  <SchemaBasedArray {path} {state} {schema} />\n{:else if schema.type === \"array\" && schema.hints.multianswer === \"true\"}\n  <ArrayMultiAnswer {path} {state} {schema}/>\n{:else if schema.type === \"array\"}\n  <SchemaBasedArray {path} {state} {schema} />\n{:else if schema.hints?.types}\n  <SchemaBasedMultiType {path} {state} {schema} />\n{:else}\n  <SchemaBasedField {path} {state} {schema} />\n{/if}\n","<script lang=\"ts\">/***\n * A 'region' is a collection of properties that can be edited which are somewhat related.\n * They will typically be a subset of some properties\n */\nimport type { ConfigMeta } from \"./configMeta\";\nimport EditLayerState from \"./EditLayerState\";\nimport SchemaBasedInput from \"./SchemaBasedInput.svelte\";\n\nexport let state: EditLayerState;\nexport let configs: ConfigMeta[];\nexport let title: string | undefined = undefined;\n\nexport let path: (string | number)[] = [];\n\nlet expertMode = state.expertMode\nlet configsFiltered = $expertMode ? configs : configs.filter(schema => schema.hints?.group !== \"expert\")\n\n</script>\n{#if configs === undefined}\n  Bug: 'Region' received 'undefined'\n{:else if configs.length === 0}\n  Bug: Region received empty list as configuration\n{:else if title}\n  <div class=\"w-full flex flex-col\">\n    <h3>{title}</h3>\n    <div class=\"pl-2 border border-black flex flex-col gap-y-1 w-full\">\n      <slot name=\"description\" />\n      {#each configsFiltered as config}\n        <SchemaBasedInput {state} path={config.path} schema={config} />\n      {/each}\n    </div>\n  </div>\n{:else}\n  <div class=\"pl-2 flex flex-col gap-y-1 w-full\">\n    {#each configsFiltered as config}\n      <SchemaBasedInput {state} path={path.concat(config.path)} schema={config} />\n    {/each}\n  </div>\n{/if}\n\n","<script lang=\"ts\">\n  import EditLayerState from \"./EditLayerState\";\n  import { ExclamationIcon } from \"@rgossiaux/svelte-heroicons/solid\";\n\n  export let firstPaths: Set<string>;\n  export let state: EditLayerState;\n  let messagesCount = state.messages.map(msgs => msgs.filter(msg => {\n    const pth = msg.context.path\n    return firstPaths.has(pth[0]) || (pth.length > 1 && firstPaths.has(pth[1]));\n  }).length);\n\n</script>\n\n{#if $messagesCount > 0}\n  <span class=\"alert flex w-min\">\n    <ExclamationIcon class=\"w-6 h-6\" />\n    {$messagesCount}\n  </span>\n{/if}\n","<script lang=\"ts\">\n\n  import EditLayerState from \"./EditLayerState\";\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import type { TagConfigJson } from \"../../Models/ThemeConfig/Json/TagConfigJson\";\n  import { TagUtils } from \"../../Logic/Tags/TagUtils\";\n  import FromHtml from \"../Base/FromHtml.svelte\";\n  import { PencilIcon } from \"@rgossiaux/svelte-heroicons/outline\";\n  import Region from \"./Region.svelte\";\n  import type { ConfigMeta } from \"./configMeta\";\n  import configs from \"../../assets/schemas/questionabletagrenderingconfigmeta.json\";\n  import { Utils } from \"../../Utils\";\n  import ToSvelte from \"../Base/ToSvelte.svelte\";\n  import { VariableUiElement } from \"../Base/VariableUIElement\";\n\n  export let state: EditLayerState;\n  export let path: (string | number)[];\n  let tag: UIEventSource<TagConfigJson> = state.getStoreFor([...path, \"if\"]);\n  let parsedTag = tag.map(t => t ? TagUtils.Tag(t) : undefined);\n  let exampleTags = parsedTag.map(pt => {\n    if (!pt) {\n      return {};\n    }\n    const keys = pt.usedKeys();\n    const o = {};\n    for (const key of keys) {\n      o[key] = \"value\";\n    }\n    return o;\n  });\n  let uploadableOnly: boolean = true;\n\n  let thenText: UIEventSource<Record<string, string>> = state.getStoreFor([...path, \"then\"])\n  let thenTextEn = thenText   .mapD(translation => typeof translation === \"string\" ? translation : translation[\"en\"] )\n  let editMode = Object.keys($thenText).length === 0;\n\n  let mappingConfigs: ConfigMeta[] = configs.filter(c => c.path[0] === \"mappings\")\n    .map(c => <ConfigMeta>Utils.Clone(c))\n    .map(c => {\n      c.path.splice(0, 1);\n      return c;\n    })\n    .filter(c => c.path.length == 1 && c.hints.group !== \"hidden\");\n</script>\n\n<button on:click={() => {editMode = !editMode}}>\n  <PencilIcon class=\"w-6 h-6\" />\n</button>\n\n{#if editMode}\n  <div class=\"flex justify-between items-start w-full\">\n    <div class=\"flex flex-col w-full\">\n      <Region {state} configs={mappingConfigs} path={path} />\n    </div>\n\n    <slot name=\"delete\" />\n  </div>\n{:else}\n  <div>\n    {#if Object.keys($thenText).length > 0}\n      <b>\n        {$thenTextEn}\n      </b>\n    {:else}\n      <i>No then is set</i>\n    {/if}\n    <FromHtml src={ $parsedTag?.asHumanString(false, false, $exampleTags)} />\n  </div>\n{/if}\n\n","<script lang=\"ts\">/**\n * Little helper class to deal with choosing a builtin tagRendering or defining one yourself.\n * Breaks the ideology that everything should be schema based\n */\nimport EditLayerState from \"./EditLayerState\";\nimport type { ConfigMeta } from \"./configMeta\";\nimport type {\n  MappingConfigJson,\n  QuestionableTagRenderingConfigJson\n} from \"../../Models/ThemeConfig/Json/QuestionableTagRenderingConfigJson\";\nimport TagRenderingConfig from \"../../Models/ThemeConfig/TagRenderingConfig\";\nimport TagRenderingEditable from \"../Popup/TagRendering/TagRenderingEditable.svelte\";\nimport { Store, UIEventSource } from \"../../Logic/UIEventSource\";\nimport * as questions from \"../../assets/generated/layers/questions.json\";\nimport MappingInput from \"./MappingInput.svelte\";\nimport { TrashIcon } from \"@rgossiaux/svelte-heroicons/outline\";\nimport questionableTagRenderingSchemaRaw from \"../../assets/schemas/questionabletagrenderingconfigmeta.json\";\nimport SchemaBasedField from \"./SchemaBasedField.svelte\";\nimport Region from \"./Region.svelte\";\nimport exp from \"constants\";\n\nexport let state: EditLayerState;\nexport let schema: ConfigMeta;\nexport let path: (string | number)[];\nlet expertMode = state.expertMode;\nconst store = state.getStoreFor(path);\nlet value = store.data;\n\n/**\n * Allows the theme builder to create 'writable' themes.\n * Should only be enabled for 'tagrenderings' in the theme, if the source is OSM\n */\nlet allowQuestions: Store<boolean> = (state.configuration.mapD(config => path.at(0) === \"tagRenderings\" && config.source?.geoJson === undefined));\n\n\nlet mappingsBuiltin: MappingConfigJson[] = [];\nlet perLabel: Record<string, MappingConfigJson> = {};\nfor (const tr of questions.tagRenderings) {\n  let description = tr[\"description\"] ?? tr[\"question\"] ?? \"No description available\";\n  description = description[\"en\"] ?? description;\n  if (tr[\"labels\"]) {\n    const labels: string[] = tr[\"labels\"];\n    for (const label of labels) {\n      let labelMapping: MappingConfigJson = perLabel[label];\n\n      if (!labelMapping) {\n        labelMapping = {\n          if: \"value=\" + label,\n          then: {\n            en: \"Builtin collection <b>\" + label + \"</b>:\"\n          }\n        };\n        perLabel[label] = labelMapping;\n        mappingsBuiltin.push(labelMapping);\n      }\n      labelMapping.then.en = labelMapping.then.en + \"<div>\" + description + \"</div>\";\n    }\n  }\n\n\n  mappingsBuiltin.push({\n    if: \"value=\" + tr[\"id\"],\n    then: {\n      \"en\": \"Builtin <b>\" + tr[\"id\"] + \"</b> <div class='subtle'>\" + description + \"</div>\"\n    }\n  });\n}\n\n\nconst configBuiltin = new TagRenderingConfig(<QuestionableTagRenderingConfigJson>{\n  question: \"Which builtin element should be shown?\",\n  mappings: mappingsBuiltin\n});\n\n\nconst tags = new UIEventSource({ value });\n\ntags.addCallbackAndRunD(tgs => {\n  store.setData(tgs[\"value\"]);\n});\n\nlet mappings: UIEventSource<MappingConfigJson[]> = state.getStoreFor([...path, \"mappings\"]);\n\nconst topLevelItems: Record<string, ConfigMeta> = {};\nfor (const item of questionableTagRenderingSchemaRaw) {\n  if (item.path.length === 1) {\n    topLevelItems[item.path[0]] = <ConfigMeta>item;\n  }\n}\n\nfunction initMappings() {\n  if (mappings.data === undefined) {\n    mappings.setData([]);\n  }\n}\n\nconst items = new Set([\"question\", \"questionHint\", \"multiAnswer\", \"freeform\", \"render\", \"condition\", \"metacondition\", \"mappings\", \"icon\"]);\nconst ignored = new Set([\"labels\", \"description\", \"classes\"]);\n\nconst freeformSchemaAll = <ConfigMeta[]>questionableTagRenderingSchemaRaw\n  .filter(schema => schema.path.length == 2 && schema.path[0] === \"freeform\" && ($allowQuestions || schema.path[1] === \"key\"));\nlet freeformSchema = $expertMode ? freeformSchemaAll : freeformSchemaAll.filter(schema => schema.hints?.group !== \"expert\")\nconst missing: string[] = questionableTagRenderingSchemaRaw.filter(schema => schema.path.length >= 1 && !items.has(schema.path[0]) && !ignored.has(schema.path[0])).map(schema => schema.path.join(\".\"));\nconsole.log({ state });\n\n</script>\n\n{#if typeof $store === \"string\"}\n  <div class=\"flex low-interaction\">\n    <TagRenderingEditable config={configBuiltin} selectedElement={undefined} showQuestionIfUnknown={true} {state}\n                          {tags} />\n    <slot name=\"upper-right\" />\n  </div>\n{:else}\n  <div class=\"flex flex-col w-full p-1 gap-y-1\">\n    <div class=\"flex justify-end\">\n      <slot name=\"upper-right\" />\n    </div>\n    {#if $allowQuestions}\n      <SchemaBasedField startInEditModeIfUnset={true} {state} path={[...path,\"question\"]}\n                        schema={topLevelItems[\"question\"]} />\n      <SchemaBasedField {state} path={[...path,\"questionHint\"]} schema={topLevelItems[\"questionHint\"]} />\n    {/if}\n    {#each ($mappings ?? []) as mapping, i (mapping)}\n      <div class=\"flex interactive w-full\">\n        <MappingInput {state} path={path.concat([\"mappings\", i])}>\n          <button slot=\"delete\" class=\"rounded-full no-image-background\" on:click={() => { \n            initMappings();\n                      mappings.data.splice(i, 1)\n                      mappings.ping()\n                   }}>\n            <TrashIcon class=\"w-4 h-4\" />\n          </button>\n        </MappingInput>\n      </div>\n    {/each}\n\n    <button class=\"primary\"\n            on:click={() =>{ initMappings(); mappings.data.push({if: undefined, then: {}}); mappings.ping()} }>\n      Add a predefined option\n    </button>\n\n    <SchemaBasedField {state} path={[...path,\"multiAnswer\"]} schema={topLevelItems[\"multiAnswer\"]} />\n\n    <h3>Text field and input element configuration</h3>\n    <div class=\"border-l pl-2 border-gray-800 border-dashed\">\n      <SchemaBasedField {state} path={[...path,\"render\"]} schema={topLevelItems[\"render\"]} />\n      <Region {state} {path} configs={freeformSchema} />\n      <SchemaBasedField {state} path={[...path,\"icon\"]} schema={topLevelItems[\"icon\"]} />\n\n    </div>\n\n    <SchemaBasedField {state} path={[...path,\"condition\"]} schema={topLevelItems[\"condition\"]} />\n    {#if $expertMode}\n      <SchemaBasedField {state} path={[...path,\"metacondition\"]} schema={topLevelItems[\"metacondition\"]} />\n    {/if}\n    {#each missing as field}\n      <SchemaBasedField {state} path={[...path,field]} schema={topLevelItems[field]} />\n    {/each}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\";\n\n  export let messages: ConversionMessage[];\n</script>\n\n{#if messages.length === 0}\n<div class=\"thanks\">\n  No errors, warnings or messages\n</div>\n  {/if}\n\n{#each messages as message}\n  <li>\n    {message.level}\n    <span class=\"literal-code\">{message.context.path.join(\".\")}</span>\n    {message.message}\n    <span class=\"literal-code\">\n                {message.context.operation.join(\".\")}\n              </span>\n  </li>\n{/each}\n","<script lang=\"ts\">\n  import type { HighlightedTagRendering } from \"./EditLayerState\";\n  import EditLayerState from \"./EditLayerState\";\n  import layerSchemaRaw from \"../../assets/schemas/layerconfigmeta.json\";\n  import Region from \"./Region.svelte\";\n  import TabbedGroup from \"../Base/TabbedGroup.svelte\";\n  import { Store, UIEventSource } from \"../../Logic/UIEventSource\";\n  import type { ConfigMeta } from \"./configMeta\";\n  import { Utils } from \"../../Utils\";\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\";\n  import ErrorIndicatorForRegion from \"./ErrorIndicatorForRegion.svelte\";\n  import { ChevronRightIcon } from \"@rgossiaux/svelte-heroicons/solid\";\n  import SchemaBasedInput from \"./SchemaBasedInput.svelte\";\n  import FloatOver from \"../Base/FloatOver.svelte\";\n  import TagRenderingInput from \"./TagRenderingInput.svelte\";\n  import FromHtml from \"../Base/FromHtml.svelte\";\n  import AllTagsPanel from \"../Popup/AllTagsPanel.svelte\";\n  import QuestionPreview from \"./QuestionPreview.svelte\";\n  import ShowConversionMessages from \"./ShowConversionMessages.svelte\";\n\n  const layerSchema: ConfigMeta[] = <any>layerSchemaRaw;\n\n  export let state: EditLayerState;\n  let messages = state.messages;\n  let hasErrors = messages.mapD((m: ConversionMessage[]) => m.filter(m => m.level === \"error\").length);\n  const configuration = state.configuration;\n\n  const allNames = Utils.Dedup(layerSchema.map(meta => meta.hints.group));\n\n  const perRegion: Record<string, ConfigMeta[]> = {};\n  for (const region of allNames) {\n    perRegion[region] = layerSchema.filter(meta => meta.hints.group === region);\n  }\n\n\n  let title: Store<string> = state.getStoreFor([\"id\"]);\n  const wl = window.location;\n  const baseUrl = wl.protocol + \"//\" + wl.host + \"/theme.html?userlayout=\";\n\n  function firstPathsFor(...regionNames: string[]): Set<string> {\n    const pathNames = new Set<string>();\n    for (const regionName of regionNames) {\n      const region: ConfigMeta[] = perRegion[regionName];\n      for (const configMeta of region) {\n        pathNames.add(configMeta.path[0]);\n      }\n    }\n    return pathNames;\n\n  }\n\n  function configForRequiredField(id: string): ConfigMeta {\n    let config = layerSchema.find(config => config.path.length === 1 && config.path[0] === id);\n    config = Utils.Clone(config);\n    config.required = true;\n    config.hints.ifunset = undefined;\n    return config;\n  }\n\n  let requiredFields = [\"id\", \"name\", \"description\", \"source\"];\n  let currentlyMissing = state.configuration.map(config => {\n    if (!config) {\n      return [];\n    }\n    const missing = [];\n    for (const requiredField of requiredFields) {\n      if (!config[requiredField]) {\n        missing.push(requiredField);\n      }\n    }\n    return missing;\n  });\n\n  let highlightedItem: UIEventSource<HighlightedTagRendering> = state.highlightedItem;\n</script>\n<div class=\"h-screen flex flex-col\">\n\n  <div class=\"w-full flex justify-between my-2\">\n    <slot />\n    {#if $title === undefined}\n      <h3>Creating a new layer</h3>\n    {:else}\n      <h3>Editing layer {$title}</h3>\n    {/if}\n    {#if $currentlyMissing.length > 0}\n      <div class=\"w-16\"/> <!-- Empty div, simply hide this -->\n    {:else if $hasErrors > 0}\n      <div class=\"alert\">{$hasErrors} errors detected</div>\n    {:else}\n      <a class=\"primary button\" href={baseUrl+state.server.layerUrl(title.data)} target=\"_blank\" rel=\"noopener\">\n        Try it out\n        <ChevronRightIcon class=\"h-6 w-6 shrink-0\" />\n      </a>\n    {/if}\n  </div>\n\n  {#if $currentlyMissing.length > 0}\n\n    {#each requiredFields as required}\n      <SchemaBasedInput {state}\n                        schema={configForRequiredField(required)}\n                        path={[required]} />\n    {/each}\n  {:else}\n    <div class=\"m4 h-full overflow-y-auto\">\n      <TabbedGroup>\n        <div slot=\"title0\" class=\"flex\">General properties\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"Basic\")} {state} />\n        </div>\n        <div class=\"flex flex-col\" slot=\"content0\">\n          <Region {state} configs={perRegion[\"Basic\"]} />\n\n        </div>\n\n\n        <div slot=\"title1\" class=\"flex\">Information panel (questions and answers)\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"title\",\"tagrenderings\",\"editing\")} {state} />\n        </div>\n        <div slot=\"content1\">\n          <QuestionPreview path={[\"title\"]} {state} schema={perRegion[\"title\"][0]}></QuestionPreview>\n          <Region configs={perRegion[\"tagrenderings\"]} {state} title=\"Popup contents\" />\n          <Region configs={perRegion[\"editing\"]} {state} title=\"Other editing elements\" />\n        </div>\n\n        <div slot=\"title2\">\n          Creating a new point\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"presets\")} {state} />\n        </div>\n\n        <div slot=\"content2\">\n          <Region {state} configs={perRegion[\"presets\"]} />\n        </div>\n\n        <div slot=\"title3\" class=\"flex\">Rendering on the map\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"linerendering\",\"pointrendering\")} {state} />\n        </div>\n        <div slot=\"content3\">\n          <Region configs={perRegion[\"linerendering\"]} {state} />\n          <Region configs={perRegion[\"pointrendering\"]} {state} />\n        </div>\n\n        <div slot=\"title4\" class=\"flex\">Advanced functionality\n          <ErrorIndicatorForRegion firstPaths={firstPathsFor(\"advanced\",\"expert\")} {state} />\n        </div>\n        <div slot=\"content4\">\n          <Region configs={perRegion[\"advanced\"]} {state} />\n          <Region configs={perRegion[\"expert\"]} {state} />\n        </div>\n        <div slot=\"title5\">Configuration file</div>\n        <div slot=\"content5\">\n          <div>\n            Below, you'll find the raw configuration file in `.json`-format.\n            This is mostly for debugging purposes\n          </div>\n          <div class=\"literal-code\">\n            <FromHtml src={JSON.stringify($configuration, null, \"  \").replaceAll(\"\\n\",\"</br>\")} />\n          </div>\n\n          <ShowConversionMessages messages={$messages} />\n          <div>\n            The testobject (which is used to render the questions in the 'information panel' item has the following\n            tags:\n          </div>\n\n          <AllTagsPanel tags={state.testTags}></AllTagsPanel>\n        </div>\n      </TabbedGroup>\n    </div>\n    {#if $highlightedItem !== undefined}\n      <FloatOver on:close={() => highlightedItem.setData(undefined)}>\n        <div class=\"mt-16\">\n          <TagRenderingInput path={$highlightedItem.path} {state} schema={$highlightedItem.schema} />\n        </div>\n      </FloatOver>\n    {/if}\n\n  {/if}\n</div>\n","<script>\nexport let color = \"#000000\"\n</script>\n <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"375px\" height=\"375px\" viewBox=\"0 0 375 375\" version=\"1.1\">   <g id=\"surface1\">     <path style=\"fill: none !important;stroke-width:3.262002;stroke-linecap:round;stroke-linejoin:round;stroke:{color};stroke-opacity:0.266355;stroke-miterlimit:4;\" d=\"M 22.390901 12.010996 C 22.390901 17.743283 17.744366 22.390319 12.012079 22.391069 C 6.279792 22.39157 1.632005 17.745285 1.631004 12.012998 C 1.630003 6.280711 6.275788 1.632674 12.008075 1.630922 C 17.740362 1.629421 22.388899 6.274705 22.390901 12.006992 \" transform=\"matrix(15.610589,0,0,15.610589,0,0.00128032)\"/>     <path style=\"fill: none !important;stroke-width:3.262002;stroke-linecap:round;stroke-linejoin:round;stroke:{color};stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 22.390901 12.010996 C 22.390901 14.870133 21.211564 17.602903 19.130895 19.564212 C 17.050476 21.525521 14.252896 22.541458 11.398763 22.372803 \" transform=\"matrix(15.610589,0,0,15.610589,0,0.00128032)\"/>   </g> </svg>","import { Utils } from \"../../Utils\"\nimport Constants from \"../../Models/Constants\"\nimport { LayerConfigJson } from \"../../Models/ThemeConfig/Json/LayerConfigJson\"\nimport { Store } from \"../../Logic/UIEventSource\"\n\nexport default class StudioServer {\n    private readonly url: string\n    private readonly _userId: Store<number>\n\n    constructor(url: string, userId: Store<number>) {\n        this.url = url\n        this._userId = userId\n    }\n\n    public async fetchOverview(): Promise<\n        {\n            id: string\n            owner: number\n            category: \"layers\" | \"themes\"\n        }[]\n    > {\n        const uid = this._userId.data\n        const { allFiles } = <{ allFiles: string[] }>(\n            await Utils.downloadJson(this.url + \"/overview\")\n        )\n        const layerOverview: {\n            id: string\n            owner: number | undefined\n            category: \"layers\" | \"themes\"\n        }[] = []\n        for (let file of allFiles) {\n            let parts = file.split(\"/\")\n            let owner = Number(parts[0])\n            if (!isNaN(owner)) {\n                parts.splice(0, 1)\n                file = file.substring(file.indexOf(\"/\") + 1)\n            } else {\n                owner = undefined\n            }\n            const category = <\"layers\" | \"themes\">parts[0]\n            const id = file.substring(file.lastIndexOf(\"/\") + 1, file.length - \".json\".length)\n            if (Constants.priviliged_layers.indexOf(<any>id) > 0) {\n                continue\n            }\n            layerOverview.push({ id, owner, category })\n        }\n        return layerOverview\n    }\n\n    async fetch(\n        layerId: string,\n        category: \"layers\" | \"themes\",\n        uid?: number\n    ): Promise<LayerConfigJson> {\n        try {\n            return await Utils.downloadJson(this.urlFor(layerId, category, uid))\n        } catch (e) {\n            return undefined\n        }\n    }\n\n    async update(id: string, config: string, category: \"layers\" | \"themes\") {\n        if (id === undefined || id === \"\") {\n            return\n        }\n        await fetch(this.urlFor(id, category), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json;charset=utf-8\",\n            },\n            body: config,\n        })\n    }\n\n    public layerUrl(id: string) {\n        return this.urlFor(id, \"layers\")\n    }\n\n    public urlFor(id: string, category: \"layers\" | \"themes\", uid?: number) {\n        uid ??= this._userId.data\n        const uidStr = uid !== undefined ? \"/\" + uid : \"\"\n        return `${this.url}${uidStr}/${category}/${id}/${id}.json`\n    }\n}\n","<script lang=\"ts\">\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\";\n  import Marker from \"../Map/Marker.svelte\";\n  import NextButton from \"../Base/NextButton.svelte\";\n  import { AllKnownLayouts } from \"../../Customizations/AllKnownLayouts\";\n  import { AllSharedLayers } from \"../../Customizations/AllSharedLayers\";\n  import { createEventDispatcher } from \"svelte\";\n\n  export let info: { id: string, owner: number };\n  export let category: \"layers\" | \"themes\";\n  export let osmConnection: OsmConnection;\n\n  let displayName = UIEventSource.FromPromise(osmConnection.getInformationAboutUser(info.owner)).mapD(response => response.display_name);\n\n  let selfId = osmConnection.userDetails.mapD(ud => ud.uid)\n  function fetchIconDescription(layerId): any {\n    if (category === \"themes\") {\n      return AllKnownLayouts.allKnownLayouts.get(layerId).icon;\n    }\n    return AllSharedLayers.getSharedLayersConfigs().get(layerId)?._layerIcon;\n  }\n\n  const dispatch = createEventDispatcher<{ layerSelected: string }>();\n\n</script>\n\n<NextButton clss=\"small\" on:click={() => dispatch(\"layerSelected\", info)}>\n  <div class=\"w-4 h-4 mr-1\">\n    <Marker icons={fetchIconDescription(info.id)} />\n  </div>\n  <b class=\"px-1\">  {info.id}</b>\n  {#if info.owner && info.owner !== $selfId}\n    (made by {$displayName ?? info.owner})\n  {/if}\n</NextButton>\n","<script lang=\"ts\">\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\";\n  import EditItemButton from \"./EditItemButton.svelte\";\n\n  export let layerIds: { id: string, owner: number }[];\n  export let category: \"layers\" | \"themes\" = \"layers\";\n  export let osmConnection: OsmConnection;\n\n</script>\n\n{#if layerIds.length > 0}\n  <slot name=\"title\" />\n  <div class=\"flex flex-wrap\">\n    {#each Array.from(layerIds) as layer}\n      <EditItemButton info={layer} {category} {osmConnection} on:layerSelected/>\n    {/each}\n  </div>\n{/if}\n","<script lang=\"ts\">\n\n  import BackButton from \"../Base/BackButton.svelte\";\n  import NextButton from \"../Base/NextButton.svelte\";\n  import { createEventDispatcher } from \"svelte\";\n\n  const dispatch = createEventDispatcher<{ back, next }>();\n  export let islast = false;\n  export let isFirst = false\n</script>\n\n\n<div class=\"flex flex-col h-full w-full justify-between\">\n\n  <div class=\"overflow-y-auto\">\n    <slot />\n  </div>\n\n  <div class=\"flex w-full\">\n    {#if !isFirst}\n    <BackButton clss=\"w-full\" on:click={() => dispatch(\"back\")}>\n      Back\n    </BackButton>\n      {:else}\n      <div class=\"w-full\"/>\n      {/if}\n    <NextButton clss=\"primary w-full\" on:click={() => dispatch(\"next\")}>\n      {#if islast}\n        Finish\n      {:else}\n        Next\n      {/if}\n    </NextButton>\n  </div>\n\n</div>\n","<script lang=\"ts\">\n\n  import nmd from \"nano-markdown\";\n  import { createEventDispatcher } from \"svelte\";\n  import WalkthroughStep from \"./WalkthroughStep.svelte\";\n  import FromHtml from \"../Base/FromHtml.svelte\";\n\n  /**\n   * Markdown\n   */\n  export let pages: string[];\n  console.log(\"Walkthrough pages are\", pages)\n\n  let currentPage: number = 0;\n\n  const dispatch = createEventDispatcher<{ done }>();\n\n  function step(incr: number) {\n    if (incr > 0 && currentPage + 1 === pages.length) {\n      dispatch(\"done\");\n      currentPage = 0\n      return\n    }\n    currentPage = Math.min(Math.max(0, currentPage + incr), pages.length);\n  }\n\n</script>\n\n\n<WalkthroughStep on:back={() => step(-1)} on:next={() => step(1)} isFirst={currentPage === 0} islast={currentPage + 1 === pages.length}>\n  <FromHtml src={nmd(pages[currentPage])} />\n</WalkthroughStep>\n\n","<script lang=\"ts\">\n  import { EditThemeState } from \"./EditLayerState\";\n  import type { ConfigMeta } from \"./configMeta\";\n  import { ChevronRightIcon } from \"@rgossiaux/svelte-heroicons/solid\";\n  import type { ConversionMessage } from \"../../Models/ThemeConfig/Conversion/Conversion\";\n  import TabbedGroup from \"../Base/TabbedGroup.svelte\";\n  import ShowConversionMessages from \"./ShowConversionMessages.svelte\";\n  import Region from \"./Region.svelte\";\n\n  export let state: EditThemeState;\n  let schema: ConfigMeta[] = state.schema.filter(schema => schema.path.length > 0);\n  let config = state.configuration;\n  let messages = state.messages;\n  let hasErrors = messages.map((m: ConversionMessage[]) => m.filter(m => m.level === \"error\").length);\n  let title = state.getStoreFor([\"id\"]);\n  const wl = window.location;\n  const baseUrl = wl.protocol + \"//\" + wl.host + \"/theme.html?userlayout=\";\n\n  const perRegion: Record<string, ConfigMeta[]> = {};\n  for (const schemaElement of schema) {\n    const key = schemaElement.hints.group ?? \"no-group\";\n    const list = perRegion[key] ?? (perRegion[key] = []);\n    list.push(schemaElement);\n  }\nconsole.log({perRegion, schema})\n</script>\n<div class=\"flex flex-col h-screen\">\n  <div class=\"w-full flex justify-between my-2\">\n    <slot />\n    <h3>Editing theme {$title}</h3>\n    {#if $hasErrors > 0}\n      <div class=\"alert\">{$hasErrors} errors detected</div>\n    {:else}\n      <a class=\"primary button\" href={baseUrl+state.server.urlFor($title, \"themes\")} target=\"_blank\" rel=\"noopener\">\n        Try it out\n        <ChevronRightIcon class=\"h-6 w-6 shrink-0\" />\n      </a>\n    {/if}\n  </div>\n\n  <div class=\"m4 h-full overflow-y-auto\">\n    {Object.keys(perRegion).join(\";\")}\n    <TabbedGroup>\n      <div slot=\"title0\">Basic properties</div>\n      <div slot=\"content0\">\n        <Region configs={perRegion[\"basic\"]} path={[]} {state} title=\"Basic properties\"/>\n        <Region configs={perRegion[\"start_location\"]} path={[]} {state} title=\"Start location\"/>\n        \n      </div>\n      \n      <div slot=\"title1\">Layers</div>\n      <div slot=\"content1\">\n        <Region configs={perRegion[\"layers\"]} path={[]} {state} />\n        \n      </div>\n      <div slot=\"title2\">Feature switches</div>\n      <div slot=\"content2\">\n        <Region configs={perRegion[\"feature_switches\"]} path={[]} {state}></Region>\n      </div>\n\n      <div slot=\"title3\">Advanced options</div>\n      <div slot=\"content3\">\n        <Region configs={perRegion[\"advanced\"]} path={[]} {state}></Region>\n      </div>\n      \n      <div slot=\"title4\">Configuration file</div>\n      <div slot=\"content4\">\n        <div class=\"literal-code\">\n          {JSON.stringify($config)}\n        </div>\n\n        <ShowConversionMessages messages={$messages}></ShowConversionMessages>\n\n      </div>\n    </TabbedGroup>\n  </div>\n\n</div>\n","<script lang=\"ts\">\n\n\n  import NextButton from \"./Base/NextButton.svelte\";\n  import { Store, UIEventSource } from \"../Logic/UIEventSource\";\n  import EditLayerState, { EditThemeState } from \"./Studio/EditLayerState\";\n  import EditLayer from \"./Studio/EditLayer.svelte\";\n  import Loading from \"../assets/svg/Loading.svelte\";\n  import StudioServer from \"./Studio/StudioServer\";\n  import LoginToggle from \"./Base/LoginToggle.svelte\";\n  import { OsmConnection } from \"../Logic/Osm/OsmConnection\";\n  import { QueryParameters } from \"../Logic/Web/QueryParameters\";\n\n  import layerSchemaRaw from \"../../src/assets/schemas/layerconfigmeta.json\";\n  import layoutSchemaRaw from \"../../src/assets/schemas/layoutconfigmeta.json\";\n\n  import If from \"./Base/If.svelte\";\n  import BackButton from \"./Base/BackButton.svelte\";\n  import ChooseLayerToEdit from \"./Studio/ChooseLayerToEdit.svelte\";\n  import { LocalStorageSource } from \"../Logic/Web/LocalStorageSource\";\n  import FloatOver from \"./Base/FloatOver.svelte\";\n  import Walkthrough from \"./Walkthrough/Walkthrough.svelte\";\n  import * as intro from \"../assets/studio_introduction.json\";\n  import { QuestionMarkCircleIcon } from \"@babeard/svelte-heroicons/mini\";\n  import type { ConfigMeta } from \"./Studio/configMeta\";\n  import EditTheme from \"./Studio/EditTheme.svelte\";\n  import * as meta from \"../../package.json\";\n  import Checkbox from \"./Base/Checkbox.svelte\";\n  import exp from \"constants\";\n\n  export let studioUrl = window.location.hostname === \"127.0.0.2\" ? \"http://127.0.0.1:1235\" : \"https://studio.mapcomplete.org\";\n\n  let osmConnection = new OsmConnection(new OsmConnection({\n    oauth_token: QueryParameters.GetQueryParameter(\n      \"oauth_token\",\n      undefined,\n      \"Used to complete the login\"\n    )\n  }));\n  const expertMode = UIEventSource.asBoolean(osmConnection.GetPreference(\"studio-expert-mode\", \"false\", {\n    documentation: \"Indicates if more options are shown in mapcomplete studio\"\n  }));\n  expertMode.addCallbackAndRunD(expert => console.log(\"Expert mode is\", expert))\n  const createdBy = osmConnection.userDetails.data.name;\n  const uid = osmConnection.userDetails.map(ud => ud?.uid);\n  const studio = new StudioServer(studioUrl, uid);\n\n  let layersWithErr = UIEventSource.FromPromiseWithErr(studio.fetchOverview());\n  let layers: Store<{ owner: number }[]> = layersWithErr.mapD(l => l.success?.filter(l => l.category === \"layers\"));\n  let selfLayers = layers.mapD(ls => ls.filter(l => l.owner === uid.data), [uid]);\n  let otherLayers = layers.mapD(ls => ls.filter(l => l.owner !== undefined && l.owner !== uid.data), [uid]);\n  let officialLayers = layers.mapD(ls => ls.filter(l => l.owner === undefined), [uid]);\n\n\n  let themes: Store<{ owner: number }[]> = layersWithErr.mapD(l => l.success?.filter(l => l.category === \"themes\"));\n  let selfThemes = themes.mapD(ls => ls.filter(l => l.owner === uid.data), [uid]);\n  let otherThemes = themes.mapD(ls => ls.filter(l => l.owner !== undefined && l.owner !== uid.data), [uid]);\n  let officialThemes = themes.mapD(ls => ls.filter(l => l.owner === undefined), [uid]);\n\n  let state: undefined | \"edit_layer\" | \"edit_theme\" | \"editing_layer\" | \"editing_theme\" | \"loading\" = undefined;\n\n  const layerSchema: ConfigMeta[] = <any>layerSchemaRaw;\n  let editLayerState = new EditLayerState(layerSchema, studio, osmConnection, { expertMode });\n\n  const layoutSchema: ConfigMeta[] = <any>layoutSchemaRaw;\n  let editThemeState = new EditThemeState(layoutSchema, studio, { expertMode });\n\n  let layerId = editLayerState.configuration.map(layerConfig => layerConfig.id);\n\n  let showIntro = UIEventSource.asBoolean(LocalStorageSource.Get(\"studio-show-intro\", \"true\"));\n  const version = meta.version;\n\n  async function editLayer(event: Event) {\n    const layerId: { owner: number, id: string } = event.detail;\n    state = \"loading\";\n    editLayerState.startSavingUpdates(false);\n    editLayerState.configuration.setData(await studio.fetch(layerId.id, \"layers\", layerId.owner));\n    editLayerState.startSavingUpdates();\n    state = \"editing_layer\";\n  }\n\n  async function editTheme(event: Event) {\n    const id: { id: string, owner: number } = event.detail;\n    state = \"loading\";\n    editThemeState.startSavingUpdates(false);\n    editThemeState.configuration.setData(await studio.fetch(id.id, \"themes\", id.owner));\n    editThemeState.startSavingUpdates();\n    state = \"editing_theme\";\n  }\n\n  async function createNewLayer() {\n    state = \"loading\";\n    const initialLayerConfig = {\n      credits: createdBy,\n      minzoom: 15,\n      pointRendering: [\n        {\n          location: [\"point\", \"centroid\"],\n          marker: [{\n            icon: \"circle\",\n            color: \"white\"\n          }]\n        }\n      ],\n      tagRenderings: [\"images\"],\n      lineRendering: [{\n        width: 1,\n        color: \"blue\"\n      }]\n    };\n    editLayerState.configuration.setData(initialLayerConfig);\n    editLayerState.startSavingUpdates();\n    state = \"editing_layer\";\n  }\n\n\n</script>\n\n<If condition={layersWithErr.map(d => d?.error !== undefined)}>\n  <div>\n    <div class=\"alert\">\n      Something went wrong while contacting the MapComplete Studio Server: {$layersWithErr[\"error\"]}\n    </div>\n    The server might be offline. Please:\n    <ul>\n\n      <li>\n        Try again in a few minutes\n      </li>\n      <li>\n        Contact <a href=\"https://app.element.io/#/room/#MapComplete:matrix.org\">the MapComplete community via the\n        chat.</a> Someone might be able to help you\n      </li>\n      <li>\n        File <a href=\"https://github.com/pietervdvn/MapComplete/issues\">an issue</a>\n      </li>\n      <li>\n        Contact the devs via <a href=\"mailto:info@posteo.net\">email</a>\n      </li>\n    </ul>\n  </div>\n  <LoginToggle ignoreLoading={true} slot=\"else\" state={{osmConnection}}>\n    <div slot=\"not-logged-in\">\n      <NextButton clss=\"primary\" on:click={() => osmConnection.AttemptLogin()}>\n        Please log in to use MapComplete Studio\n      </NextButton>\n    </div>\n    {#if state === undefined}\n      <div class=\"p-4   flex flex-col justify-between h-full\">\n        <div class=\"w-full flex flex-col\">\n          <h1>MapComplete Studio</h1>\n\n          <NextButton on:click={() => state = \"edit_layer\"}>\n            Edit an existing layer\n          </NextButton>\n          <NextButton on:click={() => createNewLayer()}>\n            Create a new layer\n          </NextButton>\n          <NextButton on:click={() => state = \"edit_theme\"}>\n            Edit a theme\n          </NextButton>\n          <NextButton on:click={() => {editThemeState.configuration.setData({}); state = \"editing_theme\"}}>\n            Create a new theme\n          </NextButton>\n          <NextButton clss=\"small\" on:click={() => {showIntro.setData(true)} }>\n            <QuestionMarkCircleIcon class=\"w-6 h-6\" />\n            Show the introduction again\n          </NextButton>\n        </div>\n        <div>\n          \n          <Checkbox selected={expertMode} >Enable more options (expert mode)</Checkbox>\n        <span class=\"subtle\">MapComplete version {version}</span>\n        </div>\n      </div>\n    {:else if state === \"edit_layer\"}\n\n      <div class=\"flex flex-col m-4\">\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => {state =undefined}}>MapComplete Studio\n        </BackButton>\n        <h2>Choose a layer to edit</h2>\n        <ChooseLayerToEdit {osmConnection} layerIds={$selfLayers} on:layerSelected={editLayer}>\n          <h3 slot=\"title\">Your layers</h3>\n        </ChooseLayerToEdit>\n        <h3>Layers by other contributors</h3>\n        <ChooseLayerToEdit {osmConnection} layerIds={$otherLayers} on:layerSelected={editLayer} />\n\n        <h3>Official layers by MapComplete</h3>\n        <ChooseLayerToEdit {osmConnection} layerIds={$officialLayers} on:layerSelected={editLayer} />\n      </div>\n    {:else if state === \"edit_theme\"}\n\n      <div class=\"flex flex-col m-4\">\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => {state =undefined}}>MapComplete Studio\n        </BackButton>\n        <h2>Choose a theme to edit</h2>\n        <ChooseLayerToEdit {osmConnection} layerIds={$selfThemes} on:layerSelected={editTheme}>\n          <h3 slot=\"title\">Your themes</h3>\n        </ChooseLayerToEdit>\n        <h3>Themes by other contributors</h3>\n        <ChooseLayerToEdit {osmConnection} layerIds={$otherThemes} on:layerSelected={editTheme} />\n        <h3>Official themes by MapComplete</h3>\n        <ChooseLayerToEdit {osmConnection} layerIds={$officialThemes} on:layerSelected={editTheme} />\n\n      </div>\n    {:else if state === \"loading\"}\n      <div class=\"w-8 h-8\">\n        <Loading />\n      </div>\n    {:else if state === \"editing_layer\"}\n      <EditLayer state={editLayerState}>\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => {state =undefined}}>MapComplete Studio\n        </BackButton>\n      </EditLayer>\n    {:else if state === \"editing_theme\"}\n      <EditTheme state={editThemeState}>\n        <BackButton clss=\"small p-1\" imageClass=\"w-8 h-8\" on:click={() => {state =undefined}}>MapComplete Studio\n        </BackButton>\n      </EditTheme>\n    {/if}\n  </LoginToggle>\n</If>\n\n\n{#if $showIntro}\n  <FloatOver on:close={() => {showIntro.setData(false)}}>\n    <div class=\"flex p-4 h-full pr-12\">\n      <Walkthrough pages={intro.sections} on:done={() => {showIntro.setData(false)}} />\n    </div>\n  </FloatOver>\n\n{/if}\n","import SvelteUIElement from \"./Base/SvelteUIElement\"\nimport StudioGUI from \"./StudioGUI.svelte\"\n\nexport default class StudioGui {\n    public setup() {\n        new SvelteUIElement(StudioGUI, {}).SetClass(\"h-full\").AttachTo(\"main\")\n    }\n}\n\nnew StudioGui().setup()\n"],"names":["ctx","insert","target","svg","anchor","append","path","_AllSharedLayers","sharedLayers","layer","known_layers","parsed","LayerConfig","e","Utils","AllSharedLayers","__publicField","EditJsonState","schema","server","category","options","UIEventSource","layerId","hl","config","id","enabled","entry","i","breadcrumb","key","store","v","value","noInitialSync","unsync","sch","part","origConfig","schemas","isUndefined","lastBreadcrumb","msgs","msg","pth","layers","questions","sharedQuestions","question","state","prepare","context","ConversionContext","EditLayerState","osmConnection","_","lBefore","cleaned","Pipe","PrepareLayer","ValidateLayer","trs","tr","qtr","_a","_b","_d","_c","_e","_f","TagUtils","EditThemeState","PrepareTheme","ValidateTheme","ConfigMetaUtils","configMeta","t","t1_value","div1","div0","current","dirty","set_data","t1","message","$$props","create_if_block_2","if_block1","create_if_block_1","div","span","each_blocks","span1","b","span0","t3","t3_value","mightBeBoolean","type","startInEditModeIfUnset","isTranslation","rendervalue","helperArgs","inline","inlineValue","configJson","nmd","err","messages","TagRenderingConfig","startValue","startInEditMode","tags","onDestroy","tgs","t_value","create_if_block_4","ImmutableStore","tagrenderingeditable_changes","fromhtml_changes","create_if_block_5","create_if_block_3","div2","h3","each_blocks_1","perId","tagRendering","questions.tagRenderings","label","configs","x","c","description","click_handler","t2_value","t0","t0_value","t2","if_block0","create_if_block_6","if_block2","create_if_block","expertMode","defaultOption","hasBooleanOption","types","lastIsString","opt","chosenOption","existingValue","hasOverride","possibleTypes","outer","optionalMatches","numberOfMatches","requiredAttribute","a","directValue","subSchemas","subpath","$$invalidate","oldOption","o","cleanPath","p","crumble","button","schemabasedmultitype_changes","questionpreview_changes","schemabasedinput_changes","button0","button1","create_if_block_8","schemabasedfield_changes","create_if_block_9","title","singular","article","isTagRenderingBlock","subparts","values","currentValue","createdItems","createItem","valueToSet","fusePath","subpartPath","newPath","toAdd","del","index","swap","indexA","indexB","valueA","valueB","svalueA","svalueB","moveTo","currentIndex","targetIndex","direction","schemaForMultitype","$values","show_if","configsFiltered","$expertMode","if_block","firstPaths","messagesCount","parsedTag","exampleTags","pt","keys","thenText","thenTextEn","translation","editMode","$thenText","mappingConfigs","schemabasedfield0_changes","schemabasedfield1_changes","schemabasedfield2_changes","schemabasedfield3_changes","mappinginput_changes","allowQuestions","mappingsBuiltin","perLabel","labels","labelMapping","configBuiltin","mappings","topLevelItems","item","questionableTagRenderingSchemaRaw","initMappings","items","ignored","freeformSchemaAll","$allowQuestions","freeformSchema","missing","t4_value","t6_value","li","t4","t6","region_changes","region0_changes","region1_changes","div3","alltagspanel_changes","tagrenderinginput_changes","layerSchema","layerSchemaRaw","hasErrors","m","configuration","allNames","meta","perRegion","region","wl","baseUrl","firstPathsFor","regionNames","pathNames","regionName","configForRequiredField","requiredFields","currentlyMissing","requiredField","highlightedItem","g","path0","path1","color","StudioServer","url","userId","allFiles","layerOverview","file","parts","owner","Constants","uid","uidStr","info","displayName","response","selfId","ud","fetchIconDescription","AllKnownLayouts","dispatch","createEventDispatcher","layerIds","islast","isFirst","click_handler_1","walkthroughstep_changes","pages","currentPage","step","incr","back_handler","next_handler","t5_value","t5","schemaElement","ul","h2","h30","h31","h1","walkthrough","Walkthrough","intro.sections","studioUrl","OsmConnection","QueryParameters","expert","createdBy","studio","layersWithErr","l","selfLayers","ls","otherLayers","officialLayers","themes","selfThemes","otherThemes","officialThemes","editLayerState","layoutSchema","layoutSchemaRaw","editThemeState","layerConfig","showIntro","LocalStorageSource","version","meta.version","editLayer","event","editTheme","createNewLayer","initialLayerConfig","click_handler_3","func","d","StudioGui","SvelteUIElement","StudioGUI"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4SC9UO,MAAMkD,EAAgB,CACzB,OAAO,cAAcC,EAAwB,CAOrC,OAACA,EAAW,KAGZ,MAAM,QAAQA,EAAW,IAAI,EACtBA,EAAW,KAAK,KAAMC,GAAMA,EAAE,OAAY,qCAAqC,EAE/ED,EAAW,KAAK,OAAY,sCAL5B,EAOf,CACJ,0BCvBKE,EAAA9E,KAAQ,QAAO,wMAFlBC,EAIKC,EAAA6E,EAAA3E,CAAA,mCADHC,EAAK0E,EAAAC,CAAA,gBADJ,CAAAC,GAAAC,EAAA,IAAAJ,KAAAA,EAAA9E,KAAQ,QAAO,KAAAmF,EAAAC,EAAAN,CAAA,iHANfA,EAAA9E,KAAQ,QAAO,oMAFlBC,EAIKC,EAAA6E,EAAA3E,CAAA,mCADHC,EAAK0E,EAAAC,CAAA,gBADJ,CAAAC,GAAAC,EAAA,IAAAJ,KAAAA,EAAA9E,KAAQ,QAAO,KAAAmF,EAAAC,EAAAN,CAAA,iHANfA,EAAA9E,KAAQ,QAAO,kMAFlBC,EAIKC,EAAA6E,EAAA3E,CAAA,mCADHC,EAAK0E,EAAAC,CAAA,gBADJ,CAAAC,GAAAC,EAAA,IAAAJ,KAAAA,EAAA9E,KAAQ,QAAO,KAAAmF,EAAAC,EAAAN,CAAA,kKAHf9E,EAAO,CAAA,EAAC,QAAU,QAAO,EAMpBA,EAAO,CAAA,EAAC,QAAU,UAAS,EAM3BA,EAAO,CAAA,EAAC,QAAU,cAAa,sWAf5B,QAAAqF,CAAA,EAAAC,sPC2JuBtF,EAAe,CAAA,8BAA4B,6BAAkC,iCACxGA,EAAS,CAAA,EAAC,OAAS,GAACuF,GAAAvF,CAAA,EAKpBwF,EAAA,OAAO,SAAS,WAAa,aAAWC,GAAAzF,CAAA,mHAP/CC,EAUKC,EAAAwF,EAAAtF,CAAA,qIAREJ,EAAS,CAAA,EAAC,OAAS,+FAKnB,OAAO,SAAS,WAAa,aAAWwF,EAAA,EAAAxF,EAAAkF,CAAA,sKAT1BlF,EAAG,CAAA,CAAA,+BAAxBC,EAA+BC,EAAAyF,EAAAvF,CAAA,2BAAVJ,EAAG,CAAA,CAAA,mDAKbA,EAAS,CAAA,uBAAd,OAAI6B,GAAA,0MAAC7B,EAAS,CAAA,oBAAd,OAAI6B,GAAA,EAAA,mHAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,uXAKoC7B,EAAI,CAAA,EAAC,KAAK,GAAG,EAAA,WAA0EA,EAAM,CAAA,EAAC,MAAM,SAAQ,oCAAjI,mBAAiB,uGAAtCC,EAAoKC,EAAA2F,EAAAzF,CAAA,SAA9HC,EAAuBwF,EAAAC,CAAA,gBAACzF,EAAgGwF,EAAAE,CAAA,4DAApH/F,EAAI,CAAA,EAAC,KAAK,GAAG,EAAA,KAAAmF,EAAAC,EAAAN,CAAA,cAA0E9E,EAAM,CAAA,EAAC,MAAM,SAAQ,KAAAmF,EAAAa,EAAAC,CAAA,2FAXvJ,OAAAjG,OAAQ,OAAS,ySApFX,SAAAkG,GAAeC,EAAAA,CAClBA,OAAAA,WACK,IAELA,EAAK,OACPA,EAAOA,EAAK,MAEVA,IAAS,UACJ,GAEJ,MAAM,QAAQA,CAAI,EAIhBA,EAAK,KAAKtB,GAAKqB,GAAerB,CAAC,CAAA,EAH7B,4CArEA,MAAA3B,CAAA,EAAAoC,GACA,KAAAhF,EAAA,EAAA,EAAAgF,GACA,OAAApE,CAAA,EAAAoE,GACA,uBAAAc,EAAkClF,EAAO,QAAUA,EAAO,MAAM,OAAA,EAAAoE,EACvE,IAAYhE,GAAA,MAAqC,QAE/C+E,IAAgBpC,EAAA/C,EAAO,QAAP,YAAA+C,EAAc,YAAa,iBAAiBC,EAAAhD,EAAO,QAAP,YAAAgD,EAAc,YAAa,YAAcS,GAAgB,cAAczD,CAAM,EAC3I,IAAAiF,EAAOjF,EAAO,MAAM,UAAY,SAEhCoF,GAAepF,EAAO,MAAM,QAAUA,EAAO,KAAK,KAAK,GAAG,IAAMmF,EAAgB,8BAA+B,mBAEhHnF,EAAO,OAAS,YACjBoF,WAECpF,EAAO,MAAM,WAAa,OAASA,EAAO,MAAM,WAAa,gBAC9DoF,EAAc,gBAGZC,GAAanC,EAAAlD,EAAO,MAAM,aAAb,YAAAkD,EAAyB,MAAM,KAC5CoC,EAAStF,EAAO,MAAM,mBACtBmF,IACFF,EAAO,cACHjF,EAAO,MAAM,QAAA,CACT,MAAAuF,EAAcvF,EAAO,MAAM,OACjCoF,EAAcG,EACdD,EAAS,GACTD,EAAA,CAAcE,EAAY,UAAU,EAAGA,EAAY,QAAQ,GAAG,CAAA,EAAIA,EAAY,UAAUA,EAAY,QAAQ,GAAG,EAAI,CAAC,GAGpHN,EAAK,SAAS,IAAI,IACpBA,EAAOA,EAAK,UAAU,EAAGA,EAAK,OAAS,CAAC,SAGpCO,EAAA,CACJ,GAAIpG,EAAK,KAAK,GAAG,EACjB,OAAQgG,EACR,SAAUpF,EAAO,MAAM,SACvB,aAAcyF,GAAIzF,EAAO,WAAW,EACpC,SAAUA,EAAO,OAAS,iBACxB,CAAA,IAAK,QACL,KAAAiF,EACA,OAAAK,EACA,WAAAD,CAAA,GAIArF,EAAO,MAAM,QACfwF,EAAW,SAAA,EACT,GAAI,SACJ,KAAMpG,EAAK,KAAK,EAAI,qCAAuCY,EAAO,MAAM,QAAU,uBAAyBA,EAAO,MAAM,SAAW,MAE3HA,EAAO,WACjBwF,EAAW,SAAA,EACT,GAAI,SACJ,KAAMpG,EAAK,KAAK,EAAI,iBAAmBY,EAAO,MAAM,SAAW,OAqB/DgF,GAAehF,EAAO,IAAI,IAC5BwF,EAAW,SAAWA,EAAW,UAAA,CAAA,EACjCA,EAAW,SAAS,MAEhB,GAAI,aACJ,OAAMvC,EAAAjD,EAAO,QAAP,YAAAiD,EAAc,SAAU,QAG9B,GAAI,cACJ,OAAME,EAAAnD,EAAO,QAAP,YAAAmD,EAAc,UAAW,QAKjCnD,EAAO,MAAM,cACVwF,EAAW,WACdA,EAAW,SAAA,IAEbA,EAAW,SAAS,QAAQxF,EAAO,MAAM,WAAW,OAElDO,EACAmF,EACAC,EAAW3D,EAAM,YAAY5C,CAAI,yBAEnCmB,EAAa,IAAAqF,GAAmBJ,EAAY,mBAAqBxF,EAAO,KAAK,KAAK,GAAG,CAAA,QAC9EL,GACP,QAAQ,MAAMA,EAAGY,CAAM,EACvBmF,EAAMtG,EAAK,KAAK,GAAG,EAAI,IAAMO,EAE3B,IAAAkG,EAAa7D,EAAM,mBAAmB5C,CAAI,EAC1C0G,EAAA,CAAmBD,GAAcX,EAC/B,MAAAa,EAAW,IAAA3F,GAAwC,CAAA,MAAOyF,CAAA,CAAA,MAE9DG,GAAUhE,EAAM,SAAS5C,EAAM2G,EAAK,IAAIE,GAAA,OAChClF,EAAIkF,EAAI,MACH,GAAA,OAAAlF,GAAM,mBACFA,MAEXf,EAAO,OAAS,gBACXe,IAAM,QAAUA,IAAM,OAASA,IAAM,OAE1CiE,GAAehF,EAAO,IAAI,EAAA,IACxBe,IAAM,QAAUA,IAAM,OAASA,IAAM,UAChC,MAELA,IAAM,SAAWA,IAAM,MAAQA,IAAM,UAChC,UAGPf,EAAO,OAAS,SACde,IAAM,UAGH,OAAOA,CAAC,EAEboE,GAAA,OAAwBpE,GAAM,SAC5BA,IAAM,MAGH,KAAK,MAAMA,CAAC,EAEdA,IACLoE,UACGxF,GACP,QAAQ,MAAM,qBAAsBP,EAAM,SAAUO,CAAC,cAcwD,QAAQ,IAAIK,CAAM,4fC1FvH,eACO,MAAClB,EAAG,CAAA,CAAA,8CAAHA,EAAG,CAAA,CAAA,+CAIdA,EAAM,CAAA,EAAC,MAAM,SAAQ,4DAArBA,EAAM,CAAA,EAAC,MAAM,SAAQ,KAAAmF,EAAAN,EAAAuC,CAAA,yCADnBpH,EAAM,CAAA,EAAC,MAAM,UAAQqH,GAAArH,CAAA,kEAArBA,EAAM,CAAA,EAAC,MAAM,wJAKHA,EAAW,CAAA,CAAA,CAAA,CAAA,6EAAXA,EAAW,CAAA,6XAgCH,gBAAAA,KAAM,sBACfA,EAAM,EAAA,EAAsB,eAAA,IAAAsH,GAAe,EAAI,wBAA0B,2FADhEpC,EAAA,IAAAqC,EAAA,gBAAAvH,KAAM,gCACfA,EAAM,EAAA,sKANG,IAAAA,MAAO,cAAc,cAAc,GAAM,GAAK,EAAA,cAHe;AAAA,aAE9E,gCAEG;AAAA,yJAEP,mBAJIC,EAEGC,EAAA4F,EAAA1F,CAAA,+CADc8E,EAAA,KAAAsC,EAAA,IAAAxH,MAAO,cAAc,cAAc,GAAM,GAAK,CAAA,CAAA,wKAPhD,IAAAA,MAAO,UAAU,cAAc,GAAM,GAAK,EAAA,cAHM;AAAA,WAEjE,gCAEG;AAAA;AAAA,oDAGH,mBALAC,EAEGC,EAAA4F,EAAA1F,CAAA,+CADc8E,EAAA,KAAAsC,EAAA,IAAAxH,MAAO,UAAU,cAAc,GAAM,GAAK,CAAA,CAAA,0IALQ8E,EAAA9E,MAAO,MAAK,+BAA9D,mDAAiD,sCAApEC,EAAuFC,EAAAwF,EAAAtF,CAAA,wBAAlB8E,EAAA,IAAAJ,KAAAA,EAAA9E,MAAO,MAAK,KAAAmF,EAAAC,EAAAN,CAAA,2IAD9E9E,EAAM,EAAA,EAAC,QAAU,OAAS,kBAGxBA,EAAM,EAAA,EAAC,WAAc,CAAAA,MAAO,UAAU,kBAAkBA,EAAK,CAAA,CAAA,wBAOtDA,EAAM,EAAA,EAAC,eAAkB,CAAAA,MAAO,cAAc,kBAAkBA,EAAK,CAAA,CAAA,iWAjChFA,EAAG,CAAA,GAAAyH,GAAAzH,CAAA,uGAQHA,EAAW,CAAA,GAAA0H,GAAA1H,CAAA,IAGTA,EAAS,CAAA,uBAAd,OAAI6B,GAAA,qGAWC7B,EAAQ,CAAA,uBAAb,OAAI6B,GAAA,gcA1BV5B,EAuDKC,EAAAyH,EAAAvH,CAAA,EArDHC,EAoBKsH,EAAA3C,CAAA,+IAEL3E,EA4BKsH,EAAA5C,CAAA,EA3BH1E,EAAgC0E,EAAA6C,CAAA,yEArB3B5H,EAAG,CAAA,sHAQHA,EAAW,CAAA,sGAGTA,EAAS,CAAA,oBAAd,OAAI6B,GAAA,EAAA,wGAAJ,OAAIA,EAAAgG,EAAA,OAAAhG,GAAA,+FAWC7B,EAAQ,CAAA,oBAAb,OAAI6B,GAAA,EAAA,2GAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,iEAXJ,OAAIA,GAAA,iCAWJ,OAAIA,GAAA,sSArFG,MAAAqB,CAAA,EAAAoC,GACA,KAAAhF,CAAA,EAAAgF,GACA,OAAApE,CAAA,EAAAoE,EACPpD,EAAQgB,EAAM,YAAY5C,CAAI,EAE9BwH,EAAA,CAAA,UACKC,KAAgBC,GAAU,CAC7B,GAAAD,EAAa,eACNE,KAASF,EAAa,OAC7BD,EAAMG,CAAK,GAAKH,EAAMG,CAAK,GAAA,CAAA,GAAS,OAAOF,CAAY,EAG3DD,EAAMC,EAAa,EAAE,GAAKA,CAAY,EAUpC,IAAAG,EAP0DhG,EAAM,IAAIiG,GAC3D,OAAAA,GAAM,SACRL,EAAMK,CAAC,GAENA,CAAC,GAGyC,IAAID,GACnDA,GAGL,QAAQ,IAAI,sBAAsB,EAC3BA,EAAQ,IAAIzG,GAAA,KAEJ,OAAA,IAAAqF,GAAmBrF,CAAM,QAC7BZ,GACE,MAAA,CAAA,MAAOA,OAPR,CAAA,CAAA,MAAO,yBAAA,CAAA,sBAWjB,IAAAa,EAAoBQ,EAAM,KAAKkG,GAAA,CAC7B,GAAAA,GAAA,MAAAA,EAAG,GACE,OAAAA,EAAE,GAEA,GAAA,OAAAA,GAAM,gBACRA,2BAKPnB,EAAO/D,EAAM,4BAEb,IAAA2D,EAAW3D,EAAM,YAAY5C,CAAI,yBAEjC+H,EAAcnH,EAAO,eACrBmH,MAEAA,EAAc1B,GAAI0B,CAAW,QAE7B,QAAQ,MAAM,6CAA+C,YAAAA,CAAA,CAAA,EAYpB,MAAAC,EAAA,IAAApF,EAAM,gBAAgB,QAAS,CAAA,KAAA5C,EAAM,OAAAY,CAAM,CAAA,8YCyHjFlB,EAAM,CAAA,EAAC,MAAM,MAAK,SAChBuI,EAAAvI,KAAO,YAAW,iEADzBC,EAA4BC,EAAA0H,EAAAxH,CAAA,kBAC5BH,EAAgCC,EAAAwF,EAAAtF,CAAA,6BAD3BJ,EAAM,CAAA,EAAC,MAAM,MAAK,KAAAmF,EAAAqD,EAAAC,CAAA,EAChBvD,EAAA,GAAAqD,KAAAA,EAAAvI,KAAO,YAAW,KAAAmF,EAAAuD,EAAAH,CAAA,iHAOyB,6BAAkC,gEAG/E,OAAAvI,OAAiB,OAAS,EAUrBA,EAAS,CAAA,EAAC,OAAS,EAAC,sGAd9BC,EAEKC,EAAAwF,EAAAtF,CAAA,yZALkB0E,EAAA9E,MAAc,QAAO,sBAD9B,wBACQ,aAAuB;AAAA,WAE/C,0GAgBWA,EAAS,CAAA,uBAAd,OAAI6B,GAAA,2MAAC7B,EAAS,CAAA,oBAAd,OAAI6B,GAAA,EAAA,mHAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,oIAVC7B,EAAU,CAAA,uBAAf,OAAI6B,GAAA,2MAAC7B,EAAU,CAAA,oBAAf,OAAI6B,GAAA,EAAA,mHAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,oXAK8CiD,EAAA9E,EAAU,EAAA,EAAA,KAAK,KAAK,GAAG,EAAA,gCAAhD,0BAAwB,uCAA7CC,EAA6EC,EAAAyF,EAAAvF,CAAA,wBAA/B8E,EAAA,IAAAJ,KAAAA,EAAA9E,EAAU,EAAA,EAAA,KAAK,KAAK,GAAG,EAAA,KAAAmF,EAAAC,EAAAN,CAAA,mGAHrC9E,EAAS,EAAA,WACfA,EAAO,CAAA,IAAGkE,GAAAD,EAAAjE,EAAW,EAAA,IAAX,YAAAiE,EAAW,OAAX,YAAAC,EAAiB,GAAE,MAAQ,KAAK,gHADpClE,EAAS,EAAA,qBACfA,EAAO,CAAA,IAAGkE,GAAAD,EAAAjE,EAAW,EAAA,IAAX,YAAAiE,EAAW,OAAX,YAAAC,EAAiB,GAAE,MAAQ,KAAK,mKAFnE,OAAAlE,QAAeiE,EAAAjE,EAAS,EAAA,EAAC,QAAV,YAAAiE,EAAiB,SAAU,SAAQ,EAG3C,OAAO,SAAS,WAAa,YAAW,wWAYVjE,EAAI,CAAA,EAAC,KAAK,GAAG,EAAA,WACmDA,EAAM,CAAA,EAAC,MAAM,SAAQ,oCAD9G,uBAAqB,uGAA1CC,EACiJC,EAAA2F,EAAAzF,CAAA,SADvGC,EAAuBwF,EAAAC,CAAA,gBAACzF,EACyEwF,EAAAE,CAAA,4DAD7F/F,EAAI,CAAA,EAAC,KAAK,GAAG,EAAA,KAAAmF,EAAAC,EAAAN,CAAA,cACmD9E,EAAM,CAAA,EAAC,MAAM,SAAQ,KAAAmF,EAAAa,EAAAC,CAAA,0DA9BhI0C,EAAA3I,EAAO,CAAA,EAAA,MAAM,QAAU,QAAS4I,GAAA5I,CAAA,8CAIhCA,EAAW,EAAA,EAAA,0BAwBX,IAAA6I,EAAA,OAAO,SAAS,WAAa,aAAWC,GAAA9I,CAAA,wJA7B/CC,EAiCKC,EAAAwF,EAAAtF,CAAA,4EAhCEJ,EAAO,CAAA,EAAA,MAAM,QAAU,uEA4BvB,OAAO,SAAS,WAAa,aAAW6I,EAAA,EAAA7I,EAAAkF,CAAA,oHAhNlC,MAAAhC,CAAA,EAAAoC,GACA,KAAAhF,EAAA,EAAA,EAAAgF,GACA,OAAApE,CAAA,EAAAoE,EACPyD,EAAa7F,EAAM,8BACjB,MAAA8F,EAAgB9H,EAAO,MAAM,aAAe,OAAOA,EAAO,MAAM,YAAY,SAE5E+H,GAAsChF,EAAA/C,EAAO,OAAP,YAAA+C,EAAc,UAAUY,GAAKA,EAAE,OAAY,WACjFqE,EAAQhI,EAAO,MAAM,MAAM,MAAM,GAAG,EACtC+H,GAAoB,GACtBC,EAAM,OAAOD,CAAgB,EAI3B,IAAAE,EAAe,IAEXD,MAAAA,EAA2B,MAAM,QAAQhI,EAAO,IAAI,EAAIA,EAAO,KAAKA,EAAO,KAAK,OAAS,CAAC,EAAE,QAClGiI,EAAeD,IAAU,UAAa,MAAM,QAAQA,CAAK,GAAKA,EAAM,KAAKrH,GAAKA,IAAM,QAAQ,EAG1FsH,GACFD,EAAM,OAAOA,EAAM,OAAS,EAAG,CAAC,QAE5BxC,EAAA,CACJ,GAAI,WAAapG,EAAK,KAAK,GAAG,EAC9B,SAAU,mCAAqCY,EAAO,KAAK,GAAA,EAAK,EAAI,IACpE,aAAcyF,GAAIzF,EAAO,WAAW,EACpC,SAAUgI,EAAM,IAAIE,GAAOA,EAAI,KAAA,CAAQ,EAAA,OAAOA,GAAOA,EAAI,OAAS,CAAC,EAAE,IAAA,CAAKA,EAAKvH,KAAA,CAC7E,GAAI,qBAAuBA,EAC3B,cAAe,QAAQ,EACvB,KAAMuH,GAAOvH,IAAMmH,EAAgB,aAAe,OAEpD,OAASG,EAA4BjI,EAAO,MAAM,QAAU,+CAC5D,SAAWiI,GACT,IAAK,QACL,OAAQ,GACR,KAAMjI,EAAO,MAAM,SACnB,cAAe,oBAAoB,WAGnC,IAAA+F,MAAW3F,GAAA,CAAA,CAAA,EAEXJ,EAAO,MAAM,SACfwF,EAAW,SAAS,KAAA,CAEhB,GAAM,CAAA,IAAM,CAAA,SAAU,oBAAoB,CAAA,EAC1C,KAAMxF,EAAO,MAAM,UAIrBA,EAAO,MAAM,aACfwF,EAAW,SAAS,QAAQxF,EAAO,MAAM,WAAW,EAGlD+H,GAAoB,GACtBvC,EAAW,SAAS,SAEhB,GAAI,aACJ,KAAOxF,EAAO,MAAM,QAAU,MAC9B,cAAe,oBAAoB,IAGnC,GAAI,cACJ,KAAOA,EAAO,MAAM,SAAW,KAC/B,cAAe,oBAAoB,IAInC,MAAAO,EAAa,IAAAqF,GAAmBJ,EAAY,mBAAqBxF,EAAO,KAAK,KAAK,GAAG,CAAA,EACvF,IAAAmI,EAAwBL,EAGtB,MAAAM,EAAgBpG,EAAM,mBAAmB5C,CAAI,EAC/C,IAAAiJ,GAAcD,GAAA,YAAAA,EAAe,sBAC7BL,GAAoB,IAAMK,IAAkB,IAAQA,IAAkB,IACxErC,EAAK,QAAA,CAAU,MAAO,GAAKqC,CAAA,CAAA,UAClBH,GAAA,OAAuBG,GAAkB,SAClDrC,EAAK,QAAU,CAAA,MAAOqC,CAAA,CAAA,EACtBD,iBACSC,EAAA,OAGHE,EAAA,CAAA,EACNC,EAAgB,QAAA5H,EAAI,EAAGA,EAASX,EAAO,KAAM,OAAQW,IAAA,CAC7C,MAAAsE,EAAOjF,EAAO,KAAKW,CAAC,EACtB,IAAA6H,EAAkB,EACX,UAAA3H,KAAO,OAAO,KAAKoE,EAAK,YAAA,CAAA,CAAA,EAC3BmD,EAAcvH,CAAG,GACrB2H,IAGA,GAAAvD,EAAK,SAAA,CACH,IAAAwD,EAAkB,YAEXC,KAAqBzD,EAAK,SAAA,IAC/BmD,EAAcM,CAAiB,IAAA,gBAExBH,EAEXE,IAEFH,EAAc,KAAA,CAAO,MAAO3H,EAAG,wBAAyB8H,EAAiB,gBAAAD,SAEzEF,EAAc,KAAA,CAAO,MAAO3H,EAAG,wBAAyB,EAAG,gBAAA6H,IAK/DF,EAAc,KAAM,CAAAK,EAAG/D,IAAMA,EAAE,gBAAkB+D,EAAE,eAAe,EAClEL,EAAc,KAAM,CAAAK,EAAG/D,IAAMA,EAAE,wBAA0B+D,EAAE,uBAAuB,EAC9EL,EAAc,OAAS,IACzBH,EAAeG,EAAc,CAAC,EAAE,MAChCvC,EAAK,QAAA,CAAU,kBAAmB,GAAKoC,CAAA,CAAA,EAGhC,MAAAL,WACT/B,EAAK,QAAA,CAAU,kBAAmB,GAAK+B,CAAA,CAAA,EAEvCK,EAAeL,KAGbC,GAAoB,GAAKE,EAAA,CAErB,MAAAW,EAAc7C,EAAK,KAAKA,GACxBA,EAAK,kBACA,GAELkC,EACKlC,EAAK,MAEPA,EAAK,QAAa,QAE3BC,GAAUhE,EAAM,SAAS5C,EAAMwJ,CAAW,CAAA,MAGxCC,EAAA,CAAA,EAEAC,EAAU1J,EACR,MAAA0B,EAAQkB,EAAM,YAAY5C,CAAI,EACpC4G,GAAUD,EAAK,kBAAkBA,GAAAA,IAC3BA,EAAK,QAAa,QAAaA,EAAK,QAAa,GAAA,CACnDgD,EAAA,EAAAZ,QAAe,SAGX,MAAAa,EAAYb,MAClBA,EAAepC,EAAK,kBAAuB,OAAOA,EAAK,iBAAmB,EAAK+B,CAAA,EACzE,MAAA7C,EAAOjF,EAAO,KAAKmI,CAAY,EACjC,GAAAA,IAAiBa,EAAA,KAEnBH,EAAA,CAAA,CAAA,EACM,MAAAI,EAAIjH,EAAM,mBAAmB5C,CAAI,GAAA,CAAA,YAC5ByB,KAAOoE,GAAA,YAAAA,EAAM,WAAA,CAAA,EACtBgE,EAAApI,KAAAoI,EAAApI,GAAK,IAEPC,EAAM,QAAQmI,CAAC,MAEZhE,SAGL8D,EAAA,EAAAD,EAAU1J,CAAA,QACJ8J,EAAsB9J,EAAK,OAAO+J,GAAA,OAAYA,GAAM,QAAQ,KAC9DlE,EAAK,OAAY,sCAAA,CAEbjF,MAAAA,EAASgC,EAAM,iBAAiBkH,CAAS,EAC/CL,EAAW,KAAK7I,CAAM,MACtB8I,EAAU1J,EAAK,MAAM,EAAGA,EAAK,OAAS,CAAC,CAAA,SAGpC,GAAA6F,EAAK,WAGC,UAAAmE,KAAW,OAAO,KAAKnE,EAAK,UAAU,EAC/C4D,EAAW,KAAS,GAAA7G,EAAM,UAAA,CAAA,GAAckH,EAAWE,CAAO,CAAA,CAAA,KAG1D,IAAAzD,EAAW3D,EAAM,YAAY5C,CAAI,iCAoCqD,QAAQ,IAAIY,CAAM,ygBCrGjGkG,EAAApH,KAAO,YAAW,iEADvBC,EAEMC,EAAAyF,EAAAvF,CAAA,iBADD8E,EAAA,CAAA,EAAA,GAAAkC,KAAAA,EAAApH,KAAO,YAAW,KAAAmF,EAAA,EAAAiC,CAAA,0DAuBpBpH,EAAO,CAAA,aAAcA,EAAK,EAAA,kBAA/B,OAAI6B,GAAA,EAAA,iMAAC7B,EAAO,CAAA,oFAAZ,OAAI6B,GAAA,6JAVC7B,EAAO,CAAA,aAAcA,EAAK,EAAA,kBAA/B,OAAI6B,GAAA,EAAA,+LAAC7B,EAAO,CAAA,oFAAZ,OAAI6B,GAAA,gJAPD7B,EAAS,CAAA,EAAC,OAAS,GAACuF,GAAAvF,CAAA,iBAFF;AAAA,KAEvB,qEAAKA,EAAS,CAAA,EAAC,OAAS,kNAqBUA,EAAK,EAAA,EAAA,0HAAhBA,EAAQ,CAAA,CAAA,gMAD3BC,EAMKC,EAAAwF,EAAAtF,CAAA,EALHC,EAAsCqF,EAAAkC,CAAA,8BACtCvH,EAGQqF,EAAA6E,CAAA,6EAJSvK,EAAQ,CAAA,CAAA,wBAAGA,EAAK,EAAA,EAAA,KAAAmF,EAAAuD,EAAAH,CAAA,0HAqC1BvI,EAAQ,CAAA,uBAAb,OAAI6B,GAAA,+MAAC7B,EAAQ,CAAA,oBAAb,OAAI6B,GAAA,EAAA,mHAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,qKAF6B,KAAA7B,MAASA,EAAK,EAAA,EAAA,EAAA,SAAeA,EAAkB,EAAA,EAAA,2FAA/CkF,EAAA,CAAA,EAAA,KAAAsF,EAAA,KAAAxK,MAASA,EAAK,EAAA,EAAA,CAAA,CAAA,uJA1Bd,KAAA,CAAA,GAAAA,KAAMA,EAAK,EAAA,CAAA,8IAAXkF,EAAA,CAAA,EAAA,KAAAuF,EAAA,KAAA,CAAA,GAAAzK,KAAMA,EAAK,EAAA,CAAA,2NA6BZ,KAAAA,EAAS,EAAA,EAAAA,EAAO,EAAA,EAAAA,MAAQ,IAAI,SAAWA,EAAO,EAAA,2FAA9CkF,EAAA,CAAA,EAAA,KAAAwF,EAAA,KAAA1K,EAAS,EAAA,EAAAA,EAAO,EAAA,EAAAA,MAAQ,IAAI,uSAtB1DC,EAEQC,EAAAyK,EAAAvK,CAAA,WAERH,EAEQC,EAAA0K,EAAAxK,CAAA,gTAGRH,EAEQC,EAAAyK,EAAAvK,CAAA,WACRH,EAEQC,EAAA0K,EAAAxK,CAAA,+MAfL,IAAAuI,EAAA3I,MAAI,GAAC4I,GAAA5I,CAAA,EASLwF,EAAAxF,EAAI,EAAA,EAAA,EAAIA,KAAQ,QAAMyH,GAAAzH,CAAA,gDAbG;AAAA,mCAE9B,+CAHAC,EAGQC,EAAAqK,EAAAnK,CAAA,oHAEHJ,MAAI,oEASJA,EAAI,EAAA,EAAA,EAAIA,KAAQ,0PA1BrBA,EAAmB,CAAA,GAAA6K,GAAA7K,CAAA,iDAUlBA,EAAmB,CAAA,EAAA,EA0BZA,EAAM,CAAA,EAAC,MAAM,MAAK,0LA3BhCC,EAkCKC,EAAAwF,EAAAtF,CAAA,yCA3CCJ,EAAmB,CAAA,GAAA2I,EAAA,EAAA3I,EAAAkF,CAAA,mTAVsB,KAAA,CAAA,GAAAlF,KAAMA,EAAK,EAAA,CAAA,6RAD1DC,EAMKC,EAAAwF,EAAAtF,CAAA,qBAJHC,EAGQqF,EAAA6E,CAAA,2HAJqCrF,EAAA,CAAA,EAAA,KAAA4F,EAAA,KAAA,CAAA,GAAA9K,KAAMA,EAAK,EAAA,CAAA,gLARnDA,EAAS,CAAA,uBAAd,OAAI6B,GAAA,8MAAC7B,EAAS,CAAA,oBAAd,OAAI6B,GAAA,EAAA,mHAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,qcAmEN5B,EAAmFC,EAAAqK,EAAAnK,CAAA,qFA9ElFqI,EAAAzI,EAAO,CAAA,EAAA,KAAK,KAAK,EAAA,uCAEjBA,EAAQ,CAAA,EAAC,OAAS,GAAC+K,GAAA/K,CAAA,iDAMnBA,EAAO,CAAA,EAAC,SAAW,EAAC,EAOfA,EAAQ,CAAA,EAAC,SAAW,EAAC,gCA8DxBA,EAAI,CAAA,EAAC,SAAW,GAAKA,EAAI,CAAA,EAAC,CAAC,IAAM,iBAAe8I,GAAA9I,CAAA,wJADf,MAAI,MAACA,EAAO,CAAA,CAAA,YAAGA,EAAQ,CAAA,CAAA,gFA7EjEC,EAmFKC,EAAA6E,EAAA3E,CAAA,EAlFHC,EAA4B0E,EAAA6C,CAAA,4DA2E5BvH,EAMK0E,EAAAC,CAAA,EALH3E,EAAsE2E,EAAAuF,CAAA,uHA5EnE,CAAAtF,GAAAC,EAAA,CAAA,EAAA,IAAAuD,KAAAA,EAAAzI,EAAO,CAAA,EAAA,KAAK,KAAK,EAAA,KAAAmF,EAAAqD,EAAAC,CAAA,EAEjBzI,EAAQ,CAAA,EAAC,OAAS,GAAC2I,EAAA,EAAA3I,EAAAkF,CAAA,qJA0EqBlF,EAAO,CAAA,CAAA,qBAAGA,EAAQ,CAAA,CAAA,EACxDA,EAAI,CAAA,EAAC,SAAW,GAAKA,EAAI,CAAA,EAAC,CAAC,IAAM,oYAhM7B,MAAAkD,CAAA,EAAAoC,GACA,OAAApE,CAAA,EAAAoE,EAGP0F,EAAQ9J,EAAO,KAAK,KAAK,EACzB+J,EAAWD,EACXA,GAAA,MAAAA,EAAO,SAAS,OAClBC,EAAWD,EAAM,MAAM,EAAGA,EAAM,OAAS,CAAC,GAExC,IAAAE,EAAU,IACVD,GAAA,MAAAA,EAAU,MAAM,cAClBC,EAAU,UAED,KAAA5K,EAAA,EAAA,EAAAgF,QACL6F,EAAsB7K,EAAK,SAAW,GAAKA,EAAK,CAAC,IAAM,gBAEzD6K,IACFjK,MAAcA,GACdA,EAAO,YAAA,cAGHkK,EAAuBlI,EAAM,sBAAsBhC,EAAO,IAAI,EACjE,OAAOoB,GAAQA,EAAK,KAAK,OAAS,IAAMpB,EAAO,KAAK,MAAM,EAIlD,GAAA,CAAA,OAAAmK,MAAsC/J,GAAA,CAAA,CAAA,CAAA,EAAAgE,MAE3C,MAAAgG,EAAmBpI,EAAM,mBAAmB5C,CAAI,EAClDgL,IACG,MAAM,QAAQA,CAAY,EAG7BD,EAAO,QAAQC,EAAa,IAAA,CAAK9H,EAAG3B,IAAMA,CAAC,CAAA,EAF3C,QAAQ,MAAM,2BAA4BvB,EAAM,gDAAA,OAAwDgL,EAAcA,CAAY,GAKlI,IAAAC,EAAeF,EAAO,KAAK,OAC3BxE,EAAW3D,EAAM,YAAY5C,CAAI,qBAG5B,SAAAkL,EAAWC,EAAA,CAClBJ,EAAO,KAAK,KAAKE,CAAY,EACzBE,GACFvI,EAAM,YAAgB,CAAA,GAAA5C,EAAMiL,CAAY,CAAA,EAAG,QAAQE,CAAU,EAE/DF,IACAF,EAAO,KAAA,EAEJF,IACS,OAAAM,GAAe,UAGvBvI,EAAM,gBAAgB,QAAA,CAAS,KAAA,CAAA,GAAU5C,EAAMiL,CAAY,EAAG,OAAArK,CAAA,CAAA,YAK3DwK,EAAS7J,EAAW8J,EAAA,OACrBC,EAAA,CAAA,GAActL,EAAMuB,CAAC,EACrBgK,OAAYF,CAAW,EAClB,UAAArJ,MAAQhC,EACbuL,GAAM,CAAC,IAAMvJ,IACfuJ,GAAM,OAAO,EAAG,CAAC,EAGrB,OAAAD,EAAQ,KAAA,GAAQC,EAAK,EACdD,EAGA,SAAAE,EAAIjK,EAAA,CACL,MAAAkK,EAAQlK,EACd,QAAQ,IAAI,WAAYkK,CAAK,EAC7BV,EAAO,KAAK,OAAOU,EAAO,CAAC,EAC3BV,EAAO,KAAA,EAED,MAAArJ,EAA2BkB,EAAM,YAAY5C,CAAI,EACvD0B,EAAM,KAAK,OAAO+J,EAAO,CAAC,EAC1B/J,EAAM,QAAQlB,GAAM,OAAOkB,EAAM,IAAI,CAAA,EACrCkB,EAAM,cAAc,gBAGb8I,EAAKC,EAAQC,EAAA,CACd,MAAAC,EAASd,EAAO,KAAKY,CAAM,EAC3BG,GAASf,EAAO,KAAKa,CAAM,EAEjCjC,EAAA,EAAAoB,EAAO,KAAKY,CAAM,EAAIG,GAAAf,CAAA,EACtBpB,EAAA,EAAAoB,EAAO,KAAKa,CAAM,EAAIC,EAAAd,CAAA,EACtBA,EAAO,KAAA,EAED,MAAArJ,GAA2BkB,EAAM,YAAY5C,CAAI,EACjD+L,GAAUrK,GAAM,KAAKiK,CAAM,EAC3BK,GAAUtK,GAAM,KAAKkK,CAAM,EACjClK,GAAM,KAAKiK,CAAM,EAAIK,GACrBtK,GAAM,KAAKkK,CAAM,EAAIG,GACrBrK,GAAM,KAAA,EACNkB,EAAM,cAAc,gBAGbqJ,EAAOC,EAAcC,EAAA,CACtB,MAAAC,EAAYF,EAAeC,EAAc,GAAK,KAElDT,EAAKQ,EAAcA,EAAeE,CAAS,EAC3CF,EAAeA,EAAeE,QACvBF,IAAiBC,YAGnBE,GAAA,CACD,MAAAtK,MAAUnB,GAChB,OAAAmB,EAAI,MAAM,gBACHA,cA2BsByJ,EAAIjK,CAAC,SAYHiK,EAAIjK,CAAC,SAQHiK,EAAIjK,CAAC,SAMH0K,EAAO1K,EAAG,CAAC,UAIXmK,EAAKnK,EAAGA,EAAE,CAAC,UAKXmK,EAAKnK,EAAGA,EAAE,CAAC,UAGX0K,EAAO1K,EAAG+K,EAAQ,OAAO,CAAC,SAiBrCpB,YAEGA,EAAW,QAAQ,waCnKA,6BAAkC,oEADpFvL,EAEKC,EAAAwF,EAAAtF,CAAA,mLAjCQ,OAAAc,CAAA,EAAAoE,GACA,MAAApC,CAAA,EAAAoC,GACA,KAAAhF,EAAA,EAAA,EAAAgF,QAELoB,EAAA,CACJ,SAAUxF,EAAO,MAAM,YACvB,YAAa,GACb,GAAI,gBAAgBZ,EAAK,KAAK,GAAG,EACjC,SAAUY,EAAO,MAAM,UAEnB+F,MAAW3F,GAAA,CAAA,CAAA,GAIT,MAAAW,EAAeiB,EAAM,mBAAmB5C,CAAI,EAC/C2B,GAAKA,EAAE,OAAS,GACjBgF,EAAK,QAAS,CAAA,MAAOhF,EAAE,KAAK,GAAG,CAAA,CAAA,EAInCgF,EAAK,aAAaA,GAAAA,OACV,MAAAoE,GAASpE,EAAAA,EAAK,QAALA,YAAAA,EAAe,MAAM,KAChCoE,GAGJnI,EAAM,WAAW5C,EAAM+K,CAAM,UAGzB5J,EAAA,IAAaqF,GAAmBJ,CAAU,kwDCzB7CmG,GAAA,OAAAA,EAAA,CAAA,GAAA3I,GAAAD,EAAAjE,KAAO,QAAP,YAAAiE,EAAc,WAAd,MAAAC,EAAwB,SAAS,YAG5BlE,EAAM,CAAA,EAAC,OAAS,SAAWA,EAAM,CAAA,EAAC,MAAM,cAAgB,OAAM,EAE9DA,EAAM,CAAA,EAAC,OAAS,QAAO,GAEvBoE,EAAApE,EAAM,CAAA,EAAC,QAAP,MAAAoE,EAAc,MAAK,qUAZhB,OAAAlD,CAAA,EAAAoE,GACA,MAAApC,CAAA,EAAAoC,GACA,KAAAhF,EAAA,EAAA,EAAAgF,iXCwBFtF,EAAe,CAAA,uBAApB,OAAI6B,GAAA,gLADR5B,EAIKC,EAAAwF,EAAAtF,CAAA,2EAHIJ,EAAe,CAAA,oBAApB,OAAI6B,GAAA,EAAA,2GAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,6LAPG7B,EAAe,CAAA,uBAApB,OAAI6B,GAAA,gGAHH7B,EAAK,CAAA,CAAA,wLADZC,EAQKC,EAAA6E,EAAA3E,CAAA,EAPHC,EAAe0E,EAAA6C,CAAA,gBACfvH,EAKK0E,EAAAC,CAAA,wGANAhF,EAAK,CAAA,CAAA,2EAGDA,EAAe,CAAA,oBAApB,OAAI6B,GAAA,EAAA,2GAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,gDAAJ,OAAIA,GAAA,gKAPkB,kDAE9B,mFAJ0B,oCAE1B,yGAesC,KAAA7B,EAAK,CAAA,EAAA,OAAOA,KAAO,IAAI,SAAWA,EAAM,CAAA,wFAAxCkF,EAAA,IAAAwF,EAAA,KAAA1K,EAAK,CAAA,EAAA,OAAOA,KAAO,IAAI,uJAPrB,KAAAA,KAAO,YAAcA,EAAM,CAAA,wPAV9D,OAAAA,OAAY,OAAS,EAEhBA,EAAO,CAAA,EAAC,SAAW,EAAC,EAEpBA,EAAK,CAAA,EAAA,8VAdJ,MAAAkD,CAAA,EAAAoC,GACA,QAAA4C,CAAA,EAAA5C,EACA,CAAA,MAAA0F,QAA4B,EAAA1F,GAE5B,KAAAhF,EAAA,EAAA,EAAAgF,EAEPyD,EAAa7F,EAAM,8BACnB,IAAA4J,EAAkBC,EAAc7E,EAAUA,EAAQ,OAAOhH,GAAU,OAAA,QAAA+C,EAAA/C,EAAO,QAAP,YAAA+C,EAAc,SAAU,SAAQ,iZCClGjE,EAAc,CAAA,CAAA,0CAFjBC,EAGMC,EAAAyF,EAAAvF,CAAA,wDADHJ,EAAc,CAAA,CAAA,+GAHdgN,EAAAhN,KAAiB,GAAC8I,GAAA9I,CAAA,yEAAlBA,KAAiB,kMATT,WAAAiN,CAAA,EAAA3H,GACA,MAAApC,CAAA,EAAAoC,EACP4H,EAAgBhK,EAAM,SAAS,IAAIP,GAAQA,EAAK,OAAOC,GAAA,CACnD,MAAAC,EAAMD,EAAI,QAAQ,KACjB,OAAAqK,EAAW,IAAIpK,EAAI,CAAC,IAAOA,EAAI,OAAS,GAAKoK,EAAW,IAAIpK,EAAI,CAAC,CAAA,IACvE,MAAM,gTCkDFgK,GAAA,OAAAA,EAAA,OAAO,KAAK7M,EAAW,CAAA,CAAA,EAAA,OAAS,wDAOrB,KAAAiE,EAAAjE,OAAA,YAAAiE,EAAY,cAAc,GAAO,GAAOjE,EAAY,CAAA,2DARtEC,EASKC,EAAAwF,EAAAtF,CAAA,8HADa8E,EAAA,KAAAsC,EAAA,KAAAvD,EAAAjE,OAAA,YAAAiE,EAAY,cAAc,GAAO,GAAOjE,EAAY,CAAA,2KAdzCA,EAAc,EAAA,OAAQA,EAAI,CAAA,iNAFvDC,EAMKC,EAAA6E,EAAA3E,CAAA,EALHC,EAEK0E,EAAAC,CAAA,6FAD4ChF,EAAI,CAAA,iRAYnDC,EAAoBC,EAAA2B,EAAAzB,CAAA,qEAHjBJ,EAAW,CAAA,CAAA,UADdC,EAEGC,EAAA4F,EAAA1F,CAAA,2BADAJ,EAAW,CAAA,CAAA,uIAZfA,EAAQ,CAAA,EAAA,gGAJbC,EAEQC,EAAAqK,EAAAnK,CAAA,maAhCK,MAAA8C,CAAA,EAAAoC,GACA,KAAAhF,CAAA,EAAAgF,EAEP6H,EADoCjK,EAAM,YAAgB,CAAA,GAAA5C,EAAM,IAAI,CAAA,EACpD,IAAIuE,GAAKA,EAAIN,GAAS,IAAIM,CAAC,QAAa,qBACxD,IAAAuI,EAAcD,EAAU,IAAIE,GAAA,KACzBA,iBAGCC,EAAOD,EAAG,WACVlD,EAAA,CAAA,EACK,UAAApI,KAAOuL,EAChBnD,EAAEpI,CAAG,EAAI,eAEJoI,uBAIL,IAAAoD,EAAkDrK,EAAM,YAAgB,CAAA,GAAA5C,EAAM,MAAM,CAAA,yBACpFkN,EAAaD,EAAY,KAAKE,GAAA,OAAsBA,GAAgB,SAAWA,EAAcA,EAAY,EAAI,yBAC7GC,EAAW,OAAO,KAAKC,CAAS,EAAE,SAAW,EAE7CC,EAA+B1F,GAAQ,OAAOE,GAAKA,EAAE,KAAK,CAAC,IAAM,UAAU,EAC5E,IAAIA,GAAiBtH,GAAM,MAAMsH,CAAC,CAAA,EAClC,IAAIA,IACHA,EAAE,KAAK,OAAO,EAAG,CAAC,EACXA,EAER,EAAA,OAAOA,GAAKA,EAAE,KAAK,QAAU,GAAKA,EAAE,MAAM,QAAU,QAAQ,eAGxC6B,EAAA,EAAAyD,GAAYA,CAAQ,mhBCyEpC1N,EAAe,CAAA,GAAAuF,GAAAvF,CAAA,IAKZA,EAAS,CAAA,GAAA,CAAA,cAAuBA,EAAO,EAAA,kBAA7C,OAAI6B,GAAA,EAAA,2EAmB8B,KAAA,CAAA,GAAA7B,KAAK,aAAa,EAAW,OAAAA,KAAc,2CAIzC,KAAA,CAAA,GAAAA,KAAK,QAAQ,EAAW,OAAAA,KAAc,wDAC1CA,EAAc,EAAA,iCACV,KAAA,CAAA,GAAAA,KAAK,MAAM,EAAW,OAAAA,KAAc,oCAItC,KAAA,CAAA,GAAAA,KAAK,WAAW,EAAW,OAAAA,KAAc,oBACxEA,EAAW,CAAA,GAAAyF,GAAAzF,CAAA,KAGTA,EAAO,EAAA,wBAAZ,OAAI6B,GAAA,6oBA1CR5B,EA6CKC,EAAAyH,EAAAvH,CAAA,EA5CHC,EAEKsH,EAAA3C,CAAA,sGAoBL3E,EAGQsH,EAAA4C,CAAA,4BAIRlK,EAAkDsH,EAAAC,CAAA,SAClDvH,EAKKsH,EAAA5C,CAAA,+QAhCA/E,EAAe,CAAA,iHAKZA,EAAS,CAAA,GAAA,gFAmBmBkF,EAAA,CAAA,EAAA,IAAA2I,EAAA,KAAA,CAAA,GAAA7N,KAAK,aAAa,GAAWkF,EAAA,CAAA,EAAA,IAAA2I,EAAA,OAAA7N,KAAc,2DAIzCkF,EAAA,CAAA,EAAA,IAAA4I,GAAA,KAAA,CAAA,GAAA9N,KAAK,QAAQ,GAAWkF,EAAA,CAAA,EAAA,IAAA4I,GAAA,OAAA9N,KAAc,6HAEtCkF,EAAA,CAAA,EAAA,IAAA6I,GAAA,KAAA,CAAA,GAAA/N,KAAK,MAAM,GAAWkF,EAAA,CAAA,EAAA,IAAA6I,GAAA,OAAA/N,KAAc,wDAItCkF,EAAA,CAAA,EAAA,IAAA8I,GAAA,KAAA,CAAA,GAAAhO,KAAK,WAAW,GAAWkF,EAAA,CAAA,EAAA,IAAA8I,GAAA,OAAAhO,KAAc,sBACxEA,EAAW,CAAA,0HAGTA,EAAO,EAAA,wBAAZ,OAAI6B,IAAA,EAAA,yHAAJ,OAAIA,GAAA+D,EAAA,OAAA/D,IAAA,uDAjCJ,OAAIA,GAAA,gIAiCJ,OAAIA,GAAA,wZA/CwB7B,EAAa,EAAA,kBAAmB,6BAAkC,8KADlGC,EAIKC,EAAAwF,EAAAtF,CAAA,iWAOyC,cAAwB,KAAA,CAAA,GAAAJ,KAAK,UAAU,EACvD,OAAAA,KAAc,wCACJ,KAAA,CAAA,GAAAA,KAAK,cAAc,EAAW,OAAAA,KAAc,+IAFdkF,EAAA,CAAA,EAAA,IAAA2I,EAAA,KAAA,CAAA,GAAA7N,KAAK,UAAU,GACvDkF,EAAA,CAAA,EAAA,IAAA2I,EAAA,OAAA7N,KAAc,sDACJkF,EAAA,CAAA,EAAA,IAAA4I,EAAA,KAAA,CAAA,GAAA9N,KAAK,cAAc,GAAWkF,EAAA,CAAA,EAAA,IAAA4I,EAAA,OAAA9N,KAAc,sXAK5EC,EAMQC,EAAAqK,EAAAnK,CAAA,uNAPkB,KAAAJ,EAAK,CAAA,EAAA,OAAQ,CAAA,WAAYA,EAAC,EAAA,CAAA,CAAA,yJADxDC,EAUKC,EAAAwF,EAAAtF,CAAA,iEATyB8E,EAAA,CAAA,EAAA,KAAA+I,EAAA,KAAAjO,EAAK,CAAA,EAAA,OAAQ,CAAA,WAAYA,EAAC,EAAA,CAAA,CAAA,uMA6BpB,KAAA,CAAA,GAAAA,KAAK,eAAe,EAAW,OAAAA,KAAc,uGAA7CkF,EAAA,CAAA,EAAA,IAAA4F,EAAA,KAAA,CAAA,GAAA9K,KAAK,eAAe,GAAWkF,EAAA,CAAA,EAAA,IAAA4F,EAAA,OAAA9K,KAAc,mKAG7C,KAAA,CAAA,GAAAA,KAAKA,EAAK,EAAA,CAAA,EAAW,OAAAA,KAAcA,EAAK,EAAA,CAAA,2FAAxCkF,EAAA,CAAA,EAAA,IAAA4F,EAAA,KAAA,CAAA,GAAA9K,KAAKA,EAAK,EAAA,CAAA,GAAWkF,EAAA,CAAA,EAAA,IAAA4F,EAAA,OAAA9K,KAAcA,EAAK,EAAA,CAAA,6JAlDtE,OAAA,OAAAA,MAAW,SAAQ,kWAtFpB,MAAAkD,CAAA,EAAAoC,GACA,OAAApE,CAAA,EAAAoE,GACA,KAAAhF,CAAA,EAAAgF,EACPyD,EAAa7F,EAAM,8BACjB,MAAAlB,EAAQkB,EAAM,YAAY5C,CAAI,yBAChC4B,EAAQF,EAAM,KAMdkM,EAAkChL,EAAM,cAAc,KAAKzB,GAAU,QAAA,OAAAnB,EAAK,GAAG,CAAC,IAAM,mBAAmB2D,GAAAxC,EAAO,SAAP,YAAAwC,GAAe,WAAA,OAAqB,yBAG3IkK,EAAA,CAAA,EACAC,EAAA,CAAA,YACOrK,KAAMiE,GAAU,KACrBK,GAActE,EAAG,aAAkBA,EAAG,UAAe,2BAErD,GADJsE,GAAcA,GAAY,IAASA,GAC/BtE,EAAG,OAAQ,OACPsK,GAAmBtK,EAAG,OACjB,UAAAkE,MAASoG,GAAA,KACdC,EAAkCF,EAASnG,EAAK,EAE/CqG,IACHA,EAAA,CACE,GAAI,SAAWrG,GACf,KAAA,CACE,GAAI,yBAA2BA,GAAQ,UAG3CmG,EAASnG,EAAK,EAAIqG,EAClBH,EAAgB,KAAKG,CAAY,GAEnCA,EAAa,KAAK,GAAKA,EAAa,KAAK,GAAK,QAAUjG,GAAc,UAK1E8F,EAAgB,KAAA,CACd,GAAI,SAAWpK,EAAG,GAClB,KAAA,CACE,GAAM,cAAgBA,EAAG,GAAQ,4BAA8BsE,GAAc,YAM7E,MAAAkG,MAAoBzH,GAAA,CACxB,SAAU,yCACV,SAAUqH,IAINlH,EAAA,IAAW3F,GAAA,CAAgB,MAAAY,CAAA,CAAA,EAEjC+E,EAAK,mBAAmBE,GAAA,CACtBnF,EAAM,QAAQmF,EAAI,KAAO,IAGvB,IAAAqH,EAA+CtL,EAAM,YAAgB,CAAA,GAAA5C,EAAM,UAAU,CAAA,2BAEnFmO,EAAA,CAAA,EACK,UAAAC,KAAQC,GACbD,EAAK,KAAK,SAAW,IACvBD,EAAcC,EAAK,KAAK,CAAC,GAAiBA,YAIrCE,GAAA,CACHJ,EAAS,OAAA,QACXA,EAAS,QAAA,CAAA,CAAA,QAIPK,MAAY,IAAA,CAAK,WAAY,eAAgB,cAAe,WAAY,SAAU,YAAa,gBAAiB,WAAY,SAC5HC,MAAc,IAAA,CAAK,SAAU,cAAe,SAAS,CAAA,EAErDC,EAAkCJ,GACrC,OAAOzN,GAAUA,EAAO,KAAK,QAAU,GAAKA,EAAO,KAAK,CAAC,IAAM,aAAe8N,GAAmB9N,EAAO,KAAK,CAAC,IAAM,MAAA,EACnH,IAAA+N,EAAiBlC,EAAcgC,EAAoBA,EAAkB,OAAO7N,GAAUA,QAAAA,QAAAA,GAAAA,EAAO,QAAPA,YAAAA,GAAc,SAAU,SAAQ,QACpHgO,EAAoBP,GAAkC,OAAOzN,GAAUA,EAAO,KAAK,QAAU,GAAM,CAAA2N,EAAM,IAAI3N,EAAO,KAAK,CAAC,CAAA,GAAA,CAAO4N,EAAQ,IAAI5N,EAAO,KAAK,CAAC,IAAI,IAAIA,GAAUA,EAAO,KAAK,KAAK,GAAG,CAAA,EACtM,QAAQ,IAAA,CAAM,MAAAgC,CAAA,CAAA,cAwBF0L,IACUJ,EAAS,KAAK,OAAO3M,EAAG,CAAC,EACzB2M,EAAS,KAAI,UASNI,IAAgBJ,EAAS,KAAK,MAAM,GAAI,OAAW,KAAI,CAAA,CAAA,CAAA,EAAQA,EAAS,KAAI,kdCnIzGvO,EAEKC,EAAAwF,EAAAtF,CAAA,uCAKAqI,EAAAzI,KAAQ,MAAK,SACcuI,EAAAvI,KAAQ,QAAQ,KAAK,KAAK,GAAG,EAAA,OACxDmP,EAAAnP,KAAQ,QAAO,SAEHoP,EAAApP,KAAQ,QAAQ,UAAU,KAAK,GAAG,EAAA,wKALjDC,EAOIC,EAAAmP,EAAAjP,CAAA,gBALFC,EAAiEgP,EAAAtJ,CAAA,8BAEjE1F,EAEgBgP,EAAAxJ,CAAA,wBALfX,EAAA,GAAAuD,KAAAA,EAAAzI,KAAQ,MAAK,KAAAmF,EAAAqD,EAAAC,CAAA,EACcvD,EAAA,GAAAqD,KAAAA,EAAAvI,KAAQ,QAAQ,KAAK,KAAK,GAAG,EAAA,KAAAmF,EAAAuD,EAAAH,CAAA,EACxDrD,EAAA,GAAAiK,KAAAA,EAAAnP,KAAQ,QAAO,KAAAmF,EAAAmK,EAAAH,CAAA,EAEHjK,EAAA,GAAAkK,KAAAA,EAAApP,KAAQ,QAAQ,UAAU,KAAK,GAAG,EAAA,KAAAmF,EAAAoK,EAAAH,CAAA,2CAZ9CpP,EAAQ,CAAA,EAAC,SAAW,GAAC8I,GAAA,IAMnB9I,EAAQ,CAAA,uBAAb,OAAI6B,GAAA,4LAND7B,EAAQ,CAAA,EAAC,SAAW,kEAMlBA,EAAQ,CAAA,oBAAb,OAAI6B,GAAA,EAAA,2HAAJ,iFATW,SAAAgF,CAAA,EAAAvB,oPC+EH,gBAAc,MAACtF,EAAM,CAAA,CAAA,UAAzBC,EAA8BC,EAAA0H,EAAAxH,CAAA,iCAAXJ,EAAM,CAAA,CAAA,yGAFzBC,EAA4BC,EAAA0H,EAAAxH,CAAA,yHAS6E;AAAA,SAEvG,8DAF8BJ,EAAO,EAAA,EAACA,EAAM,CAAA,EAAA,OAAO,SAASA,EAAK,EAAA,EAAC,IAAI,CAAA,uDAAxEC,EAGGC,EAAA2J,EAAAzJ,CAAA,mDAH6BJ,EAAO,EAAA,EAACA,EAAM,CAAA,EAAA,OAAO,SAASA,EAAK,EAAA,EAAC,IAAI,4JAFpDA,EAAU,CAAA,CAAA,MAAC,kBAAgB,+BAA/CC,EAAoDC,EAAAwF,EAAAtF,CAAA,kCAAhCJ,EAAU,CAAA,CAAA,iGAF9BC,EAAmBC,EAAAwF,EAAAtF,CAAA,qQAmFhB,IAAA4M,EAAAhN,OAAqB,QAASyF,GAAAzF,CAAA,gHAhEnCC,EA+DKC,EAAAwF,EAAAtF,CAAA,qHACAJ,OAAqB,mQAtEnBA,EAAc,EAAA,uBAAnB,OAAI6B,GAAA,6MAAC7B,EAAc,EAAA,oBAAnB,OAAI6B,GAAA,EAAA,mHAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,yCAAJ,OAAIA,GAAA,8JASqC,WAAA7B,MAAc,OAAO,oCAD5B;AAAA,WAC9B,oEADFC,EAEKC,EAAAwF,EAAAtF,CAAA,6NAEsB,QAAAJ,KAAU,sGADrCC,EAGKC,EAAAwF,EAAAtF,CAAA,0DAFsB8E,EAAA,IAAAsK,EAAA,QAAAxP,KAAU,0JAME,WAAAA,EAAc,EAAA,EAAA,QAAQ,gBAAgB,SAAS,oCADtD;AAAA,WAC9B,oEADFC,EAEKC,EAAAwF,EAAAtF,CAAA,gOAEqB,OAAO,oBAAmBJ,EAAS,CAAA,EAAC,MAAS,CAAC,sBACrD,QAAAA,KAAU,oEACV,QAAAA,KAAU,mKAH7BC,EAIKC,EAAAwF,EAAAtF,CAAA,+GAH+CJ,EAAS,CAAA,EAAC,MAAS,CAAC,wBACrDkF,EAAA,IAAAuK,EAAA,QAAAzP,KAAU,wDACVkF,EAAA,IAAAwK,EAAA,QAAA1P,KAAU,sQAKU,WAAAA,MAAc,SAAS,oCAF5C;AAAA,WAEhB,gDAFFC,EAGKC,EAAAwF,EAAAtF,CAAA,6NAGsB,QAAAJ,KAAU,2EADrCC,EAEKC,EAAAwF,EAAAtF,CAAA,0DADsB8E,EAAA,IAAAsK,EAAA,QAAAxP,KAAU,uKAIEA,EAAa,EAAA,EAAC,gBAAgB,gBAAgB,oCADrD;AAAA,WAC9B,oEADFC,EAEKC,EAAAwF,EAAAtF,CAAA,sNAEc,QAAAJ,KAAU,6CACV,QAAAA,KAAU,oHAF7BC,EAGKC,EAAAwF,EAAAtF,CAAA,yDAFc8E,EAAA,IAAAuK,EAAA,QAAAzP,KAAU,wDACVkF,EAAA,IAAAwK,EAAA,QAAA1P,KAAU,6OAIUA,EAAa,EAAA,EAAC,WAAW,QAAQ,oCADxC;AAAA,WAC9B,oEADFC,EAEKC,EAAAwF,EAAAtF,CAAA,sNAEc,QAAAJ,KAAU,wCACV,QAAAA,KAAU,4GAF7BC,EAGKC,EAAAwF,EAAAtF,CAAA,yDAFc8E,EAAA,IAAAuK,EAAA,QAAAzP,KAAU,mDACVkF,EAAA,IAAAwK,EAAA,QAAA1P,KAAU,kRAE7BC,EAA0CC,EAAAwF,EAAAtF,CAAA,yFAOvB,IAAA,KAAK,UAAUJ,EAAgB,CAAA,EAAA,KAAM,IAAI,EAAE,WAAW;AAAA,EAAK,OAAO,+BAGjDA,EAAS,CAAA,CAAA,cAMvB,MAAA,CAAA,KAAAA,KAAM,QAAQ;qGAfpCC,EAgBKC,EAAAyP,EAAAvP,CAAA,EAfHC,EAGKsP,EAAA3K,CAAA,SACL3E,EAEKsP,EAAA5K,CAAA,wCAGL1E,EAGKsP,EAAAhI,CAAA,6CAPYzC,EAAA,KAAAsC,EAAA,IAAA,KAAK,UAAUxH,EAAgB,CAAA,EAAA,KAAM,IAAI,EAAE,WAAW;AAAA,EAAK,OAAO,0CAGjDA,EAAS,CAAA,wBAMvBkF,EAAA,IAAA0K,EAAA,KAAA5P,KAAM,+hBAOD,KAAAA,KAAiB,gBAAsB,OAAAA,KAAiB,wEADnFC,EAEKC,EAAAwF,EAAAtF,CAAA,sCADsB8E,EAAA,MAAA2K,EAAA,KAAA7P,KAAiB,0BAAsBkF,EAAA,MAAA2K,EAAA,OAAA7P,KAAiB,kKAvE3D,OAAAA,MAAuBA,EAAQ,EAAA,CAAA,QAChCA,EAAQ,EAAA,CAAA,oRAtB9B,OAAAA,OAAW,OAASqH,uEAKpBrH,EAAiB,CAAA,EAAC,OAAS,EAAC,EAEvBA,KAAa,EAAC,sEAUrBA,EAAiB,CAAA,EAAC,OAAS,EAAC,uMArBnCC,EAsGKC,EAAA6E,EAAA3E,CAAA,EApGHC,EAiBK0E,EAAAC,CAAA,4pBA1EC,MAAA8K,EAAiCC,OAE5B,MAAA7M,CAAA,EAAAoC,EACPuB,EAAW3D,EAAM,4BACjB,IAAA8M,EAAYnJ,EAAS,KAAMoJ,GAA2BA,EAAE,OAAOA,GAAKA,EAAE,QAAU,OAAO,EAAE,MAAM,2BAC7FC,EAAgBhN,EAAM,iCAEtB,MAAAiN,EAAWrP,GAAM,MAAMgP,EAAY,IAAIM,GAAQA,EAAK,MAAM,KAAK,CAAA,EAE/DC,EAAA,CAAA,EACK,UAAAC,KAAUH,EACnBE,EAAUC,CAAM,EAAIR,EAAY,OAAOM,GAAQA,EAAK,MAAM,QAAUE,CAAM,EAIxE,IAAAtF,EAAuB9H,EAAM,aAAa,IAAI,CAAA,2BAC5CqN,EAAK,OAAO,SACZC,EAAUD,EAAG,SAAW,KAAOA,EAAG,KAAO,0BAEtC,SAAAE,KAAiBC,EAAA,CAClB,MAAAC,MAAgB,IACX,UAAAC,KAAcF,EAAA,OACjBJ,EAAuBD,EAAUO,CAAU,EACtC,UAAAhM,MAAc0L,EACvBK,EAAU,IAAI/L,GAAW,KAAK,CAAC,CAAA,SAG5B+L,EAIA,SAAAE,EAAuBnP,EAAA,KAC1BD,EAASqO,EAAY,KAAKrO,GAAUA,EAAO,KAAK,SAAW,GAAKA,EAAO,KAAK,CAAC,IAAMC,CAAE,EACzF,OAAAD,EAASX,GAAM,MAAMW,CAAM,EAC3BA,EAAO,SAAW,GAClBA,EAAO,MAAM,eACNA,EAGL,IAAAqP,GAAkB,KAAM,OAAQ,cAAe,QAAQ,EACvDC,EAAmB7N,EAAM,cAAc,IAAIzB,GAAA,KACxCA,iBAGCyN,EAAA,CAAA,EACK,UAAA8B,KAAiBF,EACrBrP,EAAOuP,CAAa,GACvB9B,EAAQ,KAAK8B,CAAa,SAGvB9B,2BAGL+B,EAA0D/N,EAAM,+CAgGrC+N,EAAgB,QAAQ,MAAS,kaCtK6KjR,EAAK,CAAA,CAAA,ohBAAmeA,EAAK,CAAA,CAAA,6bAA3tBC,EAAk+BC,EAAAC,EAAAC,CAAA,EAAt3BC,EAAg3BF,EAAA+Q,CAAA,EAA11B7Q,EAAme6Q,EAAAC,CAAA,EAAK9Q,EAA2W6Q,EAAAE,CAAA,+BAAvuBpR,EAAK,CAAA,CAAA,qBAAmeA,EAAK,CAAA,CAAA,6CAFjtB,GAAA,CAAA,MAAAqR,EAAQ,SAAQ,EAAA/L,gICI3B,MAAqBgM,EAAa,CAI9B,YAAYC,EAAaC,EAAuB,CAH/BxQ,GAAA,YACAA,GAAA,gBAGb,KAAK,IAAMuQ,EACX,KAAK,QAAUC,CACnB,CAEA,MAAa,eAMX,CACc,KAAK,QAAQ,KACnB,KAAA,CAAE,SAAAC,CACJ,EAAA,MAAM3Q,GAAM,aAAa,KAAK,IAAM,WAAW,EAE7C4Q,EAIA,CAAA,EACN,QAASC,KAAQF,EAAU,CACnB,IAAAG,EAAQD,EAAK,MAAM,GAAG,EACtBE,EAAQ,OAAOD,EAAM,CAAC,CAAC,EACtB,MAAMC,CAAK,EAIJA,EAAA,QAHFD,EAAA,OAAO,EAAG,CAAC,EACjBD,EAAOA,EAAK,UAAUA,EAAK,QAAQ,GAAG,EAAI,CAAC,GAIzC,MAAAvQ,EAAgCwQ,EAAM,CAAC,EACvClQ,EAAKiQ,EAAK,UAAUA,EAAK,YAAY,GAAG,EAAI,EAAGA,EAAK,OAAS,CAAc,EAC7EG,GAAU,kBAAkB,QAAapQ,CAAE,EAAI,GAGnDgQ,EAAc,KAAK,CAAE,GAAAhQ,EAAI,MAAAmQ,EAAO,SAAAzQ,CAAU,CAAA,CAC9C,CACO,OAAAsQ,CACX,CAEA,MAAM,MACFnQ,EACAH,EACA2Q,EACwB,CACpB,GAAA,CACO,OAAA,MAAMjR,GAAM,aAAa,KAAK,OAAOS,EAASH,EAAU2Q,CAAG,CAAC,QAE5D,MACX,CACJ,CAEA,MAAM,OAAOrQ,EAAYD,EAAgBL,EAA+B,CAChEM,IAAO,QAAaA,IAAO,IAG/B,MAAM,MAAM,KAAK,OAAOA,EAAIN,CAAQ,EAAG,CACnC,OAAQ,OACR,QAAS,CACL,eAAgB,gCACpB,EACA,KAAMK,CAAA,CACT,CACL,CAEO,SAASC,EAAY,CACjB,OAAA,KAAK,OAAOA,EAAI,QAAQ,CACnC,CAEO,OAAOA,EAAYN,EAA+B2Q,EAAc,CACnEA,MAAQ,KAAK,QAAQ,MACrB,MAAMC,EAASD,IAAQ,OAAY,IAAMA,EAAM,GAC/C,MAAO,GAAG,KAAK,MAAMC,KAAU5Q,KAAYM,KAAMA,QACrD,CACJ,yBClDc1B,EAAY,CAAA,GAAIA,EAAI,CAAA,EAAC,OAAK,sBADG,WAC9B,aAA4B,GACvC,0DADYA,EAAY,CAAA,GAAIA,EAAI,CAAA,EAAC,OAAK,KAAAmF,EAAAC,EAAAN,CAAA,6DAFnBA,EAAA9E,KAAK,GAAE,kCAFTA,EAAoB,CAAA,EAACA,EAAI,CAAA,EAAC,EAAE,KAGxC,IAAAgN,EAAAhN,KAAK,OAASA,EAAK,CAAA,EAAA,QAAUA,EAAO,CAAA,GAAA8I,GAAA9I,CAAA,6IAJzCC,EAEKC,EAAAwF,EAAAtF,CAAA,uBACLH,EAA8BC,EAAA4F,EAAA1F,CAAA,6EAFbJ,EAAoB,CAAA,EAACA,EAAI,CAAA,EAAC,EAAE,cAE1B,CAAAiF,GAAAC,EAAA,IAAAJ,KAAAA,EAAA9E,KAAK,GAAE,KAAAmF,EAAAC,EAAAN,CAAA,EACrB9E,KAAK,OAASA,EAAK,CAAA,EAAA,QAAUA,EAAO,CAAA,yhBAvB9B,KAAAiS,CAAA,EAAA3M,GACA,SAAAlE,CAAA,EAAAkE,GACA,cAAA/B,CAAA,EAAA+B,EAEP4M,EAAc5Q,GAAc,YAAYiC,EAAc,wBAAwB0O,EAAK,KAAK,GAAG,KAAKE,GAAYA,EAAS,YAAY,yBAEjIC,EAAS7O,EAAc,YAAY,KAAK8O,GAAMA,EAAG,GAAG,qBAC/C,SAAAC,EAAqB/Q,EAAA,OACxB,OAAAH,IAAa,SACRmR,GAAgB,gBAAgB,IAAIhR,CAAO,EAAE,MAE/C0C,EAAAlD,GAAgB,uBAAA,EAAyB,IAAIQ,CAAO,IAApD,YAAA0C,EAAuD,WAG1D,MAAAuO,EAAWC,WAIsBD,EAAS,gBAAiBP,CAAI,gZCd5D,MAAM,KAAKjS,EAAQ,CAAA,CAAA,uBAAxB,OAAI6B,GAAA,iMADR5B,EAIKC,EAAAwF,EAAAtF,CAAA,0IAHI,MAAM,KAAKJ,EAAQ,CAAA,CAAA,oBAAxB,OAAI6B,GAAA,EAAA,2GAAJ,OAAIA,EAAA+D,EAAA,OAAA/D,GAAA,gDAAJ,OAAIA,GAAA,wLACkB7B,EAAK,CAAA,8IAALA,EAAK,CAAA,yKAJ5BA,EAAQ,CAAA,EAAC,OAAS,GAAC8I,GAAA9I,CAAA,yEAAnBA,EAAQ,CAAA,EAAC,OAAS,0NANV,SAAA0S,CAAA,EAAApN,EACA,CAAA,SAAAlE,EAAgC,QAAA,EAAAkE,GAChC,cAAA/B,CAAA,EAAA+B,qYCkBPrF,EAAoBC,EAAAwF,EAAAtF,CAAA,wXAJqC,MAE3D,uEAOQ,MAEN,uEAJW,QAEX,+EAFKJ,EAAM,CAAA,EAAA8I,0RARP9I,EAAO,CAAA,IAAA,mVAPjBC,EAuBKC,EAAAyH,EAAAvH,CAAA,EArBHC,EAEKsH,EAAA3C,CAAA,wBAEL3E,EAeKsH,EAAA5C,CAAA,ieA3BC,MAAAyN,EAAWC,KACN,GAAA,CAAA,OAAAE,EAAS,EAAA,EAAArN,EACT,CAAA,QAAAsN,EAAU,EAAA,EAAAtN,EAYuB,MAAAgD,EAAA,IAAAkK,EAAS,MAAM,EAMPK,EAAA,IAAAL,EAAS,MAAM,4QCIpD7L,GAAI3G,EAAK,CAAA,EAACA,EAAW,CAAA,CAAA,CAAA,gFAArB2G,GAAI3G,EAAK,CAAA,EAACA,EAAW,CAAA,CAAA,CAAA,4IADqC,QAAAA,OAAgB,EAAW,OAAAA,EAAc,CAAA,EAAA,IAAMA,KAAM,wJAArDkF,EAAA,IAAA4N,EAAA,QAAA9S,OAAgB,GAAWkF,EAAA,IAAA4N,EAAA,OAAA9S,EAAc,CAAA,EAAA,IAAMA,KAAM,2JAnBnH,MAAA+S,CAAA,EAAAzN,EACX,QAAQ,IAAI,wBAAyByN,CAAK,EAEtC,IAAAC,EAAsB,EAEpB,MAAAR,EAAWC,KAER,SAAAQ,EAAKC,EAAA,IACRA,EAAO,GAAKF,EAAc,IAAMD,EAAM,OAAA,CACxCP,EAAS,MAAM,EACfvI,EAAA,EAAA+I,EAAc,CAAA,SAGhB/I,EAAA,EAAA+I,EAAc,KAAK,IAAI,KAAK,IAAI,EAAGA,EAAcE,CAAI,EAAGH,EAAM,MAAM,CAAA,EAMxC,MAAAI,EAAA,IAAAF,IAAO,EAAkBG,EAAA,IAAAH,EAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sGCIoD;AAAA,SAE3G,8DAF8BjT,EAAO,EAAA,EAACA,EAAM,CAAA,EAAA,OAAO,OAAOA,EAAM,CAAA,EAAE,QAAQ,CAAA,uDAA5EC,EAGGC,EAAA2J,EAAAzJ,CAAA,mDAH6BJ,EAAO,EAAA,EAACA,EAAM,CAAA,EAAA,OAAO,OAAOA,EAAM,CAAA,EAAE,QAAQ,4JAFxDA,EAAU,CAAA,CAAA,MAAC,kBAAgB,+BAA/CC,EAAoDC,EAAAwF,EAAAtF,CAAA,iCAAhCJ,EAAU,CAAA,CAAA,mIAY9BC,EAAwCC,EAAAwF,EAAAtF,CAAA,2EAErB,QAAAJ,KAAU,sEACV,QAAAA,KAAU,mJAF7BC,EAIKC,EAAAwF,EAAAtF,CAAA,yDAHc8E,EAAA,IAAAuK,EAAA,QAAAzP,KAAU,gDACVkF,EAAA,IAAAwK,EAAA,QAAA1P,KAAU,8QAI7BC,EAA8BC,EAAAwF,EAAAtF,CAAA,uEAEX,QAAAJ,KAAU,6FAD7BC,EAGKC,EAAAwF,EAAAtF,CAAA,sCAFc8E,EAAA,IAAAsK,EAAA,QAAAxP,KAAU,qOAG7BC,EAAwCC,EAAAwF,EAAAtF,CAAA,uEAErB,QAAAJ,KAAU,uGAD7BC,EAEKC,EAAAwF,EAAAtF,CAAA,sCADc8E,EAAA,IAAAsK,EAAA,QAAAxP,KAAU,+OAG7BC,EAAwCC,EAAAwF,EAAAtF,CAAA,uEAErB,QAAAJ,KAAU,+FAD7BC,EAEKC,EAAAwF,EAAAtF,CAAA,sCADc8E,EAAA,IAAAsK,EAAA,QAAAxP,KAAU,yOAG7BC,EAA0CC,EAAAwF,EAAAtF,CAAA,+CAGrC,KAAK,UAAUJ,EAAO,CAAA,CAAA,EAAA,4CAGSA,EAAS,CAAA,CAAA,wHAL7CC,EAOKC,EAAA6E,EAAA3E,CAAA,EANHC,EAEK0E,EAAAC,CAAA,4DADF,KAAK,UAAUhF,EAAO,CAAA,CAAA,EAAA,KAAAmF,EAAAqD,EAAAC,CAAA,+BAGSzI,EAAS,CAAA,4IA9B9CqT,EAAA,OAAO,KAAKrT,EAAW,CAAA,CAAA,EAAA,KAAK,GAAG,EAAA,qFAX3B,OAAAA,KAAa,EAAC,yQADf,gBAAc,MAACA,EAAM,CAAA,CAAA,oMAH7BC,EAmDKC,EAAAyH,EAAAvH,CAAA,EAlDHC,EAWKsH,EAAA3C,CAAA,wBATH3E,EAA8B2E,EAAA4C,CAAA,6CAWhCvH,EAmCKsH,EAAA5C,CAAA,oIA9CgB/E,EAAM,CAAA,CAAA,sIAYxB,CAAAiF,GAAAC,EAAA,IAAAmO,KAAAA,EAAA,OAAO,KAAKrT,EAAW,CAAA,CAAA,EAAA,KAAK,GAAG,EAAA,KAAAmF,EAAAmO,EAAAD,CAAA,uPAhCvB,MAAAnQ,CAAA,EAAAoC,EACPpE,EAAuBgC,EAAM,OAAO,OAAOhC,GAAUA,EAAO,KAAK,OAAS,CAAC,EAC3EO,EAASyB,EAAM,qCACf2D,EAAW3D,EAAM,4BACjB,IAAA8M,EAAYnJ,EAAS,IAAKoJ,GAA2BA,EAAE,OAAOA,GAAKA,EAAE,QAAU,OAAO,EAAE,MAAM,qBAC9F,IAAAjF,EAAQ9H,EAAM,aAAa,IAAI,CAAA,2BAC7BqN,EAAK,OAAO,SACZC,EAAUD,EAAG,SAAW,KAAOA,EAAG,KAAO,0BAEzCF,EAAA,CAAA,EACK,UAAAkD,KAAiBrS,EAAA,CACpB,MAAAa,EAAMwR,EAAc,MAAM,OAAS,YAC5BlD,EAAUtO,CAAG,IAAMsO,EAAUtO,CAAG,EAAA,CAAA,IACxC,KAAKwR,CAAa,EAE3B,eAAQ,IAAK,CAAA,UAAAlD,EAAW,OAAAnP,CAAA,CAAA,2MCiGoD4D,EAAA9E,KAAe,MAAO,8CAD5E,uEACqD,aAClE;AAAA;AAAA,KAEL;;;;6GALFC,EAqBKC,EAAA6E,EAAA3E,CAAA,EApBHC,EAEK0E,EAAAC,CAAA,uBAEL3E,EAeI0E,EAAAyO,CAAA,UAlBoEtO,EAAA,CAAA,EAAA,KAAAJ,KAAAA,EAAA9E,KAAe,MAAO,KAAAmF,EAAAC,EAAAN,CAAA,uEA8F1E9E,EAAc,EAAA,ySALdA,EAAc,EAAA,iWAJhCC,EAEKC,EAAAwF,EAAAtF,CAAA,wUAZ0CJ,EAAW,CAAA,gEAAoBA,EAAS,EAAA,CAAA,+CAIxCA,EAAY,CAAA,2BAAoBA,EAAS,EAAA,CAAA,+CAEzCA,EAAe,CAAA,2BAAoBA,EAAS,EAAA,CAAA,oUAV3FC,EAYKC,EAAAwF,EAAAtF,CAAA,qBATHC,EAA8BqF,EAAA+N,CAAA,4BAI9BpT,EAAoCqF,EAAAgO,CAAA,4BAEpCrT,EAAsCqF,EAAAiO,CAAA,+HALO3T,EAAW,CAAA,qFAIXA,EAAY,CAAA,6CAEZA,EAAe,CAAA,+bArBfA,EAAW,CAAA,gEAAoBA,EAAS,EAAA,CAAA,+CAIxCA,EAAY,CAAA,2BAAoBA,EAAS,EAAA,CAAA,+CAGzCA,EAAe,CAAA,2BAAoBA,EAAS,EAAA,CAAA,oUAX3FC,EAYKC,EAAAwF,EAAAtF,CAAA,qBATHC,EAA8BqF,EAAA+N,CAAA,4BAI9BpT,EAAoCqF,EAAAgO,CAAA,4BAGpCrT,EAAsCqF,EAAAiO,CAAA,8HANO3T,EAAW,CAAA,oFAIXA,EAAY,CAAA,4CAGZA,EAAe,CAAA,2tBAjBtCA,EAAU,EAAA,gUACUA,EAAO,EAAA,8HAxBnDC,EA0BKC,EAAAyH,EAAAvH,CAAA,EAzBHC,EAmBKsH,EAAA3C,CAAA,EAlBH3E,EAA0B2E,EAAA4O,CAAA,wGAmB5BvT,EAIKsH,EAAA5C,CAAA,qBADL1E,EAAwD0E,EAAAY,CAAA,8sBA4C8B,oBACtF,4ZANsF,oBACtF,4ZAnBsF,oBACtF,qIAGE1F,EAAgCC,EAAA0H,EAAAxH,CAAA,0DAnBoD,oBACtF,qIAGEH,EAAgCC,EAAA0H,EAAAxH,CAAA,0DA9BiB,wBAEjD,uEAC6C,oBAE7C,uEACiD,cAEjD,uEACgG,oBAEhG,iIAE2C;AAAA,wCAE3C,iKAIiC,mCAAiC,+GAxBnE,OAAAJ,OAAU,OAAS,EA4BdA,OAAU,aAAY,EAetBA,OAAU,aAAY,EAetBA,OAAU,UAAS,EAInBA,OAAU,gBAAe,EAKzBA,OAAU,gBAAe,iXAvEuC,yCAExE,uOAHFC,EAIKC,EAAAwF,EAAAtF,CAAA,2OALqB,eAA0B,MAAA,CAAA,cAAAJ,EAAa,CAAA,CAAA,mlBAsF3C,OAAA6T,EAAA,IAAAC,GAAA,CAAA,MAAA,CAAA,MAAAC,EAAc,CAAA,CAAA,oGADpC9T,EAEKC,EAAAwF,EAAAtF,CAAA,yJA9GM,UAAAJ,MAAc,IAAGA,EAAA,EAAA,CAAA,4DA0G3BA,EAAU,CAAA,GAAA8I,GAAA9I,CAAA,sLAAVA,EAAU,CAAA,yQAlMF,CAAA,UAAAgU,EAAY,OAAO,SAAS,WAAa,YAAc,wBAA0B,gCAAA,EAAA1O,EAExF/B,EAAA,IAAoB0Q,GAAA,IAAkBA,GAAA,CACxC,YAAaC,GAAgB,kBAC3B,cAAA,OAEA,4BAAA,WAGEnL,EAAazH,GAAc,UAAUiC,EAAc,cAAc,qBAAsB,QAAA,CAC3F,cAAe,+DAEjBwF,EAAW,mBAAmBoL,GAAU,QAAQ,IAAI,iBAAkBA,CAAM,CAAA,EACtE,MAAAC,EAAY7Q,EAAc,YAAY,KAAK,KAC3CwO,EAAMxO,EAAc,YAAY,IAAI8O,GAAMA,GAAA,YAAAA,EAAI,GAAG,EACjDgC,EAAa,IAAA/C,GAAa0C,EAAWjC,CAAG,EAE1C,IAAAuC,EAAgBhT,GAAc,mBAAmB+S,EAAO,cAAA,CAAA,qBACxD,IAAAvR,EAAqCwR,EAAc,KAAKC,GAAK,QAAA,OAAAtQ,GAAAsQ,EAAE,UAAF,YAAAtQ,GAAW,OAAOsQ,IAAKA,GAAE,WAAa,UAAQ,EAC3GC,EAAa1R,EAAO,KAAK2R,GAAMA,EAAG,OAAOF,IAAKA,GAAE,QAAUxC,EAAI,IAAI,EAAA,CAAIA,CAAG,CAAA,yBACzE2C,EAAc5R,EAAO,KAAK2R,GAAMA,EAAG,OAAOF,IAAKA,GAAE,QAAA,QAAuBA,GAAE,QAAUxC,EAAI,IAAI,EAAA,CAAIA,CAAG,CAAA,qBACnG,IAAA4C,EAAiB7R,EAAO,KAAK2R,GAAMA,EAAG,OAAOF,IAAKA,GAAE,QAAU,MAAS,GAAIxC,CAAG,CAAA,qBAG9E,IAAA6C,EAAqCN,EAAc,KAAKC,GAAK,QAAA,OAAAtQ,GAAAsQ,EAAE,UAAF,YAAAtQ,GAAW,OAAOsQ,IAAKA,GAAE,WAAa,UAAQ,EAC3GM,EAAaD,EAAO,KAAKH,GAAMA,EAAG,OAAOF,IAAKA,GAAE,QAAUxC,EAAI,IAAI,EAAA,CAAIA,CAAG,CAAA,yBACzE+C,EAAcF,EAAO,KAAKH,GAAMA,EAAG,OAAOF,IAAKA,GAAE,QAAA,QAAuBA,GAAE,QAAUxC,EAAI,IAAI,EAAA,CAAIA,CAAG,CAAA,qBACnG,IAAAgD,EAAiBH,EAAO,KAAKH,GAAMA,EAAG,OAAOF,IAAKA,GAAE,QAAU,MAAS,GAAIxC,CAAG,CAAA,qBAE9E,IAAA7O,EAEE,MAAA4M,EAAiCC,OACnCiF,EAAA,IAAqB1R,GAAewM,EAAauE,EAAQ9Q,EAAA,CAAiB,WAAAwF,CAAA,CAAA,EAExE,MAAAkM,EAAkCC,GACpC,IAAAC,MAAqB3Q,GAAeyQ,EAAcZ,GAAU,WAAAtL,CAAA,CAAA,EAElDiM,EAAe,cAAc,IAAII,GAAeA,EAAY,EAAE,MAExEC,GAAY/T,GAAc,UAAUgU,GAAmB,IAAI,oBAAqB,MAAM,CAAA,4BACpFC,GAAUC,GAED,eAAAC,GAAUC,EAAA,OACjBnU,GAAyCmU,EAAM,OACrDzL,EAAA,EAAA/G,EAAQ,SAAA,EACR8R,EAAe,mBAAmB,EAAK,EACvCA,EAAe,cAAc,QAAA,MAAcX,EAAO,MAAM9S,GAAQ,GAAI,SAAUA,GAAQ,KAAK,CAAA,EAC3FyT,EAAe,mBAAA,EACf/K,EAAA,EAAA/G,EAAQ,eAAA,EAGK,eAAAyS,EAAUD,EAAA,OACjBhU,GAAoCgU,EAAM,OAChDzL,EAAA,EAAA/G,EAAQ,SAAA,EACRiS,EAAe,mBAAmB,EAAK,EACvCA,EAAe,cAAc,QAAA,MAAcd,EAAO,MAAM3S,GAAG,GAAI,SAAUA,GAAG,KAAK,CAAA,EACjFyT,EAAe,mBAAA,EACflL,EAAA,EAAA/G,EAAQ,eAAA,iBAGK0S,IAAA,CACb3L,EAAA,EAAA/G,EAAQ,SAAA,QACF2S,EAAA,CACJ,QAASzB,EACT,QAAS,GACT,eAAA,EAEI,SAAA,CAAW,QAAS,UAAU,EAC9B,SACE,KAAM,SACN,MAAO,OAAA,CAAA,IAIb,eAAgB,QAAQ,EACxB,gBACE,MAAO,EACP,MAAO,MAAA,CAAA,GAGXY,EAAe,cAAc,QAAQa,CAAkB,EACvDb,EAAe,mBAAA,EACf/K,EAAA,EAAA/G,EAAQ,eAAA,EA+BqC,MAAAoF,EAAA,IAAA/E,EAAc,eASzBsP,EAAA,IAAA5I,EAAA,EAAA/G,EAAQ,YAAY,QAGpB0S,KAGAE,GAAA,IAAA7L,EAAA,EAAA/G,EAAQ,YAAY,UAGnBiS,EAAe,cAAc,QAAO,CAAA,CAAA,EAAMlL,EAAA,EAAA/G,EAAQ,eAAe,WAGpDmS,GAAU,QAAQ,EAAI,WAcCpL,EAAA,EAAA/G,EAAO,MAAS,WAehB+G,EAAA,EAAA/G,EAAO,MAAS,WAkBhB+G,EAAA,EAAA/G,EAAO,MAAS,WAKhB+G,EAAA,EAAA/G,EAAO,MAAS,GAlG1D6S,GAAAC,IAAKA,GAAA,YAAAA,EAAG,SAAU,eA6GOX,GAAU,QAAQ,EAAK,WAFnDA,GAAU,QAAQ,EAAK,sPC9NrD,MAAqBY,EAAU,CACpB,OAAQ,CACP,IAAAC,GAAgBC,GAAW,EAAE,EAAE,SAAS,QAAQ,EAAE,SAAS,MAAM,CACzE,CACJ,CAEA,IAAIF,GAAA,EAAY,MAAM"}