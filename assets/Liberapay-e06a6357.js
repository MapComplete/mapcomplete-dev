var O=Object.defineProperty;var F=(i,t,e)=>t in i?O(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>(F(i,typeof t!="symbol"?t+"":t,e),e);import{U as q,a as E}from"./UIEventSource-4d1d2b8a.js";import{Q as f}from"./tw-merge-517396bf.js";import{C as P}from"./Constants-b693e0d7.js";import{S as B,i as D,s as I,k as C,l as b,b as s,p as x,d as G,f as k,q as m,r as M,n as _,h as Q,u as z,v as L,w as A,x as v,o as p}from"./index-333c7d73.js";window.addEventListener("load",async()=>{if(!("serviceWorker"in navigator)){console.log("Service workers are not supported");return}try{await navigator.serviceWorker.register("/service-worker.js"),console.log("Service worker registration successful")}catch(i){console.error("Service worker registration failed",i)}});class g{static initSwitch(t,e,c){const n=e;return f.GetQueryParameter(t,""+n,c,{stackOffset:-1}).sync(l=>l===void 0?n:l!=="false",[],l=>l==n?void 0:""+l)}}class W{constructor(){o(this,"featureSwitchFakeUser");this.featureSwitchFakeUser=f.GetBooleanQueryParameter("fake-user",!1,"If true, 'dryrun' mode is activated and a fake user account is loaded")}}class K extends W{constructor(e){super();o(this,"layoutToUse");o(this,"featureSwitchEnableLogin");o(this,"featureSwitchSearch");o(this,"featureSwitchBackgroundSelection");o(this,"featureSwitchWelcomeMessage");o(this,"featureSwitchCommunityIndex");o(this,"featureSwitchExtraLinkEnabled");o(this,"featureSwitchBackToThemeOverview");o(this,"featureSwitchShareScreen");o(this,"featureSwitchGeolocation");o(this,"featureSwitchIsTesting");o(this,"featureSwitchIsDebugging");o(this,"featureSwitchShowAllQuestions");o(this,"featureSwitchFilter");o(this,"featureSwitchEnableExport");o(this,"overpassUrl");o(this,"overpassTimeout");o(this,"overpassMaxZoom");o(this,"osmApiTileSize");o(this,"backgroundLayerId");o(this,"featureSwitchMorePrivacy");o(this,"featureSwitchLayerDefault");this.layoutToUse=e;const c={"fs-userbadge":"fs-enable-login","fs-layers":["fs-filter","fs-background"]};for(const a in c){let l=c[a];if(f.wasInitialized(a)){typeof l=="string"&&(l=[l]);for(const u of l)if(!f.wasInitialized(u)){const w=f.GetQueryParameter(a,"","").data;console.log("Adding url param due to legacy:",a,"-->",u,"(",w+")"),f.GetQueryParameter(u,"","").setData(w)}}}this.featureSwitchEnableLogin=g.initSwitch("fs-enable-login",(e==null?void 0:e.enableUserBadge)??!0,"Disables/Enables logging in and thus disables editing all together. This effectively puts MapComplete into read-only mode."),f.wasInitialized("fs-userbadge")&&this.featureSwitchEnableLogin.setData(f.GetBooleanQueryParameter("fs-userbadge",void 0,"Legacy").data),this.featureSwitchSearch=g.initSwitch("fs-search",(e==null?void 0:e.enableSearch)??!0,"Disables/Enables the search bar"),this.featureSwitchBackgroundSelection=g.initSwitch("fs-background",(e==null?void 0:e.enableBackgroundLayerSelection)??!0,"Disables/Enables the background layer control where a user can enable e.g. aerial imagery"),this.featureSwitchFilter=g.initSwitch("fs-filter",(e==null?void 0:e.enableLayers)??!0,"Disables/Enables the filter view where a user can enable/disable MapComplete-layers or filter for certain properties"),this.featureSwitchWelcomeMessage=g.initSwitch("fs-welcome-message",!0,"Disables/enables the help menu or welcome message"),this.featureSwitchCommunityIndex=g.initSwitch("fs-community-index",this.featureSwitchEnableLogin.data,"Disables/enables the button to get in touch with the community"),this.featureSwitchExtraLinkEnabled=g.initSwitch("fs-iframe-popout",!0,"Disables/Enables the extraLink button. By default, if in iframe mode and the welcome message is hidden, a popout button to the full mapcomplete instance is shown instead (unless disabled with this switch or another extraLink button is enabled)"),this.featureSwitchBackToThemeOverview=g.initSwitch("fs-homepage-link",(e==null?void 0:e.enableMoreQuests)??!0,"Disables/Enables the various links which go back to the index page with the theme overview"),this.featureSwitchShareScreen=g.initSwitch("fs-share-screen",(e==null?void 0:e.enableShareScreen)??!0,"Disables/Enables the 'Share-screen'-tab in the welcome message"),this.featureSwitchGeolocation=g.initSwitch("fs-geolocation",(e==null?void 0:e.enableGeolocation)??!0,"Disables/Enables the geolocation button"),this.featureSwitchLayerDefault=f.GetBooleanQueryParameter("fs-layers-enabled",!0,"If set to false, all layers will be disabled - except the explicitly enabled layers"),this.featureSwitchShowAllQuestions=g.initSwitch("fs-all-questions",(e==null?void 0:e.enableShowAllQuestions)??!1,"Always show all questions"),this.featureSwitchEnableExport=g.initSwitch("fs-export",(e==null?void 0:e.enableExportButton)??!0,"Enable the export as GeoJSON and CSV button");let n=!1;!q.runningFromConsole&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&!P.osmAuthConfig.url.startsWith("https://master.apis.dev.openstreetmap.org")&&(n=!0),this.featureSwitchIsTesting=f.GetBooleanQueryParameter("test",n,"If true, 'dryrun' mode is activated. The app will behave as normal, except that changes to OSM will be printed onto the console instead of actually uploaded to osm.org"),this.featureSwitchIsDebugging=f.GetBooleanQueryParameter("debug",!1,"If true, shows some extra debugging help such as all the available tags on every object"),this.featureSwitchMorePrivacy=f.GetBooleanQueryParameter("moreprivacy",e.enableMorePrivacy,"If true, the location distance indication will not be written to the changeset and other privacy enhancing measures might be taken."),this.overpassUrl=f.GetQueryParameter("overpassUrl",((e==null?void 0:e.overpassUrl)??P.defaultOverpassUrls).join(","),"Point mapcomplete to a different overpass-instance. Example: https://overpass-api.de/api/interpreter").sync(a=>a==null?void 0:a.split(","),[],a=>a==null?void 0:a.join(",")),this.overpassTimeout=E.asInt(f.GetQueryParameter("overpassTimeout",""+(e==null?void 0:e.overpassTimeout),"Set a different timeout (in seconds) for queries in overpass")),this.overpassMaxZoom=E.asFloat(f.GetQueryParameter("overpassMaxZoom",""+(e==null?void 0:e.overpassMaxZoom)," point to switch between OSM-api and overpass")),this.osmApiTileSize=E.asInt(f.GetQueryParameter("osmApiTileSize",""+(e==null?void 0:e.osmApiTileSize),"Tilesize when the OSM-API is used to fetch data within a BBOX")),this.backgroundLayerId=f.GetQueryParameter("background",e==null?void 0:e.defaultBackgroundId,"The id of the background layer to start with")}}function Z(i){let t,e,c,n,a,l,u=[i[0],{width:"100"},{height:"100"},{version:"1.1"},{id:"svg1"},{"sodipodi:docname":"github.svg"},{viewBox:"0 0 100 100"},{"inkscape:version":"1.3.2 (1:1.3.2+202311252150+091e20ef0f)"},{"xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape"},{"xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:svg":"http://www.w3.org/2000/svg"}],w={};for(let h=0;h<u.length;h+=1)w=C(w,u[h]);return{c(){t=b("svg"),e=b("sodipodi:namedview"),c=b("defs"),n=b("path"),s(e,"id","namedview1"),s(e,"pagecolor","#ffffff"),s(e,"bordercolor","#999999"),s(e,"borderopacity","1"),s(e,"inkscape:showpageshadow","2"),s(e,"inkscape:pageopacity","0"),s(e,"inkscape:pagecheckerboard","0"),s(e,"inkscape:deskcolor","#d1d1d1"),s(e,"inkscape:zoom","8.0714286"),s(e,"inkscape:cx","49"),s(e,"inkscape:cy","48.00885"),s(e,"inkscape:window-width","1920"),s(e,"inkscape:window-height","995"),s(e,"inkscape:window-x","0"),s(e,"inkscape:window-y","0"),s(e,"inkscape:window-maximized","1"),s(e,"inkscape:current-layer","svg1"),s(c,"id","defs1"),s(n,"fill-rule","evenodd"),s(n,"clip-rule","evenodd"),s(n,"d","M 48.854,0 C 21.839,0 0,22 0,49.217 c 0,21.756 13.993,40.172 33.405,46.69 2.427,0.49 3.316,-1.059 3.316,-2.362 0,-1.141 -0.08,-5.052 -0.08,-9.127 -13.59,2.934 -16.42,-5.867 -16.42,-5.867 -2.184,-5.704 -5.42,-7.17 -5.42,-7.17 -4.448,-3.015 0.324,-3.015 0.324,-3.015 4.934,0.326 7.523,5.052 7.523,5.052 4.367,7.496 11.404,5.378 14.235,4.074 0.404,-3.178 1.699,-5.378 3.074,-6.6 -10.839,-1.141 -22.243,-5.378 -22.243,-24.283 0,-5.378 1.94,-9.778 5.014,-13.2 -0.485,-1.222 -2.184,-6.275 0.486,-13.038 0,0 4.125,-1.304 13.426,5.052 a 46.97,46.97 0 0 1 12.214,-1.63 c 4.125,0 8.33,0.571 12.213,1.63 9.302,-6.356 13.427,-5.052 13.427,-5.052 2.67,6.763 0.97,11.816 0.485,13.038 3.155,3.422 5.015,7.822 5.015,13.2 0,18.905 -11.404,23.06 -22.324,24.283 1.78,1.548 3.316,4.481 3.316,9.126 0,6.6 -0.08,11.897 -0.08,13.526 0,1.304 0.89,2.853 3.316,2.364 C 83.634,89.388 97.627,70.973 97.627,49.217 97.707,22 75.788,0 48.854,0 Z"),s(n,"fill","#24292f"),s(n,"id","path1"),x(t,w)},m(h,d){G(h,t,d),k(t,e),k(t,c),k(t,n),a||(l=[m(t,"click",i[2]),m(t,"mouseover",i[3]),m(t,"mouseenter",i[4]),m(t,"mouseleave",i[5]),m(t,"keydown",i[6]),m(t,"focus",i[7])],a=!0)},p(h,[d]){x(t,w=M(u,[d&1&&h[0],{width:"100"},{height:"100"},{version:"1.1"},{id:"svg1"},{"sodipodi:docname":"github.svg"},{viewBox:"0 0 100 100"},{"inkscape:version":"1.3.2 (1:1.3.2+202311252150+091e20ef0f)"},{"xmlns:inkscape":"http://www.inkscape.org/namespaces/inkscape"},{"xmlns:sodipodi":"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:svg":"http://www.w3.org/2000/svg"}]))},i:_,o:_,d(h){h&&Q(t),a=!1,z(l)}}}function j(i,t,e){const c=["color"];let n=L(t,c),{color:a="#000000"}=t;function l(r){v.call(this,i,r)}function u(r){v.call(this,i,r)}function w(r){v.call(this,i,r)}function h(r){v.call(this,i,r)}function d(r){v.call(this,i,r)}function S(r){v.call(this,i,r)}return i.$$set=r=>{t=C(C({},t),A(r)),e(0,n=L(t,c)),"color"in r&&e(1,a=r.color)},[n,a,l,u,w,h,d,S]}class Y extends B{constructor(t){super(),D(this,t,j,Z,I,{color:1})}}function y(i){let t,e,c,n,a,l,u,w=[i[0],{xmlns:"http://www.w3.org/2000/svg"},{width:"375px"},{height:"375px"},{viewBox:"0 0 375 375"},{version:"1.1"}],h={};for(let d=0;d<w.length;d+=1)h=C(h,w[d]);return{c(){t=b("svg"),e=b("g"),c=b("path"),n=b("path"),a=b("path"),p(c,"stroke","none"),p(c,"fill-rule","nonzero"),p(c,"fill","rgb(96.470588%,78.823531%,8.235294%)"),p(c,"fill-opacity","1"),s(c,"d","M 375.269531 339.230469 C 375.269531 359.25 359.046875 375.488281 339.011719 375.488281 L 36.511719 375.488281 C 16.496094 375.488281 0.253906 359.246094 0.253906 339.230469 L 0.253906 36.730469 C 0.253906 16.710938 16.496094 0.472656 36.511719 0.472656 L 339.011719 0.472656 C 359.046875 0.472656 375.269531 16.710938 375.269531 36.730469 L 375.269531 339.230469 "),p(n,"stroke","none"),p(n,"fill-rule","nonzero"),p(n,"fill","rgb(100%,100%,100%)"),p(n,"fill-opacity","1"),s(n,"d","M 153.082031 263.199219 C 141.003906 263.199219 131.523438 261.621094 124.636719 258.476562 C 117.746094 255.328125 112.808594 251.039062 109.835938 245.585938 C 106.855469 240.144531 105.414062 233.914062 105.5 226.839844 C 105.578125 219.78125 106.554688 212.253906 108.433594 204.257812 L 140.835938 68.777344 L 180.382812 62.65625 L 144.917969 209.621094 C 144.238281 212.679688 143.859375 215.488281 143.773438 218.035156 C 143.683594 220.585938 144.152344 222.84375 145.171875 224.796875 C 146.191406 226.757812 147.933594 228.328125 150.402344 229.515625 C 152.867188 230.710938 156.3125 231.476562 160.738281 231.816406 L 153.082031 263.179688 "),p(a,"stroke","none"),p(a,"fill-rule","nonzero"),p(a,"fill","rgb(100%,100%,100%)"),p(a,"fill-opacity","1"),s(a,"d","M 295.929688 178.757812 C 295.929688 191.171875 293.886719 202.527344 289.804688 212.820312 C 285.722656 223.113281 280.066406 232 272.839844 239.480469 C 265.609375 246.972656 256.933594 252.792969 246.8125 256.957031 C 236.695312 261.121094 225.675781 263.210938 213.777344 263.210938 C 207.992188 263.210938 202.210938 262.695312 196.425781 261.671875 L 184.945312 307.855469 L 147.183594 307.855469 L 189.535156 131.3125 C 196.339844 129.273438 204.121094 127.445312 212.878906 125.828125 C 221.640625 124.210938 231.125 123.40625 241.332031 123.40625 C 250.855469 123.40625 259.066406 124.851562 265.953125 127.742188 C 272.84375 130.632812 278.496094 134.589844 282.921875 139.605469 C 287.339844 144.625 290.613281 150.492188 292.738281 157.210938 C 294.863281 163.925781 295.929688 171.117188 295.929688 178.773438 M 203.3125 231.078125 C 206.203125 231.761719 209.773438 232.097656 214.027344 232.097656 C 220.65625 232.097656 226.695312 230.871094 232.140625 228.398438 C 237.582031 225.9375 242.21875 222.492188 246.046875 218.066406 C 249.867188 213.648438 252.847656 208.335938 254.972656 202.121094 C 257.097656 195.914062 258.160156 189.070312 258.160156 181.582031 C 258.160156 174.273438 256.542969 168.0625 253.316406 162.957031 C 250.082031 157.855469 244.472656 155.304688 236.480469 155.304688 C 231.03125 155.304688 225.929688 155.8125 221.167969 156.835938 L 203.3125 231.078125 "),s(e,"id","surface1"),x(t,h)},m(d,S){G(d,t,S),k(t,e),k(e,c),k(e,n),k(e,a),l||(u=[m(t,"click",i[2]),m(t,"mouseover",i[3]),m(t,"mouseenter",i[4]),m(t,"mouseleave",i[5]),m(t,"keydown",i[6]),m(t,"focus",i[7])],l=!0)},p(d,[S]){x(t,h=M(w,[S&1&&d[0],{xmlns:"http://www.w3.org/2000/svg"},{width:"375px"},{height:"375px"},{viewBox:"0 0 375 375"},{version:"1.1"}]))},i:_,o:_,d(d){d&&Q(t),l=!1,z(u)}}}function V(i,t,e){const c=["color"];let n=L(t,c),{color:a="#000000"}=t;function l(r){v.call(this,i,r)}function u(r){v.call(this,i,r)}function w(r){v.call(this,i,r)}function h(r){v.call(this,i,r)}function d(r){v.call(this,i,r)}function S(r){v.call(this,i,r)}return i.$$set=r=>{t=C(C({},t),A(r)),e(0,n=L(t,c)),"color"in r&&e(1,a=r.color)},[n,a,l,u,w,h,d,S]}class $ extends B{constructor(t){super(),D(this,t,V,y,I,{color:1})}}export{K as F,Y as G,$ as L,W as O};
//# sourceMappingURL=Liberapay-e06a6357.js.map
