{"version":3,"file":"index-fcbfdb37.js","sources":["../../src/UI/BigComponents/NoThemeResultButton.svelte","../../src/UI/BigComponents/ThemeButton.svelte","../../src/UI/BigComponents/ThemesList.svelte","../../src/UI/BigComponents/HiddenThemeList.svelte","../../src/UI/BigComponents/UnofficialThemeList.svelte","../../src/UI/BigComponents/MoreScreen.ts","../../src/UI/BigComponents/IndexText.ts","../../src/UI/AllThemesGui.ts","../../src/all_themes_index.ts"],"sourcesContent":["<script context=\"module\" lang=\"ts\">\n  export interface Theme {\n    id: string\n    icon: string\n    title: any\n    shortDescription: any\n    definition?: any\n    mustHaveLanguage?: boolean\n    hideFromOverview: boolean\n    keywords?: any[]\n  }\n</script>\n\n<script lang=\"ts\">\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import Svg from \"../../Svg\"\n  import ToSvelte from \"../Base/ToSvelte.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import Tr from \"../Base/Tr.svelte\"\n\n  export let search: UIEventSource<string>\n\n  const t = Translations.t.general.morescreen\n</script>\n\n<div class=\"w-full\">\n  <h5>{t.noMatchingThemes.toString()}</h5>\n  <div class=\"flex justify-center\">\n    <button on:click={() => search.setData(\"\")}>\n      <ToSvelte construct={Svg.search_disable_svg().SetClass(\"w-6 mr-2\")} />\n      <Tr slot=\"message\" t={t.noSearch} />\n    </button>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { Translation } from \"../i18n/Translation\"\n  import * as personal from \"../../../assets/themes/personal/personal.json\"\n  import { ImmutableStore, Store, UIEventSource } from \"../../Logic/UIEventSource\"\n  import UserDetails, { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import Constants from \"../../Models/Constants\"\n  import type { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\n  import Tr from \"../Base/Tr.svelte\"\n  import SubtleLink from \"../Base/SubtleLink.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import { LocalStorageSource } from \"../../Logic/Web/LocalStorageSource\"\n\n  export let theme: LayoutInformation\n  export let isCustom: boolean = false\n  export let userDetails: UIEventSource<UserDetails>\n  export let state: { layoutToUse?: { id: string }; osmConnection: OsmConnection }\n  export let selected: boolean = false\n\n  let unlockedPersonal = LocalStorageSource.GetParsed(\"unlocked_personal_theme\", false)\n\n  userDetails.addCallbackAndRunD((userDetails) => {\n    if (!userDetails.loggedIn) {\n      return\n    }\n    if (userDetails.csCount > Constants.userJourney.personalLayoutUnlock) {\n      unlockedPersonal.setData(true)\n    }\n    return true\n  })\n\n  $: title = new Translation(\n    theme.title,\n    !isCustom && !theme.mustHaveLanguage ? \"themes:\" + theme.id + \".title\" : undefined\n  )\n  $: description = new Translation(theme.shortDescription)\n\n  // TODO: Improve this function\n  function createUrl(\n    layout: { id: string; definition?: string },\n    isCustom: boolean,\n    state?: { layoutToUse?: { id } }\n  ): Store<string> {\n    if (layout === undefined) {\n      return undefined\n    }\n    if (layout.id === undefined) {\n      console.error(\"ID is undefined for layout\", layout)\n      return undefined\n    }\n\n    if (layout.id === state?.layoutToUse?.id) {\n      return undefined\n    }\n\n    let path = window.location.pathname\n    // Path starts with a '/' and contains everything, e.g. '/dir/dir/page.html'\n    path = path.substr(0, path.lastIndexOf(\"/\"))\n    // Path will now contain '/dir/dir', or empty string in case of nothing\n    if (path === \"\") {\n      path = \".\"\n    }\n\n    let linkPrefix = `${path}/${layout.id.toLowerCase()}.html?`\n    if (\n      location.hostname === \"localhost\" ||\n      location.hostname === \"127.0.0.1\" ||\n      location.port === \"1234\"\n    ) {\n      // Redirect to 'theme.html?layout=* instead of 'layout.html'. This is probably a debug run, where the routing does not work\n      linkPrefix = `${path}/theme.html?layout=${layout.id}&`\n    }\n\n    if (isCustom) {\n      linkPrefix = `${path}/theme.html?userlayout=${layout.id}&`\n    }\n\n    let hash = \"\"\n    if (layout.definition !== undefined) {\n      hash = \"#\" + btoa(JSON.stringify(layout.definition))\n    }\n\n    return new ImmutableStore<string>(`${linkPrefix}${hash}`)\n  }\n\n  let href = createUrl(theme, isCustom, state)\n</script>\n\n{#if theme.id !== personal.id || $unlockedPersonal}\n  <SubtleLink href={$href} options={{ extraClasses: \"w-full\" }}>\n    <img slot=\"image\" src={theme.icon} class=\"mx-4 block h-11 w-11\" alt=\"\" />\n    <span class=\"flex flex-col overflow-hidden text-ellipsis\">\n      <Tr t={title} />\n      <span class=\"subtle max-h-12 truncate text-ellipsis\">\n        <Tr t={description} />\n      </span>\n      {#if selected}\n        <span class=\"alert\">\n          <Tr t={Translations.t.general.morescreen.enterToOpen} />\n        </span>\n      {/if}\n    </span>\n  </SubtleLink>\n{/if}\n","<script lang=\"ts\">\n  import NoThemeResultButton from \"./NoThemeResultButton.svelte\"\n\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import ThemeButton from \"./ThemeButton.svelte\"\n  import { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\n  import MoreScreen from \"./MoreScreen\"\n  import themeOverview from \"../../assets/generated/theme_overview.json\"\n\n  export let search: UIEventSource<string>\n  export let themes: LayoutInformation[]\n  export let state: { osmConnection: OsmConnection }\n  export let isCustom: boolean = false\n  export let onMainScreen: boolean = true\n  export let hideThemes: boolean = true\n\n  // Filter theme based on search value\n  $: filteredThemes = themes.filter((theme) => MoreScreen.MatchesLayout(theme, $search))\n\n  // Determine which is the first theme, after the search, using all themes\n  $: allFilteredThemes = themeOverview.filter((theme) => MoreScreen.MatchesLayout(theme, $search))\n  $: firstTheme = allFilteredThemes[0]\n</script>\n\n<section class=\"w-full\">\n  <slot name=\"title\" />\n  {#if onMainScreen}\n    <div class=\"gap-4 md:grid md:grid-flow-row md:grid-cols-2 lg:grid-cols-3\">\n      {#each filteredThemes as theme (theme.id)}\n        {#if theme !== undefined && !(hideThemes && theme?.hideFromOverview)}\n          <!-- TODO: doesn't work if first theme is hidden -->\n          {#if theme === firstTheme && !isCustom && $search !== \"\" && $search !== undefined}\n            <ThemeButton\n              {theme}\n              {isCustom}\n              userDetails={state.osmConnection.userDetails}\n              {state}\n              selected={true}\n            />\n          {:else}\n            <ThemeButton {theme} {isCustom} userDetails={state.osmConnection.userDetails} {state} />\n          {/if}\n        {/if}\n      {/each}\n    </div>\n  {:else}\n    <div>\n      {#each filteredThemes as theme (theme.id)}\n        {#if theme !== undefined && !(hideThemes && theme?.hideFromOverview)}\n          <ThemeButton {theme} {isCustom} userDetails={state.osmConnection.userDetails} {state} />\n        {/if}\n      {/each}\n    </div>\n  {/if}\n\n  {#if filteredThemes.length === 0}\n    <NoThemeResultButton {search} />\n  {/if}\n</section>\n","<script lang=\"ts\">\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import * as themeOverview from \"../../assets/generated/theme_overview.json\"\n  import { Utils } from \"../../Utils\"\n  import ThemesList from \"./ThemesList.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\n  import LoginToggle from \"../Base/LoginToggle.svelte\"\n\n  export let search: UIEventSource<string>\n  export let state: { osmConnection: OsmConnection }\n  export let onMainScreen: boolean = true\n\n  const prefix = \"mapcomplete-hidden-theme-\"\n  const hiddenThemes: LayoutInformation[] =\n    (themeOverview[\"default\"] ?? themeOverview)?.filter((layout) => layout.hideFromOverview) ?? []\n  const userPreferences = state.osmConnection.preferencesHandler.preferences\n  const t = Translations.t.general.morescreen\n\n  let knownThemesId: string[]\n  $: knownThemesId = Utils.NoNull(\n    Object.keys($userPreferences)\n      .filter((key) => key.startsWith(prefix))\n      .map((key) => key.substring(prefix.length, key.length - \"-enabled\".length))\n  )\n  $: console.log(\"Known theme ids:\", knownThemesId)\n  $: knownThemes = hiddenThemes.filter((theme) => knownThemesId.includes(theme.id))\n</script>\n\n<LoginToggle {state}>\n  <ThemesList\n    hideThemes={false}\n    isCustom={false}\n    {onMainScreen}\n    {search}\n    {state}\n    themes={knownThemes}\n  >\n    <svelte:fragment slot=\"title\">\n      <h3>{t.previouslyHiddenTitle.toString()}</h3>\n      <p>\n        {t.hiddenExplanation.Subs({\n          hidden_discovered: knownThemes.length.toString(),\n          total_hidden: hiddenThemes.length.toString(),\n        })}\n      </p>\n    </svelte:fragment>\n  </ThemesList>\n</LoginToggle>\n","<script lang=\"ts\">\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import { Store, Stores, UIEventSource } from \"../../Logic/UIEventSource\"\n  import { Utils } from \"../../Utils\"\n  import ThemesList from \"./ThemesList.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import UserRelatedState from \"../../Logic/State/UserRelatedState\"\n\n  export let search: UIEventSource<string>\n  export let state: UserRelatedState & {\n    osmConnection: OsmConnection\n  }\n  export let onMainScreen: boolean = true\n\n  const t = Translations.t.general\n  const currentIds: Store<string[]> = state.installedUserThemes\n  const stableIds = Stores.ListStabilized<string>(currentIds)\n  let customThemes\n  $: customThemes = Utils.NoNull($stableIds.map((id) => state.GetUnofficialTheme(id)))\n  $: console.log(\"Custom themes are\", customThemes)\n</script>\n\n{#if customThemes.length > 0}\n  <ThemesList\n    {search}\n    {state}\n    {onMainScreen}\n    themes={customThemes}\n    isCustom={true}\n    hideThemes={false}\n  >\n    <svelte:fragment slot=\"title\">\n      <!-- TODO: Change string to exclude html -->\n      {@html t.customThemeIntro.toString()}\n    </svelte:fragment>\n  </ThemesList>\n{/if}\n","import Svg from \"../../Svg\"\nimport Combine from \"../Base/Combine\"\nimport Translations from \"../i18n/Translations\"\nimport LayoutConfig, { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\nimport { ImmutableStore, Store } from \"../../Logic/UIEventSource\"\nimport UserRelatedState from \"../../Logic/State/UserRelatedState\"\nimport { Utils } from \"../../Utils\"\nimport themeOverview from \"../../assets/generated/theme_overview.json\"\nimport { TextField } from \"../Input/TextField\"\nimport Locale from \"../i18n/Locale\"\nimport SvelteUIElement from \"../Base/SvelteUIElement\"\nimport ThemesList from \"./ThemesList.svelte\"\nimport HiddenThemeList from \"./HiddenThemeList.svelte\"\nimport UnofficialThemeList from \"./UnofficialThemeList.svelte\"\n\nexport default class MoreScreen extends Combine {\n    private static readonly officialThemes: LayoutInformation[] = themeOverview\n\n    constructor(\n        state: UserRelatedState & {\n            layoutToUse?: LayoutConfig\n        },\n        onMainScreen: boolean = false\n    ) {\n        const tr = Translations.t.general.morescreen\n\n        const search = new TextField({\n            placeholder: tr.searchForATheme,\n        })\n        search.enterPressed.addCallbackD((searchTerm) => {\n            searchTerm = searchTerm.toLowerCase()\n            if (!searchTerm) {\n                return\n            }\n            if (searchTerm === \"personal\") {\n                window.location.href = MoreScreen.createUrlFor(\n                    { id: \"personal\" },\n                    false,\n                    state\n                ).data\n            }\n            if (searchTerm === \"bugs\" || searchTerm === \"issues\") {\n                window.location.href = \"https://github.com/pietervdvn/MapComplete/issues\"\n            }\n            if (searchTerm === \"source\") {\n                window.location.href = \"https://github.com/pietervdvn/MapComplete\"\n            }\n            if (searchTerm === \"docs\") {\n                window.location.href = \"https://github.com/pietervdvn/MapComplete/tree/develop/Docs\"\n            }\n            if (searchTerm === \"osmcha\" || searchTerm === \"stats\") {\n                window.location.href = Utils.OsmChaLinkFor(7)\n            }\n            // Enter pressed -> search the first _official_ matchin theme and open it\n            const publicTheme = MoreScreen.officialThemes.find(\n                (th) =>\n                    th.hideFromOverview == false &&\n                    th.id !== \"personal\" &&\n                    MoreScreen.MatchesLayout(th, searchTerm)\n            )\n            if (publicTheme !== undefined) {\n                window.location.href = MoreScreen.createUrlFor(publicTheme, false, state).data\n            }\n            const hiddenTheme = MoreScreen.officialThemes.find(\n                (th) => th.id !== \"personal\" && MoreScreen.MatchesLayout(th, searchTerm)\n            )\n            if (hiddenTheme !== undefined) {\n                window.location.href = MoreScreen.createUrlFor(hiddenTheme, false, state).data\n            }\n        })\n\n        if (onMainScreen) {\n            search.focus()\n            document.addEventListener(\"keydown\", function (event) {\n                if (event.ctrlKey && event.code === \"KeyF\") {\n                    search.focus()\n                    event.preventDefault()\n                }\n            })\n        }\n\n        const searchBar = new Combine([\n            Svg.search_svg().SetClass(\"w-8\"),\n            search.SetClass(\"mr-4 w-full\"),\n        ]).SetClass(\"flex rounded-full border-2 border-black items-center my-2 w-1/2\")\n\n        super([\n            new Combine([searchBar]).SetClass(\"flex justify-center\"),\n            new SvelteUIElement(ThemesList, {\n                state,\n                onMainScreen,\n                search: search.GetValue(),\n                themes: MoreScreen.officialThemes,\n            }),\n            new SvelteUIElement(HiddenThemeList, {\n                state,\n                onMainScreen,\n                search: search.GetValue(),\n            }),\n            new SvelteUIElement(UnofficialThemeList, {\n                state,\n                onMainScreen,\n                search: search.GetValue(),\n            }),\n            tr.streetcomplete.Clone().SetClass(\"block text-base mx-10 my-3 mb-10\"),\n        ])\n    }\n\n    public static MatchesLayout(\n        layout: {\n            id: string\n            title: any\n            shortDescription: any\n            keywords?: any[]\n        },\n        search: string\n    ): boolean {\n        if (search === undefined) {\n            return true\n        }\n        search = search.toLocaleLowerCase()\n        if (search.length > 3 && layout.id.toLowerCase().indexOf(search) >= 0) {\n            return true\n        }\n        if (layout.id === \"personal\") {\n            return false\n        }\n        const entitiesToSearch = [layout.shortDescription, layout.title, ...(layout.keywords ?? [])]\n        for (const entity of entitiesToSearch) {\n            if (entity === undefined) {\n                continue\n            }\n            const term = entity[\"*\"] ?? entity[Locale.language.data]\n            if (term?.toLowerCase()?.indexOf(search) >= 0) {\n                return true\n            }\n        }\n\n        return false\n    }\n\n    private static createUrlFor(\n        layout: { id: string; definition?: string },\n        isCustom: boolean,\n        state?: { layoutToUse?: { id } }\n    ): Store<string> {\n        if (layout === undefined) {\n            return undefined\n        }\n        if (layout.id === undefined) {\n            console.error(\"ID is undefined for layout\", layout)\n            return undefined\n        }\n\n        if (layout.id === state?.layoutToUse?.id) {\n            return undefined\n        }\n\n        let path = window.location.pathname\n        // Path starts with a '/' and contains everything, e.g. '/dir/dir/page.html'\n        path = path.substr(0, path.lastIndexOf(\"/\"))\n        // Path will now contain '/dir/dir', or empty string in case of nothing\n        if (path === \"\") {\n            path = \".\"\n        }\n\n        let linkPrefix = `${path}/${layout.id.toLowerCase()}.html?`\n        if (location.hostname === \"localhost\" || location.hostname === \"127.0.0.1\") {\n            linkPrefix = `${path}/theme.html?layout=${layout.id}&`\n        }\n\n        if (isCustom) {\n            linkPrefix = `${path}/theme.html?userlayout=${layout.id}&`\n        }\n\n        let hash = \"\"\n        if (layout.definition !== undefined) {\n            hash = \"#\" + btoa(JSON.stringify(layout.definition))\n        }\n\n        return new ImmutableStore<string>(`${linkPrefix}${hash}`)\n    }\n}\n","import Combine from \"../Base/Combine\"\nimport Translations from \"../i18n/Translations\"\nimport { FixedUiElement } from \"../Base/FixedUiElement\"\n\nexport default class IndexText extends Combine {\n    constructor() {\n        super([\n            new FixedUiElement(\n                `<img class=\"w-12 h-12 sm:h-24 sm:w-24\" src=\"./assets/svg/logo.svg\" alt=\"MapComplete Logo\">`\n            ).SetClass(\"flex-none m-3\"),\n\n            new Combine([\n                Translations.t.index.title.SetClass(\n                    \"text-2xl tracking-tight font-extrabold text-gray-900 sm:text-5xl md:text-6xl block text-gray-800 xl:inline\"\n                ),\n\n                Translations.t.index.intro.SetClass(\n                    \"mt-3 text-base font-semibold text-gray-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0\"\n                ),\n\n                Translations.t.index.pickTheme.SetClass(\n                    \"mt-3 text-base sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0\"\n                ),\n            ]).SetClass(\"flex flex-col sm:text-center lg:text-left m-1 mt-2 md:m-2 md:mt-4\"),\n        ])\n\n        this.SetClass(\"flex flex-row\")\n    }\n}\n","import UserRelatedState from \"../Logic/State/UserRelatedState\"\nimport { FixedUiElement } from \"./Base/FixedUiElement\"\nimport Combine from \"./Base/Combine\"\nimport MoreScreen from \"./BigComponents/MoreScreen\"\nimport Translations from \"./i18n/Translations\"\nimport Constants from \"../Models/Constants\"\nimport LanguagePicker from \"./LanguagePicker\"\nimport IndexText from \"./BigComponents/IndexText\"\nimport { LoginToggle } from \"./Popup/LoginButton\"\nimport { ImmutableStore } from \"../Logic/UIEventSource\"\nimport { OsmConnection } from \"../Logic/Osm/OsmConnection\"\nimport { QueryParameters } from \"../Logic/Web/QueryParameters\"\nimport { OsmConnectionFeatureSwitches } from \"../Logic/State/FeatureSwitchState\"\n\nexport default class AllThemesGui {\n    setup() {\n        try {\n            const featureSwitches = new OsmConnectionFeatureSwitches()\n            const osmConnection = new OsmConnection({\n                fakeUser: featureSwitches.featureSwitchFakeUser.data,\n                oauth_token: QueryParameters.GetQueryParameter(\n                    \"oauth_token\",\n                    undefined,\n                    \"Used to complete the login\"\n                ),\n            })\n            const state = new UserRelatedState(osmConnection)\n            const intro = new Combine([\n                new LanguagePicker(\n                    Translations.t.index.title.SupportedLanguages(),\n                    state.language\n                ).SetClass(\"flex absolute top-2 right-3\"),\n                new IndexText(),\n            ])\n            new Combine([\n                intro,\n                new MoreScreen(state, true),\n                new LoginToggle(undefined, Translations.t.index.logIn, {\n                    osmConnection,\n                    featureSwitchUserbadge: new ImmutableStore(true),\n                }).SetClass(\"flex justify-center w-full\"),\n                Translations.t.general.aboutMapComplete.intro.SetClass(\"link-underline\"),\n                new FixedUiElement(\"v\" + Constants.vNumber).SetClass(\"block\"),\n            ])\n                .SetClass(\"block m-5 lg:w-3/4 lg:ml-40\")\n                .AttachTo(\"main\")\n        } catch (e) {\n            console.error(\">>>> CRITICAL\", e)\n            new FixedUiElement(\n                \"Seems like no layers are compiled - check the output of `npm run generate:layeroverview`. Is this visible online? Contact pietervdvn immediately!\"\n            )\n                .SetClass(\"alert\")\n                .AttachTo(\"main\")\n        }\n    }\n}\n","import AllThemesGui from \"./UI/AllThemesGui\"\nimport { QueryParameters } from \"./Logic/Web/QueryParameters\"\n\nconst layout = QueryParameters.GetQueryParameter(\"layout\", undefined).data ?? \"\"\nconst customLayout = QueryParameters.GetQueryParameter(\"userlayout\", undefined).data ?? \"\"\nconst l = window.location\nif (layout !== \"\") {\n    if (window.location.host.startsWith(\"127.0.0.1\")) {\n        window.location.replace(\n            l.protocol +\n                \"//\" +\n                window.location.host +\n                \"/theme.html\" +\n                l.search +\n                \"&layout=\" +\n                layout +\n                l.hash\n        )\n    } else {\n        window.location.replace(\n            l.protocol + \"//\" + window.location.host + \"/\" + layout + \".html\" + l.search + l.hash\n        )\n    }\n} else if (customLayout !== \"\") {\n    window.location.replace(\n        l.protocol + \"//\" + window.location.host + \"/theme.html\" + l.search + l.hash\n    )\n}\n\nnew AllThemesGui().setup()\n"],"names":["Svg","ctx","insert","target","div1","anchor","append","h5","div0","button","search","$$props","t","Translations","span","create_if_block_1","span1","span0","src_url_equal","img","img_src_value","attr","dirty","if_block","personal.id","create_if_block","theme","isCustom","userDetails","state","selected","unlockedPersonal","LocalStorageSource","Constants","createUrl","layout","path","linkPrefix","hash","ImmutableStore","href","title","Translation","description","get_key","i","div","_a","create_if_block_4","create_if_block_2","section","themes","onMainScreen","hideThemes","$$invalidate","filteredThemes","MoreScreen","$search","allFilteredThemes","themeOverview","firstTheme","h3","p","prefix","hiddenThemes","themeOverview[\"default\"]","userPreferences","knownThemesId","Utils","$userPreferences","key","knownThemes","currentIds","stableIds","Stores","customThemes","$stableIds","id","_MoreScreen","Combine","tr","TextField","searchTerm","publicTheme","th","hiddenTheme","event","searchBar","SvelteUIElement","ThemesList","HiddenThemeList","UnofficialThemeList","entitiesToSearch","entity","term","Locale","__publicField","IndexText","FixedUiElement","AllThemesGui","featureSwitches","OsmConnectionFeatureSwitches","osmConnection","OsmConnection","QueryParameters","UserRelatedState","intro","LanguagePicker","LoginToggle","customLayout","l"],"mappings":"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"}