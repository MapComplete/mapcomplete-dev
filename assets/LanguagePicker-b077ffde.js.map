{"version":3,"file":"LanguagePicker-b077ffde.js","sources":["../../src/Utils/ariaLabel.ts","../../node_modules/@babeard/svelte-heroicons/solid/Language/Language.svelte","../../src/UI/InputElement/LanguagePicker.svelte"],"sourcesContent":["import { Translation } from \"../UI/i18n/Translation\"\nimport { Store } from \"../Logic/UIEventSource\"\n\nexport function ariaLabel(htmlElement: Element, t: Translation) {\n    ariaLabelStore(htmlElement, t?.current)\n}\n\nexport function ariaLabelStore(htmlElement: Element, t: Store<string>) {\n    if (!t) {\n        return\n    }\n    let destroy: () => void = undefined\n\n    t?.mapD(\n        (label) => {\n            htmlElement.setAttribute(\"aria-label\", label)\n            // Set the tooltip, which is the 'title' attribute of an html-element\n            htmlElement.setAttribute(\"title\", label)\n        },\n        [],\n        (f) => {\n            destroy = f\n        }\n    )\n\n    return { destroy }\n}\n","<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z\" clip-rule=\"evenodd\"/>\n</svg>","<script lang=\"ts\">\n  // Languages in the language itself\n  import native from \"../../assets/language_native.json\"\n  // Translated languages\n  import language_translations from \"../../assets/language_translations.json\"\n\n  import { Store, UIEventSource } from \"../../Logic/UIEventSource\"\n  import Locale from \"../i18n/Locale\"\n  import { LanguageIcon } from \"@babeard/svelte-heroicons/solid\"\n  import Dropdown from \"../Base/Dropdown.svelte\"\n  import { twMerge } from \"tailwind-merge\"\n  import Translations from \"../i18n/Translations\"\n  import { ariaLabel } from \"../../Utils/ariaLabel\"\n\n  /**\n   * Languages one can choose from\n   * Defaults to _all_ languages known by MapComplete\n   */\n  export let availableLanguages: string[] = Object.keys(native)\n  /**\n   * EventStore to assign to, defaults to 'Locale.langauge'\n   */\n  export let assignTo: UIEventSource<string> = Locale.language\n  export let preferredLanguages: Store<string[]> = undefined\n  let preferredFiltered: string[] = undefined\n  preferredLanguages?.addCallbackAndRunD((preferredLanguages) => {\n    let lng = navigator.language\n    if (lng === \"en-US\") {\n      lng = \"en\"\n    }\n    if (preferredLanguages?.indexOf(lng) < 0) {\n      preferredLanguages?.push(lng)\n    }\n    preferredFiltered = preferredLanguages?.filter((l) => availableLanguages.indexOf(l) >= 0)\n  })\n  export let clss: string = undefined\n  let current = Locale.language\n</script>\n\n{#if availableLanguages?.length > 1}\n  <form class={twMerge(\"flex max-w-full items-center pr-4\", clss)}>\n    <label\n      for=\"pick-language\"\n      class=\"neutral-label flex max-w-full\"\n      use:ariaLabel={Translations.t.general.pickLanguage}\n    >\n      <LanguageIcon class=\"mr-1 h-4 w-4 shrink-0\" aria-hidden=\"true\" />\n    </label>\n\n    <Dropdown cls=\"max-w-full\" value={assignTo} id=\"pick-language\">\n      {#if preferredFiltered}\n        {#each preferredFiltered as language}\n          <option value={language} class=\"font-bold\">\n            {native[language] ?? \"\"}\n            {#if language !== $current}\n              ({language_translations[language]?.[$current] ?? language})\n            {/if}\n          </option>\n        {/each}\n        <option disabled />\n      {/if}\n\n      {#each availableLanguages.filter((l) => l !== \"_context\") as language}\n        <option value={language} class=\"font-bold\">\n          {native[language] ?? \"\"}\n          {#if language !== $current}\n            {#if language_translations[language]?.[$current] !== undefined}\n              ({language_translations[language]?.[$current] + \" - \" + language ?? language})\n            {:else}\n              ({language})\n            {/if}\n          {/if}\n        </option>\n      {/each}\n    </Dropdown>\n  </form>\n{/if}\n"],"names":["ariaLabel","htmlElement","t","ariaLabelStore","destroy","label","f","ctx","insert","target","svg","anchor","append","path","twMerge","form","dispose","action_destroyer","Translations","i","option","t1_value","_a","language_translations","dirty","set_data","t1","native","if_block","create_if_block_4","t0","t0_value","create_if_block_2","create_if_block_1","create_if_block_3","each_value","func","create_if_block","l","availableLanguages","$$props","assignTo","Locale","preferredLanguages","preferredFiltered","lng","$$invalidate","clss","current"],"mappings":"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","x_google_ignoreList":[1]}