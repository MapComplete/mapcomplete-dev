{"version":3,"file":"index-a14ea53a.js","sources":["../../src/assets/svg/Logo.svelte","../../src/UI/BigComponents/NoThemeResultButton.svelte","../../src/UI/BigComponents/ThemeButton.svelte","../../src/UI/BigComponents/ThemesList.svelte","../../src/UI/BigComponents/HiddenThemeList.svelte","../../src/UI/BigComponents/UnofficialThemeList.svelte","../../src/UI/BigComponents/MoreScreen.ts","../../src/assets/svg/Pencil.svelte","../../src/UI/AllThemesGui.svelte","../../src/all_themes_index.ts"],"sourcesContent":["<script>\nexport let color = \"#000000\"\n</script>\n <svg {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown xmlns=\"http://www.w3.org/2000/svg\" width=\"375px\" height=\"375px\" viewBox=\"0 0 375 375\" version=\"1.1\">   <g id=\"surface1\">     <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(43.921569%,77.254903%,28.627452%);fill-opacity:1;\" d=\"M 201.085938 355.023438 C 195.375 366.917969 178.441406 366.917969 172.734375 355.023438 L 76.523438 154.683594 C 71.507812 144.242188 79.117188 132.148438 90.699219 132.148438 L 283.117188 132.148438 C 294.699219 132.148438 302.308594 144.242188 297.296875 154.683594 Z M 201.085938 355.023438 \"/>     <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(43.921569%,77.254903%,28.627452%);fill-opacity:1;\" d=\"M 342.59375 158.097656 C 342.59375 243.210938 273.59375 312.207031 188.480469 312.207031 C 103.367188 312.207031 34.371094 243.210938 34.371094 158.097656 C 34.371094 72.984375 103.367188 3.984375 188.480469 3.984375 C 273.59375 3.984375 342.59375 72.984375 342.59375 158.097656 Z M 342.59375 158.097656 \"/>     <path style=\"fill: none !important;stroke-width:7.514114;stroke-linecap:round;stroke-linejoin:miter;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 22.101062 291.358818 L 5.785685 275.043441 \" transform=\"matrix(4.921187,-4.921187,4.921187,4.921187,-1274.875828,-1169.962203)\"/>     <path style=\"fill: none !important;stroke-width:7.514114;stroke-linecap:round;stroke-linejoin:miter;stroke:rgb(100%,100%,100%);stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 22.125669 274.965256 L 5.810292 291.280633 \" transform=\"matrix(4.921187,-4.921187,4.921187,4.921187,-1274.875828,-1169.962203)\"/>   </g> </svg>","<script context=\"module\" lang=\"ts\">\n  export interface Theme {\n    id: string\n    icon: string\n    title: any\n    shortDescription: any\n    definition?: any\n    mustHaveLanguage?: boolean\n    hideFromOverview: boolean\n    keywords?: any[]\n  }\n</script>\n\n<script lang=\"ts\">\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import Svg from \"../../Svg\"\n  import ToSvelte from \"../Base/ToSvelte.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import Tr from \"../Base/Tr.svelte\"\n\n  export let search: UIEventSource<string>\n\n  const t = Translations.t.general.morescreen\n</script>\n\n<div class=\"w-full\">\n  <h5>{t.noMatchingThemes.toString()}</h5>\n  <div class=\"flex justify-center\">\n    <button on:click={() => search.setData(\"\")}>\n      <ToSvelte construct={Svg.search_disable_svg().SetClass(\"w-6 mr-2\")} />\n      <Tr slot=\"message\" t={t.noSearch} />\n    </button>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { Translation } from \"../i18n/Translation\"\n  import * as personal from \"../../../assets/themes/personal/personal.json\"\n  import { ImmutableStore, Store, UIEventSource } from \"../../Logic/UIEventSource\"\n  import UserDetails, { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import Constants from \"../../Models/Constants\"\n  import type { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\n  import Tr from \"../Base/Tr.svelte\"\n  import SubtleLink from \"../Base/SubtleLink.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import { LocalStorageSource } from \"../../Logic/Web/LocalStorageSource\"\n\n  export let theme: LayoutInformation\n  export let isCustom: boolean = false\n  export let userDetails: UIEventSource<UserDetails>\n  export let state: { layoutToUse?: { id: string }; osmConnection: OsmConnection }\n  export let selected: boolean = false\n\n  let unlockedPersonal = LocalStorageSource.GetParsed(\"unlocked_personal_theme\", false)\n\n  userDetails.addCallbackAndRunD((userDetails) => {\n    if (!userDetails.loggedIn) {\n      return\n    }\n    if (userDetails.csCount > Constants.userJourney.personalLayoutUnlock) {\n      unlockedPersonal.setData(true)\n    }\n    return true\n  })\n\n  $: title = new Translation(\n    theme.title,\n    !isCustom && !theme.mustHaveLanguage ? \"themes:\" + theme.id + \".title\" : undefined\n  )\n  $: description = new Translation(theme.shortDescription)\n\n  // TODO: Improve this function\n  function createUrl(\n    layout: { id: string; definition?: string },\n    isCustom: boolean,\n    state?: { layoutToUse?: { id } }\n  ): Store<string> {\n    if (layout === undefined) {\n      return undefined\n    }\n    if (layout.id === undefined) {\n      console.error(\"ID is undefined for layout\", layout)\n      return undefined\n    }\n\n    if (layout.id === state?.layoutToUse?.id) {\n      return undefined\n    }\n\n    let path = window.location.pathname\n    // Path starts with a '/' and contains everything, e.g. '/dir/dir/page.html'\n    path = path.substr(0, path.lastIndexOf(\"/\"))\n    // Path will now contain '/dir/dir', or empty string in case of nothing\n    if (path === \"\") {\n      path = \".\"\n    }\n\n    let linkPrefix = `${path}/${layout.id.toLowerCase()}.html?`\n    if (\n      location.hostname === \"localhost\" ||\n      location.hostname === \"127.0.0.1\" ||\n      location.port === \"1234\"\n    ) {\n      // Redirect to 'theme.html?layout=* instead of 'layout.html'. This is probably a debug run, where the routing does not work\n      linkPrefix = `${path}/theme.html?layout=${layout.id}&`\n    }\n\n    if (isCustom) {\n      linkPrefix = `${path}/theme.html?userlayout=${layout.id}&`\n    }\n\n    let hash = \"\"\n    if (layout.definition !== undefined) {\n      hash = \"#\" + btoa(JSON.stringify(layout.definition))\n    }\n\n    return new ImmutableStore<string>(`${linkPrefix}${hash}`)\n  }\n\n  let href = createUrl(theme, isCustom, state)\n</script>\n\n{#if theme.id !== personal.id || $unlockedPersonal}\n  <SubtleLink href={$href} options={{ extraClasses: \"w-full\" }}>\n    <img slot=\"image\" src={theme.icon} class=\"m-1 mr-2 block h-11 w-11 sm:m-2 sm:mr-4\" alt=\"\" />\n    <span class=\"flex flex-col overflow-hidden text-ellipsis\">\n      <Tr t={title} />\n\n      {#if selected}\n        <span class=\"alert\">\n          <Tr t={Translations.t.general.morescreen.enterToOpen} />\n        </span>\n      {/if}\n    </span>\n  </SubtleLink>\n{/if}\n","<script lang=\"ts\">\n  import NoThemeResultButton from \"./NoThemeResultButton.svelte\"\n\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import ThemeButton from \"./ThemeButton.svelte\"\n  import { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\n  import MoreScreen from \"./MoreScreen\"\n  import themeOverview from \"../../assets/generated/theme_overview.json\"\n\n  export let search: UIEventSource<string>\n  export let themes: LayoutInformation[]\n  export let state: { osmConnection: OsmConnection }\n  export let isCustom: boolean = false\n  export let onMainScreen: boolean = true\n  export let hideThemes: boolean = true\n\n  // Filter theme based on search value\n  $: filteredThemes = themes.filter((theme) => MoreScreen.MatchesLayout(theme, $search))\n\n  // Determine which is the first theme, after the search, using all themes\n  $: allFilteredThemes = themeOverview.filter((theme) => MoreScreen.MatchesLayout(theme, $search))\n  $: firstTheme = allFilteredThemes[0]\n</script>\n\n<section class=\"w-full\">\n  <slot name=\"title\" />\n  {#if onMainScreen}\n    <div class=\"gap-4 md:grid md:grid-flow-row md:grid-cols-2 lg:grid-cols-3\">\n      {#each filteredThemes as theme (theme.id)}\n        {#if theme !== undefined && !(hideThemes && theme?.hideFromOverview)}\n          <!-- TODO: doesn't work if first theme is hidden -->\n          {#if theme === firstTheme && !isCustom && $search !== \"\" && $search !== undefined}\n            <ThemeButton\n              {theme}\n              {isCustom}\n              userDetails={state.osmConnection.userDetails}\n              {state}\n              selected={true}\n            />\n          {:else}\n            <ThemeButton {theme} {isCustom} userDetails={state.osmConnection.userDetails} {state} />\n          {/if}\n        {/if}\n      {/each}\n    </div>\n  {:else}\n    <div>\n      {#each filteredThemes as theme (theme.id)}\n        {#if theme !== undefined && !(hideThemes && theme?.hideFromOverview)}\n          <ThemeButton {theme} {isCustom} userDetails={state.osmConnection.userDetails} {state} />\n        {/if}\n      {/each}\n    </div>\n  {/if}\n\n  {#if filteredThemes.length === 0}\n    <NoThemeResultButton {search} />\n  {/if}\n</section>\n","<script lang=\"ts\">\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import { UIEventSource } from \"../../Logic/UIEventSource\"\n  import * as themeOverview from \"../../assets/generated/theme_overview.json\"\n  import { Utils } from \"../../Utils\"\n  import ThemesList from \"./ThemesList.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\n  import LoginToggle from \"../Base/LoginToggle.svelte\"\n\n  export let search: UIEventSource<string>\n  export let state: { osmConnection: OsmConnection }\n  export let onMainScreen: boolean = true\n\n  const prefix = \"mapcomplete-hidden-theme-\"\n  const hiddenThemes: LayoutInformation[] =\n    (themeOverview[\"default\"] ?? themeOverview)?.filter((layout) => layout.hideFromOverview) ?? []\n  const userPreferences = state.osmConnection.preferencesHandler.preferences\n  const t = Translations.t.general.morescreen\n\n  let knownThemesId: string[]\n  $: knownThemesId = Utils.NoNull(\n    Object.keys($userPreferences)\n      .filter((key) => key.startsWith(prefix))\n      .map((key) => key.substring(prefix.length, key.length - \"-enabled\".length))\n  )\n  $: console.log(\"Known theme ids:\", knownThemesId)\n  $: knownThemes = hiddenThemes.filter((theme) => knownThemesId.includes(theme.id))\n</script>\n\n<LoginToggle {state}>\n  <ThemesList\n    hideThemes={false}\n    isCustom={false}\n    {onMainScreen}\n    {search}\n    {state}\n    themes={knownThemes}\n  >\n    <svelte:fragment slot=\"title\">\n      <h3>{t.previouslyHiddenTitle.toString()}</h3>\n      <p>\n        {t.hiddenExplanation.Subs({\n          hidden_discovered: knownThemes.length.toString(),\n          total_hidden: hiddenThemes.length.toString(),\n        })}\n      </p>\n    </svelte:fragment>\n  </ThemesList>\n</LoginToggle>\n","<script lang=\"ts\">\n  import { OsmConnection } from \"../../Logic/Osm/OsmConnection\"\n  import { Store, Stores, UIEventSource } from \"../../Logic/UIEventSource\"\n  import { Utils } from \"../../Utils\"\n  import ThemesList from \"./ThemesList.svelte\"\n  import Translations from \"../i18n/Translations\"\n  import UserRelatedState from \"../../Logic/State/UserRelatedState\"\n\n  export let search: UIEventSource<string>\n  export let state: UserRelatedState & {\n    osmConnection: OsmConnection\n  }\n  export let onMainScreen: boolean = true\n\n  const t = Translations.t.general\n  const currentIds: Store<string[]> = state.installedUserThemes\n  const stableIds = Stores.ListStabilized<string>(currentIds)\n  let customThemes\n  $: customThemes = Utils.NoNull($stableIds.map((id) => state.GetUnofficialTheme(id)))\n  $: console.log(\"Custom themes are\", customThemes)\n</script>\n\n{#if customThemes.length > 0}\n  <ThemesList\n    {search}\n    {state}\n    {onMainScreen}\n    themes={customThemes}\n    isCustom={true}\n    hideThemes={false}\n  >\n    <svelte:fragment slot=\"title\">\n      <!-- TODO: Change string to exclude html -->\n      {@html t.customThemeIntro.toString()}\n    </svelte:fragment>\n  </ThemesList>\n{/if}\n","import Svg from \"../../Svg\"\nimport Combine from \"../Base/Combine\"\nimport Translations from \"../i18n/Translations\"\nimport LayoutConfig, { LayoutInformation } from \"../../Models/ThemeConfig/LayoutConfig\"\nimport { ImmutableStore, Store } from \"../../Logic/UIEventSource\"\nimport UserRelatedState from \"../../Logic/State/UserRelatedState\"\nimport { Utils } from \"../../Utils\"\nimport themeOverview from \"../../assets/generated/theme_overview.json\"\nimport { TextField } from \"../Input/TextField\"\nimport Locale from \"../i18n/Locale\"\nimport SvelteUIElement from \"../Base/SvelteUIElement\"\nimport ThemesList from \"./ThemesList.svelte\"\nimport HiddenThemeList from \"./HiddenThemeList.svelte\"\nimport UnofficialThemeList from \"./UnofficialThemeList.svelte\"\n\nexport default class MoreScreen extends Combine {\n    private static readonly officialThemes: LayoutInformation[] = themeOverview\n\n    constructor(\n        state: UserRelatedState & {\n            layoutToUse?: LayoutConfig\n        },\n        onMainScreen: boolean = false\n    ) {\n        const tr = Translations.t.general.morescreen\n\n        const search = new TextField({\n            placeholder: tr.searchForATheme,\n        })\n        search.enterPressed.addCallbackD((searchTerm) => {\n            searchTerm = searchTerm.toLowerCase()\n            if (!searchTerm) {\n                return\n            }\n            if (searchTerm === \"personal\") {\n                window.location.href = MoreScreen.createUrlFor(\n                    { id: \"personal\" },\n                    false,\n                    state\n                ).data\n            }\n            if (searchTerm === \"bugs\" || searchTerm === \"issues\") {\n                window.location.href = \"https://github.com/pietervdvn/MapComplete/issues\"\n            }\n            if (searchTerm === \"source\") {\n                window.location.href = \"https://github.com/pietervdvn/MapComplete\"\n            }\n            if (searchTerm === \"docs\") {\n                window.location.href = \"https://github.com/pietervdvn/MapComplete/tree/develop/Docs\"\n            }\n            if (searchTerm === \"osmcha\" || searchTerm === \"stats\") {\n                window.location.href = Utils.OsmChaLinkFor(7)\n            }\n            // Enter pressed -> search the first _official_ matchin theme and open it\n            const publicTheme = MoreScreen.officialThemes.find(\n                (th) =>\n                    th.hideFromOverview == false &&\n                    th.id !== \"personal\" &&\n                    MoreScreen.MatchesLayout(th, searchTerm)\n            )\n            if (publicTheme !== undefined) {\n                window.location.href = MoreScreen.createUrlFor(publicTheme, false, state).data\n            }\n            const hiddenTheme = MoreScreen.officialThemes.find(\n                (th) => th.id !== \"personal\" && MoreScreen.MatchesLayout(th, searchTerm)\n            )\n            if (hiddenTheme !== undefined) {\n                window.location.href = MoreScreen.createUrlFor(hiddenTheme, false, state).data\n            }\n        })\n\n        if (onMainScreen) {\n            search.focus()\n            document.addEventListener(\"keydown\", function (event) {\n                if (event.ctrlKey && event.code === \"KeyF\") {\n                    search.focus()\n                    event.preventDefault()\n                }\n            })\n        }\n\n        const searchBar = new Combine([\n            Svg.search_svg().SetClass(\"w-8\"),\n            search.SetClass(\"mr-4 w-full\"),\n        ]).SetClass(\"flex rounded-full border-2 border-black items-center my-2 w-1/2\")\n\n        super([\n            new Combine([searchBar]).SetClass(\"flex justify-center\"),\n            new SvelteUIElement(ThemesList, {\n                state,\n                onMainScreen,\n                search: search.GetValue(),\n                themes: MoreScreen.officialThemes,\n            }),\n            new SvelteUIElement(HiddenThemeList, {\n                state,\n                onMainScreen,\n                search: search.GetValue(),\n            }),\n            new SvelteUIElement(UnofficialThemeList, {\n                state,\n                onMainScreen,\n                search: search.GetValue(),\n            }),\n            tr.streetcomplete.Clone().SetClass(\"block text-base mx-10 my-3 mb-10\"),\n        ])\n    }\n\n    public static MatchesLayout(\n        layout: {\n            id: string\n            title: any\n            shortDescription: any\n            keywords?: any[]\n        },\n        search: string\n    ): boolean {\n        if (search === undefined) {\n            return true\n        }\n        search = Utils.RemoveDiacritics(search.toLocaleLowerCase())\n        if (search.length > 3 && layout.id.toLowerCase().indexOf(search) >= 0) {\n            return true\n        }\n        if (layout.id === \"personal\") {\n            return false\n        }\n        const entitiesToSearch = [layout.shortDescription, layout.title, ...(layout.keywords ?? [])]\n        for (const entity of entitiesToSearch) {\n            if (entity === undefined) {\n                continue\n            }\n            const term = entity[\"*\"] ?? entity[Locale.language.data]\n            if (Utils.RemoveDiacritics(term?.toLowerCase())?.indexOf(search) >= 0) {\n                return true\n            }\n        }\n\n        return false\n    }\n\n    private static createUrlFor(\n        layout: { id: string; definition?: string },\n        isCustom: boolean,\n        state?: { layoutToUse?: { id } }\n    ): Store<string> {\n        if (layout === undefined) {\n            return undefined\n        }\n        if (layout.id === undefined) {\n            console.error(\"ID is undefined for layout\", layout)\n            return undefined\n        }\n\n        if (layout.id === state?.layoutToUse?.id) {\n            return undefined\n        }\n\n        let path = window.location.pathname\n        // Path starts with a '/' and contains everything, e.g. '/dir/dir/page.html'\n        path = path.substr(0, path.lastIndexOf(\"/\"))\n        // Path will now contain '/dir/dir', or empty string in case of nothing\n        if (path === \"\") {\n            path = \".\"\n        }\n\n        let linkPrefix = `${path}/${layout.id.toLowerCase()}.html?`\n        if (location.hostname === \"localhost\" || location.hostname === \"127.0.0.1\") {\n            linkPrefix = `${path}/theme.html?layout=${layout.id}&`\n        }\n\n        if (isCustom) {\n            linkPrefix = `${path}/theme.html?userlayout=${layout.id}&`\n        }\n\n        let hash = \"\"\n        if (layout.definition !== undefined) {\n            hash = \"#\" + btoa(JSON.stringify(layout.definition))\n        }\n\n        return new ImmutableStore<string>(`${linkPrefix}${hash}`)\n    }\n}\n","<script>\nexport let color = \"#000000\"\n</script>\n <svg {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown xmlns=\"http://www.w3.org/2000/svg\" width=\"328px\" height=\"374px\" viewBox=\"0 0 328 374\" version=\"1.1\">   <g id=\"surface1\">     <path style=\" stroke:none;fill-rule:nonzero;fill:{color};fill-opacity:1;\" d=\"M 257.714844 23.375 L 210.855469 70.125 L 281.144531 140.25 L 328 93.5 Z M 0 280.5 L 0.25 350.832031 L 70.285156 350.625 L 257.714844 163.625 L 187.429688 93.5 Z M 70.285156 327.25 L 23.429688 327.25 L 23.429688 280.5 L 46.855469 280.5 L 46.855469 303.875 L 70.285156 303.875 Z M 70.285156 327.25 \"/>   </g> </svg>","<script lang=\"ts\">\n  import { OsmConnectionFeatureSwitches } from \"../Logic/State/FeatureSwitchState\"\n  import { OsmConnection } from \"../Logic/Osm/OsmConnection\"\n  import { QueryParameters } from \"../Logic/Web/QueryParameters\"\n  import UserRelatedState from \"../Logic/State/UserRelatedState\"\n  import LanguagePicker from \"./InputElement/LanguagePicker.svelte\"\n  import Translations from \"./i18n/Translations\"\n  import Logo from \"../assets/svg/Logo.svelte\"\n  import Tr from \"./Base/Tr.svelte\"\n  import ToSvelte from \"./Base/ToSvelte.svelte\"\n  import MoreScreen from \"./BigComponents/MoreScreen\"\n  import LoginToggle from \"./Base/LoginToggle.svelte\"\n  import Pencil from \"../assets/svg/Pencil.svelte\"\n  import Login from \"../assets/svg/Login.svelte\"\n  import Constants from \"../Models/Constants\"\n\n  const featureSwitches = new OsmConnectionFeatureSwitches()\n  const osmConnection = new OsmConnection({\n    fakeUser: featureSwitches.featureSwitchFakeUser.data,\n    oauth_token: QueryParameters.GetQueryParameter(\n      \"oauth_token\",\n      undefined,\n      \"Used to complete the login\"\n    ),\n  })\n  const state = new UserRelatedState(osmConnection)\n  const t = Translations.t.index\n  let userLanguages = osmConnection.userDetails.map((ud) => ud.languages)\n</script>\n\n<div class=\"m-4 flex flex-col\">\n  <LanguagePicker clss=\"self-end\" assignTo={state.language} availableLanguages={t.title.SupportedLanguages()}\n                    preferredLanguages={userLanguages} />\n\n  <div class=\"mt-4 flex\">\n    <div class=\"m-3 flex-none\">\n      <Logo alt=\"MapComplete Logo\" class=\"h-12 w-12 sm:h-24 sm:w-24\" />\n    </div>\n\n    <div class=\"flex flex-col\">\n      <h1 class=\"m-0 font-extrabold tracking-tight md:text-6xl\">\n        <Tr t={t.title} />\n      </h1>\n      <Tr\n        cls=\"my-4 mr-4 text-base font-semibold sm:text-lg md:mt-5 md:text-xl lg:mx-0\"\n        t={Translations.t.index.intro}\n      />\n    </div>\n  </div>\n\n  <ToSvelte construct={new MoreScreen(state, true)} />\n\n  <LoginToggle {state}>\n    <div slot=\"not-logged-in\">\n      <button class=\"w-full\" on:click={() => osmConnection.AttemptLogin()}>\n        <Login class=\"mr-2 h-6 w-6 \" />\n        <Tr t={Translations.t.index.logIn} />\n      </button>\n    </div>\n    <a\n      class=\"button h-fit w-full\"\n      href={window.location.protocol + \"//\" + window.location.host + \"/studio.html\"}\n    >\n      <Pencil class=\"mr-2 h-6 w-6\" />\n      <Tr t={Translations.t.general.morescreen.createYourOwnTheme} />\n    </a>\n  </LoginToggle>\n\n  <Tr cls=\"link-underline\" t={Translations.t.general.aboutMapComplete.intro} />\n  <div class=\"subtle mb-16 self-end\">\n    v{Constants.vNumber}\n  </div>\n</div>\n","import { QueryParameters } from \"./Logic/Web/QueryParameters\"\nimport SvelteUIElement from \"./UI/Base/SvelteUIElement\"\nimport AllThemesGui from \"./UI/AllThemesGui.svelte\"\n\nconst layout = QueryParameters.GetQueryParameter(\"layout\", undefined).data ?? \"\"\nconst customLayout = QueryParameters.GetQueryParameter(\"userlayout\", undefined).data ?? \"\"\nconst l = window.location\nif (layout !== \"\") {\n    if (window.location.host.startsWith(\"127.0.0.1\")) {\n        window.location.replace(\n            l.protocol +\n                \"//\" +\n                window.location.host +\n                \"/theme.html\" +\n                l.search +\n                \"&layout=\" +\n                layout +\n                l.hash\n        )\n    } else {\n        window.location.replace(\n            l.protocol + \"//\" + window.location.host + \"/\" + layout + \".html\" + l.search + l.hash\n        )\n    }\n} else if (customLayout !== \"\") {\n    window.location.replace(\n        l.protocol + \"//\" + window.location.host + \"/theme.html\" + l.search + l.hash\n    )\n}\n\nnew SvelteUIElement(AllThemesGui, {}).AttachTo(\"main\")\n"],"names":["ctx","insert","target","svg","anchor","append","g","path0","path1","path2","path3","color","$$props","Svg","div1","h5","div0","button","search","t","Translations","span","create_if_block_1","src_url_equal","img","img_src_value","attr","dirty","if_block","personal.id","create_if_block","theme","isCustom","userDetails","state","selected","unlockedPersonal","LocalStorageSource","Constants","createUrl","layout","path","linkPrefix","hash","ImmutableStore","href","title","Translation","get_key","i","div","_a","create_if_block_4","create_if_block_2","section","themes","onMainScreen","hideThemes","$$invalidate","filteredThemes","MoreScreen","$search","allFilteredThemes","themeOverview","firstTheme","h3","p","prefix","hiddenThemes","themeOverview[\"default\"]","userPreferences","knownThemesId","Utils","$userPreferences","key","knownThemes","currentIds","stableIds","Stores","customThemes","$stableIds","id","_MoreScreen","Combine","tr","TextField","searchTerm","publicTheme","th","hiddenTheme","event","searchBar","SvelteUIElement","ThemesList","HiddenThemeList","UnofficialThemeList","entitiesToSearch","entity","term","Locale","__publicField","a","Tr","tr0","div3","div4","div2","h1","featureSwitches","OsmConnectionFeatureSwitches","osmConnection","OsmConnection","QueryParameters","UserRelatedState","userLanguages","ud","customLayout","l","AllThemesGui"],"mappings":"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"}