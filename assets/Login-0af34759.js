var nv=Object.defineProperty;var iv=(r,e,t)=>e in r?nv(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ee=(r,e,t)=>(iv(r,typeof e!="symbol"?e+"":e,t),t);import{U as aa,I as qs,S as ov}from"./LocalStorageSource-9618259f.js";import{c as uo,g as vu}from"./_commonjsHelpers-87174ba5.js";import{r as Xp,L as av,p as sv}from"./FixImages-a5bcb20b.js";import{U as Qi}from"./Utils-cf50a89b.js";import{L as Zi,Q as gd,j as md,a as uv,T as cv}from"./Tr-724d55f3.js";import{C as vd}from"./Constants-3ee427a9.js";import{S as Ql,i as eh,s as th,H as Ks,e as rh,a as Yp,b as Mn,d as Yo,f as Yu,I as Ws,J as Js,K as Xs,t as Zt,g as xr,h as jo,$ as fv,o as Mc,D as Nc,E as Pc,p as lv,n as Hs,M as hv,c as ju,m as $u,j as Zu,F as kf,q as pl,r as Ff,u as ra,v as yd,w as Ps,x as dv,y as pv,z as _d,A as gv,C as Ls}from"./Svg-eb09de07.js";import{t as bd,a as mv}from"./tw-merge-79e96412.js";import{L as vv}from"./Loading-ff86366f.js";import"./OsmConnection-86dd885b.js";var yr=63710088e-1,nh={centimeters:yr*100,centimetres:yr*100,degrees:yr/111325,feet:yr*3.28084,inches:yr*39.37,kilometers:yr/1e3,kilometres:yr/1e3,meters:yr,metres:yr,miles:yr/1609.344,millimeters:yr*1e3,millimetres:yr*1e3,nauticalmiles:yr/1852,radians:1,yards:yr*1.0936},yv={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/yr,yards:1.0936133},gl={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function fn(r,e,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}function _v(r,e,t){switch(r){case"Point":return Yt(e).geometry;case"LineString":return Br(e).geometry;case"Polygon":return gs(e).geometry;case"MultiPoint":return $p(e).geometry;case"MultiLineString":return jp(e).geometry;case"MultiPolygon":return Lc(e).geometry;default:throw new Error(r+" is invalid")}}function Yt(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!js(r[0])||!js(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return fn(n,e,t)}function bv(r,e,t){return t===void 0&&(t={}),kr(r.map(function(n){return Yt(n,e)}),t)}function gs(r,e,t){t===void 0&&(t={});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:r};return fn(s,e,t)}function wv(r,e,t){return t===void 0&&(t={}),kr(r.map(function(n){return gs(n,e)}),t)}function Br(r,e,t){if(t===void 0&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return fn(n,e,t)}function xv(r,e,t){return t===void 0&&(t={}),kr(r.map(function(n){return Br(n,e)}),t)}function kr(r,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function jp(r,e,t){t===void 0&&(t={});var n={type:"MultiLineString",coordinates:r};return fn(n,e,t)}function $p(r,e,t){t===void 0&&(t={});var n={type:"MultiPoint",coordinates:r};return fn(n,e,t)}function Lc(r,e,t){t===void 0&&(t={});var n={type:"MultiPolygon",coordinates:r};return fn(n,e,t)}function Ev(r,e,t){t===void 0&&(t={});var n={type:"GeometryCollection",geometries:r};return fn(n,e,t)}function Sv(r,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function Rc(r,e){e===void 0&&(e="kilometers");var t=nh[e];if(!t)throw new Error(e+" units is invalid");return r*t}function yu(r,e){e===void 0&&(e="kilometers");var t=nh[e];if(!t)throw new Error(e+" units is invalid");return r/t}function Cv(r,e){return Ys(yu(r,e))}function Iv(r){var e=r%360;return e<0&&(e+=360),e}function Ys(r){var e=r%(2*Math.PI);return e*180/Math.PI}function Tn(r){var e=r%360;return e*Math.PI/180}function Av(r,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return Rc(yu(r,e),t)}function Mv(r,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=gl[e];if(!n)throw new Error("invalid original units");var i=gl[t];if(!i)throw new Error("invalid final units");return r/n*i}function js(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function ih(r){return!!r&&r.constructor===Object}function Nv(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(e){if(!js(e))throw new Error("bbox must only contain numbers")})}function Pv(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}const Lv=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:gl,bearingToAzimuth:Iv,convertArea:Mv,convertLength:Av,degreesToRadians:Tn,earthRadius:yr,factors:nh,feature:fn,featureCollection:kr,geometry:_v,geometryCollection:Ev,isNumber:js,isObject:ih,lengthToDegrees:Cv,lengthToRadians:yu,lineString:Br,lineStrings:xv,multiLineString:jp,multiPoint:$p,multiPolygon:Lc,point:Yt,points:bv,polygon:gs,polygons:wv,radiansToDegrees:Ys,radiansToLength:Rc,round:Sv,unitsFactors:yv,validateBBox:Nv,validateId:Pv},Symbol.toStringTag,{value:"Module"}));function wo(r,e,t){if(r!==null)for(var n,i,o,a,s,u,c,f=0,l=0,p,b=r.type,_=b==="FeatureCollection",E=b==="Feature",R=_?r.features.length:1,D=0;D<R;D++){c=_?r.features[D].geometry:E?r.geometry:r,p=c?c.type==="GeometryCollection":!1,s=p?c.geometries.length:1;for(var m=0;m<s;m++){var x=0,M=0;if(a=p?c.geometries[m]:c,a!==null){u=a.coordinates;var O=a.type;switch(f=t&&(O==="Polygon"||O==="MultiPolygon")?1:0,O){case null:break;case"Point":if(e(u,l,D,x,M)===!1)return!1;l++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(e(u[n],l,D,x,M)===!1)return!1;l++,O==="MultiPoint"&&x++}O==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-f;i++){if(e(u[n][i],l,D,x,M)===!1)return!1;l++}O==="MultiLineString"&&x++,O==="Polygon"&&M++}O==="Polygon"&&x++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(M=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-f;o++){if(e(u[n][i][o],l,D,x,M)===!1)return!1;l++}M++}x++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(wo(a.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Rv(r,e,t,n){var i=t;return wo(r,function(o,a,s,u,c){a===0&&t===void 0?i=o:i=e(i,o,a,s,u,c)},n),i}function Zp(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}function Tv(r,e,t){var n=t;return Zp(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function Do(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function Qp(r,e,t){var n=t;return Do(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function Ov(r){var e=[];return wo(r,function(t){e.push(t)}),e}function _u(r,e){var t,n,i,o,a,s,u,c,f,l,p=0,b=r.type==="FeatureCollection",_=r.type==="Feature",E=b?r.features.length:1;for(t=0;t<E;t++){for(s=b?r.features[t].geometry:_?r.geometry:r,c=b?r.features[t].properties:_?r.properties:{},f=b?r.features[t].bbox:_?r.bbox:void 0,l=b?r.features[t].id:_?r.id:void 0,u=s?s.type==="GeometryCollection":!1,a=u?s.geometries.length:1,i=0;i<a;i++){if(o=u?s.geometries[i]:s,o===null){if(e(null,p,c,f,l)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,p,c,f,l)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],p,c,f,l)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function eg(r,e,t){var n=t;return _u(r,function(i,o,a,s,u){o===0&&t===void 0?n=i:n=e(n,i,o,a,s,u)}),n}function Ca(r,e){_u(r,function(t,n,i,o,a){var s=t===null?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(fn(t,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var u;switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var f=t.coordinates[c],l={type:u,coordinates:f};if(e(fn(l,i),n,c)===!1)return!1}})}function Dv(r,e,t){var n=t;return Ca(r,function(i,o,a){o===0&&a===0&&t===void 0?n=i:n=e(n,i,o,a)}),n}function tg(r,e){Ca(r,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var s,u=0,c=0,f=0;if(wo(t,function(l,p,b,_,E){if(s===void 0||n>u||_>c||E>f){s=l,u=n,c=_,f=E,o=0;return}var R=Br([s,l],t.properties);if(e(R,n,i,E,o)===!1)return!1;o++,s=l})===!1)return!1}}})}function rg(r,e,t){var n=t,i=!1;return tg(r,function(o,a,s,u,c){i===!1&&t===void 0?n=o:n=e(n,o,a,s,u,c),i=!0}),n}function ng(r,e){if(!r)throw new Error("geojson is required");Ca(r,function(t,n,i){if(t.geometry!==null){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(e(t,n,i,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(e(Br(a[s],t.properties),n,i,s)===!1)return!1;break}}})}function Bv(r,e,t){var n=t;return ng(r,function(i,o,a,s){o===0&&t===void 0?n=i:n=e(n,i,o,a,s)}),n}function kv(r,e){if(e=e||{},!ih(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,a=e.properties,s;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,s=r.features[t].geometry;break;case"Feature":a=a||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var u=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),Br([u[o],u[o+1]],a,e);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),Br([u[i][o],u[i][o+1]],a,e);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o-1),Br([u[n][o],u[n][o+1]],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o-1),Br([u[n][i][o],u[n][i][o+1]],a,e)}throw new Error("geojson is invalid")}function Fv(r,e){if(e=e||{},!ih(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,a=e.properties,s;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,s=r.features[t].geometry;break;case"Feature":a=a||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var u=s.coordinates;switch(s.type){case"Point":return Yt(u,a,e);case"MultiPoint":return n<0&&(n=u.length+n),Yt(u[n],a,e);case"LineString":return o<0&&(o=u.length+o),Yt(u[o],a,e);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),Yt(u[i][o],a,e);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),Yt(u[n][o],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o),Yt(u[n][i][o],a,e)}throw new Error("geojson is invalid")}const zv=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Ov,coordEach:wo,coordReduce:Rv,featureEach:Do,featureReduce:Qp,findPoint:Fv,findSegment:kv,flattenEach:Ca,flattenReduce:Dv,geomEach:_u,geomReduce:eg,lineEach:ng,lineReduce:Bv,propEach:Zp,propReduce:Tv,segmentEach:tg,segmentReduce:rg},Symbol.toStringTag,{value:"Module"}));function ui(r){var e=[1/0,1/0,-1/0,-1/0];return wo(r,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}ui.default=ui;const Uv=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"}));function Ri(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function oi(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Bo(r){return r.type==="Feature"?r.geometry:r}function ml(r,e){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}var Qu={},qv={get exports(){return Qu},set exports(r){Qu=r}},vl={},Hv={get exports(){return vl},set exports(r){vl=r}};(function(r,e){(function(t,n){r.exports=n()})(uo,function(){function t(m,x,M,O,B){(function F(z,U,W,C,h){for(;C>W;){if(C-W>600){var g=C-W+1,w=U-W+1,S=Math.log(g),N=.5*Math.exp(2*S/3),T=.5*Math.sqrt(S*N*(g-N)/g)*(w-g/2<0?-1:1),k=Math.max(W,Math.floor(U-w*N/g+T)),P=Math.min(C,Math.floor(U+(g-w)*N/g+T));F(z,U,k,P,h)}var d=z[U],I=W,K=C;for(n(z,W,U),h(z[C],d)>0&&n(z,W,C);I<K;){for(n(z,I,K),I++,K--;h(z[I],d)<0;)I++;for(;h(z[K],d)>0;)K--}h(z[W],d)===0?n(z,W,K):n(z,++K,C),K<=U&&(W=K+1),U<=K&&(C=K-1)}})(m,x,M||0,O||m.length-1,B||i)}function n(m,x,M){var O=m[x];m[x]=m[M],m[M]=O}function i(m,x){return m<x?-1:m>x?1:0}var o=function(m){m===void 0&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(m,x,M){if(!M)return x.indexOf(m);for(var O=0;O<x.length;O++)if(M(m,x[O]))return O;return-1}function s(m,x){u(m,0,m.children.length,x,m)}function u(m,x,M,O,B){B||(B=R(null)),B.minX=1/0,B.minY=1/0,B.maxX=-1/0,B.maxY=-1/0;for(var F=x;F<M;F++){var z=m.children[F];c(B,m.leaf?O(z):z)}return B}function c(m,x){return m.minX=Math.min(m.minX,x.minX),m.minY=Math.min(m.minY,x.minY),m.maxX=Math.max(m.maxX,x.maxX),m.maxY=Math.max(m.maxY,x.maxY),m}function f(m,x){return m.minX-x.minX}function l(m,x){return m.minY-x.minY}function p(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function b(m){return m.maxX-m.minX+(m.maxY-m.minY)}function _(m,x){return m.minX<=x.minX&&m.minY<=x.minY&&x.maxX<=m.maxX&&x.maxY<=m.maxY}function E(m,x){return x.minX<=m.maxX&&x.minY<=m.maxY&&x.maxX>=m.minX&&x.maxY>=m.minY}function R(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(m,x,M,O,B){for(var F=[x,M];F.length;)if(!((M=F.pop())-(x=F.pop())<=O)){var z=x+Math.ceil((M-x)/O/2)*O;t(m,z,x,M,B),F.push(x,z,z,M)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(m){var x=this.data,M=[];if(!E(m,x))return M;for(var O=this.toBBox,B=[];x;){for(var F=0;F<x.children.length;F++){var z=x.children[F],U=x.leaf?O(z):z;E(m,U)&&(x.leaf?M.push(z):_(m,U)?this._all(z,M):B.push(z))}x=B.pop()}return M},o.prototype.collides=function(m){var x=this.data;if(!E(m,x))return!1;for(var M=[];x;){for(var O=0;O<x.children.length;O++){var B=x.children[O],F=x.leaf?this.toBBox(B):B;if(E(m,F)){if(x.leaf||_(m,F))return!0;M.push(B)}}x=M.pop()}return!1},o.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var x=0;x<m.length;x++)this.insert(m[x]);return this}var M=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var O=this.data;this.data=M,M=O}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this},o.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},o.prototype.clear=function(){return this.data=R([]),this},o.prototype.remove=function(m,x){if(!m)return this;for(var M,O,B,F=this.data,z=this.toBBox(m),U=[],W=[];F||U.length;){if(F||(F=U.pop(),O=U[U.length-1],M=W.pop(),B=!0),F.leaf){var C=a(m,F.children,x);if(C!==-1)return F.children.splice(C,1),U.push(F),this._condense(U),this}B||F.leaf||!_(F,z)?O?(M++,F=O.children[M],B=!1):F=null:(U.push(F),W.push(M),M=0,O=F,F=F.children[0])}return this},o.prototype.toBBox=function(m){return m},o.prototype.compareMinX=function(m,x){return m.minX-x.minX},o.prototype.compareMinY=function(m,x){return m.minY-x.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(m){return this.data=m,this},o.prototype._all=function(m,x){for(var M=[];m;)m.leaf?x.push.apply(x,m.children):M.push.apply(M,m.children),m=M.pop();return x},o.prototype._build=function(m,x,M,O){var B,F=M-x+1,z=this._maxEntries;if(F<=z)return s(B=R(m.slice(x,M+1)),this.toBBox),B;O||(O=Math.ceil(Math.log(F)/Math.log(z)),z=Math.ceil(F/Math.pow(z,O-1))),(B=R([])).leaf=!1,B.height=O;var U=Math.ceil(F/z),W=U*Math.ceil(Math.sqrt(z));D(m,x,M,W,this.compareMinX);for(var C=x;C<=M;C+=W){var h=Math.min(C+W-1,M);D(m,C,h,U,this.compareMinY);for(var g=C;g<=h;g+=U){var w=Math.min(g+U-1,h);B.children.push(this._build(m,g,w,O-1))}}return s(B,this.toBBox),B},o.prototype._chooseSubtree=function(m,x,M,O){for(;O.push(x),!x.leaf&&O.length-1!==M;){for(var B=1/0,F=1/0,z=void 0,U=0;U<x.children.length;U++){var W=x.children[U],C=p(W),h=(g=m,w=W,(Math.max(w.maxX,g.maxX)-Math.min(w.minX,g.minX))*(Math.max(w.maxY,g.maxY)-Math.min(w.minY,g.minY))-C);h<F?(F=h,B=C<B?C:B,z=W):h===F&&C<B&&(B=C,z=W)}x=z||x.children[0]}var g,w;return x},o.prototype._insert=function(m,x,M){var O=M?m:this.toBBox(m),B=[],F=this._chooseSubtree(O,this.data,x,B);for(F.children.push(m),c(F,O);x>=0&&B[x].children.length>this._maxEntries;)this._split(B,x),x--;this._adjustParentBBoxes(O,B,x)},o.prototype._split=function(m,x){var M=m[x],O=M.children.length,B=this._minEntries;this._chooseSplitAxis(M,B,O);var F=this._chooseSplitIndex(M,B,O),z=R(M.children.splice(F,M.children.length-F));z.height=M.height,z.leaf=M.leaf,s(M,this.toBBox),s(z,this.toBBox),x?m[x-1].children.push(z):this._splitRoot(M,z)},o.prototype._splitRoot=function(m,x){this.data=R([m,x]),this.data.height=m.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(m,x,M){for(var O,B,F,z,U,W,C,h=1/0,g=1/0,w=x;w<=M-x;w++){var S=u(m,0,w,this.toBBox),N=u(m,w,M,this.toBBox),T=(B=S,F=N,z=void 0,U=void 0,W=void 0,C=void 0,z=Math.max(B.minX,F.minX),U=Math.max(B.minY,F.minY),W=Math.min(B.maxX,F.maxX),C=Math.min(B.maxY,F.maxY),Math.max(0,W-z)*Math.max(0,C-U)),k=p(S)+p(N);T<h?(h=T,O=w,g=k<g?k:g):T===h&&k<g&&(g=k,O=w)}return O||M-x},o.prototype._chooseSplitAxis=function(m,x,M){var O=m.leaf?this.compareMinX:f,B=m.leaf?this.compareMinY:l;this._allDistMargin(m,x,M,O)<this._allDistMargin(m,x,M,B)&&m.children.sort(O)},o.prototype._allDistMargin=function(m,x,M,O){m.children.sort(O);for(var B=this.toBBox,F=u(m,0,x,B),z=u(m,M-x,M,B),U=b(F)+b(z),W=x;W<M-x;W++){var C=m.children[W];c(F,m.leaf?B(C):C),U+=b(F)}for(var h=M-x-1;h>=x;h--){var g=m.children[h];c(z,m.leaf?B(g):g),U+=b(z)}return U},o.prototype._adjustParentBBoxes=function(m,x,M){for(var O=M;O>=0;O--)c(x[O],m)},o.prototype._condense=function(m){for(var x=m.length-1,M=void 0;x>=0;x--)m[x].children.length===0?x>0?(M=m[x-1].children).splice(M.indexOf(m[x]),1):this.clear():s(m[x],this.toBBox)},o})})(Hv);class Gv{constructor(e=[],t=Vv){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(n(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1,s=t[a];const u=a+1;if(u<this.length&&n(t[u],s)<0&&(a=u,s=t[u]),n(s,o)>=0)break;t[e]=s,e=a}t[e]=o}}function Vv(r,e){return r<e?-1:r>e?1:0}const Kv=Object.freeze(Object.defineProperty({__proto__:null,default:Gv},Symbol.toStringTag,{value:"Module"})),Wv=vu(Kv);var $s={},Jv={get exports(){return $s},set exports(r){$s=r}},Xv=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,c=0,f=u-1;c<u;f=c++){var l=t[n+c*2+0],p=t[n+c*2+1],b=t[n+f*2+0],_=t[n+f*2+1],E=p>a!=_>a&&o<(b-l)*(a-p)/(_-p)+l;E&&(s=!s)}return s},Yv=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,c=0,f=u-1;c<u;f=c++){var l=t[c+n][0],p=t[c+n][1],b=t[f+n][0],_=t[f+n][1],E=p>a!=_>a&&o<(b-l)*(a-p)/(_-p)+l;E&&(s=!s)}return s},ig=Xv,og=Yv;Jv.exports=function(e,t,n,i){return t.length>0&&Array.isArray(t[0])?og(e,t,n,i):ig(e,t,n,i)};$s.nested=og;$s.flat=ig;var ec={},jv={get exports(){return ec},set exports(r){ec=r}};(function(r,e){(function(t,n){n(e)})(uo,function(t){const i=33306690738754706e-32;function o(E,R,D,m,x){let M,O,B,F,z=R[0],U=m[0],W=0,C=0;U>z==U>-z?(M=z,z=R[++W]):(M=U,U=m[++C]);let h=0;if(W<E&&C<D)for(U>z==U>-z?(B=M-((O=z+M)-z),z=R[++W]):(B=M-((O=U+M)-U),U=m[++C]),M=O,B!==0&&(x[h++]=B);W<E&&C<D;)U>z==U>-z?(B=M-((O=M+z)-(F=O-M))+(z-F),z=R[++W]):(B=M-((O=M+U)-(F=O-M))+(U-F),U=m[++C]),M=O,B!==0&&(x[h++]=B);for(;W<E;)B=M-((O=M+z)-(F=O-M))+(z-F),z=R[++W],M=O,B!==0&&(x[h++]=B);for(;C<D;)B=M-((O=M+U)-(F=O-M))+(U-F),U=m[++C],M=O,B!==0&&(x[h++]=B);return M===0&&h!==0||(x[h++]=M),h}function a(E){return new Float64Array(E)}const s=33306690738754716e-32,u=22204460492503146e-32,c=11093356479670487e-47,f=a(4),l=a(8),p=a(12),b=a(16),_=a(4);t.orient2d=function(E,R,D,m,x,M){const O=(R-M)*(D-x),B=(E-x)*(m-M),F=O-B;if(O===0||B===0||O>0!=B>0)return F;const z=Math.abs(O+B);return Math.abs(F)>=s*z?F:-function(U,W,C,h,g,w,S){let N,T,k,P,d,I,K,Q,Z,te,ne,le,je,pe,xe,rr,Re,ge;const nr=U-g,Te=C-g,A=W-w,v=h-w;d=(xe=(Q=nr-(K=(I=134217729*nr)-(I-nr)))*(te=v-(Z=(I=134217729*v)-(I-v)))-((pe=nr*v)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=A-(K=(I=134217729*A)-(I-A)))*(te=Te-(Z=(I=134217729*Te)-(I-Te)))-((rr=A*Te)-K*Z-Q*Z-K*te))),f[0]=xe-(ne+d)+(d-Re),d=(je=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=je-rr),f[1]=je-(ne+d)+(d-rr),d=(ge=le+ne)-le,f[2]=le-(ge-d)+(ne-d),f[3]=ge;let y=function(Se,ce){let de=ce[0];for(let ot=1;ot<Se;ot++)de+=ce[ot];return de}(4,f),L=u*S;if(y>=L||-y>=L||(N=U-(nr+(d=U-nr))+(d-g),k=C-(Te+(d=C-Te))+(d-g),T=W-(A+(d=W-A))+(d-w),P=h-(v+(d=h-v))+(d-w),N===0&&T===0&&k===0&&P===0)||(L=c*S+i*Math.abs(y),(y+=nr*P+v*N-(A*k+Te*T))>=L||-y>=L))return y;d=(xe=(Q=N-(K=(I=134217729*N)-(I-N)))*(te=v-(Z=(I=134217729*v)-(I-v)))-((pe=N*v)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=T-(K=(I=134217729*T)-(I-T)))*(te=Te-(Z=(I=134217729*Te)-(I-Te)))-((rr=T*Te)-K*Z-Q*Z-K*te))),_[0]=xe-(ne+d)+(d-Re),d=(je=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=je-rr),_[1]=je-(ne+d)+(d-rr),d=(ge=le+ne)-le,_[2]=le-(ge-d)+(ne-d),_[3]=ge;const G=o(4,f,4,_,l);d=(xe=(Q=nr-(K=(I=134217729*nr)-(I-nr)))*(te=P-(Z=(I=134217729*P)-(I-P)))-((pe=nr*P)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=A-(K=(I=134217729*A)-(I-A)))*(te=k-(Z=(I=134217729*k)-(I-k)))-((rr=A*k)-K*Z-Q*Z-K*te))),_[0]=xe-(ne+d)+(d-Re),d=(je=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=je-rr),_[1]=je-(ne+d)+(d-rr),d=(ge=le+ne)-le,_[2]=le-(ge-d)+(ne-d),_[3]=ge;const J=o(G,l,4,_,p);d=(xe=(Q=N-(K=(I=134217729*N)-(I-N)))*(te=P-(Z=(I=134217729*P)-(I-P)))-((pe=N*P)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=T-(K=(I=134217729*T)-(I-T)))*(te=k-(Z=(I=134217729*k)-(I-k)))-((rr=T*k)-K*Z-Q*Z-K*te))),_[0]=xe-(ne+d)+(d-Re),d=(je=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=je-rr),_[1]=je-(ne+d)+(d-rr),d=(ge=le+ne)-le,_[2]=le-(ge-d)+(ne-d),_[3]=ge;const Y=o(J,p,4,_,b);return b[Y-1]}(E,R,D,m,x,M,z)},t.orient2dfast=function(E,R,D,m,x,M){return(R-M)*(D-x)-(E-x)*(m-M)},Object.defineProperty(t,"__esModule",{value:!0})})})(jv,ec);var wd=vl,Uu=Wv,$v=$s,Zv=ec.orient2d;Uu.default&&(Uu=Uu.default);qv.exports=ag;Qu.default=ag;function ag(r,e,t){e=Math.max(0,e===void 0?2:e),t=t||0;var n=ny(r),i=new wd(16);i.toBBox=function(m){return{minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]}},i.compareMinX=function(m,x){return m[0]-x[0]},i.compareMinY=function(m,x){return m[1]-x[1]},i.load(r);for(var o=[],a=0,s;a<n.length;a++){var u=n[a];i.remove(u),s=Sd(u,s),o.push(s)}var c=new wd(16);for(a=0;a<o.length;a++)c.insert(zf(o[a]));for(var f=e*e,l=t*t;o.length;){var p=o.shift(),b=p.p,_=p.next.p,E=Uf(b,_);if(!(E<l)){var R=E/f;u=Qv(i,p.prev.p,b,_,p.next.next.p,R,c),u&&Math.min(Uf(u,b),Uf(u,_))<=R&&(o.push(p),o.push(Sd(u,p)),i.remove(u),c.remove(p),c.insert(zf(p)),c.insert(zf(p.next)))}}p=s;var D=[];do D.push(p.p),p=p.next;while(p!==s);return D.push(p.p),D}function Qv(r,e,t,n,i,o,a){for(var s=new Uu([],ey),u=r.data;u;){for(var c=0;c<u.children.length;c++){var f=u.children[c],l=u.leaf?qf(f,t,n):ty(t,n,f);l>o||s.push({node:f,dist:l})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),b=p.node,_=qf(b,e,t),E=qf(b,n,i);if(p.dist<_&&p.dist<E&&Ed(t,b,a)&&Ed(n,b,a))return b}u=s.pop(),u&&(u=u.node)}return null}function ey(r,e){return r.dist-e.dist}function ty(r,e,t){if(xd(r,t)||xd(e,t))return 0;var n=Tu(r[0],r[1],e[0],e[1],t.minX,t.minY,t.maxX,t.minY);if(n===0)return 0;var i=Tu(r[0],r[1],e[0],e[1],t.minX,t.minY,t.minX,t.maxY);if(i===0)return 0;var o=Tu(r[0],r[1],e[0],e[1],t.maxX,t.minY,t.maxX,t.maxY);if(o===0)return 0;var a=Tu(r[0],r[1],e[0],e[1],t.minX,t.maxY,t.maxX,t.maxY);return a===0?0:Math.min(n,i,o,a)}function xd(r,e){return r[0]>=e.minX&&r[0]<=e.maxX&&r[1]>=e.minY&&r[1]<=e.maxY}function Ed(r,e,t){for(var n=Math.min(r[0],e[0]),i=Math.min(r[1],e[1]),o=Math.max(r[0],e[0]),a=Math.max(r[1],e[1]),s=t.search({minX:n,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(ry(s[u].p,s[u].next.p,r,e))return!1;return!0}function Oa(r,e,t){return Zv(r[0],r[1],e[0],e[1],t[0],t[1])}function ry(r,e,t,n){return r!==n&&e!==t&&Oa(r,e,t)>0!=Oa(r,e,n)>0&&Oa(t,n,r)>0!=Oa(t,n,e)>0}function zf(r){var e=r.p,t=r.next.p;return r.minX=Math.min(e[0],t[0]),r.minY=Math.min(e[1],t[1]),r.maxX=Math.max(e[0],t[0]),r.maxY=Math.max(e[1],t[1]),r}function ny(r){for(var e=r[0],t=r[0],n=r[0],i=r[0],o=0;o<r.length;o++){var a=r[o];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<t[1]&&(t=a),a[1]>i[1]&&(i=a)}var s=[e,t,n,i],u=s.slice();for(o=0;o<r.length;o++)$v(r[o],s)||u.push(r[o]);return oy(u)}function Sd(r,e){var t={p:r,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(t.next=e.next,t.prev=e,e.next.prev=t,e.next=t):(t.prev=t,t.next=t),t}function Uf(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function qf(r,e,t){var n=e[0],i=e[1],o=t[0]-n,a=t[1]-i;if(o!==0||a!==0){var s=((r[0]-n)*o+(r[1]-i)*a)/(o*o+a*a);s>1?(n=t[0],i=t[1]):s>0&&(n+=o*s,i+=a*s)}return o=r[0]-n,a=r[1]-i,o*o+a*a}function Tu(r,e,t,n,i,o,a,s){var u=t-r,c=n-e,f=a-i,l=s-o,p=r-i,b=e-o,_=u*u+c*c,E=u*f+c*l,R=f*f+l*l,D=u*p+c*b,m=f*p+l*b,x=_*R-E*E,M,O,B,F,z=x,U=x;x===0?(O=0,z=1,F=m,U=R):(O=E*m-R*D,F=_*m-E*D,O<0?(O=0,F=m,U=R):O>z&&(O=z,F=m+E,U=R)),F<0?(F=0,-D<0?O=0:-D>_?O=z:(O=-D,z=_)):F>U&&(F=U,-D+E<0?O=0:-D+E>_?O=z:(O=-D+E,z=_)),M=O===0?0:O/z,B=F===0?0:F/U;var W=(1-M)*r+M*t,C=(1-M)*e+M*n,h=(1-B)*i+B*a,g=(1-B)*o+B*s,w=h-W,S=g-C;return w*w+S*S}function iy(r,e){return r[0]===e[0]?r[1]-e[1]:r[0]-e[0]}function oy(r){r.sort(iy);for(var e=[],t=0;t<r.length;t++){for(;e.length>=2&&Oa(e[e.length-2],e[e.length-1],r[t])<=0;)e.pop();e.push(r[t])}for(var n=[],i=r.length-1;i>=0;i--){for(;n.length>=2&&Oa(n[n.length-2],n[n.length-1],r[i])<=0;)n.pop();n.push(r[i])}return n.pop(),e.pop(),e.concat(n)}function ay(r,e){e===void 0&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(wo(r,function(i){t.push([i[0],i[1]])}),!t.length)return null;var n=Qu(t,e.concavity);return n.length>3?gs([n]):null}function sa(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=Ri(r),i=Bo(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&sy(n,a)===!1)return!1;o==="Polygon"&&(s=[s]);for(var u=!1,c=0;c<s.length&&!u;c++)if(Cd(n,s[c][0],t.ignoreBoundary)){for(var f=!1,l=1;l<s[c].length&&!f;)Cd(n,s[c][l],!t.ignoreBoundary)&&(f=!0),l++;f||(u=!0)}return u}function Cd(r,e,t){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1],f=r[1]*(a-u)+s*(u-r[0])+c*(r[0]-a)===0&&(a-r[0])*(u-r[0])<=0&&(s-r[1])*(c-r[1])<=0;if(f)return!t;var l=s>r[1]!=c>r[1]&&r[0]<(u-a)*(r[1]-s)/(c-s)+a;l&&(n=!n)}return n}function sy(r,e){return e[0]<=r[0]&&e[1]<=r[1]&&e[2]>=r[0]&&e[3]>=r[1]}function Mi(r,e,t){t===void 0&&(t={});var n=Ri(r),i=Ri(e),o=Tn(i[1]-n[1]),a=Tn(i[0]-n[0]),s=Tn(n[1]),u=Tn(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return Rc(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),t.units)}function uy(r){if(!r)throw new Error("geojson is required");switch(r.type){case"Feature":return sg(r);case"FeatureCollection":return cy(r);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return oh(r);default:throw new Error("unknown GeoJSON type")}}function sg(r){var e={type:"Feature"};return Object.keys(r).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:e[t]=r[t]}}),e.properties=ug(r.properties),e.geometry=oh(r.geometry),e}function ug(r){var e={};return r&&Object.keys(r).forEach(function(t){var n=r[t];typeof n=="object"?n===null?e[t]=null:Array.isArray(n)?e[t]=n.map(function(i){return i}):e[t]=ug(n):e[t]=n}),e}function cy(r){var e={type:"FeatureCollection"};return Object.keys(r).forEach(function(t){switch(t){case"type":case"features":return;default:e[t]=r[t]}}),e.features=r.features.map(function(t){return sg(t)}),e}function oh(r){var e={type:r.type};return r.bbox&&(e.bbox=r.bbox),r.type==="GeometryCollection"?(e.geometries=r.geometries.map(function(t){return oh(t)}),e):(e.coordinates=cg(r.coordinates),e)}function cg(r){var e=r;return typeof e[0]!="object"?e.slice():e.map(function(t){return cg(t)})}function fy(r){var e=r[0],t=r[1],n=r[2],i=r[3],o=Mi(r.slice(0,2),[n,t]),a=Mi(r.slice(0,2),[e,i]);if(o>=a){var s=(t+i)/2;return[e,s-(n-e)/2,n,s+(n-e)/2]}else{var u=(e+n)/2;return[u-(i-t)/2,t,u+(i-t)/2,i]}}function yl(r,e,t,n){n===void 0&&(n={});var i=Ri(r),o=Tn(i[0]),a=Tn(i[1]),s=Tn(t),u=yu(e,n.units),c=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s)),f=o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(c)),l=Ys(f),p=Ys(c);return Yt([l,p],n.properties)}function Mo(r,e,t){if(t===void 0&&(t={}),t.final===!0)return ly(r,e);var n=Ri(r),i=Ri(e),o=Tn(n[0]),a=Tn(i[0]),s=Tn(n[1]),u=Tn(i[1]),c=Math.sin(a-o)*Math.cos(u),f=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return Ys(Math.atan2(c,f))}function ly(r,e){var t=Mo(e,r);return t=(t+180)%360,t}function _l(r,e){e===void 0&&(e={});var t=ui(r),n=(t[0]+t[2])/2,i=(t[1]+t[3])/2;return Yt([n,i],e.properties,e)}function bl(r){if(!r)throw new Error("geojson is required");var e=[];return Ca(r,function(t){hy(t,e)}),kr(e)}function hy(r,e){var t=[],n=r.geometry;if(n!==null){switch(n.type){case"Polygon":t=oi(n);break;case"LineString":t=[oi(n)]}t.forEach(function(i){var o=dy(i,r.properties);o.forEach(function(a){a.id=e.length,e.push(a)})})}}function dy(r,e){var t=[];return r.reduce(function(n,i){var o=Br([n,i],e);return o.bbox=py(n,i),t.push(o),i}),t}function py(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],a=t<i?t:i,s=n<o?n:o,u=t>i?t:i,c=n>o?n:o;return[a,s,u,c]}var za={},gy={get exports(){return za},set exports(r){za=r}},wl={},my={get exports(){return wl},set exports(r){wl=r}};(function(r,e){(function(t,n){r.exports=n()})(uo,function(){function t(m,x,M,O,B){(function F(z,U,W,C,h){for(;C>W;){if(C-W>600){var g=C-W+1,w=U-W+1,S=Math.log(g),N=.5*Math.exp(2*S/3),T=.5*Math.sqrt(S*N*(g-N)/g)*(w-g/2<0?-1:1),k=Math.max(W,Math.floor(U-w*N/g+T)),P=Math.min(C,Math.floor(U+(g-w)*N/g+T));F(z,U,k,P,h)}var d=z[U],I=W,K=C;for(n(z,W,U),h(z[C],d)>0&&n(z,W,C);I<K;){for(n(z,I,K),I++,K--;h(z[I],d)<0;)I++;for(;h(z[K],d)>0;)K--}h(z[W],d)===0?n(z,W,K):n(z,++K,C),K<=U&&(W=K+1),U<=K&&(C=K-1)}})(m,x,M||0,O||m.length-1,B||i)}function n(m,x,M){var O=m[x];m[x]=m[M],m[M]=O}function i(m,x){return m<x?-1:m>x?1:0}var o=function(m){m===void 0&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(m,x,M){if(!M)return x.indexOf(m);for(var O=0;O<x.length;O++)if(M(m,x[O]))return O;return-1}function s(m,x){u(m,0,m.children.length,x,m)}function u(m,x,M,O,B){B||(B=R(null)),B.minX=1/0,B.minY=1/0,B.maxX=-1/0,B.maxY=-1/0;for(var F=x;F<M;F++){var z=m.children[F];c(B,m.leaf?O(z):z)}return B}function c(m,x){return m.minX=Math.min(m.minX,x.minX),m.minY=Math.min(m.minY,x.minY),m.maxX=Math.max(m.maxX,x.maxX),m.maxY=Math.max(m.maxY,x.maxY),m}function f(m,x){return m.minX-x.minX}function l(m,x){return m.minY-x.minY}function p(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function b(m){return m.maxX-m.minX+(m.maxY-m.minY)}function _(m,x){return m.minX<=x.minX&&m.minY<=x.minY&&x.maxX<=m.maxX&&x.maxY<=m.maxY}function E(m,x){return x.minX<=m.maxX&&x.minY<=m.maxY&&x.maxX>=m.minX&&x.maxY>=m.minY}function R(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(m,x,M,O,B){for(var F=[x,M];F.length;)if(!((M=F.pop())-(x=F.pop())<=O)){var z=x+Math.ceil((M-x)/O/2)*O;t(m,z,x,M,B),F.push(x,z,z,M)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(m){var x=this.data,M=[];if(!E(m,x))return M;for(var O=this.toBBox,B=[];x;){for(var F=0;F<x.children.length;F++){var z=x.children[F],U=x.leaf?O(z):z;E(m,U)&&(x.leaf?M.push(z):_(m,U)?this._all(z,M):B.push(z))}x=B.pop()}return M},o.prototype.collides=function(m){var x=this.data;if(!E(m,x))return!1;for(var M=[];x;){for(var O=0;O<x.children.length;O++){var B=x.children[O],F=x.leaf?this.toBBox(B):B;if(E(m,F)){if(x.leaf||_(m,F))return!0;M.push(B)}}x=M.pop()}return!1},o.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var x=0;x<m.length;x++)this.insert(m[x]);return this}var M=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var O=this.data;this.data=M,M=O}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this},o.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},o.prototype.clear=function(){return this.data=R([]),this},o.prototype.remove=function(m,x){if(!m)return this;for(var M,O,B,F=this.data,z=this.toBBox(m),U=[],W=[];F||U.length;){if(F||(F=U.pop(),O=U[U.length-1],M=W.pop(),B=!0),F.leaf){var C=a(m,F.children,x);if(C!==-1)return F.children.splice(C,1),U.push(F),this._condense(U),this}B||F.leaf||!_(F,z)?O?(M++,F=O.children[M],B=!1):F=null:(U.push(F),W.push(M),M=0,O=F,F=F.children[0])}return this},o.prototype.toBBox=function(m){return m},o.prototype.compareMinX=function(m,x){return m.minX-x.minX},o.prototype.compareMinY=function(m,x){return m.minY-x.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(m){return this.data=m,this},o.prototype._all=function(m,x){for(var M=[];m;)m.leaf?x.push.apply(x,m.children):M.push.apply(M,m.children),m=M.pop();return x},o.prototype._build=function(m,x,M,O){var B,F=M-x+1,z=this._maxEntries;if(F<=z)return s(B=R(m.slice(x,M+1)),this.toBBox),B;O||(O=Math.ceil(Math.log(F)/Math.log(z)),z=Math.ceil(F/Math.pow(z,O-1))),(B=R([])).leaf=!1,B.height=O;var U=Math.ceil(F/z),W=U*Math.ceil(Math.sqrt(z));D(m,x,M,W,this.compareMinX);for(var C=x;C<=M;C+=W){var h=Math.min(C+W-1,M);D(m,C,h,U,this.compareMinY);for(var g=C;g<=h;g+=U){var w=Math.min(g+U-1,h);B.children.push(this._build(m,g,w,O-1))}}return s(B,this.toBBox),B},o.prototype._chooseSubtree=function(m,x,M,O){for(;O.push(x),!x.leaf&&O.length-1!==M;){for(var B=1/0,F=1/0,z=void 0,U=0;U<x.children.length;U++){var W=x.children[U],C=p(W),h=(g=m,w=W,(Math.max(w.maxX,g.maxX)-Math.min(w.minX,g.minX))*(Math.max(w.maxY,g.maxY)-Math.min(w.minY,g.minY))-C);h<F?(F=h,B=C<B?C:B,z=W):h===F&&C<B&&(B=C,z=W)}x=z||x.children[0]}var g,w;return x},o.prototype._insert=function(m,x,M){var O=M?m:this.toBBox(m),B=[],F=this._chooseSubtree(O,this.data,x,B);for(F.children.push(m),c(F,O);x>=0&&B[x].children.length>this._maxEntries;)this._split(B,x),x--;this._adjustParentBBoxes(O,B,x)},o.prototype._split=function(m,x){var M=m[x],O=M.children.length,B=this._minEntries;this._chooseSplitAxis(M,B,O);var F=this._chooseSplitIndex(M,B,O),z=R(M.children.splice(F,M.children.length-F));z.height=M.height,z.leaf=M.leaf,s(M,this.toBBox),s(z,this.toBBox),x?m[x-1].children.push(z):this._splitRoot(M,z)},o.prototype._splitRoot=function(m,x){this.data=R([m,x]),this.data.height=m.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(m,x,M){for(var O,B,F,z,U,W,C,h=1/0,g=1/0,w=x;w<=M-x;w++){var S=u(m,0,w,this.toBBox),N=u(m,w,M,this.toBBox),T=(B=S,F=N,z=void 0,U=void 0,W=void 0,C=void 0,z=Math.max(B.minX,F.minX),U=Math.max(B.minY,F.minY),W=Math.min(B.maxX,F.maxX),C=Math.min(B.maxY,F.maxY),Math.max(0,W-z)*Math.max(0,C-U)),k=p(S)+p(N);T<h?(h=T,O=w,g=k<g?k:g):T===h&&k<g&&(g=k,O=w)}return O||M-x},o.prototype._chooseSplitAxis=function(m,x,M){var O=m.leaf?this.compareMinX:f,B=m.leaf?this.compareMinY:l;this._allDistMargin(m,x,M,O)<this._allDistMargin(m,x,M,B)&&m.children.sort(O)},o.prototype._allDistMargin=function(m,x,M,O){m.children.sort(O);for(var B=this.toBBox,F=u(m,0,x,B),z=u(m,M-x,M,B),U=b(F)+b(z),W=x;W<M-x;W++){var C=m.children[W];c(F,m.leaf?B(C):C),U+=b(F)}for(var h=M-x-1;h>=x;h--){var g=m.children[h];c(z,m.leaf?B(g):g),U+=b(z)}return U},o.prototype._adjustParentBBoxes=function(m,x,M){for(var O=M;O>=0;O--)c(x[O],m)},o.prototype._condense=function(m){for(var x=m.length-1,M=void 0;x>=0;x--)m[x].children.length===0?x>0?(M=m[x-1].children).splice(M.indexOf(m[x]),1):this.clear():s(m[x],this.toBBox)},o})})(my);const vy=vu(Lv),yy=vu(zv),_y=vu(Uv);var wi=wl,fg=vy,lg=yy,Ra=_y.default,by=lg.featureEach;lg.coordEach;fg.polygon;var Id=fg.featureCollection;function hg(r){var e=new wi(r);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Ra(t),wi.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Ra(i),n.push(i)}):by(t,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Ra(i),n.push(i)}),wi.prototype.load.call(this,n)},e.remove=function(t,n){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Ra(t),wi.prototype.remove.call(this,t,n)},e.clear=function(){return wi.prototype.clear.call(this)},e.search=function(t){var n=wi.prototype.search.call(this,this.toBBox(t));return Id(n)},e.collides=function(t){return wi.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=wi.prototype.all.call(this);return Id(t)},e.toJSON=function(){return wi.prototype.toJSON.call(this)},e.fromJSON=function(t){return wi.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var n;if(t.bbox)n=t.bbox;else if(Array.isArray(t)&&t.length===4)n=t;else if(Array.isArray(t)&&t.length===6)n=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")n=Ra(t);else if(t.type==="FeatureCollection")n=Ra(t);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},e}gy.exports=hg;za.default=hg;function tc(r,e){var t={},n=[];if(r.type==="LineString"&&(r=fn(r)),e.type==="LineString"&&(e=fn(e)),r.type==="Feature"&&e.type==="Feature"&&r.geometry!==null&&e.geometry!==null&&r.geometry.type==="LineString"&&e.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=Ad(r,e);return i&&n.push(i),kr(n)}var o=za();return o.load(bl(e)),Do(bl(r),function(a){Do(o.search(a),function(s){var u=Ad(a,s);if(u){var c=oi(u).join(",");t[c]||(t[c]=!0,n.push(u))}})}),kr(n)}function Ad(r,e){var t=oi(r),n=oi(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=t[0][0],o=t[0][1],a=t[1][0],s=t[1][1],u=n[0][0],c=n[0][1],f=n[1][0],l=n[1][1],p=(l-c)*(a-i)-(f-u)*(s-o),b=(f-u)*(o-c)-(l-c)*(i-u),_=(a-i)*(o-c)-(s-o)*(i-u);if(p===0)return b===0&&_===0,null;var E=b/p,R=_/p;if(E>=0&&E<=1&&R>=0&&R<=1){var D=i+E*(a-i),m=o+E*(s-o);return Yt([D,m])}return null}function rc(r,e,t){t===void 0&&(t={});var n=Yt([1/0,1/0],{dist:1/0}),i=0;return Ca(r,function(o){for(var a=oi(o),s=0;s<a.length-1;s++){var u=Yt(a[s]);u.properties.dist=Mi(e,u,t);var c=Yt(a[s+1]);c.properties.dist=Mi(e,c,t);var f=Mi(u,c,t),l=Math.max(u.properties.dist,c.properties.dist),p=Mo(u,c),b=yl(e,l,p+90,t),_=yl(e,l,p-90,t),E=tc(Br([b.geometry.coordinates,_.geometry.coordinates]),Br([u.geometry.coordinates,c.geometry.coordinates])),R=null;E.features.length>0&&(R=E.features[0],R.properties.dist=Mi(e,R,t),R.properties.location=i+Mi(u,R,t)),u.properties.dist<n.properties.dist&&(n=u,n.properties.index=s,n.properties.location=i),c.properties.dist<n.properties.dist&&(n=c,n.properties.index=s+1,n.properties.location=i+f),R&&R.properties.dist<n.properties.dist&&(n=R,n.properties.index=s),i+=f}}),n}var Md=6378137;function Nd(r){return eg(r,function(e,t){return e+wy(t)},0)}function wy(r){var e=0,t;switch(r.type){case"Polygon":return Pd(r.coordinates);case"MultiPolygon":for(t=0;t<r.coordinates.length;t++)e+=Pd(r.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Pd(r){var e=0;if(r&&r.length>0){e+=Math.abs(Ld(r[0]));for(var t=1;t<r.length;t++)e-=Math.abs(Ld(r[t]))}return e}function Ld(r){var e,t,n,i,o,a,s,u=0,c=r.length;if(c>2){for(s=0;s<c;s++)s===c-2?(i=c-2,o=c-1,a=0):s===c-1?(i=c-1,o=0,a=1):(i=s,o=s+1,a=s+2),e=r[i],t=r[o],n=r[a],u+=(Hf(n[0])-Hf(e[0]))*Math.sin(Hf(t[1]));u=u*Md*Md/2}return u}function Hf(r){return r*Math.PI/180}function xy(r,e,t){t===void 0&&(t={});for(var n=Bo(r),i=n.coordinates,o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++)if(o>=e){var s=e-o;if(s){var u=Mo(i[a],i[a-1])-180,c=yl(i[a],s,u,t);return c}else return Yt(i[a])}else o+=Mi(i[a],i[a+1],t);return Yt(i[i.length-1])}function Rd(r,e){return e===void 0&&(e={}),rg(r,function(t,n){var i=n.geometry.coordinates;return t+Mi(i[0],i[1],e)},0)}function Ey(r,e,t){var n=oi(t);if(ml(t)!=="LineString")throw new Error("line must be a LineString");var i=rc(t,r),o=rc(t,e),a;i.properties.index<=o.properties.index?a=[i,o]:a=[o,i];for(var s=[a[0].geometry.coordinates],u=a[0].properties.index+1;u<a[1].properties.index+1;u++)s.push(n[u]);return s.push(a[1].geometry.coordinates),Br(s,t.properties)}function nc(r,e,t){t===void 0&&(t={});for(var n=Ri(r),i=oi(e),o=0;o<i.length-1;o++){var a=!1;if(t.ignoreEndVertices&&(o===0&&(a="start"),o===i.length-2&&(a="end"),o===0&&o+1===i.length-1&&(a="both")),Sy(i[o],i[o+1],n,a,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}function Sy(r,e,t,n,i){var o=t[0],a=t[1],s=r[0],u=r[1],c=e[0],f=e[1],l=t[0]-s,p=t[1]-u,b=c-s,_=f-u,E=l*_-p*b;if(i!==null){if(Math.abs(E)>i)return!1}else if(E!==0)return!1;if(n){if(n==="start")return Math.abs(b)>=Math.abs(_)?b>0?s<o&&o<=c:c<=o&&o<s:_>0?u<a&&a<=f:f<=a&&a<u;if(n==="end")return Math.abs(b)>=Math.abs(_)?b>0?s<=o&&o<c:c<o&&o<=s:_>0?u<=a&&a<f:f<a&&a<=u;if(n==="both")return Math.abs(b)>=Math.abs(_)?b>0?s<o&&o<c:c<o&&o<s:_>0?u<a&&a<f:f<a&&a<u}else return Math.abs(b)>=Math.abs(_)?b>0?s<=o&&o<=c:c<=o&&o<=s:_>0?u<=a&&a<=f:f<=a&&a<=u;return!1}function Cy(r,e){var t=Bo(r),n=Bo(e),i=t.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return Iy(t,n);case"LineString":return nc(t,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return sa(t,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return Ay(t,n);case"LineString":return My(t,n);case"Polygon":case"MultiPolygon":return Ny(t,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return Py(t,n);case"Polygon":case"MultiPolygon":return Ly(t,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return Ry(t,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Iy(r,e){var t,n=!1;for(t=0;t<e.coordinates.length;t++)if(pg(e.coordinates[t],r.coordinates)){n=!0;break}return n}function Ay(r,e){for(var t=0;t<r.coordinates.length;t++){for(var n=!1,i=0;i<e.coordinates.length;i++)pg(r.coordinates[t],e.coordinates[i])&&(n=!0);if(!n)return!1}return!0}function My(r,e){for(var t=!1,n=0;n<r.coordinates.length;n++){if(!nc(r.coordinates[n],e))return!1;t||(t=nc(r.coordinates[n],e,{ignoreEndVertices:!0}))}return t}function Ny(r,e){for(var t=!0,n=!1,i=0;i<r.coordinates.length;i++){if(n=sa(r.coordinates[1],e),!n){t=!1;break}n=sa(r.coordinates[1],e,{ignoreBoundary:!0})}return t&&n}function Py(r,e){for(var t=0;t<r.coordinates.length;t++)if(!nc(r.coordinates[t],e))return!1;return!0}function Ly(r,e){var t=ui(e),n=ui(r);if(!dg(t,n))return!1;for(var i=!1,o=0;o<r.coordinates.length-1;o++){if(!sa(r.coordinates[o],e))return!1;if(i||(i=sa(r.coordinates[o],e,{ignoreBoundary:!0})),!i){var a=Ty(r.coordinates[o],r.coordinates[o+1]);i=sa(a,e,{ignoreBoundary:!0})}}return i}function Ry(r,e){var t=ui(r),n=ui(e);if(!dg(n,t))return!1;for(var i=0;i<r.coordinates[0].length;i++)if(!sa(r.coordinates[0][i],e))return!1;return!0}function dg(r,e){return!(r[0]>e[0]||r[2]<e[2]||r[1]>e[1]||r[3]<e[3])}function pg(r,e){return r[0]===e[0]&&r[1]===e[1]}function Ty(r,e){return[(r[0]+e[0])/2,(r[1]+e[1])/2]}function Oy(r,e){e===void 0&&(e={});var t=e.precision,n=e.coordinates,i=e.mutate;if(t=t==null||isNaN(t)?6:t,n=n==null||isNaN(n)?3:n,!r)throw new Error("<geojson> is required");if(typeof t!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(i===!1||i===void 0)&&(r=JSON.parse(JSON.stringify(r)));var o=Math.pow(10,t);return wo(r,function(a){Dy(a,o,n)}),r}function Dy(r,e,t){r.length>t&&r.splice(t,r.length);for(var n=0;n<r.length;n++)r[n]=Math.round(r[n]*e)/e;return r}function By(r,e){if(!r)throw new Error("line is required");if(!e)throw new Error("splitter is required");var t=ml(r),n=ml(e);if(t!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=Oy(e,{precision:7});switch(n){case"Point":return xl(r,i);case"MultiPoint":return Td(r,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Td(r,tc(r,i))}}function Td(r,e){var t=[],n=za();return Ca(e,function(i){if(t.forEach(function(s,u){s.id=u}),!t.length)t=xl(r,i).features,t.forEach(function(s){s.bbox||(s.bbox=fy(ui(s)))}),n.load(kr(t));else{var o=n.search(i);if(o.features.length){var a=gg(i,o);t=t.filter(function(s){return s.id!==a.id}),n.remove(a),Do(xl(a,i),function(s){t.push(s),n.insert(s)})}}}),kr(t)}function xl(r,e){var t=[],n=oi(r)[0],i=oi(r)[r.geometry.coordinates.length-1];if(Gf(n,Ri(e))||Gf(i,Ri(e)))return kr([r]);var o=za(),a=bl(r);o.load(a);var s=o.search(e);if(!s.features.length)return kr([r]);var u=gg(e,s),c=[n],f=Qp(a,function(l,p,b){var _=oi(p)[1],E=Ri(e);return b===u.id?(l.push(E),t.push(Br(l)),Gf(E,_)?[E]:[E,_]):(l.push(_),l)},c);return f.length>1&&t.push(Br(f)),kr(t)}function gg(r,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var t,n=1/0;return Do(e,function(i){var o=rc(i,r),a=o.properties.dist;a<n&&(t=i,n=a)}),t}function Gf(r,e){return r[0]===e[0]&&r[1]===e[1]}function ky(r,e){return e===void 0&&(e={}),Fy(r,"wgs84",e)}function Fy(r,e,t){t===void 0&&(t={}),t=t||{};var n=t.mutate;if(!r)throw new Error("geojson is required");return Array.isArray(r)&&js(r[0])?r=e==="mercator"?Od(r):Dd(r):(n!==!0&&(r=uy(r)),wo(r,function(i){var o=e==="mercator"?Od(i):Dd(i);i[0]=o[0],i[1]=o[1]})),r}function Od(r){var e=Math.PI/180,t=6378137,n=20037508342789244e-9,i=Math.abs(r[0])<=180?r[0]:r[0]-zy(r[0])*360,o=[t*i*e,t*Math.log(Math.tan(Math.PI*.25+.5*r[1]*e))];return o[0]>n&&(o[0]=n),o[0]<-n&&(o[0]=-n),o[1]>n&&(o[1]=n),o[1]<-n&&(o[1]=-n),o}function Dd(r){var e=180/Math.PI,t=6378137;return[r[0]*e/t,(Math.PI*.5-2*Math.atan(Math.exp(-r[1]/t)))*e]}function zy(r){return r<0?-1:r>0?1:0}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Uy(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(f){return u([c,f])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ko=function(){function r(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return r}();function qy(r,e){return r>e?1:r<e?-1:0}function No(r,e,t){for(var n=new ko(null,null),i=n,o=n;;){var a=t(r,e.key);if(a<0){if(e.left===null)break;if(t(r,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,e.left===null)break}o.left=e,o=e,e=e.left}else if(a>0){if(e.right===null)break;if(t(r,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function Vf(r,e,t,n){var i=new ko(r,e);if(t===null)return i.left=i.right=null,i;t=No(r,t,n);var o=n(r,t.key);return o<0?(i.left=t.left,i.right=t,t.left=null):o>=0&&(i.right=t.right,i.left=t,t.right=null),i}function Bd(r,e,t){var n=null,i=null;if(e){e=No(r,e,t);var o=t(e.key,r);o===0?(n=e.left,i=e.right):o<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function Hy(r,e,t){return e===null?r:(r===null||(e=No(r.key,e,t),e.left=r),e)}function El(r,e,t,n,i){if(r){n(""+e+(t?"└── ":"├── ")+i(r)+`
`);var o=e+(t?"    ":"│   ");r.left&&El(r.left,o,!1,n,i),r.right&&El(r.right,o,!0,n,i)}}var ah=function(){function r(e){e===void 0&&(e=qy),this._root=null,this._size=0,this._comparator=e}return r.prototype.insert=function(e,t){return this._size++,this._root=Vf(e,t,this._root,this._comparator)},r.prototype.add=function(e,t){var n=new ko(e,t);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,o=No(e,this._root,i),a=i(e,o.key);return a===0?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},r.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},r.prototype._remove=function(e,t,n){var i;if(t===null)return null;t=No(e,t,n);var o=n(e,t.key);return o===0?(t.left===null?i=t.right:(i=No(e,t.left,n),i.right=t.right),this._size--,i):t},r.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=No(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},r.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(i===0)return t;i<0?t=t.left:t=t.right}return null},r.prototype.find=function(e){return this._root&&(this._root=No(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},r.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(i===0)return!0;i<0?t=t.left:t=t.right}return!1},r.prototype.forEach=function(e,t){for(var n=this._root,i=[],o=!1;!o;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),e.call(t,n),n=n.right):o=!0;return this},r.prototype.range=function(e,t,n,i){for(var o=[],a=this._comparator,s=this._root,u;o.length!==0||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),u=a(s.key,t),u>0)break;if(a(s.key,e)>=0&&n.call(i,s))return this;s=s.right}return this},r.prototype.keys=function(){var e=[];return this.forEach(function(t){var n=t.key;return e.push(n)}),e},r.prototype.values=function(){var e=[];return this.forEach(function(t){var n=t.data;return e.push(n)}),e},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},r.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},r.prototype.at=function(e){for(var t=this._root,n=!1,i=0,o=[];!n;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),i===e)return t;i++,t=t.right}else n=!0;return null},r.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var i=this._comparator;t;){var o=i(e.key,t.key);if(o===0)break;o<0?(n=t,t=t.left):t=t.right}return n},r.prototype.prev=function(e){var t=this._root,n=null;if(e.left!==null){for(n=e.left;n.right;)n=n.right;return n}for(var i=this._comparator;t;){var o=i(e.key,t.key);if(o===0)break;o<0?t=t.left:(n=t,t=t.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return Vy(this._root)},r.prototype.load=function(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!1);var i=e.length,o=this._comparator;if(n&&Il(e,t,0,i-1,o),this._root===null)this._root=Sl(e,t,0,i),this._size=i;else{var a=Ky(this.toList(),Gy(e,t),o);i=this._size+i,this._root=Cl({head:a},0,i)}return this},r.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(e){e===void 0&&(e=function(n){return String(n.key)});var t=[];return El(this._root,"",!0,function(n){return t.push(n)},e),t.join("")},r.prototype.update=function(e,t,n){var i=this._comparator,o=Bd(e,this._root,i),a=o.left,s=o.right;i(e,t)<0?s=Vf(t,n,s,i):a=Vf(t,n,a,i),this._root=Hy(a,s,i)},r.prototype.split=function(e){return Bd(e,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var e;return Uy(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},r}();function Sl(r,e,t,n){var i=n-t;if(i>0){var o=t+Math.floor(i/2),a=r[o],s=e[o],u=new ko(a,s);return u.left=Sl(r,e,t,o),u.right=Sl(r,e,o+1,n),u}return null}function Gy(r,e){for(var t=new ko(null,null),n=t,i=0;i<r.length;i++)n=n.next=new ko(r[i],e[i]);return n.next=null,t.next}function Vy(r){for(var e=r,t=[],n=!1,i=new ko(null,null),o=i;!n;)e?(t.push(e),e=e.left):t.length>0?(e=o=o.next=t.pop(),e=e.right):n=!0;return o.next=null,i.next}function Cl(r,e,t){var n=t-e;if(n>0){var i=e+Math.floor(n/2),o=Cl(r,e,i),a=r.head;return a.left=o,r.head=r.head.next,a.right=Cl(r,i+1,t),a}return null}function Ky(r,e,t){for(var n=new ko(null,null),i=n,o=r,a=e;o!==null&&a!==null;)t(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return o!==null?i.next=o:a!==null&&(i.next=a),n.next}function Il(r,e,t,n,i){if(!(t>=n)){for(var o=r[t+n>>1],a=t-1,s=n+1;;){do a++;while(i(r[a],o)<0);do s--;while(i(r[s],o)>0);if(a>=s)break;var u=r[a];r[a]=r[s],r[s]=u,u=e[a],e[a]=e[s],e[s]=u}Il(r,e,t,s,i),Il(r,e,s+1,n,i)}}function jn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function kd(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function zr(r,e,t){return e&&kd(r.prototype,e),t&&kd(r,t),r}var Rs=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},Al=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,i=e.ur.x<t.ur.x?e.ur.x:t.ur.x,o=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:a}}},Lo=Number.EPSILON;Lo===void 0&&(Lo=Math.pow(2,-52));var Wy=Lo*Lo,Ml=function(e,t){if(-Lo<e&&e<Lo&&-Lo<t&&t<Lo)return 0;var n=e-t;return n*n<Wy*e*t?0:e<t?-1:1},Jy=function(){function r(){jn(this,r),this.reset()}return zr(r,[{key:"reset",value:function(){this.xRounder=new Fd,this.yRounder=new Fd}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),r}(),Fd=function(){function r(){jn(this,r),this.tree=new ah,this.round(0)}return zr(r,[{key:"round",value:function(t){var n=this.tree.add(t),i=this.tree.prev(n);if(i!==null&&Ml(n.key,i.key)===0)return this.tree.remove(t),i.key;var o=this.tree.next(n);return o!==null&&Ml(n.key,o.key)===0?(this.tree.remove(t),o.key):t}}]),r}(),Zs=new Jy,Gs=function(e,t){return e.x*t.y-e.y*t.x},mg=function(e,t){return e.x*t.x+e.y*t.y},zd=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y},a=Gs(i,o);return Ml(a,0)},ic=function(e){return Math.sqrt(mg(e,e))},Xy=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return Gs(o,i)/ic(o)/ic(i)},Yy=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return mg(o,i)/ic(o)/ic(i)},Ud=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},qd=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},jy=function(e,t,n,i){if(t.x===0)return qd(n,i,e.x);if(i.x===0)return qd(e,t,n.x);if(t.y===0)return Ud(n,i,e.y);if(i.y===0)return Ud(e,t,n.y);var o=Gs(t,i);if(o==0)return null;var a={x:n.x-e.x,y:n.y-e.y},s=Gs(a,t)/o,u=Gs(a,i)/o,c=e.x+u*t.x,f=n.x+s*i.x,l=e.y+u*t.y,p=n.y+s*i.y,b=(c+f)/2,_=(l+p)/2;return{x:b,y:_}},Ii=function(){zr(r,null,[{key:"compare",value:function(t,n){var i=r.comparePoints(t.point,n.point);return i!==0?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:oc.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function r(e,t){jn(this,r),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return zr(r,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,i=0,o=n.length;i<o;i++){var a=n[i];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var o=n+1;o<t;o++){var a=this.point.events[o];a.consumedBy===void 0&&i.otherSE.point.events===a.otherSE.point.events&&i.segment.consume(a.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,i=this.point.events.length;n<i;n++){var o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&t.push(o)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,i=new Map,o=function(s){var u=s.otherSE;i.set(s,{sine:Xy(n.point,t.point,u.point),cosine:Yy(n.point,t.point,u.point)})};return function(a,s){i.has(a)||o(a),i.has(s)||o(s);var u=i.get(a),c=u.sine,f=u.cosine,l=i.get(s),p=l.sine,b=l.cosine;return c>=0&&p>=0?f<b?1:f>b?-1:0:c<0&&p<0?f<b?-1:f>b?1:0:p<c?-1:p>c?1:0}}}]),r}(),$y=0,oc=function(){zr(r,null,[{key:"compare",value:function(t,n){var i=t.leftSE.point.x,o=n.leftSE.point.x,a=t.rightSE.point.x,s=n.rightSE.point.x;if(s<i)return 1;if(a<o)return-1;var u=t.leftSE.point.y,c=n.leftSE.point.y,f=t.rightSE.point.y,l=n.rightSE.point.y;if(i<o){if(c<u&&c<f)return 1;if(c>u&&c>f)return-1;var p=t.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;var b=n.comparePoint(t.rightSE.point);return b!==0?b:-1}if(i>o){if(u<c&&u<l)return-1;if(u>c&&u>l)return 1;var _=n.comparePoint(t.leftSE.point);if(_!==0)return _;var E=t.comparePoint(n.rightSE.point);return E<0?1:E>0?-1:1}if(u<c)return-1;if(u>c)return 1;if(a<s){var R=n.comparePoint(t.rightSE.point);if(R!==0)return R}if(a>s){var D=t.comparePoint(n.rightSE.point);if(D<0)return 1;if(D>0)return-1}if(a!==s){var m=f-u,x=a-i,M=l-c,O=s-o;if(m>x&&M<O)return 1;if(m<x&&M>O)return-1}return a>s?1:a<s||f<l?-1:f>l?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function r(e,t,n,i){jn(this,r),this.id=++$y,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=i}return zr(r,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(n.x===i.x)return t.x===n.x?0:t.x<n.x?1:-1;var a=(t.y-n.y)/o.y,s=n.x+a*o.x;if(t.x===s)return 0;var u=(t.x-n.x)/o.x,c=n.y+u*o.y;return t.y===c?0:t.y<c?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),i=t.bbox(),o=Al(n,i);if(o===null)return null;var a=this.leftSE.point,s=this.rightSE.point,u=t.leftSE.point,c=t.rightSE.point,f=Rs(n,u)&&this.comparePoint(u)===0,l=Rs(i,a)&&t.comparePoint(a)===0,p=Rs(n,c)&&this.comparePoint(c)===0,b=Rs(i,s)&&t.comparePoint(s)===0;if(l&&f)return b&&!p?s:!b&&p?c:null;if(l)return p&&a.x===c.x&&a.y===c.y?null:a;if(f)return b&&s.x===u.x&&s.y===u.y?null:u;if(b&&p)return null;if(b)return s;if(p)return c;var _=jy(a,this.vector(),u,t.vector());return _===null||!Rs(o,_)?null:Zs.round(_.x,_.y)}},{key:"split",value:function(t){var n=[],i=t.events!==void 0,o=new Ii(t,!0),a=new Ii(t,!1),s=this.rightSE;this.replaceRightSE(a),n.push(a),n.push(o);var u=new r(o,s,this.rings.slice(),this.windings.slice());return Ii.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),Ii.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),a.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,i=t;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=r.compare(n,i);if(o!==0){if(o>0){var a=n;n=i,i=a}if(n.prev===i){var s=n;n=i,i=s}for(var u=0,c=i.rings.length;u<c;u++){var f=i.rings[u],l=i.windings[u],p=n.rings.indexOf(f);p===-1?(n.rings.push(f),n.windings.push(l)):n.windings[p]+=l}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,a=0,s=this.rings.length;a<s;a++){var u=this.rings[a],c=this.windings[a],f=n.indexOf(u);f===-1?(n.push(u),i.push(c)):i[f]+=c}for(var l=[],p=[],b=0,_=n.length;b<_;b++)if(i[b]!==0){var E=n[b],R=E.poly;if(p.indexOf(R)===-1)if(E.isExterior)l.push(R);else{p.indexOf(R)===-1&&p.push(R);var D=l.indexOf(E.poly);D!==-1&&l.splice(D,1)}}for(var m=0,x=l.length;m<x;m++){var M=l[m].multiPoly;o.indexOf(M)===-1&&o.push(M)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ii.type){case"union":{var i=t.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{var a,s;t.length<n.length?(a=t.length,s=n.length):(a=n.length,s=t.length),this._isInResult=s===ii.numMultiPolys&&a<s;break}case"xor":{var u=Math.abs(t.length-n.length);this._isInResult=u%2===1;break}case"difference":{var c=function(l){return l.length===1&&l[0].isSubject};this._isInResult=c(t)!==c(n);break}default:throw new Error("Unrecognized operation type found ".concat(ii.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,i){var o,a,s,u=Ii.comparePoints(t,n);if(u<0)o=t,a=n,s=1;else if(u>0)o=n,a=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var c=new Ii(o,!0),f=new Ii(a,!1);return new r(c,f,[i],[s])}}]),r}(),Hd=function(){function r(e,t,n){if(jn(this,r),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Zs.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=e.length;a<s;a++){if(typeof e[a][0]!="number"||typeof e[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Zs.round(e[a][0],e[a][1]);u.x===o.x&&u.y===o.y||(this.segments.push(oc.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(oc.fromRing(o,i,this))}return zr(r,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,i=this.segments.length;n<i;n++){var o=this.segments[n];t.push(o.leftSE),t.push(o.rightSE)}return t}}]),r}(),Zy=function(){function r(e,t){if(jn(this,r),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Hd(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=e.length;n<i;n++){var o=new Hd(e[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=t}return zr(r,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var o=this.interiorRings[n].getSweepEvents(),a=0,s=o.length;a<s;a++)t.push(o[a]);return t}}]),r}(),Gd=function(){function r(e,t){if(jn(this,r),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=e.length;n<i;n++){var o=new Zy(e[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=t}return zr(r,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,i=this.polys.length;n<i;n++)for(var o=this.polys[n].getSweepEvents(),a=0,s=o.length;a<s;a++)t.push(o[a]);return t}}]),r}(),Qy=function(){zr(r,null,[{key:"factory",value:function(t){for(var n=[],i=0,o=t.length;i<o;i++){var a=t[i];if(!(!a.isInResult()||a.ringOut)){for(var s=null,u=a.leftSE,c=a.rightSE,f=[u],l=u.point,p=[];s=u,u=c,f.push(u),u.point!==l;)for(;;){var b=u.getAvailableLinkedEvents();if(b.length===0){var _=f[0].point,E=f[f.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_.x,",")+" ".concat(_.y,"]. Last matching segment found ends at")+" [".concat(E.x,", ").concat(E.y,"]."))}if(b.length===1){c=b[0].otherSE;break}for(var R=null,D=0,m=p.length;D<m;D++)if(p[D].point===u.point){R=D;break}if(R!==null){var x=p.splice(R)[0],M=f.splice(x.index);M.unshift(M[0].otherSE),n.push(new r(M.reverse()));continue}p.push({index:f.length,point:u.point});var O=u.getLeftmostComparator(s);c=b.sort(O)[0].otherSE;break}n.push(new r(f))}}return n}}]);function r(e){jn(this,r),this.events=e;for(var t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}return zr(r,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],i=1,o=this.events.length-1;i<o;i++){var a=this.events[i].point,s=this.events[i+1].point;zd(a,t,s)!==0&&(n.push(a),t=a)}if(n.length===1)return null;var u=n[0],c=n[1];zd(u,t,c)===0&&n.shift(),n.push(n[0]);for(var f=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:n.length-1,p=this.isExteriorRing()?n.length:-1,b=[],_=l;_!=p;_+=f)b.push([n[_].x,n[_].y]);return b}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,i=this.events.length;n<i;n++){var o=this.events[n];Ii.compare(t,o)>0&&(t=o)}for(var a=t.segment.prevInResult(),s=a?a.prevInResult():null;;){if(!a)return null;if(!s)return a.ringOut;if(s.ringOut!==a.ringOut)return s.ringOut.enclosingRing()!==a.ringOut?a.ringOut:a.ringOut.enclosingRing();a=s.prevInResult(),s=a?a.prevInResult():null}}}]),r}(),Vd=function(){function r(e){jn(this,r),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return zr(r,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var o=this.interiorRings[n].getGeom();o!==null&&t.push(o)}return t}}]),r}(),e_=function(){function r(e){jn(this,r),this.rings=e,this.polys=this._composePolys(e)}return zr(r,[{key:"getGeom",value:function(){for(var t=[],n=0,i=this.polys.length;n<i;n++){var o=this.polys[n].getGeom();o!==null&&t.push(o)}return t}},{key:"_composePolys",value:function(t){for(var n=[],i=0,o=t.length;i<o;i++){var a=t[i];if(!a.poly)if(a.isExteriorRing())n.push(new Vd(a));else{var s=a.enclosingRing();s.poly||n.push(new Vd(s)),s.poly.addInterior(a)}}return n}}]),r}(),t_=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oc.compare;jn(this,r),this.queue=e,this.tree=new ah(t),this.segments=[]}return zr(r,[{key:"process",value:function(t){var n=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),i;var o=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!o)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var a=o,s=o,u=void 0,c=void 0;u===void 0;)a=this.tree.prev(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);for(;c===void 0;)s=this.tree.next(s),s===null?c=null:s.key.consumedBy===void 0&&(c=s.key);if(t.isLeft){var f=null;if(u){var l=u.getIntersection(n);if(l!==null&&(n.isAnEndpoint(l)||(f=l),!u.isAnEndpoint(l)))for(var p=this._splitSafely(u,l),b=0,_=p.length;b<_;b++)i.push(p[b])}var E=null;if(c){var R=c.getIntersection(n);if(R!==null&&(n.isAnEndpoint(R)||(E=R),!c.isAnEndpoint(R)))for(var D=this._splitSafely(c,R),m=0,x=D.length;m<x;m++)i.push(D[m])}if(f!==null||E!==null){var M=null;if(f===null)M=E;else if(E===null)M=f;else{var O=Ii.comparePoints(f,E);M=O<=0?f:E}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var B=n.split(M),F=0,z=B.length;F<z;F++)i.push(B[F])}i.length>0?(this.tree.remove(n),i.push(t)):(this.segments.push(n),n.prev=u)}else{if(u&&c){var U=u.getIntersection(c);if(U!==null){if(!u.isAnEndpoint(U))for(var W=this._splitSafely(u,U),C=0,h=W.length;C<h;C++)i.push(W[C]);if(!c.isAnEndpoint(U))for(var g=this._splitSafely(c,U),w=0,S=g.length;w<S;w++)i.push(g[w])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var o=t.split(n);return o.push(i),t.consumedBy===void 0&&this.tree.insert(t),o}}]),r}(),Kd=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,r_=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,n_=function(){function r(){jn(this,r)}return zr(r,[{key:"run",value:function(t,n,i){ii.type=t,Zs.reset();for(var o=[new Gd(n,!0)],a=0,s=i.length;a<s;a++)o.push(new Gd(i[a],!1));if(ii.numMultiPolys=o.length,ii.type==="difference")for(var u=o[0],c=1;c<o.length;)Al(o[c].bbox,u.bbox)!==null?c++:o.splice(c,1);if(ii.type==="intersection"){for(var f=0,l=o.length;f<l;f++)for(var p=o[f],b=f+1,_=o.length;b<_;b++)if(Al(p.bbox,o[b].bbox)===null)return[]}for(var E=new ah(Ii.compare),R=0,D=o.length;R<D;R++)for(var m=o[R].getSweepEvents(),x=0,M=m.length;x<M;x++)if(E.insert(m[x]),E.size>Kd)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var O=new t_(E),B=E.size,F=E.pop();F;){var z=F.key;if(E.size===B){var U=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(U.id," ")+"[".concat(U.leftSE.point.x,", ").concat(U.leftSE.point.y,"] -> ")+"[".concat(U.rightSE.point.x,", ").concat(U.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(E.size>Kd)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(O.segments.length>r_)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var W=O.process(z),C=0,h=W.length;C<h;C++){var g=W[C];g.consumedBy===void 0&&E.insert(g)}B=E.size,F=E.pop()}Zs.reset();var w=Qy.factory(O.segments),S=new e_(w);return S.getGeom()}}]),r}(),ii=new n_,i_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ii.run("union",e,n)},o_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ii.run("intersection",e,n)},a_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ii.run("xor",e,n)},s_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ii.run("difference",e,n)},u_={union:i_,intersection:o_,xor:a_,difference:s_};const vg=u_;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(o=o<0?Math.max(n+arguments[2],0):Math.min(o,n);i<o;)t[i]=e,++i;return t},writable:!0});Number.isFinite=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)};Number.isInteger=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(r){return r!==r};Math.trunc=Math.trunc||function(r){return r<0?Math.ceil(r):Math.floor(r)};var fa=function(){};fa.prototype.interfaces_=function(){return[]};fa.prototype.getClass=function(){return fa};fa.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var qe=function(r){function e(t){r.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=new r().stack}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Error),ue=function(){},yg={MAX_VALUE:{configurable:!0}};ue.isNaN=function(e){return Number.isNaN(e)};ue.doubleToLongBits=function(e){return e};ue.longBitsToDouble=function(e){return e};ue.isInfinite=function(e){return!Number.isFinite(e)};yg.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(ue,yg);var nn=function(){},Tc=function(){},Ua=function(){};function on(){}var q=function r(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=r.NULL_ORDINATE;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=r.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Ia={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};q.prototype.setOrdinate=function(e,t){switch(e){case q.X:this.x=t;break;case q.Y:this.y=t;break;case q.Z:this.z=t;break;default:throw new qe("Invalid ordinate index: "+e)}};q.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!fa.equalsWithTolerance(this.x,t.x,n)||!fa.equalsWithTolerance(this.y,t.y,n))}};q.prototype.getOrdinate=function(e){switch(e){case q.X:return this.x;case q.Y:return this.y;case q.Z:return this.z}throw new qe("Invalid ordinate index: "+e)};q.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||ue.isNaN(this.z))&&ue.isNaN(e.z)};q.prototype.equals=function(e){return e instanceof q?this.equals2D(e):!1};q.prototype.equalInZ=function(e,t){return fa.equalsWithTolerance(this.z,e.z,t)};q.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};q.prototype.clone=function(){};q.prototype.copy=function(){return new q(this)};q.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};q.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return Math.sqrt(t*t+n*n+i*i)};q.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};q.prototype.hashCode=function(){var e=17;return e=37*e+q.hashCode(this.x),e=37*e+q.hashCode(this.y),e};q.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};q.prototype.interfaces_=function(){return[nn,Tc,on]};q.prototype.getClass=function(){return q};q.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=ue.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Ia.DimensionalComparator.get=function(){return ro};Ia.serialVersionUID.get=function(){return 6683108902428367e3};Ia.NULL_ORDINATE.get=function(){return ue.NaN};Ia.X.get=function(){return 0};Ia.Y.get=function(){return 1};Ia.Z.get=function(){return 2};Object.defineProperties(q,Ia);var ro=function(e){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new qe("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}};ro.prototype.compare=function(e,t){var n=e,i=t,o=ro.compare(n.x,i.x);if(o!==0)return o;var a=ro.compare(n.y,i.y);if(a!==0)return a;if(this._dimensionsToTest<=2)return 0;var s=ro.compare(n.z,i.z);return s};ro.prototype.interfaces_=function(){return[Ua]};ro.prototype.getClass=function(){return ro};ro.compare=function(e,t){return e<t?-1:e>t?1:ue.isNaN(e)?ue.isNaN(t)?0:-1:ue.isNaN(t)?1:0};var qa=function(){};qa.prototype.create=function(){};qa.prototype.interfaces_=function(){return[]};qa.prototype.getClass=function(){return qa};var H=function(){},bu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};H.prototype.interfaces_=function(){return[]};H.prototype.getClass=function(){return H};H.toLocationSymbol=function(e){switch(e){case H.EXTERIOR:return"e";case H.BOUNDARY:return"b";case H.INTERIOR:return"i";case H.NONE:return"-"}throw new qe("Unknown location value: "+e)};bu.INTERIOR.get=function(){return 0};bu.BOUNDARY.get=function(){return 1};bu.EXTERIOR.get=function(){return 2};bu.NONE.get=function(){return-1};Object.defineProperties(H,bu);var ae=function(r,e){return r.interfaces_&&r.interfaces_().indexOf(e)>-1},Ur=function(){},_g={LOG_10:{configurable:!0}};Ur.prototype.interfaces_=function(){return[]};Ur.prototype.getClass=function(){return Ur};Ur.log10=function(e){var t=Math.log(e);return ue.isInfinite(t)||ue.isNaN(t)?t:t/Ur.LOG_10};Ur.min=function(e,t,n,i){var o=e;return t<o&&(o=t),n<o&&(o=n),i<o&&(o=i),o};Ur.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],a=arguments[2];return i<o?o:i>a?a:i}};Ur.wrap=function(e,t){return e<0?t- -e%t:e%t};Ur.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],i=e;return t>i&&(i=t),n>i&&(i=n),i}else if(arguments.length===4){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3],c=o;return a>c&&(c=a),s>c&&(c=s),u>c&&(c=u),c}};Ur.average=function(e,t){return(e+t)/2};_g.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(Ur,_g);var $n=function(e){this.str=e};$n.prototype.append=function(e){this.str+=e};$n.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};$n.prototype.toString=function(e){return this.str};var kn=function(e){this.value=e};kn.prototype.intValue=function(){return this.value};kn.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};kn.isNaN=function(e){return Number.isNaN(e)};var Qs=function(){};Qs.isWhitespace=function(e){return e<=32&&e>=0||e===127};Qs.toUpperCase=function(e){return e.toUpperCase()};var V=function r(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof r){var t=arguments[0];this.init(t)}else if(typeof arguments[0]=="string"){var n=arguments[0];r.call(this,r.parse(n))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},bn={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};V.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};V.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),i=V.magnitude(n._hi),o=V.TEN.pow(i);n=n.divide(o),n.gt(V.TEN)?(n=n.divide(V.TEN),i+=1):n.lt(V.ONE)&&(n=n.multiply(V.TEN),i-=1);for(var a=i+1,s=new $n,u=V.MAX_PRINT_DIGITS-1,c=0;c<=u;c++){e&&c===a&&s.append(".");var f=Math.trunc(n._hi);if(f<0)break;var l=!1,p=0;f>9?(l=!0,p="9"):p="0"+f,s.append(p),n=n.subtract(V.valueOf(f)).multiply(V.TEN),l&&n.selfAdd(V.TEN);var b=!0,_=V.magnitude(n._hi);if(_<0&&Math.abs(_)>=u-c&&(b=!1),!b)break}return t[0]=i,s.toString()};V.prototype.sqr=function(){return this.multiply(this)};V.prototype.doubleValue=function(){return this._hi+this._lo};V.prototype.subtract=function(){if(arguments[0]instanceof V){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};V.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};V.prototype.isZero=function(){return this._hi===0&&this._lo===0};V.prototype.selfSubtract=function(){if(arguments[0]instanceof V){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};V.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};V.prototype.min=function(e){return this.le(e)?this:e};V.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof V){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,a=null,s=null,u=null,c=null,f=null,l=null,p=null;return c=this._hi/n,f=V.SPLIT*c,o=f-c,p=V.SPLIT*n,o=f-o,a=c-o,s=p-n,l=c*n,s=p-s,u=n-s,p=o*s-l+o*u+a*s+a*u,f=(this._hi-l-p+this._lo-c*i)/n,p=c+f,this._hi=p,this._lo=c-p+f,this}};V.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};V.prototype.divide=function(){if(arguments[0]instanceof V){var e=arguments[0],t=null,n=null,i=null,o=null,a=null,s=null,u=null,c=null;a=this._hi/e._hi,s=V.SPLIT*a,t=s-a,c=V.SPLIT*e._hi,t=s-t,n=a-t,i=c-e._hi,u=a*e._hi,i=c-i,o=e._hi-i,c=t*i-u+t*o+n*i+n*o,s=(this._hi-u-c+this._lo-a*e._lo)/e._hi,c=a+s;var f=c,l=a-c+s;return new V(f,l)}else if(typeof arguments[0]=="number"){var p=arguments[0];return ue.isNaN(p)?V.createNaN():V.copy(this).selfDivide(p,0)}};V.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};V.prototype.pow=function(e){if(e===0)return V.valueOf(1);var t=new V(this),n=V.valueOf(1),i=Math.abs(e);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(t),i/=2,i>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};V.prototype.ceil=function(){if(this.isNaN())return V.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new V(e,t)};V.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};V.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};V.prototype.setValue=function(){if(arguments[0]instanceof V){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};V.prototype.max=function(e){return this.ge(e)?this:e};V.prototype.sqrt=function(){if(this.isZero())return V.valueOf(0);if(this.isNegative())return V.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=V.valueOf(t),i=this.subtract(n.sqr()),o=i._hi*(e*.5);return n.add(o)};V.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof V){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,i=null,o=null,a=null,s=null,u=null;return o=this._hi+t,s=o-this._hi,a=o-s,a=t-s+(this._hi-a),u=a+this._lo,n=o+u,i=u+(o-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(arguments.length===2){var c=arguments[0],f=arguments[1],l=null,p=null,b=null,_=null,E=null,R=null,D=null,m=null;E=this._hi+c,b=this._lo+f,D=E-this._hi,m=b-this._lo,R=E-D,_=b-m,R=c-D+(this._hi-R),_=f-m+(this._lo-_),D=R+b,l=E+D,p=D+(E-l),D=_+p;var x=l+D,M=D+(l-x);return this._hi=x,this._lo=M,this}};V.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof V){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,a=null,s=null,u=null,c=null,f=null;c=V.SPLIT*this._hi,o=c-this._hi,f=V.SPLIT*n,o=c-o,a=this._hi-o,s=f-n,c=this._hi*n,s=f-s,u=n-s,f=o*s-c+o*u+a*s+a*u+(this._hi*i+this._lo*n);var l=c+f;o=c-l;var p=f+o;return this._hi=l,this._lo=p,this}};V.prototype.selfSqr=function(){return this.selfMultiply(this)};V.prototype.floor=function(){if(this.isNaN())return V.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new V(e,t)};V.prototype.negate=function(){return this.isNaN()?this:new V(-this._hi,-this._lo)};V.prototype.clone=function(){};V.prototype.multiply=function(){if(arguments[0]instanceof V){var e=arguments[0];return e.isNaN()?V.createNaN():V.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return ue.isNaN(t)?V.createNaN():V.copy(this).selfMultiply(t,0)}};V.prototype.isNaN=function(){return ue.isNaN(this._hi)};V.prototype.intValue=function(){return Math.trunc(this._hi)};V.prototype.toString=function(){var e=V.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};V.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),i=t[0]+1,o=n;if(n.charAt(0)===".")o="0"+n;else if(i<0)o="0."+V.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var a=i-n.length,s=V.stringOfChar("0",a);o=n+s+".0"}return this.isNegative()?"-"+o:o};V.prototype.reciprocal=function(){var e=null,t=null,n=null,i=null,o=null,a=null,s=null,u=null;o=1/this._hi,a=V.SPLIT*o,e=a-o,u=V.SPLIT*this._hi,e=a-e,t=o-e,n=u-this._hi,s=o*this._hi,n=u-n,i=this._hi-n,u=e*n-s+e*i+t*n+t*i,a=(1-s-u-o*this._lo)/this._hi;var c=o+a,f=o-c+a;return new V(c,f)};V.prototype.toSciNotation=function(){if(this.isZero())return V.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),i=V.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var o="";n.length>1&&(o=n.substring(1));var a=n.charAt(0)+"."+o;return this.isNegative()?"-"+a+i:a+i};V.prototype.abs=function(){return this.isNaN()?V.NaN:this.isNegative()?this.negate():new V(this)};V.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};V.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};V.prototype.add=function(){if(arguments[0]instanceof V){var e=arguments[0];return V.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return V.copy(this).selfAdd(t)}};V.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof V){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}};V.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};V.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};V.prototype.trunc=function(){return this.isNaN()?V.NaN:this.isPositive()?this.floor():this.ceil()};V.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};V.prototype.interfaces_=function(){return[on,nn,Tc]};V.prototype.getClass=function(){return V};V.sqr=function(e){return V.valueOf(e).selfMultiply(e)};V.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return V.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new V(t)}};V.sqrt=function(e){return V.valueOf(e).sqrt()};V.parse=function(e){for(var t=0,n=e.length;Qs.isWhitespace(e.charAt(t));)t++;var i=!1;if(t<n){var o=e.charAt(t);(o==="-"||o==="+")&&(t++,o==="-"&&(i=!0))}for(var a=new V,s=0,u=0,c=0;!(t>=n);){var f=e.charAt(t);if(t++,Qs.isDigit(f)){var l=f-"0";a.selfMultiply(V.TEN),a.selfAdd(l),s++;continue}if(f==="."){u=s;continue}if(f==="e"||f==="E"){var p=e.substring(t);try{c=kn.parseInt(p)}catch(D){throw D instanceof Error?new Error("Invalid exponent "+p+" in string "+e):D}finally{}break}throw new Error("Unexpected character '"+f+"' at position "+t+" in string "+e)}var b=a,_=s-u-c;if(_===0)b=a;else if(_>0){var E=V.TEN.pow(_);b=a.divide(E)}else if(_<0){var R=V.TEN.pow(-_);b=a.multiply(R)}return i?b.negate():b};V.createNaN=function(){return new V(ue.NaN,ue.NaN)};V.copy=function(e){return new V(e)};V.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),i=Math.trunc(Math.floor(n)),o=Math.pow(10,i);return o*10<=t&&(i+=1),i};V.stringOfChar=function(e,t){for(var n=new $n,i=0;i<t;i++)n.append(e);return n.toString()};bn.PI.get=function(){return new V(3.141592653589793,12246467991473532e-32)};bn.TWO_PI.get=function(){return new V(6.283185307179586,24492935982947064e-32)};bn.PI_2.get=function(){return new V(1.5707963267948966,6123233995736766e-32)};bn.E.get=function(){return new V(2.718281828459045,14456468917292502e-32)};bn.NaN.get=function(){return new V(ue.NaN,ue.NaN)};bn.EPS.get=function(){return 123259516440783e-46};bn.SPLIT.get=function(){return 134217729};bn.MAX_PRINT_DIGITS.get=function(){return 32};bn.TEN.get=function(){return V.valueOf(10)};bn.ONE.get=function(){return V.valueOf(1)};bn.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};bn.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(V,bn);var wr=function(){},bg={DP_SAFE_EPSILON:{configurable:!0}};wr.prototype.interfaces_=function(){return[]};wr.prototype.getClass=function(){return wr};wr.orientationIndex=function(e,t,n){var i=wr.orientationIndexFilter(e,t,n);if(i<=1)return i;var o=V.valueOf(t.x).selfAdd(-e.x),a=V.valueOf(t.y).selfAdd(-e.y),s=V.valueOf(n.x).selfAdd(-t.x),u=V.valueOf(n.y).selfAdd(-t.y);return o.selfMultiply(u).selfSubtract(a.selfMultiply(s)).signum()};wr.signOfDet2x2=function(e,t,n,i){var o=e.multiply(i).selfSubtract(t.multiply(n));return o.signum()};wr.intersection=function(e,t,n,i){var o=V.valueOf(i.y).selfSubtract(n.y).selfMultiply(V.valueOf(t.x).selfSubtract(e.x)),a=V.valueOf(i.x).selfSubtract(n.x).selfMultiply(V.valueOf(t.y).selfSubtract(e.y)),s=o.subtract(a),u=V.valueOf(i.x).selfSubtract(n.x).selfMultiply(V.valueOf(e.y).selfSubtract(n.y)),c=V.valueOf(i.y).selfSubtract(n.y).selfMultiply(V.valueOf(e.x).selfSubtract(n.x)),f=u.subtract(c),l=f.selfDivide(s).doubleValue(),p=V.valueOf(e.x).selfAdd(V.valueOf(t.x).selfSubtract(e.x).selfMultiply(l)).doubleValue(),b=V.valueOf(t.x).selfSubtract(e.x).selfMultiply(V.valueOf(e.y).selfSubtract(n.y)),_=V.valueOf(t.y).selfSubtract(e.y).selfMultiply(V.valueOf(e.x).selfSubtract(n.x)),E=b.subtract(_),R=E.selfDivide(s).doubleValue(),D=V.valueOf(n.y).selfAdd(V.valueOf(i.y).selfSubtract(n.y).selfMultiply(R)).doubleValue();return new q(p,D)};wr.orientationIndexFilter=function(e,t,n){var i=null,o=(e.x-n.x)*(t.y-n.y),a=(e.y-n.y)*(t.x-n.x),s=o-a;if(o>0){if(a<=0)return wr.signum(s);i=o+a}else if(o<0){if(a>=0)return wr.signum(s);i=-o-a}else return wr.signum(s);var u=wr.DP_SAFE_EPSILON*i;return s>=u||-s>=u?wr.signum(s):2};wr.signum=function(e){return e>0?1:e<0?-1:0};bg.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(wr,bg);var we=function(){},wu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};wu.X.get=function(){return 0};wu.Y.get=function(){return 1};wu.Z.get=function(){return 2};wu.M.get=function(){return 3};we.prototype.setOrdinate=function(e,t,n){};we.prototype.size=function(){};we.prototype.getOrdinate=function(e,t){};we.prototype.getCoordinate=function(){};we.prototype.getCoordinateCopy=function(e){};we.prototype.getDimension=function(){};we.prototype.getX=function(e){};we.prototype.clone=function(){};we.prototype.expandEnvelope=function(e){};we.prototype.copy=function(){};we.prototype.getY=function(e){};we.prototype.toCoordinateArray=function(){};we.prototype.interfaces_=function(){return[Tc]};we.prototype.getClass=function(){return we};Object.defineProperties(we,wu);var wg=function(){},ms=function(r){function e(){r.call(this,"Projective point not representable on the Cartesian plane.")}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wg),Vt=function(){};Vt.arraycopy=function(e,t,n,i,o){for(var a=0,s=t;s<t+o;s++)n[i+a]=e[s],a++};Vt.getProperty=function(e){return{"line.separator":`
`}[e]};var un=function r(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];this.x=t,this.y=n,this.w=1}else if(arguments[0]instanceof r&&arguments[1]instanceof r){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof q&&arguments[1]instanceof q){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(arguments.length===3){var u=arguments[0],c=arguments[1],f=arguments[2];this.x=u,this.y=c,this.w=f}else if(arguments.length===4){var l=arguments[0],p=arguments[1],b=arguments[2],_=arguments[3],E=l.y-p.y,R=p.x-l.x,D=l.x*p.y-p.x*l.y,m=b.y-_.y,x=_.x-b.x,M=b.x*_.y-_.x*b.y;this.x=R*M-x*D,this.y=m*D-E*M,this.w=E*x-m*R}};un.prototype.getY=function(){var e=this.y/this.w;if(ue.isNaN(e)||ue.isInfinite(e))throw new ms;return e};un.prototype.getX=function(){var e=this.x/this.w;if(ue.isNaN(e)||ue.isInfinite(e))throw new ms;return e};un.prototype.getCoordinate=function(){var e=new q;return e.x=this.getX(),e.y=this.getY(),e};un.prototype.interfaces_=function(){return[]};un.prototype.getClass=function(){return un};un.intersection=function(e,t,n,i){var o=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,u=n.y-i.y,c=i.x-n.x,f=n.x*i.y-i.x*n.y,l=a*f-c*s,p=u*s-o*f,b=o*c-u*a,_=l/b,E=p/b;if(ue.isNaN(_)||ue.isInfinite(_)||ue.isNaN(E)||ue.isInfinite(E))throw new ms;return new q(_,E)};var re=function r(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof r){var t=arguments[0];this.init(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},xg={serialVersionUID:{configurable:!0}};re.prototype.getArea=function(){return this.getWidth()*this.getHeight()};re.prototype.equals=function(e){if(!(e instanceof re))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};re.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new re;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,i=this._maxx<e._maxx?this._maxx:e._maxx,o=this._maxy<e._maxy?this._maxy:e._maxy;return new re(t,i,n,o)};re.prototype.isNull=function(){return this._maxx<this._minx};re.prototype.getMaxX=function(){return this._maxx};re.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof re){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}};re.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof re){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof q){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}};re.prototype.getMinY=function(){return this._miny};re.prototype.getMinX=function(){return this._minx};re.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof re){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};re.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};re.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};re.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};re.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};re.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};re.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};re.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};re.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};re.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};re.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof re){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof q){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.covers(n,i)}};re.prototype.centre=function(){return this.isNull()?null:new q((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};re.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof re){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];o<a?(this._minx=o,this._maxx=a):(this._minx=a,this._maxx=o),s<u?(this._miny=s,this._maxy=u):(this._miny=u,this._maxy=s)}};re.prototype.getMaxY=function(){return this._maxy};re.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};re.prototype.hashCode=function(){var e=17;return e=37*e+q.hashCode(this._minx),e=37*e+q.hashCode(this._maxx),e=37*e+q.hashCode(this._miny),e=37*e+q.hashCode(this._maxy),e};re.prototype.interfaces_=function(){return[nn,on]};re.prototype.getClass=function(){return re};re.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=Math.min(a.x,s.x),c=Math.max(a.x,s.x),f=Math.min(i.x,o.x),l=Math.max(i.x,o.x);return!(f>c||l<u||(u=Math.min(a.y,s.y),c=Math.max(a.y,s.y),f=Math.min(i.y,o.y),l=Math.max(i.y,o.y),f>c)||l<u)}};xg.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(re,xg);var Cn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Oc=function(e){this.geometryFactory=e||new me};Oc.prototype.read=function(e){var t,n,i;e=e.replace(/[\n\r]/g," ");var o=Cn.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(o=Cn.emptyTypeStr.exec(e),o[2]=void 0),o&&(n=o[1].toLowerCase(),i=o[2],Da[n]&&(t=Da[n].apply(this,[i]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};Oc.prototype.write=function(e){return this.extractGeometry(e)};Oc.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Si[t])return null;var n=t.toUpperCase(),i;return e.isEmpty()?i=n+" EMPTY":i=n+"("+Si[t].apply(this,[e])+")",i};var Si={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Si.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push("("+Si.point.apply(t,[e._geometries[i]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],i=0,o=e._points._coordinates.length;i<o;++i)n.push(Si.coordinate.apply(t,[e._points._coordinates[i]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],i=0,o=e._points._coordinates.length;i<o;++i)n.push(Si.coordinate.apply(t,[e._points._coordinates[i]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push("("+Si.linestring.apply(t,[e._geometries[i]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+Si.linestring.apply(this,[e._shell])+")");for(var i=0,o=e._holes.length;i<o;++i)n.push("("+Si.linestring.apply(t,[e._holes[i]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push("("+Si.polygon.apply(t,[e._geometries[i]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push(t.extractGeometry(e._geometries[i]));return n.join(",")}},Da={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(Cn.spaces);return this.geometryFactory.createPoint(new q(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,i=e.trim().split(","),o=[],a=0,s=i.length;a<s;++a)n=i[a].replace(Cn.trimParens,"$1"),o.push(Da.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(o)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],i,o=0,a=t.length;o<a;++o)i=t[o].trim().split(Cn.spaces),n.push(new q(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],i,o=0,a=t.length;o<a;++o)i=t[o].trim().split(Cn.spaces),n.push(new q(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,i=e.trim().split(Cn.parenComma),o=[],a=0,s=i.length;a<s;++a)n=i[a].replace(Cn.trimParens,"$1"),o.push(Da.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(o)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,i,o,a=e.trim().split(Cn.parenComma),s,u=[],c=0,f=a.length;c<f;++c)n=a[c].replace(Cn.trimParens,"$1"),i=Da.linestring.apply(t,[n]),o=t.geometryFactory.createLinearRing(i._points),c===0?s=o:u.push(o);return this.geometryFactory.createPolygon(s,u)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,i=e.trim().split(Cn.doubleParenComma),o=[],a=0,s=i.length;a<s;++a)n=i[a].replace(Cn.trimParens,"$1"),o.push(Da.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),i=[],o=0,a=n.length;o<a;++o)i.push(t.read(n[o]));return this.geometryFactory.createGeometryCollection(i)}},ln=function(e){this.parser=new Oc(e)};ln.prototype.write=function(e){return this.parser.write(e)};ln.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var ki=function(r){function e(t){r.call(this,t),this.name="RuntimeException",this.message=t,this.stack=new r().stack}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Error),ac=function(r){function e(){if(r.call(this),arguments.length===0)r.call(this);else if(arguments.length===1){var t=arguments[0];r.call(this,t)}}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ki),he=function(){};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.shouldNeverReachHere=function(){if(arguments.length===0)he.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new ac("Should never reach here"+(e!==null?": "+e:""))}};he.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],he.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new ac:new ac(t)};he.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],he.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new ac("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var Ve=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new q,this._intPt[1]=new q,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Aa={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ve.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};Ve.prototype.getTopologySummary=function(){var e=new $n;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};Ve.prototype.computeIntersection=function(e,t,n,i){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(e,t,n,i)};Ve.prototype.getIntersectionNum=function(){return this._result};Ve.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};Ve.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};Ve.prototype.setPrecisionModel=function(e){this._precisionModel=e};Ve.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};Ve.prototype.getIntersection=function(e){return this._intPt[e]};Ve.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};Ve.prototype.hasIntersection=function(){return this._result!==Ve.NO_INTERSECTION};Ve.prototype.getEdgeDistance=function(e,t){var n=Ve.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};Ve.prototype.isCollinear=function(){return this._result===Ve.COLLINEAR_INTERSECTION};Ve.prototype.toString=function(){return ln.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+ln.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};Ve.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};Ve.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};Ve.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};Ve.prototype.interfaces_=function(){return[]};Ve.prototype.getClass=function(){return Ve};Ve.computeEdgeDistance=function(e,t,n){var i=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y),a=-1;if(e.equals(t))a=0;else if(e.equals(n))i>o?a=i:a=o;else{var s=Math.abs(e.x-t.x),u=Math.abs(e.y-t.y);i>o?a=s:a=u,a===0&&!e.equals(t)&&(a=Math.max(s,u))}return he.isTrue(!(a===0&&!e.equals(t)),"Bad distance calculation"),a};Ve.nonRobustComputeEdgeDistance=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o);return he.isTrue(!(a===0&&!e.equals(t)),"Invalid distance calculation"),a};Aa.DONT_INTERSECT.get=function(){return 0};Aa.DO_INTERSECT.get=function(){return 1};Aa.COLLINEAR.get=function(){return 2};Aa.NO_INTERSECTION.get=function(){return 0};Aa.POINT_INTERSECTION.get=function(){return 1};Aa.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(Ve,Aa);var $o=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(n){var i=new re(this._inputLines[0][0],this._inputLines[0][1]),o=new re(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(n)&&o.contains(n)},e.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,re.intersects(i,o,n)&&ee.orientationIndex(i,o,n)===0&&ee.orientationIndex(o,i,n)===0)return this._isProper=!0,(n.equals(i)||n.equals(o))&&(this._isProper=!1),this._result=r.POINT_INTERSECTION,null;this._result=r.NO_INTERSECTION}else return r.prototype.computeIntersection.apply(this,arguments)},e.prototype.normalizeToMinimum=function(n,i,o,a,s){s.x=this.smallestInAbsValue(n.x,i.x,o.x,a.x),s.y=this.smallestInAbsValue(n.y,i.y,o.y,a.y),n.x-=s.x,n.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y,a.x-=s.x,a.y-=s.y},e.prototype.safeHCoordinateIntersection=function(n,i,o,a){var s=null;try{s=un.intersection(n,i,o,a)}catch(u){if(u instanceof ms)s=e.nearestEndpoint(n,i,o,a);else throw u}finally{}return s},e.prototype.intersection=function(n,i,o,a){var s=this.intersectionWithNormalization(n,i,o,a);return this.isInSegmentEnvelopes(s)||(s=new q(e.nearestEndpoint(n,i,o,a))),this._precisionModel!==null&&this._precisionModel.makePrecise(s),s},e.prototype.smallestInAbsValue=function(n,i,o,a){var s=n,u=Math.abs(s);return Math.abs(i)<u&&(s=i,u=Math.abs(i)),Math.abs(o)<u&&(s=o,u=Math.abs(o)),Math.abs(a)<u&&(s=a),s},e.prototype.checkDD=function(n,i,o,a,s){var u=wr.intersection(n,i,o,a),c=this.isInSegmentEnvelopes(u);Vt.out.println("DD in env = "+c+"  --------------------- "+u),s.distance(u)>1e-4&&Vt.out.println("Distance = "+s.distance(u))},e.prototype.intersectionWithNormalization=function(n,i,o,a){var s=new q(n),u=new q(i),c=new q(o),f=new q(a),l=new q;this.normalizeToEnvCentre(s,u,c,f,l);var p=this.safeHCoordinateIntersection(s,u,c,f);return p.x+=l.x,p.y+=l.y,p},e.prototype.computeCollinearIntersection=function(n,i,o,a){var s=re.intersects(n,i,o),u=re.intersects(n,i,a),c=re.intersects(o,a,n),f=re.intersects(o,a,i);return s&&u?(this._intPt[0]=o,this._intPt[1]=a,r.COLLINEAR_INTERSECTION):c&&f?(this._intPt[0]=n,this._intPt[1]=i,r.COLLINEAR_INTERSECTION):s&&c?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!u&&!f?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):s&&f?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!u&&!c?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):u&&c?(this._intPt[0]=a,this._intPt[1]=n,a.equals(n)&&!s&&!f?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):u&&f?(this._intPt[0]=a,this._intPt[1]=i,a.equals(i)&&!s&&!c?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):r.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(n,i,o,a,s){var u=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,f=n.x>i.x?n.x:i.x,l=n.y>i.y?n.y:i.y,p=o.x<a.x?o.x:a.x,b=o.y<a.y?o.y:a.y,_=o.x>a.x?o.x:a.x,E=o.y>a.y?o.y:a.y,R=u>p?u:p,D=f<_?f:_,m=c>b?c:b,x=l<E?l:E,M=(R+D)/2,O=(m+x)/2;s.x=M,s.y=O,n.x-=s.x,n.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y,a.x-=s.x,a.y-=s.y},e.prototype.computeIntersect=function(n,i,o,a){if(this._isProper=!1,!re.intersects(n,i,o,a))return r.NO_INTERSECTION;var s=ee.orientationIndex(n,i,o),u=ee.orientationIndex(n,i,a);if(s>0&&u>0||s<0&&u<0)return r.NO_INTERSECTION;var c=ee.orientationIndex(o,a,n),f=ee.orientationIndex(o,a,i);if(c>0&&f>0||c<0&&f<0)return r.NO_INTERSECTION;var l=s===0&&u===0&&c===0&&f===0;return l?this.computeCollinearIntersection(n,i,o,a):(s===0||u===0||c===0||f===0?(this._isProper=!1,n.equals2D(o)||n.equals2D(a)?this._intPt[0]=n:i.equals2D(o)||i.equals2D(a)?this._intPt[0]=i:s===0?this._intPt[0]=new q(o):u===0?this._intPt[0]=new q(a):c===0?this._intPt[0]=new q(n):f===0&&(this._intPt[0]=new q(i))):(this._isProper=!0,this._intPt[0]=this.intersection(n,i,o,a)),r.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(n,i,o,a){var s=n,u=ee.distancePointLine(n,o,a),c=ee.distancePointLine(i,o,a);return c<u&&(u=c,s=i),c=ee.distancePointLine(o,n,i),c<u&&(u=c,s=o),c=ee.distancePointLine(a,n,i),c<u&&(u=c,s=a),s},e}(Ve),la=function(){};la.prototype.interfaces_=function(){return[]};la.prototype.getClass=function(){return la};la.orientationIndex=function(e,t,n){var i=t.x-e.x,o=t.y-e.y,a=n.x-t.x,s=n.y-t.y;return la.signOfDet2x2(i,o,a,s)};la.signOfDet2x2=function(e,t,n,i){var o=null,a=null,s=null;if(o=1,e===0||i===0)return t===0||n===0?0:t>0?n>0?-o:o:n>0?o:-o;if(t===0||n===0)return i>0?e>0?o:-o:e>0?-o:o;if(t>0?i>0?t<=i||(o=-o,a=e,e=n,n=a,a=t,t=i,i=a):t<=-i?(o=-o,n=-n,i=-i):(a=e,e=-n,n=a,a=t,t=-i,i=a):i>0?-t<=i?(o=-o,e=-e,t=-t):(a=-e,e=n,n=a,a=-t,t=i,i=a):t>=i?(e=-e,t=-t,n=-n,i=-i):(o=-o,a=-e,e=-n,n=a,a=-t,t=-i,i=a),e>0)if(n>0){if(!(e<=n))return o}else return o;else{if(n>0)return-o;if(e>=n)o=-o,e=-e,n=-n;else return-o}for(;;){if(s=Math.floor(n/e),n=n-s*e,i=i-s*t,i<0)return-o;if(i>t)return o;if(e>n+n){if(t<i+i)return o}else{if(t>i+i)return-o;n=e-n,i=t-i,o=-o}if(i===0)return n===0?0:-o;if(n===0||(s=Math.floor(e/n),e=e-s*n,t=t-s*i,t<0))return o;if(t>i)return-o;if(n>e+e){if(i<t+t)return-o}else{if(i>t+t)return o;e=n-e,t=i-t,o=-o}if(t===0)return e===0?0:o;if(e===0)return-o}};var On=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};On.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,i=t.x;return n>i&&(n=t.x,i=e.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var o=e.x-this._p.x,a=e.y-this._p.y,s=t.x-this._p.x,u=t.y-this._p.y,c=la.signOfDet2x2(o,a,s,u);if(c===0)return this._isPointOnSegment=!0,null;u<a&&(c=-c),c>0&&this._crossingCount++}};On.prototype.isPointInPolygon=function(){return this.getLocation()!==H.EXTERIOR};On.prototype.getLocation=function(){return this._isPointOnSegment?H.BOUNDARY:this._crossingCount%2===1?H.INTERIOR:H.EXTERIOR};On.prototype.isOnSegment=function(){return this._isPointOnSegment};On.prototype.interfaces_=function(){return[]};On.prototype.getClass=function(){return On};On.locatePointInRing=function(){if(arguments[0]instanceof q&&ae(arguments[1],we)){for(var e=arguments[0],t=arguments[1],n=new On(e),i=new q,o=new q,a=1;a<t.size();a++)if(t.getCoordinate(a,i),t.getCoordinate(a-1,o),n.countSegment(i,o),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof q&&arguments[1]instanceof Array){for(var s=arguments[0],u=arguments[1],c=new On(s),f=1;f<u.length;f++){var l=u[f],p=u[f-1];if(c.countSegment(l,p),c.isOnSegment())return c.getLocation()}return c.getLocation()}};var ee=function(){},Ma={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ee.prototype.interfaces_=function(){return[]};ee.prototype.getClass=function(){return ee};ee.orientationIndex=function(e,t,n){return wr.orientationIndex(e,t,n)};ee.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,i=1;i<e.length-1;i++){var o=e[i].x-n,a=e[i+1].y,s=e[i-1].y;t+=o*(s-a)}return t/2}else if(ae(arguments[0],we)){var u=arguments[0],c=u.size();if(c<3)return 0;var f=new q,l=new q,p=new q;u.getCoordinate(0,l),u.getCoordinate(1,p);var b=l.x;p.x-=b;for(var _=0,E=1;E<c-1;E++)f.y=l.y,l.x=p.x,l.y=p.y,u.getCoordinate(E+1,p),p.x-=b,_+=l.x*(f.y-p.y);return _/2}};ee.distanceLineLine=function(e,t,n,i){if(e.equals(t))return ee.distancePointLine(e,n,i);if(n.equals(i))return ee.distancePointLine(i,e,t);var o=!1;if(!re.intersects(e,t,n,i))o=!0;else{var a=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(a===0)o=!0;else{var s=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),u=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),c=u/a,f=s/a;(f<0||f>1||c<0||c>1)&&(o=!0)}}return o?Ur.min(ee.distancePointLine(e,n,i),ee.distancePointLine(t,n,i),ee.distancePointLine(n,e,t),ee.distancePointLine(i,e,t)):0};ee.isPointInRing=function(e,t){return ee.locatePointInRing(e,t)!==H.EXTERIOR};ee.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,i=new q;e.getCoordinate(0,i);for(var o=i.x,a=i.y,s=1;s<t;s++){e.getCoordinate(s,i);var u=i.x,c=i.y,f=u-o,l=c-a;n+=Math.sqrt(f*f+l*l),o=u,a=c}return n};ee.isCCW=function(e){var t=e.length-1;if(t<3)throw new qe("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],i=0,o=1;o<=t;o++){var a=e[o];a.y>n.y&&(n=a,i=o)}var s=i;do s=s-1,s<0&&(s=t);while(e[s].equals2D(n)&&s!==i);var u=i;do u=(u+1)%t;while(e[u].equals2D(n)&&u!==i);var c=e[s],f=e[u];if(c.equals2D(n)||f.equals2D(n)||c.equals2D(f))return!1;var l=ee.computeOrientation(c,n,f),p=!1;return l===0?p=c.x>f.x:p=l>0,p};ee.locatePointInRing=function(e,t){return On.locatePointInRing(e,t)};ee.distancePointLinePerpendicular=function(e,t,n){var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(o)*Math.sqrt(i)};ee.computeOrientation=function(e,t,n){return ee.orientationIndex(e,t,n)};ee.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new qe("Line array must contain at least one vertex");for(var n=e.distance(t[0]),i=0;i<t.length-1;i++){var o=ee.distancePointLine(e,t[i],t[i+1]);o<n&&(n=o)}return n}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2];if(s.x===u.x&&s.y===u.y)return a.distance(s);var c=(u.x-s.x)*(u.x-s.x)+(u.y-s.y)*(u.y-s.y),f=((a.x-s.x)*(u.x-s.x)+(a.y-s.y)*(u.y-s.y))/c;if(f<=0)return a.distance(s);if(f>=1)return a.distance(u);var l=((s.y-a.y)*(u.x-s.x)-(s.x-a.x)*(u.y-s.y))/c;return Math.abs(l)*Math.sqrt(c)}};ee.isOnLine=function(e,t){for(var n=new $o,i=1;i<t.length;i++){var o=t[i-1],a=t[i];if(n.computeIntersection(e,o,a),n.hasIntersection())return!0}return!1};Ma.CLOCKWISE.get=function(){return-1};Ma.RIGHT.get=function(){return ee.CLOCKWISE};Ma.COUNTERCLOCKWISE.get=function(){return 1};Ma.LEFT.get=function(){return ee.COUNTERCLOCKWISE};Ma.COLLINEAR.get=function(){return 0};Ma.STRAIGHT.get=function(){return ee.COLLINEAR};Object.defineProperties(ee,Ma);var Fi=function(){};Fi.prototype.filter=function(e){};Fi.prototype.interfaces_=function(){return[]};Fi.prototype.getClass=function(){return Fi};var oe=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},_i={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};oe.prototype.isGeometryCollection=function(){return this.getSortIndex()===oe.SORTINDEX_GEOMETRYCOLLECTION};oe.prototype.getFactory=function(){return this._factory};oe.prototype.getGeometryN=function(e){return this};oe.prototype.getArea=function(){return 0};oe.prototype.isRectangle=function(){return!1};oe.prototype.equals=function(){if(arguments[0]instanceof oe){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof oe))return!1;var n=t;return this.equalsExact(n)}};oe.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};oe.prototype.geometryChanged=function(){this.apply(oe.geometryChangedFilter)};oe.prototype.geometryChangedAction=function(){this._envelope=null};oe.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};oe.prototype.getLength=function(){return 0};oe.prototype.getNumGeometries=function(){return 1};oe.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}};oe.prototype.getUserData=function(){return this._userData};oe.prototype.getSRID=function(){return this._SRID};oe.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};oe.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===oe.SORTINDEX_GEOMETRYCOLLECTION)throw new qe("This method does not support GeometryCollection arguments")};oe.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};oe.prototype.norm=function(){var e=this.copy();return e.normalize(),e};oe.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};oe.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new re(this._envelope)};oe.prototype.setSRID=function(e){this._SRID=e};oe.prototype.setUserData=function(e){this._userData=e};oe.prototype.compare=function(e,t){for(var n=e.iterator(),i=t.iterator();n.hasNext()&&i.hasNext();){var o=n.next(),a=i.next(),s=o.compareTo(a);if(s!==0)return s}return n.hasNext()?1:i.hasNext()?-1:0};oe.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};oe.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===oe.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===oe.SORTINDEX_MULTIPOINT||this.getSortIndex()===oe.SORTINDEX_MULTILINESTRING||this.getSortIndex()===oe.SORTINDEX_MULTIPOLYGON};oe.prototype.interfaces_=function(){return[Tc,nn,on]};oe.prototype.getClass=function(){return oe};oe.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};oe.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};_i.serialVersionUID.get=function(){return 8763622679187377e3};_i.SORTINDEX_POINT.get=function(){return 0};_i.SORTINDEX_MULTIPOINT.get=function(){return 1};_i.SORTINDEX_LINESTRING.get=function(){return 2};_i.SORTINDEX_LINEARRING.get=function(){return 3};_i.SORTINDEX_MULTILINESTRING.get=function(){return 4};_i.SORTINDEX_POLYGON.get=function(){return 5};_i.SORTINDEX_MULTIPOLYGON.get=function(){return 6};_i.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};_i.geometryChangedFilter.get=function(){return sh};Object.defineProperties(oe,_i);var sh=function(){};sh.interfaces_=function(){return[Fi]};sh.filter=function(e){e.geometryChangedAction()};var ci=function(){};ci.prototype.filter=function(e){};ci.prototype.interfaces_=function(){return[]};ci.prototype.getClass=function(){return ci};var $r=function(){},Wi={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$r.prototype.isInBoundary=function(e){};$r.prototype.interfaces_=function(){return[]};$r.prototype.getClass=function(){return $r};Wi.Mod2BoundaryNodeRule.get=function(){return Ha};Wi.EndPointBoundaryNodeRule.get=function(){return Ga};Wi.MultiValentEndPointBoundaryNodeRule.get=function(){return Va};Wi.MonoValentEndPointBoundaryNodeRule.get=function(){return Ka};Wi.MOD2_BOUNDARY_RULE.get=function(){return new Ha};Wi.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ga};Wi.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Va};Wi.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ka};Wi.OGC_SFS_BOUNDARY_RULE.get=function(){return $r.MOD2_BOUNDARY_RULE};Object.defineProperties($r,Wi);var Ha=function(){};Ha.prototype.isInBoundary=function(e){return e%2===1};Ha.prototype.interfaces_=function(){return[$r]};Ha.prototype.getClass=function(){return Ha};var Ga=function(){};Ga.prototype.isInBoundary=function(e){return e>0};Ga.prototype.interfaces_=function(){return[$r]};Ga.prototype.getClass=function(){return Ga};var Va=function(){};Va.prototype.isInBoundary=function(e){return e>1};Va.prototype.interfaces_=function(){return[$r]};Va.prototype.getClass=function(){return Va};var Ka=function(){};Ka.prototype.isInBoundary=function(e){return e===1};Ka.prototype.interfaces_=function(){return[$r]};Ka.prototype.getClass=function(){return Ka};var st=function(){};st.prototype.add=function(){};st.prototype.addAll=function(){};st.prototype.isEmpty=function(){};st.prototype.iterator=function(){};st.prototype.size=function(){};st.prototype.toArray=function(){};st.prototype.remove=function(){};function uh(r){this.message=r||""}uh.prototype=new Error;uh.prototype.name="IndexOutOfBoundsException";var vs=function(){};vs.prototype.hasNext=function(){};vs.prototype.next=function(){};vs.prototype.remove=function(){};var cn=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(st);function ys(r){this.message=r||""}ys.prototype=new Error;ys.prototype.name="NoSuchElementException";var $=function(r){function e(){r.call(this),this.array_=[],arguments[0]instanceof st&&this.addAll(arguments[0])}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[r,st]},e.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},e.prototype.set=function(n,i){var o=this.array_[n];return this.array_[n]=i,o},e.prototype.iterator=function(){return new c_(this)},e.prototype.get=function(n){if(n<0||n>=this.size())throw new uh;return this.array_[n]},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var n=this,i=[],o=0,a=this.array_.length;o<a;o++)i.push(n.array_[o]);return i},e.prototype.remove=function(n){for(var i=this,o=!1,a=0,s=this.array_.length;a<s;a++)if(i.array_[a]===n){i.array_.splice(a,1),o=!0;break}return o},e}(cn),c_=function(r){function e(t){r.call(this),this.arrayList_=t,this.position_=0}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ys;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(vs),xu=function(r){function e(){if(r.call(this),arguments.length!==0){if(arguments.length===1){var n=arguments[0];this.ensureCapacity(n.length),this.add(n,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={coordArrayType:{configurable:!0}};return t.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(i){return this.get(i)},e.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],a=arguments[1],s=!1,u=o.iterator();u.hasNext();)i.add(u.next(),a),s=!0;return s}else return r.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var i=this,o=r.prototype.clone.call(this),a=0;a<this.size();a++)o.add(a,i.get(a).copy());return o},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];r.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var a=arguments[0],s=arguments[1];return this.add(a,s,!0),!0}else if(arguments[0]instanceof q&&typeof arguments[1]=="boolean"){var u=arguments[0],c=arguments[1];if(!c&&this.size()>=1){var f=this.get(this.size()-1);if(f.equals2D(u))return null}r.prototype.add.call(this,u)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var l=arguments[0],p=arguments[1];return this.add(l,p),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var b=arguments[0],_=arguments[1],E=arguments[2];if(E)for(var R=0;R<b.length;R++)i.add(b[R],_);else for(var D=b.length-1;D>=0;D--)i.add(b[D],_);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof q){var m=arguments[0],x=arguments[1],M=arguments[2];if(!M){var O=this.size();if(O>0){if(m>0){var B=this.get(m-1);if(B.equals2D(x))return null}if(m<O){var F=this.get(m);if(F.equals2D(x))return null}}}r.prototype.add.call(this,m,x)}}else if(arguments.length===4){var z=arguments[0],U=arguments[1],W=arguments[2],C=arguments[3],h=1;W>C&&(h=-1);for(var g=W;g!==C;g+=h)i.add(z[g],U);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new q(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,t),e}($),ve=function(){},Dc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Dc.ForwardComparator.get=function(){return eu};Dc.BidirectionalComparator.get=function(){return Wa};Dc.coordArrayType.get=function(){return new Array(0).fill(null)};ve.prototype.interfaces_=function(){return[]};ve.prototype.getClass=function(){return ve};ve.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};ve.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(ve.indexOf(i,t)<0)return i}return null};ve.scroll=function(e,t){var n=ve.indexOf(t,e);if(n<0)return null;var i=new Array(e.length).fill(null);Vt.arraycopy(e,n,i,0,e.length-n),Vt.arraycopy(e,0,i,e.length-n,n),Vt.arraycopy(i,0,e,0,e.length)};ve.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(a.compare(i[s],o[s])!==0)return!1;return!0}};ve.intersection=function(e,t){for(var n=new xu,i=0;i<e.length;i++)t.intersects(e[i])&&n.add(e[i],!0);return n.toCoordinateArray()};ve.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};ve.removeRepeatedPoints=function(e){if(!ve.hasRepeatedPoints(e))return e;var t=new xu(e,!1);return t.toCoordinateArray()};ve.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),i=0;i<=n;i++){var o=e[i];e[i]=e[t-i],e[t-i]=o}};ve.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var i=new Array(t).fill(null);if(t===0)return i;for(var o=0,a=0;a<e.length;a++)e[a]!==null&&(i[o++]=e[a]);return i};ve.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new q(e[n]);return t}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=0;c<u;c++)a[s+c]=new q(i[o+c])};ve.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=t[e.length-n-1];if(i.compareTo(o)!==0)return!1}return!0};ve.envelope=function(e){for(var t=new re,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};ve.toCoordinateArray=function(e){return e.toArray(ve.coordArrayType)};ve.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};ve.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};ve.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,i=e[t].compareTo(e[n]);if(i!==0)return i}return 1};ve.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var i=e[n].compareTo(t[n]);if(i!==0)return i;n++}return n<t.length?-1:n<e.length?1:0};ve.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};ve.extract=function(e,t,n){t=Ur.clamp(t,0,e.length),n=Ur.clamp(n,-1,e.length);var i=n-t+1;n<0&&(i=0),t>=e.length&&(i=0),n<t&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var a=0,s=t;s<=n;s++)o[a++]=e[s];return o};Object.defineProperties(ve,Dc);var eu=function(){};eu.prototype.compare=function(e,t){var n=e,i=t;return ve.compare(n,i)};eu.prototype.interfaces_=function(){return[Ua]};eu.prototype.getClass=function(){return eu};var Wa=function(){};Wa.prototype.compare=function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var o=ve.compare(n,i),a=ve.isEqualReversed(n,i);return a?0:o};Wa.prototype.OLDcompare=function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;for(var o=ve.increasingDirection(n),a=ve.increasingDirection(i),s=o>0?0:n.length-1,u=a>0?0:n.length-1,c=0;c<n.length;c++){var f=n[s].compareTo(i[u]);if(f!==0)return f;s+=o,u+=a}return 0};Wa.prototype.interfaces_=function(){return[Ua]};Wa.prototype.getClass=function(){return Wa};var Na=function(){};Na.prototype.get=function(){};Na.prototype.put=function(){};Na.prototype.size=function(){};Na.prototype.values=function(){};Na.prototype.entrySet=function(){};var f_=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Na);function Eu(r){this.message=r||""}Eu.prototype=new Error;Eu.prototype.name="OperationNotSupported";function Bc(){}Bc.prototype=new st;Bc.prototype.contains=function(){};var ch=function(r){function e(){r.call(this),this.array_=[],arguments[0]instanceof st&&this.addAll(arguments[0])}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.contains=function(n){for(var i=this,o=0,a=this.array_.length;o<a;o++){var s=i.array_[o];if(s===n)return!0}return!1},e.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},e.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},e.prototype.remove=function(n){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.toArray=function(){for(var n=this,i=[],o=0,a=this.array_.length;o<a;o++)i.push(n.array_[o]);return i},e.prototype.iterator=function(){return new l_(this)},e}(Bc),l_=function(r){function e(t){r.call(this),this.hashSet_=t,this.position_=0}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ys;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Eu},e}(vs),Ai=0,xo=1;function Wd(r){return r===null?Ai:r.color}function ke(r){return r===null?null:r.parent}function xi(r,e){r!==null&&(r.color=e)}function Kf(r){return r===null?null:r.left}function Jd(r){return r===null?null:r.right}function Qt(){this.root_=null,this.size_=0}Qt.prototype=new f_;Qt.prototype.get=function(r){for(var e=this.root_;e!==null;){var t=r.compareTo(e.key);if(t<0)e=e.left;else if(t>0)e=e.right;else return e.value}return null};Qt.prototype.put=function(r,e){if(this.root_===null)return this.root_={key:r,value:e,left:null,right:null,parent:null,color:Ai,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var t=this.root_,n,i;do if(n=t,i=r.compareTo(t.key),i<0)t=t.left;else if(i>0)t=t.right;else{var o=t.value;return t.value=e,o}while(t!==null);var a={key:r,left:null,right:null,value:e,parent:n,color:Ai,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null};Qt.prototype.fixAfterInsertion=function(r){var e=this;for(r.color=xo;r!=null&&r!==this.root_&&r.parent.color===xo;)if(ke(r)===Kf(ke(ke(r)))){var t=Jd(ke(ke(r)));Wd(t)===xo?(xi(ke(r),Ai),xi(t,Ai),xi(ke(ke(r)),xo),r=ke(ke(r))):(r===Jd(ke(r))&&(r=ke(r),e.rotateLeft(r)),xi(ke(r),Ai),xi(ke(ke(r)),xo),e.rotateRight(ke(ke(r))))}else{var n=Kf(ke(ke(r)));Wd(n)===xo?(xi(ke(r),Ai),xi(n,Ai),xi(ke(ke(r)),xo),r=ke(ke(r))):(r===Kf(ke(r))&&(r=ke(r),e.rotateRight(r)),xi(ke(r),Ai),xi(ke(ke(r)),xo),e.rotateLeft(ke(ke(r))))}this.root_.color=Ai};Qt.prototype.values=function(){var r=new $,e=this.getFirstEntry();if(e!==null)for(r.add(e.value);(e=Qt.successor(e))!==null;)r.add(e.value);return r};Qt.prototype.entrySet=function(){var r=new ch,e=this.getFirstEntry();if(e!==null)for(r.add(e);(e=Qt.successor(e))!==null;)r.add(e);return r};Qt.prototype.rotateLeft=function(r){if(r!=null){var e=r.right;r.right=e.left,e.left!=null&&(e.left.parent=r),e.parent=r.parent,r.parent===null?this.root_=e:r.parent.left===r?r.parent.left=e:r.parent.right=e,e.left=r,r.parent=e}};Qt.prototype.rotateRight=function(r){if(r!=null){var e=r.left;r.left=e.right,e.right!=null&&(e.right.parent=r),e.parent=r.parent,r.parent===null?this.root_=e:r.parent.right===r?r.parent.right=e:r.parent.left=e,e.right=r,r.parent=e}};Qt.prototype.getFirstEntry=function(){var r=this.root_;if(r!=null)for(;r.left!=null;)r=r.left;return r};Qt.successor=function(r){if(r===null)return null;if(r.right!==null){for(var e=r.right;e.left!==null;)e=e.left;return e}else{for(var t=r.parent,n=r;t!==null&&n===t.right;)n=t,t=t.parent;return t}};Qt.prototype.size=function(){return this.size_};var tu=function(){};tu.prototype.interfaces_=function(){return[]};tu.prototype.getClass=function(){return tu};function Eg(){}Eg.prototype=new Bc;function Fn(){this.array_=[],arguments[0]instanceof st&&this.addAll(arguments[0])}Fn.prototype=new Eg;Fn.prototype.contains=function(r){for(var e=this,t=0,n=this.array_.length;t<n;t++){var i=e.array_[t];if(i.compareTo(r)===0)return!0}return!1};Fn.prototype.add=function(r){var e=this;if(this.contains(r))return!1;for(var t=0,n=this.array_.length;t<n;t++){var i=e.array_[t];if(i.compareTo(r)===1)return e.array_.splice(t,0,r),!0}return this.array_.push(r),!0};Fn.prototype.addAll=function(r){for(var e=this,t=r.iterator();t.hasNext();)e.add(t.next());return!0};Fn.prototype.remove=function(r){throw new Eu};Fn.prototype.size=function(){return this.array_.length};Fn.prototype.isEmpty=function(){return this.array_.length===0};Fn.prototype.toArray=function(){for(var r=this,e=[],t=0,n=this.array_.length;t<n;t++)e.push(r.array_[t]);return e};Fn.prototype.iterator=function(){return new kc(this)};var kc=function(r){this.treeSet_=r,this.position_=0};kc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ys;return this.treeSet_.array_[this.position_++]};kc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};kc.prototype.remove=function(){throw new Eu};var To=function(){};To.sort=function(){var e=arguments[0],t,n,i,o;if(arguments.length===1)o=function(s,u){return s.compareTo(u)},e.sort(o);else if(arguments.length===2)i=arguments[1],o=function(s,u){return i.compare(s,u)},e.sort(o);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var a=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<a.length;t++)e.push(a[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),i=arguments[3],o=function(s,u){return i.compare(s,u)},n.sort(o),a=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<a.length;t++)e.push(a[t])};To.asList=function(e){for(var t=new $,n=0,i=e.length;n<i;n++)t.add(e[n]);return t};var Ce=function(){},wn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};wn.P.get=function(){return 0};wn.L.get=function(){return 1};wn.A.get=function(){return 2};wn.FALSE.get=function(){return-1};wn.TRUE.get=function(){return-2};wn.DONTCARE.get=function(){return-3};wn.SYM_FALSE.get=function(){return"F"};wn.SYM_TRUE.get=function(){return"T"};wn.SYM_DONTCARE.get=function(){return"*"};wn.SYM_P.get=function(){return"0"};wn.SYM_L.get=function(){return"1"};wn.SYM_A.get=function(){return"2"};Ce.prototype.interfaces_=function(){return[]};Ce.prototype.getClass=function(){return Ce};Ce.toDimensionSymbol=function(e){switch(e){case Ce.FALSE:return Ce.SYM_FALSE;case Ce.TRUE:return Ce.SYM_TRUE;case Ce.DONTCARE:return Ce.SYM_DONTCARE;case Ce.P:return Ce.SYM_P;case Ce.L:return Ce.SYM_L;case Ce.A:return Ce.SYM_A}throw new qe("Unknown dimension value: "+e)};Ce.toDimensionValue=function(e){switch(Qs.toUpperCase(e)){case Ce.SYM_FALSE:return Ce.FALSE;case Ce.SYM_TRUE:return Ce.TRUE;case Ce.SYM_DONTCARE:return Ce.DONTCARE;case Ce.SYM_P:return Ce.P;case Ce.SYM_L:return Ce.L;case Ce.SYM_A:return Ce.A}throw new qe("Unknown dimension symbol: "+e)};Object.defineProperties(Ce,wn);var zn=function(){};zn.prototype.filter=function(e){};zn.prototype.interfaces_=function(){return[]};zn.prototype.getClass=function(){return zn};var hn=function(){};hn.prototype.filter=function(e,t){};hn.prototype.isDone=function(){};hn.prototype.isGeometryChanged=function(){};hn.prototype.interfaces_=function(){return[]};hn.prototype.getClass=function(){return hn};var hr=function(r){function e(n,i){if(r.call(this,i),this._geometries=n||[],r.hasNullElements(this._geometries))throw new qe("geometries must not contain null elements")}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new re,a=0;a<this._geometries.length;a++)o.expandToInclude(i._geometries[a].getEnvelopeInternal());return o},e.prototype.getGeometryN=function(i){return this._geometries[i]},e.prototype.getSortIndex=function(){return r.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),a=-1,s=0;s<this._geometries.length;s++)for(var u=i._geometries[s].getCoordinates(),c=0;c<u.length;c++)a++,o[a]=u[c];return o},e.prototype.getArea=function(){for(var i=this,o=0,a=0;a<this._geometries.length;a++)o+=i._geometries[a].getArea();return o},e.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],a=arguments[1];if(!this.isEquivalentClass(o))return!1;var s=o;if(this._geometries.length!==s._geometries.length)return!1;for(var u=0;u<this._geometries.length;u++)if(!i._geometries[u].equalsExact(s._geometries[u],a))return!1;return!0}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();To.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var i=this,o=Ce.FALSE,a=0;a<this._geometries.length;a++)o=Math.max(o,i._geometries[a].getBoundaryDimension());return o},e.prototype.getDimension=function(){for(var i=this,o=Ce.FALSE,a=0;a<this._geometries.length;a++)o=Math.max(o,i._geometries[a].getDimension());return o},e.prototype.getLength=function(){for(var i=this,o=0,a=0;a<this._geometries.length;a++)o+=i._geometries[a].getLength();return o},e.prototype.getNumPoints=function(){for(var i=this,o=0,a=0;a<this._geometries.length;a++)o+=i._geometries[a].getNumPoints();return o},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var i=this,o=this._geometries.length,a=new Array(o).fill(null),s=0;s<this._geometries.length;s++)a[s]=i._geometries[s].reverse();return this.getFactory().createGeometryCollection(a)},e.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],a=new Fn(To.asList(this._geometries)),s=new Fn(To.asList(o._geometries));return this.compare(a,s)}else if(arguments.length===2){for(var u=arguments[0],c=arguments[1],f=u,l=this.getNumGeometries(),p=f.getNumGeometries(),b=0;b<l&&b<p;){var _=i.getGeometryN(b),E=f.getGeometryN(b),R=_.compareToSameClass(E,c);if(R!==0)return R;b++}return b<l?1:b<p?-1:0}},e.prototype.apply=function(){var i=this;if(ae(arguments[0],ci))for(var o=arguments[0],a=0;a<this._geometries.length;a++)i._geometries[a].apply(o);else if(ae(arguments[0],hn)){var s=arguments[0];if(this._geometries.length===0)return null;for(var u=0;u<this._geometries.length&&(i._geometries[u].apply(s),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else if(ae(arguments[0],zn)){var c=arguments[0];c.filter(this);for(var f=0;f<this._geometries.length;f++)i._geometries[f].apply(c)}else if(ae(arguments[0],Fi)){var l=arguments[0];l.filter(this);for(var p=0;p<this._geometries.length;p++)i._geometries[p].apply(l)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),he.shouldNeverReachHere(),null},e.prototype.clone=function(){var i=this,o=r.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var a=0;a<this._geometries.length;a++)o._geometries[a]=i._geometries[a].clone();return o},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(e,t),e}(oe),Fo=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?r.prototype.equalsExact.call(this,i,o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ce.FALSE:0},e.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var i=this,o=this._geometries.length,a=new Array(o).fill(null),s=0;s<this._geometries.length;s++)a[o-1-s]=i._geometries[s].reverse();return this.getFactory().createMultiLineString(a)},e.prototype.getBoundary=function(){return new Xr(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.interfaces_=function(){return[tu]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(e,t),e}(hr),Xr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=$r.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Xr.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};Xr.prototype.getBoundary=function(){return this._geom instanceof Je?this.boundaryLineString(this._geom):this._geom instanceof Fo?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Xr.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};Xr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Xr.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new $;this._endpointMap=new Qt;for(var i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getNumPoints()!==0&&(t.addEndpoint(o.getCoordinateN(0)),t.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var a=this._endpointMap.entrySet().iterator();a.hasNext();){var s=a.next(),u=s.getValue(),c=u.count;t._bnRule.isInBoundary(c)&&n.add(s.getKey())}return ve.toCoordinateArray(n)};Xr.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new sc,this._endpointMap.put(e,t)),t.count++};Xr.prototype.interfaces_=function(){return[]};Xr.prototype.getClass=function(){return Xr};Xr.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new Xr(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Xr(n,i);return o.getBoundary()}};var sc=function(){this.count=null};sc.prototype.interfaces_=function(){return[]};sc.prototype.getClass=function(){return sc};function h_(){}function d_(){}var p_=function(){};function g_(){}function m_(){}function v_(){}var Yr=function(){},fh={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yr.prototype.interfaces_=function(){return[]};Yr.prototype.getClass=function(){return Yr};Yr.chars=function(e,t){for(var n=new Array(t).fill(null),i=0;i<t;i++)n[i]=e;return String(n)};Yr.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new g_,n=new h_;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],a="";new d_(Yr.getStackTrace(i));for(var s=new v_,u=0;u<o;u++)try{a+=s.readLine()+Yr.NEWLINE}catch(c){if(c instanceof m_)he.shouldNeverReachHere();else throw c}finally{}return a}};Yr.split=function(e,t){for(var n=t.length,i=new $,o=""+e,a=o.indexOf(t);a>=0;){var s=o.substring(0,a);i.add(s),o=o.substring(a+n),a=o.indexOf(t)}o.length>0&&i.add(o);for(var u=new Array(i.size()).fill(null),c=0;c<u.length;c++)u[c]=i.get(c);return u};Yr.toString=function(){if(arguments.length===1){var e=arguments[0];return Yr.SIMPLE_ORDINATE_FORMAT.format(e)}};Yr.spaces=function(e){return Yr.chars(" ",e)};fh.NEWLINE.get=function(){return Vt.getProperty("line.separator")};fh.SIMPLE_ORDINATE_FORMAT.get=function(){return new p_};Object.defineProperties(Yr,fh);var et=function(){};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.copyCoord=function(e,t,n,i){for(var o=Math.min(e.getDimension(),n.getDimension()),a=0;a<o;a++)n.setOrdinate(i,a,e.getOrdinate(t,a))};et.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,we.X)===e.getOrdinate(t-1,we.X)&&e.getOrdinate(0,we.Y)===e.getOrdinate(t-1,we.Y)};et.isEqual=function(e,t){var n=e.size(),i=t.size();if(n!==i)return!1;for(var o=Math.min(e.getDimension(),t.getDimension()),a=0;a<n;a++)for(var s=0;s<o;s++){var u=e.getOrdinate(a,s),c=t.getOrdinate(a,s);if(e.getOrdinate(a,s)!==t.getOrdinate(a,s)&&!(ue.isNaN(u)&&ue.isNaN(c)))return!1}return!0};et.extend=function(e,t,n){var i=e.create(n,t.getDimension()),o=t.size();if(et.copy(t,0,i,0,o),o>0)for(var a=o;a<n;a++)et.copy(t,o-1,i,a,1);return i};et.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),i=0;i<=n;i++)et.swap(e,i,t-i)};et.swap=function(e,t,n){if(t===n)return null;for(var i=0;i<e.getDimension();i++){var o=e.getOrdinate(t,i);e.setOrdinate(t,i,e.getOrdinate(n,i)),e.setOrdinate(n,i,o)}};et.copy=function(e,t,n,i,o){for(var a=0;a<o;a++)et.copyCoord(e,t+a,n,i+a)};et.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),i=new $n;i.append("(");for(var o=0;o<t;o++){o>0&&i.append(" ");for(var a=0;a<n;a++)a>0&&i.append(","),i.append(Yr.toString(e.getOrdinate(o,a)))}return i.append(")"),i.toString()}};et.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return et.createClosedRing(e,t,4);var i=t.getOrdinate(0,we.X)===t.getOrdinate(n-1,we.X)&&t.getOrdinate(0,we.Y)===t.getOrdinate(n-1,we.Y);return i?t:et.createClosedRing(e,t,n+1)};et.createClosedRing=function(e,t,n){var i=e.create(n,t.getDimension()),o=t.size();et.copy(t,0,i,0,o);for(var a=o;a<n;a++)et.copy(t,0,i,a,1);return i};var Je=function(r){function e(n,i){r.call(this,i),this._points=null,this.init(n)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new re:this._points.expandEnvelope(new re)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return r.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],a=arguments[1];if(!this.isEquivalentClass(o))return!1;var s=o;if(this._points.size()!==s._points.size())return!1;for(var u=0;u<this._points.size();u++)if(!i.equal(i._points.getCoordinate(u),s._points.getCoordinate(u),a))return!1;return!0}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var a=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(a)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(a))>0&&et.reverse(i._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ce.FALSE:0},e.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ee.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var i=this._points.copy();et.reverse(i);var o=this.getFactory().createLineString(i);return o},e.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],a=o,s=0,u=0;s<this._points.size()&&u<a._points.size();){var c=i._points.getCoordinate(s).compareTo(a._points.getCoordinate(u));if(c!==0)return c;s++,u++}return s<this._points.size()?1:u<a._points.size()?-1:0}else if(arguments.length===2){var f=arguments[0],l=arguments[1],p=f;return l.compare(this._points,p._points)}},e.prototype.apply=function(){var i=this;if(ae(arguments[0],ci))for(var o=arguments[0],a=0;a<this._points.size();a++)o.filter(i._points.getCoordinate(a));else if(ae(arguments[0],hn)){var s=arguments[0];if(this._points.size()===0)return null;for(var u=0;u<this._points.size()&&(s.filter(i._points,u),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else if(ae(arguments[0],zn)){var c=arguments[0];c.filter(this)}else if(ae(arguments[0],Fi)){var f=arguments[0];f.filter(this)}},e.prototype.getBoundary=function(){return new Xr(this).getBoundary()},e.prototype.isEquivalentClass=function(i){return i instanceof e},e.prototype.clone=function(){var i=r.prototype.clone.call(this);return i._points=this._points.clone(),i},e.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return this._points.size()===0},e.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new qe("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},e.prototype.isCoordinate=function(i){for(var o=this,a=0;a<this._points.size();a++)if(o._points.getCoordinate(a).equals(i))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},e.prototype.interfaces_=function(){return[tu]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(oe),ru=function(){};ru.prototype.interfaces_=function(){return[]};ru.prototype.getClass=function(){return ru};var Pr=function(r){function e(n,i){r.call(this,i),this._coordinates=n||null,this.init(this._coordinates)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new re;var i=new re;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},e.prototype.getSortIndex=function(){return r.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ce.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var a=arguments[0],s=arguments[1],u=a;return s.compare(this._coordinates,u._coordinates)}},e.prototype.apply=function(){if(ae(arguments[0],ci)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(ae(arguments[0],hn)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(ae(arguments[0],zn)){var a=arguments[0];a.filter(this)}else if(ae(arguments[0],Fi)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var i=r.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return this._coordinates.size()===0},e.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),he.isTrue(i.size()<=1),this._coordinates=i},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[ru]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(e,t),e}(oe),co=function(){};co.prototype.interfaces_=function(){return[]};co.prototype.getClass=function(){return co};var lt=function(r){function e(n,i,o){if(r.call(this,o),this._shell=null,this._holes=null,n===null&&(n=this.getFactory().createLinearRing()),i===null&&(i=[]),r.hasNullElements(i))throw new qe("holes must not contain null elements");if(n.isEmpty()&&r.hasNonEmptyElements(i))throw new qe("shell is empty but holes are not");this._shell=n,this._holes=i}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return r.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),a=-1,s=this._shell.getCoordinates(),u=0;u<s.length;u++)a++,o[a]=s[u];for(var c=0;c<this._holes.length;c++)for(var f=i._holes[c].getCoordinates(),l=0;l<f.length;l++)a++,o[a]=f[l];return o},e.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(ee.signedArea(this._shell.getCoordinateSequence()));for(var a=0;a<this._holes.length;a++)o-=Math.abs(ee.signedArea(i._holes[a].getCoordinateSequence()));return o},e.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),a=0;a<5;a++){var s=i.getX(a);if(!(s===o.getMinX()||s===o.getMaxX()))return!1;var u=i.getY(a);if(!(u===o.getMinY()||u===o.getMaxY()))return!1}for(var c=i.getX(0),f=i.getY(0),l=1;l<=4;l++){var p=i.getX(l),b=i.getY(l),_=p!==c,E=b!==f;if(_===E)return!1;c=p,f=b}return!0},e.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],a=arguments[1];if(!this.isEquivalentClass(o))return!1;var s=o,u=this._shell,c=s._shell;if(!u.equalsExact(c,a)||this._holes.length!==s._holes.length)return!1;for(var f=0;f<this._holes.length;f++)if(!i._holes[f].equalsExact(s._holes[f],a))return!1;return!0}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);To.sort(this._holes)}else if(arguments.length===2){var a=arguments[0],s=arguments[1];if(a.isEmpty())return null;var u=new Array(a.getCoordinates().length-1).fill(null);Vt.arraycopy(a.getCoordinates(),0,u,0,u.length);var c=ve.minCoordinate(a.getCoordinates());ve.scroll(u,c),Vt.arraycopy(u,0,a.getCoordinates(),0,u.length),a.getCoordinates()[u.length]=u[0],ee.isCCW(a.getCoordinates())===s&&ve.reverse(a.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var a=0;a<this._holes.length;a++)o+=i._holes[a].getLength();return o},e.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),a=0;a<this._holes.length;a++)o+=i._holes[a].getNumPoints();return o},e.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var a=0;a<this._holes.length;a++)o._holes[a]=i._holes[a].copy().reverse();return o},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],a=this._shell,s=o._shell;return a.compareToSameClass(s)}else if(arguments.length===2){var u=arguments[0],c=arguments[1],f=u,l=this._shell,p=f._shell,b=l.compareToSameClass(p,c);if(b!==0)return b;for(var _=this.getNumInteriorRing(),E=f.getNumInteriorRing(),R=0;R<_&&R<E;){var D=i.getInteriorRingN(R),m=f.getInteriorRingN(R),x=D.compareToSameClass(m,c);if(x!==0)return x;R++}return R<_?1:R<E?-1:0}},e.prototype.apply=function(i){var o=this;if(ae(i,ci)){this._shell.apply(i);for(var a=0;a<this._holes.length;a++)o._holes[a].apply(i)}else if(ae(i,hn)){if(this._shell.apply(i),!i.isDone())for(var s=0;s<this._holes.length&&(o._holes[s].apply(i),!i.isDone());s++);i.isGeometryChanged()&&this.geometryChanged()}else if(ae(i,zn))i.filter(this);else if(ae(i,Fi)){i.filter(this),this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}},e.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var a=0;a<this._holes.length;a++)o[a+1]=i._holes[a];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},e.prototype.clone=function(){var i=this,o=r.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var a=0;a<this._holes.length;a++)o._holes[a]=i._holes[a].clone();return o},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var i=this,o=this._shell.copy(),a=new Array(this._holes.length).fill(null),s=0;s<a.length;s++)a[s]=i._holes[s].copy();return new e(o,a,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(i){return this._holes[i]},e.prototype.interfaces_=function(){return[co]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,t),e}(oe),Ja=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?r.prototype.equalsExact.call(this,i,o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return r.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ce.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.interfaces_=function(){return[ru]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(e,t),e}(hr),fi=function(r){function e(n,i){n instanceof q&&i instanceof me&&(n=i.getCoordinateSequenceFactory().create(n)),r.call(this,n,i),this.validateConstruction()}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ce.FALSE},e.prototype.isClosed=function(){return this.isEmpty()?!0:r.prototype.isClosed.call(this)},e.prototype.reverse=function(){var i=this._points.copy();et.reverse(i);var o=this.getFactory().createLinearRing(i);return o},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!r.prototype.isClosed.call(this))throw new qe("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new qe("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.MINIMUM_VALID_SIZE.get=function(){return 4},t.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,t),e}(Je),ai=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?r.prototype.equalsExact.call(this,i,o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var i=this,o=this._geometries.length,a=new Array(o).fill(null),s=0;s<this._geometries.length;s++)a[s]=i._geometries[s].reverse();return this.getFactory().createMultiPolygon(a)},e.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new $,a=0;a<this._geometries.length;a++)for(var s=i._geometries[a],u=s.getBoundary(),c=0;c<u.getNumGeometries();c++)o.add(u.getGeometryN(c));var f=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(f))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.interfaces_=function(){return[co]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,t),e}(hr),Zr=function(e){this._factory=e||null,this._isUserDataCopied=!1},Fc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Zr.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};Zr.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};Zr.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof hr?this.editGeometryCollection(e,t):e instanceof lt?this.editPolygon(e,t):e instanceof Pr?t.edit(e,this._factory):e instanceof Je?t.edit(e,this._factory):(he.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};Zr.prototype.editGeometryCollection=function(e,t){for(var n=this,i=t.edit(e,this._factory),o=new $,a=0;a<i.getNumGeometries();a++){var s=n.edit(i.getGeometryN(a),t);s===null||s.isEmpty()||o.add(s)}return i.getClass()===Ja?this._factory.createMultiPoint(o.toArray([])):i.getClass()===Fo?this._factory.createMultiLineString(o.toArray([])):i.getClass()===ai?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};Zr.prototype.editPolygon=function(e,t){var n=this,i=t.edit(e,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),t);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var a=new $,s=0;s<i.getNumInteriorRing();s++){var u=n.edit(i.getInteriorRingN(s),t);u===null||u.isEmpty()||a.add(u)}return this._factory.createPolygon(o,a.toArray([]))};Zr.prototype.interfaces_=function(){return[]};Zr.prototype.getClass=function(){return Zr};Zr.GeometryEditorOperation=function(){};Fc.NoOpGeometryOperation.get=function(){return nu};Fc.CoordinateOperation.get=function(){return iu};Fc.CoordinateSequenceOperation.get=function(){return ou};Object.defineProperties(Zr,Fc);var nu=function(){};nu.prototype.edit=function(e,t){return e};nu.prototype.interfaces_=function(){return[Zr.GeometryEditorOperation]};nu.prototype.getClass=function(){return nu};var iu=function(){};iu.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof fi?t.createLinearRing(n):e instanceof Je?t.createLineString(n):e instanceof Pr?n.length>0?t.createPoint(n[0]):t.createPoint():e};iu.prototype.interfaces_=function(){return[Zr.GeometryEditorOperation]};iu.prototype.getClass=function(){return iu};var ou=function(){};ou.prototype.edit=function(e,t){return e instanceof fi?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Je?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Pr?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};ou.prototype.interfaces_=function(){return[Zr.GeometryEditorOperation]};ou.prototype.getClass=function(){return ou};var Ze=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new q}else if(ae(arguments[0],we)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)e._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=a,this._dimension=s,a===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],c=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=c;for(var f=0;f<u;f++)e._coordinates[f]=new q}}},Sg={serialVersionUID:{configurable:!0}};Ze.prototype.setOrdinate=function(e,t,n){switch(t){case we.X:this._coordinates[e].x=n;break;case we.Y:this._coordinates[e].y=n;break;case we.Z:this._coordinates[e].z=n;break;default:throw new qe("invalid ordinateIndex")}};Ze.prototype.size=function(){return this._coordinates.length};Ze.prototype.getOrdinate=function(e,t){switch(t){case we.X:return this._coordinates[e].x;case we.Y:return this._coordinates[e].y;case we.Z:return this._coordinates[e].z}return ue.NaN};Ze.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};Ze.prototype.getCoordinateCopy=function(e){return new q(this._coordinates[e])};Ze.prototype.getDimension=function(){return this._dimension};Ze.prototype.getX=function(e){return this._coordinates[e].x};Ze.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new Ze(t,this._dimension)};Ze.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};Ze.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new Ze(t,this._dimension)};Ze.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new $n(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};Ze.prototype.getY=function(e){return this._coordinates[e].y};Ze.prototype.toCoordinateArray=function(){return this._coordinates};Ze.prototype.interfaces_=function(){return[we,on]};Ze.prototype.getClass=function(){return Ze};Sg.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Ze,Sg);var li=function(){},lh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};li.prototype.readResolve=function(){return li.instance()};li.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Ze(e)}else if(ae(arguments[0],we)){var t=arguments[0];return new Ze(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Ze(n):new Ze(n,i)}};li.prototype.interfaces_=function(){return[qa,on]};li.prototype.getClass=function(){return li};li.instance=function(){return li.instanceObject};lh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};lh.instanceObject.get=function(){return new li};Object.defineProperties(li,lh);var Cg=function(r){function e(){r.call(this),this.map_=new Map}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.get=function(n){return this.map_.get(n)||null},e.prototype.put=function(n,i){return this.map_.set(n,i),i},e.prototype.values=function(){for(var n=new $,i=this.map_.values(),o=i.next();!o.done;)n.add(o.value),o=i.next();return n},e.prototype.entrySet=function(){var n=new ch;return this.map_.entries().forEach(function(i){return n.add(i)}),n},e.prototype.size=function(){return this.map_.size()},e}(Na),Me=function r(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=r.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Un){var e=arguments[0];this._modelType=e,e===r.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var t=arguments[0];this._modelType=r.FIXED,this.setScale(t)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},hh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Me.prototype.equals=function(e){if(!(e instanceof Me))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};Me.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),i=t.getMaximumSignificantDigits();return new kn(n).compareTo(new kn(i))};Me.prototype.getScale=function(){return this._scale};Me.prototype.isFloating=function(){return this._modelType===Me.FLOATING||this._modelType===Me.FLOATING_SINGLE};Me.prototype.getType=function(){return this._modelType};Me.prototype.toString=function(){var e="UNKNOWN";return this._modelType===Me.FLOATING?e="Floating":this._modelType===Me.FLOATING_SINGLE?e="Floating-Single":this._modelType===Me.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};Me.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(ue.isNaN(e))return e;if(this._modelType===Me.FLOATING_SINGLE){var t=e;return t}return this._modelType===Me.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof q){var n=arguments[0];if(this._modelType===Me.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};Me.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===Me.FLOATING?e=16:this._modelType===Me.FLOATING_SINGLE?e=6:this._modelType===Me.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};Me.prototype.setScale=function(e){this._scale=Math.abs(e)};Me.prototype.interfaces_=function(){return[on,nn]};Me.prototype.getClass=function(){return Me};Me.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};hh.serialVersionUID.get=function(){return 7777263578777804e3};hh.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Me,hh);var Un=function r(e){this._name=e||null,r.nameToTypeMap.put(e,this)},dh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Un.prototype.readResolve=function(){return Un.nameToTypeMap.get(this._name)};Un.prototype.toString=function(){return this._name};Un.prototype.interfaces_=function(){return[on]};Un.prototype.getClass=function(){return Un};dh.serialVersionUID.get=function(){return-552860263173159e4};dh.nameToTypeMap.get=function(){return new Cg};Object.defineProperties(Un,dh);Me.Type=Un;Me.FIXED=new Un("FIXED");Me.FLOATING=new Un("FLOATING");Me.FLOATING_SINGLE=new Un("FLOATING SINGLE");var me=function r(){this._precisionModel=new Me,this._SRID=0,this._coordinateSequenceFactory=r.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?ae(arguments[0],qa)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Me&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ig={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new q(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new q(e.getMinX(),e.getMinY()),new q(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new q(e.getMinX(),e.getMinY()),new q(e.getMinX(),e.getMaxY()),new q(e.getMaxX(),e.getMaxY()),new q(e.getMaxX(),e.getMinY()),new q(e.getMinX(),e.getMinY())]),null)};me.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new Je(this.getCoordinateSequenceFactory().create(e),this);if(ae(e,we))return new Je(e,this)}else return new Je(this.getCoordinateSequenceFactory().create([]),this)};me.prototype.createMultiLineString=function(){if(arguments.length===0)return new Fo(null,this);if(arguments.length===1){var e=arguments[0];return new Fo(e,this)}};me.prototype.buildGeometry=function(e){for(var t=null,n=!1,i=!1,o=e.iterator();o.hasNext();){var a=o.next(),s=a.getClass();t===null&&(t=s),s!==t&&(n=!0),a.isGeometryCollectionOrDerived()&&(i=!0)}if(t===null)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(me.toGeometryArray(e));var u=e.iterator().next(),c=e.size()>1;if(c){if(u instanceof lt)return this.createMultiPolygon(me.toPolygonArray(e));if(u instanceof Je)return this.createMultiLineString(me.toLineStringArray(e));if(u instanceof Pr)return this.createMultiPoint(me.toPointArray(e));he.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u};me.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};me.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(ae(arguments[0],we)){var t=arguments[0];return new Pr(t,this)}}};me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};me.prototype.createPolygon=function(){if(arguments.length===0)return new lt(null,null,this);if(arguments.length===1){if(ae(arguments[0],we)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof fi){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new lt(i,o,this)}};me.prototype.getSRID=function(){return this._SRID};me.prototype.createGeometryCollection=function(){if(arguments.length===0)return new hr(null,this);if(arguments.length===1){var e=arguments[0];return new hr(e,this)}};me.prototype.createGeometry=function(e){var t=new Zr(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};me.prototype.getPrecisionModel=function(){return this._precisionModel};me.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(ae(arguments[0],we)){var t=arguments[0];return new fi(t,this)}}};me.prototype.createMultiPolygon=function(){if(arguments.length===0)return new ai(null,this);if(arguments.length===1){var e=arguments[0];return new ai(e,this)}};me.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new Ja(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Ja(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(ae(arguments[0],we)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),a=0;a<i.size();a++){var s=e.getCoordinateSequenceFactory().create(1,i.getDimension());et.copy(i,a,s,0,1),o[a]=e.createPoint(s)}return this.createMultiPoint(o)}}};me.prototype.interfaces_=function(){return[on]};me.prototype.getClass=function(){return me};me.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};me.getDefaultCoordinateSequenceFactory=function(){return li.instance()};me.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};Ig.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(me,Ig);var y_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],zc=function(e){this.geometryFactory=e||new me};zc.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!Nn[n])throw new Error("Unknown GeoJSON type: "+t.type);return y_.indexOf(n)!==-1?Nn[n].apply(this,[t.coordinates]):n==="GeometryCollection"?Nn[n].apply(this,[t.geometries]):Nn[n].apply(this,[t])};zc.prototype.write=function(e){var t=e.getGeometryType();if(!Ci[t])throw new Error("Geometry is not supported");return Ci[t].apply(this,[e])};var Nn={Feature:function(r){var e={};for(var t in r)e[t]=r[t];if(r.geometry){var n=r.geometry.type;if(!Nn[n])throw new Error("Unknown GeoJSON type: "+r.type);e.geometry=this.read(r.geometry)}return r.bbox&&(e.bbox=Nn.bbox.apply(this,[r.bbox])),e},FeatureCollection:function(r){var e=this,t={};if(r.features){t.features=[];for(var n=0;n<r.features.length;++n)t.features.push(e.read(r.features[n]))}return r.bbox&&(t.bbox=this.parse.bbox.apply(this,[r.bbox])),t},coordinates:function(r){for(var e=[],t=0;t<r.length;++t){var n=r[t];e.push(new q(n[0],n[1]))}return e},bbox:function(r){return this.geometryFactory.createLinearRing([new q(r[0],r[1]),new q(r[2],r[1]),new q(r[2],r[3]),new q(r[0],r[3]),new q(r[0],r[1])])},Point:function(r){var e=new q(r[0],r[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(r){for(var e=this,t=[],n=0;n<r.length;++n)t.push(Nn.Point.apply(e,[r[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(r){var e=Nn.coordinates.apply(this,[r]);return this.geometryFactory.createLineString(e)},MultiLineString:function(r){for(var e=this,t=[],n=0;n<r.length;++n)t.push(Nn.LineString.apply(e,[r[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(r){for(var e=this,t=Nn.coordinates.apply(this,[r[0]]),n=this.geometryFactory.createLinearRing(t),i=[],o=1;o<r.length;++o){var a=r[o],s=Nn.coordinates.apply(e,[a]),u=e.geometryFactory.createLinearRing(s);i.push(u)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(r){for(var e=this,t=[],n=0;n<r.length;++n){var i=r[n];t.push(Nn.Polygon.apply(e,[i]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(r){for(var e=this,t=[],n=0;n<r.length;++n){var i=r[n];t.push(e.read(i))}return this.geometryFactory.createGeometryCollection(t)}},Ci={coordinate:function(r){return[r.x,r.y]},Point:function(r){var e=Ci.coordinate.apply(this,[r.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=Ci.Point.apply(e,[i]);t.push(o.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(r){for(var e=this,t=[],n=r.getCoordinates(),i=0;i<n.length;++i){var o=n[i];t.push(Ci.coordinate.apply(e,[o]))}return{type:"LineString",coordinates:t}},MultiLineString:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=Ci.LineString.apply(e,[i]);t.push(o.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(r){var e=this,t=[],n=Ci.LineString.apply(this,[r._shell]);t.push(n.coordinates);for(var i=0;i<r._holes.length;++i){var o=r._holes[i],a=Ci.LineString.apply(e,[o]);t.push(a.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=Ci.Polygon.apply(e,[i]);t.push(o.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=i.getGeometryType();t.push(Ci[o].apply(e,[i]))}return{type:"GeometryCollection",geometries:t}}},ph=function(e){this.geometryFactory=e||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new zc(this.geometryFactory)};ph.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===Me.FIXED&&this.reducePrecision(t),t};ph.prototype.reducePrecision=function(e){var t=this,n,i;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,i=e.points.length;n<i;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,i=e.geometries.length;n<i;n++)t.reducePrecision(e.geometries[n])};var Ag=function(){this.parser=new zc(this.geometryFactory)};Ag.prototype.write=function(e){return this.parser.write(e)};var j=function(){},Uc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};j.prototype.interfaces_=function(){return[]};j.prototype.getClass=function(){return j};j.opposite=function(e){return e===j.LEFT?j.RIGHT:e===j.RIGHT?j.LEFT:e};Uc.ON.get=function(){return 0};Uc.LEFT.get=function(){return 1};Uc.RIGHT.get=function(){return 2};Object.defineProperties(j,Uc);function qc(r){this.message=r||""}qc.prototype=new Error;qc.prototype.name="EmptyStackException";function Zn(){this.array_=[]}Zn.prototype=new cn;Zn.prototype.add=function(r){return this.array_.push(r),!0};Zn.prototype.get=function(r){if(r<0||r>=this.size())throw new Error;return this.array_[r]};Zn.prototype.push=function(r){return this.array_.push(r),r};Zn.prototype.pop=function(r){if(this.array_.length===0)throw new qc;return this.array_.pop()};Zn.prototype.peek=function(){if(this.array_.length===0)throw new qc;return this.array_[this.array_.length-1]};Zn.prototype.empty=function(){return this.array_.length===0};Zn.prototype.isEmpty=function(){return this.empty()};Zn.prototype.search=function(r){return this.array_.indexOf(r)};Zn.prototype.size=function(){return this.array_.length};Zn.prototype.toArray=function(){for(var r=this,e=[],t=0,n=this.array_.length;t<n;t++)e.push(r.array_[t]);return e};var qn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};qn.prototype.getCoordinate=function(){return this._minCoord};qn.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};qn.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();he.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],i=ee.computeOrientation(this._minCoord,n,t),o=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&i===ee.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&i===ee.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};qn.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),i=n.getCoordinates();if(t<0||t+1>=i.length||i[t].y===i[t+1].y)return-1;var o=j.LEFT;return i[t].y<i[t+1].y&&(o=j.RIGHT),o};qn.prototype.getEdge=function(){return this._orientedDe};qn.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(t._minCoord===null||n[i].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=i,t._minCoord=n[i])};qn.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};qn.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next();i.isForward()&&t.checkForRightmostCoordinate(i)}he.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===j.LEFT&&(this._orientedDe=this._minDe.getSym())};qn.prototype.interfaces_=function(){return[]};qn.prototype.getClass=function(){return qn};var zi=function(r){function e(t,n){r.call(this,e.msgWithCoord(t,n)),this.pt=n?new q(n):null,this.name="TopologyException"}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(n,i){return i?n:n+" [ "+i+" ]"},e}(ki),Hc=function(){this.array_=[]};Hc.prototype.addLast=function(e){this.array_.push(e)};Hc.prototype.removeFirst=function(){return this.array_.shift()};Hc.prototype.isEmpty=function(){return this.array_.length===0};var dr=function(){this._finder=null,this._dirEdgeList=new $,this._nodes=new $,this._rightMostCoord=null,this._env=null,this._finder=new qn};dr.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};dr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};dr.prototype.computeNodeDepth=function(e){for(var t=this,n=null,i=e.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){n=o;break}}if(n===null)throw new zi("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var a=e.getEdges().iterator();a.hasNext();){var s=a.next();s.setVisited(!0),t.copySymDepths(s)}};dr.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(j.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};dr.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};dr.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(j.RIGHT)>=1&&t.getDepth(j.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};dr.prototype.computeDepths=function(e){var t=this,n=new ch,i=new Hc,o=e.getNode();for(i.addLast(o),n.add(o),e.setVisited(!0);!i.isEmpty();){var a=i.removeFirst();n.add(a),t.computeNodeDepth(a);for(var s=a.getEdges().iterator();s.hasNext();){var u=s.next(),c=u.getSym();if(!c.isVisited()){var f=c.getNode();n.contains(f)||(i.addLast(f),n.add(f))}}}};dr.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};dr.prototype.getEnvelope=function(){if(this._env===null){for(var e=new re,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),i=n.getEdge().getCoordinates(),o=0;o<i.length-1;o++)e.expandToInclude(i[o]);this._env=e}return this._env};dr.prototype.addReachable=function(e){var t=this,n=new Zn;for(n.add(e);!n.empty();){var i=n.pop();t.add(i,n)}};dr.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(j.LEFT,e.getDepth(j.RIGHT)),t.setDepth(j.RIGHT,e.getDepth(j.LEFT))};dr.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();n._dirEdgeList.add(o);var a=o.getSym(),s=a.getNode();s.isVisited()||t.push(s)}};dr.prototype.getNodes=function(){return this._nodes};dr.prototype.getDirectedEdges=function(){return this._dirEdgeList};dr.prototype.interfaces_=function(){return[nn]};dr.prototype.getClass=function(){return dr};var Fe=function r(){var e=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[j.ON]=n}else if(arguments[0]instanceof r){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2];this.init(3),this.location[j.ON]=a,this.location[j.LEFT]=s,this.location[j.RIGHT]=u}};Fe.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};Fe.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==H.NONE)return!1;return!0};Fe.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===H.NONE&&(t.location[n]=e)};Fe.prototype.isLine=function(){return this.location.length===1};Fe.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[j.ON]=this.location[j.ON],n[j.LEFT]=H.NONE,n[j.RIGHT]=H.NONE,this.location=n}for(var i=0;i<this.location.length;i++)t.location[i]===H.NONE&&i<e.location.length&&(t.location[i]=e.location[i])};Fe.prototype.getLocations=function(){return this.location};Fe.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[j.LEFT];this.location[j.LEFT]=this.location[j.RIGHT],this.location[j.RIGHT]=e};Fe.prototype.toString=function(){var e=new $n;return this.location.length>1&&e.append(H.toLocationSymbol(this.location[j.LEFT])),e.append(H.toLocationSymbol(this.location[j.ON])),this.location.length>1&&e.append(H.toLocationSymbol(this.location[j.RIGHT])),e.toString()};Fe.prototype.setLocations=function(e,t,n){this.location[j.ON]=e,this.location[j.LEFT]=t,this.location[j.RIGHT]=n};Fe.prototype.get=function(e){return e<this.location.length?this.location[e]:H.NONE};Fe.prototype.isArea=function(){return this.location.length>1};Fe.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===H.NONE)return!0;return!1};Fe.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(j.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};Fe.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(H.NONE)};Fe.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};Fe.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};var Le=function r(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Fe(e),this.elt[1]=new Fe(e)}else if(arguments[0]instanceof r){var t=arguments[0];this.elt[0]=new Fe(t.elt[0]),this.elt[1]=new Fe(t.elt[1])}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[0]=new Fe(H.NONE),this.elt[1]=new Fe(H.NONE),this.elt[n].setLocation(i)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Fe(o,a,s),this.elt[1]=new Fe(o,a,s)}else if(arguments.length===4){var u=arguments[0],c=arguments[1],f=arguments[2],l=arguments[3];this.elt[0]=new Fe(H.NONE,H.NONE,H.NONE),this.elt[1]=new Fe(H.NONE,H.NONE,H.NONE),this.elt[u].setLocations(c,f,l)}};Le.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};Le.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};Le.prototype.isNull=function(e){return this.elt[e].isNull()};Le.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};Le.prototype.isLine=function(e){return this.elt[e].isLine()};Le.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new Fe(e.elt[n]):t.elt[n].merge(e.elt[n])};Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Le.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(j.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};Le.prototype.toString=function(){var e=new $n;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};Le.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};Le.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};Le.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(j.ON,t)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this.elt[n].setLocation(i,o)}};Le.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};Le.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};Le.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Fe(this.elt[e].location[0]))};Le.prototype.interfaces_=function(){return[]};Le.prototype.getClass=function(){return Le};Le.toLineLabel=function(e){for(var t=new Le(H.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var it=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $,this._pts=new $,this._label=new Le(H.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};it.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ee.isCCW(this._ring.getCoordinates())};it.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};it.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,i=!0;do{if(n===null)throw new zi("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new zi("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var o=n.getLabel();he.isTrue(o.isArea()),t.mergeLabel(o),t.addPoints(n.getEdge(),n.isForward(),i),i=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};it.prototype.getLinearRing=function(){return this._ring};it.prototype.getCoordinate=function(e){return this._pts.get(e)};it.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),i=n.getEdges().getOutgoingDegree(e);i>e._maxNodeDegree&&(e._maxNodeDegree=i),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};it.prototype.addPoints=function(e,t,n){var i=this,o=e.getCoordinates();if(t){var a=1;n&&(a=0);for(var s=a;s<o.length;s++)i._pts.add(o[s])}else{var u=o.length-2;n&&(u=o.length-1);for(var c=u;c>=0;c--)i._pts.add(o[c])}};it.prototype.isHole=function(){return this._isHole};it.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};it.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!ee.isPointInRing(e,t.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(e))return!1}return!0};it.prototype.addHole=function(e){this._holes.add(e)};it.prototype.isShell=function(){return this._shell===null};it.prototype.getLabel=function(){return this._label};it.prototype.getEdges=function(){return this._edges};it.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};it.prototype.getShell=function(){return this._shell};it.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=t.getLocation(n,j.RIGHT);if(i===H.NONE)return null;if(this._label.getLocation(n)===H.NONE)return this._label.setLocation(n,i),null}};it.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};it.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)n[i]=t._holes.get(i).getLinearRing();var o=e.createPolygon(this.getLinearRing(),n);return o};it.prototype.interfaces_=function(){return[]};it.prototype.getClass=function(){return it};var __=function(r){function e(){var t=arguments[0],n=arguments[1];r.call(this,t,n)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(n,i){n.setMinEdgeRing(i)},e.prototype.getNext=function(n){return n.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(it),b_=function(r){function e(){var t=arguments[0],n=arguments[1];r.call(this,t,n)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var n=this,i=new $,o=this._startDe;do{if(o.getMinEdgeRing()===null){var a=new __(o,n._geometryFactory);i.add(a)}o=o.getNext()}while(o!==this._startDe);return i},e.prototype.setEdgeRing=function(n,i){n.setEdgeRing(i)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(n),i=i.getNext()}while(i!==this._startDe)},e.prototype.getNext=function(n){return n.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(it),qr=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._label=e}}};qr.prototype.setVisited=function(e){this._isVisited=e};qr.prototype.setInResult=function(e){this._isInResult=e};qr.prototype.isCovered=function(){return this._isCovered};qr.prototype.isCoveredSet=function(){return this._isCoveredSet};qr.prototype.setLabel=function(e){this._label=e};qr.prototype.getLabel=function(){return this._label};qr.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};qr.prototype.updateIM=function(e){he.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};qr.prototype.isInResult=function(){return this._isInResult};qr.prototype.isVisited=function(){return this._isVisited};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};var Gc=function(r){function e(){r.call(this),this._coord=null,this._edges=null;var t=arguments[0],n=arguments[1];this._coord=t,this._edges=n,this._label=new Le(0,H.NONE)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(n){},e.prototype.computeMergedLocation=function(n,i){var o=H.NONE;if(o=this._label.getLocation(i),!n.isNull(i)){var a=n.getLocation(i);o!==H.BOUNDARY&&(o=a)}return o},e.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];this._label===null?this._label=new Le(n,i):this._label.setLocation(n,i)}else return r.prototype.setLabel.apply(this,arguments)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof e){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof Le)for(var o=arguments[0],a=0;a<2;a++){var s=n.computeMergedLocation(o,a),u=n._label.getLocation(a);u===H.NONE&&n._label.setLocation(a,s)}},e.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},e.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var i=H.NONE;this._label!==null&&(i=this._label.getLocation(n));var o=null;switch(i){case H.BOUNDARY:o=H.INTERIOR;break;case H.INTERIOR:o=H.BOUNDARY;break;default:o=H.BOUNDARY;break}this._label.setLocation(n,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qr),Hn=function(){this.nodeMap=new Qt,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Hn.prototype.find=function(e){return this.nodeMap.get(e)};Hn.prototype.addNode=function(){if(arguments[0]instanceof q){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof Gc){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return i===null?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}};Hn.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Hn.prototype.iterator=function(){return this.nodeMap.values().iterator()};Hn.prototype.values=function(){return this.nodeMap.values()};Hn.prototype.getBoundaryNodes=function(e){for(var t=new $,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(e)===H.BOUNDARY&&t.add(i)}return t};Hn.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Hn.prototype.interfaces_=function(){return[]};Hn.prototype.getClass=function(){return Hn};var De=function(){},Su={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};De.prototype.interfaces_=function(){return[]};De.prototype.getClass=function(){return De};De.isNorthern=function(e){return e===De.NE||e===De.NW};De.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};De.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var i=e<t?e:t,o=e>t?e:t;return i===0&&o===3?3:i};De.isInHalfPlane=function(e,t){return t===De.SE?e===De.SE||e===De.SW:e===t||e===t+1};De.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new qe("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?De.NE:De.SE:t>=0?De.NW:De.SW}else if(arguments[0]instanceof q&&arguments[1]instanceof q){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new qe("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?De.NE:De.SE:i.y>=n.y?De.NW:De.SW}};Su.NE.get=function(){return 0};Su.NW.get=function(){return 1};Su.SW.get=function(){return 2};Su.SE.get=function(){return 3};Object.defineProperties(De,Su);var er=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2],o=null;this._edge=t,this.init(n,i),this._label=o}else if(arguments.length===4){var a=arguments[0],s=arguments[1],u=arguments[2],c=arguments[3];this._edge=a,this.init(s,u),this._label=c}};er.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:ee.computeOrientation(e._p0,e._p1,this._p1)};er.prototype.getDy=function(){return this._dy};er.prototype.getCoordinate=function(){return this._p0};er.prototype.setNode=function(e){this._node=e};er.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),o=n.substring(i+1);e.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};er.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};er.prototype.getDirectedCoordinate=function(){return this._p1};er.prototype.getDx=function(){return this._dx};er.prototype.getLabel=function(){return this._label};er.prototype.getEdge=function(){return this._edge};er.prototype.getQuadrant=function(){return this._quadrant};er.prototype.getNode=function(){return this._node};er.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),i=t.substring(n+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};er.prototype.computeLabel=function(e){};er.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=De.quadrant(this._dx,this._dy),he.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};er.prototype.interfaces_=function(){return[nn]};er.prototype.getClass=function(){return er};var Nl=function(r){function e(){var t=arguments[0],n=arguments[1];if(r.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var i=t.getNumPoints()-1;this.init(t.getCoordinate(i),t.getCoordinate(i-1))}this.computeDirectedLabel()}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(n){return this._depth[n]},e.prototype.setVisited=function(n){this._isVisited=n},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(n,i){if(this._depth[n]!==-999&&this._depth[n]!==i)throw new zi("assigned depths do not match",this.getCoordinate());this._depth[n]=i},e.prototype.isInteriorAreaEdge=function(){for(var n=this,i=!0,o=0;o<2;o++)n._label.isArea(o)&&n._label.getLocation(o,j.LEFT)===H.INTERIOR&&n._label.getLocation(o,j.RIGHT)===H.INTERIOR||(i=!1);return i},e.prototype.setNextMin=function(n){this._nextMin=n},e.prototype.print=function(n){r.prototype.print.call(this,n),n.print(" "+this._depth[j.LEFT]+"/"+this._depth[j.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},e.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},e.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,H.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,H.EXTERIOR);return n&&i&&o},e.prototype.setEdgeRing=function(n){this._edgeRing=n},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},e.prototype.setInResult=function(n){this._isInResult=n},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},e.prototype.setSym=function(n){this._sym=n},e.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},e.prototype.setEdgeDepths=function(n,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var a=1;n===j.LEFT&&(a=-1);var s=j.opposite(n),u=o*a,c=i+u;this.setDepth(n,i),this.setDepth(s,c)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(n){this._next=n},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(n,i){return n===H.EXTERIOR&&i===H.INTERIOR?1:n===H.INTERIOR&&i===H.EXTERIOR?-1:0},e}(er),Xa=function(){};Xa.prototype.createNode=function(e){return new Gc(e,null)};Xa.prototype.interfaces_=function(){return[]};Xa.prototype.getClass=function(){return Xa};var Ke=function(){if(this._edges=new $,this._nodes=null,this._edgeEndList=new $,arguments.length===0)this._nodes=new Hn(new Xa);else if(arguments.length===1){var e=arguments[0];this._nodes=new Hn(e)}};Ke.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var i=t._edges.get(n);i.print(e),i.eiList.print(e)}};Ke.prototype.find=function(e){return this._nodes.find(e)};Ke.prototype.addNode=function(){if(arguments[0]instanceof Gc){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof q){var t=arguments[0];return this._nodes.addNode(t)}};Ke.prototype.getNodeIterator=function(){return this._nodes.iterator()};Ke.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};Ke.prototype.debugPrintln=function(e){Vt.out.println(e)};Ke.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var i=n.getLabel();return i!==null&&i.getLocation(e)===H.BOUNDARY};Ke.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};Ke.prototype.matchInSameDirection=function(e,t,n,i){return e.equals(n)?ee.computeOrientation(e,t,i)===ee.COLLINEAR&&De.quadrant(e,t)===De.quadrant(n,i):!1};Ke.prototype.getEdgeEnds=function(){return this._edgeEndList};Ke.prototype.debugPrint=function(e){Vt.out.print(e)};Ke.prototype.getEdgeIterator=function(){return this._edges.iterator()};Ke.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),a=o.getCoordinates();if(n.matchInSameDirection(e,t,a[0],a[1])||n.matchInSameDirection(e,t,a[a.length-1],a[a.length-2]))return o}return null};Ke.prototype.insertEdge=function(e){this._edges.add(e)};Ke.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};Ke.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next();t._edges.add(i);var o=new Nl(i,!0),a=new Nl(i,!1);o.setSym(a),a.setSym(o),t.add(o),t.add(a)}};Ke.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};Ke.prototype.getNodes=function(){return this._nodes.values()};Ke.prototype.findEdge=function(e,t){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),a=o.getCoordinates();if(e.equals(a[0])&&t.equals(a[1]))return o}return null};Ke.prototype.interfaces_=function(){return[]};Ke.prototype.getClass=function(){return Ke};Ke.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var Lr=function(){this._geometryFactory=null,this._shellList=new $;var e=arguments[0];this._geometryFactory=e};Lr.prototype.sortShellsAndHoles=function(e,t,n){for(var i=e.iterator();i.hasNext();){var o=i.next();o.isHole()?n.add(o):t.add(o)}};Lr.prototype.computePolygons=function(e){for(var t=this,n=new $,i=e.iterator();i.hasNext();){var o=i.next(),a=o.toPolygon(t._geometryFactory);n.add(a)}return n};Lr.prototype.placeFreeHoles=function(e,t){for(var n=this,i=t.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var a=n.findEdgeRingContaining(o,e);if(a===null)throw new zi("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(a)}}};Lr.prototype.buildMinimalEdgeRings=function(e,t,n){for(var i=this,o=new $,a=e.iterator();a.hasNext();){var s=a.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var u=s.buildMinimalRings(),c=i.findShell(u);c!==null?(i.placePolygonHoles(c,u),t.add(c)):n.addAll(u)}else o.add(s)}return o};Lr.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};Lr.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new $,i=e.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var a=new b_(o,t._geometryFactory);n.add(a),a.setInResult()}}return n};Lr.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(e)}};Lr.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};Lr.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),i=n.getEnvelopeInternal(),o=n.getCoordinateN(0),a=null,s=null,u=t.iterator();u.hasNext();){var c=u.next(),f=c.getLinearRing(),l=f.getEnvelopeInternal();a!==null&&(s=a.getLinearRing().getEnvelopeInternal());var p=!1;l.contains(i)&&ee.isPointInRing(o,f.getCoordinates())&&(p=!0),p&&(a===null||s.contains(l))&&(a=c)}return a};Lr.prototype.findShell=function(e){for(var t=0,n=null,i=e.iterator();i.hasNext();){var o=i.next();o.isHole()||(n=o,t++)}return he.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};Lr.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];Ke.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(t),o=new $,a=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(a,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};var Ya=function(){};Ya.prototype.getBounds=function(){};Ya.prototype.interfaces_=function(){return[]};Ya.prototype.getClass=function(){return Ya};var dn=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};dn.prototype.getItem=function(){return this._item};dn.prototype.getBounds=function(){return this._bounds};dn.prototype.interfaces_=function(){return[Ya,on]};dn.prototype.getClass=function(){return dn};var Ui=function(){this._size=null,this._items=null,this._size=0,this._items=new $,this._items.add(null)};Ui.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};Ui.prototype.size=function(){return this._size};Ui.prototype.reorder=function(e){for(var t=this,n=null,i=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(i)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,i)};Ui.prototype.clear=function(){this._size=0,this._items.clear()};Ui.prototype.isEmpty=function(){return this._size===0};Ui.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};Ui.prototype.interfaces_=function(){return[]};Ui.prototype.getClass=function(){return Ui};var fo=function(){};fo.prototype.visitItem=function(e){};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};var ha=function(){};ha.prototype.insert=function(e,t){};ha.prototype.remove=function(e,t){};ha.prototype.query=function(){};ha.prototype.interfaces_=function(){return[]};ha.prototype.getClass=function(){return ha};var ft=function(){if(this._childBoundables=new $,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._level=e}}},Mg={serialVersionUID:{configurable:!0}};ft.prototype.getLevel=function(){return this._level};ft.prototype.size=function(){return this._childBoundables.size()};ft.prototype.getChildBoundables=function(){return this._childBoundables};ft.prototype.addChildBoundable=function(e){he.isTrue(this._bounds===null),this._childBoundables.add(e)};ft.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};ft.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};ft.prototype.interfaces_=function(){return[Ya,on]};ft.prototype.getClass=function(){return ft};Mg.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(ft,Mg);var pn=function(){};pn.reverseOrder=function(){return{compare:function(t,n){return n.compareTo(t)}}};pn.min=function(e){return pn.sort(e),e.get(0)};pn.sort=function(e,t){var n=e.toArray();t?To.sort(n,t):To.sort(n);for(var i=e.iterator(),o=0,a=n.length;o<a;o++)i.next(),i.set(n[o])};pn.singletonList=function(e){var t=new $;return t.add(e),t};var rt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};rt.prototype.expandToQueue=function(e,t){var n=rt.isComposite(this._boundable1),i=rt.isComposite(this._boundable2);if(n&&i)return rt.area(this._boundable1)>rt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(i)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new qe("neither boundable is composite")};rt.prototype.isLeaves=function(){return!(rt.isComposite(this._boundable1)||rt.isComposite(this._boundable2))};rt.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};rt.prototype.expand=function(e,t,n,i){for(var o=this,a=e.getChildBoundables(),s=a.iterator();s.hasNext();){var u=s.next(),c=new rt(u,t,o._itemDistance);c.getDistance()<i&&n.add(c)}};rt.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};rt.prototype.getDistance=function(){return this._distance};rt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};rt.prototype.interfaces_=function(){return[nn]};rt.prototype.getClass=function(){return rt};rt.area=function(e){return e.getBounds().getArea()};rt.isComposite=function(e){return e instanceof ft};var mt=function r(){if(this._root=null,this._built=!1,this._itemBoundables=new $,this._nodeCapacity=null,arguments.length===0){var e=r.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(arguments.length===1){var t=arguments[0];he.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}},Vc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};mt.prototype.getNodeCapacity=function(){return this._nodeCapacity};mt.prototype.lastNode=function(e){return e.get(e.size()-1)};mt.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof ft?n+=e.size(o):o instanceof dn&&(n+=1)}return n}};mt.prototype.removeItem=function(e,t){for(var n=null,i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof dn&&o.getItem()===t&&(n=o)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};mt.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new $:t}else if(arguments.length===1){for(var n=arguments[0],i=new $,o=n.getChildBoundables().iterator();o.hasNext();){var a=o.next();if(a instanceof ft){var s=e.itemsTree(a);s!==null&&i.add(s)}else a instanceof dn?i.add(a.getItem()):he.shouldNeverReachHere()}return i.size()<=0?null:i}};mt.prototype.insert=function(e,t){he.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new dn(e,t))};mt.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new $;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];if(he.isTrue(i>-2),o.getLevel()===i)return a.add(o),null;for(var s=o.getChildBoundables().iterator();s.hasNext();){var u=s.next();u instanceof ft?e.boundablesAtLevel(i,u,a):(he.isTrue(u instanceof dn),i===-1&&a.add(u))}return null}};mt.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new $;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(ae(arguments[2],fo)&&arguments[0]instanceof Object&&arguments[1]instanceof ft)for(var a=arguments[0],s=arguments[1],u=arguments[2],c=s.getChildBoundables(),f=0;f<c.size();f++){var l=c.get(f);e.getIntersectsOp().intersects(l.getBounds(),a)&&(l instanceof ft?e.query(a,l,u):l instanceof dn?u.visitItem(l.getItem()):he.shouldNeverReachHere())}else if(ae(arguments[2],cn)&&arguments[0]instanceof Object&&arguments[1]instanceof ft)for(var p=arguments[0],b=arguments[1],_=arguments[2],E=b.getChildBoundables(),R=0;R<E.size();R++){var D=E.get(R);e.getIntersectsOp().intersects(D.getBounds(),p)&&(D instanceof ft?e.query(p,D,_):D instanceof dn?_.add(D.getItem()):he.shouldNeverReachHere())}}};mt.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};mt.prototype.getRoot=function(){return this.build(),this._root};mt.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2],s=this.removeItem(o,a);if(s)return!0;for(var u=null,c=o.getChildBoundables().iterator();c.hasNext();){var f=c.next();if(e.getIntersectsOp().intersects(f.getBounds(),i)&&f instanceof ft&&(s=e.remove(i,f,a),s)){u=f;break}}return u!==null&&u.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(u),s}};mt.prototype.createHigherLevels=function(e,t){he.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};mt.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof ft){var a=e.depth(o);a>n&&(n=a)}}return n+1}};mt.prototype.createParentBoundables=function(e,t){var n=this;he.isTrue(!e.isEmpty());var i=new $;i.add(this.createNode(t));var o=new $(e);pn.sort(o,this.getComparator());for(var a=o.iterator();a.hasNext();){var s=a.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(t)),n.lastNode(i).addChildBoundable(s)}return i};mt.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};mt.prototype.interfaces_=function(){return[on]};mt.prototype.getClass=function(){return mt};mt.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};Vc.IntersectsOp.get=function(){return w_};Vc.serialVersionUID.get=function(){return-3886435814360241e3};Vc.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(mt,Vc);var w_=function(){},ja=function(){};ja.prototype.distance=function(e,t){};ja.prototype.interfaces_=function(){return[]};ja.prototype.getClass=function(){return ja};var Ng=function(r){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,r.call(this,n)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var a=this;he.isTrue(i.length>0);for(var s=new $,u=0;u<i.length;u++)s.addAll(a.createParentBoundablesFromVerticalSlice(i[u],o));return s},e.prototype.createNode=function(i){return new Xd(i)},e.prototype.size=function(){return arguments.length===0?r.prototype.size.call(this):r.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;r.prototype.insert.call(this,i,o)}else return r.prototype.insert.apply(this,arguments)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(i,o){for(var a=Math.trunc(Math.ceil(i.size()/o)),s=new Array(o).fill(null),u=i.iterator(),c=0;c<o;c++){s[c]=new $;for(var f=0;u.hasNext()&&f<a;){var l=u.next();s[c].add(l),f++}}return s},e.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return r.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],a=arguments[1];r.prototype.query.call(this,o,a)}else if(arguments.length===3){if(ae(arguments[2],fo)&&arguments[0]instanceof Object&&arguments[1]instanceof ft){var s=arguments[0],u=arguments[1],c=arguments[2];r.prototype.query.call(this,s,u,c)}else if(ae(arguments[2],cn)&&arguments[0]instanceof Object&&arguments[1]instanceof ft){var f=arguments[0],l=arguments[1],p=arguments[2];r.prototype.query.call(this,f,l,p)}}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return r.prototype.createParentBoundables.call(this,i,o)},e.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return r.prototype.remove.call(this,i,o)}else return r.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return arguments.length===0?r.prototype.depth.call(this):r.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(i,o){he.isTrue(!i.isEmpty());var a=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),s=new $(i);pn.sort(s,e.xComparator);var u=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(a))));return this.createParentBoundablesFromVerticalSlices(u,o)},e.prototype.nearestNeighbour=function(){if(arguments.length===1){if(ae(arguments[0],ja)){var i=arguments[0],o=new rt(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof rt){var a=arguments[0];return this.nearestNeighbour(a,ue.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof e&&ae(arguments[1],ja)){var s=arguments[0],u=arguments[1],c=new rt(this.getRoot(),s.getRoot(),u);return this.nearestNeighbour(c)}else if(arguments[0]instanceof rt&&typeof arguments[1]=="number"){var f=arguments[0],l=arguments[1],p=l,b=null,_=new Ui;for(_.add(f);!_.isEmpty()&&p>0;){var E=_.poll(),R=E.getDistance();if(R>=p)break;E.isLeaves()?(p=R,b=E):E.expandToQueue(_,p)}return[b.getBoundable(0).getItem(),b.getBoundable(1).getItem()]}}else if(arguments.length===3){var D=arguments[0],m=arguments[1],x=arguments[2],M=new dn(D,m),O=new rt(this.getRoot(),M,x);return this.nearestNeighbour(O)[0]}},e.prototype.interfaces_=function(){return[ha,on]},e.prototype.getClass=function(){return e},e.centreX=function(i){return e.avg(i.getMinX(),i.getMaxX())},e.avg=function(i,o){return(i+o)/2},e.centreY=function(i){return e.avg(i.getMinY(),i.getMaxY())},t.STRtreeNode.get=function(){return Xd},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[Ua]},compare:function(n,i){return r.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[Ua]},compare:function(n,i){return r.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[r.IntersectsOp]},intersects:function(n,i){return n.intersects(i)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,t),e}(mt),Xd=function(r){function e(){var t=arguments[0];r.call(this,t)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var n=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();n===null?n=new re(o.getBounds()):n.expandToInclude(o.getBounds())}return n},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ft),br=function(){};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};br.relativeSign=function(e,t){return e<t?-1:e>t?1:0};br.compare=function(e,t,n){if(t.equals2D(n))return 0;var i=br.relativeSign(t.x,n.x),o=br.relativeSign(t.y,n.y);switch(e){case 0:return br.compareValue(i,o);case 1:return br.compareValue(o,i);case 2:return br.compareValue(o,-i);case 3:return br.compareValue(-i,o);case 4:return br.compareValue(-i,-o);case 5:return br.compareValue(-o,-i);case 6:return br.compareValue(-o,i);case 7:return br.compareValue(i,-o)}return he.shouldNeverReachHere("invalid octant value"),0};br.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var lo=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._segString=e,this.coord=new q(t),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!t.equals2D(e.getCoordinate(n))};lo.prototype.getCoordinate=function(){return this.coord};lo.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};lo.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:br.compare(this._segmentOctant,this.coord,t.coord)};lo.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};lo.prototype.isInterior=function(){return this._isInterior};lo.prototype.interfaces_=function(){return[nn]};lo.prototype.getClass=function(){return lo};var pr=function(){this._nodeMap=new Qt,this._edge=null;var e=arguments[0];this._edge=e};pr.prototype.getSplitCoordinates=function(){var e=this,t=new xu;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next();e.addEdgeCoordinates(i,o,t),i=o}return t.toCoordinateArray()};pr.prototype.addCollapsedNodes=function(){var e=this,t=new $;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var i=n.next().intValue();e.add(e._edge.getCoordinate(i),i)}};pr.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};pr.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var i=t._edge.getCoordinate(n),o=t._edge.getCoordinate(n+2);i.equals2D(o)&&e.add(new kn(n+1))}};pr.prototype.addEdgeCoordinates=function(e,t,n){var i=this,o=this._edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(o);n.add(new q(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(i._edge.getCoordinate(s));a&&n.add(new q(t.coord))};pr.prototype.iterator=function(){return this._nodeMap.values().iterator()};pr.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),a=t.createSplitEdge(i,o);e.add(a),i=o}};pr.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-e.segmentIndex;return t.isInterior()||i--,i===1?(n[0]=e.segmentIndex+1,!0):!1};pr.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var a=i.next(),s=t.findCollapseIndex(o,a,n);s&&e.add(new kn(n[0])),o=a}};pr.prototype.getEdge=function(){return this._edge};pr.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};pr.prototype.createSplitEdge=function(e,t){var n=this,i=t.segmentIndex-e.segmentIndex+2,o=this._edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(o);a||i--;var s=new Array(i).fill(null),u=0;s[u++]=new q(e.coord);for(var c=e.segmentIndex+1;c<=t.segmentIndex;c++)s[u++]=n._edge.getCoordinate(c);return a&&(s[u]=new q(t.coord)),new tt(s,this._edge.getData())};pr.prototype.add=function(e,t){var n=new lo(this._edge,e,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(n);return i!==null?(he.isTrue(i.coord.equals2D(e),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)};pr.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),i=n.getCoordinate(0);if(!i.equals2D(t[0]))throw new ki("bad split edge start point at "+i);var o=e.get(e.size()-1),a=o.getCoordinates(),s=a[a.length-1];if(!s.equals2D(t[t.length-1]))throw new ki("bad split edge end point at "+s)};pr.prototype.interfaces_=function(){return[]};pr.prototype.getClass=function(){return pr};var da=function(){};da.prototype.interfaces_=function(){return[]};da.prototype.getClass=function(){return da};da.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new qe("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),i=Math.abs(t);return e>=0?t>=0?n>=i?0:1:n>=i?7:6:t>=0?n>=i?3:2:n>=i?4:5}else if(arguments[0]instanceof q&&arguments[1]instanceof q){var o=arguments[0],a=arguments[1],s=a.x-o.x,u=a.y-o.y;if(s===0&&u===0)throw new qe("Cannot compute the octant for two identical points "+o);return da.octant(s,u)}};var hi=function(){};hi.prototype.getCoordinates=function(){};hi.prototype.size=function(){};hi.prototype.getCoordinate=function(e){};hi.prototype.isClosed=function(){};hi.prototype.setData=function(e){};hi.prototype.getData=function(){};hi.prototype.interfaces_=function(){return[]};hi.prototype.getClass=function(){return hi};var au=function(){};au.prototype.addIntersection=function(e,t){};au.prototype.interfaces_=function(){return[hi]};au.prototype.getClass=function(){return au};var tt=function(){this._nodeList=new pr(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};tt.prototype.getCoordinates=function(){return this._pts};tt.prototype.size=function(){return this._pts.length};tt.prototype.getCoordinate=function(e){return this._pts[e]};tt.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};tt.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};tt.prototype.setData=function(e){this._data=e};tt.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:da.octant(e,t)};tt.prototype.getData=function(){return this._data};tt.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[3],a=new q(n.getIntersection(o));this.addIntersection(a,i)}};tt.prototype.toString=function(){return ln.toLineString(new Ze(this._pts))};tt.prototype.getNodeList=function(){return this._nodeList};tt.prototype.addIntersectionNode=function(e,t){var n=t,i=n+1;if(i<this._pts.length){var o=this._pts[i];e.equals2D(o)&&(n=i)}var a=this._nodeList.add(e,n);return a};tt.prototype.addIntersections=function(e,t,n){for(var i=this,o=0;o<e.getIntersectionNum();o++)i.addIntersection(e,t,n,o)};tt.prototype.interfaces_=function(){return[au]};tt.prototype.getClass=function(){return tt};tt.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new $;return tt.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],i=arguments[1],o=n.iterator();o.hasNext();){var a=o.next();a.getNodeList().addSplitEdges(i)}};var ie=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new q,this.p1=new q;else if(arguments.length===1){var e=arguments[0];this.p0=new q(e.p0),this.p1=new q(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this.p0=new q(t,n),this.p1=new q(i,o)}},Pg={serialVersionUID:{configurable:!0}};ie.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};ie.prototype.orientationIndex=function(){if(arguments[0]instanceof ie){var e=arguments[0],t=ee.orientationIndex(this.p0,this.p1,e.p0),n=ee.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof q){var i=arguments[0];return ee.orientationIndex(this.p0,this.p1,i)}};ie.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};ie.prototype.isVertical=function(){return this.p0.x===this.p1.x};ie.prototype.equals=function(e){if(!(e instanceof ie))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};ie.prototype.intersection=function(e){var t=new $o;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};ie.prototype.project=function(){if(arguments[0]instanceof q){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new q(e);var t=this.projectionFactor(e),n=new q;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof ie){var i=arguments[0],o=this.projectionFactor(i.p0),a=this.projectionFactor(i.p1);if(o>=1&&a>=1||o<=0&&a<=0)return null;var s=this.project(i.p0);o<0&&(s=this.p0),o>1&&(s=this.p1);var u=this.project(i.p1);return a<0&&(u=this.p0),a>1&&(u=this.p1),new ie(s,u)}};ie.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};ie.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};ie.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};ie.prototype.distancePerpendicular=function(e){return ee.distancePointLinePerpendicular(e,this.p0,this.p1)};ie.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};ie.prototype.midPoint=function(){return ie.midPoint(this.p0,this.p1)};ie.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=t*t+n*n;if(i<=0)return ue.NaN;var o=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/i;return o};ie.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),i=ue.MAX_VALUE,o=null,a=this.closestPoint(e.p0);i=a.distance(e.p0),n[0]=a,n[1]=e.p0;var s=this.closestPoint(e.p1);o=s.distance(e.p1),o<i&&(i=o,n[0]=s,n[1]=e.p1);var u=e.closestPoint(this.p0);o=u.distance(this.p0),o<i&&(i=o,n[0]=this.p0,n[1]=u);var c=e.closestPoint(this.p1);return o=c.distance(this.p1),o<i&&(i=o,n[0]=this.p1,n[1]=c),n};ie.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),i=this.p1.distance(e);return n<i?this.p0:this.p1};ie.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};ie.prototype.getLength=function(){return this.p0.distance(this.p1)};ie.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};ie.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};ie.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};ie.prototype.lineIntersection=function(e){try{var t=un.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof ms))throw n}finally{}return null};ie.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};ie.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),i=this.p0.y+e*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,s=Math.sqrt(o*o+a*a),u=0,c=0;if(t!==0){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");u=t*o/s,c=t*a/s}var f=n-c,l=i+u,p=new q(f,l);return p};ie.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};ie.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||ue.isNaN(t))&&(t=1),t};ie.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};ie.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};ie.prototype.distance=function(){if(arguments[0]instanceof ie){var e=arguments[0];return ee.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof q){var t=arguments[0];return ee.distancePointLine(t,this.p0,this.p1)}};ie.prototype.pointAlong=function(e){var t=new q;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};ie.prototype.hashCode=function(){var e=ue.doubleToLongBits(this.p0.x);e^=ue.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=ue.doubleToLongBits(this.p1.x);n^=ue.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(n)^Math.trunc(n>>32);return t^i};ie.prototype.interfaces_=function(){return[nn,on]};ie.prototype.getClass=function(){return ie};ie.midPoint=function(e,t){return new q((e.x+t.x)/2,(e.y+t.y)/2)};Pg.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(ie,Pg);var su=function(){this.tempEnv1=new re,this.tempEnv2=new re,this._overlapSeg1=new ie,this._overlapSeg2=new ie};su.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};su.prototype.interfaces_=function(){return[]};su.prototype.getClass=function(){return su};var Rr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=i};Rr.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};Rr.prototype.computeSelect=function(e,t,n,i){var o=this._pts[t],a=this._pts[n];if(i.tempEnv1.init(o,a),n-t===1)return i.select(this,t),null;if(!e.intersects(i.tempEnv1))return null;var s=Math.trunc((t+n)/2);t<s&&this.computeSelect(e,t,s,i),s<n&&this.computeSelect(e,s,n,i)};Rr.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,i=this._start;i<=this._end;i++)t[n++]=e._pts[i];return t};Rr.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};Rr.prototype.setId=function(e){this._id=e};Rr.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};Rr.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new re(e,t)}return this._env};Rr.prototype.getEndIndex=function(){return this._end};Rr.prototype.getStartIndex=function(){return this._start};Rr.prototype.getContext=function(){return this._context};Rr.prototype.getId=function(){return this._id};Rr.prototype.computeOverlapsInternal=function(e,t,n,i,o,a){var s=this._pts[e],u=this._pts[t],c=n._pts[i],f=n._pts[o];if(t-e===1&&o-i===1)return a.overlap(this,e,n,i),null;if(a.tempEnv1.init(s,u),a.tempEnv2.init(c,f),!a.tempEnv1.intersects(a.tempEnv2))return null;var l=Math.trunc((e+t)/2),p=Math.trunc((i+o)/2);e<l&&(i<p&&this.computeOverlapsInternal(e,l,n,i,p,a),p<o&&this.computeOverlapsInternal(e,l,n,p,o,a)),l<t&&(i<p&&this.computeOverlapsInternal(l,t,n,i,p,a),p<o&&this.computeOverlapsInternal(l,t,n,p,o,a))};Rr.prototype.interfaces_=function(){return[]};Rr.prototype.getClass=function(){return Rr};var Dn=function(){};Dn.prototype.interfaces_=function(){return[]};Dn.prototype.getClass=function(){return Dn};Dn.getChainStartIndices=function(e){var t=0,n=new $;n.add(new kn(t));do{var i=Dn.findChainEnd(e,t);n.add(new kn(i)),t=i}while(t<e.length-1);var o=Dn.toIntArray(n);return o};Dn.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var i=De.quadrant(e[n],e[n+1]),o=t+1;o<e.length;){if(!e[o-1].equals2D(e[o])){var a=De.quadrant(e[o-1],e[o]);if(a!==i)break}o++}return o-1};Dn.getChains=function(){if(arguments.length===1){var e=arguments[0];return Dn.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],i=new $,o=Dn.getChainStartIndices(t),a=0;a<o.length-1;a++){var s=new Rr(t,o[a],o[a+1],n);i.add(s)}return i}};Dn.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var zo=function(){};zo.prototype.computeNodes=function(e){};zo.prototype.getNodedSubstrings=function(){};zo.prototype.interfaces_=function(){return[]};zo.prototype.getClass=function(){return zo};var uu=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}}};uu.prototype.setSegmentIntersector=function(e){this._segInt=e};uu.prototype.interfaces_=function(){return[zo]};uu.prototype.getClass=function(){return uu};var gh=function(r){function e(n){n?r.call(this,n):r.call(this),this._monoChains=new $,this._index=new Ng,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return tt.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(i){for(var o=this,a=Dn.getChains(i.getCoordinates(),i),s=a.iterator();s.hasNext();){var u=s.next();u.setId(o._idCounter++),o._index.insert(u.getEnvelope(),u),o._monoChains.add(u)}},e.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var a=i.iterator();a.hasNext();)o.add(a.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var i=this,o=new Yd(this._segInt),a=this._monoChains.iterator();a.hasNext();)for(var s=a.next(),u=i._index.query(s.getEnvelope()),c=u.iterator();c.hasNext();){var f=c.next();if(f.getId()>s.getId()&&(s.computeOverlaps(f,o),i._nOverlaps++),i._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.SegmentOverlapAction.get=function(){return Yd},Object.defineProperties(e,t),e}(uu),Yd=function(r){function e(){r.call(this),this._si=null;var t=arguments[0];this._si=t}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=n.getContext(),u=o.getContext();this._si.processIntersections(s,i,u,a)}else return r.prototype.overlap.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(su),Ae=function r(){if(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=r.CAP_ROUND,this._joinStyle=r.JOIN_ROUND,this._mitreLimit=r.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=r.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(n)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}}},Ji={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ae.prototype.getEndCapStyle=function(){return this._endCapStyle};Ae.prototype.isSingleSided=function(){return this._isSingleSided};Ae.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=Ae.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ae.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==Ae.JOIN_ROUND&&(this._quadrantSegments=Ae.DEFAULT_QUADRANT_SEGMENTS)};Ae.prototype.getJoinStyle=function(){return this._joinStyle};Ae.prototype.setJoinStyle=function(e){this._joinStyle=e};Ae.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};Ae.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Ae.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Ae.prototype.setEndCapStyle=function(e){this._endCapStyle=e};Ae.prototype.getMitreLimit=function(){return this._mitreLimit};Ae.prototype.setMitreLimit=function(e){this._mitreLimit=e};Ae.prototype.setSingleSided=function(e){this._isSingleSided=e};Ae.prototype.interfaces_=function(){return[]};Ae.prototype.getClass=function(){return Ae};Ae.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};Ji.CAP_ROUND.get=function(){return 1};Ji.CAP_FLAT.get=function(){return 2};Ji.CAP_SQUARE.get=function(){return 3};Ji.JOIN_ROUND.get=function(){return 1};Ji.JOIN_MITRE.get=function(){return 2};Ji.JOIN_BEVEL.get=function(){return 3};Ji.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};Ji.DEFAULT_MITRE_LIMIT.get=function(){return 5};Ji.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Ae,Ji);var Xe=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ee.COUNTERCLOCKWISE,this._inputLine=e||null},Cu={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Xe.prototype.isDeletable=function(e,t,n,i){var o=this._inputLine[e],a=this._inputLine[t],s=this._inputLine[n];return!this.isConcave(o,a,s)||!this.isShallow(o,a,s,i)?!1:this.isShallowSampled(o,a,e,n,i)};Xe.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),o=!1;i<this._inputLine.length;){var a=!1;e.isDeletable(t,n,i,e._distanceTol)&&(e._isDeleted[n]=Xe.DELETE,a=!0,o=!0),a?t=i:t=n,n=e.findNextNonDeletedIndex(t),i=e.findNextNonDeletedIndex(n)}return o};Xe.prototype.isShallowConcavity=function(e,t,n,i){var o=ee.computeOrientation(e,t,n),a=o===this._angleOrientation;if(!a)return!1;var s=ee.distancePointLine(t,e,n);return s<i};Xe.prototype.isShallowSampled=function(e,t,n,i,o){var a=this,s=Math.trunc((i-n)/Xe.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var u=n;u<i;u+=s)if(!a.isShallow(e,t,a._inputLine[u],o))return!1;return!0};Xe.prototype.isConcave=function(e,t,n){var i=ee.computeOrientation(e,t,n),o=i===this._angleOrientation;return o};Xe.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=ee.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};Xe.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Xe.DELETE;)t++;return t};Xe.prototype.isShallow=function(e,t,n,i){var o=ee.distancePointLine(t,e,n);return o<i};Xe.prototype.collapseLine=function(){for(var e=this,t=new xu,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==Xe.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};Xe.prototype.interfaces_=function(){return[]};Xe.prototype.getClass=function(){return Xe};Xe.simplify=function(e,t){var n=new Xe(e);return n.simplify(t)};Cu.INIT.get=function(){return 0};Cu.DELETE.get=function(){return 1};Cu.KEEP.get=function(){return 1};Cu.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(Xe,Cu);var Hr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $},Lg={COORDINATE_ARRAY_TYPE:{configurable:!0}};Hr.prototype.getCoordinates=function(){var e=this._ptList.toArray(Hr.COORDINATE_ARRAY_TYPE);return e};Hr.prototype.setPrecisionModel=function(e){this._precisionModel=e};Hr.prototype.addPt=function(e){var t=new q(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};Hr.prototype.revere=function(){};Hr.prototype.addPts=function(e,t){var n=this;if(t)for(var i=0;i<e.length;i++)n.addPt(e[i]);else for(var o=e.length-1;o>=0;o--)n.addPt(e[o])};Hr.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};Hr.prototype.toString=function(){var e=new me,t=e.createLineString(this.getCoordinates());return t.toString()};Hr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new q(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};Hr.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};Lg.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Hr,Lg);var _e=function(){},Pa={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};_e.prototype.interfaces_=function(){return[]};_e.prototype.getClass=function(){return _e};_e.toDegrees=function(e){return e*180/Math.PI};_e.normalize=function(e){for(;e>Math.PI;)e-=_e.PI_TIMES_2;for(;e<=-Math.PI;)e+=_e.PI_TIMES_2;return e};_e.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=n.x-t.x,o=n.y-t.y;return Math.atan2(o,i)}};_e.isAcute=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=i*a+o*s;return u>0};_e.isObtuse=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=i*a+o*s;return u<0};_e.interiorAngle=function(e,t,n){var i=_e.angle(t,e),o=_e.angle(t,n);return Math.abs(o-i)};_e.normalizePositive=function(e){if(e<0){for(;e<0;)e+=_e.PI_TIMES_2;e>=_e.PI_TIMES_2&&(e=0)}else{for(;e>=_e.PI_TIMES_2;)e-=_e.PI_TIMES_2;e<0&&(e=0)}return e};_e.angleBetween=function(e,t,n){var i=_e.angle(t,e),o=_e.angle(t,n);return _e.diff(i,o)};_e.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};_e.toRadians=function(e){return e*Math.PI/180};_e.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?_e.COUNTERCLOCKWISE:n<0?_e.CLOCKWISE:_e.NONE};_e.angleBetweenOriented=function(e,t,n){var i=_e.angle(t,e),o=_e.angle(t,n),a=o-i;return a<=-Math.PI?a+_e.PI_TIMES_2:a>Math.PI?a-_e.PI_TIMES_2:a};Pa.PI_TIMES_2.get=function(){return 2*Math.PI};Pa.PI_OVER_2.get=function(){return Math.PI/2};Pa.PI_OVER_4.get=function(){return Math.PI/4};Pa.COUNTERCLOCKWISE.get=function(){return ee.COUNTERCLOCKWISE};Pa.CLOCKWISE.get=function(){return ee.CLOCKWISE};Pa.NONE.get=function(){return ee.COLLINEAR};Object.defineProperties(_e,Pa);var Ue=function r(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ie,this._seg1=new ie,this._offset0=new ie,this._offset1=new ie,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new $o,this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),t.getQuadrantSegments()>=8&&t.getJoinStyle()===Ae.JOIN_ROUND&&(this._closingSegLengthFactor=r.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Iu={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ue.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ee.computeOrientation(this._s0,this._s1,this._s2),i=n===ee.CLOCKWISE&&this._side===j.LEFT||n===ee.COUNTERCLOCKWISE&&this._side===j.RIGHT;n===0?this.addCollinear(t):i?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};Ue.prototype.addLineEndCap=function(e,t){var n=new ie(e,t),i=new ie;this.computeOffsetSegment(n,j.LEFT,this._distance,i);var o=new ie;this.computeOffsetSegment(n,j.RIGHT,this._distance,o);var a=t.x-e.x,s=t.y-e.y,u=Math.atan2(s,a);switch(this._bufParams.getEndCapStyle()){case Ae.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(t,u+Math.PI/2,u-Math.PI/2,ee.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Ae.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Ae.CAP_SQUARE:var c=new q;c.x=Math.abs(this._distance)*Math.cos(u),c.y=Math.abs(this._distance)*Math.sin(u);var f=new q(i.p1.x+c.x,i.p1.y+c.y),l=new q(o.p1.x+c.x,o.p1.y+c.y);this._segList.addPt(f),this._segList.addPt(l);break}};Ue.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};Ue.prototype.addMitreJoin=function(e,t,n,i){var o=!0,a=null;try{a=un.intersection(t.p0,t.p1,n.p0,n.p1);var s=i<=0?1:a.distance(e)/Math.abs(i);s>this._bufParams.getMitreLimit()&&(o=!1)}catch(u){if(u instanceof ms)a=new q(0,0),o=!1;else throw u}finally{}o?this._segList.addPt(a):this.addLimitedMitreJoin(t,n,i,this._bufParams.getMitreLimit())};Ue.prototype.addFilletCorner=function(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,u=Math.atan2(s,a),c=n.x-e.x,f=n.y-e.y,l=Math.atan2(f,c);i===ee.CLOCKWISE?u<=l&&(u+=2*Math.PI):u>=l&&(u-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,u,l,i,o),this._segList.addPt(n)};Ue.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ue.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ae.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ae.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};Ue.prototype.createSquare=function(e){this._segList.addPt(new q(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new q(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new q(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new q(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};Ue.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};Ue.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};Ue.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};Ue.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};Ue.prototype.addLimitedMitreJoin=function(e,t,n,i){var o=this._seg0.p1,a=_e.angle(o,this._seg0.p0),s=_e.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),u=s/2,c=_e.normalize(a+u),f=_e.normalize(c+Math.PI),l=i*n,p=l*Math.abs(Math.sin(u)),b=n-p,_=o.x+l*Math.cos(f),E=o.y+l*Math.sin(f),R=new q(_,E),D=new ie(o,R),m=D.pointAlongOffset(1,b),x=D.pointAlongOffset(1,-b);this._side===j.LEFT?(this._segList.addPt(m),this._segList.addPt(x)):(this._segList.addPt(x),this._segList.addPt(m))};Ue.prototype.computeOffsetSegment=function(e,t,n,i){var o=t===j.LEFT?1:-1,a=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,u=Math.sqrt(a*a+s*s),c=o*n*a/u,f=o*n*s/u;i.p0.x=e.p0.x-f,i.p0.y=e.p0.y+c,i.p1.x=e.p1.x-f,i.p1.y=e.p1.y+c};Ue.prototype.addFilletArc=function(e,t,n,i,o){var a=this,s=i===ee.CLOCKWISE?-1:1,u=Math.abs(t-n),c=Math.trunc(u/this._filletAngleQuantum+.5);if(c<1)return null;for(var f=0,l=u/c,p=f,b=new q;p<u;){var _=t+s*p;b.x=e.x+o*Math.cos(_),b.y=e.y+o*Math.sin(_),a._segList.addPt(b),p+=l}};Ue.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ue.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new q((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new q((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};Ue.prototype.createCircle=function(e){var t=new q(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};Ue.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};Ue.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Hr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Ue.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};Ue.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===Ae.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ae.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ee.CLOCKWISE,this._distance))};Ue.prototype.closeRing=function(){this._segList.closeRing()};Ue.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};Ue.prototype.interfaces_=function(){return[]};Ue.prototype.getClass=function(){return Ue};Iu.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};Iu.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};Iu.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};Iu.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(Ue,Iu);var Er=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};Er.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,i=Math.abs(t),o=this.getSegGen(i);e.length<=1?this.computePointCurve(e[0],o):this.computeOffsetCurve(e,n,o);var a=o.getCoordinates();return n&&ve.reverse(a),a};Er.prototype.computeSingleSidedBufferCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var o=Xe.simplify(e,-i),a=o.length-1;n.initSideSegments(o[a],o[a-1],j.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{n.addSegments(e,!1);var u=Xe.simplify(e,i),c=u.length-1;n.initSideSegments(u[0],u[1],j.LEFT),n.addFirstSegment();for(var f=2;f<=c;f++)n.addNextSegment(u[f],!0)}n.addLastSegment(),n.closeRing()};Er.prototype.computeRingBufferCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);t===j.RIGHT&&(i=-i);var o=Xe.simplify(e,i),a=o.length-1;n.initSideSegments(o[a-1],o[0],t);for(var s=1;s<=a;s++){var u=s!==1;n.addNextSegment(o[s],u)}n.closeRing()};Er.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),i=Xe.simplify(e,n),o=i.length-1;t.initSideSegments(i[0],i[1],j.LEFT);for(var a=2;a<=o;a++)t.addNextSegment(i[a],!0);t.addLastSegment(),t.addLineEndCap(i[o-1],i[o]);var s=Xe.simplify(e,-n),u=s.length-1;t.initSideSegments(s[u],s[u-1],j.LEFT);for(var c=u-2;c>=0;c--)t.addNextSegment(s[c],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()};Er.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case Ae.CAP_ROUND:t.createCircle(e);break;case Ae.CAP_SQUARE:t.createSquare(e);break}};Er.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),i=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],i);else if(this._bufParams.isSingleSided()){var o=t<0;this.computeSingleSidedBufferCurve(e,o,i)}else this.computeLineBufferCurve(e,i);var a=i.getCoordinates();return a};Er.prototype.getBufferParameters=function(){return this._bufParams};Er.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};Er.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return Er.copyCoordinates(e);var i=this.getSegGen(n);return this.computeRingBufferCurve(e,t,i),i.getCoordinates()};Er.prototype.computeOffsetCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){var o=Xe.simplify(e,-i),a=o.length-1;n.initSideSegments(o[a],o[a-1],j.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{var u=Xe.simplify(e,i),c=u.length-1;n.initSideSegments(u[0],u[1],j.LEFT),n.addFirstSegment();for(var f=2;f<=c;f++)n.addNextSegment(u[f],!0)}n.addLastSegment()};Er.prototype.getSegGen=function(e){return new Ue(this._precisionModel,this._bufParams,e)};Er.prototype.interfaces_=function(){return[]};Er.prototype.getClass=function(){return Er};Er.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new q(e[n]);return t};var pa=function(){this._subgraphs=null,this._seg=new ie,this._cga=new ee;var e=arguments[0];this._subgraphs=e},Rg={DepthSegment:{configurable:!0}};pa.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new $,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),a=o.getEnvelope();t.y<a.getMinY()||t.y>a.getMaxY()||e.findStabbedSegments(t,o.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(ae(arguments[2],cn)&&arguments[0]instanceof q&&arguments[1]instanceof Nl)for(var s=arguments[0],u=arguments[1],c=arguments[2],f=u.getEdge().getCoordinates(),l=0;l<f.length-1;l++){e._seg.p0=f[l],e._seg.p1=f[l+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var p=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(p<s.x)&&!e._seg.isHorizontal()&&!(s.y<e._seg.p0.y||s.y>e._seg.p1.y)&&ee.computeOrientation(e._seg.p0,e._seg.p1,s)!==ee.RIGHT){var b=u.getDepth(j.LEFT);e._seg.p0.equals(f[l])||(b=u.getDepth(j.RIGHT));var _=new Uo(e._seg,b);c.add(_)}}else if(ae(arguments[2],cn)&&arguments[0]instanceof q&&ae(arguments[1],cn))for(var E=arguments[0],R=arguments[1],D=arguments[2],m=R.iterator();m.hasNext();){var x=m.next();x.isForward()&&e.findStabbedSegments(E,x,D)}}};pa.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=pn.min(t);return n._leftDepth};pa.prototype.interfaces_=function(){return[]};pa.prototype.getClass=function(){return pa};Rg.DepthSegment.get=function(){return Uo};Object.defineProperties(pa,Rg);var Uo=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new ie(e),this._leftDepth=t};Uo.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Uo.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Uo.prototype.toString=function(){return this._upwardSeg.toString()};Uo.prototype.interfaces_=function(){return[nn]};Uo.prototype.getClass=function(){return Uo};var Ne=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};Ne.prototype.area=function(){return Ne.area(this.p0,this.p1,this.p2)};Ne.prototype.signedArea=function(){return Ne.signedArea(this.p0,this.p1,this.p2)};Ne.prototype.interpolateZ=function(e){if(e===null)throw new qe("Supplied point is null.");return Ne.interpolateZ(e,this.p0,this.p1,this.p2)};Ne.prototype.longestSideLength=function(){return Ne.longestSideLength(this.p0,this.p1,this.p2)};Ne.prototype.isAcute=function(){return Ne.isAcute(this.p0,this.p1,this.p2)};Ne.prototype.circumcentre=function(){return Ne.circumcentre(this.p0,this.p1,this.p2)};Ne.prototype.area3D=function(){return Ne.area3D(this.p0,this.p1,this.p2)};Ne.prototype.centroid=function(){return Ne.centroid(this.p0,this.p1,this.p2)};Ne.prototype.inCentre=function(){return Ne.inCentre(this.p0,this.p1,this.p2)};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};Ne.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};Ne.det=function(e,t,n,i){return e*i-t*n};Ne.interpolateZ=function(e,t,n,i){var o=t.x,a=t.y,s=n.x-o,u=i.x-o,c=n.y-a,f=i.y-a,l=s*f-u*c,p=e.x-o,b=e.y-a,_=(f*p-u*b)/l,E=(-c*p+s*b)/l,R=t.z+_*(n.z-t.z)+E*(i.z-t.z);return R};Ne.longestSideLength=function(e,t,n){var i=e.distance(t),o=t.distance(n),a=n.distance(e),s=i;return o>s&&(s=o),a>s&&(s=a),s};Ne.isAcute=function(e,t,n){return!(!_e.isAcute(e,t,n)||!_e.isAcute(t,n,e)||!_e.isAcute(n,e,t))};Ne.circumcentre=function(e,t,n){var i=n.x,o=n.y,a=e.x-i,s=e.y-o,u=t.x-i,c=t.y-o,f=2*Ne.det(a,s,u,c),l=Ne.det(s,a*a+s*s,c,u*u+c*c),p=Ne.det(a,a*a+s*s,u,u*u+c*c),b=i-l/f,_=o+p/f;return new q(b,_)};Ne.perpendicularBisector=function(e,t){var n=t.x-e.x,i=t.y-e.y,o=new un(e.x+n/2,e.y+i/2,1),a=new un(e.x-i+n/2,e.y+n+i/2,1);return new un(o,a)};Ne.angleBisector=function(e,t,n){var i=t.distance(e),o=t.distance(n),a=i/(i+o),s=n.x-e.x,u=n.y-e.y,c=new q(e.x+a*s,e.y+a*u);return c};Ne.area3D=function(e,t,n){var i=t.x-e.x,o=t.y-e.y,a=t.z-e.z,s=n.x-e.x,u=n.y-e.y,c=n.z-e.z,f=o*c-a*u,l=a*s-i*c,p=i*u-o*s,b=f*f+l*l+p*p,_=Math.sqrt(b)/2;return _};Ne.centroid=function(e,t,n){var i=(e.x+t.x+n.x)/3,o=(e.y+t.y+n.y)/3;return new q(i,o)};Ne.inCentre=function(e,t,n){var i=t.distance(n),o=e.distance(n),a=e.distance(t),s=i+o+a,u=(i*e.x+o*t.x+a*n.x)/s,c=(i*e.y+o*t.y+a*n.y)/s;return new q(u,c)};var Qr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};Qr.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)};Qr.prototype.addPolygon=function(e){var t=this,n=this._distance,i=j.LEFT;this._distance<0&&(n=-this._distance,i=j.RIGHT);var o=e.getExteriorRing(),a=ve.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&a.length<3)return null;this.addPolygonRing(a,n,i,H.EXTERIOR,H.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var u=e.getInteriorRingN(s),c=ve.removeRepeatedPoints(u.getCoordinates());t._distance>0&&t.isErodedCompletely(u,-t._distance)||t.addPolygonRing(c,n,j.opposite(i),H.INTERIOR,H.EXTERIOR)}};Qr.prototype.isTriangleErodedCompletely=function(e,t){var n=new Ne(e[0],e[1],e[2]),i=n.inCentre(),o=ee.distancePointLine(i,n.p0,n.p1);return o<Math.abs(t)};Qr.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=ve.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)};Qr.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var i=new tt(e,new Le(0,H.BOUNDARY,t,n));this._curveList.add(i)};Qr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};Qr.prototype.addPolygonRing=function(e,t,n,i,o){if(t===0&&e.length<fi.MINIMUM_VALID_SIZE)return null;var a=i,s=o;e.length>=fi.MINIMUM_VALID_SIZE&&ee.isCCW(e)&&(a=o,s=i,n=j.opposite(n));var u=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(u,a,s)};Qr.prototype.add=function(e){if(e.isEmpty())return null;e instanceof lt?this.addPolygon(e):e instanceof Je?this.addLineString(e):e instanceof Pr?this.addPoint(e):e instanceof Ja?this.addCollection(e):e instanceof Fo?this.addCollection(e):e instanceof ai?this.addCollection(e):e instanceof hr&&this.addCollection(e)};Qr.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>o};Qr.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);t.add(i)}};Qr.prototype.interfaces_=function(){return[]};Qr.prototype.getClass=function(){return Qr};var $a=function(){};$a.prototype.locate=function(e){};$a.prototype.interfaces_=function(){return[]};$a.prototype.getClass=function(){return $a};var si=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};si.prototype.next=function(){if(this._atStart)return this._atStart=!1,si.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ys;var e=this._parent.getGeometryN(this._index++);return e instanceof hr?(this._subcollectionIterator=new si(e),this._subcollectionIterator.next()):e};si.prototype.remove=function(){throw new Error(this.getClass().getName())};si.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};si.prototype.interfaces_=function(){return[vs]};si.prototype.getClass=function(){return si};si.isAtomic=function(e){return!(e instanceof hr)};var Fr=function(){this._geom=null;var e=arguments[0];this._geom=e};Fr.prototype.locate=function(e){return Fr.locate(e,this._geom)};Fr.prototype.interfaces_=function(){return[$a]};Fr.prototype.getClass=function(){return Fr};Fr.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?ee.isPointInRing(e,t.getCoordinates()):!1};Fr.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Fr.isPointInRing(e,n))return!1;for(var i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i);if(Fr.isPointInRing(e,o))return!1}return!0};Fr.containsPoint=function(e,t){if(t instanceof lt)return Fr.containsPointInPolygon(e,t);if(t instanceof hr)for(var n=new si(t);n.hasNext();){var i=n.next();if(i!==t&&Fr.containsPoint(e,i))return!0}return!1};Fr.locate=function(e,t){return t.isEmpty()?H.EXTERIOR:Fr.containsPoint(e,t)?H.INTERIOR:H.EXTERIOR};var tr=function(){this._edgeMap=new Qt,this._edgeList=null,this._ptInAreaLocation=[H.NONE,H.NONE]};tr.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};tr.prototype.propagateSideLabels=function(e){for(var t=H.NONE,n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.isArea(e)&&o.getLocation(e,j.LEFT)!==H.NONE&&(t=o.getLocation(e,j.LEFT))}if(t===H.NONE)return null;for(var a=t,s=this.iterator();s.hasNext();){var u=s.next(),c=u.getLabel();if(c.getLocation(e,j.ON)===H.NONE&&c.setLocation(e,j.ON,a),c.isArea(e)){var f=c.getLocation(e,j.LEFT),l=c.getLocation(e,j.RIGHT);if(l!==H.NONE){if(l!==a)throw new zi("side location conflict",u.getCoordinate());f===H.NONE&&he.shouldNeverReachHere("found single null side (at "+u.getCoordinate()+")"),a=f}else he.isTrue(c.getLocation(e,j.LEFT)===H.NONE,"found single null side"),c.setLocation(e,j.RIGHT,a),c.setLocation(e,j.LEFT,a)}}};tr.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};tr.prototype.print=function(e){Vt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};tr.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};tr.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,i=t.get(n).getLabel(),o=i.getLocation(e,j.LEFT);he.isTrue(o!==H.NONE,"Found unlabelled area edge");for(var a=o,s=this.iterator();s.hasNext();){var u=s.next(),c=u.getLabel();he.isTrue(c.isArea(e),"Found non-area edge");var f=c.getLocation(e,j.LEFT),l=c.getLocation(e,j.RIGHT);if(f===l||l!==a)return!1;a=f}return!0};tr.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var i=t._edgeList.get(n);if(i===e)return n}return-1};tr.prototype.iterator=function(){return this.getEdges().iterator()};tr.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new $(this._edgeMap.values())),this._edgeList};tr.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===H.NONE&&(this._ptInAreaLocation[e]=Fr.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};tr.prototype.toString=function(){var e=new $n;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};tr.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};tr.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),a=o.getLabel(),s=0;s<2;s++)a.isLine(s)&&a.getLocation(s)===H.BOUNDARY&&(n[s]=!0);for(var u=this.iterator();u.hasNext();)for(var c=u.next(),f=c.getLabel(),l=0;l<2;l++)if(f.isAnyNull(l)){var p=H.NONE;if(n[l])p=H.EXTERIOR;else{var b=c.getCoordinate();p=t.getLocation(l,b,e)}f.setAllLocationsIfNull(l,p)}};tr.prototype.getDegree=function(){return this._edgeMap.size()};tr.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};tr.prototype.interfaces_=function(){return[]};tr.prototype.getClass=function(){return tr};var x_=function(r){function e(){r.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var i=null,o=null,a=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var u=n._resultAreaEdgeList.get(s),c=u.getSym();if(u.getLabel().isArea())switch(i===null&&u.isInResult()&&(i=u),a){case n._SCANNING_FOR_INCOMING:if(!c.isInResult())continue;o=c,a=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!u.isInResult())continue;o.setNext(u),a=n._SCANNING_FOR_INCOMING;break}}if(a===this._LINKING_TO_OUTGOING){if(i===null)throw new zi("no outgoing dirEdge found",this.getCoordinate());he.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},e.prototype.insert=function(n){var i=n;this.insertEdgeEnd(i,i)},e.prototype.getRightmostEdge=function(){var n=this.getEdges(),i=n.size();if(i<1)return null;var o=n.get(0);if(i===1)return o;var a=n.get(i-1),s=o.getQuadrant(),u=a.getQuadrant();return De.isNorthern(s)&&De.isNorthern(u)?o:!De.isNorthern(s)&&!De.isNorthern(u)?a:o.getDy()!==0?o:a.getDy()!==0?a:(he.shouldNeverReachHere("found two horizontal edges incident on node"),null)},e.prototype.print=function(n){Vt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();n.print("out "),o.print(n),n.println(),n.print("in "),o.getSym().print(n),n.println()}},e.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&n._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(n){for(var i=this.iterator();i.hasNext();){var o=i.next(),a=o.getLabel();a.setAllLocationsIfNull(0,n.getLocation(0)),a.setAllLocationsIfNull(1,n.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var i=null,o=null,a=this._edgeList.size()-1;a>=0;a--){var s=n._edgeList.get(a),u=s.getSym();o===null&&(o=u),i!==null&&u.setNext(i),i=s}o.setNext(i)},e.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),a=i.getDepth(j.LEFT),s=i.getDepth(j.RIGHT),u=this.computeDepths(o+1,this._edgeList.size(),a),c=this.computeDepths(0,o,u);if(c!==s)throw new zi("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var f=arguments[0],l=arguments[1],p=arguments[2],b=p,_=f;_<l;_++){var E=n._edgeList.get(_);E.setEdgeDepths(j.RIGHT,b),b=E.getDepth(j.LEFT)}return b}},e.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(n){for(var i=this,o=null,a=null,s=this._SCANNING_FOR_INCOMING,u=this._resultAreaEdgeList.size()-1;u>=0;u--){var c=i._resultAreaEdgeList.get(u),f=c.getSym();switch(o===null&&c.getEdgeRing()===n&&(o=c),s){case i._SCANNING_FOR_INCOMING:if(f.getEdgeRing()!==n)continue;a=f,s=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(c.getEdgeRing()!==n)continue;a.setNextMin(c),s=i._SCANNING_FOR_INCOMING;break}}s===this._LINKING_TO_OUTGOING&&(he.isTrue(o!==null,"found null for first outgoing dirEdge"),he.isTrue(o.getEdgeRing()===n,"unable to link last incoming dirEdge"),a.setNextMin(o))},e.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&n++}return n}else if(arguments.length===1){for(var a=arguments[0],s=0,u=this.iterator();u.hasNext();){var c=u.next();c.getEdgeRing()===a&&s++}return s}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var n=H.NONE,i=this.iterator();i.hasNext();){var o=i.next(),a=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){n=H.INTERIOR;break}if(a.isInResult()){n=H.EXTERIOR;break}}}if(n===H.NONE)return null;for(var s=n,u=this.iterator();u.hasNext();){var c=u.next(),f=c.getSym();c.isLineEdge()?c.getEdge().setCovered(s===H.INTERIOR):(c.isInResult()&&(s=H.EXTERIOR),f.isInResult()&&(s=H.INTERIOR))}},e.prototype.computeLabelling=function(n){var i=this;r.prototype.computeLabelling.call(this,n),this._label=new Le(H.NONE);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getEdge(),u=s.getLabel(),c=0;c<2;c++){var f=u.getLocation(c);(f===H.INTERIOR||f===H.BOUNDARY)&&i._label.setLocation(c,H.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tr),Tg=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.createNode=function(n){return new Gc(n,new x_)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xa),ho=function r(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=r.orientation(e)};ho.prototype.compareTo=function(e){var t=e,n=ho.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};ho.prototype.interfaces_=function(){return[nn]};ho.prototype.getClass=function(){return ho};ho.orientation=function(e){return ve.increasingDirection(e)===1};ho.compareOriented=function(e,t,n,i){for(var o=t?1:-1,a=i?1:-1,s=t?e.length:-1,u=i?n.length:-1,c=t?0:e.length-1,f=i?0:n.length-1;;){var l=e[c].compareTo(n[f]);if(l!==0)return l;c+=o,f+=a;var p=c===s,b=f===u;if(p&&!b)return-1;if(!p&&b)return 1;if(p&&b)return 0}};var gn=function(){this._edges=new $,this._ocaMap=new Qt};gn.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var i=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var o=i.getCoordinates(),a=0;a<o.length;a++)a>0&&e.print(","),e.print(o[a].x+" "+o[a].y);e.println(")")}e.print(")  ")};gn.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};gn.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};gn.prototype.iterator=function(){return this._edges.iterator()};gn.prototype.getEdges=function(){return this._edges};gn.prototype.get=function(e){return this._edges.get(e)};gn.prototype.findEqualEdge=function(e){var t=new ho(e.getCoordinates()),n=this._ocaMap.get(t);return n};gn.prototype.add=function(e){this._edges.add(e);var t=new ho(e.getCoordinates());this._ocaMap.put(t,e)};gn.prototype.interfaces_=function(){return[]};gn.prototype.getClass=function(){return gn};var qo=function(){};qo.prototype.processIntersections=function(e,t,n,i){};qo.prototype.isDone=function(){};qo.prototype.interfaces_=function(){return[]};qo.prototype.getClass=function(){return qo};var Gr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Gr.prototype.isTrivialIntersection=function(e,t,n,i){if(e===n&&this._li.getIntersectionNum()===1){if(Gr.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var o=e.size()-1;if(t===0&&i===o||i===0&&t===o)return!0}}return!1};Gr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Gr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Gr.prototype.getLineIntersector=function(){return this._li};Gr.prototype.hasProperIntersection=function(){return this._hasProper};Gr.prototype.processIntersections=function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var o=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,a,s,u),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Gr.prototype.hasIntersection=function(){return this._hasIntersection};Gr.prototype.isDone=function(){return!1};Gr.prototype.hasInteriorIntersection=function(){return this._hasInterior};Gr.prototype.interfaces_=function(){return[qo]};Gr.prototype.getClass=function(){return Gr};Gr.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var Gn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new q(e),this.segmentIndex=t,this.dist=n};Gn.prototype.getSegmentIndex=function(){return this.segmentIndex};Gn.prototype.getCoordinate=function(){return this.coord};Gn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};Gn.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};Gn.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};Gn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};Gn.prototype.getDistance=function(){return this.dist};Gn.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};Gn.prototype.interfaces_=function(){return[nn]};Gn.prototype.getClass=function(){return Gn};var di=function(){this._nodeMap=new Qt,this.edge=null;var e=arguments[0];this.edge=e};di.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};di.prototype.iterator=function(){return this._nodeMap.values().iterator()};di.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),a=t.createSplitEdge(i,o);e.add(a),i=o}};di.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};di.prototype.createSplitEdge=function(e,t){var n=this,i=t.segmentIndex-e.segmentIndex+2,o=this.edge.pts[t.segmentIndex],a=t.dist>0||!t.coord.equals2D(o);a||i--;var s=new Array(i).fill(null),u=0;s[u++]=new q(e.coord);for(var c=e.segmentIndex+1;c<=t.segmentIndex;c++)s[u++]=n.edge.pts[c];return a&&(s[u]=t.coord),new uc(s,new Le(this.edge._label))};di.prototype.add=function(e,t,n){var i=new Gn(e,t,n),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};di.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};var Ho=function(){};Ho.prototype.getChainStartIndices=function(e){var t=this,n=0,i=new $;i.add(new kn(n));do{var o=t.findChainEnd(e,n);i.add(new kn(o)),n=o}while(n<e.length-1);var a=Ho.toIntArray(i);return a};Ho.prototype.findChainEnd=function(e,t){for(var n=De.quadrant(e[t],e[t+1]),i=t+1;i<e.length;){var o=De.quadrant(e[i-1],e[i]);if(o!==n)break;i++}return i-1};Ho.prototype.interfaces_=function(){return[]};Ho.prototype.getClass=function(){return Ho};Ho.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var qi=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new re,this.env2=new re;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Ho;this.startIndex=t.getChainStartIndices(this.pts)};qi.prototype.getCoordinates=function(){return this.pts};qi.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};qi.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};qi.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],i)}else if(arguments.length===6){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3],c=arguments[4],f=arguments[5],l=this.pts[o],p=this.pts[a],b=s.pts[u],_=s.pts[c];if(a-o===1&&c-u===1)return f.addIntersections(this.e,o,s.e,u),null;if(this.env1.init(l,p),this.env2.init(b,_),!this.env1.intersects(this.env2))return null;var E=Math.trunc((o+a)/2),R=Math.trunc((u+c)/2);o<E&&(u<R&&this.computeIntersectsForChain(o,E,s,u,R,f),R<c&&this.computeIntersectsForChain(o,E,s,R,c,f)),E<a&&(u<R&&this.computeIntersectsForChain(E,a,s,u,R,f),R<c&&this.computeIntersectsForChain(E,a,s,R,c,f))}};qi.prototype.getStartIndexes=function(){return this.startIndex};qi.prototype.computeIntersects=function(e,t){for(var n=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<e.startIndex.length-1;o++)n.computeIntersectsForChain(i,e,o,t)};qi.prototype.interfaces_=function(){return[]};qi.prototype.getClass=function(){return qi};var Gt=function r(){var e=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)e._depth[t][n]=r.NULL_VALUE},Og={NULL_VALUE:{configurable:!0}};Gt.prototype.getDepth=function(e,t){return this._depth[e][t]};Gt.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};Gt.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==Gt.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===Gt.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],a=arguments[1];return this._depth[o][a]===Gt.NULL_VALUE}};Gt.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var i=1;i<3;i++){var o=0;e._depth[t][i]>n&&(o=1),e._depth[t][i]=o}}};Gt.prototype.getDelta=function(e){return this._depth[e][j.RIGHT]-this._depth[e][j.LEFT]};Gt.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?H.EXTERIOR:H.INTERIOR};Gt.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Gt.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var o=t.getLocation(n,i);(o===H.EXTERIOR||o===H.INTERIOR)&&(e.isNull(n,i)?e._depth[n][i]=Gt.depthAtLocation(o):e._depth[n][i]+=Gt.depthAtLocation(o))}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2];u===H.INTERIOR&&this._depth[a][s]++}};Gt.prototype.interfaces_=function(){return[]};Gt.prototype.getClass=function(){return Gt};Gt.depthAtLocation=function(e){return e===H.EXTERIOR?0:e===H.INTERIOR?1:Gt.NULL_VALUE};Og.NULL_VALUE.get=function(){return-1};Object.defineProperties(Gt,Og);var uc=function(r){function e(){if(r.call(this),this.pts=null,this._env=null,this.eiList=new di(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Gt,this._depthDelta=0,arguments.length===1){var t=arguments[0];e.call(this,t,null)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var i=new e(n,Le.toLineLabel(this._label));return i},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(n){this._isIsolated=n},e.prototype.setName=function(n){this._name=n},e.prototype.equals=function(n){var i=this;if(!(n instanceof e))return!1;var o=n;if(this.pts.length!==o.pts.length)return!1;for(var a=!0,s=!0,u=this.pts.length,c=0;c<this.pts.length;c++)if(i.pts[c].equals2D(o.pts[c])||(a=!1),i.pts[c].equals2D(o.pts[--u])||(s=!1),!a&&!s)return!1;return!0},e.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},e.prototype.print=function(n){var i=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&n.print(","),n.print(i.pts[o].x+" "+i.pts[o].y);n.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(n){e.updateIM(this._label,n)},e.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(n){var i=this;n.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)n.print(i.pts[o]+" ");n.println("")},e.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new qi(this)),this._mce},e.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new re;for(var i=0;i<this.pts.length;i++)n._env.expandToInclude(n.pts[i])}return this._env},e.prototype.addIntersection=function(n,i,o,a){var s=new q(n.getIntersection(a)),u=i,c=n.getEdgeDistance(o,a),f=u+1;if(f<this.pts.length){var l=this.pts[f];s.equals2D(l)&&(u=f,c=0)}this.eiList.add(s,u,c)},e.prototype.toString=function(){var n=this,i=new $n;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(n.pts[o].x+" "+n.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},e.prototype.isPointwiseEqual=function(n){var i=this;if(this.pts.length!==n.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(n.pts[o]))return!1;return!0},e.prototype.setDepthDelta=function(n){this._depthDelta=n},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(n,i,o){for(var a=this,s=0;s<n.getIntersectionNum();s++)a.addIntersection(n,i,o,s)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];i.setAtLeastIfValid(n.getLocation(0,j.ON),n.getLocation(1,j.ON),1),n.isArea()&&(i.setAtLeastIfValid(n.getLocation(0,j.LEFT),n.getLocation(1,j.LEFT),2),i.setAtLeastIfValid(n.getLocation(0,j.RIGHT),n.getLocation(1,j.RIGHT),2))}else return r.prototype.updateIM.apply(this,arguments)},e}(qr),cr=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new gn,this._bufParams=e||null};cr.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};cr.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new Le(e.getLabel()),i.flip()),n.merge(i);var o=cr.depthDelta(i),a=t.getDepthDelta(),s=a+o;t.setDepthDelta(s)}else this._edgeList.add(e),e.setDepthDelta(cr.depthDelta(e.getLabel()))};cr.prototype.buildSubgraphs=function(e,t){for(var n=new $,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getRightmostCoordinate(),s=new pa(n),u=s.getDepth(a);o.computeDepth(u),o.findResultEdges(),n.add(o),t.add(o.getDirectedEdges(),o.getNodes())}};cr.prototype.createSubgraphs=function(e){for(var t=new $,n=e.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var o=new dr;o.create(i),t.add(o)}}return pn.sort(t,pn.reverseOrder()),t};cr.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};cr.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new gh,n=new $o;return n.setPrecisionModel(e),t.setSegmentIntersector(new Gr(n)),t};cr.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var i=new Er(n,this._bufParams),o=new Qr(e,t,i),a=o.getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this._graph=new Ke(new Tg),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),u=new Lr(this._geomFact);this.buildSubgraphs(s,u);var c=u.getPolygons();if(c.size()<=0)return this.createEmptyResultGeometry();var f=this._geomFact.buildGeometry(c);return f};cr.prototype.computeNodedEdges=function(e,t){var n=this,i=this.getNoder(t);i.computeNodes(e);for(var o=i.getNodedSubstrings(),a=o.iterator();a.hasNext();){var s=a.next(),u=s.getCoordinates();if(!(u.length===2&&u[0].equals2D(u[1]))){var c=s.getData(),f=new uc(s.getCoordinates(),new Le(c));n.insertUniqueEdge(f)}}};cr.prototype.setNoder=function(e){this._workingNoder=e};cr.prototype.interfaces_=function(){return[]};cr.prototype.getClass=function(){return cr};cr.depthDelta=function(e){var t=e.getLocation(0,j.LEFT),n=e.getLocation(0,j.RIGHT);return t===H.INTERIOR&&n===H.EXTERIOR?1:t===H.EXTERIOR&&n===H.INTERIOR?-1:0};cr.convertSegStrings=function(e){for(var t=new me,n=new $;e.hasNext();){var i=e.next(),o=t.createLineString(i.getCoordinates());n.add(o)}return t.buildGeometry(n)};var po=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=o,this._offsetY=a,this._isScaled=!this.isIntegerPrecision()}};po.prototype.rescale=function(){var e=this;if(ae(arguments[0],st))for(var t=arguments[0],n=t.iterator();n.hasNext();){var i=n.next();e.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],a=0;a<o.length;a++)o[a].x=o[a].x/e._scaleFactor+e._offsetX,o[a].y=o[a].y/e._scaleFactor+e._offsetY;o.length===2&&o[0].equals2D(o[1])&&Vt.out.println(o)}};po.prototype.scale=function(){var e=this;if(ae(arguments[0],st)){for(var t=arguments[0],n=new $,i=t.iterator();i.hasNext();){var o=i.next();n.add(new tt(e.scale(o.getCoordinates()),o.getData()))}return n}else if(arguments[0]instanceof Array){for(var a=arguments[0],s=new Array(a.length).fill(null),u=0;u<a.length;u++)s[u]=new q(Math.round((a[u].x-e._offsetX)*e._scaleFactor),Math.round((a[u].y-e._offsetY)*e._scaleFactor),a[u].z);var c=ve.removeRepeatedPoints(s);return c}};po.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};po.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};po.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};po.prototype.interfaces_=function(){return[zo]};po.prototype.getClass=function(){return po};var Vn=function(){this._li=new $o,this._segStrings=null;var e=arguments[0];this._segStrings=e},Dg={fact:{configurable:!0}};Vn.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),i=n.getCoordinates();e.checkEndPtVertexIntersections(i[0],e._segStrings),e.checkEndPtVertexIntersections(i[i.length-1],e._segStrings)}else if(arguments.length===2){for(var o=arguments[0],a=arguments[1],s=a.iterator();s.hasNext();)for(var u=s.next(),c=u.getCoordinates(),f=1;f<c.length-1;f++)if(c[f].equals(o))throw new ki("found endpt/interior pt intersection at index "+f+" :pt "+o)}};Vn.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();e.checkInteriorIntersections(n,o)}else if(arguments.length===2)for(var a=arguments[0],s=arguments[1],u=a.getCoordinates(),c=s.getCoordinates(),f=0;f<u.length-1;f++)for(var l=0;l<c.length-1;l++)e.checkInteriorIntersections(a,f,s,l);else if(arguments.length===4){var p=arguments[0],b=arguments[1],_=arguments[2],E=arguments[3];if(p===_&&b===E)return null;var R=p.getCoordinates()[b],D=p.getCoordinates()[b+1],m=_.getCoordinates()[E],x=_.getCoordinates()[E+1];if(this._li.computeIntersection(R,D,m,x),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,R,D)||this.hasInteriorIntersection(this._li,m,x)))throw new ki("found non-noded intersection at "+R+"-"+D+" and "+m+"-"+x)}};Vn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Vn.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length-2;a++)e.checkCollapse(o[a],o[a+1],o[a+2])};Vn.prototype.hasInteriorIntersection=function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++){var o=e.getIntersection(i);if(!(o.equals(t)||o.equals(n)))return!0}return!1};Vn.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new ki("found non-noded collapse at "+Vn.fact.createLineString([e,t,n]))};Vn.prototype.interfaces_=function(){return[]};Vn.prototype.getClass=function(){return Vn};Dg.fact.get=function(){return new me};Object.defineProperties(Vn,Dg);var Sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new qe("Scale factor must be non-zero");t!==1&&(this._pt=new q(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new q,this._p1Scaled=new q),this.initCorners(this._pt)},Bg={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Sr.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),i=Math.max(e.x,t.x),o=Math.min(e.y,t.y),a=Math.max(e.y,t.y),s=this._maxx<n||this._minx>i||this._maxy<o||this._miny>a;if(s)return!1;var u=this.intersectsToleranceSquare(e,t);return he.isTrue(!(s&&u),"Found bad envelope test"),u};Sr.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new q(this._maxx,this._maxy),this._corner[1]=new q(this._minx,this._maxy),this._corner[2]=new q(this._minx,this._miny),this._corner[3]=new q(this._maxx,this._miny)};Sr.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Sr.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};Sr.prototype.getCoordinate=function(){return this._originalPt};Sr.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};Sr.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=Sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new re(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};Sr.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Sr.prototype.intersectsToleranceSquare=function(e,t){var n=!1,i=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&i||e.equals(this._pt)||t.equals(this._pt))};Sr.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),i=e.getCoordinate(t+1);return this.intersects(n,i)?(e.addIntersection(this.getCoordinate(),t),!0):!1};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Bg.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Sr,Bg);var cu=function(){this.tempEnv1=new re,this.selectedSegment=new ie};cu.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}};cu.prototype.interfaces_=function(){return[]};cu.prototype.getClass=function(){return cu};var Za=function(){this._index=null;var e=arguments[0];this._index=e},kg={HotPixelSnapAction:{configurable:!0}};Za.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2],o=t.getSafeEnvelope(),a=new Fg(t,n,i);return this._index.query(o,{interfaces_:function(){return[fo]},visitItem:function(s){var u=s;u.select(o,a)}}),a.isNodeAdded()}};Za.prototype.interfaces_=function(){return[]};Za.prototype.getClass=function(){return Za};kg.HotPixelSnapAction.get=function(){return Fg};Object.defineProperties(Za,kg);var Fg=function(r){function e(){r.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=t,this._parentEdge=n,this._hotPixelVertexIndex=i}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1],o=n.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return r.prototype.select.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cu),ga=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new $};ga.prototype.processIntersections=function(e,t,n,i){var o=this;if(e===n&&t===i)return null;var a=e.getCoordinates()[t],s=e.getCoordinates()[t+1],u=n.getCoordinates()[i],c=n.getCoordinates()[i+1];if(this._li.computeIntersection(a,s,u,c),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var f=0;f<this._li.getIntersectionNum();f++)o._interiorIntersections.add(o._li.getIntersection(f));e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)}};ga.prototype.isDone=function(){return!1};ga.prototype.getInteriorIntersections=function(){return this._interiorIntersections};ga.prototype.interfaces_=function(){return[qo]};ga.prototype.getClass=function(){return ga};var pi=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new $o,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};pi.prototype.checkCorrectness=function(e){var t=tt.getNodedSubstrings(e),n=new Vn(t);try{n.checkValid()}catch(i){if(i instanceof wg)i.printStackTrace();else throw i}finally{}};pi.prototype.getNodedSubstrings=function(){return tt.getNodedSubstrings(this._nodedSegStrings)};pi.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};pi.prototype.findInteriorIntersections=function(e,t){var n=new ga(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};pi.prototype.computeVertexSnaps=function(){var e=this;if(ae(arguments[0],st))for(var t=arguments[0],n=t.iterator();n.hasNext();){var i=n.next();e.computeVertexSnaps(i)}else if(arguments[0]instanceof tt)for(var o=arguments[0],a=o.getCoordinates(),s=0;s<a.length;s++){var u=new Sr(a[s],e._scaleFactor,e._li),c=e._pointSnapper.snap(u,o,s);c&&o.addIntersection(a[s],s)}};pi.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new gh,this._pointSnapper=new Za(this._noder.getIndex()),this.snapRound(e,this._li)};pi.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next(),o=new Sr(i,t._scaleFactor,t._li);t._pointSnapper.snap(o)}};pi.prototype.interfaces_=function(){return[zo]};pi.prototype.getClass=function(){return pi};var Ht=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ae,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},_s={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ht.prototype.bufferFixedPrecision=function(e){var t=new po(new pi(new Me(1)),e.getScale()),n=new cr(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Ht.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Ht.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(a){if(a instanceof zi)e._saveException=a;else throw a}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],i=Ht.precisionScaleFactor(this._argGeom,this._distance,n),o=new Me(i);this.bufferFixedPrecision(o)}};Ht.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Me.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Ht.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Ht.prototype.bufferOriginalPrecision=function(){try{var e=new cr(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof ki)this._saveException=t;else throw t}finally{}};Ht.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Ht.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Ht.prototype.interfaces_=function(){return[]};Ht.prototype.getClass=function(){return Ht};Ht.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Ht(e),i=n.getResultGeometry(t);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof oe&&typeof arguments[1]=="number"){var o=arguments[0],a=arguments[1],s=arguments[2],u=new Ht(o);u.setQuadrantSegments(s);var c=u.getResultGeometry(a);return c}else if(arguments[2]instanceof Ae&&arguments[0]instanceof oe&&typeof arguments[1]=="number"){var f=arguments[0],l=arguments[1],p=arguments[2],b=new Ht(f,p),_=b.getResultGeometry(l);return _}}else if(arguments.length===4){var E=arguments[0],R=arguments[1],D=arguments[2],m=arguments[3],x=new Ht(E);x.setQuadrantSegments(D),x.setEndCapStyle(m);var M=x.getResultGeometry(R);return M}};Ht.precisionScaleFactor=function(e,t,n){var i=e.getEnvelopeInternal(),o=Ur.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),a=t>0?t:0,s=o+2*a,u=Math.trunc(Math.log(s)/Math.log(10)+1),c=n-u,f=Math.pow(10,c);return f};_s.CAP_ROUND.get=function(){return Ae.CAP_ROUND};_s.CAP_BUTT.get=function(){return Ae.CAP_FLAT};_s.CAP_FLAT.get=function(){return Ae.CAP_FLAT};_s.CAP_SQUARE.get=function(){return Ae.CAP_SQUARE};_s.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Ht,_s);var ar=function(){this._pt=[new q,new q],this._distance=ue.NaN,this._isNull=!0};ar.prototype.getCoordinates=function(){return this._pt};ar.prototype.getCoordinate=function(e){return this._pt[e]};ar.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i<this._distance&&this.initialize(t,n,i)}};ar.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};ar.prototype.getDistance=function(){return this._distance};ar.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i>this._distance&&this.initialize(t,n,i)}};ar.prototype.interfaces_=function(){return[]};ar.prototype.getClass=function(){return ar};var ni=function(){};ni.prototype.interfaces_=function(){return[]};ni.prototype.getClass=function(){return ni};ni.computeDistance=function(){if(arguments[2]instanceof ar&&arguments[0]instanceof Je&&arguments[1]instanceof q)for(var e=arguments[0],t=arguments[1],n=arguments[2],i=e.getCoordinates(),o=new ie,a=0;a<i.length-1;a++){o.setCoordinates(i[a],i[a+1]);var s=o.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof ar&&arguments[0]instanceof lt&&arguments[1]instanceof q){var u=arguments[0],c=arguments[1],f=arguments[2];ni.computeDistance(u.getExteriorRing(),c,f);for(var l=0;l<u.getNumInteriorRing();l++)ni.computeDistance(u.getInteriorRingN(l),c,f)}else if(arguments[2]instanceof ar&&arguments[0]instanceof oe&&arguments[1]instanceof q){var p=arguments[0],b=arguments[1],_=arguments[2];if(p instanceof Je)ni.computeDistance(p,b,_);else if(p instanceof lt)ni.computeDistance(p,b,_);else if(p instanceof hr)for(var E=p,R=0;R<E.getNumGeometries();R++){var D=E.getGeometryN(R);ni.computeDistance(D,b,_)}else _.setMinimum(p.getCoordinate(),b)}else if(arguments[2]instanceof ar&&arguments[0]instanceof ie&&arguments[1]instanceof q){var m=arguments[0],x=arguments[1],M=arguments[2],O=m.closestPoint(x);M.setMinimum(O,x)}};var Go=function(e){this._maxPtDist=new ar,this._inputGeom=e||null},mh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Go.prototype.computeMaxMidpointDistance=function(e){var t=new go(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Go.prototype.computeMaxVertexDistance=function(e){var t=new ma(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Go.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Go.prototype.getDistancePoints=function(){return this._maxPtDist};Go.prototype.interfaces_=function(){return[]};Go.prototype.getClass=function(){return Go};mh.MaxPointDistanceFilter.get=function(){return ma};mh.MaxMidpointDistanceFilter.get=function(){return go};Object.defineProperties(Go,mh);var ma=function(e){this._maxPtDist=new ar,this._minPtDist=new ar,this._geom=e||null};ma.prototype.filter=function(e){this._minPtDist.initialize(),ni.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ma.prototype.getMaxPointDistance=function(){return this._maxPtDist};ma.prototype.interfaces_=function(){return[ci]};ma.prototype.getClass=function(){return ma};var go=function(e){this._maxPtDist=new ar,this._minPtDist=new ar,this._geom=e||null};go.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),i=e.getCoordinate(t),o=new q((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),ni.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};go.prototype.isDone=function(){return!1};go.prototype.isGeometryChanged=function(){return!1};go.prototype.getMaxPointDistance=function(){return this._maxPtDist};go.prototype.interfaces_=function(){return[hn]};go.prototype.getClass=function(){return go};var Ti=function(e){this._comps=e||null};Ti.prototype.filter=function(e){e instanceof lt&&this._comps.add(e)};Ti.prototype.interfaces_=function(){return[zn]};Ti.prototype.getClass=function(){return Ti};Ti.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return Ti.getPolygons(e,new $)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof lt?n.add(t):t instanceof hr&&t.apply(new Ti(n)),n}};var Ut=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};Ut.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof fi){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Je&&this._lines.add(e)};Ut.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};Ut.prototype.interfaces_=function(){return[Fi]};Ut.prototype.getClass=function(){return Ut};Ut.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(Ut.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(Ut.getLines(t,n))}};Ut.getLines=function(){if(arguments.length===1){var e=arguments[0];return Ut.getLines(e,!1)}else if(arguments.length===2){if(ae(arguments[0],st)&&ae(arguments[1],st)){for(var t=arguments[0],n=arguments[1],i=t.iterator();i.hasNext();){var o=i.next();Ut.getLines(o,n)}return n}else if(arguments[0]instanceof oe&&typeof arguments[1]=="boolean"){var a=arguments[0],s=arguments[1],u=new $;return a.apply(new Ut(u,s)),u}else if(arguments[0]instanceof oe&&ae(arguments[1],st)){var c=arguments[0],f=arguments[1];return c instanceof Je?f.add(c):c.apply(new Ut(f)),f}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&ae(arguments[0],st)&&ae(arguments[1],st)){for(var l=arguments[0],p=arguments[1],b=arguments[2],_=l.iterator();_.hasNext();){var E=_.next();Ut.getLines(E,p,b)}return p}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof oe&&ae(arguments[1],st)){var R=arguments[0],D=arguments[1],m=arguments[2];return R.apply(new Ut(D,m)),D}}};var mn=function(){if(this._boundaryRule=$r.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];if(e===null)throw new qe("Rule must be non-null");this._boundaryRule=e}}};mn.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof q&&arguments[1]instanceof lt){var t=arguments[0],n=arguments[1];if(n.isEmpty())return H.EXTERIOR;var i=n.getExteriorRing(),o=this.locateInPolygonRing(t,i);if(o===H.EXTERIOR)return H.EXTERIOR;if(o===H.BOUNDARY)return H.BOUNDARY;for(var a=0;a<n.getNumInteriorRing();a++){var s=n.getInteriorRingN(a),u=e.locateInPolygonRing(t,s);if(u===H.INTERIOR)return H.EXTERIOR;if(u===H.BOUNDARY)return H.BOUNDARY}return H.INTERIOR}else if(arguments[0]instanceof q&&arguments[1]instanceof Je){var c=arguments[0],f=arguments[1];if(!f.getEnvelopeInternal().intersects(c))return H.EXTERIOR;var l=f.getCoordinates();return!f.isClosed()&&(c.equals(l[0])||c.equals(l[l.length-1]))?H.BOUNDARY:ee.isOnLine(c,l)?H.INTERIOR:H.EXTERIOR}else if(arguments[0]instanceof q&&arguments[1]instanceof Pr){var p=arguments[0],b=arguments[1],_=b.getCoordinate();return _.equals2D(p)?H.INTERIOR:H.EXTERIOR}};mn.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?ee.locatePointInRing(e,t.getCoordinates()):H.EXTERIOR};mn.prototype.intersects=function(e,t){return this.locate(e,t)!==H.EXTERIOR};mn.prototype.updateLocationInfo=function(e){e===H.INTERIOR&&(this._isIn=!0),e===H.BOUNDARY&&this._numBoundaries++};mn.prototype.computeLocation=function(e,t){var n=this;if(t instanceof Pr&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Je)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof lt)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Fo)for(var i=t,o=0;o<i.getNumGeometries();o++){var a=i.getGeometryN(o);n.updateLocationInfo(n.locateInternal(e,a))}else if(t instanceof ai)for(var s=t,u=0;u<s.getNumGeometries();u++){var c=s.getGeometryN(u);n.updateLocationInfo(n.locateInternal(e,c))}else if(t instanceof hr)for(var f=new si(t);f.hasNext();){var l=f.next();l!==t&&n.computeLocation(e,l)}};mn.prototype.locate=function(e,t){return t.isEmpty()?H.EXTERIOR:t instanceof Je?this.locateInternal(e,t):t instanceof lt?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?H.BOUNDARY:this._numBoundaries>0||this._isIn?H.INTERIOR:H.EXTERIOR)};mn.prototype.interfaces_=function(){return[]};mn.prototype.getClass=function(){return mn};var sr=function r(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var e=arguments[0],t=arguments[1];r.call(this,e,r.INSIDE_AREA,t)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},zg={INSIDE_AREA:{configurable:!0}};sr.prototype.isInsideArea=function(){return this._segIndex===sr.INSIDE_AREA};sr.prototype.getCoordinate=function(){return this._pt};sr.prototype.getGeometryComponent=function(){return this._component};sr.prototype.getSegmentIndex=function(){return this._segIndex};sr.prototype.interfaces_=function(){return[]};sr.prototype.getClass=function(){return sr};zg.INSIDE_AREA.get=function(){return-1};Object.defineProperties(sr,zg);var oo=function(e){this._pts=e||null};oo.prototype.filter=function(e){e instanceof Pr&&this._pts.add(e)};oo.prototype.interfaces_=function(){return[zn]};oo.prototype.getClass=function(){return oo};oo.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof Pr?pn.singletonList(e):oo.getPoints(e,new $)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Pr?n.add(t):t instanceof hr&&t.apply(new oo(n)),n}};var va=function(){this._locations=null;var e=arguments[0];this._locations=e};va.prototype.filter=function(e){(e instanceof Pr||e instanceof Je||e instanceof lt)&&this._locations.add(new sr(e,0,e.getCoordinate()))};va.prototype.interfaces_=function(){return[zn]};va.prototype.getClass=function(){return va};va.getLocations=function(e){var t=new $;return e.apply(new va(t)),t};var Kt=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new mn,this._minDistanceLocation=null,this._minDistance=ue.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=o}};Kt.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=1-n,a=Ti.getPolygons(this._geom[n]);if(a.size()>0){var s=va.getLocations(this._geom[o]);if(this.computeContainmentDistance(s,a,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&ae(arguments[0],cn)&&ae(arguments[1],cn)){for(var u=arguments[0],c=arguments[1],f=arguments[2],l=0;l<u.size();l++)for(var p=u.get(l),b=0;b<c.size();b++)if(e.computeContainmentDistance(p,c.get(b),f),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof sr&&arguments[1]instanceof lt){var _=arguments[0],E=arguments[1],R=arguments[2],D=_.getCoordinate();if(H.EXTERIOR!==this._ptLocator.locate(D,E))return this._minDistance=0,R[0]=_,R[1]=new sr(E,D),null}}};Kt.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var i=this,o=0;o<e.size();o++)for(var a=e.get(o),s=0;s<t.size();s++){var u=t.get(s);if(i.computeMinDistance(a,u,n),i._minDistance<=i._terminateDistance)return null}};Kt.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Ut.getLines(this._geom[0]),n=Ut.getLines(this._geom[1]),i=oo.getPoints(this._geom[0]),o=oo.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,o,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,i,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(i,o,e),this.updateMinDistance(e,!1)};Kt.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Kt.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};Kt.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};Kt.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Je&&arguments[1]instanceof Pr){var t=arguments[0],n=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var o=t.getCoordinates(),a=n.getCoordinate(),s=0;s<o.length-1;s++){var u=ee.distancePointLine(a,o[s],o[s+1]);if(u<e._minDistance){e._minDistance=u;var c=new ie(o[s],o[s+1]),f=c.closestPoint(a);i[0]=new sr(t,s,f),i[1]=new sr(n,0,a)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Je&&arguments[1]instanceof Je){var l=arguments[0],p=arguments[1],b=arguments[2];if(l.getEnvelopeInternal().distance(p.getEnvelopeInternal())>this._minDistance)return null;for(var _=l.getCoordinates(),E=p.getCoordinates(),R=0;R<_.length-1;R++)for(var D=0;D<E.length-1;D++){var m=ee.distanceLineLine(_[R],_[R+1],E[D],E[D+1]);if(m<e._minDistance){e._minDistance=m;var x=new ie(_[R],_[R+1]),M=new ie(E[D],E[D+1]),O=x.closestPoints(M);b[0]=new sr(l,R,O[0]),b[1]=new sr(p,D,O[1])}if(e._minDistance<=e._terminateDistance)return null}}}};Kt.prototype.computeMinDistancePoints=function(e,t,n){for(var i=this,o=0;o<e.size();o++)for(var a=e.get(o),s=0;s<t.size();s++){var u=t.get(s),c=a.getCoordinate().distance(u.getCoordinate());if(c<i._minDistance&&(i._minDistance=c,n[0]=new sr(a,0,a.getCoordinate()),n[1]=new sr(u,0,u.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};Kt.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new qe("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Kt.prototype.computeMinDistanceLines=function(e,t,n){for(var i=this,o=0;o<e.size();o++)for(var a=e.get(o),s=0;s<t.size();s++){var u=t.get(s);if(i.computeMinDistance(a,u,n),i._minDistance<=i._terminateDistance)return null}};Kt.prototype.interfaces_=function(){return[]};Kt.prototype.getClass=function(){return Kt};Kt.distance=function(e,t){var n=new Kt(e,t);return n.distance()};Kt.isWithinDistance=function(e,t,n){var i=new Kt(e,t,n);return i.distance()<=n};Kt.nearestPoints=function(e,t){var n=new Kt(e,t);return n.nearestPoints()};var $t=function(){this._pt=[new q,new q],this._distance=ue.NaN,this._isNull=!0};$t.prototype.getCoordinates=function(){return this._pt};$t.prototype.getCoordinate=function(e){return this._pt[e]};$t.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i<this._distance&&this.initialize(t,n,i)}};$t.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};$t.prototype.toString=function(){return ln.toLineString(this._pt[0],this._pt[1])};$t.prototype.getDistance=function(){return this._distance};$t.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i>this._distance&&this.initialize(t,n,i)}};$t.prototype.interfaces_=function(){return[]};$t.prototype.getClass=function(){return $t};var Pn=function(){};Pn.prototype.interfaces_=function(){return[]};Pn.prototype.getClass=function(){return Pn};Pn.computeDistance=function(){if(arguments[2]instanceof $t&&arguments[0]instanceof Je&&arguments[1]instanceof q)for(var e=arguments[0],t=arguments[1],n=arguments[2],i=new ie,o=e.getCoordinates(),a=0;a<o.length-1;a++){i.setCoordinates(o[a],o[a+1]);var s=i.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof $t&&arguments[0]instanceof lt&&arguments[1]instanceof q){var u=arguments[0],c=arguments[1],f=arguments[2];Pn.computeDistance(u.getExteriorRing(),c,f);for(var l=0;l<u.getNumInteriorRing();l++)Pn.computeDistance(u.getInteriorRingN(l),c,f)}else if(arguments[2]instanceof $t&&arguments[0]instanceof oe&&arguments[1]instanceof q){var p=arguments[0],b=arguments[1],_=arguments[2];if(p instanceof Je)Pn.computeDistance(p,b,_);else if(p instanceof lt)Pn.computeDistance(p,b,_);else if(p instanceof hr)for(var E=p,R=0;R<E.getNumGeometries();R++){var D=E.getGeometryN(R);Pn.computeDistance(D,b,_)}else _.setMinimum(p.getCoordinate(),b)}else if(arguments[2]instanceof $t&&arguments[0]instanceof ie&&arguments[1]instanceof q){var m=arguments[0],x=arguments[1],M=arguments[2],O=m.closestPoint(x);M.setMinimum(O,x)}};var jr=function(){this._g0=null,this._g1=null,this._ptDist=new $t,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},vh={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};jr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};jr.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new qe("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};jr.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};jr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};jr.prototype.computeOrientedDistance=function(e,t,n){var i=new ya(t);if(e.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new mo(t,this._densifyFrac);e.apply(o),n.setMaximum(o.getMaxPointDistance())}};jr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};jr.prototype.interfaces_=function(){return[]};jr.prototype.getClass=function(){return jr};jr.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new jr(e,t);return n.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2],s=new jr(i,o);return s.setDensifyFraction(a),s.distance()}};vh.MaxPointDistanceFilter.get=function(){return ya};vh.MaxDensifiedByFractionDistanceFilter.get=function(){return mo};Object.defineProperties(jr,vh);var ya=function(){this._maxPtDist=new $t,this._minPtDist=new $t,this._euclideanDist=new Pn,this._geom=null;var e=arguments[0];this._geom=e};ya.prototype.filter=function(e){this._minPtDist.initialize(),Pn.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ya.prototype.getMaxPointDistance=function(){return this._maxPtDist};ya.prototype.interfaces_=function(){return[ci]};ya.prototype.getClass=function(){return ya};var mo=function(){this._maxPtDist=new $t,this._minPtDist=new $t,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};mo.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var i=e.getCoordinate(t-1),o=e.getCoordinate(t),a=(o.x-i.x)/this._numSubSegs,s=(o.y-i.y)/this._numSubSegs,u=0;u<this._numSubSegs;u++){var c=i.x+u*a,f=i.y+u*s,l=new q(c,f);n._minPtDist.initialize(),Pn.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};mo.prototype.isDone=function(){return!1};mo.prototype.isGeometryChanged=function(){return!1};mo.prototype.getMaxPointDistance=function(){return this._maxPtDist};mo.prototype.interfaces_=function(){return[hn]};mo.prototype.getClass=function(){return mo};var Mr=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},yh={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Mr.prototype.checkMaximumDistance=function(e,t,n){var i=new jr(t,e);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=e.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+ln.toLineString(o[0],o[1])+")"}};Mr.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Mr.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Mr.VERBOSE&&Vt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Mr.prototype.checkNegativeValid=function(){if(!(this._input instanceof lt||this._input instanceof ai||this._input instanceof hr))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};Mr.prototype.getErrorIndicator=function(){return this._errorIndicator};Mr.prototype.checkMinimumDistance=function(e,t,n){var i=new Kt(e,t,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+ln.toLineString(o[0],o[1])+" )"}};Mr.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};Mr.prototype.getErrorLocation=function(){return this._errorLocation};Mr.prototype.getPolygonLines=function(e){for(var t=new $,n=new Ut(t),i=Ti.getPolygons(e),o=i.iterator();o.hasNext();){var a=o.next();a.apply(n)}return e.getFactory().buildGeometry(t)};Mr.prototype.getErrorMessage=function(){return this._errMsg};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};yh.VERBOSE.get=function(){return!1};yh.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Mr,yh);var Wt=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},_h={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Wt.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Wt.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Wt.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new re(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new re(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Wt.prototype.checkDistance=function(){var e=new Mr(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};Wt.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Wt.prototype.checkPolygonal=function(){this._result instanceof lt||this._result instanceof ai||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Wt.prototype.getErrorIndicator=function(){return this._errorIndicator};Wt.prototype.getErrorLocation=function(){return this._errorLocation};Wt.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Wt.prototype.report=function(e){if(!Wt.VERBOSE)return null;Vt.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};Wt.prototype.getErrorMessage=function(){return this._errorMsg};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};Wt.isValidMsg=function(e,t,n){var i=new Wt(e,t,n);return i.isValid()?null:i.getErrorMessage()};Wt.isValid=function(e,t,n){var i=new Wt(e,t,n);return!!i.isValid()};_h.VERBOSE.get=function(){return!1};_h.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Wt,_h);var Kn=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Kn.prototype.getCoordinates=function(){return this._pts};Kn.prototype.size=function(){return this._pts.length};Kn.prototype.getCoordinate=function(e){return this._pts[e]};Kn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Kn.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:da.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Kn.prototype.setData=function(e){this._data=e};Kn.prototype.getData=function(){return this._data};Kn.prototype.toString=function(){return ln.toLineString(new Ze(this._pts))};Kn.prototype.interfaces_=function(){return[hi]};Kn.prototype.getClass=function(){return Kn};var vt=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};vt.prototype.getInteriorIntersection=function(){return this._interiorIntersection};vt.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};vt.prototype.getIntersectionSegments=function(){return this._intSegments};vt.prototype.count=function(){return this._intersectionCount};vt.prototype.getIntersections=function(){return this._intersections};vt.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};vt.prototype.setKeepIntersections=function(e){this._keepIntersections=e};vt.prototype.processIntersections=function(e,t,n,i){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(e,t)||this.isEndSegment(n,i);if(!o)return null}var a=e.getCoordinates()[t],s=e.getCoordinates()[t+1],u=n.getCoordinates()[i],c=n.getCoordinates()[i+1];this._li.computeIntersection(a,s,u,c),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=a,this._intSegments[1]=s,this._intSegments[2]=u,this._intSegments[3]=c,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};vt.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};vt.prototype.hasIntersection=function(){return this._interiorIntersection!==null};vt.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};vt.prototype.interfaces_=function(){return[qo]};vt.prototype.getClass=function(){return vt};vt.createAllIntersectionsFinder=function(e){var t=new vt(e);return t.setFindAllIntersections(!0),t};vt.createAnyIntersectionFinder=function(e){return new vt(e)};vt.createIntersectionCounter=function(e){var t=new vt(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var vn=function(){this._li=new $o,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};vn.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};vn.prototype.getIntersections=function(){return this._segInt.getIntersections()};vn.prototype.isValid=function(){return this.execute(),this._isValid};vn.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};vn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new vt(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new gh;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};vn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new zi(this.getErrorMessage(),this._segInt.getInteriorIntersection())};vn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+ln.toLineString(e[0],e[1])+" and "+ln.toLineString(e[2],e[3])};vn.prototype.interfaces_=function(){return[]};vn.prototype.getClass=function(){return vn};vn.computeIntersections=function(e){var t=new vn(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Vo=function r(){this._nv=null;var e=arguments[0];this._nv=new vn(r.toSegmentStrings(e))};Vo.prototype.checkValid=function(){this._nv.checkValid()};Vo.prototype.interfaces_=function(){return[]};Vo.prototype.getClass=function(){return Vo};Vo.toSegmentStrings=function(e){for(var t=new $,n=e.iterator();n.hasNext();){var i=n.next();t.add(new Kn(i.getCoordinates(),i))}return t};Vo.checkValid=function(e){var t=new Vo(e);t.checkValid()};var _a=function(e){this._mapOp=e};_a.prototype.map=function(e){for(var t=this,n=new $,i=0;i<e.getNumGeometries();i++){var o=t._mapOp.map(e.getGeometryN(i));o.isEmpty()||n.add(o)}return e.getFactory().createGeometryCollection(me.toGeometryArray(n))};_a.prototype.interfaces_=function(){return[]};_a.prototype.getClass=function(){return _a};_a.map=function(e,t){var n=new _a(t);return n.map(e)};var Wn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $,this._resultLineList=new $;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Wn.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();t.collectLineEdge(i,e,t._lineEdgesList),t.collectBoundaryTouchEdge(i,e,t._lineEdgesList)}};Wn.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};Wn.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};Wn.prototype.collectLineEdge=function(e,t,n){var i=e.getLabel(),o=e.getEdge();e.isLineEdge()&&!e.isVisited()&&fe.isResultOfOp(i,t)&&!o.isCovered()&&(n.add(o),e.setVisitedEdge(!0))};Wn.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),a=o.getEdge();if(o.isLineEdge()&&!a.isCoveredSet()){var s=e._op.isCoveredByA(o.getCoordinate());a.setCovered(s)}}};Wn.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?t.labelIsolatedLine(i,0):t.labelIsolatedLine(i,1))}};Wn.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var i=n.next(),o=t._geometryFactory.createLineString(i.getCoordinates());t._resultLineList.add(o),i.setInResult(!0)}};Wn.prototype.collectBoundaryTouchEdge=function(e,t,n){var i=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;he.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),fe.isResultOfOp(i,t)&&t===fe.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};Wn.prototype.interfaces_=function(){return[]};Wn.prototype.getClass=function(){return Wn};var ba=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};ba.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};ba.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||e===fe.INTERSECTION)){var o=i.getLabel();fe.isResultOfOp(o,e)&&t.filterCoveredNodeToPoint(i)}}};ba.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};ba.prototype.interfaces_=function(){return[]};ba.prototype.getClass=function(){return ba};var Cr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Cr.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};Cr.prototype.transformPolygon=function(e,t){var n=this,i=!0,o=this.transformLinearRing(e.getExteriorRing(),e);(o===null||!(o instanceof fi)||o.isEmpty())&&(i=!1);for(var a=new $,s=0;s<e.getNumInteriorRing();s++){var u=n.transformLinearRing(e.getInteriorRingN(s),e);u===null||u.isEmpty()||(u instanceof fi||(i=!1),a.add(u))}if(i)return this._factory.createPolygon(o,a.toArray([]));var c=new $;return o!==null&&c.add(o),c.addAll(a),this._factory.buildGeometry(c)};Cr.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};Cr.prototype.getInputGeometry=function(){return this._inputGeom};Cr.prototype.transformMultiLineString=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transformLineString(e.getGeometryN(o),e);a!==null&&(a.isEmpty()||i.add(a))}return this._factory.buildGeometry(i)};Cr.prototype.transformCoordinates=function(e,t){return this.copy(e)};Cr.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};Cr.prototype.transformMultiPoint=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transformPoint(e.getGeometryN(o),e);a!==null&&(a.isEmpty()||i.add(a))}return this._factory.buildGeometry(i)};Cr.prototype.transformMultiPolygon=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transformPolygon(e.getGeometryN(o),e);a!==null&&(a.isEmpty()||i.add(a))}return this._factory.buildGeometry(i)};Cr.prototype.copy=function(e){return e.copy()};Cr.prototype.transformGeometryCollection=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transform(e.getGeometryN(o));a!==null&&(n._pruneEmptyGeometry&&a.isEmpty()||i.add(a))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(i)):this._factory.buildGeometry(i)};Cr.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Pr)return this.transformPoint(e,null);if(e instanceof Ja)return this.transformMultiPoint(e,null);if(e instanceof fi)return this.transformLinearRing(e,null);if(e instanceof Je)return this.transformLineString(e,null);if(e instanceof Fo)return this.transformMultiLineString(e,null);if(e instanceof lt)return this.transformPolygon(e,null);if(e instanceof ai)return this.transformMultiPolygon(e,null);if(e instanceof hr)return this.transformGeometryCollection(e,null);throw new qe("Unknown Geometry subtype: "+e.getClass().getName())};Cr.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};Cr.prototype.interfaces_=function(){return[]};Cr.prototype.getClass=function(){return Cr};var gi=function r(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ie,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Je&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];r.call(this,e.getCoordinates(),t)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=r.isClosed(n),this._snapTolerance=i}};gi.prototype.snapVertices=function(e,t){for(var n=this,i=this._isClosed?e.size()-1:e.size(),o=0;o<i;o++){var a=e.get(o),s=n.findSnapForVertex(a,t);s!==null&&(e.set(o,new q(s)),o===0&&n._isClosed&&e.set(e.size()-1,new q(s)))}};gi.prototype.findSnapForVertex=function(e,t){for(var n=this,i=0;i<t.length;i++){if(e.equals2D(t[i]))return null;if(e.distance(t[i])<n._snapTolerance)return t[i]}return null};gi.prototype.snapTo=function(e){var t=new xu(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};gi.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var i=t.length;t[0].equals2D(t[t.length-1])&&(i=t.length-1);for(var o=0;o<i;o++){var a=t[o],s=n.findSegmentIndexToSnap(a,e);s>=0&&e.add(s+1,new q(a),!1)}};gi.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,i=ue.MAX_VALUE,o=-1,a=0;a<t.size()-1;a++){if(n._seg.p0=t.get(a),n._seg.p1=t.get(a+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(e);s<n._snapTolerance&&s<i&&(i=s,o=a)}return o};gi.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};gi.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var Qe=function(e){this._srcGeom=e||null},Ug={SNAP_PRECISION_FACTOR:{configurable:!0}};Qe.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),i=new qg(t,n);return i.transform(this._srcGeom)};Qe.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),i=new qg(e,n,!0),o=i.transform(this._srcGeom),a=o;return t&&ae(a,co)&&(a=o.buffer(0)),a};Qe.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};Qe.prototype.extractTargetCoordinates=function(e){for(var t=new Fn,n=e.getCoordinates(),i=0;i<n.length;i++)t.add(n[i]);return t.toArray(new Array(0).fill(null))};Qe.prototype.computeMinimumSegmentLength=function(e){for(var t=ue.MAX_VALUE,n=0;n<e.length-1;n++){var i=e[n].distance(e[n+1]);i<t&&(t=i)}return t};Qe.prototype.interfaces_=function(){return[]};Qe.prototype.getClass=function(){return Qe};Qe.snap=function(e,t,n){var i=new Array(2).fill(null),o=new Qe(e);i[0]=o.snapTo(t,n);var a=new Qe(t);return i[1]=a.snapTo(i[0],n),i};Qe.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=Qe.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===Me.FIXED){var i=1/n.getScale()*2/1.415;i>t&&(t=i)}return t}else if(arguments.length===2){var o=arguments[0],a=arguments[1];return Math.min(Qe.computeOverlaySnapTolerance(o),Qe.computeOverlaySnapTolerance(a))}};Qe.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),i=n*Qe.SNAP_PRECISION_FACTOR;return i};Qe.snapToSelf=function(e,t,n){var i=new Qe(e);return i.snapToSelf(t,n)};Ug.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Qe,Ug);var qg=function(r){function e(t,n,i){r.call(this),this._snapTolerance=t||null,this._snapPts=n||null,this._isSelfSnap=i!==void 0?i:!1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(n,i){var o=new gi(n,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},e.prototype.transformCoordinates=function(n,i){var o=n.toCoordinateArray(),a=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(a)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cr),or=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};or.prototype.getCommon=function(){return ue.longBitsToDouble(this._commonBits)};or.prototype.add=function(e){var t=ue.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=or.signExpBits(this._commonBits),this._isFirst=!1,null;var n=or.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=or.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=or.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};or.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=ue.longBitsToDouble(e),n=ue.toBinaryString(e),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),a=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+t+" ]";return a}};or.prototype.interfaces_=function(){return[]};or.prototype.getClass=function(){return or};or.getBit=function(e,t){var n=1<<t;return e&n?1:0};or.signExpBits=function(e){return e>>52};or.zeroLowerBits=function(e,t){var n=(1<<t)-1,i=~n,o=e&i;return o};or.numCommonMostSigMantissaBits=function(e,t){for(var n=0,i=52;i>=0;i--){if(or.getBit(e,i)!==or.getBit(t,i))return n;n++}return 52};var vo=function(){this._commonCoord=null,this._ccFilter=new wa},bh={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};vo.prototype.addCommonBits=function(e){var t=new yo(this._commonCoord);e.apply(t),e.geometryChanged()};vo.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new q(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new yo(t);return e.apply(n),e.geometryChanged(),e};vo.prototype.getCommonCoordinate=function(){return this._commonCoord};vo.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};vo.prototype.interfaces_=function(){return[]};vo.prototype.getClass=function(){return vo};bh.CommonCoordinateFilter.get=function(){return wa};bh.Translater.get=function(){return yo};Object.defineProperties(vo,bh);var wa=function(){this._commonBitsX=new or,this._commonBitsY=new or};wa.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};wa.prototype.getCommonCoordinate=function(){return new q(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};wa.prototype.interfaces_=function(){return[ci]};wa.prototype.getClass=function(){return wa};var yo=function(){this.trans=null;var e=arguments[0];this.trans=e};yo.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,i=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,i)};yo.prototype.isDone=function(){return!1};yo.prototype.isGeometryChanged=function(){return!0};yo.prototype.interfaces_=function(){return[hn]};yo.prototype.getClass=function(){return yo};var yt=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};yt.prototype.selfSnap=function(e){var t=new Qe(e),n=t.snapTo(e,this._snapTolerance);return n};yt.prototype.removeCommonBits=function(e){this._cbr=new vo,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};yt.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};yt.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=fe.overlayOp(t[0],t[1],e);return this.prepareResult(n)};yt.prototype.checkValid=function(e){e.isValid()||Vt.out.println("Snapped geometry is invalid")};yt.prototype.computeSnapTolerance=function(){this._snapTolerance=Qe.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};yt.prototype.snap=function(e){var t=this.removeCommonBits(e),n=Qe.snap(t[0],t[1],this._snapTolerance);return n};yt.prototype.interfaces_=function(){return[]};yt.prototype.getClass=function(){return yt};yt.overlayOp=function(e,t,n){var i=new yt(e,t);return i.getResultGeometry(n)};yt.union=function(e,t){return yt.overlayOp(e,t,fe.UNION)};yt.intersection=function(e,t){return yt.overlayOp(e,t,fe.INTERSECTION)};yt.symDifference=function(e,t){return yt.overlayOp(e,t,fe.SYMDIFFERENCE)};yt.difference=function(e,t){return yt.overlayOp(e,t,fe.DIFFERENCE)};var gr=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};gr.prototype.getResultGeometry=function(e){var t=null,n=!1,i=null;try{t=fe.overlayOp(this._geom[0],this._geom[1],e);var o=!0;o&&(n=!0)}catch(a){if(a instanceof ki)i=a;else throw a}finally{}if(!n)try{t=yt.overlayOp(this._geom[0],this._geom[1],e)}catch(a){throw a instanceof ki?i:a}finally{}return t};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.overlayOp=function(e,t,n){var i=new gr(e,t);return i.getResultGeometry(n)};gr.union=function(e,t){return gr.overlayOp(e,t,fe.UNION)};gr.intersection=function(e,t){return gr.overlayOp(e,t,fe.INTERSECTION)};gr.symDifference=function(e,t){return gr.overlayOp(e,t,fe.SYMDIFFERENCE)};gr.difference=function(e,t){return gr.overlayOp(e,t,fe.DIFFERENCE)};var fu=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};fu.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};fu.prototype.interfaces_=function(){return[]};fu.prototype.getClass=function(){return fu};var Tr=function r(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var e=arguments[0],t=arguments[1];this._eventType=r.DELETE,this._xValue=e,this._insertEvent=t}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=r.INSERT,this._label=n,this._xValue=i,this._obj=o}},wh={INSERT:{configurable:!0},DELETE:{configurable:!0}};Tr.prototype.isDelete=function(){return this._eventType===Tr.DELETE};Tr.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};Tr.prototype.getObject=function(){return this._obj};Tr.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};Tr.prototype.getInsertEvent=function(){return this._insertEvent};Tr.prototype.isInsert=function(){return this._eventType===Tr.INSERT};Tr.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};Tr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Tr.prototype.interfaces_=function(){return[nn]};Tr.prototype.getClass=function(){return Tr};wh.INSERT.get=function(){return 1};wh.DELETE.get=function(){return 2};Object.defineProperties(Tr,wh);var cc=function(){};cc.prototype.interfaces_=function(){return[]};cc.prototype.getClass=function(){return cc};var Jt=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};Jt.prototype.isTrivialIntersection=function(e,t,n,i){if(e===n&&this._li.getIntersectionNum()===1){if(Jt.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var o=e.getNumPoints()-1;if(t===0&&i===o||i===0&&t===o)return!0}}return!1};Jt.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Jt.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};Jt.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Jt.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next(),o=i.getCoordinate();if(e.isIntersection(o))return!0}return!1};Jt.prototype.hasProperIntersection=function(){return this._hasProper};Jt.prototype.hasIntersection=function(){return this._hasIntersection};Jt.prototype.isDone=function(){return this._isDone};Jt.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};Jt.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};Jt.prototype.addIntersections=function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var o=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,a,s,u),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Jt.prototype.interfaces_=function(){return[]};Jt.prototype.getClass=function(){return Jt};Jt.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var E_=function(r){function e(){r.call(this),this.events=new $,this.nOverlaps=null}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){var n=this;pn.sort(this.events);for(var i=0;i<this.events.size();i++){var o=n.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},e.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var a=n.events.get(o);if(a.isInsert()&&n.processOverlaps(o,a.getDeleteEventIndex(),a,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Jt&&ae(arguments[0],cn)&&ae(arguments[1],cn)){var s=arguments[0],u=arguments[1],c=arguments[2];this.addEdges(s,s),this.addEdges(u,u),this.computeIntersections(c)}else if(typeof arguments[2]=="boolean"&&ae(arguments[0],cn)&&arguments[1]instanceof Jt){var f=arguments[0],l=arguments[1],p=arguments[2];p?this.addEdges(f,null):this.addEdges(f),this.computeIntersections(l)}}},e.prototype.addEdge=function(n,i){for(var o=this,a=n.getMonotoneChainEdge(),s=a.getStartIndexes(),u=0;u<s.length-1;u++){var c=new fu(a,u),f=new Tr(i,a.getMinX(u),c);o.events.add(f),o.events.add(new Tr(a.getMaxX(u),f))}},e.prototype.processOverlaps=function(n,i,o,a){for(var s=this,u=o.getObject(),c=n;c<i;c++){var f=s.events.get(c);if(f.isInsert()){var l=f.getObject();o.isSameLabel(f)||(u.computeIntersections(l,a),s.nOverlaps++)}}},e.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var a=o.next();n.addEdge(a,a)}else if(arguments.length===2)for(var s=arguments[0],u=arguments[1],c=s.iterator();c.hasNext();){var f=c.next();n.addEdge(f,u)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cc),mi=function(){this._min=ue.POSITIVE_INFINITY,this._max=ue.NEGATIVE_INFINITY},Hg={NodeComparator:{configurable:!0}};mi.prototype.getMin=function(){return this._min};mi.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};mi.prototype.getMax=function(){return this._max};mi.prototype.toString=function(){return ln.toLineString(new q(this._min,0),new q(this._max,0))};mi.prototype.interfaces_=function(){return[]};mi.prototype.getClass=function(){return mi};Hg.NodeComparator.get=function(){return lu};Object.defineProperties(mi,Hg);var lu=function(){};lu.prototype.compare=function(e,t){var n=e,i=t,o=(n._min+n._max)/2,a=(i._min+i._max)/2;return o<a?-1:o>a?1:0};lu.prototype.interfaces_=function(){return[Ua]};lu.prototype.getClass=function(){return lu};var S_=function(r){function e(){r.call(this),this._item=null;var t=arguments[0],n=arguments[1],i=arguments[2];this._min=t,this._max=n,this._item=i}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;o.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mi),C_=function(r){function e(){r.call(this),this._node1=null,this._node2=null;var t=arguments[0],n=arguments[1];this._node1=t,this._node2=n,this.buildExtent(this._node1,this._node2)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(n,i){this._min=Math.min(n._min,i._min),this._max=Math.max(n._max,i._max)},e.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;this._node1!==null&&this._node1.query(n,i,o),this._node2!==null&&this._node2.query(n,i,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mi),vi=function(){this._leaves=new $,this._root=null,this._level=0};vi.prototype.buildTree=function(){var e=this;pn.sort(this._leaves,new mi.NodeComparator);for(var t=this._leaves,n=null,i=new $;;){if(e.buildLevel(t,i),i.size()===1)return i.get(0);n=t,t=i,i=n}};vi.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new S_(e,t,n))};vi.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};vi.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};vi.prototype.printNode=function(e){Vt.out.println(ln.toLineString(new q(e._min,this._level),new q(e._max,this._level)))};vi.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};vi.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var i=e.get(n),o=n+1<e.size()?e.get(n):null;if(o===null)t.add(i);else{var a=new C_(e.get(n),e.get(n+1));t.add(a)}}};vi.prototype.interfaces_=function(){return[]};vi.prototype.getClass=function(){return vi};var Qa=function(){this._items=new $};Qa.prototype.visitItem=function(e){this._items.add(e)};Qa.prototype.getItems=function(){return this._items};Qa.prototype.interfaces_=function(){return[fo]};Qa.prototype.getClass=function(){return Qa};var es=function(){this._index=null;var e=arguments[0];if(!ae(e,co))throw new qe("Argument must be Polygonal");this._index=new Ko(e)},xh={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};es.prototype.locate=function(e){var t=new On(e),n=new ts(t);return this._index.query(e.y,e.y,n),t.getLocation()};es.prototype.interfaces_=function(){return[$a]};es.prototype.getClass=function(){return es};xh.SegmentVisitor.get=function(){return ts};xh.IntervalIndexedGeometry.get=function(){return Ko};Object.defineProperties(es,xh);var ts=function(){this._counter=null;var e=arguments[0];this._counter=e};ts.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};ts.prototype.interfaces_=function(){return[fo]};ts.prototype.getClass=function(){return ts};var Ko=function(){this._index=new vi;var e=arguments[0];this.init(e)};Ko.prototype.init=function(e){for(var t=this,n=Ut.getLines(e),i=n.iterator();i.hasNext();){var o=i.next(),a=o.getCoordinates();t.addLine(a)}};Ko.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var i=new ie(e[n-1],e[n]),o=Math.min(i.p0.y,i.p1.y),a=Math.max(i.p0.y,i.p1.y);t._index.insert(o,a,i)}};Ko.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Qa;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];this._index.query(i,o,a)}};Ko.prototype.interfaces_=function(){return[]};Ko.prototype.getClass=function(){return Ko};var Ts=function(r){function e(){if(r.call(this),this._parentGeom=null,this._lineEdgeMap=new Cg,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new mn,arguments.length===2){var t=arguments[0],n=arguments[1],i=$r.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=n,this._boundaryNodeRule=i,n!==null&&this.add(n)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2];this._argIndex=o,this._parentGeom=a,this._boundaryNodeRule=s,a!==null&&this.add(a)}}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(n,i){var o=this._nodes.addNode(i),a=o.getLabel(),s=1,u=H.NONE;u=a.getLocation(n,j.ON),u===H.BOUNDARY&&s++;var c=e.determineBoundary(this._boundaryNodeRule,s);a.setLocation(n,c)},e.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.computeSelfNodes(n,i,!1)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2],u=new Jt(o,!0,!1);u.setIsDoneIfProperInt(s);var c=this.createEdgeSetIntersector(),f=this._parentGeom instanceof fi||this._parentGeom instanceof lt||this._parentGeom instanceof ai,l=a||!f;return c.computeIntersections(this._edges,u,l),this.addSelfIntersectionNodes(this._argIndex),u}},e.prototype.computeSplitEdges=function(n){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(n)}},e.prototype.computeEdgeIntersections=function(n,i,o){var a=new Jt(i,o,!0);a.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this._edges,n._edges,a),a},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Pr){var n=arguments[0],i=n.getCoordinate();this.insertPoint(this._argIndex,i,H.INTERIOR)}else if(arguments[0]instanceof q){var o=arguments[0];this.insertPoint(this._argIndex,o,H.INTERIOR)}},e.prototype.addPolygon=function(n){var i=this;this.addPolygonRing(n.getExteriorRing(),H.EXTERIOR,H.INTERIOR);for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o);i.addPolygonRing(a,H.INTERIOR,H.EXTERIOR)}},e.prototype.addEdge=function(n){this.insertEdge(n);var i=n.getCoordinates();this.insertPoint(this._argIndex,i[0],H.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],H.BOUNDARY)},e.prototype.addLineString=function(n){var i=ve.removeRepeatedPoints(n.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new uc(i,new Le(this._argIndex,H.INTERIOR));this._lineEdgeMap.put(n,o),this.insertEdge(o),he.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),i=new Array(n.size()).fill(null),o=0,a=n.iterator();a.hasNext();){var s=a.next();i[o++]=s.getCoordinate().copy()}return i},e.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(n,i,o){if(this.isBoundaryNode(n,i))return null;o===H.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,i):this.insertPoint(n,i,o)},e.prototype.addPolygonRing=function(n,i,o){if(n.isEmpty())return null;var a=ve.removeRepeatedPoints(n.getCoordinates());if(a.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=a[0],null;var s=i,u=o;ee.isCCW(a)&&(s=o,u=i);var c=new uc(a,new Le(this._argIndex,H.BOUNDARY,s,u));this._lineEdgeMap.put(n,c),this.insertEdge(c),this.insertPoint(this._argIndex,a[0],H.BOUNDARY)},e.prototype.insertPoint=function(n,i,o){var a=this._nodes.addNode(i),s=a.getLabel();s===null?a._label=new Le(n,o):s.setLocation(n,o)},e.prototype.createEdgeSetIntersector=function(){return new E_},e.prototype.addSelfIntersectionNodes=function(n){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel().getLocation(n),u=a.eiList.iterator();u.hasNext();){var c=u.next();i.addSelfIntersectionNode(n,c.coord,s)}},e.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof ai&&(this._useBoundaryDeterminationRule=!1),n instanceof lt)this.addPolygon(n);else if(n instanceof Je)this.addLineString(n);else if(n instanceof Pr)this.addPoint(n);else if(n instanceof Ja)this.addCollection(n);else if(n instanceof Fo)this.addCollection(n);else if(n instanceof ai)this.addCollection(n);else if(n instanceof hr)this.addCollection(n);else throw new Error(n.getClass().getName())}else return r.prototype.add.apply(this,arguments)},e.prototype.addCollection=function(n){for(var i=this,o=0;o<n.getNumGeometries();o++){var a=n.getGeometryN(o);i.add(a)}},e.prototype.locate=function(n){return ae(this._parentGeom,co)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new es(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},e.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return r.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(n,i){return n.isInBoundary(i)?H.BOUNDARY:H.INTERIOR},e}(Ke),rs=function(){if(this._li=new $o,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ts(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=$r.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ts(0,t,i),this._arg[1]=new Ts(1,n,i)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2];o.getPrecisionModel().compareTo(a.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(a.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ts(0,o,s),this._arg[1]=new Ts(1,a,s)}};rs.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};rs.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};var Oo=function(){};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};Oo.map=function(){if(arguments[0]instanceof oe&&ae(arguments[1],Oo.MapOp)){for(var e=arguments[0],t=arguments[1],n=new $,i=0;i<e.getNumGeometries();i++){var o=t.map(e.getGeometryN(i));o!==null&&n.add(o)}return e.getFactory().buildGeometry(n)}else if(ae(arguments[0],st)&&ae(arguments[1],Oo.MapOp)){for(var a=arguments[0],s=arguments[1],u=new $,c=a.iterator();c.hasNext();){var f=c.next(),l=s.map(f);l!==null&&u.add(l)}return u}};Oo.MapOp=function(){};var fe=function(r){function e(){var t=arguments[0],n=arguments[1];r.call(this,t,n),this._ptLocator=new mn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new gn,this._resultPolyList=new $,this._resultLineList=new $,this._resultPointList=new $,this._graph=new Ke(new Tg),this._geomFact=t.getFactory()}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(n){var i=this._edgeList.findEqualEdge(n);if(i!==null){var o=i.getLabel(),a=n.getLabel();i.isPointwiseEqual(n)||(a=new Le(n.getLabel()),a.flip());var s=i.getDepth();s.isNull()&&s.add(o),s.add(a),o.merge(a)}else this._edgeList.add(n)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},e.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},e.prototype.computeGeometry=function(n,i,o,a){var s=new $;return s.addAll(n),s.addAll(i),s.addAll(o),s.isEmpty()?e.createEmptyResult(a,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},e.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next();i.getEdges().mergeSymLabels()}},e.prototype.isCovered=function(n,i){for(var o=this,a=i.iterator();a.hasNext();){var s=a.next(),u=o._ptLocator.locate(n,s);if(u!==H.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var n=new $,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),n.add(o.getCollapsedEdge()))}this._edgeList.addAll(n)},e.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},e.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},e.prototype.insertUniqueEdges=function(n){for(var i=this,o=n.iterator();o.hasNext();){var a=o.next();i.insertUniqueEdge(a)}},e.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new $;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vo.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var o=new Lr(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var a=new Wn(this,this._geomFact,this._ptLocator);this._resultLineList=a.build(n);var s=new ba(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},e.prototype.labelIncompleteNode=function(n,i){var o=this._ptLocator.locate(n.getCoordinate(),this._arg[i].getGeometry());n.getLabel().setLocation(i,o)},e.prototype.copyPoints=function(n){for(var i=this,o=this._arg[n].getNodeIterator();o.hasNext();){var a=o.next(),s=i._graph.addNode(a.getCoordinate());s.setLabel(n,a.getLabel().getLocation(n))}},e.prototype.findResultAreaEdges=function(n){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),a=o.getLabel();a.isArea()&&!o.isInteriorAreaEdge()&&e.isResultOfOp(a.getLocation(0,j.RIGHT),a.getLocation(1,j.RIGHT),n)&&o.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var i=n.next(),o=i.getLabel(),a=i.getDepth();if(!a.isNull()){a.normalize();for(var s=0;s<2;s++)!o.isNull(s)&&o.isArea()&&!a.isNull(s)&&(a.getDelta(s)===0?o.toLine(s):(he.isTrue(!a.isNull(s,j.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(s,j.LEFT,a.getLocation(s,j.LEFT)),he.isTrue(!a.isNull(s,j.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(s,j.RIGHT,a.getLocation(s,j.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),a=o.getLabel();o.isIsolated()&&(a.isNull(0)?n.labelIncompleteNode(o,0):n.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(a)}},e.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rs);fe.overlayOp=function(r,e,t){var n=new fe(r,e),i=n.getResultGeometry(t);return i};fe.intersection=function(r,e){if(r.isEmpty()||e.isEmpty())return fe.createEmptyResult(fe.INTERSECTION,r,e,r.getFactory());if(r.isGeometryCollection()){var t=e;return _a.map(r,{interfaces_:function(){return[Oo.MapOp]},map:function(n){return n.intersection(t)}})}return r.checkNotGeometryCollection(r),r.checkNotGeometryCollection(e),gr.overlayOp(r,e,fe.INTERSECTION)};fe.symDifference=function(r,e){if(r.isEmpty()||e.isEmpty()){if(r.isEmpty()&&e.isEmpty())return fe.createEmptyResult(fe.SYMDIFFERENCE,r,e,r.getFactory());if(r.isEmpty())return e.copy();if(e.isEmpty())return r.copy()}return r.checkNotGeometryCollection(r),r.checkNotGeometryCollection(e),gr.overlayOp(r,e,fe.SYMDIFFERENCE)};fe.resultDimension=function(r,e,t){var n=e.getDimension(),i=t.getDimension(),o=-1;switch(r){case fe.INTERSECTION:o=Math.min(n,i);break;case fe.UNION:o=Math.max(n,i);break;case fe.DIFFERENCE:o=n;break;case fe.SYMDIFFERENCE:o=Math.max(n,i);break}return o};fe.createEmptyResult=function(r,e,t,n){var i=null;switch(fe.resultDimension(r,e,t)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon();break}return i};fe.difference=function(r,e){return r.isEmpty()?fe.createEmptyResult(fe.DIFFERENCE,r,e,r.getFactory()):e.isEmpty()?r.copy():(r.checkNotGeometryCollection(r),r.checkNotGeometryCollection(e),gr.overlayOp(r,e,fe.DIFFERENCE))};fe.isResultOfOp=function(){if(arguments.length===2){var r=arguments[0],e=arguments[1],t=r.getLocation(0),n=r.getLocation(1);return fe.isResultOfOp(t,n,e)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===H.BOUNDARY&&(i=H.INTERIOR),o===H.BOUNDARY&&(o=H.INTERIOR),a){case fe.INTERSECTION:return i===H.INTERIOR&&o===H.INTERIOR;case fe.UNION:return i===H.INTERIOR||o===H.INTERIOR;case fe.DIFFERENCE:return i===H.INTERIOR&&o!==H.INTERIOR;case fe.SYMDIFFERENCE:return i===H.INTERIOR&&o!==H.INTERIOR||i!==H.INTERIOR&&o===H.INTERIOR}return!1}};fe.INTERSECTION=1;fe.UNION=2;fe.DIFFERENCE=3;fe.SYMDIFFERENCE=4;var ao=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new mn,this._seg=new ie;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};ao.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=t._linework.getGeometryN(n),o=i.getCoordinateSequence(),a=0;a<o.size()-1;a++){o.getCoordinate(a,t._seg.p0),o.getCoordinate(a+1,t._seg.p1);var s=t._seg.distance(e);if(s<=t._boundaryDistanceTolerance)return!0}return!1};ao.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?H.BOUNDARY:this._ptLocator.locate(e,this._g)};ao.prototype.extractLinework=function(e){var t=new ns;e.apply(t);var n=t.getLinework(),i=me.toLineStringArray(n);return e.getFactory().createMultiLineString(i)};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};var ns=function(){this._linework=null,this._linework=new $};ns.prototype.getLinework=function(){return this._linework};ns.prototype.filter=function(e){var t=this;if(e instanceof lt){var n=e;this._linework.add(n.getExteriorRing());for(var i=0;i<n.getNumInteriorRing();i++)t._linework.add(n.getInteriorRingN(i))}};ns.prototype.interfaces_=function(){return[zn]};ns.prototype.getClass=function(){return ns};var Wo=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Wo.prototype.extractPoints=function(e,t,n){for(var i=this,o=e.getCoordinates(),a=0;a<o.length-1;a++)i.computeOffsetPoints(o[a],o[a+1],t,n)};Wo.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Wo.prototype.getPoints=function(e){for(var t=this,n=new $,i=Ut.getLines(this._g),o=i.iterator();o.hasNext();){var a=o.next();t.extractPoints(a,e,n)}return n};Wo.prototype.computeOffsetPoints=function(e,t,n,i){var o=t.x-e.x,a=t.y-e.y,s=Math.sqrt(o*o+a*a),u=n*o/s,c=n*a/s,f=(t.x+e.x)/2,l=(t.y+e.y)/2;if(this._doLeft){var p=new q(f-c,l+u);i.add(p)}if(this._doRight){var b=new q(f+c,l-u);i.add(b)}};Wo.prototype.interfaces_=function(){return[]};Wo.prototype.getClass=function(){return Wo};var Vr=function r(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=r.TOLERANCE,this._testCoords=new $;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=r.computeBoundaryDistanceTolerance(e,t),this._geom=[e,t,n],this._locFinder=[new ao(this._geom[0],this._boundaryDistanceTolerance),new ao(this._geom[1],this._boundaryDistanceTolerance),new ao(this._geom[2],this._boundaryDistanceTolerance)]},Gg={TOLERANCE:{configurable:!0}};Vr.prototype.reportResult=function(e,t,n){Vt.out.println("Overlay result invalid - A:"+H.toLocationSymbol(t[0])+" B:"+H.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+H.toLocationSymbol(t[2]))};Vr.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};Vr.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var i=e._testCoords.get(n);if(!e.checkValid(t,i))return e._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],a=arguments[1];return this._location[0]=this._locFinder[0].getLocation(a),this._location[1]=this._locFinder[1].getLocation(a),this._location[2]=this._locFinder[2].getLocation(a),Vr.hasLocation(this._location,H.BOUNDARY)?!0:this.isValidResult(o,this._location)}};Vr.prototype.addTestPts=function(e){var t=new Wo(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};Vr.prototype.isValidResult=function(e,t){var n=fe.isResultOfOp(t[0],t[1],e),i=t[2]===H.INTERIOR,o=!(n^i);return o||this.reportResult(e,t,n),o};Vr.prototype.getInvalidLocation=function(){return this._invalidLocation};Vr.prototype.interfaces_=function(){return[]};Vr.prototype.getClass=function(){return Vr};Vr.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};Vr.computeBoundaryDistanceTolerance=function(e,t){return Math.min(Qe.computeSizeBasedSnapTolerance(e),Qe.computeSizeBasedSnapTolerance(t))};Vr.isValid=function(e,t,n,i){var o=new Vr(e,t,i);return o.isValid(n)};Gg.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Vr,Gg);var Dr=function r(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=r.extractFactory(e),this._inputGeoms=e};Dr.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);n._skipEmpty&&o.isEmpty()||t.add(o)}};Dr.prototype.combine=function(){for(var e=this,t=new $,n=this._inputGeoms.iterator();n.hasNext();){var i=n.next();e.extractElements(i,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Dr.prototype.interfaces_=function(){return[]};Dr.prototype.getClass=function(){return Dr};Dr.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Dr(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Dr(Dr.createList(n,i));return o.combine()}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2],c=new Dr(Dr.createList(a,s,u));return c.combine()}};Dr.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Dr.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new $;return n.add(e),n.add(t),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2],s=new $;return s.add(i),s.add(o),s.add(a),s}};var nt=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new $)},Vg={STRTREE_NODE_CAPACITY:{configurable:!0}};nt.prototype.reduceToGeometries=function(e){for(var t=this,n=new $,i=e.iterator();i.hasNext();){var o=i.next(),a=null;ae(o,cn)?a=t.unionTree(o):o instanceof oe&&(a=o),n.add(a)}return n};nt.prototype.extractByEnvelope=function(e,t,n){for(var i=new $,o=0;o<t.getNumGeometries();o++){var a=t.getGeometryN(o);a.getEnvelopeInternal().intersects(e)?i.add(a):n.add(a)}return this._geomFactory.buildGeometry(i)};nt.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),i=t.getEnvelopeInternal();if(!n.intersects(i)){var o=Dr.combine(e,t);return o}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var a=n.intersection(i);return this.unionUsingEnvelopeIntersection(e,t,a)};nt.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Ng(nt.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=e.itemsTree(),o=this.unionTree(i);return o};nt.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var o=nt.getGeometry(t,n);return this.unionSafe(o,null)}else{if(i-n===2)return this.unionSafe(nt.getGeometry(t,n),nt.getGeometry(t,n+1));var a=Math.trunc((i+n)/2),s=this.binaryUnion(t,n,a),u=this.binaryUnion(t,a,i);return this.unionSafe(s,u)}}};nt.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var i=n.next();t===null?t=i.copy():t=t.union(i)}return t};nt.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};nt.prototype.unionActual=function(e,t){return nt.restrictToPolygons(e.union(t))};nt.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};nt.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var i=new $,o=this.extractByEnvelope(n,e,i),a=this.extractByEnvelope(n,t,i),s=this.unionActual(o,a);i.add(s);var u=Dr.combine(i);return u};nt.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),i=n.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],a=arguments[1],s=o.getFactory(),u=s.createGeometryCollection([o,a]),c=u.buffer(0);return c}};nt.prototype.interfaces_=function(){return[]};nt.prototype.getClass=function(){return nt};nt.restrictToPolygons=function(e){if(ae(e,co))return e;var t=Ti.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(me.toPolygonArray(t))};nt.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};nt.union=function(e){var t=new nt(e);return t.union()};Vg.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(nt,Vg);var fc=function(){};fc.prototype.interfaces_=function(){return[]};fc.prototype.getClass=function(){return fc};fc.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return fe.createEmptyResult(fe.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),gr.overlayOp(e,t,fe.UNION)};function Zo(){return new lc}function lc(){this.reset()}lc.prototype={constructor:lc,reset:function(){this.s=this.t=0},add:function(r){jd(Ou,r,this.t),jd(this,Ou.s,this.s),this.s?this.t+=Ou.t:this.s=Ou.t},valueOf:function(){return this.s}};var Ou=new lc;function jd(r,e,t){var n=r.s=e+t,i=n-e,o=n-i;r.t=e-o+(t-i)}var We=1e-6,Be=Math.PI,Pi=Be/2,$d=Be/4,Hi=Be*2,Eo=180/Be,In=Be/180,ur=Math.abs,I_=Math.atan,is=Math.atan2,ut=Math.cos,ct=Math.sin,bs=Math.sqrt;function Kg(r){return r>1?0:r<-1?Be:Math.acos(r)}function xa(r){return r>1?Pi:r<-1?-Pi:Math.asin(r)}function zs(){}function hc(r,e){r&&Qd.hasOwnProperty(r.type)&&Qd[r.type](r,e)}var Zd={Feature:function(r,e){hc(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,n=-1,i=t.length;++n<i;)hc(t[n].geometry,e)}},Qd={Sphere:function(r,e){e.sphere()},Point:function(r,e){r=r.coordinates,e.point(r[0],r[1],r[2])},MultiPoint:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)r=t[n],e.point(r[0],r[1],r[2])},LineString:function(r,e){Pl(r.coordinates,e,0)},MultiLineString:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)Pl(t[n],e,0)},Polygon:function(r,e){ep(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)ep(t[n],e)},GeometryCollection:function(r,e){for(var t=r.geometries,n=-1,i=t.length;++n<i;)hc(t[n],e)}};function Pl(r,e,t){var n=-1,i=r.length-t,o;for(e.lineStart();++n<i;)o=r[n],e.point(o[0],o[1],o[2]);e.lineEnd()}function ep(r,e){var t=-1,n=r.length;for(e.polygonStart();++t<n;)Pl(r[t],e,1);e.polygonEnd()}function A_(r,e){r&&Zd.hasOwnProperty(r.type)?Zd[r.type](r,e):hc(r,e)}Zo();Zo();function Ll(r){return[is(r[1],r[0]),xa(r[2])]}function os(r){var e=r[0],t=r[1],n=ut(t);return[n*ut(e),n*ct(e),ct(t)]}function Du(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function dc(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function Wf(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function Bu(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function Rl(r){var e=bs(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=e,r[1]/=e,r[2]/=e}Zo();function Wg(r,e){function t(n,i){return n=r(n,i),e(n[0],n[1])}return r.invert&&e.invert&&(t.invert=function(n,i){return n=e.invert(n,i),n&&r.invert(n[0],n[1])}),t}function Tl(r,e){return[r>Be?r-Hi:r<-Be?r+Hi:r,e]}Tl.invert=Tl;function M_(r,e,t){return(r%=Hi)?e||t?Wg(rp(r),np(e,t)):rp(r):e||t?np(e,t):Tl}function tp(r){return function(e,t){return e+=r,[e>Be?e-Hi:e<-Be?e+Hi:e,t]}}function rp(r){var e=tp(r);return e.invert=tp(-r),e}function np(r,e){var t=ut(r),n=ct(r),i=ut(e),o=ct(e);function a(s,u){var c=ut(u),f=ut(s)*c,l=ct(s)*c,p=ct(u),b=p*t+f*n;return[is(l*i-b*o,f*t-p*n),xa(b*i+l*o)]}return a.invert=function(s,u){var c=ut(u),f=ut(s)*c,l=ct(s)*c,p=ct(u),b=p*i-l*o;return[is(l*i+p*o,f*t+b*n),xa(b*t-f*n)]},a}function N_(r,e,t,n,i,o){if(t){var a=ut(e),s=ct(e),u=n*t;i==null?(i=e+n*Hi,o=e-u/2):(i=ip(a,i),o=ip(a,o),(n>0?i<o:i>o)&&(i+=n*Hi));for(var c,f=i;n>0?f>o:f<o;f-=u)c=Ll([a,-s*ut(f),-s*ct(f)]),r.point(c[0],c[1])}}function ip(r,e){e=os(e),e[0]-=r,Rl(e);var t=Kg(-e[1]);return((-e[2]<0?-t:t)+Hi-We)%Hi}function Jg(){var r=[],e;return{point:function(t,n){e.push([t,n])},lineStart:function(){r.push(e=[])},lineEnd:zs,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var t=r;return r=[],e=null,t}}}function P_(r,e,t,n,i,o){var a=r[0],s=r[1],u=e[0],c=e[1],f=0,l=1,p=u-a,b=c-s,_;if(_=t-a,!(!p&&_>0)){if(_/=p,p<0){if(_<f)return;_<l&&(l=_)}else if(p>0){if(_>l)return;_>f&&(f=_)}if(_=i-a,!(!p&&_<0)){if(_/=p,p<0){if(_>l)return;_>f&&(f=_)}else if(p>0){if(_<f)return;_<l&&(l=_)}if(_=n-s,!(!b&&_>0)){if(_/=b,b<0){if(_<f)return;_<l&&(l=_)}else if(b>0){if(_>l)return;_>f&&(f=_)}if(_=o-s,!(!b&&_<0)){if(_/=b,b<0){if(_>l)return;_>f&&(f=_)}else if(b>0){if(_<f)return;_<l&&(l=_)}return f>0&&(r[0]=a+f*p,r[1]=s+f*b),l<1&&(e[0]=a+l*p,e[1]=s+l*b),!0}}}}}function qu(r,e){return ur(r[0]-e[0])<We&&ur(r[1]-e[1])<We}function ku(r,e,t,n){this.x=r,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function Xg(r,e,t,n,i){var o=[],a=[],s,u;if(r.forEach(function(_){if(!((E=_.length-1)<=0)){var E,R=_[0],D=_[E],m;if(qu(R,D)){for(i.lineStart(),s=0;s<E;++s)i.point((R=_[s])[0],R[1]);i.lineEnd();return}o.push(m=new ku(R,_,null,!0)),a.push(m.o=new ku(R,null,m,!1)),o.push(m=new ku(D,_,null,!1)),a.push(m.o=new ku(D,null,m,!0))}}),!!o.length){for(a.sort(e),op(o),op(a),s=0,u=a.length;s<u;++s)a[s].e=t=!t;for(var c=o[0],f,l;;){for(var p=c,b=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(b)for(s=0,u=f.length;s<u;++s)i.point((l=f[s])[0],l[1]);else n(p.x,p.n.x,1,i);p=p.n}else{if(b)for(f=p.p.z,s=f.length-1;s>=0;--s)i.point((l=f[s])[0],l[1]);else n(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,b=!b}while(!p.v);i.lineEnd()}}}function op(r){if(e=r.length){for(var e,t=0,n=r[0],i;++t<e;)n.n=i=r[t],i.p=n,n=i;n.n=i=r[0],i.p=n}}function Yg(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function L_(r){return r.length===1&&(r=R_(r)),{left:function(e,t,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;r(e[o],t)<0?n=o+1:i=o}return n},right:function(e,t,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;r(e[o],t)>0?i=o:n=o+1}return n}}}function R_(r){return function(e,t){return Yg(r(e),t)}}L_(Yg);function jg(r){for(var e=r.length,t,n=-1,i=0,o,a;++n<e;)i+=r[n].length;for(o=new Array(i);--e>=0;)for(a=r[e],t=a.length;--t>=0;)o[--i]=a[t];return o}var Us=1e9,Fu=-Us;function T_(r,e,t,n){function i(c,f){return r<=c&&c<=t&&e<=f&&f<=n}function o(c,f,l,p){var b=0,_=0;if(c==null||(b=a(c,l))!==(_=a(f,l))||u(c,f)<0^l>0)do p.point(b===0||b===3?r:t,b>1?n:e);while((b=(b+l+4)%4)!==_);else p.point(f[0],f[1])}function a(c,f){return ur(c[0]-r)<We?f>0?0:3:ur(c[0]-t)<We?f>0?2:1:ur(c[1]-e)<We?f>0?1:0:f>0?3:2}function s(c,f){return u(c.x,f.x)}function u(c,f){var l=a(c,1),p=a(f,1);return l!==p?l-p:l===0?f[1]-c[1]:l===1?c[0]-f[0]:l===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,l=Jg(),p,b,_,E,R,D,m,x,M,O,B,F={point:z,lineStart:h,lineEnd:g,polygonStart:W,polygonEnd:C};function z(S,N){i(S,N)&&f.point(S,N)}function U(){for(var S=0,N=0,T=b.length;N<T;++N)for(var k=b[N],P=1,d=k.length,I=k[0],K,Q,Z=I[0],te=I[1];P<d;++P)K=Z,Q=te,I=k[P],Z=I[0],te=I[1],Q<=n?te>n&&(Z-K)*(n-Q)>(te-Q)*(r-K)&&++S:te<=n&&(Z-K)*(n-Q)<(te-Q)*(r-K)&&--S;return S}function W(){f=l,p=[],b=[],B=!0}function C(){var S=U(),N=B&&S,T=(p=jg(p)).length;(N||T)&&(c.polygonStart(),N&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),T&&Xg(p,s,S,o,c),c.polygonEnd()),f=c,p=b=_=null}function h(){F.point=w,b&&b.push(_=[]),O=!0,M=!1,m=x=NaN}function g(){p&&(w(E,R),D&&M&&l.rejoin(),p.push(l.result())),F.point=z,M&&f.lineEnd()}function w(S,N){var T=i(S,N);if(b&&_.push([S,N]),O)E=S,R=N,D=T,O=!1,T&&(f.lineStart(),f.point(S,N));else if(T&&M)f.point(S,N);else{var k=[m=Math.max(Fu,Math.min(Us,m)),x=Math.max(Fu,Math.min(Us,x))],P=[S=Math.max(Fu,Math.min(Us,S)),N=Math.max(Fu,Math.min(Us,N))];P_(k,P,r,e,t,n)?(M||(f.lineStart(),f.point(k[0],k[1])),f.point(P[0],P[1]),T||f.lineEnd(),B=!1):T&&(f.lineStart(),f.point(S,N),B=!1)}m=S,x=N,M=T}return F}}var Jf=Zo();function O_(r,e){var t=e[0],n=e[1],i=[ct(t),-ut(t),0],o=0,a=0;Jf.reset();for(var s=0,u=r.length;s<u;++s)if(f=(c=r[s]).length)for(var c,f,l=c[f-1],p=l[0],b=l[1]/2+$d,_=ct(b),E=ut(b),R=0;R<f;++R,p=m,_=M,E=O,l=D){var D=c[R],m=D[0],x=D[1]/2+$d,M=ct(x),O=ut(x),B=m-p,F=B>=0?1:-1,z=F*B,U=z>Be,W=_*M;if(Jf.add(is(W*F*ct(z),E*O+W*ut(z))),o+=U?B+F*Hi:B,U^p>=t^m>=t){var C=dc(os(l),os(D));Rl(C);var h=dc(i,C);Rl(h);var g=(U^B>=0?-1:1)*xa(h[2]);(n>g||n===g&&(C[0]||C[1]))&&(a+=U^B>=0?1:-1)}}return(o<-We||o<We&&Jf<-We)^a&1}Zo();function ap(r){return r}Zo();Zo();var as=1/0,pc=as,hu=-as,gc=hu,sp={point:D_,lineStart:zs,lineEnd:zs,polygonStart:zs,polygonEnd:zs,result:function(){var r=[[as,pc],[hu,gc]];return hu=gc=-(pc=as=1/0),r}};function D_(r,e){r<as&&(as=r),r>hu&&(hu=r),e<pc&&(pc=e),e>gc&&(gc=e)}Zo();function $g(r,e,t,n){return function(i,o){var a=e(o),s=i.invert(n[0],n[1]),u=Jg(),c=e(u),f=!1,l,p,b,_={point:E,lineStart:D,lineEnd:m,polygonStart:function(){_.point=x,_.lineStart=M,_.lineEnd=O,p=[],l=[]},polygonEnd:function(){_.point=E,_.lineStart=D,_.lineEnd=m,p=jg(p);var B=O_(l,s);p.length?(f||(o.polygonStart(),f=!0),Xg(p,k_,B,t,o)):B&&(f||(o.polygonStart(),f=!0),o.lineStart(),t(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),p=l=null},sphere:function(){o.polygonStart(),o.lineStart(),t(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function E(B,F){var z=i(B,F);r(B=z[0],F=z[1])&&o.point(B,F)}function R(B,F){var z=i(B,F);a.point(z[0],z[1])}function D(){_.point=R,a.lineStart()}function m(){_.point=E,a.lineEnd()}function x(B,F){b.push([B,F]);var z=i(B,F);c.point(z[0],z[1])}function M(){c.lineStart(),b=[]}function O(){x(b[0][0],b[0][1]),c.lineEnd();var B=c.clean(),F=u.result(),z,U=F.length,W,C,h;if(b.pop(),l.push(b),b=null,!!U){if(B&1){if(C=F[0],(W=C.length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),z=0;z<W;++z)o.point((h=C[z])[0],h[1]);o.lineEnd()}return}U>1&&B&2&&F.push(F.pop().concat(F.shift())),p.push(F.filter(B_))}}return _}}function B_(r){return r.length>1}function k_(r,e){return((r=r.x)[0]<0?r[1]-Pi-We:Pi-r[1])-((e=e.x)[0]<0?e[1]-Pi-We:Pi-e[1])}const up=$g(function(){return!0},F_,U_,[-Be,-Pi]);function F_(r){var e=NaN,t=NaN,n=NaN,i;return{lineStart:function(){r.lineStart(),i=1},point:function(o,a){var s=o>0?Be:-Be,u=ur(o-e);ur(u-Be)<We?(r.point(e,t=(t+a)/2>0?Pi:-Pi),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(s,t),r.point(o,t),i=0):n!==s&&u>=Be&&(ur(e-n)<We&&(e-=n*We),ur(o-s)<We&&(o-=s*We),t=z_(e,t,o,a),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(s,t),i=0),r.point(e=o,t=a),n=s},lineEnd:function(){r.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function z_(r,e,t,n){var i,o,a=ct(r-t);return ur(a)>We?I_((ct(e)*(o=ut(n))*ct(t)-ct(n)*(i=ut(e))*ct(r))/(i*o*a)):(e+n)/2}function U_(r,e,t,n){var i;if(r==null)i=t*Pi,n.point(-Be,i),n.point(0,i),n.point(Be,i),n.point(Be,0),n.point(Be,-i),n.point(0,-i),n.point(-Be,-i),n.point(-Be,0),n.point(-Be,i);else if(ur(r[0]-e[0])>We){var o=r[0]<e[0]?Be:-Be;i=t*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])}function q_(r,e){var t=ut(r),n=t>0,i=ur(t)>We;function o(f,l,p,b){N_(b,r,e,p,f,l)}function a(f,l){return ut(f)*ut(l)>t}function s(f){var l,p,b,_,E;return{lineStart:function(){_=b=!1,E=1},point:function(R,D){var m=[R,D],x,M=a(R,D),O=n?M?0:c(R,D):M?c(R+(R<0?Be:-Be),D):0;if(!l&&(_=b=M)&&f.lineStart(),M!==b&&(x=u(l,m),(!x||qu(l,x)||qu(m,x))&&(m[0]+=We,m[1]+=We,M=a(m[0],m[1]))),M!==b)E=0,M?(f.lineStart(),x=u(m,l),f.point(x[0],x[1])):(x=u(l,m),f.point(x[0],x[1]),f.lineEnd()),l=x;else if(i&&l&&n^M){var B;!(O&p)&&(B=u(m,l,!0))&&(E=0,n?(f.lineStart(),f.point(B[0][0],B[0][1]),f.point(B[1][0],B[1][1]),f.lineEnd()):(f.point(B[1][0],B[1][1]),f.lineEnd(),f.lineStart(),f.point(B[0][0],B[0][1])))}M&&(!l||!qu(l,m))&&f.point(m[0],m[1]),l=m,b=M,p=O},lineEnd:function(){b&&f.lineEnd(),l=null},clean:function(){return E|(_&&b)<<1}}}function u(f,l,p){var b=os(f),_=os(l),E=[1,0,0],R=dc(b,_),D=Du(R,R),m=R[0],x=D-m*m;if(!x)return!p&&f;var M=t*D/x,O=-t*m/x,B=dc(E,R),F=Bu(E,M),z=Bu(R,O);Wf(F,z);var U=B,W=Du(F,U),C=Du(U,U),h=W*W-C*(Du(F,F)-1);if(!(h<0)){var g=bs(h),w=Bu(U,(-W-g)/C);if(Wf(w,F),w=Ll(w),!p)return w;var S=f[0],N=l[0],T=f[1],k=l[1],P;N<S&&(P=S,S=N,N=P);var d=N-S,I=ur(d-Be)<We,K=I||d<We;if(!I&&k<T&&(P=T,T=k,k=P),K?I?T+k>0^w[1]<(ur(w[0]-S)<We?T:k):T<=w[1]&&w[1]<=k:d>Be^(S<=w[0]&&w[0]<=N)){var Q=Bu(U,(-W+g)/C);return Wf(Q,F),[w,Ll(Q)]}}}function c(f,l){var p=n?r:Be-r,b=0;return f<-p?b|=1:f>p&&(b|=2),l<-p?b|=4:l>p&&(b|=8),b}return $g(a,s,o,n?[0,-r]:[-Be,r-Be])}function Zg(r){return function(e){var t=new Ol;for(var n in r)t[n]=r[n];return t.stream=e,t}}function Ol(){}Ol.prototype={constructor:Ol,point:function(r,e){this.stream.point(r,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qg(r,e,t){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),o!=null&&r.clipExtent(null),A_(t,r.stream(sp));var a=sp.result(),s=Math.min(n/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(n-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return o!=null&&r.clipExtent(o),r.scale(s*150).translate([u,c])}function H_(r,e,t){return Qg(r,[[0,0],e],t)}var cp=16,G_=ut(30*In);function fp(r,e){return+e?K_(r,e):V_(r)}function V_(r){return Zg({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}})}function K_(r,e){function t(n,i,o,a,s,u,c,f,l,p,b,_,E,R){var D=c-n,m=f-i,x=D*D+m*m;if(x>4*e&&E--){var M=a+p,O=s+b,B=u+_,F=bs(M*M+O*O+B*B),z=xa(B/=F),U=ur(ur(B)-1)<We||ur(o-l)<We?(o+l)/2:is(O,M),W=r(U,z),C=W[0],h=W[1],g=C-n,w=h-i,S=m*g-D*w;(S*S/x>e||ur((D*g+m*w)/x-.5)>.3||a*p+s*b+u*_<G_)&&(t(n,i,o,a,s,u,C,h,U,M/=F,O/=F,B,E,R),R.point(C,h),t(C,h,U,M,O,B,c,f,l,p,b,_,E,R))}}return function(n){var i,o,a,s,u,c,f,l,p,b,_,E,R={point:D,lineStart:m,lineEnd:M,polygonStart:function(){n.polygonStart(),R.lineStart=O},polygonEnd:function(){n.polygonEnd(),R.lineStart=m}};function D(z,U){z=r(z,U),n.point(z[0],z[1])}function m(){l=NaN,R.point=x,n.lineStart()}function x(z,U){var W=os([z,U]),C=r(z,U);t(l,p,f,b,_,E,l=C[0],p=C[1],f=z,b=W[0],_=W[1],E=W[2],cp,n),n.point(l,p)}function M(){R.point=D,n.lineEnd()}function O(){m(),R.point=B,R.lineEnd=F}function B(z,U){x(i=z,U),o=l,a=p,s=b,u=_,c=E,R.point=x}function F(){t(l,p,f,b,_,E,o,a,i,s,u,c,cp,n),R.lineEnd=M,M()}return R}}var W_=Zg({point:function(r,e){this.stream.point(r*In,e*In)}});function J_(r){return X_(function(){return r})()}function X_(r){var e,t=150,n=480,i=250,o,a,s=0,u=0,c=0,f=0,l=0,p,b,_=null,E=up,R=null,D,m,x,M=ap,O=.5,B=fp(C,O),F,z;function U(w){return w=b(w[0]*In,w[1]*In),[w[0]*t+o,a-w[1]*t]}function W(w){return w=b.invert((w[0]-o)/t,(a-w[1])/t),w&&[w[0]*Eo,w[1]*Eo]}function C(w,S){return w=e(w,S),[w[0]*t+o,a-w[1]*t]}U.stream=function(w){return F&&z===w?F:F=W_(E(p,B(M(z=w))))},U.clipAngle=function(w){return arguments.length?(E=+w?q_(_=w*In,6*In):(_=null,up),g()):_*Eo},U.clipExtent=function(w){return arguments.length?(M=w==null?(R=D=m=x=null,ap):T_(R=+w[0][0],D=+w[0][1],m=+w[1][0],x=+w[1][1]),g()):R==null?null:[[R,D],[m,x]]},U.scale=function(w){return arguments.length?(t=+w,h()):t},U.translate=function(w){return arguments.length?(n=+w[0],i=+w[1],h()):[n,i]},U.center=function(w){return arguments.length?(s=w[0]%360*In,u=w[1]%360*In,h()):[s*Eo,u*Eo]},U.rotate=function(w){return arguments.length?(c=w[0]%360*In,f=w[1]%360*In,l=w.length>2?w[2]%360*In:0,h()):[c*Eo,f*Eo,l*Eo]},U.precision=function(w){return arguments.length?(B=fp(C,O=w*w),g()):bs(O)},U.fitExtent=function(w,S){return Qg(U,w,S)},U.fitSize=function(w,S){return H_(U,w,S)};function h(){b=Wg(p=M_(c,f,l),e);var w=e(s,u);return o=n-w[0]*t,a=i+w[1]*t,g()}function g(){return F=z=null,U}return function(){return e=r.apply(this,arguments),U.invert=e.invert&&W,h()}}function e0(r){return function(e,t){var n=ut(e),i=ut(t),o=r(n*i);return[o*i*ct(e),o*ct(t)]}}function t0(r){return function(e,t){var n=bs(e*e+t*t),i=r(n),o=ct(i),a=ut(i);return[is(e*o,n*a),xa(n&&t*o/n)]}}var Y_=e0(function(r){return bs(2/(1+r))});Y_.invert=t0(function(r){return 2*xa(r/2)});var r0=e0(function(r){return(r=Kg(r))&&r/ct(r)});r0.invert=t0(function(r){return r});function j_(){return J_(r0).scale(79.4188).clipAngle(180-.001)}function lp(r,e){return[r,e]}lp.invert=lp;function $_(r,e,t){t=t||{};var n=t.units||"kilometers",i=t.steps||8;if(!r)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(r.type){case"GeometryCollection":return _u(r,function(a){var s=Hu(a,e,n,i);s&&o.push(s)}),kr(o);case"FeatureCollection":return Do(r,function(a){var s=Hu(a,e,n,i);s&&Do(s,function(u){u&&o.push(u)})}),kr(o)}return Hu(r,e,n,i)}function Hu(r,e,t,n){var i=r.properties||{},o=r.type==="Feature"?r.geometry:r;if(o.type==="GeometryCollection"){var a=[];return _u(r,function(E){var R=Hu(E,e,t,n);R&&a.push(R)}),kr(a)}var s=Z_(o),u={type:o.type,coordinates:i0(o.coordinates,s)},c=new ph,f=c.read(u),l=Rc(yu(e,t),"meters"),p=Ht.bufferOp(f,l,n),b=new Ag;if(p=b.write(p),!n0(p.coordinates)){var _={type:p.type,coordinates:o0(p.coordinates,s)};return fn(_,i)}}function n0(r){return Array.isArray(r[0])?n0(r[0]):isNaN(r[0])}function i0(r,e){return typeof r[0]!="object"?e(r):r.map(function(t){return i0(t,e)})}function o0(r,e){return typeof r[0]!="object"?e.invert(r):r.map(function(t){return o0(t,e)})}function Z_(r){var e=_l(r).geometry.coordinates,t=[-e[0],-e[1]];return j_().rotate(t).scale(yr)}function Q_(r,e,t){t===void 0&&(t={});var n=Bo(r),i=Bo(e),o=vg.union(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?gs(o[0],t.properties):Lc(o,t.properties)}function Xf(r,e,t){t===void 0&&(t={});var n=Bo(r),i=Bo(e),o=vg.intersection(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?gs(o[0],t.properties):Lc(o,t.properties)}class ze{static MapRange(e,t){const n=[];if(e.total>1e5)throw`Tilerange too big (z is ${e.zoomlevel}, total tiles needed: ${e.total})`;for(let o=e.xstart;o<=e.xend;o++)for(let a=e.ystart;a<=e.yend;a++){const s=t(o,a);n.push(s)}return n}static tile_bounds(e,t,n){return[[ze.tile2lat(n,e),ze.tile2long(t,e)],[ze.tile2lat(n+1,e),ze.tile2long(t+1,e)]]}static tile_bounds_lon_lat(e,t,n){return[[ze.tile2long(t,e),ze.tile2lat(n,e)],[ze.tile2long(t+1,e),ze.tile2lat(n+1,e)]]}static centerPointOf(e,t,n){return[(ze.tile2long(t,e)+ze.tile2long(t+1,e))/2,(ze.tile2lat(n,e)+ze.tile2lat(n+1,e))/2]}static tile_index(e,t,n){return(t*(2<<e)+n)*100+e}static tile_from_index(e){const t=e%100,n=2<<t;e=Math.floor(e/100);const i=Math.floor(e/n);return[t,i,e%n]}static embedded_tile(e,t,n){return{x:ze.lon2tile(t,n),y:ze.lat2tile(e,n),z:n}}static tileRangeFrom(e,t){return ze.TileRangeBetween(t,e.getNorth(),e.getWest(),e.getSouth(),e.getEast())}static TileRangeBetween(e,t,n,i,o){const a=ze.embedded_tile(t,n,e),s=ze.embedded_tile(i,o,e),u=Math.min(a.x,s.x),c=Math.max(a.x,s.x),f=Math.min(a.y,s.y),l=Math.max(a.y,s.y),p=(1+c-u)*(1+l-f);return{xstart:u,xend:c,ystart:f,yend:l,total:p,zoomlevel:e}}static tile2long(e,t){return e/Math.pow(2,t)*360-180}static tile2lat(e,t){const n=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}static lon2tile(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}static lat2tile(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}}const Wr=class{constructor(e){Ee(this,"maxLat");Ee(this,"maxLon");Ee(this,"minLat");Ee(this,"minLon");this.maxLat=-90,this.maxLon=-180,this.minLat=90,this.minLon=180;for(const t of e)this.maxLon=Math.max(this.maxLon,t[0]),this.maxLat=Math.max(this.maxLat,t[1]),this.minLon=Math.min(this.minLon,t[0]),this.minLat=Math.min(this.minLat,t[1]);this.maxLon=Math.min(this.maxLon,180),this.maxLat=Math.min(this.maxLat,90),this.minLon=Math.max(this.minLon,-180),this.minLat=Math.max(this.minLat,-90),this.check()}static fromLeafletBounds(e){return new Wr([[e.getWest(),e.getNorth()],[e.getEast(),e.getSouth()]])}static get(e){var t;if(((t=e.bbox)==null?void 0:t.overlapsWith)===void 0){const n=ui(e);e.bbox=new Wr([[n[0],n[1]],[n[2],n[3]]])}return e.bbox}static bboxAroundAll(e){let t=-90,n=-180,i=80,o=180;for(const a of e)t=Math.max(t,a.maxLat),n=Math.max(n,a.maxLon),i=Math.min(i,a.minLat),o=Math.min(o,a.minLon);return new Wr([[n,t],[o,i]])}static fromTile(e,t,n){return new Wr(ze.tile_bounds_lon_lat(e,t,n))}static fromTileIndex(e){return e===0?Wr.global:Wr.fromTile(...ze.tile_from_index(e))}unionWith(e){return new Wr([[Math.max(this.maxLon,e.maxLon),Math.max(this.maxLat,e.maxLat)],[Math.min(this.minLon,e.minLon),Math.min(this.minLat,e.minLat)]])}containingTileRange(e){return ze.TileRangeBetween(e,this.minLat,this.minLon,this.maxLat,this.maxLon)}overlapsWith(e){return this.maxLon<e.minLon||this.maxLat<e.minLat||this.minLon>e.maxLon?!1:this.minLat<=e.maxLat}isContainedIn(e){return!(this.maxLon>e.maxLon||this.maxLat>e.maxLat||this.minLon<e.minLon||this.minLat<e.minLat)}squarify(){const e=this.maxLon-this.minLon,t=this.maxLat-this.minLat,n=Math.sqrt(e*t),i=(this.maxLon+this.minLon)/2,o=(this.maxLat+this.minLat)/2;return new Wr([[i-n/2,o-n/2],[i+n/2,o+n/2]])}isNearby(e,t){if(this.contains(e))return!0;const[n,i]=e;return this.minLat<=i&&this.maxLat>=i&&sn.distanceBetween(e,[n,this.minLat])<=t||sn.distanceBetween(e,[n,this.maxLat])<=t?this.minLon<=n&&this.maxLon>=n&&sn.distanceBetween(e,[this.minLon,i])<=t||sn.distanceBetween(e,[this.maxLon,i])<=t:!1}getEast(){return this.maxLon}getNorth(){return this.maxLat}getWest(){return this.minLon}getSouth(){return this.minLat}contains(e){return this.minLat<=e[1]&&e[1]<=this.maxLat&&this.minLon<=e[0]&&e[0]<=this.maxLon}pad(e,t=2){const n=Math.min(t/2,Math.abs(this.maxLat-this.minLat)*e),i=Math.min(t/2,Math.abs(this.maxLon-this.minLon)*e);return new Wr([[this.minLon-i,this.minLat-n],[this.maxLon+i,this.maxLat+n]])}padAbsolute(e){return new Wr([[this.minLon-e,this.minLat-e],[this.maxLon+e,this.maxLat+e]])}toLngLat(){return[[this.minLon,this.minLat],[this.maxLon,this.maxLat]]}asGeojsonCached(){return this.geojsonCache===void 0&&(this.geojsonCache=this.asGeoJson({})),this.geojsonCache}asGeoJson(e){return{type:"Feature",properties:e,geometry:this.asGeometry()}}asGeometry(){return{type:"Polygon",coordinates:[[[this.minLon,this.minLat],[this.maxLon,this.minLat],[this.maxLon,this.maxLat],[this.minLon,this.maxLat],[this.minLon,this.minLat]]]}}expandToTileBounds(e){if(e===void 0)return this;const t=ze.embedded_tile(this.minLat,this.minLon,e),n=ze.embedded_tile(this.maxLat,this.maxLon,e),i=ze.tile_bounds_lon_lat(t.z,t.x,t.y),o=ze.tile_bounds_lon_lat(n.z,n.x,n.y);return new Wr([].concat(i,o))}toMercator(){const[e,t]=sn.ConvertWgs84To900913([this.minLon,this.minLat]),[n,i]=sn.ConvertWgs84To900913([this.maxLon,this.maxLat]);return{minLon:e,maxLon:n,minLat:t,maxLat:i}}check(){if(isNaN(this.maxLon)||isNaN(this.maxLat)||isNaN(this.minLon)||isNaN(this.minLat))throw console.trace("BBox with NaN detected:",this),"BBOX has NAN"}};let Po=Wr;Ee(Po,"global",new Wr([[-180,-90],[180,90]]));const ht=class{static union(e,t){return Q_(e,t)}static intersect(e,t){return Xf(e,t)}static surfaceAreaInSqMeters(e){return Nd(e)}static centerpoint(e){const t=_l(e);return t.properties=e.properties,t.id=e.id,t}static centerpointCoordinates(e){return _l(e).geometry.coordinates}static distanceBetween(e,t){return Mi(e,t,{units:"meters"})}static convexHull(e,t){return ay(e,t)}static calculateOverlap(e,t){const n=Po.get(e),i=[];if(e.geometry.type==="Point"){const o=e.geometry.coordinates;for(const a of t)if(!(e.properties.id!==void 0&&e.properties.id===a.properties.id)){if(a.geometry===void 0)throw console.error("No geometry for feature ",e),"List of other features contains a feature without geometry an undefined";ht.inside(o,a)&&i.push({feat:a,overlap:void 0})}return i}if(e.geometry.type==="LineString"){for(const o of t){if(e.properties.id!==void 0&&e.properties.id===o.properties.id)continue;const a=ht.calculateInstersection(e,o,n);a!==null&&i.push({feat:o,overlap:a})}return i}if(e.geometry.type==="Polygon"||e.geometry.type==="MultiPolygon"){for(const o of t){if(e.properties.id!==void 0&&e.properties.id===o.properties.id)continue;if(o.geometry.type==="Point"){this.inside(o,e)&&i.push({feat:o,overlap:void 0});continue}const a=this.calculateInstersection(e,o,n);a!==null&&i.push({feat:o,overlap:a})}return i}return console.error("Could not correctly calculate the overlap of ",e,": unsupported type"),i}static inside(e,t){if(t.geometry.type==="Point")return!1;e.geometry!==void 0&&(e=e.geometry.coordinates);const n=e[0],i=e[1];if(t.geometry.type==="MultiPolygon"){const o=t.geometry.coordinates;for(const a of o)if(ht.pointInPolygonCoordinates(n,i,a))return!0;return!1}if(t.geometry.type==="Polygon")return ht.pointInPolygonCoordinates(n,i,t.geometry.coordinates);throw"GeoOperations.inside: unsupported geometry type "+t.geometry.type}static lengthInMeters(e){return Rd(e)*1e3}static buffer(e,t){return $_(e,t/1e3,{units:"kilometers"})}static bbox(e){const[t,n,i,o]=ui(e);return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[t,n],[i,n],[i,o],[t,o],[t,n]]}}}static nearestPoint(e,t){return rc(e,t,{units:"kilometers"})}static forceLineString(e){return e.geometry.type==="Polygon"?(e={...e},e.geometry={...e.geometry},e.geometry.type="LineString",e.geometry.coordinates=e.geometry.coordinates[0]):e.geometry.type==="MultiPolygon"&&(e={...e},e.geometry={...e.geometry},e.geometry.type="MultiLineString",e.geometry.coordinates=e.geometry.coordinates[0]),e}static toCSV(e){const t=new Set,n=[];function i(s){t.has(s)||(t.add(s),n.push(s))}i("_lat"),i("_lon");const o=[];let a;Array.isArray(e)?a=e:a=e.features;for(const s of a){const u=s.properties;for(const c in u)u.hasOwnProperty(c)&&i(c)}n.sort();for(const s of a){const u=s.properties;let c="";for(const f of n){const l=u[f];l===void 0?c+=",":c+=JSON.stringify(l)+","}o.push(c)}return n.map(s=>JSON.stringify(s)).join(",")+`
`+o.join(`
`)}static ConvertWgs84To900913(e){const t=e[0],n=e[1],i=t*ht._originShift/180;let o=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return o=o*ht._originShift/180,[i,o]}static Convert900913ToWgs84(e){const t=e[0],n=e[1],i=180*t/ht._originShift;let o=180*n/ht._originShift;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),[i,o]}static GeoJsonToWGS84(e){return ky(e)}static SimplifyCoordinates(e){const t=[];for(let n=1;n<e.length-1;n++){const i=e[n],o=e[n-1],a=e[n+1],s=Mo(o,i,{final:!0}),u=Mo(i,a);Math.abs(u-s)<2||t.push(i)}return t}static LineIntersections(e,t){return tc(e,t).features.map(n=>n.geometry.coordinates)}static spreadIntoBboxes(e,t){const n=new Map;for(const i of e){const a=Po.get(i).expandToTileBounds(t).containingTileRange(t);ze.MapRange(a,(s,u)=>{const c=ze.tile_index(t,s,u);let f=n.get(c);f===void 0&&(f=[],n.set(c,f)),f.push(i)})}return n}static toGpx(e,t){t=t==null?void 0:t.trim(),(t===void 0||t==="")&&(t="Uploaded with MapComplete"),t=Qi.EncodeXmlValue(t);const n=[];let i;Array.isArray(e)?i=e:i=e.geometry.coordinates.map(a=>({type:"Feature",properties:{},geometry:{type:"Point",coordinates:a}}));for(const a of i){let s=`    <trkpt lat="${a.geometry.coordinates[1]}" lon="${a.geometry.coordinates[0]}">`;a.properties.date&&(s+=`        <time>${a.properties.date}</time>`),a.properties.altitude&&(s+=`        <ele>${a.properties.altitude}</ele>`),s+="    </trkpt>",n.push(s)}return'<gpx version="1.1" creator="mapcomplete.org" xmlns="http://www.topografix.com/GPX/1/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">'+`
<name>`+t+`</name>
<trk><trkseg>
`+n.join(`
`)+`
</trkseg></trk></gpx>`}static IdentifieCommonSegments(e){const t=new Map;for(let s=0;s<e.length;s++){const u=e[s];for(let c=0;c<u.length-1;c++){const f=u[c],l=u[c+1],p=f[0]>l[0]||f[0]==l[0]&&f[1]>l[1];let b;p?b=""+l+";"+f:b=""+f+";"+l;const _={index:s,isReversed:p};if(t.has(b)){t.get(b).members.push(_);continue}let E;p?E={start:l,end:f,members:[_],intermediate:[]}:E={start:f,end:l,members:[_],intermediate:[]},t.set(b,E)}}let n=!1,i=Array.from(t.values());const o=new Map;for(const s of i){s.members.sort((c,f)=>c.index-f.index);const u=s.start+"";o.has(u)||o.set(u,[]),o.get(u).push(s)}function a(s,u){if(s.members===u.members)return!0;if(s.members.length!==u.members.length)return!1;for(let c=0;c<s.members.length;c++){const f=s.members[c],l=u.members[c];if(f.index!==l.index||f.isReversed!==l.isReversed)return!1}return u.members=s.members,!0}do{n=!1;const s=new Set;for(const u of i){if(s.has(u))continue;console.log("Considering edge",u);const c=o.get(u.end+"");if(console.log("Matchign endpoints:",c),c!==void 0)for(let f=0;f<c.length;f++){const l=c[f];if(!s.has(l)&&a(u,l)){n=!0,console.log("Merging ",u,"with ",l),u.intermediate.push(u.end),u.end=l.end,s.add(l),c.splice(f,1);break}}}i=i.filter(u=>!s.has(u))}while(n);return[]}static removeOvernoding(e){if(e.geometry.type!=="LineString"&&e.geometry.type!=="Polygon")throw"Overnode removal is only supported on linestrings and polygons";const t={...e,geometry:{...e.geometry}};let n;e.geometry.type==="LineString"?(n=[...e.geometry.coordinates],t.geometry.coordinates=n):(n=[...e.geometry.coordinates[0]],t.geometry.coordinates[0]=n);for(let i=n.length-2;i>=1;i--){const o=n[i],a=n[i+1],s=n[i-1];if(ht.distanceBetween(o,s)<.1){n.splice(i,1);continue}if(i==n.length-2&&ht.distanceBetween(o,a)<.1){n.splice(i,1);continue}const c=Mo(o,a),f=Mo(s,o),l=Math.abs(c-f);(l<4||360-l<4)&&n.splice(i,1)}return t}static bearing(e,t){return Mo(e,t)}static along(e,t,n){return xy({type:"Feature",geometry:{type:"LineString",coordinates:[e,t]}},n,{units:"meters"}).geometry.coordinates}static completelyWithin(e,t){return Cy(e,t)}static clipWith(e,t){if(e.geometry.type==="Point"){const n=e;return ht.inside(n.geometry.coordinates,t)?[n]:[]}if(e.geometry.type==="LineString"){const n=By(e,t),i=[];for(const o of n.features)ht.inside(ht.centerpointCoordinates(o),t)&&(o.properties={...e.properties},i.push(o));return i}if(e.geometry.type==="Polygon"||e.geometry.type=="MultiPolygon"){const n=Xf(e,t);return n.properties={...e.properties},[n]}throw"Invalid geometry type with GeoOperations.clipWith: "+e.geometry.type}static featureToCoordinateWithRenderingType(e,t){switch(t){case"point":return e.geometry.type==="Point"?e.geometry.coordinates:void 0;case"centroid":return e.geometry.type==="Point"?void 0:ht.centerpointCoordinates(e);case"projected_centerpoint":if(e.geometry.type==="LineString"||e.geometry.type==="MultiLineString"){const n=ht.centerpointCoordinates(e);return ht.nearestPoint(e,n).geometry.coordinates}return;case"start":return e.geometry.type==="LineString"?e.geometry.coordinates[0]:void 0;case"end":return e.geometry.type==="LineString"?e.geometry.coordinates.at(-1):void 0;default:throw"Unkown location type: "+t}}static slice(e,t){const n=new Map;for(const i of t){const o=Po.get(i);ze.MapRange(ze.tileRangeFrom(o,e),(a,s)=>{const u=ze.tile_index(e,a,s);let c=n.get(u);c===void 0&&(c=[],n.set(u,c)),c.push(i)})}return n}static outerRing(e){return e.geometry.type!=="Polygon"?e:{type:"Feature",properties:e.properties,geometry:{type:"LineString",coordinates:e.geometry.coordinates[0]}}}static centerpointCoordinatesObj(e){const[t,n]=ht.centerpointCoordinates(e);return{lon:t,lat:n}}static pointInPolygonCoordinates(e,t,n){if(!ht.pointWithinRing(e,t,n[0]))return!1;for(let o=1;o<n.length;o++)if(ht.pointWithinRing(e,t,n[o]))return!1;return!0}static pointWithinRing(e,t,n){let i=!1;for(let o=0,a=n.length-1;o<n.length;a=o++){const s=n[o],u=n[a],c=s[0],f=s[1],l=u[0],p=u[1];f>t!=p>t&&e<(l-c)*(t-f)/(p-f)+c&&(i=!i)}return i}static calculateInstersection(e,t,n,i){if(e.geometry.type==="LineString"){if(i=i??Po.get(t),!n.overlapsWith(i))return null;let a=tc(e,t);if(a.features.length==0){const l=e.geometry.coordinates[0];return this.inside(l,t)?this.lengthInMeters(e):null}let s=a.features.map(f=>f.geometry.coordinates);if(t.geometry.type==="LineString")return s.length>0?0:null;if(s.length==1){const f=e.geometry.coordinates,l=f[0];this.inside(l,t)?s.push(l):s.push(f[f.length-1])}let u=Ey(Yt(s[0]),Yt(s[1]),e);return u==null?null:Rd(u)*1e3}if(e.geometry.type==="Polygon"||e.geometry.type==="MultiPolygon"){const o=Po.get(t);if(!n.overlapsWith(o))return null;if(t.geometry.type==="LineString")return this.calculateInstersection(t,e,o,n);try{const s=Xf(e,t);return s==null?null:Nd(s)}catch(s){if(s.message==="Each LinearRing of a Polygon must have 4 or more Positions.")return null;throw s}}throw"CalculateIntersection fallthrough: can not calculate an intersection between features"}static SplitSelfIntersectingWays(e){const t=[];for(const n of e)if(n.geometry.type==="LineString"){let i=n.geometry.coordinates;for(let o=i.length-1;o>=0;o--){const a=i[o];for(let s=o+1;s<i.length;s++){const u=i[s];if(Math.abs(a[0]-u[0])<=1e-6&&Math.abs(a[1]-u[1])<=1e-7){console.debug("SPlitting way",n.properties.id),t.push({...n,geometry:{...n.geometry,coordinates:i.slice(o+1)}}),i=i.slice(0,o+1);break}}}t.push({...n,geometry:{...n.geometry,coordinates:i}})}return t}};let sn=ht;Ee(sn,"_earthRadius",6378137),Ee(sn,"_originShift",2*Math.PI*ht._earthRadius/2);var no={},Kc={},Qo={},yn={},e1={get exports(){return yn},set exports(r){yn=r}};(function(r){(function(e,t){function n(C,h){if(!C)throw new Error(h||"Assertion failed")}function i(C,h){C.super_=h;var g=function(){};g.prototype=h.prototype,C.prototype=new g,C.prototype.constructor=C}function o(C,h,g){if(o.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((h==="le"||h==="be")&&(g=h,h=10),this._init(C||0,h||10,g||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Xp.Buffer}catch{}o.isBN=function(h){return h instanceof o?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===o.wordSize&&Array.isArray(h.words)},o.max=function(h,g){return h.cmp(g)>0?h:g},o.min=function(h,g){return h.cmp(g)<0?h:g},o.prototype._init=function(h,g,w){if(typeof h=="number")return this._initNumber(h,g,w);if(typeof h=="object")return this._initArray(h,g,w);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),h=h.toString().replace(/\s+/g,"");var S=0;h[0]==="-"&&(S++,this.negative=1),S<h.length&&(g===16?this._parseHex(h,S,w):(this._parseBase(h,g,S),w==="le"&&this._initArray(this.toArray(),g,w)))},o.prototype._initNumber=function(h,g,w){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(n(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),g,w)},o.prototype._initArray=function(h,g,w){if(n(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var N,T,k=0;if(w==="be")for(S=h.length-1,N=0;S>=0;S-=3)T=h[S]|h[S-1]<<8|h[S-2]<<16,this.words[N]|=T<<k&67108863,this.words[N+1]=T>>>26-k&67108863,k+=24,k>=26&&(k-=26,N++);else if(w==="le")for(S=0,N=0;S<h.length;S+=3)T=h[S]|h[S+1]<<8|h[S+2]<<16,this.words[N]|=T<<k&67108863,this.words[N+1]=T>>>26-k&67108863,k+=24,k>=26&&(k-=26,N++);return this.strip()};function s(C,h){var g=C.charCodeAt(h);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function u(C,h,g){var w=s(C,g);return g-1>=h&&(w|=s(C,g-1)<<4),w}o.prototype._parseHex=function(h,g,w){this.length=Math.ceil((h.length-g)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var N=0,T=0,k;if(w==="be")for(S=h.length-1;S>=g;S-=2)k=u(h,g,S)<<N,this.words[T]|=k&67108863,N>=18?(N-=18,T+=1,this.words[T]|=k>>>26):N+=8;else{var P=h.length-g;for(S=P%2===0?g+1:g;S<h.length;S+=2)k=u(h,g,S)<<N,this.words[T]|=k&67108863,N>=18?(N-=18,T+=1,this.words[T]|=k>>>26):N+=8}this.strip()};function c(C,h,g,w){for(var S=0,N=Math.min(C.length,g),T=h;T<N;T++){var k=C.charCodeAt(T)-48;S*=w,k>=49?S+=k-49+10:k>=17?S+=k-17+10:S+=k}return S}o.prototype._parseBase=function(h,g,w){this.words=[0],this.length=1;for(var S=0,N=1;N<=67108863;N*=g)S++;S--,N=N/g|0;for(var T=h.length-w,k=T%S,P=Math.min(T,T-k)+w,d=0,I=w;I<P;I+=S)d=c(h,I,I+S,g),this.imuln(N),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(k!==0){var K=1;for(d=c(h,I,h.length,g),I=0;I<k;I++)K*=g;this.imuln(K),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},o.prototype.copy=function(h){h.words=new Array(this.length);for(var g=0;g<this.length;g++)h.words[g]=this.words[g];h.length=this.length,h.negative=this.negative,h.red=this.red},o.prototype.clone=function(){var h=new o(null);return this.copy(h),h},o.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(h,g){h=h||10,g=g|0||1;var w;if(h===16||h==="hex"){w="";for(var S=0,N=0,T=0;T<this.length;T++){var k=this.words[T],P=((k<<S|N)&16777215).toString(16);N=k>>>24-S&16777215,N!==0||T!==this.length-1?w=f[6-P.length]+P+w:w=P+w,S+=2,S>=26&&(S-=26,T--)}for(N!==0&&(w=N.toString(16)+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(h===(h|0)&&h>=2&&h<=36){var d=l[h],I=p[h];w="";var K=this.clone();for(K.negative=0;!K.isZero();){var Q=K.modn(I).toString(h);K=K.idivn(I),K.isZero()?w=Q+w:w=f[d-Q.length]+Q+w}for(this.isZero()&&(w="0"+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(h,g){return n(typeof a<"u"),this.toArrayLike(a,h,g)},o.prototype.toArray=function(h,g){return this.toArrayLike(Array,h,g)},o.prototype.toArrayLike=function(h,g,w){var S=this.byteLength(),N=w||Math.max(1,S);n(S<=N,"byte array longer than desired length"),n(N>0,"Requested array length <= 0"),this.strip();var T=g==="le",k=new h(N),P,d,I=this.clone();if(T){for(d=0;!I.isZero();d++)P=I.andln(255),I.iushrn(8),k[d]=P;for(;d<N;d++)k[d]=0}else{for(d=0;d<N-S;d++)k[d]=0;for(d=0;!I.isZero();d++)P=I.andln(255),I.iushrn(8),k[N-d-1]=P}return k},Math.clz32?o.prototype._countBits=function(h){return 32-Math.clz32(h)}:o.prototype._countBits=function(h){var g=h,w=0;return g>=4096&&(w+=13,g>>>=13),g>=64&&(w+=7,g>>>=7),g>=8&&(w+=4,g>>>=4),g>=2&&(w+=2,g>>>=2),w+g},o.prototype._zeroBits=function(h){if(h===0)return 26;var g=h,w=0;return g&8191||(w+=13,g>>>=13),g&127||(w+=7,g>>>=7),g&15||(w+=4,g>>>=4),g&3||(w+=2,g>>>=2),g&1||w++,w},o.prototype.bitLength=function(){var h=this.words[this.length-1],g=this._countBits(h);return(this.length-1)*26+g};function b(C){for(var h=new Array(C.bitLength()),g=0;g<h.length;g++){var w=g/26|0,S=g%26;h[g]=(C.words[w]&1<<S)>>>S}return h}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,g=0;g<this.length;g++){var w=this._zeroBits(this.words[g]);if(h+=w,w!==26)break}return h},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},o.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]|h.words[g];return this.strip()},o.prototype.ior=function(h){return n((this.negative|h.negative)===0),this.iuor(h)},o.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},o.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},o.prototype.iuand=function(h){var g;this.length>h.length?g=h:g=this;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]&h.words[w];return this.length=g.length,this.strip()},o.prototype.iand=function(h){return n((this.negative|h.negative)===0),this.iuand(h)},o.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},o.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},o.prototype.iuxor=function(h){var g,w;this.length>h.length?(g=this,w=h):(g=h,w=this);for(var S=0;S<w.length;S++)this.words[S]=g.words[S]^w.words[S];if(this!==g)for(;S<g.length;S++)this.words[S]=g.words[S];return this.length=g.length,this.strip()},o.prototype.ixor=function(h){return n((this.negative|h.negative)===0),this.iuxor(h)},o.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},o.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},o.prototype.inotn=function(h){n(typeof h=="number"&&h>=0);var g=Math.ceil(h/26)|0,w=h%26;this._expand(g),w>0&&g--;for(var S=0;S<g;S++)this.words[S]=~this.words[S]&67108863;return w>0&&(this.words[S]=~this.words[S]&67108863>>26-w),this.strip()},o.prototype.notn=function(h){return this.clone().inotn(h)},o.prototype.setn=function(h,g){n(typeof h=="number"&&h>=0);var w=h/26|0,S=h%26;return this._expand(w+1),g?this.words[w]=this.words[w]|1<<S:this.words[w]=this.words[w]&~(1<<S),this.strip()},o.prototype.iadd=function(h){var g;if(this.negative!==0&&h.negative===0)return this.negative=0,g=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,g=this.isub(h),h.negative=1,g._normSign();var w,S;this.length>h.length?(w=this,S=h):(w=h,S=this);for(var N=0,T=0;T<S.length;T++)g=(w.words[T]|0)+(S.words[T]|0)+N,this.words[T]=g&67108863,N=g>>>26;for(;N!==0&&T<w.length;T++)g=(w.words[T]|0)+N,this.words[T]=g&67108863,N=g>>>26;if(this.length=w.length,N!==0)this.words[this.length]=N,this.length++;else if(w!==this)for(;T<w.length;T++)this.words[T]=w.words[T];return this},o.prototype.add=function(h){var g;return h.negative!==0&&this.negative===0?(h.negative=0,g=this.sub(h),h.negative^=1,g):h.negative===0&&this.negative!==0?(this.negative=0,g=h.sub(this),this.negative=1,g):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},o.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var g=this.iadd(h);return h.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var w=this.cmp(h);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,N;w>0?(S=this,N=h):(S=h,N=this);for(var T=0,k=0;k<N.length;k++)g=(S.words[k]|0)-(N.words[k]|0)+T,T=g>>26,this.words[k]=g&67108863;for(;T!==0&&k<S.length;k++)g=(S.words[k]|0)+T,T=g>>26,this.words[k]=g&67108863;if(T===0&&k<S.length&&S!==this)for(;k<S.length;k++)this.words[k]=S.words[k];return this.length=Math.max(this.length,k),S!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(h){return this.clone().isub(h)};function _(C,h,g){g.negative=h.negative^C.negative;var w=C.length+h.length|0;g.length=w,w=w-1|0;var S=C.words[0]|0,N=h.words[0]|0,T=S*N,k=T&67108863,P=T/67108864|0;g.words[0]=k;for(var d=1;d<w;d++){for(var I=P>>>26,K=P&67108863,Q=Math.min(d,h.length-1),Z=Math.max(0,d-C.length+1);Z<=Q;Z++){var te=d-Z|0;S=C.words[te]|0,N=h.words[Z]|0,T=S*N+K,I+=T/67108864|0,K=T&67108863}g.words[d]=K|0,P=I|0}return P!==0?g.words[d]=P|0:g.length--,g.strip()}var E=function(h,g,w){var S=h.words,N=g.words,T=w.words,k=0,P,d,I,K=S[0]|0,Q=K&8191,Z=K>>>13,te=S[1]|0,ne=te&8191,le=te>>>13,je=S[2]|0,pe=je&8191,xe=je>>>13,rr=S[3]|0,Re=rr&8191,ge=rr>>>13,nr=S[4]|0,Te=nr&8191,A=nr>>>13,v=S[5]|0,y=v&8191,L=v>>>13,G=S[6]|0,J=G&8191,Y=G>>>13,Se=S[7]|0,ce=Se&8191,de=Se>>>13,ot=S[8]|0,ye=ot&8191,$e=ot>>>13,Ns=S[9]|0,at=Ns&8191,_t=Ns>>>13,od=N[0]|0,bt=od&8191,wt=od>>>13,ad=N[1]|0,xt=ad&8191,Et=ad>>>13,sd=N[2]|0,St=sd&8191,Ct=sd>>>13,ud=N[3]|0,It=ud&8191,At=ud>>>13,cd=N[4]|0,Mt=cd&8191,Nt=cd>>>13,fd=N[5]|0,Pt=fd&8191,Lt=fd>>>13,ld=N[6]|0,Rt=ld&8191,Tt=ld>>>13,hd=N[7]|0,Ot=hd&8191,Dt=hd>>>13,dd=N[8]|0,Bt=dd&8191,kt=dd>>>13,pd=N[9]|0,Ft=pd&8191,zt=pd>>>13;w.negative=h.negative^g.negative,w.length=19,P=Math.imul(Q,bt),d=Math.imul(Q,wt),d=d+Math.imul(Z,bt)|0,I=Math.imul(Z,wt);var yf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(yf>>>26)|0,yf&=67108863,P=Math.imul(ne,bt),d=Math.imul(ne,wt),d=d+Math.imul(le,bt)|0,I=Math.imul(le,wt),P=P+Math.imul(Q,xt)|0,d=d+Math.imul(Q,Et)|0,d=d+Math.imul(Z,xt)|0,I=I+Math.imul(Z,Et)|0;var _f=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(_f>>>26)|0,_f&=67108863,P=Math.imul(pe,bt),d=Math.imul(pe,wt),d=d+Math.imul(xe,bt)|0,I=Math.imul(xe,wt),P=P+Math.imul(ne,xt)|0,d=d+Math.imul(ne,Et)|0,d=d+Math.imul(le,xt)|0,I=I+Math.imul(le,Et)|0,P=P+Math.imul(Q,St)|0,d=d+Math.imul(Q,Ct)|0,d=d+Math.imul(Z,St)|0,I=I+Math.imul(Z,Ct)|0;var bf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(bf>>>26)|0,bf&=67108863,P=Math.imul(Re,bt),d=Math.imul(Re,wt),d=d+Math.imul(ge,bt)|0,I=Math.imul(ge,wt),P=P+Math.imul(pe,xt)|0,d=d+Math.imul(pe,Et)|0,d=d+Math.imul(xe,xt)|0,I=I+Math.imul(xe,Et)|0,P=P+Math.imul(ne,St)|0,d=d+Math.imul(ne,Ct)|0,d=d+Math.imul(le,St)|0,I=I+Math.imul(le,Ct)|0,P=P+Math.imul(Q,It)|0,d=d+Math.imul(Q,At)|0,d=d+Math.imul(Z,It)|0,I=I+Math.imul(Z,At)|0;var wf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(wf>>>26)|0,wf&=67108863,P=Math.imul(Te,bt),d=Math.imul(Te,wt),d=d+Math.imul(A,bt)|0,I=Math.imul(A,wt),P=P+Math.imul(Re,xt)|0,d=d+Math.imul(Re,Et)|0,d=d+Math.imul(ge,xt)|0,I=I+Math.imul(ge,Et)|0,P=P+Math.imul(pe,St)|0,d=d+Math.imul(pe,Ct)|0,d=d+Math.imul(xe,St)|0,I=I+Math.imul(xe,Ct)|0,P=P+Math.imul(ne,It)|0,d=d+Math.imul(ne,At)|0,d=d+Math.imul(le,It)|0,I=I+Math.imul(le,At)|0,P=P+Math.imul(Q,Mt)|0,d=d+Math.imul(Q,Nt)|0,d=d+Math.imul(Z,Mt)|0,I=I+Math.imul(Z,Nt)|0;var xf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(xf>>>26)|0,xf&=67108863,P=Math.imul(y,bt),d=Math.imul(y,wt),d=d+Math.imul(L,bt)|0,I=Math.imul(L,wt),P=P+Math.imul(Te,xt)|0,d=d+Math.imul(Te,Et)|0,d=d+Math.imul(A,xt)|0,I=I+Math.imul(A,Et)|0,P=P+Math.imul(Re,St)|0,d=d+Math.imul(Re,Ct)|0,d=d+Math.imul(ge,St)|0,I=I+Math.imul(ge,Ct)|0,P=P+Math.imul(pe,It)|0,d=d+Math.imul(pe,At)|0,d=d+Math.imul(xe,It)|0,I=I+Math.imul(xe,At)|0,P=P+Math.imul(ne,Mt)|0,d=d+Math.imul(ne,Nt)|0,d=d+Math.imul(le,Mt)|0,I=I+Math.imul(le,Nt)|0,P=P+Math.imul(Q,Pt)|0,d=d+Math.imul(Q,Lt)|0,d=d+Math.imul(Z,Pt)|0,I=I+Math.imul(Z,Lt)|0;var Ef=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Ef>>>26)|0,Ef&=67108863,P=Math.imul(J,bt),d=Math.imul(J,wt),d=d+Math.imul(Y,bt)|0,I=Math.imul(Y,wt),P=P+Math.imul(y,xt)|0,d=d+Math.imul(y,Et)|0,d=d+Math.imul(L,xt)|0,I=I+Math.imul(L,Et)|0,P=P+Math.imul(Te,St)|0,d=d+Math.imul(Te,Ct)|0,d=d+Math.imul(A,St)|0,I=I+Math.imul(A,Ct)|0,P=P+Math.imul(Re,It)|0,d=d+Math.imul(Re,At)|0,d=d+Math.imul(ge,It)|0,I=I+Math.imul(ge,At)|0,P=P+Math.imul(pe,Mt)|0,d=d+Math.imul(pe,Nt)|0,d=d+Math.imul(xe,Mt)|0,I=I+Math.imul(xe,Nt)|0,P=P+Math.imul(ne,Pt)|0,d=d+Math.imul(ne,Lt)|0,d=d+Math.imul(le,Pt)|0,I=I+Math.imul(le,Lt)|0,P=P+Math.imul(Q,Rt)|0,d=d+Math.imul(Q,Tt)|0,d=d+Math.imul(Z,Rt)|0,I=I+Math.imul(Z,Tt)|0;var Sf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Sf>>>26)|0,Sf&=67108863,P=Math.imul(ce,bt),d=Math.imul(ce,wt),d=d+Math.imul(de,bt)|0,I=Math.imul(de,wt),P=P+Math.imul(J,xt)|0,d=d+Math.imul(J,Et)|0,d=d+Math.imul(Y,xt)|0,I=I+Math.imul(Y,Et)|0,P=P+Math.imul(y,St)|0,d=d+Math.imul(y,Ct)|0,d=d+Math.imul(L,St)|0,I=I+Math.imul(L,Ct)|0,P=P+Math.imul(Te,It)|0,d=d+Math.imul(Te,At)|0,d=d+Math.imul(A,It)|0,I=I+Math.imul(A,At)|0,P=P+Math.imul(Re,Mt)|0,d=d+Math.imul(Re,Nt)|0,d=d+Math.imul(ge,Mt)|0,I=I+Math.imul(ge,Nt)|0,P=P+Math.imul(pe,Pt)|0,d=d+Math.imul(pe,Lt)|0,d=d+Math.imul(xe,Pt)|0,I=I+Math.imul(xe,Lt)|0,P=P+Math.imul(ne,Rt)|0,d=d+Math.imul(ne,Tt)|0,d=d+Math.imul(le,Rt)|0,I=I+Math.imul(le,Tt)|0,P=P+Math.imul(Q,Ot)|0,d=d+Math.imul(Q,Dt)|0,d=d+Math.imul(Z,Ot)|0,I=I+Math.imul(Z,Dt)|0;var Cf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Cf>>>26)|0,Cf&=67108863,P=Math.imul(ye,bt),d=Math.imul(ye,wt),d=d+Math.imul($e,bt)|0,I=Math.imul($e,wt),P=P+Math.imul(ce,xt)|0,d=d+Math.imul(ce,Et)|0,d=d+Math.imul(de,xt)|0,I=I+Math.imul(de,Et)|0,P=P+Math.imul(J,St)|0,d=d+Math.imul(J,Ct)|0,d=d+Math.imul(Y,St)|0,I=I+Math.imul(Y,Ct)|0,P=P+Math.imul(y,It)|0,d=d+Math.imul(y,At)|0,d=d+Math.imul(L,It)|0,I=I+Math.imul(L,At)|0,P=P+Math.imul(Te,Mt)|0,d=d+Math.imul(Te,Nt)|0,d=d+Math.imul(A,Mt)|0,I=I+Math.imul(A,Nt)|0,P=P+Math.imul(Re,Pt)|0,d=d+Math.imul(Re,Lt)|0,d=d+Math.imul(ge,Pt)|0,I=I+Math.imul(ge,Lt)|0,P=P+Math.imul(pe,Rt)|0,d=d+Math.imul(pe,Tt)|0,d=d+Math.imul(xe,Rt)|0,I=I+Math.imul(xe,Tt)|0,P=P+Math.imul(ne,Ot)|0,d=d+Math.imul(ne,Dt)|0,d=d+Math.imul(le,Ot)|0,I=I+Math.imul(le,Dt)|0,P=P+Math.imul(Q,Bt)|0,d=d+Math.imul(Q,kt)|0,d=d+Math.imul(Z,Bt)|0,I=I+Math.imul(Z,kt)|0;var If=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(If>>>26)|0,If&=67108863,P=Math.imul(at,bt),d=Math.imul(at,wt),d=d+Math.imul(_t,bt)|0,I=Math.imul(_t,wt),P=P+Math.imul(ye,xt)|0,d=d+Math.imul(ye,Et)|0,d=d+Math.imul($e,xt)|0,I=I+Math.imul($e,Et)|0,P=P+Math.imul(ce,St)|0,d=d+Math.imul(ce,Ct)|0,d=d+Math.imul(de,St)|0,I=I+Math.imul(de,Ct)|0,P=P+Math.imul(J,It)|0,d=d+Math.imul(J,At)|0,d=d+Math.imul(Y,It)|0,I=I+Math.imul(Y,At)|0,P=P+Math.imul(y,Mt)|0,d=d+Math.imul(y,Nt)|0,d=d+Math.imul(L,Mt)|0,I=I+Math.imul(L,Nt)|0,P=P+Math.imul(Te,Pt)|0,d=d+Math.imul(Te,Lt)|0,d=d+Math.imul(A,Pt)|0,I=I+Math.imul(A,Lt)|0,P=P+Math.imul(Re,Rt)|0,d=d+Math.imul(Re,Tt)|0,d=d+Math.imul(ge,Rt)|0,I=I+Math.imul(ge,Tt)|0,P=P+Math.imul(pe,Ot)|0,d=d+Math.imul(pe,Dt)|0,d=d+Math.imul(xe,Ot)|0,I=I+Math.imul(xe,Dt)|0,P=P+Math.imul(ne,Bt)|0,d=d+Math.imul(ne,kt)|0,d=d+Math.imul(le,Bt)|0,I=I+Math.imul(le,kt)|0,P=P+Math.imul(Q,Ft)|0,d=d+Math.imul(Q,zt)|0,d=d+Math.imul(Z,Ft)|0,I=I+Math.imul(Z,zt)|0;var Af=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Af>>>26)|0,Af&=67108863,P=Math.imul(at,xt),d=Math.imul(at,Et),d=d+Math.imul(_t,xt)|0,I=Math.imul(_t,Et),P=P+Math.imul(ye,St)|0,d=d+Math.imul(ye,Ct)|0,d=d+Math.imul($e,St)|0,I=I+Math.imul($e,Ct)|0,P=P+Math.imul(ce,It)|0,d=d+Math.imul(ce,At)|0,d=d+Math.imul(de,It)|0,I=I+Math.imul(de,At)|0,P=P+Math.imul(J,Mt)|0,d=d+Math.imul(J,Nt)|0,d=d+Math.imul(Y,Mt)|0,I=I+Math.imul(Y,Nt)|0,P=P+Math.imul(y,Pt)|0,d=d+Math.imul(y,Lt)|0,d=d+Math.imul(L,Pt)|0,I=I+Math.imul(L,Lt)|0,P=P+Math.imul(Te,Rt)|0,d=d+Math.imul(Te,Tt)|0,d=d+Math.imul(A,Rt)|0,I=I+Math.imul(A,Tt)|0,P=P+Math.imul(Re,Ot)|0,d=d+Math.imul(Re,Dt)|0,d=d+Math.imul(ge,Ot)|0,I=I+Math.imul(ge,Dt)|0,P=P+Math.imul(pe,Bt)|0,d=d+Math.imul(pe,kt)|0,d=d+Math.imul(xe,Bt)|0,I=I+Math.imul(xe,kt)|0,P=P+Math.imul(ne,Ft)|0,d=d+Math.imul(ne,zt)|0,d=d+Math.imul(le,Ft)|0,I=I+Math.imul(le,zt)|0;var Mf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Mf>>>26)|0,Mf&=67108863,P=Math.imul(at,St),d=Math.imul(at,Ct),d=d+Math.imul(_t,St)|0,I=Math.imul(_t,Ct),P=P+Math.imul(ye,It)|0,d=d+Math.imul(ye,At)|0,d=d+Math.imul($e,It)|0,I=I+Math.imul($e,At)|0,P=P+Math.imul(ce,Mt)|0,d=d+Math.imul(ce,Nt)|0,d=d+Math.imul(de,Mt)|0,I=I+Math.imul(de,Nt)|0,P=P+Math.imul(J,Pt)|0,d=d+Math.imul(J,Lt)|0,d=d+Math.imul(Y,Pt)|0,I=I+Math.imul(Y,Lt)|0,P=P+Math.imul(y,Rt)|0,d=d+Math.imul(y,Tt)|0,d=d+Math.imul(L,Rt)|0,I=I+Math.imul(L,Tt)|0,P=P+Math.imul(Te,Ot)|0,d=d+Math.imul(Te,Dt)|0,d=d+Math.imul(A,Ot)|0,I=I+Math.imul(A,Dt)|0,P=P+Math.imul(Re,Bt)|0,d=d+Math.imul(Re,kt)|0,d=d+Math.imul(ge,Bt)|0,I=I+Math.imul(ge,kt)|0,P=P+Math.imul(pe,Ft)|0,d=d+Math.imul(pe,zt)|0,d=d+Math.imul(xe,Ft)|0,I=I+Math.imul(xe,zt)|0;var Nf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Nf>>>26)|0,Nf&=67108863,P=Math.imul(at,It),d=Math.imul(at,At),d=d+Math.imul(_t,It)|0,I=Math.imul(_t,At),P=P+Math.imul(ye,Mt)|0,d=d+Math.imul(ye,Nt)|0,d=d+Math.imul($e,Mt)|0,I=I+Math.imul($e,Nt)|0,P=P+Math.imul(ce,Pt)|0,d=d+Math.imul(ce,Lt)|0,d=d+Math.imul(de,Pt)|0,I=I+Math.imul(de,Lt)|0,P=P+Math.imul(J,Rt)|0,d=d+Math.imul(J,Tt)|0,d=d+Math.imul(Y,Rt)|0,I=I+Math.imul(Y,Tt)|0,P=P+Math.imul(y,Ot)|0,d=d+Math.imul(y,Dt)|0,d=d+Math.imul(L,Ot)|0,I=I+Math.imul(L,Dt)|0,P=P+Math.imul(Te,Bt)|0,d=d+Math.imul(Te,kt)|0,d=d+Math.imul(A,Bt)|0,I=I+Math.imul(A,kt)|0,P=P+Math.imul(Re,Ft)|0,d=d+Math.imul(Re,zt)|0,d=d+Math.imul(ge,Ft)|0,I=I+Math.imul(ge,zt)|0;var Pf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Pf>>>26)|0,Pf&=67108863,P=Math.imul(at,Mt),d=Math.imul(at,Nt),d=d+Math.imul(_t,Mt)|0,I=Math.imul(_t,Nt),P=P+Math.imul(ye,Pt)|0,d=d+Math.imul(ye,Lt)|0,d=d+Math.imul($e,Pt)|0,I=I+Math.imul($e,Lt)|0,P=P+Math.imul(ce,Rt)|0,d=d+Math.imul(ce,Tt)|0,d=d+Math.imul(de,Rt)|0,I=I+Math.imul(de,Tt)|0,P=P+Math.imul(J,Ot)|0,d=d+Math.imul(J,Dt)|0,d=d+Math.imul(Y,Ot)|0,I=I+Math.imul(Y,Dt)|0,P=P+Math.imul(y,Bt)|0,d=d+Math.imul(y,kt)|0,d=d+Math.imul(L,Bt)|0,I=I+Math.imul(L,kt)|0,P=P+Math.imul(Te,Ft)|0,d=d+Math.imul(Te,zt)|0,d=d+Math.imul(A,Ft)|0,I=I+Math.imul(A,zt)|0;var Lf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Lf>>>26)|0,Lf&=67108863,P=Math.imul(at,Pt),d=Math.imul(at,Lt),d=d+Math.imul(_t,Pt)|0,I=Math.imul(_t,Lt),P=P+Math.imul(ye,Rt)|0,d=d+Math.imul(ye,Tt)|0,d=d+Math.imul($e,Rt)|0,I=I+Math.imul($e,Tt)|0,P=P+Math.imul(ce,Ot)|0,d=d+Math.imul(ce,Dt)|0,d=d+Math.imul(de,Ot)|0,I=I+Math.imul(de,Dt)|0,P=P+Math.imul(J,Bt)|0,d=d+Math.imul(J,kt)|0,d=d+Math.imul(Y,Bt)|0,I=I+Math.imul(Y,kt)|0,P=P+Math.imul(y,Ft)|0,d=d+Math.imul(y,zt)|0,d=d+Math.imul(L,Ft)|0,I=I+Math.imul(L,zt)|0;var Rf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Rf>>>26)|0,Rf&=67108863,P=Math.imul(at,Rt),d=Math.imul(at,Tt),d=d+Math.imul(_t,Rt)|0,I=Math.imul(_t,Tt),P=P+Math.imul(ye,Ot)|0,d=d+Math.imul(ye,Dt)|0,d=d+Math.imul($e,Ot)|0,I=I+Math.imul($e,Dt)|0,P=P+Math.imul(ce,Bt)|0,d=d+Math.imul(ce,kt)|0,d=d+Math.imul(de,Bt)|0,I=I+Math.imul(de,kt)|0,P=P+Math.imul(J,Ft)|0,d=d+Math.imul(J,zt)|0,d=d+Math.imul(Y,Ft)|0,I=I+Math.imul(Y,zt)|0;var Tf=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Tf>>>26)|0,Tf&=67108863,P=Math.imul(at,Ot),d=Math.imul(at,Dt),d=d+Math.imul(_t,Ot)|0,I=Math.imul(_t,Dt),P=P+Math.imul(ye,Bt)|0,d=d+Math.imul(ye,kt)|0,d=d+Math.imul($e,Bt)|0,I=I+Math.imul($e,kt)|0,P=P+Math.imul(ce,Ft)|0,d=d+Math.imul(ce,zt)|0,d=d+Math.imul(de,Ft)|0,I=I+Math.imul(de,zt)|0;var Of=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Of>>>26)|0,Of&=67108863,P=Math.imul(at,Bt),d=Math.imul(at,kt),d=d+Math.imul(_t,Bt)|0,I=Math.imul(_t,kt),P=P+Math.imul(ye,Ft)|0,d=d+Math.imul(ye,zt)|0,d=d+Math.imul($e,Ft)|0,I=I+Math.imul($e,zt)|0;var Df=(k+P|0)+((d&8191)<<13)|0;k=(I+(d>>>13)|0)+(Df>>>26)|0,Df&=67108863,P=Math.imul(at,Ft),d=Math.imul(at,zt),d=d+Math.imul(_t,Ft)|0,I=Math.imul(_t,zt);var Bf=(k+P|0)+((d&8191)<<13)|0;return k=(I+(d>>>13)|0)+(Bf>>>26)|0,Bf&=67108863,T[0]=yf,T[1]=_f,T[2]=bf,T[3]=wf,T[4]=xf,T[5]=Ef,T[6]=Sf,T[7]=Cf,T[8]=If,T[9]=Af,T[10]=Mf,T[11]=Nf,T[12]=Pf,T[13]=Lf,T[14]=Rf,T[15]=Tf,T[16]=Of,T[17]=Df,T[18]=Bf,k!==0&&(T[19]=k,w.length++),w};Math.imul||(E=_);function R(C,h,g){g.negative=h.negative^C.negative,g.length=C.length+h.length;for(var w=0,S=0,N=0;N<g.length-1;N++){var T=S;S=0;for(var k=w&67108863,P=Math.min(N,h.length-1),d=Math.max(0,N-C.length+1);d<=P;d++){var I=N-d,K=C.words[I]|0,Q=h.words[d]|0,Z=K*Q,te=Z&67108863;T=T+(Z/67108864|0)|0,te=te+k|0,k=te&67108863,T=T+(te>>>26)|0,S+=T>>>26,T&=67108863}g.words[N]=k,w=T,T=S}return w!==0?g.words[N]=w:g.length--,g.strip()}function D(C,h,g){var w=new m;return w.mulp(C,h,g)}o.prototype.mulTo=function(h,g){var w,S=this.length+h.length;return this.length===10&&h.length===10?w=E(this,h,g):S<63?w=_(this,h,g):S<1024?w=R(this,h,g):w=D(this,h,g),w};function m(C,h){this.x=C,this.y=h}m.prototype.makeRBT=function(h){for(var g=new Array(h),w=o.prototype._countBits(h)-1,S=0;S<h;S++)g[S]=this.revBin(S,w,h);return g},m.prototype.revBin=function(h,g,w){if(h===0||h===w-1)return h;for(var S=0,N=0;N<g;N++)S|=(h&1)<<g-N-1,h>>=1;return S},m.prototype.permute=function(h,g,w,S,N,T){for(var k=0;k<T;k++)S[k]=g[h[k]],N[k]=w[h[k]]},m.prototype.transform=function(h,g,w,S,N,T){this.permute(T,h,g,w,S,N);for(var k=1;k<N;k<<=1)for(var P=k<<1,d=Math.cos(2*Math.PI/P),I=Math.sin(2*Math.PI/P),K=0;K<N;K+=P)for(var Q=d,Z=I,te=0;te<k;te++){var ne=w[K+te],le=S[K+te],je=w[K+te+k],pe=S[K+te+k],xe=Q*je-Z*pe;pe=Q*pe+Z*je,je=xe,w[K+te]=ne+je,S[K+te]=le+pe,w[K+te+k]=ne-je,S[K+te+k]=le-pe,te!==P&&(xe=d*Q-I*Z,Z=d*Z+I*Q,Q=xe)}},m.prototype.guessLen13b=function(h,g){var w=Math.max(g,h)|1,S=w&1,N=0;for(w=w/2|0;w;w=w>>>1)N++;return 1<<N+1+S},m.prototype.conjugate=function(h,g,w){if(!(w<=1))for(var S=0;S<w/2;S++){var N=h[S];h[S]=h[w-S-1],h[w-S-1]=N,N=g[S],g[S]=-g[w-S-1],g[w-S-1]=-N}},m.prototype.normalize13b=function(h,g){for(var w=0,S=0;S<g/2;S++){var N=Math.round(h[2*S+1]/g)*8192+Math.round(h[2*S]/g)+w;h[S]=N&67108863,N<67108864?w=0:w=N/67108864|0}return h},m.prototype.convert13b=function(h,g,w,S){for(var N=0,T=0;T<g;T++)N=N+(h[T]|0),w[2*T]=N&8191,N=N>>>13,w[2*T+1]=N&8191,N=N>>>13;for(T=2*g;T<S;++T)w[T]=0;n(N===0),n((N&-8192)===0)},m.prototype.stub=function(h){for(var g=new Array(h),w=0;w<h;w++)g[w]=0;return g},m.prototype.mulp=function(h,g,w){var S=2*this.guessLen13b(h.length,g.length),N=this.makeRBT(S),T=this.stub(S),k=new Array(S),P=new Array(S),d=new Array(S),I=new Array(S),K=new Array(S),Q=new Array(S),Z=w.words;Z.length=S,this.convert13b(h.words,h.length,k,S),this.convert13b(g.words,g.length,I,S),this.transform(k,T,P,d,S,N),this.transform(I,T,K,Q,S,N);for(var te=0;te<S;te++){var ne=P[te]*K[te]-d[te]*Q[te];d[te]=P[te]*Q[te]+d[te]*K[te],P[te]=ne}return this.conjugate(P,d,S),this.transform(P,d,Z,T,S,N),this.conjugate(Z,T,S),this.normalize13b(Z,S),w.negative=h.negative^g.negative,w.length=h.length+g.length,w.strip()},o.prototype.mul=function(h){var g=new o(null);return g.words=new Array(this.length+h.length),this.mulTo(h,g)},o.prototype.mulf=function(h){var g=new o(null);return g.words=new Array(this.length+h.length),D(this,h,g)},o.prototype.imul=function(h){return this.clone().mulTo(h,this)},o.prototype.imuln=function(h){n(typeof h=="number"),n(h<67108864);for(var g=0,w=0;w<this.length;w++){var S=(this.words[w]|0)*h,N=(S&67108863)+(g&67108863);g>>=26,g+=S/67108864|0,g+=N>>>26,this.words[w]=N&67108863}return g!==0&&(this.words[w]=g,this.length++),this},o.prototype.muln=function(h){return this.clone().imuln(h)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(h){var g=b(h);if(g.length===0)return new o(1);for(var w=this,S=0;S<g.length&&g[S]===0;S++,w=w.sqr());if(++S<g.length)for(var N=w.sqr();S<g.length;S++,N=N.sqr())g[S]!==0&&(w=w.mul(N));return w},o.prototype.iushln=function(h){n(typeof h=="number"&&h>=0);var g=h%26,w=(h-g)/26,S=67108863>>>26-g<<26-g,N;if(g!==0){var T=0;for(N=0;N<this.length;N++){var k=this.words[N]&S,P=(this.words[N]|0)-k<<g;this.words[N]=P|T,T=k>>>26-g}T&&(this.words[N]=T,this.length++)}if(w!==0){for(N=this.length-1;N>=0;N--)this.words[N+w]=this.words[N];for(N=0;N<w;N++)this.words[N]=0;this.length+=w}return this.strip()},o.prototype.ishln=function(h){return n(this.negative===0),this.iushln(h)},o.prototype.iushrn=function(h,g,w){n(typeof h=="number"&&h>=0);var S;g?S=(g-g%26)/26:S=0;var N=h%26,T=Math.min((h-N)/26,this.length),k=67108863^67108863>>>N<<N,P=w;if(S-=T,S=Math.max(0,S),P){for(var d=0;d<T;d++)P.words[d]=this.words[d];P.length=T}if(T!==0)if(this.length>T)for(this.length-=T,d=0;d<this.length;d++)this.words[d]=this.words[d+T];else this.words[0]=0,this.length=1;var I=0;for(d=this.length-1;d>=0&&(I!==0||d>=S);d--){var K=this.words[d]|0;this.words[d]=I<<26-N|K>>>N,I=K&k}return P&&I!==0&&(P.words[P.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(h,g,w){return n(this.negative===0),this.iushrn(h,g,w)},o.prototype.shln=function(h){return this.clone().ishln(h)},o.prototype.ushln=function(h){return this.clone().iushln(h)},o.prototype.shrn=function(h){return this.clone().ishrn(h)},o.prototype.ushrn=function(h){return this.clone().iushrn(h)},o.prototype.testn=function(h){n(typeof h=="number"&&h>=0);var g=h%26,w=(h-g)/26,S=1<<g;if(this.length<=w)return!1;var N=this.words[w];return!!(N&S)},o.prototype.imaskn=function(h){n(typeof h=="number"&&h>=0);var g=h%26,w=(h-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(g!==0&&w++,this.length=Math.min(w,this.length),g!==0){var S=67108863^67108863>>>g<<g;this.words[this.length-1]&=S}return this.strip()},o.prototype.maskn=function(h){return this.clone().imaskn(h)},o.prototype.iaddn=function(h){return n(typeof h=="number"),n(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},o.prototype._iaddn=function(h){this.words[0]+=h;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},o.prototype.isubn=function(h){if(n(typeof h=="number"),n(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},o.prototype.addn=function(h){return this.clone().iaddn(h)},o.prototype.subn=function(h){return this.clone().isubn(h)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(h,g,w){var S=h.length+w,N;this._expand(S);var T,k=0;for(N=0;N<h.length;N++){T=(this.words[N+w]|0)+k;var P=(h.words[N]|0)*g;T-=P&67108863,k=(T>>26)-(P/67108864|0),this.words[N+w]=T&67108863}for(;N<this.length-w;N++)T=(this.words[N+w]|0)+k,k=T>>26,this.words[N+w]=T&67108863;if(k===0)return this.strip();for(n(k===-1),k=0,N=0;N<this.length;N++)T=-(this.words[N]|0)+k,k=T>>26,this.words[N]=T&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(h,g){var w=this.length-h.length,S=this.clone(),N=h,T=N.words[N.length-1]|0,k=this._countBits(T);w=26-k,w!==0&&(N=N.ushln(w),S.iushln(w),T=N.words[N.length-1]|0);var P=S.length-N.length,d;if(g!=="mod"){d=new o(null),d.length=P+1,d.words=new Array(d.length);for(var I=0;I<d.length;I++)d.words[I]=0}var K=S.clone()._ishlnsubmul(N,1,P);K.negative===0&&(S=K,d&&(d.words[P]=1));for(var Q=P-1;Q>=0;Q--){var Z=(S.words[N.length+Q]|0)*67108864+(S.words[N.length+Q-1]|0);for(Z=Math.min(Z/T|0,67108863),S._ishlnsubmul(N,Z,Q);S.negative!==0;)Z--,S.negative=0,S._ishlnsubmul(N,1,Q),S.isZero()||(S.negative^=1);d&&(d.words[Q]=Z)}return d&&d.strip(),S.strip(),g!=="div"&&w!==0&&S.iushrn(w),{div:d||null,mod:S}},o.prototype.divmod=function(h,g,w){if(n(!h.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var S,N,T;return this.negative!==0&&h.negative===0?(T=this.neg().divmod(h,g),g!=="mod"&&(S=T.div.neg()),g!=="div"&&(N=T.mod.neg(),w&&N.negative!==0&&N.iadd(h)),{div:S,mod:N}):this.negative===0&&h.negative!==0?(T=this.divmod(h.neg(),g),g!=="mod"&&(S=T.div.neg()),{div:S,mod:T.mod}):this.negative&h.negative?(T=this.neg().divmod(h.neg(),g),g!=="div"&&(N=T.mod.neg(),w&&N.negative!==0&&N.isub(h)),{div:T.div,mod:N}):h.length>this.length||this.cmp(h)<0?{div:new o(0),mod:this}:h.length===1?g==="div"?{div:this.divn(h.words[0]),mod:null}:g==="mod"?{div:null,mod:new o(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new o(this.modn(h.words[0]))}:this._wordDiv(h,g)},o.prototype.div=function(h){return this.divmod(h,"div",!1).div},o.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},o.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},o.prototype.divRound=function(h){var g=this.divmod(h);if(g.mod.isZero())return g.div;var w=g.div.negative!==0?g.mod.isub(h):g.mod,S=h.ushrn(1),N=h.andln(1),T=w.cmp(S);return T<0||N===1&&T===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},o.prototype.modn=function(h){n(h<=67108863);for(var g=(1<<26)%h,w=0,S=this.length-1;S>=0;S--)w=(g*w+(this.words[S]|0))%h;return w},o.prototype.idivn=function(h){n(h<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var S=(this.words[w]|0)+g*67108864;this.words[w]=S/h|0,g=S%h}return this.strip()},o.prototype.divn=function(h){return this.clone().idivn(h)},o.prototype.egcd=function(h){n(h.negative===0),n(!h.isZero());var g=this,w=h.clone();g.negative!==0?g=g.umod(h):g=g.clone();for(var S=new o(1),N=new o(0),T=new o(0),k=new o(1),P=0;g.isEven()&&w.isEven();)g.iushrn(1),w.iushrn(1),++P;for(var d=w.clone(),I=g.clone();!g.isZero();){for(var K=0,Q=1;!(g.words[0]&Q)&&K<26;++K,Q<<=1);if(K>0)for(g.iushrn(K);K-- >0;)(S.isOdd()||N.isOdd())&&(S.iadd(d),N.isub(I)),S.iushrn(1),N.iushrn(1);for(var Z=0,te=1;!(w.words[0]&te)&&Z<26;++Z,te<<=1);if(Z>0)for(w.iushrn(Z);Z-- >0;)(T.isOdd()||k.isOdd())&&(T.iadd(d),k.isub(I)),T.iushrn(1),k.iushrn(1);g.cmp(w)>=0?(g.isub(w),S.isub(T),N.isub(k)):(w.isub(g),T.isub(S),k.isub(N))}return{a:T,b:k,gcd:w.iushln(P)}},o.prototype._invmp=function(h){n(h.negative===0),n(!h.isZero());var g=this,w=h.clone();g.negative!==0?g=g.umod(h):g=g.clone();for(var S=new o(1),N=new o(0),T=w.clone();g.cmpn(1)>0&&w.cmpn(1)>0;){for(var k=0,P=1;!(g.words[0]&P)&&k<26;++k,P<<=1);if(k>0)for(g.iushrn(k);k-- >0;)S.isOdd()&&S.iadd(T),S.iushrn(1);for(var d=0,I=1;!(w.words[0]&I)&&d<26;++d,I<<=1);if(d>0)for(w.iushrn(d);d-- >0;)N.isOdd()&&N.iadd(T),N.iushrn(1);g.cmp(w)>=0?(g.isub(w),S.isub(N)):(w.isub(g),N.isub(S))}var K;return g.cmpn(1)===0?K=S:K=N,K.cmpn(0)<0&&K.iadd(h),K},o.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var g=this.clone(),w=h.clone();g.negative=0,w.negative=0;for(var S=0;g.isEven()&&w.isEven();S++)g.iushrn(1),w.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;w.isEven();)w.iushrn(1);var N=g.cmp(w);if(N<0){var T=g;g=w,w=T}else if(N===0||w.cmpn(1)===0)break;g.isub(w)}while(!0);return w.iushln(S)},o.prototype.invm=function(h){return this.egcd(h).a.umod(h)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(h){return this.words[0]&h},o.prototype.bincn=function(h){n(typeof h=="number");var g=h%26,w=(h-g)/26,S=1<<g;if(this.length<=w)return this._expand(w+1),this.words[w]|=S,this;for(var N=S,T=w;N!==0&&T<this.length;T++){var k=this.words[T]|0;k+=N,N=k>>>26,k&=67108863,this.words[T]=k}return N!==0&&(this.words[T]=N,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(h){var g=h<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var w;if(this.length>1)w=1;else{g&&(h=-h),n(h<=67108863,"Number is too big");var S=this.words[0]|0;w=S===h?0:S<h?-1:1}return this.negative!==0?-w|0:w},o.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var g=this.ucmp(h);return this.negative!==0?-g|0:g},o.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var g=0,w=this.length-1;w>=0;w--){var S=this.words[w]|0,N=h.words[w]|0;if(S!==N){S<N?g=-1:S>N&&(g=1);break}}return g},o.prototype.gtn=function(h){return this.cmpn(h)===1},o.prototype.gt=function(h){return this.cmp(h)===1},o.prototype.gten=function(h){return this.cmpn(h)>=0},o.prototype.gte=function(h){return this.cmp(h)>=0},o.prototype.ltn=function(h){return this.cmpn(h)===-1},o.prototype.lt=function(h){return this.cmp(h)===-1},o.prototype.lten=function(h){return this.cmpn(h)<=0},o.prototype.lte=function(h){return this.cmp(h)<=0},o.prototype.eqn=function(h){return this.cmpn(h)===0},o.prototype.eq=function(h){return this.cmp(h)===0},o.red=function(h){return new U(h)},o.prototype.toRed=function(h){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(h){return this.red=h,this},o.prototype.forceRed=function(h){return n(!this.red,"Already a number in reduction context"),this._forceRed(h)},o.prototype.redAdd=function(h){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},o.prototype.redIAdd=function(h){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},o.prototype.redSub=function(h){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},o.prototype.redISub=function(h){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},o.prototype.redShl=function(h){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},o.prototype.redMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},o.prototype.redIMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(h){return n(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var x={k256:null,p224:null,p192:null,p25519:null};function M(C,h){this.name=C,this.p=new o(h,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}M.prototype._tmp=function(){var h=new o(null);return h.words=new Array(Math.ceil(this.n/13)),h},M.prototype.ireduce=function(h){var g=h,w;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),w=g.bitLength();while(w>this.n);var S=w<this.n?-1:g.ucmp(this.p);return S===0?(g.words[0]=0,g.length=1):S>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},M.prototype.split=function(h,g){h.iushrn(this.n,0,g)},M.prototype.imulK=function(h){return h.imul(this.k)};function O(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,M),O.prototype.split=function(h,g){for(var w=4194303,S=Math.min(h.length,9),N=0;N<S;N++)g.words[N]=h.words[N];if(g.length=S,h.length<=9){h.words[0]=0,h.length=1;return}var T=h.words[9];for(g.words[g.length++]=T&w,N=10;N<h.length;N++){var k=h.words[N]|0;h.words[N-10]=(k&w)<<4|T>>>22,T=k}T>>>=22,h.words[N-10]=T,T===0&&h.length>10?h.length-=10:h.length-=9},O.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var g=0,w=0;w<h.length;w++){var S=h.words[w]|0;g+=S*977,h.words[w]=g&67108863,g=S*64+(g/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function B(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(B,M);function F(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(F,M);function z(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,M),z.prototype.imulK=function(h){for(var g=0,w=0;w<h.length;w++){var S=(h.words[w]|0)*19+g,N=S&67108863;S>>>=26,h.words[w]=N,g=S}return g!==0&&(h.words[h.length++]=g),h},o._prime=function(h){if(x[h])return x[h];var g;if(h==="k256")g=new O;else if(h==="p224")g=new B;else if(h==="p192")g=new F;else if(h==="p25519")g=new z;else throw new Error("Unknown prime "+h);return x[h]=g,g};function U(C){if(typeof C=="string"){var h=o._prime(C);this.m=h.p,this.prime=h}else n(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}U.prototype._verify1=function(h){n(h.negative===0,"red works only with positives"),n(h.red,"red works only with red numbers")},U.prototype._verify2=function(h,g){n((h.negative|g.negative)===0,"red works only with positives"),n(h.red&&h.red===g.red,"red works only with red numbers")},U.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},U.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},U.prototype.add=function(h,g){this._verify2(h,g);var w=h.add(g);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},U.prototype.iadd=function(h,g){this._verify2(h,g);var w=h.iadd(g);return w.cmp(this.m)>=0&&w.isub(this.m),w},U.prototype.sub=function(h,g){this._verify2(h,g);var w=h.sub(g);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},U.prototype.isub=function(h,g){this._verify2(h,g);var w=h.isub(g);return w.cmpn(0)<0&&w.iadd(this.m),w},U.prototype.shl=function(h,g){return this._verify1(h),this.imod(h.ushln(g))},U.prototype.imul=function(h,g){return this._verify2(h,g),this.imod(h.imul(g))},U.prototype.mul=function(h,g){return this._verify2(h,g),this.imod(h.mul(g))},U.prototype.isqr=function(h){return this.imul(h,h.clone())},U.prototype.sqr=function(h){return this.mul(h,h)},U.prototype.sqrt=function(h){if(h.isZero())return h.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var w=this.m.add(new o(1)).iushrn(2);return this.pow(h,w)}for(var S=this.m.subn(1),N=0;!S.isZero()&&S.andln(1)===0;)N++,S.iushrn(1);n(!S.isZero());var T=new o(1).toRed(this),k=T.redNeg(),P=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new o(2*d*d).toRed(this);this.pow(d,P).cmp(k)!==0;)d.redIAdd(k);for(var I=this.pow(d,S),K=this.pow(h,S.addn(1).iushrn(1)),Q=this.pow(h,S),Z=N;Q.cmp(T)!==0;){for(var te=Q,ne=0;te.cmp(T)!==0;ne++)te=te.redSqr();n(ne<Z);var le=this.pow(I,new o(1).iushln(Z-ne-1));K=K.redMul(le),I=le.redSqr(),Q=Q.redMul(I),Z=ne}return K},U.prototype.invm=function(h){var g=h._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},U.prototype.pow=function(h,g){if(g.isZero())return new o(1).toRed(this);if(g.cmpn(1)===0)return h.clone();var w=4,S=new Array(1<<w);S[0]=new o(1).toRed(this),S[1]=h;for(var N=2;N<S.length;N++)S[N]=this.mul(S[N-1],h);var T=S[0],k=0,P=0,d=g.bitLength()%26;for(d===0&&(d=26),N=g.length-1;N>=0;N--){for(var I=g.words[N],K=d-1;K>=0;K--){var Q=I>>K&1;if(T!==S[0]&&(T=this.sqr(T)),Q===0&&k===0){P=0;continue}k<<=1,k|=Q,P++,!(P!==w&&(N!==0||K!==0))&&(T=this.mul(T,S[k]),P=0,k=0)}d=26}return T},U.prototype.convertTo=function(h){var g=h.umod(this.m);return g===h?g.clone():g},U.prototype.convertFrom=function(h){var g=h.clone();return g.red=null,g},o.mont=function(h){return new W(h)};function W(C){U.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(W,U),W.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},W.prototype.convertFrom=function(h){var g=this.imod(h.mul(this.rinv));return g.red=null,g},W.prototype.imul=function(h,g){if(h.isZero()||g.isZero())return h.words[0]=0,h.length=1,h;var w=h.imul(g),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=w.isub(S).iushrn(this.shift),T=N;return N.cmp(this.m)>=0?T=N.isub(this.m):N.cmpn(0)<0&&(T=N.iadd(this.m)),T._forceRed(this)},W.prototype.mul=function(h,g){if(h.isZero()||g.isZero())return new o(0)._forceRed(this);var w=h.mul(g),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=w.isub(S).iushrn(this.shift),T=N;return N.cmp(this.m)>=0?T=N.isub(this.m):N.cmpn(0)<0&&(T=N.iadd(this.m)),T._forceRed(this)},W.prototype.invm=function(h){var g=this.imod(h._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(r,uo)})(e1);var a0={},Eh={},_n={},hp={get exports(){return _n},set exports(r){_n=r}};typeof Object.create=="function"?hp.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:hp.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Sh={},Wc={};Wc.byteLength=n1;Wc.toByteArray=o1;Wc.fromByteArray=u1;var Ni=[],An=[],t1=typeof Uint8Array<"u"?Uint8Array:Array,Yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ta=0,r1=Yf.length;Ta<r1;++Ta)Ni[Ta]=Yf[Ta],An[Yf.charCodeAt(Ta)]=Ta;An["-".charCodeAt(0)]=62;An["_".charCodeAt(0)]=63;function s0(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function n1(r){var e=s0(r),t=e[0],n=e[1];return(t+n)*3/4-n}function i1(r,e,t){return(e+t)*3/4-t}function o1(r){var e,t=s0(r),n=t[0],i=t[1],o=new t1(i1(r,n,i)),a=0,s=i>0?n-4:n,u;for(u=0;u<s;u+=4)e=An[r.charCodeAt(u)]<<18|An[r.charCodeAt(u+1)]<<12|An[r.charCodeAt(u+2)]<<6|An[r.charCodeAt(u+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=An[r.charCodeAt(u)]<<2|An[r.charCodeAt(u+1)]>>4,o[a++]=e&255),i===1&&(e=An[r.charCodeAt(u)]<<10|An[r.charCodeAt(u+1)]<<4|An[r.charCodeAt(u+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function a1(r){return Ni[r>>18&63]+Ni[r>>12&63]+Ni[r>>6&63]+Ni[r&63]}function s1(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(a1(n));return i.join("")}function u1(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,s=t-n;a<s;a+=o)i.push(s1(r,a,a+o>s?s:a+o));return n===1?(e=r[t-1],i.push(Ni[e>>2]+Ni[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Ni[e>>10]+Ni[e>>4&63]+Ni[e<<2&63]+"=")),i.join("")}var Ch={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ch.read=function(r,e,t,n,i){var o,a,s=i*8-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=t?i-1:0,p=t?-1:1,b=r[e+l];for(l+=p,o=b&(1<<-f)-1,b>>=-f,f+=s;f>0;o=o*256+r[e+l],l+=p,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=a*256+r[e+l],l+=p,f-=8);if(o===0)o=1-c;else{if(o===u)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-c}return(b?-1:1)*a*Math.pow(2,o-n)};Ch.write=function(r,e,t,n,i,o){var a,s,u,c=o*8-i-1,f=(1<<c)-1,l=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,_=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+l>=1?e+=p/u:e+=p*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a=a+l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;r[t+b]=s&255,b+=_,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;r[t+b]=a&255,b+=_,a/=256,c-=8);r[t+b-_]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){var e=Wc,t=Ch,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=m,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var A=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(A,v),A.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(A){if(A>i)throw new RangeError('The value "'+A+'" is invalid for option "size"');var v=new Uint8Array(A);return Object.setPrototypeOf(v,s.prototype),v}function s(A,v,y){if(typeof A=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(A)}return u(A,v,y)}s.poolSize=8192;function u(A,v,y){if(typeof A=="string")return p(A,v);if(ArrayBuffer.isView(A))return _(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(ge(A,ArrayBuffer)||A&&ge(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(A,SharedArrayBuffer)||A&&ge(A.buffer,SharedArrayBuffer)))return E(A,v,y);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var L=A.valueOf&&A.valueOf();if(L!=null&&L!==A)return s.from(L,v,y);var G=R(A);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return s.from(A[Symbol.toPrimitive]("string"),v,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}s.from=function(A,v,y){return u(A,v,y)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function f(A,v,y){return c(A),A<=0?a(A):v!==void 0?typeof y=="string"?a(A).fill(v,y):a(A).fill(v):a(A)}s.alloc=function(A,v,y){return f(A,v,y)};function l(A){return c(A),a(A<0?0:D(A)|0)}s.allocUnsafe=function(A){return l(A)},s.allocUnsafeSlow=function(A){return l(A)};function p(A,v){if((typeof v!="string"||v==="")&&(v="utf8"),!s.isEncoding(v))throw new TypeError("Unknown encoding: "+v);var y=x(A,v)|0,L=a(y),G=L.write(A,v);return G!==y&&(L=L.slice(0,G)),L}function b(A){for(var v=A.length<0?0:D(A.length)|0,y=a(v),L=0;L<v;L+=1)y[L]=A[L]&255;return y}function _(A){if(ge(A,Uint8Array)){var v=new Uint8Array(A);return E(v.buffer,v.byteOffset,v.byteLength)}return b(A)}function E(A,v,y){if(v<0||A.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<v+(y||0))throw new RangeError('"length" is outside of buffer bounds');var L;return v===void 0&&y===void 0?L=new Uint8Array(A):y===void 0?L=new Uint8Array(A,v):L=new Uint8Array(A,v,y),Object.setPrototypeOf(L,s.prototype),L}function R(A){if(s.isBuffer(A)){var v=D(A.length)|0,y=a(v);return y.length===0||A.copy(y,0,0,v),y}if(A.length!==void 0)return typeof A.length!="number"||nr(A.length)?a(0):b(A);if(A.type==="Buffer"&&Array.isArray(A.data))return b(A.data)}function D(A){if(A>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return A|0}function m(A){return+A!=A&&(A=0),s.alloc(+A)}s.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==s.prototype},s.compare=function(v,y){if(ge(v,Uint8Array)&&(v=s.from(v,v.offset,v.byteLength)),ge(y,Uint8Array)&&(y=s.from(y,y.offset,y.byteLength)),!s.isBuffer(v)||!s.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===y)return 0;for(var L=v.length,G=y.length,J=0,Y=Math.min(L,G);J<Y;++J)if(v[J]!==y[J]){L=v[J],G=y[J];break}return L<G?-1:G<L?1:0},s.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(v,y){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return s.alloc(0);var L;if(y===void 0)for(y=0,L=0;L<v.length;++L)y+=v[L].length;var G=s.allocUnsafe(y),J=0;for(L=0;L<v.length;++L){var Y=v[L];if(ge(Y,Uint8Array))J+Y.length>G.length?s.from(Y).copy(G,J):Uint8Array.prototype.set.call(G,Y,J);else if(s.isBuffer(Y))Y.copy(G,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=Y.length}return G};function x(A,v){if(s.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||ge(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);var y=A.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&y===0)return 0;for(var G=!1;;)switch(v){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return je(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return rr(A).length;default:if(G)return L?-1:je(A).length;v=(""+v).toLowerCase(),G=!0}}s.byteLength=x;function M(A,v,y){var L=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,v>>>=0,y<=v))return"";for(A||(A="utf8");;)switch(A){case"hex":return P(this,v,y);case"utf8":case"utf-8":return w(this,v,y);case"ascii":return T(this,v,y);case"latin1":case"binary":return k(this,v,y);case"base64":return g(this,v,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,v,y);default:if(L)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),L=!0}}s.prototype._isBuffer=!0;function O(A,v,y){var L=A[v];A[v]=A[y],A[y]=L}s.prototype.swap16=function(){var v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<v;y+=2)O(this,y,y+1);return this},s.prototype.swap32=function(){var v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<v;y+=4)O(this,y,y+3),O(this,y+1,y+2);return this},s.prototype.swap64=function(){var v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<v;y+=8)O(this,y,y+7),O(this,y+1,y+6),O(this,y+2,y+5),O(this,y+3,y+4);return this},s.prototype.toString=function(){var v=this.length;return v===0?"":arguments.length===0?w(this,0,v):M.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(v){if(!s.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:s.compare(this,v)===0},s.prototype.inspect=function(){var v="",y=r.INSPECT_MAX_BYTES;return v=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(v+=" ... "),"<Buffer "+v+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(v,y,L,G,J){if(ge(v,Uint8Array)&&(v=s.from(v,v.offset,v.byteLength)),!s.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(y===void 0&&(y=0),L===void 0&&(L=v?v.length:0),G===void 0&&(G=0),J===void 0&&(J=this.length),y<0||L>v.length||G<0||J>this.length)throw new RangeError("out of range index");if(G>=J&&y>=L)return 0;if(G>=J)return-1;if(y>=L)return 1;if(y>>>=0,L>>>=0,G>>>=0,J>>>=0,this===v)return 0;for(var Y=J-G,Se=L-y,ce=Math.min(Y,Se),de=this.slice(G,J),ot=v.slice(y,L),ye=0;ye<ce;++ye)if(de[ye]!==ot[ye]){Y=de[ye],Se=ot[ye];break}return Y<Se?-1:Se<Y?1:0};function B(A,v,y,L,G){if(A.length===0)return-1;if(typeof y=="string"?(L=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,nr(y)&&(y=G?0:A.length-1),y<0&&(y=A.length+y),y>=A.length){if(G)return-1;y=A.length-1}else if(y<0)if(G)y=0;else return-1;if(typeof v=="string"&&(v=s.from(v,L)),s.isBuffer(v))return v.length===0?-1:F(A,v,y,L,G);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(A,v,y):Uint8Array.prototype.lastIndexOf.call(A,v,y):F(A,[v],y,L,G);throw new TypeError("val must be string, number or Buffer")}function F(A,v,y,L,G){var J=1,Y=A.length,Se=v.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(A.length<2||v.length<2)return-1;J=2,Y/=2,Se/=2,y/=2}function ce(Ns,at){return J===1?Ns[at]:Ns.readUInt16BE(at*J)}var de;if(G){var ot=-1;for(de=y;de<Y;de++)if(ce(A,de)===ce(v,ot===-1?0:de-ot)){if(ot===-1&&(ot=de),de-ot+1===Se)return ot*J}else ot!==-1&&(de-=de-ot),ot=-1}else for(y+Se>Y&&(y=Y-Se),de=y;de>=0;de--){for(var ye=!0,$e=0;$e<Se;$e++)if(ce(A,de+$e)!==ce(v,$e)){ye=!1;break}if(ye)return de}return-1}s.prototype.includes=function(v,y,L){return this.indexOf(v,y,L)!==-1},s.prototype.indexOf=function(v,y,L){return B(this,v,y,L,!0)},s.prototype.lastIndexOf=function(v,y,L){return B(this,v,y,L,!1)};function z(A,v,y,L){y=Number(y)||0;var G=A.length-y;L?(L=Number(L),L>G&&(L=G)):L=G;var J=v.length;L>J/2&&(L=J/2);for(var Y=0;Y<L;++Y){var Se=parseInt(v.substr(Y*2,2),16);if(nr(Se))return Y;A[y+Y]=Se}return Y}function U(A,v,y,L){return Re(je(v,A.length-y),A,y,L)}function W(A,v,y,L){return Re(pe(v),A,y,L)}function C(A,v,y,L){return Re(rr(v),A,y,L)}function h(A,v,y,L){return Re(xe(v,A.length-y),A,y,L)}s.prototype.write=function(v,y,L,G){if(y===void 0)G="utf8",L=this.length,y=0;else if(L===void 0&&typeof y=="string")G=y,L=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(L)?(L=L>>>0,G===void 0&&(G="utf8")):(G=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-y;if((L===void 0||L>J)&&(L=J),v.length>0&&(L<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var Y=!1;;)switch(G){case"hex":return z(this,v,y,L);case"utf8":case"utf-8":return U(this,v,y,L);case"ascii":case"latin1":case"binary":return W(this,v,y,L);case"base64":return C(this,v,y,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h(this,v,y,L);default:if(Y)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),Y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(A,v,y){return v===0&&y===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(v,y))}function w(A,v,y){y=Math.min(A.length,y);for(var L=[],G=v;G<y;){var J=A[G],Y=null,Se=J>239?4:J>223?3:J>191?2:1;if(G+Se<=y){var ce,de,ot,ye;switch(Se){case 1:J<128&&(Y=J);break;case 2:ce=A[G+1],(ce&192)===128&&(ye=(J&31)<<6|ce&63,ye>127&&(Y=ye));break;case 3:ce=A[G+1],de=A[G+2],(ce&192)===128&&(de&192)===128&&(ye=(J&15)<<12|(ce&63)<<6|de&63,ye>2047&&(ye<55296||ye>57343)&&(Y=ye));break;case 4:ce=A[G+1],de=A[G+2],ot=A[G+3],(ce&192)===128&&(de&192)===128&&(ot&192)===128&&(ye=(J&15)<<18|(ce&63)<<12|(de&63)<<6|ot&63,ye>65535&&ye<1114112&&(Y=ye))}}Y===null?(Y=65533,Se=1):Y>65535&&(Y-=65536,L.push(Y>>>10&1023|55296),Y=56320|Y&1023),L.push(Y),G+=Se}return N(L)}var S=4096;function N(A){var v=A.length;if(v<=S)return String.fromCharCode.apply(String,A);for(var y="",L=0;L<v;)y+=String.fromCharCode.apply(String,A.slice(L,L+=S));return y}function T(A,v,y){var L="";y=Math.min(A.length,y);for(var G=v;G<y;++G)L+=String.fromCharCode(A[G]&127);return L}function k(A,v,y){var L="";y=Math.min(A.length,y);for(var G=v;G<y;++G)L+=String.fromCharCode(A[G]);return L}function P(A,v,y){var L=A.length;(!v||v<0)&&(v=0),(!y||y<0||y>L)&&(y=L);for(var G="",J=v;J<y;++J)G+=Te[A[J]];return G}function d(A,v,y){for(var L=A.slice(v,y),G="",J=0;J<L.length-1;J+=2)G+=String.fromCharCode(L[J]+L[J+1]*256);return G}s.prototype.slice=function(v,y){var L=this.length;v=~~v,y=y===void 0?L:~~y,v<0?(v+=L,v<0&&(v=0)):v>L&&(v=L),y<0?(y+=L,y<0&&(y=0)):y>L&&(y=L),y<v&&(y=v);var G=this.subarray(v,y);return Object.setPrototypeOf(G,s.prototype),G};function I(A,v,y){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+v>y)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(v,y,L){v=v>>>0,y=y>>>0,L||I(v,y,this.length);for(var G=this[v],J=1,Y=0;++Y<y&&(J*=256);)G+=this[v+Y]*J;return G},s.prototype.readUintBE=s.prototype.readUIntBE=function(v,y,L){v=v>>>0,y=y>>>0,L||I(v,y,this.length);for(var G=this[v+--y],J=1;y>0&&(J*=256);)G+=this[v+--y]*J;return G},s.prototype.readUint8=s.prototype.readUInt8=function(v,y){return v=v>>>0,y||I(v,1,this.length),this[v]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(v,y){return v=v>>>0,y||I(v,2,this.length),this[v]|this[v+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(v,y){return v=v>>>0,y||I(v,2,this.length),this[v]<<8|this[v+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(v,y){return v=v>>>0,y||I(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(v,y){return v=v>>>0,y||I(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},s.prototype.readIntLE=function(v,y,L){v=v>>>0,y=y>>>0,L||I(v,y,this.length);for(var G=this[v],J=1,Y=0;++Y<y&&(J*=256);)G+=this[v+Y]*J;return J*=128,G>=J&&(G-=Math.pow(2,8*y)),G},s.prototype.readIntBE=function(v,y,L){v=v>>>0,y=y>>>0,L||I(v,y,this.length);for(var G=y,J=1,Y=this[v+--G];G>0&&(J*=256);)Y+=this[v+--G]*J;return J*=128,Y>=J&&(Y-=Math.pow(2,8*y)),Y},s.prototype.readInt8=function(v,y){return v=v>>>0,y||I(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},s.prototype.readInt16LE=function(v,y){v=v>>>0,y||I(v,2,this.length);var L=this[v]|this[v+1]<<8;return L&32768?L|4294901760:L},s.prototype.readInt16BE=function(v,y){v=v>>>0,y||I(v,2,this.length);var L=this[v+1]|this[v]<<8;return L&32768?L|4294901760:L},s.prototype.readInt32LE=function(v,y){return v=v>>>0,y||I(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},s.prototype.readInt32BE=function(v,y){return v=v>>>0,y||I(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},s.prototype.readFloatLE=function(v,y){return v=v>>>0,y||I(v,4,this.length),t.read(this,v,!0,23,4)},s.prototype.readFloatBE=function(v,y){return v=v>>>0,y||I(v,4,this.length),t.read(this,v,!1,23,4)},s.prototype.readDoubleLE=function(v,y){return v=v>>>0,y||I(v,8,this.length),t.read(this,v,!0,52,8)},s.prototype.readDoubleBE=function(v,y){return v=v>>>0,y||I(v,8,this.length),t.read(this,v,!1,52,8)};function K(A,v,y,L,G,J){if(!s.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>G||v<J)throw new RangeError('"value" argument is out of bounds');if(y+L>A.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(v,y,L,G){if(v=+v,y=y>>>0,L=L>>>0,!G){var J=Math.pow(2,8*L)-1;K(this,v,y,L,J,0)}var Y=1,Se=0;for(this[y]=v&255;++Se<L&&(Y*=256);)this[y+Se]=v/Y&255;return y+L},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(v,y,L,G){if(v=+v,y=y>>>0,L=L>>>0,!G){var J=Math.pow(2,8*L)-1;K(this,v,y,L,J,0)}var Y=L-1,Se=1;for(this[y+Y]=v&255;--Y>=0&&(Se*=256);)this[y+Y]=v/Se&255;return y+L},s.prototype.writeUint8=s.prototype.writeUInt8=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,1,255,0),this[y]=v&255,y+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,2,65535,0),this[y]=v&255,this[y+1]=v>>>8,y+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,2,65535,0),this[y]=v>>>8,this[y+1]=v&255,y+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,4,4294967295,0),this[y+3]=v>>>24,this[y+2]=v>>>16,this[y+1]=v>>>8,this[y]=v&255,y+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,4,4294967295,0),this[y]=v>>>24,this[y+1]=v>>>16,this[y+2]=v>>>8,this[y+3]=v&255,y+4},s.prototype.writeIntLE=function(v,y,L,G){if(v=+v,y=y>>>0,!G){var J=Math.pow(2,8*L-1);K(this,v,y,L,J-1,-J)}var Y=0,Se=1,ce=0;for(this[y]=v&255;++Y<L&&(Se*=256);)v<0&&ce===0&&this[y+Y-1]!==0&&(ce=1),this[y+Y]=(v/Se>>0)-ce&255;return y+L},s.prototype.writeIntBE=function(v,y,L,G){if(v=+v,y=y>>>0,!G){var J=Math.pow(2,8*L-1);K(this,v,y,L,J-1,-J)}var Y=L-1,Se=1,ce=0;for(this[y+Y]=v&255;--Y>=0&&(Se*=256);)v<0&&ce===0&&this[y+Y+1]!==0&&(ce=1),this[y+Y]=(v/Se>>0)-ce&255;return y+L},s.prototype.writeInt8=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,1,127,-128),v<0&&(v=255+v+1),this[y]=v&255,y+1},s.prototype.writeInt16LE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,2,32767,-32768),this[y]=v&255,this[y+1]=v>>>8,y+2},s.prototype.writeInt16BE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,2,32767,-32768),this[y]=v>>>8,this[y+1]=v&255,y+2},s.prototype.writeInt32LE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,4,2147483647,-2147483648),this[y]=v&255,this[y+1]=v>>>8,this[y+2]=v>>>16,this[y+3]=v>>>24,y+4},s.prototype.writeInt32BE=function(v,y,L){return v=+v,y=y>>>0,L||K(this,v,y,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[y]=v>>>24,this[y+1]=v>>>16,this[y+2]=v>>>8,this[y+3]=v&255,y+4};function Q(A,v,y,L,G,J){if(y+L>A.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function Z(A,v,y,L,G){return v=+v,y=y>>>0,G||Q(A,v,y,4),t.write(A,v,y,L,23,4),y+4}s.prototype.writeFloatLE=function(v,y,L){return Z(this,v,y,!0,L)},s.prototype.writeFloatBE=function(v,y,L){return Z(this,v,y,!1,L)};function te(A,v,y,L,G){return v=+v,y=y>>>0,G||Q(A,v,y,8),t.write(A,v,y,L,52,8),y+8}s.prototype.writeDoubleLE=function(v,y,L){return te(this,v,y,!0,L)},s.prototype.writeDoubleBE=function(v,y,L){return te(this,v,y,!1,L)},s.prototype.copy=function(v,y,L,G){if(!s.isBuffer(v))throw new TypeError("argument should be a Buffer");if(L||(L=0),!G&&G!==0&&(G=this.length),y>=v.length&&(y=v.length),y||(y=0),G>0&&G<L&&(G=L),G===L||v.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),v.length-y<G-L&&(G=v.length-y+L);var J=G-L;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,L,G):Uint8Array.prototype.set.call(v,this.subarray(L,G),y),J},s.prototype.fill=function(v,y,L,G){if(typeof v=="string"){if(typeof y=="string"?(G=y,y=0,L=this.length):typeof L=="string"&&(G=L,L=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!s.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(v.length===1){var J=v.charCodeAt(0);(G==="utf8"&&J<128||G==="latin1")&&(v=J)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(y<0||this.length<y||this.length<L)throw new RangeError("Out of range index");if(L<=y)return this;y=y>>>0,L=L===void 0?this.length:L>>>0,v||(v=0);var Y;if(typeof v=="number")for(Y=y;Y<L;++Y)this[Y]=v;else{var Se=s.isBuffer(v)?v:s.from(v,G),ce=Se.length;if(ce===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(Y=0;Y<L-y;++Y)this[Y+y]=Se[Y%ce]}return this};var ne=/[^+/0-9A-Za-z-_]/g;function le(A){if(A=A.split("=")[0],A=A.trim().replace(ne,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function je(A,v){v=v||1/0;for(var y,L=A.length,G=null,J=[],Y=0;Y<L;++Y){if(y=A.charCodeAt(Y),y>55295&&y<57344){if(!G){if(y>56319){(v-=3)>-1&&J.push(239,191,189);continue}else if(Y+1===L){(v-=3)>-1&&J.push(239,191,189);continue}G=y;continue}if(y<56320){(v-=3)>-1&&J.push(239,191,189),G=y;continue}y=(G-55296<<10|y-56320)+65536}else G&&(v-=3)>-1&&J.push(239,191,189);if(G=null,y<128){if((v-=1)<0)break;J.push(y)}else if(y<2048){if((v-=2)<0)break;J.push(y>>6|192,y&63|128)}else if(y<65536){if((v-=3)<0)break;J.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((v-=4)<0)break;J.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return J}function pe(A){for(var v=[],y=0;y<A.length;++y)v.push(A.charCodeAt(y)&255);return v}function xe(A,v){for(var y,L,G,J=[],Y=0;Y<A.length&&!((v-=2)<0);++Y)y=A.charCodeAt(Y),L=y>>8,G=y%256,J.push(G),J.push(L);return J}function rr(A){return e.toByteArray(le(A))}function Re(A,v,y,L){for(var G=0;G<L&&!(G+y>=v.length||G>=A.length);++G)v[G+y]=A[G];return G}function ge(A,v){return A instanceof v||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===v.name}function nr(A){return A!==A}var Te=function(){for(var A="0123456789abcdef",v=new Array(256),y=0;y<16;++y)for(var L=y*16,G=0;G<16;++G)v[L+G]=A[y]+A[G];return v}()})(Sh);var Gu=Sh,ka=Gu.Buffer,Ln={},Rn;for(Rn in Gu)Gu.hasOwnProperty(Rn)&&(Rn==="SlowBuffer"||Rn==="Buffer"||(Ln[Rn]=Gu[Rn]));var Fa=Ln.Buffer={};for(Rn in ka)ka.hasOwnProperty(Rn)&&(Rn==="allocUnsafe"||Rn==="allocUnsafeSlow"||(Fa[Rn]=ka[Rn]));Ln.Buffer.prototype=ka.prototype;(!Fa.from||Fa.from===Uint8Array.from)&&(Fa.from=function(r,e,t){if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof r);if(r&&typeof r.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);return ka(r,e,t)});Fa.alloc||(Fa.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof r);if(r<0||r>=2*(1<<30))throw new RangeError('The value "'+r+'" is invalid for option "size"');var n=ka(r);return!e||e.length===0?n.fill(0):typeof t=="string"?n.fill(e,t):n.fill(e),n});if(!Ln.kStringMaxLength)try{Ln.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}Ln.constants||(Ln.constants={MAX_LENGTH:Ln.kMaxLength},Ln.kStringMaxLength&&(Ln.constants.MAX_STRING_LENGTH=Ln.kStringMaxLength));var Ih=Ln,Jc={};const c1=_n;function Qn(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}Jc.Reporter=Qn;Qn.prototype.isError=function(e){return e instanceof ss};Qn.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Qn.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};Qn.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Qn.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)};Qn.prototype.leaveKey=function(e,t,n){const i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[t]=n)};Qn.prototype.path=function(){return this._reporterState.path.join("/")};Qn.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t};Qn.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n};Qn.prototype.error=function(e){let t;const n=this._reporterState,i=e instanceof ss;if(i?t=e:t=new ss(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t};Qn.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function ss(r,e){this.path=r,this.rethrow(e)}c1(ss,Error);ss.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ss),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this};var Ea={};const f1=_n,Xc=Jc.Reporter,us=Ih.Buffer;function Jn(r,e){if(Xc.call(this,e),!us.isBuffer(r)){this.error("Input not Buffer");return}this.base=r,this.offset=0,this.length=r.length}f1(Jn,Xc);Ea.DecoderBuffer=Jn;Jn.isDecoderBuffer=function(e){return e instanceof Jn?!0:typeof e=="object"&&us.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};Jn.prototype.save=function(){return{offset:this.offset,reporter:Xc.prototype.save.call(this)}};Jn.prototype.restore=function(e){const t=new Jn(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Xc.prototype.restore.call(this,e.reporter),t};Jn.prototype.isEmpty=function(){return this.offset===this.length};Jn.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};Jn.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new Jn(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};Jn.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function cs(r,e){if(Array.isArray(r))this.length=0,this.value=r.map(function(t){return cs.isEncoderBuffer(t)||(t=new cs(t,e)),this.length+=t.length,t},this);else if(typeof r=="number"){if(!(0<=r&&r<=255))return e.error("non-byte EncoderBuffer value");this.value=r,this.length=1}else if(typeof r=="string")this.value=r,this.length=us.byteLength(r);else if(us.isBuffer(r))this.value=r,this.length=r.length;else return e.error("Unsupported type: "+typeof r)}Ea.EncoderBuffer=cs;cs.isEncoderBuffer=function(e){return e instanceof cs?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};cs.prototype.join=function(e,t){return e||(e=us.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):us.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e};var ea=u0;function u0(r,e){if(!r)throw new Error(e||"Assertion failed")}u0.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};const l1=Jc.Reporter,h1=Ea.EncoderBuffer,d1=Ea.DecoderBuffer,Kr=ea,c0=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],p1=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(c0),g1=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function He(r,e,t){const n={};this._baseState=n,n.name=t,n.enc=r,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var Ah=He;const m1=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];He.prototype.clone=function(){const e=this._baseState,t={};m1.forEach(function(i){t[i]=e[i]});const n=new this.constructor(t.parent);return n._baseState=t,n};He.prototype._wrap=function(){const e=this._baseState;p1.forEach(function(t){this[t]=function(){const i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}},this)};He.prototype._init=function(e){const t=this._baseState;Kr(t.parent===null),e.call(this),t.children=t.children.filter(function(n){return n._baseState.parent===this},this),Kr.equal(t.children.length,1,"Root node can have only one child")};He.prototype._useArgs=function(e){const t=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(Kr(t.children===null),t.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(Kr(t.args===null),t.args=e,t.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;const o={};return Object.keys(i).forEach(function(a){a==(a|0)&&(a|=0);const s=i[a];o[s]=a}),o}))};g1.forEach(function(r){He.prototype[r]=function(){const t=this._baseState;throw new Error(r+" not implemented for encoding: "+t.enc)}});c0.forEach(function(r){He.prototype[r]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return Kr(t.tag===null),t.tag=r,this._useArgs(n),this}});He.prototype.use=function(e){Kr(e);const t=this._baseState;return Kr(t.use===null),t.use=e,this};He.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};He.prototype.def=function(e){const t=this._baseState;return Kr(t.default===null),t.default=e,t.optional=!0,this};He.prototype.explicit=function(e){const t=this._baseState;return Kr(t.explicit===null&&t.implicit===null),t.explicit=e,this};He.prototype.implicit=function(e){const t=this._baseState;return Kr(t.explicit===null&&t.implicit===null),t.implicit=e,this};He.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};He.prototype.key=function(e){const t=this._baseState;return Kr(t.key===null),t.key=e,this};He.prototype.any=function(){const e=this._baseState;return e.any=!0,this};He.prototype.choice=function(e){const t=this._baseState;return Kr(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};He.prototype.contains=function(e){const t=this._baseState;return Kr(t.use===null),t.contains=e,this};He.prototype._decode=function(e,t){const n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,t));let i=n.default,o=!0,a=null;if(n.key!==null&&(a=e.enterKey(n.key)),n.optional){let u=null;if(n.explicit!==null?u=n.explicit:n.implicit!==null?u=n.implicit:n.tag!==null&&(u=n.tag),u===null&&!n.any){const c=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch{o=!1}e.restore(c)}else if(o=this._peekTag(e,u,n.any),e.isError(o))return o}let s;if(n.obj&&o&&(s=e.enterObject()),o){if(n.explicit!==null){const c=this._decodeTag(e,n.explicit);if(e.isError(c))return c;e=c}const u=e.offset;if(n.use===null&&n.choice===null){let c;n.any&&(c=e.save());const f=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(f))return f;n.any?i=e.raw(c):e=f}if(t&&t.track&&n.tag!==null&&t.track(e.path(),u,e.length,"tagged"),t&&t.track&&n.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,t):i=this._decodeChoice(e,t)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(f){f._decode(e,t)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){const c=new d1(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(c,t)}}return n.obj&&o&&(i=e.leaveObject(s)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(a,n.key,i):a!==null&&e.exitKey(a),i};He.prototype._decodeGeneric=function(e,t,n){const i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):e==="objid"&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(t,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(t,e,n):e==="null_"?this._decodeNull(t,n):e==="bool"?this._decodeBool(t,n):e==="objDesc"?this._decodeStr(t,e,n):e==="int"||e==="enum"?this._decodeInt(t,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)};He.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),Kr(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};He.prototype._decodeChoice=function(e,t){const n=this._baseState;let i=null,o=!1;return Object.keys(n.choice).some(function(a){const s=e.save(),u=n.choice[a];try{const c=u._decode(e,t);if(e.isError(c))return!1;i={type:a,value:c},o=!0}catch{return e.restore(s),!1}return!0},this),o?i:e.error("Choice not matched")};He.prototype._createEncoderBuffer=function(e){return new h1(e,this.reporter)};He.prototype._encode=function(e,t,n){const i=this._baseState;if(i.default!==null&&i.default===e)return;const o=this._encodeValue(e,t,n);if(o!==void 0&&!this._skipDefault(o,t,n))return o};He.prototype._encodeValue=function(e,t,n){const i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,t||new l1);let o=null;if(this.reporter=t,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let a=null,s=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)a=this._getUse(i.contains,n)._encode(e,t),s=!0;else if(i.children)a=i.children.map(function(u){if(u._baseState.tag==="null_")return u._encode(null,t,e);if(u._baseState.key===null)return t.error("Child should have a key");const c=t.enterKey(u._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");const f=u._encode(e[u._baseState.key],t,e);return t.leaveKey(c),f},this).filter(function(u){return u}),a=this._createEncoderBuffer(a);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(c){const f=this._baseState;return this._getUse(f.args[0],e)._encode(c,t)},u))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,t):(a=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&i.choice===null){const u=i.implicit!==null?i.implicit:i.tag,c=i.implicit===null?"universal":"context";u===null?i.use===null&&t.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(u,s,c,a))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};He.prototype._encodeChoice=function(e,t){const n=this._baseState,i=n.choice[e.type];return i||Kr(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)};He.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};He.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};He.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var Yc={};(function(r){function e(t){const n={};return Object.keys(t).forEach(function(i){(i|0)==i&&(i=i|0);const o=t[i];n[o]=i}),n}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=e(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=e(r.tag)})(Yc);const v1=_n,eo=Ih.Buffer,f0=Ah,jf=Yc;function l0(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new bi,this.tree._init(r.body)}var h0=l0;l0.prototype.encode=function(e,t){return this.tree._encode(e,t).join()};function bi(r){f0.call(this,"der",r)}v1(bi,f0);bi.prototype._encodeComposite=function(e,t,n,i){const o=y1(e,t,n,this.reporter);if(i.length<128){const u=eo.alloc(2);return u[0]=o,u[1]=i.length,this._createEncoderBuffer([u,i])}let a=1;for(let u=i.length;u>=256;u>>=8)a++;const s=eo.alloc(1+1+a);s[0]=o,s[1]=128|a;for(let u=1+a,c=i.length;c>0;u--,c>>=8)s[u]=c&255;return this._createEncoderBuffer([s,i])};bi.prototype._encodeStr=function(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){const n=eo.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};bi.prototype._encodeObjid=function(e,t,n){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let s=0;s<e.length;s++)e[s]|=0}else if(Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let s=0;s<e.length;s++){let u=e[s];for(i++;u>=128;u>>=7)i++}const o=eo.alloc(i);let a=o.length-1;for(let s=e.length-1;s>=0;s--){let u=e[s];for(o[a--]=u&127;(u>>=7)>0;)o[a--]=128|u&127}return this._createEncoderBuffer(o)};function Sn(r){return r<10?"0"+r:r}bi.prototype._encodeTime=function(e,t){let n;const i=new Date(e);return t==="gentime"?n=[Sn(i.getUTCFullYear()),Sn(i.getUTCMonth()+1),Sn(i.getUTCDate()),Sn(i.getUTCHours()),Sn(i.getUTCMinutes()),Sn(i.getUTCSeconds()),"Z"].join(""):t==="utctime"?n=[Sn(i.getUTCFullYear()%100),Sn(i.getUTCMonth()+1),Sn(i.getUTCDate()),Sn(i.getUTCHours()),Sn(i.getUTCMinutes()),Sn(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")};bi.prototype._encodeNull=function(){return this._createEncoderBuffer("")};bi.prototype._encodeInt=function(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!eo.isBuffer(e)){const o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=eo.from(o)}if(eo.isBuffer(e)){let o=e.length;e.length===0&&o++;const a=eo.alloc(o);return e.copy(a),e.length===0&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;const i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(eo.from(i))};bi.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};bi.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};bi.prototype._skipDefault=function(e,t,n){const i=this._baseState;let o;if(i.default===null)return!1;const a=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),a.length!==i.defaultBuffer.length)return!1;for(o=0;o<a.length;o++)if(a[o]!==i.defaultBuffer[o])return!1;return!0};function y1(r,e,t,n){let i;if(r==="seqof"?r="seq":r==="setof"&&(r="set"),jf.tagByName.hasOwnProperty(r))i=jf.tagByName[r];else if(typeof r=="number"&&(r|0)===r)i=r;else return n.error("Unknown tag: "+r);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=jf.tagClassByName[t||"universal"]<<6,i)}const _1=_n,Mh=h0;function Nh(r){Mh.call(this,r),this.enc="pem"}_1(Nh,Mh);var b1=Nh;Nh.prototype.encode=function(e,t){const i=Mh.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+t.label+"-----"];for(let a=0;a<i.length;a+=64)o.push(i.slice(a,a+64));return o.push("-----END "+t.label+"-----"),o.join(`
`)};(function(r){const e=r;e.der=h0,e.pem=b1})(Eh);var Ph={};const w1=_n,x1=yn,dp=Ea.DecoderBuffer,d0=Ah,pp=Yc;function p0(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new xn,this.tree._init(r.body)}var g0=p0;p0.prototype.decode=function(e,t){return dp.isDecoderBuffer(e)||(e=new dp(e,t)),this.tree._decode(e,t)};function xn(r){d0.call(this,"der",r)}w1(xn,d0);xn.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const i=e.save(),o=Lh(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)};xn.prototype._decodeTag=function(e,t,n){const i=Lh(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let o=m0(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+t+'"');const a=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(o=e.offset-a.offset,e.restore(a),e.skip(o,'Failed to match body of: "'+t+'"'))};xn.prototype._skipUntilEnd=function(e,t){for(;;){const n=Lh(e,t);if(e.isError(n))return n;const i=m0(e,n.primitive,t);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,t),e.isError(o))return o;if(n.tagStr==="end")break}};xn.prototype._decodeList=function(e,t,n,i){const o=[];for(;!e.isEmpty();){const a=this._peekTag(e,"end");if(e.isError(a))return a;const s=n.decode(e,"der",i);if(e.isError(s)&&a)break;o.push(s)}return o};xn.prototype._decodeStr=function(e,t){if(t==="bitstr"){const n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(t==="bmpstr"){const n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(t==="numstr"){const n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){const n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};xn.prototype._decodeObjid=function(e,t,n){let i;const o=[];let a=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),a<<=7,a|=s&127,s&128||(o.push(a),a=0);s&128&&o.push(a);const u=o[0]/40|0,c=o[0]%40;if(n?i=o:i=[u,c].concat(o.slice(1)),t){let f=t[i.join(" ")];f===void 0&&(f=t[i.join(".")]),f!==void 0&&(i=f)}return i};xn.prototype._decodeTime=function(e,t){const n=e.raw().toString();let i,o,a,s,u,c;if(t==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,a=n.slice(6,8)|0,s=n.slice(8,10)|0,u=n.slice(10,12)|0,c=n.slice(12,14)|0;else if(t==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,a=n.slice(4,6)|0,s=n.slice(6,8)|0,u=n.slice(8,10)|0,c=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(i,o-1,a,s,u,c,0)};xn.prototype._decodeNull=function(){return null};xn.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:t!==0};xn.prototype._decodeInt=function(e,t){const n=e.raw();let i=new x1(n);return t&&(i=t[i.toString(10)]||i),i};xn.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function Lh(r,e){let t=r.readUInt8(e);if(r.isError(t))return t;const n=pp.tagClass[t>>6],i=(t&32)===0;if((t&31)===31){let a=t;for(t=0;(a&128)===128;){if(a=r.readUInt8(e),r.isError(a))return a;t<<=7,t|=a&127}}else t&=31;const o=pp.tag[t];return{cls:n,primitive:i,tag:t,tagStr:o}}function m0(r,e,t){let n=r.readUInt8(t);if(r.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;const i=n&127;if(i>4)return r.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;const a=r.readUInt8(t);if(r.isError(a))return a;n|=a}return n}const E1=_n,S1=Ih.Buffer,Rh=g0;function Th(r){Rh.call(this,r),this.enc="pem"}E1(Th,Rh);var C1=Th;Th.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,s=-1;for(let f=0;f<n.length;f++){const l=n[f].match(o);if(l!==null&&l[2]===i)if(a===-1){if(l[1]!=="BEGIN")break;a=f}else{if(l[1]!=="END")break;s=f;break}}if(a===-1||s===-1)throw new Error("PEM section not found for: "+i);const u=n.slice(a+1,s).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const c=S1.from(u,"base64");return Rh.prototype.decode.call(this,c,t)};(function(r){const e=r;e.der=g0,e.pem=C1})(Ph);(function(r){const e=Eh,t=Ph,n=_n,i=r;i.define=function(s,u){return new o(s,u)};function o(a,s){this.name=a,this.body=s,this.decoders={},this.encoders={}}o.prototype._createNamed=function(s){const u=this.name;function c(f){this._initNamed(f,u)}return n(c,s),c.prototype._initNamed=function(l,p){s.call(this,l,p)},new c(this)},o.prototype._getDecoder=function(s){return s=s||"der",this.decoders.hasOwnProperty(s)||(this.decoders[s]=this._createNamed(t[s])),this.decoders[s]},o.prototype.decode=function(s,u,c){return this._getDecoder(u).decode(s,c)},o.prototype._getEncoder=function(s){return s=s||"der",this.encoders.hasOwnProperty(s)||(this.encoders[s]=this._createNamed(e[s])),this.encoders[s]},o.prototype.encode=function(s,u,c){return this._getEncoder(u).encode(s,c)}})(a0);var v0={};(function(r){const e=r;e.Reporter=Jc.Reporter,e.DecoderBuffer=Ea.DecoderBuffer,e.EncoderBuffer=Ea.EncoderBuffer,e.Node=Ah})(v0);var y0={};(function(r){const e=r;e._reverse=function(n){const i={};return Object.keys(n).forEach(function(o){(o|0)==o&&(o=o|0);const a=n[o];i[a]=o}),i},e.der=Yc})(y0);(function(r){const e=r;e.bignum=yn,e.define=a0.define,e.base=v0,e.constants=y0,e.decoders=Ph,e.encoders=Eh})(Qo);var du={},I1={get exports(){return du},set exports(r){du=r}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=Sh,n=t.Buffer;function i(a,s){for(var u in a)s[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=o);function o(a,s,u){return n(a,s,u)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,u)},o.alloc=function(a,s,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(I1,du);var _0={};const A1="elliptic",M1="6.5.4",N1="EC cryptography",P1="lib/elliptic.js",L1=["lib"],R1={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},T1={type:"git",url:"git@github.com:indutny/elliptic"},O1=["EC","Elliptic","curve","Cryptography"],D1="Fedor Indutny <fedor@indutny.com>",B1="MIT",k1={url:"https://github.com/indutny/elliptic/issues"},F1="https://github.com/indutny/elliptic",z1={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},U1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},q1={name:A1,version:M1,description:N1,main:P1,files:L1,scripts:R1,repository:T1,keywords:O1,author:D1,license:B1,bugs:k1,homepage:F1,devDependencies:z1,dependencies:U1};var En={},Oh={};(function(r){var e=r;function t(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var s=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)s[u]=o[u]|0;return s}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)s.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var c=o.charCodeAt(u),f=c>>8,l=c&255;f?s.push(f,l):s.push(l)}return s}e.toArray=t;function n(o){return o.length===1?"0"+o:o}e.zero2=n;function i(o){for(var a="",s=0;s<o.length;s++)a+=n(o[s].toString(16));return a}e.toHex=i,e.encode=function(a,s){return s==="hex"?i(a):a}})(Oh);(function(r){var e=r,t=yn,n=ea,i=Oh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function o(f,l,p){var b=new Array(Math.max(f.bitLength(),p)+1);b.fill(0);for(var _=1<<l+1,E=f.clone(),R=0;R<b.length;R++){var D,m=E.andln(_-1);E.isOdd()?(m>(_>>1)-1?D=(_>>1)-m:D=m,E.isubn(D)):D=0,b[R]=D,E.iushrn(1)}return b}e.getNAF=o;function a(f,l){var p=[[],[]];f=f.clone(),l=l.clone();for(var b=0,_=0,E;f.cmpn(-b)>0||l.cmpn(-_)>0;){var R=f.andln(3)+b&3,D=l.andln(3)+_&3;R===3&&(R=-1),D===3&&(D=-1);var m;R&1?(E=f.andln(7)+b&7,(E===3||E===5)&&D===2?m=-R:m=R):m=0,p[0].push(m);var x;D&1?(E=l.andln(7)+_&7,(E===3||E===5)&&R===2?x=-D:x=D):x=0,p[1].push(x),2*b===m+1&&(b=1-b),2*_===x+1&&(_=1-_),f.iushrn(1),l.iushrn(1)}return p}e.getJSF=a;function s(f,l,p){var b="_"+l;f.prototype[l]=function(){return this[b]!==void 0?this[b]:this[b]=p.call(this)}}e.cachedProperty=s;function u(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=u;function c(f){return new t(f,"hex","le")}e.intFromLE=c})(En);var pu={},H1={get exports(){return pu},set exports(r){pu=r}},$f;H1.exports=function(e){return $f||($f=new Ro(null)),$f.generate(e)};function Ro(r){this.rand=r}pu.Rand=Ro;Ro.prototype.generate=function(e){return this._rand(e)};Ro.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Ro.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Ro.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Ro.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var gp=Xp;if(typeof gp.randomBytes!="function")throw new Error("Not supported");Ro.prototype._rand=function(e){return gp.randomBytes(e)}}catch{}var Dh={},na=yn,Au=En,mc=Au.getNAF,G1=Au.getJSF,vc=Au.assert;function ta(r,e){this.type=r,this.p=new na(e.p,16),this.red=e.prime?na.red(e.prime):na.mont(this.p),this.zero=new na(0).toRed(this.red),this.one=new na(1).toRed(this.red),this.two=new na(2).toRed(this.red),this.n=e.n&&new na(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var jc=ta;ta.prototype.point=function(){throw new Error("Not implemented")};ta.prototype.validate=function(){throw new Error("Not implemented")};ta.prototype._fixedNafMul=function(e,t){vc(e.precomputed);var n=e._getDoubles(),i=mc(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var a=[],s,u;for(s=0;s<i.length;s+=n.step){u=0;for(var c=s+n.step-1;c>=s;c--)u=(u<<1)+i[c];a.push(u)}for(var f=this.jpoint(null,null,null),l=this.jpoint(null,null,null),p=o;p>0;p--){for(s=0;s<a.length;s++)u=a[s],u===p?l=l.mixedAdd(n.points[s]):u===-p&&(l=l.mixedAdd(n.points[s].neg()));f=f.add(l)}return f.toP()};ta.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,a=mc(t,n,this._bitLength),s=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var c=0;u>=0&&a[u]===0;u--)c++;if(u>=0&&c++,s=s.dblp(c),u<0)break;var f=a[u];vc(f!==0),e.type==="affine"?f>0?s=s.mixedAdd(o[f-1>>1]):s=s.mixedAdd(o[-f-1>>1].neg()):f>0?s=s.add(o[f-1>>1]):s=s.add(o[-f-1>>1].neg())}return e.type==="affine"?s.toP():s};ta.prototype._wnafMulAdd=function(e,t,n,i,o){var a=this._wnafT1,s=this._wnafT2,u=this._wnafT3,c=0,f,l,p;for(f=0;f<i;f++){p=t[f];var b=p._getNAFPoints(e);a[f]=b.wnd,s[f]=b.points}for(f=i-1;f>=1;f-=2){var _=f-1,E=f;if(a[_]!==1||a[E]!==1){u[_]=mc(n[_],a[_],this._bitLength),u[E]=mc(n[E],a[E],this._bitLength),c=Math.max(u[_].length,c),c=Math.max(u[E].length,c);continue}var R=[t[_],null,null,t[E]];t[_].y.cmp(t[E].y)===0?(R[1]=t[_].add(t[E]),R[2]=t[_].toJ().mixedAdd(t[E].neg())):t[_].y.cmp(t[E].y.redNeg())===0?(R[1]=t[_].toJ().mixedAdd(t[E]),R[2]=t[_].add(t[E].neg())):(R[1]=t[_].toJ().mixedAdd(t[E]),R[2]=t[_].toJ().mixedAdd(t[E].neg()));var D=[-3,-1,-5,-7,0,7,5,1,3],m=G1(n[_],n[E]);for(c=Math.max(m[0].length,c),u[_]=new Array(c),u[E]=new Array(c),l=0;l<c;l++){var x=m[0][l]|0,M=m[1][l]|0;u[_][l]=D[(x+1)*3+(M+1)],u[E][l]=0,s[_]=R}}var O=this.jpoint(null,null,null),B=this._wnafT4;for(f=c;f>=0;f--){for(var F=0;f>=0;){var z=!0;for(l=0;l<i;l++)B[l]=u[l][f]|0,B[l]!==0&&(z=!1);if(!z)break;F++,f--}if(f>=0&&F++,O=O.dblp(F),f<0)break;for(l=0;l<i;l++){var U=B[l];U!==0&&(U>0?p=s[l][U-1>>1]:U<0&&(p=s[l][-U-1>>1].neg()),p.type==="affine"?O=O.mixedAdd(p):O=O.add(p))}}for(f=0;f<i;f++)s[f]=null;return o?O:O.toP()};function ei(r,e){this.curve=r,this.type=e,this.precomputed=null}ta.BasePoint=ei;ei.prototype.eq=function(){throw new Error("Not implemented")};ei.prototype.validate=function(){return this.curve.validate(this)};ta.prototype.decodePoint=function(e,t){e=Au.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?vc(e[e.length-1]%2===0):e[0]===7&&vc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ei.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ei.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};ei.prototype.encode=function(e,t){return Au.encode(this._encode(t),e)};ei.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};ei.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};ei.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<t;o+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};ei.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(i);return{wnd:e,points:t}};ei.prototype._getBeta=function(){return null};ei.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var V1=En,pt=yn,Bh=_n,ws=jc,K1=V1.assert;function ti(r){ws.call(this,"short",r),this.a=new pt(r.a,16).toRed(this.red),this.b=new pt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Bh(ti,ws);var W1=ti;ti.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new pt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new pt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?n=o[0]:(n=o[1],K1(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(s){return{a:new pt(s.a,16),b:new pt(s.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};ti.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:pt.mont(e),n=new pt(2).toRed(t).redInvm(),i=n.redNeg(),o=new pt(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(o).fromRed(),s=i.redSub(o).fromRed();return[a,s]};ti.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new pt(1),a=new pt(0),s=new pt(0),u=new pt(1),c,f,l,p,b,_,E,R=0,D,m;n.cmpn(0)!==0;){var x=i.div(n);D=i.sub(x.mul(n)),m=s.sub(x.mul(o));var M=u.sub(x.mul(a));if(!l&&D.cmp(t)<0)c=E.neg(),f=o,l=D.neg(),p=m;else if(l&&++R===2)break;E=D,i=n,n=D,s=o,o=m,u=a,a=M}b=D.neg(),_=m;var O=l.sqr().add(p.sqr()),B=b.sqr().add(_.sqr());return B.cmp(O)>=0&&(b=c,_=f),l.negative&&(l=l.neg(),p=p.neg()),b.negative&&(b=b.neg(),_=_.neg()),[{a:l,b:p},{a:b,b:_}]};ti.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],o=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),s=o.mul(n.a),u=a.mul(i.a),c=o.mul(n.b),f=a.mul(i.b),l=e.sub(s).sub(u),p=c.add(f).neg();return{k1:l,k2:p}};ti.prototype.pointFromX=function(e,t){e=new pt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)};ti.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};ti.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),u=e[a],c=u._getBeta();s.k1.negative&&(s.k1.ineg(),u=u.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),i[a*2]=u,i[a*2+1]=c,o[a*2]=s.k1,o[a*2+1]=s.k2}for(var f=this._wnafMulAdd(1,i,o,a*2,n),l=0;l<a*2;l++)i[l]=null,o[l]=null;return f};function vr(r,e,t,n){ws.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new pt(e,16),this.y=new pt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Bh(vr,ws.BasePoint);ti.prototype.point=function(e,t,n){return new vr(this,e,t,n)};ti.prototype.pointFromJSON=function(e,t){return vr.fromJSON(this,e,t)};vr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};vr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};vr.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function o(s){return e.point(s[0],s[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(o))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(o))}},i};vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};vr.prototype.isInfinity=function(){return this.inf};vr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};vr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=o.redSqr().redISub(this.x.redAdd(this.x)),s=o.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)};vr.prototype.getX=function(){return this.x.fromRed()};vr.prototype.getY=function(){return this.y.fromRed()};vr.prototype.mul=function(e){return e=new pt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};vr.prototype.mulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};vr.prototype.jmulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};vr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};vr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};vr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ar(r,e,t,n){ws.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new pt(0)):(this.x=new pt(e,16),this.y=new pt(t,16),this.z=new pt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Bh(Ar,ws.BasePoint);ti.prototype.jpoint=function(e,t,n){return new Ar(this,e,t,n)};Ar.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Ar.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ar.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),o=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),u=i.redSub(o),c=a.redSub(s);if(u.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=u.redSqr(),l=f.redMul(u),p=i.redMul(f),b=c.redSqr().redIAdd(l).redISub(p).redISub(p),_=c.redMul(p.redISub(b)).redISub(a.redMul(l)),E=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(b,_,E)};Ar.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),o=this.y,a=e.y.redMul(t).redMul(this.z),s=n.redSub(i),u=o.redSub(a);if(s.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),f=c.redMul(s),l=n.redMul(c),p=u.redSqr().redIAdd(f).redISub(l).redISub(l),b=u.redMul(l.redISub(p)).redISub(o.redMul(f)),_=this.z.redMul(s);return this.curve.jpoint(p,b,_)};Ar.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,a=this.x,s=this.y,u=this.z,c=u.redSqr().redSqr(),f=s.redAdd(s);for(t=0;t<e;t++){var l=a.redSqr(),p=f.redSqr(),b=p.redSqr(),_=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c)),E=a.redMul(p),R=_.redSqr().redISub(E.redAdd(E)),D=E.redISub(R),m=_.redMul(D);m=m.redIAdd(m).redISub(b);var x=f.redMul(u);t+1<e&&(c=c.redMul(b)),a=R,u=x,f=m}return this.curve.jpoint(a,f.redMul(o),u)};Ar.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ar.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i),c=u.redSqr().redISub(s).redISub(s),f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),e=c,t=u.redMul(s.redISub(c)).redISub(f),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),p=this.y.redSqr(),b=p.redSqr(),_=this.x.redAdd(p).redSqr().redISub(l).redISub(b);_=_.redIAdd(_);var E=l.redAdd(l).redIAdd(l),R=E.redSqr(),D=b.redIAdd(b);D=D.redIAdd(D),D=D.redIAdd(D),e=R.redISub(_).redISub(_),t=E.redMul(_.redISub(e)).redISub(D),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Ar.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=u.redSqr().redISub(s).redISub(s);e=c;var f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),t=u.redMul(s.redISub(c)).redISub(f),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),p=this.y.redSqr(),b=this.x.redMul(p),_=this.x.redSub(l).redMul(this.x.redAdd(l));_=_.redAdd(_).redIAdd(_);var E=b.redIAdd(b);E=E.redIAdd(E);var R=E.redAdd(E);e=_.redSqr().redISub(R),n=this.y.redAdd(this.z).redSqr().redISub(p).redISub(l);var D=p.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D),t=_.redMul(E.redISub(e)).redISub(D)}return this.curve.jpoint(e,t,n)};Ar.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),a=t.redSqr(),s=n.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(o)),c=t.redAdd(t);c=c.redIAdd(c);var f=c.redMul(s),l=u.redSqr().redISub(f.redAdd(f)),p=f.redISub(l),b=s.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var _=u.redMul(p).redISub(b),E=n.redAdd(n).redMul(i);return this.curve.jpoint(l,_,E)};Ar.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),o=e.redAdd(e).redIAdd(e),a=o.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(a);var u=s.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var f=o.redIAdd(s).redSqr().redISub(a).redISub(u).redISub(c),l=t.redMul(f);l=l.redIAdd(l),l=l.redIAdd(l);var p=this.x.redMul(u).redISub(l);p=p.redIAdd(p),p=p.redIAdd(p);var b=this.y.redMul(f.redMul(c.redISub(f)).redISub(s.redMul(u)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var _=this.z.redAdd(s).redSqr().redISub(n).redISub(u);return this.curve.jpoint(p,b,_)};Ar.prototype.mul=function(e,t){return e=new pt(e,t),this.curve._wnafMul(this,e)};Ar.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};Ar.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Ar.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ar.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ba=yn,b0=_n,$c=jc,J1=En;function xs(r){$c.call(this,"mont",r),this.a=new Ba(r.a,16).toRed(this.red),this.b=new Ba(r.b,16).toRed(this.red),this.i4=new Ba(4).toRed(this.red).redInvm(),this.two=new Ba(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}b0(xs,$c);var X1=xs;xs.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),o=i.redSqrt();return o.redSqr().cmp(i)===0};function mr(r,e,t){$c.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ba(e,16),this.z=new Ba(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}b0(mr,$c.BasePoint);xs.prototype.decodePoint=function(e,t){return this.point(J1.toArray(e,t),1)};xs.prototype.point=function(e,t){return new mr(this,e,t)};xs.prototype.pointFromJSON=function(e){return mr.fromJSON(this,e)};mr.prototype.precompute=function(){};mr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};mr.fromJSON=function(e,t){return new mr(e,t[0],t[1]||e.one)};mr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};mr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};mr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=t.redSub(i),a=t.redMul(i),s=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(a,s)};mr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};mr.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),a=e.x.redSub(e.z),s=a.redMul(n),u=o.redMul(i),c=t.z.redMul(s.redAdd(u).redSqr()),f=t.x.redMul(s.redISub(u).redSqr());return this.curve.point(c,f)};mr.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),o=this,a=[];t.cmpn(0)!==0;t.iushrn(1))a.push(t.andln(1));for(var s=a.length-1;s>=0;s--)a[s]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};mr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};mr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};mr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};mr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};mr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Y1=En,io=yn,w0=_n,Zc=jc,j1=Y1.assert;function Xi(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Zc.call(this,"edwards",r),this.a=new io(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new io(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new io(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),j1(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}w0(Xi,Zc);var $1=Xi;Xi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Xi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Xi.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};Xi.prototype.pointFromX=function(e,t){e=new io(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(o.redInvm()),s=a.redSqrt();if(s.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var u=s.fromRed().isOdd();return(t&&!u||!t&&u)&&(s=s.redNeg()),this.point(e,s)};Xi.prototype.pointFromY=function(e,t){e=new io(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(o.redInvm());if(a.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(s.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)};Xi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(o)===0};function Ye(r,e,t,n,i){Zc.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new io(e,16),this.y=new io(t,16),this.z=n?new io(n,16):this.curve.one,this.t=i&&new io(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}w0(Ye,Zc.BasePoint);Xi.prototype.pointFromJSON=function(e){return Ye.fromJSON(this,e)};Xi.prototype.point=function(e,t,n,i){return new Ye(this,e,t,n,i)};Ye.fromJSON=function(e,t){return new Ye(e,t[0],t[1],t[2])};Ye.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ye.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Ye.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),s=a.redSub(n),u=i.redSub(t),c=o.redMul(s),f=a.redMul(u),l=o.redMul(u),p=s.redMul(a);return this.curve.point(c,f,p,l)};Ye.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,o,a,s,u,c;if(this.curve.twisted){s=this.curve._mulA(t);var f=s.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(f.redSub(this.curve.two)),o=f.redMul(s.redSub(n)),a=f.redSqr().redSub(f).redSub(f)):(u=this.z.redSqr(),c=f.redSub(u).redISub(u),i=e.redSub(t).redISub(n).redMul(c),o=f.redMul(s.redSub(n)),a=f.redMul(c))}else s=t.redAdd(n),u=this.curve._mulC(this.z).redSqr(),c=s.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(s)).redMul(c),o=this.curve._mulC(s).redMul(t.redISub(n)),a=s.redMul(c);return this.curve.point(i,o,a)};Ye.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ye.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),s=o.redSub(i),u=o.redAdd(i),c=n.redAdd(t),f=a.redMul(s),l=u.redMul(c),p=a.redMul(c),b=s.redMul(u);return this.curve.point(f,l,b,p)};Ye.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(o),s=n.redSub(a),u=n.redAdd(a),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),f=t.redMul(s).redMul(c),l,p;return this.curve.twisted?(l=t.redMul(u).redMul(o.redSub(this.curve._mulA(i))),p=s.redMul(u)):(l=t.redMul(u).redMul(o.redSub(i)),p=this.curve._mulC(s).redMul(u)),this.curve.point(f,l,p)};Ye.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Ye.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Ye.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};Ye.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};Ye.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Ye.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ye.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ye.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ye.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Ye.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};Ye.prototype.toP=Ye.prototype.normalize;Ye.prototype.mixedAdd=Ye.prototype.add;(function(r){var e=r;e.base=jc,e.short=W1,e.mont=X1,e.edwards=$1})(Dh);var Qc={},ef={},Pe={},Z1=ea,Q1=_n;Pe.inherits=Q1;function eb(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function tb(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var o=r.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):eb(r,i)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}Pe.toArray=tb;function rb(r){for(var e="",t=0;t<r.length;t++)e+=E0(r[t].toString(16));return e}Pe.toHex=rb;function x0(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Pe.htonl=x0;function nb(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=x0(i)),t+=S0(i.toString(16))}return t}Pe.toHex32=nb;function E0(r){return r.length===1?"0"+r:r}Pe.zero2=E0;function S0(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Pe.zero8=S0;function ib(r,e,t,n){var i=t-e;Z1(i%4===0);for(var o=new Array(i/4),a=0,s=e;a<o.length;a++,s+=4){var u;n==="big"?u=r[s]<<24|r[s+1]<<16|r[s+2]<<8|r[s+3]:u=r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s],o[a]=u>>>0}return o}Pe.join32=ib;function ob(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var o=r[n];e==="big"?(t[i]=o>>>24,t[i+1]=o>>>16&255,t[i+2]=o>>>8&255,t[i+3]=o&255):(t[i+3]=o>>>24,t[i+2]=o>>>16&255,t[i+1]=o>>>8&255,t[i]=o&255)}return t}Pe.split32=ob;function ab(r,e){return r>>>e|r<<32-e}Pe.rotr32=ab;function sb(r,e){return r<<e|r>>>32-e}Pe.rotl32=sb;function ub(r,e){return r+e>>>0}Pe.sum32=ub;function cb(r,e,t){return r+e+t>>>0}Pe.sum32_3=cb;function fb(r,e,t,n){return r+e+t+n>>>0}Pe.sum32_4=fb;function lb(r,e,t,n,i){return r+e+t+n+i>>>0}Pe.sum32_5=lb;function hb(r,e,t,n){var i=r[e],o=r[e+1],a=n+o>>>0,s=(a<n?1:0)+t+i;r[e]=s>>>0,r[e+1]=a}Pe.sum64=hb;function db(r,e,t,n){var i=e+n>>>0,o=(i<e?1:0)+r+t;return o>>>0}Pe.sum64_hi=db;function pb(r,e,t,n){var i=e+n;return i>>>0}Pe.sum64_lo=pb;function gb(r,e,t,n,i,o,a,s){var u=0,c=e;c=c+n>>>0,u+=c<e?1:0,c=c+o>>>0,u+=c<o?1:0,c=c+s>>>0,u+=c<s?1:0;var f=r+t+i+a+u;return f>>>0}Pe.sum64_4_hi=gb;function mb(r,e,t,n,i,o,a,s){var u=e+n+o+s;return u>>>0}Pe.sum64_4_lo=mb;function vb(r,e,t,n,i,o,a,s,u,c){var f=0,l=e;l=l+n>>>0,f+=l<e?1:0,l=l+o>>>0,f+=l<o?1:0,l=l+s>>>0,f+=l<s?1:0,l=l+c>>>0,f+=l<c?1:0;var p=r+t+i+a+u+f;return p>>>0}Pe.sum64_5_hi=vb;function yb(r,e,t,n,i,o,a,s,u,c){var f=e+n+o+s+c;return f>>>0}Pe.sum64_5_lo=yb;function _b(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}Pe.rotr64_hi=_b;function bb(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}Pe.rotr64_lo=bb;function wb(r,e,t){return r>>>t}Pe.shr64_hi=wb;function xb(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}Pe.shr64_lo=xb;var Es={},mp=Pe,Eb=ea;function tf(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Es.BlockHash=tf;tf.prototype.update=function(e,t){if(e=mp.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=mp.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};tf.prototype.digest=function(e){return this.update(this._pad()),Eb(this.pending===null),this._digest(e)};tf.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,a=8;a<this.padLength;a++)i[o++]=0;return i};var Ss={},Yi={},Sb=Pe,Oi=Sb.rotr32;function Cb(r,e,t,n){if(r===0)return C0(e,t,n);if(r===1||r===3)return A0(e,t,n);if(r===2)return I0(e,t,n)}Yi.ft_1=Cb;function C0(r,e,t){return r&e^~r&t}Yi.ch32=C0;function I0(r,e,t){return r&e^r&t^e&t}Yi.maj32=I0;function A0(r,e,t){return r^e^t}Yi.p32=A0;function Ib(r){return Oi(r,2)^Oi(r,13)^Oi(r,22)}Yi.s0_256=Ib;function Ab(r){return Oi(r,6)^Oi(r,11)^Oi(r,25)}Yi.s1_256=Ab;function Mb(r){return Oi(r,7)^Oi(r,18)^r>>>3}Yi.g0_256=Mb;function Nb(r){return Oi(r,17)^Oi(r,19)^r>>>10}Yi.g1_256=Nb;var fs=Pe,Pb=Es,Lb=Yi,Zf=fs.rotl32,Os=fs.sum32,Rb=fs.sum32_5,Tb=Lb.ft_1,M0=Pb.BlockHash,Ob=[1518500249,1859775393,2400959708,3395469782];function Gi(){if(!(this instanceof Gi))return new Gi;M0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}fs.inherits(Gi,M0);var Db=Gi;Gi.blockSize=512;Gi.outSize=160;Gi.hmacStrength=80;Gi.padLength=64;Gi.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Zf(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],a=this.h[1],s=this.h[2],u=this.h[3],c=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),l=Rb(Zf(o,5),Tb(f,a,s,u),c,n[i],Ob[f]);c=u,u=s,s=Zf(a,30),a=o,o=l}this.h[0]=Os(this.h[0],o),this.h[1]=Os(this.h[1],a),this.h[2]=Os(this.h[2],s),this.h[3]=Os(this.h[3],u),this.h[4]=Os(this.h[4],c)};Gi.prototype._digest=function(e){return e==="hex"?fs.toHex32(this.h,"big"):fs.split32(this.h,"big")};var ls=Pe,Bb=Es,Cs=Yi,kb=ea,ri=ls.sum32,Fb=ls.sum32_4,zb=ls.sum32_5,Ub=Cs.ch32,qb=Cs.maj32,Hb=Cs.s0_256,Gb=Cs.s1_256,Vb=Cs.g0_256,Kb=Cs.g1_256,N0=Bb.BlockHash,Wb=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vi(){if(!(this instanceof Vi))return new Vi;N0.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Wb,this.W=new Array(64)}ls.inherits(Vi,N0);var P0=Vi;Vi.blockSize=512;Vi.outSize=256;Vi.hmacStrength=192;Vi.padLength=64;Vi.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Fb(Kb(n[i-2]),n[i-7],Vb(n[i-15]),n[i-16]);var o=this.h[0],a=this.h[1],s=this.h[2],u=this.h[3],c=this.h[4],f=this.h[5],l=this.h[6],p=this.h[7];for(kb(this.k.length===n.length),i=0;i<n.length;i++){var b=zb(p,Gb(c),Ub(c,f,l),this.k[i],n[i]),_=ri(Hb(o),qb(o,a,s));p=l,l=f,f=c,c=ri(u,b),u=s,s=a,a=o,o=ri(b,_)}this.h[0]=ri(this.h[0],o),this.h[1]=ri(this.h[1],a),this.h[2]=ri(this.h[2],s),this.h[3]=ri(this.h[3],u),this.h[4]=ri(this.h[4],c),this.h[5]=ri(this.h[5],f),this.h[6]=ri(this.h[6],l),this.h[7]=ri(this.h[7],p)};Vi.prototype._digest=function(e){return e==="hex"?ls.toHex32(this.h,"big"):ls.split32(this.h,"big")};var Dl=Pe,L0=P0;function _o(){if(!(this instanceof _o))return new _o;L0.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Dl.inherits(_o,L0);var Jb=_o;_o.blockSize=512;_o.outSize=224;_o.hmacStrength=192;_o.padLength=64;_o.prototype._digest=function(e){return e==="hex"?Dl.toHex32(this.h.slice(0,7),"big"):Dl.split32(this.h.slice(0,7),"big")};var en=Pe,Xb=Es,Yb=ea,Di=en.rotr64_hi,Bi=en.rotr64_lo,R0=en.shr64_hi,T0=en.shr64_lo,So=en.sum64,Qf=en.sum64_hi,el=en.sum64_lo,jb=en.sum64_4_hi,$b=en.sum64_4_lo,Zb=en.sum64_5_hi,Qb=en.sum64_5_lo,O0=Xb.BlockHash,e2=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function yi(){if(!(this instanceof yi))return new yi;O0.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=e2,this.W=new Array(160)}en.inherits(yi,O0);var D0=yi;yi.blockSize=1024;yi.outSize=512;yi.hmacStrength=192;yi.padLength=128;yi.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var o=l2(n[i-4],n[i-3]),a=h2(n[i-4],n[i-3]),s=n[i-14],u=n[i-13],c=c2(n[i-30],n[i-29]),f=f2(n[i-30],n[i-29]),l=n[i-32],p=n[i-31];n[i]=jb(o,a,s,u,c,f,l,p),n[i+1]=$b(o,a,s,u,c,f,l,p)}};yi.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],l=this.h[7],p=this.h[8],b=this.h[9],_=this.h[10],E=this.h[11],R=this.h[12],D=this.h[13],m=this.h[14],x=this.h[15];Yb(this.k.length===n.length);for(var M=0;M<n.length;M+=2){var O=m,B=x,F=s2(p,b),z=u2(p,b),U=t2(p,b,_,E,R),W=r2(p,b,_,E,R,D),C=this.k[M],h=this.k[M+1],g=n[M],w=n[M+1],S=Zb(O,B,F,z,U,W,C,h,g,w),N=Qb(O,B,F,z,U,W,C,h,g,w);O=o2(i,o),B=a2(i,o),F=n2(i,o,a,s,u),z=i2(i,o,a,s,u,c);var T=Qf(O,B,F,z),k=el(O,B,F,z);m=R,x=D,R=_,D=E,_=p,E=b,p=Qf(f,l,S,N),b=el(l,l,S,N),f=u,l=c,u=a,c=s,a=i,s=o,i=Qf(S,N,T,k),o=el(S,N,T,k)}So(this.h,0,i,o),So(this.h,2,a,s),So(this.h,4,u,c),So(this.h,6,f,l),So(this.h,8,p,b),So(this.h,10,_,E),So(this.h,12,R,D),So(this.h,14,m,x)};yi.prototype._digest=function(e){return e==="hex"?en.toHex32(this.h,"big"):en.split32(this.h,"big")};function t2(r,e,t,n,i){var o=r&t^~r&i;return o<0&&(o+=4294967296),o}function r2(r,e,t,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function n2(r,e,t,n,i){var o=r&t^r&i^t&i;return o<0&&(o+=4294967296),o}function i2(r,e,t,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function o2(r,e){var t=Di(r,e,28),n=Di(e,r,2),i=Di(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function a2(r,e){var t=Bi(r,e,28),n=Bi(e,r,2),i=Bi(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function s2(r,e){var t=Di(r,e,14),n=Di(r,e,18),i=Di(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function u2(r,e){var t=Bi(r,e,14),n=Bi(r,e,18),i=Bi(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function c2(r,e){var t=Di(r,e,1),n=Di(r,e,8),i=R0(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function f2(r,e){var t=Bi(r,e,1),n=Bi(r,e,8),i=T0(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function l2(r,e){var t=Di(r,e,19),n=Di(e,r,29),i=R0(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}function h2(r,e){var t=Bi(r,e,19),n=Bi(e,r,29),i=T0(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}var Bl=Pe,B0=D0;function bo(){if(!(this instanceof bo))return new bo;B0.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Bl.inherits(bo,B0);var d2=bo;bo.blockSize=1024;bo.outSize=384;bo.hmacStrength=192;bo.padLength=128;bo.prototype._digest=function(e){return e==="hex"?Bl.toHex32(this.h.slice(0,12),"big"):Bl.split32(this.h.slice(0,12),"big")};Ss.sha1=Db;Ss.sha224=Jb;Ss.sha256=P0;Ss.sha384=d2;Ss.sha512=D0;var k0={},Sa=Pe,p2=Es,zu=Sa.rotl32,vp=Sa.sum32,Ds=Sa.sum32_3,yp=Sa.sum32_4,F0=p2.BlockHash;function Ki(){if(!(this instanceof Ki))return new Ki;F0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Sa.inherits(Ki,F0);k0.ripemd160=Ki;Ki.blockSize=512;Ki.outSize=160;Ki.hmacStrength=192;Ki.padLength=64;Ki.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],s=this.h[4],u=n,c=i,f=o,l=a,p=s,b=0;b<80;b++){var _=vp(zu(yp(n,_p(b,i,o,a),e[v2[b]+t],g2(b)),_2[b]),s);n=s,s=a,a=zu(o,10),o=i,i=_,_=vp(zu(yp(u,_p(79-b,c,f,l),e[y2[b]+t],m2(b)),b2[b]),p),u=p,p=l,l=zu(f,10),f=c,c=_}_=Ds(this.h[1],o,l),this.h[1]=Ds(this.h[2],a,p),this.h[2]=Ds(this.h[3],s,u),this.h[3]=Ds(this.h[4],n,c),this.h[4]=Ds(this.h[0],i,f),this.h[0]=_};Ki.prototype._digest=function(e){return e==="hex"?Sa.toHex32(this.h,"little"):Sa.split32(this.h,"little")};function _p(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function g2(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function m2(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var v2=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y2=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b2=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],w2=Pe,x2=ea;function hs(r,e,t){if(!(this instanceof hs))return new hs(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(w2.toArray(e,t))}var E2=hs;hs.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),x2(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};hs.prototype.update=function(e,t){return this.inner.update(e,t),this};hs.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=Pe,e.common=Es,e.sha=Ss,e.ripemd=k0,e.hmac=E2,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(ef);var tl,bp;function S2(){return bp||(bp=1,tl={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),tl}(function(r){var e=r,t=ef,n=Dh,i=En,o=i.assert;function a(c){c.type==="short"?this.curve=new n.short(c):c.type==="edwards"?this.curve=new n.edwards(c):this.curve=new n.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function s(c,f){Object.defineProperty(e,c,{configurable:!0,enumerable:!0,get:function(){var l=new a(f);return Object.defineProperty(e,c,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=S2()}catch{u=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(Qc);var C2=ef,ua=Oh,z0=ea;function Jo(r){if(!(this instanceof Jo))return new Jo(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ua.toArray(r.entropy,r.entropyEnc||"hex"),t=ua.toArray(r.nonce,r.nonceEnc||"hex"),n=ua.toArray(r.pers,r.persEnc||"hex");z0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var I2=Jo;Jo.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Jo.prototype._hmac=function(){return new C2.hmac(this.hash,this.K)};Jo.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Jo.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=ua.toArray(e,t),n=ua.toArray(n,i),z0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Jo.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=ua.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,ua.encode(a,t)};var A2=yn,M2=En,kl=M2.assert;function Nr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var N2=Nr;Nr.fromPublic=function(e,t,n){return t instanceof Nr?t:new Nr(e,{pub:t,pubEnc:n})};Nr.fromPrivate=function(e,t,n){return t instanceof Nr?t:new Nr(e,{priv:t,privEnc:n})};Nr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Nr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Nr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Nr.prototype._importPrivate=function(e,t){this.priv=new A2(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Nr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?kl(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&kl(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Nr.prototype.derive=function(e){return e.validate()||kl(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Nr.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Nr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Nr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var yc=yn,kh=En,P2=kh.assert;function rf(r,e){if(r instanceof rf)return r;this._importDER(r,e)||(P2(r.r&&r.s,"Signature without r or s"),this.r=new yc(r.r,16),this.s=new yc(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var L2=rf;function R2(){this.place=0}function rl(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function wp(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}rf.prototype._importDER=function(e,t){e=kh.toArray(e,t);var n=new R2;if(e[n.place++]!==48)return!1;var i=rl(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=rl(e,n);if(o===!1)return!1;var a=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var s=rl(e,n);if(s===!1||e.length!==s+n.place)return!1;var u=e.slice(n.place,s+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new yc(a),this.s=new yc(u),this.recoveryParam=null,!0};function nl(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}rf.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=wp(t),n=wp(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];nl(i,t.length),i=i.concat(t),i.push(2),nl(i,n.length);var o=i.concat(n),a=[48];return nl(a,o.length),a=a.concat(o),kh.encode(a,e)};var ca=yn,U0=I2,T2=En,il=Qc,O2=pu,q0=T2.assert,Fh=N2,nf=L2;function Xn(r){if(!(this instanceof Xn))return new Xn(r);typeof r=="string"&&(q0(Object.prototype.hasOwnProperty.call(il,r),"Unknown curve "+r),r=il[r]),r instanceof il.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var D2=Xn;Xn.prototype.keyPair=function(e){return new Fh(this,e)};Xn.prototype.keyFromPrivate=function(e,t){return Fh.fromPrivate(this,e,t)};Xn.prototype.keyFromPublic=function(e,t){return Fh.fromPublic(this,e,t)};Xn.prototype.genKeyPair=function(e){e||(e={});for(var t=new U0({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||O2(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ca(2));;){var o=new ca(t.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Xn.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Xn.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new ca(e,16));for(var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),s=e.toArray("be",o),u=new U0({hash:this.hash,entropy:a,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new ca(1)),f=0;;f++){var l=i.k?i.k(f):new ca(u.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(c)>=0)){var p=this.g.mul(l);if(!p.isInfinity()){var b=p.getX(),_=b.umod(this.n);if(_.cmpn(0)!==0){var E=l.invm(this.n).mul(_.mul(t.getPrivate()).iadd(e));if(E=E.umod(this.n),E.cmpn(0)!==0){var R=(p.getY().isOdd()?1:0)|(b.cmp(_)!==0?2:0);return i.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),R^=1),new nf({r:_,s:E,recoveryParam:R})}}}}}};Xn.prototype.verify=function(e,t,n,i){e=this._truncateToN(new ca(e,16)),n=this.keyFromPublic(n,i),t=new nf(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s=a.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(o).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(u,n.getPublic(),c),f.isInfinity()?!1:f.eqXToP(o)):(f=this.g.mulAdd(u,n.getPublic(),c),f.isInfinity()?!1:f.getX().umod(this.n).cmp(o)===0)};Xn.prototype.recoverPubKey=function(r,e,t,n){q0((3&t)===t,"The recovery param is more than two bits"),e=new nf(e,n);var i=this.n,o=new ca(r),a=e.r,s=e.s,u=t&1,c=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var f=e.r.invm(i),l=i.sub(o).mul(f).umod(i),p=s.mul(f).umod(i);return this.g.mulAdd(l,a,p)};Xn.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new nf(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(r,e,i)}catch{continue}if(o.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var Mu=En,H0=Mu.assert,xp=Mu.parseBytes,Is=Mu.cachedProperty;function fr(r,e){this.eddsa=r,this._secret=xp(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=xp(e.pub)}fr.fromPublic=function(e,t){return t instanceof fr?t:new fr(e,{pub:t})};fr.fromSecret=function(e,t){return t instanceof fr?t:new fr(e,{secret:t})};fr.prototype.secret=function(){return this._secret};Is(fr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Is(fr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Is(fr,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Is(fr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Is(fr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Is(fr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});fr.prototype.sign=function(e){return H0(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};fr.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};fr.prototype.getSecret=function(e){return H0(this._secret,"KeyPair is public only"),Mu.encode(this.secret(),e)};fr.prototype.getPublic=function(e){return Mu.encode(this.pubBytes(),e)};var B2=fr,k2=yn,of=En,F2=of.assert,af=of.cachedProperty,z2=of.parseBytes;function La(r,e){this.eddsa=r,typeof e!="object"&&(e=z2(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),F2(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof k2&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}af(La,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});af(La,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});af(La,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});af(La,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});La.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};La.prototype.toHex=function(){return of.encode(this.toBytes(),"hex").toUpperCase()};var U2=La,q2=ef,H2=Qc,ds=En,G2=ds.assert,G0=ds.parseBytes,V0=B2,Ep=U2;function tn(r){if(G2(r==="ed25519","only tested with ed25519 so far"),!(this instanceof tn))return new tn(r);r=H2[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=q2.sha512}var V2=tn;tn.prototype.sign=function(e,t){e=G0(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),a=this.encodePoint(o),s=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),u=i.add(s).umod(this.curve.n);return this.makeSignature({R:o,S:u,Rencoded:a})};tn.prototype.verify=function(e,t,n){e=G0(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S()),s=t.R().add(i.pub().mul(o));return s.eq(a)};tn.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return ds.intFromLE(e.digest()).umod(this.curve.n)};tn.prototype.keyFromPublic=function(e){return V0.fromPublic(this,e)};tn.prototype.keyFromSecret=function(e){return V0.fromSecret(this,e)};tn.prototype.makeSignature=function(e){return e instanceof Ep?e:new Ep(this,e)};tn.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};tn.prototype.decodePoint=function(e){e=ds.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,o=ds.intFromLE(n);return this.curve.pointFromY(o,i)};tn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};tn.prototype.decodeInt=function(e){return ds.intFromLE(e)};tn.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=q1.version,e.utils=En,e.rand=pu,e.curve=Dh,e.curves=Qc,e.ec=D2,e.eddsa=V2})(_0);var K2=Qo.bignum,W2=du.Buffer,K0=function(e,t){var n=W2.from(e,"base64"),i=e=new K2(n,10,"be").iabs();return t&&n.fill(0),i},W0=Qo.define("AlgorithmIdentifer",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),J2=W0,J0=Qo.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(J2),this.key("PublicKey").bitstr())}),zh=Qo.define("Version",function(){this.int()}),X2=W0,Y2=zh,X0=Qo.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Y2),this.key("privateKeyAlgorithm").use(X2),this.key("privateKey").octstr(),this.key("attributes").optional().any())}),Y0=Qo,Sp=du.Buffer,j2=_0.ec,ol=K0,$2=J0,Z2=X0,Q2=zh,ew=Y0.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),tw=1,rw=Y0.define("ECPrivateKey",function(){this.seq().obj(this.key("version").use(Q2),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr())}),nw={"P-256":"p256","P-384":"p384","P-521":"p521"},Fl={"P-256":[1,2,840,10045,3,1,7],"P-384":[1,3,132,0,34],"P-521":[1,3,132,0,35]},zl={},Ul={};Object.keys(Fl).forEach(function(r){zl[r]=ew.encode({type:"namedCurve",value:Fl[r]},"der"),Ul[r]={algorithm:[1,2,840,10045,2,1],parameters:zl[r]}});Fl=null;function iw(r,e){if(typeof r.crv!="string")throw new TypeError('Expected "jwk.crv" to be a String');var t=typeof r.d=="string",n=t?["undefined","string"]:["string"];if(n.indexOf(typeof r.x)===-1)throw new TypeError('Expected "jwk.x" to be a String');if(n.indexOf(typeof r.y)===-1)throw new TypeError('Expected "jwk.y" to be a String');if(e.private&&!t)throw new TypeError('Expected "jwk.d" to be a String');var i=nw[r.crv];if(!i)throw new Error('Unsupported curve "'+r.crv+'"');var o=new j2(i),a={},s=r.x&&r.y;s&&(a.pub={x:ol(r.x,!1),y:ol(r.y,!1)}),(e.private||!s)&&(a.priv=ol(r.d,!0)),a=o.keyPair(a);var u=a.validate();if(!u.result)throw new Error('Invalid key for curve: "'+u.reason+'"');var c=ow(r.crv,a,e);return c}function ow(r,e,t){var n=!1,i=e.getPublic(n,"hex");i=Sp.from(i,"hex"),i={unused:0,data:i};var o;if(t.private){var a=e.getPrivate("hex");a=Sp.from(a,"hex"),o=Z2.encode({version:0,privateKeyAlgorithm:Ul[r],privateKey:rw.encode({version:tw,privateKey:a,parameters:zl[r],publicKey:i},"der")},"pem",{label:"PRIVATE KEY"}),a.fill(0)}else o=$2.encode({algorithm:Ul[r],PublicKey:i},"pem",{label:"PUBLIC KEY"});return o.slice(-1)!==`
`&&(o+=`
`),o}var aw=iw,j0=Qo,Ei=K0,sw=J0,uw=X0,cw=zh,fw=j0.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(cw),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),lw=j0.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),Cp={algorithm:[1,2,840,113549,1,1,1],parameters:[5,0]};function hw(r,e){if(typeof r.e!="string")throw new TypeError('Expected "jwk.e" to be a String');if(typeof r.n!="string")throw new TypeError('Expected "jwk.n" to be a String');if(e.private){if(typeof r.d!="string")throw new TypeError('Expected "jwk.d" to be a String');if(typeof r.p!="string")throw new TypeError('Expected "jwk.p" to be a String');if(typeof r.q!="string")throw new TypeError('Expected "jwk.q" to be a String');if(typeof r.dp!="string")throw new TypeError('Expected "jwk.dp" to be a String');if(typeof r.dq!="string")throw new TypeError('Expected "jwk.dq" to be a String');if(typeof r.qi!="string")throw new TypeError('Expected "jwk.qi" to be a String')}var t;return e.private?t=uw.encode({version:0,privateKeyAlgorithm:Cp,privateKey:fw.encode({version:0,modulus:Ei(r.n,!1),publicExponent:Ei(r.e,!1),privateExponent:Ei(r.d,!0),prime1:Ei(r.p,!0),prime2:Ei(r.q,!0),exponent1:Ei(r.dp,!0),exponent2:Ei(r.dq,!0),coefficient:Ei(r.qi,!0)},"der")},"pem",{label:"PRIVATE KEY"}):t=sw.encode({algorithm:Cp,PublicKey:{unused:0,data:lw.encode({modulus:Ei(r.n,!1),publicExponent:Ei(r.e,!1)},"der")}},"pem",{label:"PUBLIC KEY"}),t.slice(-1)!==`
`&&(t+=`
`),t}var dw=hw,pw=aw,gw=dw;function mw(r,e){if(typeof r!="object"||r===null)throw new TypeError('Expected "jwk" to be an Object');var t=r.kty;if(typeof t!="string")throw new TypeError('Expected "jwk.kty" to be a String');switch(e=e||{},e.private=e.private===!0,t){case"EC":return pw(r,e);case"RSA":return gw(r,e);default:throw new Error('Unsupported key type "'+t+'"')}}var vw=mw;function $0(r,e){return function(){return r.apply(e,arguments)}}const{toString:yw}=Object.prototype,{getPrototypeOf:Uh}=Object,sf=(r=>e=>{const t=yw.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ji=r=>(r=r.toLowerCase(),e=>sf(e)===r),uf=r=>e=>typeof e===r,{isArray:As}=Array,gu=uf("undefined");function _w(r){return r!==null&&!gu(r)&&r.constructor!==null&&!gu(r.constructor)&&Bn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Z0=ji("ArrayBuffer");function bw(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&Z0(r.buffer),e}const ww=uf("string"),Bn=uf("function"),Q0=uf("number"),cf=r=>r!==null&&typeof r=="object",xw=r=>r===!0||r===!1,Vu=r=>{if(sf(r)!=="object")return!1;const e=Uh(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ew=ji("Date"),Sw=ji("File"),Cw=ji("Blob"),Iw=ji("FileList"),Aw=r=>cf(r)&&Bn(r.pipe),Mw=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Bn(r.append)&&((e=sf(r))==="formdata"||e==="object"&&Bn(r.toString)&&r.toString()==="[object FormData]"))},Nw=ji("URLSearchParams"),Pw=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nu(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),As(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const o=t?Object.getOwnPropertyNames(r):Object.keys(r),a=o.length;let s;for(n=0;n<a;n++)s=o[n],e.call(null,r[s],s,r)}}function em(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const tm=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:uo)(),rm=r=>!gu(r)&&r!==tm;function ql(){const{caseless:r}=rm(this)&&this||{},e={},t=(n,i)=>{const o=r&&em(e,i)||i;Vu(e[o])&&Vu(n)?e[o]=ql(e[o],n):Vu(n)?e[o]=ql({},n):As(n)?e[o]=n.slice():e[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Nu(arguments[n],t);return e}const Lw=(r,e,t,{allOwnKeys:n}={})=>(Nu(e,(i,o)=>{t&&Bn(i)?r[o]=$0(i,t):r[o]=i},{allOwnKeys:n}),r),Rw=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Tw=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Ow=(r,e,t,n)=>{let i,o,a;const s={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),o=i.length;o-- >0;)a=i[o],(!n||n(a,r,e))&&!s[a]&&(e[a]=r[a],s[a]=!0);r=t!==!1&&Uh(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Dw=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},Bw=r=>{if(!r)return null;if(As(r))return r;let e=r.length;if(!Q0(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},kw=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Uh(Uint8Array)),Fw=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(r,o[0],o[1])}},zw=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},Uw=ji("HTMLFormElement"),qw=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),Ip=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Hw=ji("RegExp"),nm=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};Nu(t,(i,o)=>{let a;(a=e(i,o,r))!==!1&&(n[o]=a||i)}),Object.defineProperties(r,n)},Gw=r=>{nm(r,(e,t)=>{if(Bn(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(Bn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Vw=(r,e)=>{const t={},n=i=>{i.forEach(o=>{t[o]=!0})};return As(r)?n(r):n(String(r).split(e)),t},Kw=()=>{},Ww=(r,e)=>(r=+r,Number.isFinite(r)?r:e),al="abcdefghijklmnopqrstuvwxyz",Ap="0123456789",im={DIGIT:Ap,ALPHA:al,ALPHA_DIGIT:al+al.toUpperCase()+Ap},Jw=(r=16,e=im.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function Xw(r){return!!(r&&Bn(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const Yw=r=>{const e=new Array(10),t=(n,i)=>{if(cf(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const o=As(n)?[]:{};return Nu(n,(a,s)=>{const u=t(a,i+1);!gu(u)&&(o[s]=u)}),e[i]=void 0,o}}return n};return t(r,0)},jw=ji("AsyncFunction"),$w=r=>r&&(cf(r)||Bn(r))&&Bn(r.then)&&Bn(r.catch);var X={isArray:As,isArrayBuffer:Z0,isBuffer:_w,isFormData:Mw,isArrayBufferView:bw,isString:ww,isNumber:Q0,isBoolean:xw,isObject:cf,isPlainObject:Vu,isUndefined:gu,isDate:Ew,isFile:Sw,isBlob:Cw,isRegExp:Hw,isFunction:Bn,isStream:Aw,isURLSearchParams:Nw,isTypedArray:kw,isFileList:Iw,forEach:Nu,merge:ql,extend:Lw,trim:Pw,stripBOM:Rw,inherits:Tw,toFlatObject:Ow,kindOf:sf,kindOfTest:ji,endsWith:Dw,toArray:Bw,forEachEntry:Fw,matchAll:zw,isHTMLForm:Uw,hasOwnProperty:Ip,hasOwnProp:Ip,reduceDescriptors:nm,freezeMethods:Gw,toObjectSet:Vw,toCamelCase:qw,noop:Kw,toFiniteNumber:Ww,findKey:em,global:tm,isContextDefined:rm,ALPHABET:im,generateString:Jw,isSpecCompliantForm:Xw,toJSONObject:Yw,isAsyncFn:jw,isThenable:$w};function Oe(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i)}X.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const om=Oe.prototype,am={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{am[r]={value:r}});Object.defineProperties(Oe,am);Object.defineProperty(om,"isAxiosError",{value:!0});Oe.from=(r,e,t,n,i,o)=>{const a=Object.create(om);return X.toFlatObject(r,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Oe.call(a,r.message,e,t,n,i),a.cause=r,a.name=r.name,o&&Object.assign(a,o),a};var Zw=null;function Hl(r){return X.isPlainObject(r)||X.isArray(r)}function sm(r){return X.endsWith(r,"[]")?r.slice(0,-2):r}function Mp(r,e,t){return r?r.concat(e).map(function(i,o){return i=sm(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function Qw(r){return X.isArray(r)&&!r.some(Hl)}const ex=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function ff(r,e,t){if(!X.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=X.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,R){return!X.isUndefined(R[E])});const n=t.metaTokens,i=t.visitor||f,o=t.dots,a=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(X.isDate(_))return _.toISOString();if(!u&&X.isBlob(_))throw new Oe("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(_)||X.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function f(_,E,R){let D=_;if(_&&!R&&typeof _=="object"){if(X.endsWith(E,"{}"))E=n?E:E.slice(0,-2),_=JSON.stringify(_);else if(X.isArray(_)&&Qw(_)||(X.isFileList(_)||X.endsWith(E,"[]"))&&(D=X.toArray(_)))return E=sm(E),D.forEach(function(x,M){!(X.isUndefined(x)||x===null)&&e.append(a===!0?Mp([E],M,o):a===null?E:E+"[]",c(x))}),!1}return Hl(_)?!0:(e.append(Mp(R,E,o),c(_)),!1)}const l=[],p=Object.assign(ex,{defaultVisitor:f,convertValue:c,isVisitable:Hl});function b(_,E){if(!X.isUndefined(_)){if(l.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));l.push(_),X.forEach(_,function(D,m){(!(X.isUndefined(D)||D===null)&&i.call(e,D,X.isString(m)?m.trim():m,E,p))===!0&&b(D,E?E.concat(m):[m])}),l.pop()}}if(!X.isObject(r))throw new TypeError("data must be an object");return b(r),e}function Np(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function qh(r,e){this._pairs=[],r&&ff(r,this,e)}const um=qh.prototype;um.append=function(e,t){this._pairs.push([e,t])};um.toString=function(e){const t=e?function(n){return e.call(this,n,Np)}:Np;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function tx(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cm(r,e,t){if(!e)return r;const n=t&&t.encode||tx,i=t&&t.serialize;let o;if(i?o=i(e,t):o=X.isURLSearchParams(e)?e.toString():new qh(e,t).toString(n),o){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class rx{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(n){n!==null&&e(n)})}}var Pp=rx,fm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nx=typeof URLSearchParams<"u"?URLSearchParams:qh,ix=typeof FormData<"u"?FormData:null,ox=typeof Blob<"u"?Blob:null,ax={isBrowser:!0,classes:{URLSearchParams:nx,FormData:ix,Blob:ox},protocols:["http","https","file","blob","url","data"]};const lm=typeof window<"u"&&typeof document<"u",sx=(r=>lm&&["ReactNative","NativeScript","NS"].indexOf(r)<0)(typeof navigator<"u"&&navigator.product),ux=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var cx=Object.freeze({__proto__:null,hasBrowserEnv:lm,hasStandardBrowserWebWorkerEnv:ux,hasStandardBrowserEnv:sx}),Li={...cx,...ax};function fx(r,e){return ff(r,new Li.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,o){return Li.isNode&&X.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function lx(r){return X.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hx(r){const e={},t=Object.keys(r);let n;const i=t.length;let o;for(n=0;n<i;n++)o=t[n],e[o]=r[o];return e}function hm(r){function e(t,n,i,o){let a=t[o++];const s=Number.isFinite(+a),u=o>=t.length;return a=!a&&X.isArray(i)?i.length:a,u?(X.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!X.isObject(i[a]))&&(i[a]=[]),e(t,n,i[a],o)&&X.isArray(i[a])&&(i[a]=hx(i[a])),!s)}if(X.isFormData(r)&&X.isFunction(r.entries)){const t={};return X.forEachEntry(r,(n,i)=>{e(lx(n),i,t,0)}),t}return null}function dx(r,e,t){if(X.isString(r))try{return(e||JSON.parse)(r),X.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const Hh={transitional:fm,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,o=X.isObject(e);if(o&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return i&&i?JSON.stringify(hm(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fx(e,this.formSerializer).toString();if((s=X.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return ff(s?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),dx(e)):e}],transformResponse:[function(e){const t=this.transitional||Hh.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&X.isString(e)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?Oe.from(s,Oe.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Li.classes.FormData,Blob:Li.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],r=>{Hh.headers[r]={}});var Gh=Hh;const px=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var gx=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||e[t]&&px[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e};const Lp=Symbol("internals");function Bs(r){return r&&String(r).trim().toLowerCase()}function Ku(r){return r===!1||r==null?r:X.isArray(r)?r.map(Ku):String(r)}function mx(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const vx=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function sl(r,e,t,n,i){if(X.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!X.isString(e)){if(X.isString(n))return e.indexOf(n)!==-1;if(X.isRegExp(n))return n.test(e)}}function yx(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function _x(r,e){const t=X.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,o,a){return this[n].call(this,e,i,o,a)},configurable:!0})})}class lf{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function o(s,u,c){const f=Bs(u);if(!f)throw new Error("header name must be a non-empty string");const l=X.findKey(i,f);(!l||i[l]===void 0||c===!0||c===void 0&&i[l]!==!1)&&(i[l||u]=Ku(s))}const a=(s,u)=>X.forEach(s,(c,f)=>o(c,f,u));return X.isPlainObject(e)||e instanceof this.constructor?a(e,t):X.isString(e)&&(e=e.trim())&&!vx(e)?a(gx(e),t):e!=null&&o(t,e,n),this}get(e,t){if(e=Bs(e),e){const n=X.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return mx(i);if(X.isFunction(t))return t.call(this,i,n);if(X.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Bs(e),e){const n=X.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||sl(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function o(a){if(a=Bs(a),a){const s=X.findKey(n,a);s&&(!t||sl(n,n[s],s,t))&&(delete n[s],i=!0)}}return X.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const o=t[n];(!e||sl(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,n={};return X.forEach(this,(i,o)=>{const a=X.findKey(n,o);if(a){t[a]=Ku(i),delete t[o];return}const s=e?yx(o):String(o).trim();s!==o&&delete t[o],t[s]=Ku(i),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return X.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&X.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Lp]=this[Lp]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=Bs(a);n[s]||(_x(i,a),n[s]=!0)}return X.isArray(e)?e.forEach(o):o(e),this}}lf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(lf.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});X.freezeMethods(lf);var so=lf;function ul(r,e){const t=this||Gh,n=e||t,i=so.from(n.headers);let o=n.data;return X.forEach(r,function(s){o=s.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function dm(r){return!!(r&&r.__CANCEL__)}function Pu(r,e,t){Oe.call(this,r??"canceled",Oe.ERR_CANCELED,e,t),this.name="CanceledError"}X.inherits(Pu,Oe,{__CANCEL__:!0});function bx(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new Oe("Request failed with status code "+t.status,[Oe.ERR_BAD_REQUEST,Oe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var wx=Li.hasStandardBrowserEnv?function(){return{write:function(t,n,i,o,a,s){const u=[];u.push(t+"="+encodeURIComponent(n)),X.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),X.isString(o)&&u.push("path="+o),X.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function xx(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Ex(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function pm(r,e){return r&&!xx(e)?Ex(r,e):e}var Sx=Li.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(o){let a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){const s=X.isString(a)?i(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function Cx(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function Ix(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),f=n[o];a||(a=c),t[i]=u,n[i]=c;let l=o,p=0;for(;l!==i;)p+=t[l++],l=l%r;if(i=(i+1)%r,i===o&&(o=(o+1)%r),c-a<e)return;const b=f&&c-f;return b?Math.round(p*1e3/b):void 0}}function Rp(r,e){let t=0;const n=Ix(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-t,u=n(s),c=o<=a;t=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i};f[e?"download":"upload"]=!0,r(f)}}const Ax=typeof XMLHttpRequest<"u";var Mx=Ax&&function(r){return new Promise(function(t,n){let i=r.data;const o=so.from(r.headers).normalize(),a=r.responseType;let s;function u(){r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let c;if(X.isFormData(i)){if(Li.hasStandardBrowserEnv||Li.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((c=o.getContentType())!==!1){const[_,...E]=c?c.split(";").map(R=>R.trim()).filter(Boolean):[];o.setContentType([_||"multipart/form-data",...E].join("; "))}}let f=new XMLHttpRequest;if(r.auth){const _=r.auth.username||"",E=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";o.set("Authorization","Basic "+btoa(_+":"+E))}const l=pm(r.baseURL,r.url);f.open(r.method.toUpperCase(),cm(l,r.params,r.paramsSerializer),!0),f.timeout=r.timeout;function p(){if(!f)return;const _=so.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:_,config:r,request:f};bx(function(m){t(m),u()},function(m){n(m),u()},R),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(n(new Oe("Request aborted",Oe.ECONNABORTED,r,f)),f=null)},f.onerror=function(){n(new Oe("Network Error",Oe.ERR_NETWORK,r,f)),f=null},f.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const R=r.transitional||fm;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),n(new Oe(E,R.clarifyTimeoutError?Oe.ETIMEDOUT:Oe.ECONNABORTED,r,f)),f=null},Li.hasStandardBrowserEnv){const _=Sx(l)&&r.xsrfCookieName&&wx.read(r.xsrfCookieName);_&&o.set(r.xsrfHeaderName,_)}i===void 0&&o.setContentType(null),"setRequestHeader"in f&&X.forEach(o.toJSON(),function(E,R){f.setRequestHeader(R,E)}),X.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),a&&a!=="json"&&(f.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&f.addEventListener("progress",Rp(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",Rp(r.onUploadProgress)),(r.cancelToken||r.signal)&&(s=_=>{f&&(n(!_||_.type?new Pu(null,r,f):_),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const b=Cx(l);if(b&&Li.protocols.indexOf(b)===-1){n(new Oe("Unsupported protocol "+b+":",Oe.ERR_BAD_REQUEST,r));return}f.send(i||null)})};const Gl={http:Zw,xhr:Mx};X.forEach(Gl,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Tp=r=>`- ${r}`,Nx=r=>X.isFunction(r)||r===null||r===!1;var gm={getAdapter:r=>{r=X.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let o=0;o<e;o++){t=r[o];let a;if(n=t,!Nx(t)&&(n=Gl[(a=String(t)).toLowerCase()],n===void 0))throw new Oe(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Tp).join(`
`):" "+Tp(o[0]):"as no adapter specified";throw new Oe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Gl};function cl(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Pu(null,r)}function Op(r){return cl(r),r.headers=so.from(r.headers),r.data=ul.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),gm.getAdapter(r.adapter||Gh.adapter)(r).then(function(n){return cl(r),n.data=ul.call(r,r.transformResponse,n),n.headers=so.from(n.headers),n},function(n){return dm(n)||(cl(r),n&&n.response&&(n.response.data=ul.call(r,r.transformResponse,n.response),n.response.headers=so.from(n.response.headers))),Promise.reject(n)})}const Dp=r=>r instanceof so?r.toJSON():r;function ps(r,e){e=e||{};const t={};function n(c,f,l){return X.isPlainObject(c)&&X.isPlainObject(f)?X.merge.call({caseless:l},c,f):X.isPlainObject(f)?X.merge({},f):X.isArray(f)?f.slice():f}function i(c,f,l){if(X.isUndefined(f)){if(!X.isUndefined(c))return n(void 0,c,l)}else return n(c,f,l)}function o(c,f){if(!X.isUndefined(f))return n(void 0,f)}function a(c,f){if(X.isUndefined(f)){if(!X.isUndefined(c))return n(void 0,c)}else return n(void 0,f)}function s(c,f,l){if(l in e)return n(c,f);if(l in r)return n(void 0,c)}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,f)=>i(Dp(c),Dp(f),!0)};return X.forEach(Object.keys(Object.assign({},r,e)),function(f){const l=u[f]||i,p=l(r[f],e[f],f);X.isUndefined(p)&&l!==s||(t[f]=p)}),t}const mm="1.6.1",Vh={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Vh[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const Bp={};Vh.transitional=function(e,t,n){function i(o,a){return"[Axios v"+mm+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(e===!1)throw new Oe(i(a," has been removed"+(t?" in "+t:"")),Oe.ERR_DEPRECATED);return t&&!Bp[a]&&(Bp[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,s):!0}};function Px(r,e,t){if(typeof r!="object")throw new Oe("options must be an object",Oe.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const o=n[i],a=e[o];if(a){const s=r[o],u=s===void 0||a(s,o,r);if(u!==!0)throw new Oe("option "+o+" must be "+u,Oe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Oe("Unknown option "+o,Oe.ERR_BAD_OPTION)}}var Vl={assertOptions:Px,validators:Vh};const Co=Vl.validators;class _c{constructor(e){this.defaults=e,this.interceptors={request:new Pp,response:new Pp}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ps(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:o}=t;n!==void 0&&Vl.assertOptions(n,{silentJSONParsing:Co.transitional(Co.boolean),forcedJSONParsing:Co.transitional(Co.boolean),clarifyTimeoutError:Co.transitional(Co.boolean)},!1),i!=null&&(X.isFunction(i)?t.paramsSerializer={serialize:i}:Vl.assertOptions(i,{encode:Co.function,serialize:Co.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&X.merge(o.common,o[t.method]);o&&X.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),t.headers=so.concat(a,o);const s=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(u=u&&E.synchronous,s.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let f,l=0,p;if(!u){const _=[Op.bind(this),void 0];for(_.unshift.apply(_,s),_.push.apply(_,c),p=_.length,f=Promise.resolve(t);l<p;)f=f.then(_[l++],_[l++]);return f}p=s.length;let b=t;for(l=0;l<p;){const _=s[l++],E=s[l++];try{b=_(b)}catch(R){E.call(this,R);break}}try{f=Op.call(this,b)}catch(_){return Promise.reject(_)}for(l=0,p=c.length;l<p;)f=f.then(c[l++],c[l++]);return f}getUri(e){e=ps(this.defaults,e);const t=pm(e.baseURL,e.url);return cm(t,e.params,e.paramsSerializer)}}X.forEach(["delete","get","head","options"],function(e){_c.prototype[e]=function(t,n){return this.request(ps(n||{},{method:e,url:t,data:(n||{}).data}))}});X.forEach(["post","put","patch"],function(e){function t(n){return function(o,a,s){return this.request(ps(s||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}_c.prototype[e]=t(),_c.prototype[e+"Form"]=t(!0)});var Wu=_c;class Kh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},e(function(o,a,s){n.reason||(n.reason=new Pu(o,a,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Kh(function(i){e=i}),cancel:e}}}var Lx=Kh;function Rx(r){return function(t){return r.apply(null,t)}}function Tx(r){return X.isObject(r)&&r.isAxiosError===!0}const Kl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kl).forEach(([r,e])=>{Kl[e]=r});var Ox=Kl;function vm(r){const e=new Wu(r),t=$0(Wu.prototype.request,e);return X.extend(t,Wu.prototype,e,{allOwnKeys:!0}),X.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return vm(ps(r,i))},t}const Xt=vm(Gh);Xt.Axios=Wu;Xt.CanceledError=Pu;Xt.CancelToken=Lx;Xt.isCancel=dm;Xt.VERSION=mm;Xt.toFormData=ff;Xt.AxiosError=Oe;Xt.Cancel=Xt.CanceledError;Xt.all=function(e){return Promise.all(e)};Xt.spread=Rx;Xt.isAxiosError=Tx;Xt.mergeConfig=ps;Xt.AxiosHeaders=so;Xt.formToJSON=r=>hm(X.isHTMLForm(r)?new FormData(r):r);Xt.getAdapter=gm.getAdapter;Xt.HttpStatusCode=Ox;Xt.default=Xt;var Dx=Xt;const be=crypto,rn=r=>r instanceof CryptoKey,Bx=async(r,e)=>{const t=`SHA-${r.slice(-3)}`;return new Uint8Array(await be.subtle.digest(t,e))},ym=Bx,gt=new TextEncoder,Yn=new TextDecoder,bc=2**32;function $i(...r){const e=r.reduce((i,{length:o})=>i+o,0),t=new Uint8Array(e);let n=0;return r.forEach(i=>{t.set(i,n),n+=i.length}),t}function kx(r,e){return $i(gt.encode(r),new Uint8Array([0]),e)}function Wl(r,e,t){if(e<0||e>=bc)throw new RangeError(`value must be >= 0 and <= ${bc-1}. Received ${e}`);r.set([e>>>24,e>>>16,e>>>8,e&255],t)}function _m(r){const e=Math.floor(r/bc),t=r%bc,n=new Uint8Array(8);return Wl(n,e,0),Wl(n,t,4),n}function Wh(r){const e=new Uint8Array(4);return Wl(e,r),e}function fl(r){return $i(Wh(r.length),r)}async function Fx(r,e,t){const n=Math.ceil((e>>3)/32),i=new Uint8Array(n*32);for(let o=0;o<n;o++){const a=new Uint8Array(4+r.length+t.length);a.set(Wh(o+1)),a.set(r,4),a.set(t,4+r.length),i.set(await ym("sha256",a),o*32)}return i.slice(0,e>>3)}const Jh=r=>{let e=r;typeof e=="string"&&(e=gt.encode(e));const t=32768,n=[];for(let i=0;i<e.length;i+=t)n.push(String.fromCharCode.apply(null,e.subarray(i,i+t)));return btoa(n.join(""))},qt=r=>Jh(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),bm=r=>{const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},jt=r=>{let e=r;e instanceof Uint8Array&&(e=Yn.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return bm(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Ir extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}class an extends Ir{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=n}}class Jl extends Ir{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=n}}class wc extends Ir{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Ie extends Ir{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class mu extends Ir{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class se extends Ir{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class Ge extends Ir{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Jr extends Ir{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class wm extends Ir{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class xc extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class Xh extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class xm extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class Em extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class Yh extends Ir{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const zx=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:wc,JOSEError:Ir,JOSENotSupported:Ie,JWEDecryptionFailed:mu,JWEInvalid:se,JWKInvalid:wm,JWKSInvalid:xc,JWKSMultipleMatchingKeys:xm,JWKSNoMatchingKey:Xh,JWKSTimeout:Em,JWSInvalid:Ge,JWSSignatureVerificationFailed:Yh,JWTClaimValidationFailed:an,JWTExpired:Jl,JWTInvalid:Jr},Symbol.toStringTag,{value:"Module"})),hf=be.getRandomValues.bind(be);function Sm(r){switch(r){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Ie(`Unsupported JWE Algorithm: ${r}`)}}const Cm=r=>hf(new Uint8Array(Sm(r)>>3)),Ux=(r,e)=>{if(e.length<<3!==Sm(r))throw new se("Invalid Initialization Vector length")},Im=Ux,qx=(r,e)=>{const t=r.byteLength<<3;if(t!==e)throw new se(`Invalid Content Encryption Key length. Expected ${e} bits, got ${t} bits`)},Ec=qx,Hx=(r,e)=>{if(!(r instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(r.length!==e.length)throw new TypeError("Input buffers must have the same length");const t=r.length;let n=0,i=-1;for(;++i<t;)n|=r[i]^e[i];return n===0},Gx=Hx;function Ms(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function ir(r,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${r}`)}function to(r,e){return r.name===e}function Ju(r){return parseInt(r.name.slice(4),10)}function Vx(r){switch(r){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Am(r,e){if(e.length&&!e.some(t=>r.usages.includes(t))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const n=e.pop();t+=`one of ${e.join(", ")}, or ${n}.`}else e.length===2?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}function Kx(r,e,...t){switch(e){case"HS256":case"HS384":case"HS512":{if(!to(r.algorithm,"HMAC"))throw ir("HMAC");const n=parseInt(e.slice(2),10);if(Ju(r.algorithm.hash)!==n)throw ir(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!to(r.algorithm,"RSASSA-PKCS1-v1_5"))throw ir("RSASSA-PKCS1-v1_5");const n=parseInt(e.slice(2),10);if(Ju(r.algorithm.hash)!==n)throw ir(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!to(r.algorithm,"RSA-PSS"))throw ir("RSA-PSS");const n=parseInt(e.slice(2),10);if(Ju(r.algorithm.hash)!==n)throw ir(`SHA-${n}`,"algorithm.hash");break}case(Ms()&&"EdDSA"):{if(!to(r.algorithm,"NODE-ED25519"))throw ir("NODE-ED25519");break}case"EdDSA":{if(r.algorithm.name!=="Ed25519"&&r.algorithm.name!=="Ed448")throw ir("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!to(r.algorithm,"ECDSA"))throw ir("ECDSA");const n=Vx(e);if(r.algorithm.namedCurve!==n)throw ir(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Am(r,t)}function Xo(r,e,...t){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!to(r.algorithm,"AES-GCM"))throw ir("AES-GCM");const n=parseInt(e.slice(1,4),10);if(r.algorithm.length!==n)throw ir(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!to(r.algorithm,"AES-KW"))throw ir("AES-KW");const n=parseInt(e.slice(1,4),10);if(r.algorithm.length!==n)throw ir(n,"algorithm.length");break}case"ECDH":{switch(r.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw ir("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!to(r.algorithm,"PBKDF2"))throw ir("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!to(r.algorithm,"RSA-OAEP"))throw ir("RSA-OAEP");const n=parseInt(e.slice(9),10)||1;if(Ju(r.algorithm.hash)!==n)throw ir(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Am(r,t)}function Mm(r,e,...t){if(t.length>2){const n=t.pop();r+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of type ${t[0]} or ${t[1]}.`:r+=`of type ${t[0]}.`;return e==null?r+=` Received ${e}`:typeof e=="function"&&e.name?r+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(r+=` Received an instance of ${e.constructor.name}`),r}const Or=(r,...e)=>Mm("Key must be ",r,...e);function Nm(r,e,...t){return Mm(`Key for the ${r} algorithm must be `,e,...t)}const Pm=r=>rn(r),dt=["CryptoKey"];async function Wx(r,e,t,n,i,o){if(!(e instanceof Uint8Array))throw new TypeError(Or(e,"Uint8Array"));const a=parseInt(r.slice(1,4),10),s=await be.subtle.importKey("raw",e.subarray(a>>3),"AES-CBC",!1,["decrypt"]),u=await be.subtle.importKey("raw",e.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=$i(o,n,t,_m(o.length<<3)),f=new Uint8Array((await be.subtle.sign("HMAC",u,c)).slice(0,a>>3));let l;try{l=Gx(i,f)}catch{}if(!l)throw new mu;let p;try{p=new Uint8Array(await be.subtle.decrypt({iv:n,name:"AES-CBC"},s,t))}catch{}if(!p)throw new mu;return p}async function Jx(r,e,t,n,i,o){let a;e instanceof Uint8Array?a=await be.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(Xo(e,r,"decrypt"),a=e);try{return new Uint8Array(await be.subtle.decrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},a,$i(t,i)))}catch{throw new mu}}const Xx=async(r,e,t,n,i,o)=>{if(!rn(e)&&!(e instanceof Uint8Array))throw new TypeError(Or(e,...dt,"Uint8Array"));switch(Im(r,n),r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&Ec(e,parseInt(r.slice(-3),10)),Wx(r,e,t,n,i,o);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&Ec(e,parseInt(r.slice(1,4),10)),Jx(r,e,t,n,i,o);default:throw new Ie("Unsupported JWE Content Encryption Algorithm")}},Lm=Xx,Yx=async()=>{throw new Ie('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},jx=async()=>{throw new Ie('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},$x=(...r)=>{const e=r.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const n of e){const i=Object.keys(n);if(!t||t.size===0){t=new Set(i);continue}for(const o of i){if(t.has(o))return!1;t.add(o)}}return!0},Lu=$x;function Zx(r){return typeof r=="object"&&r!==null}function lr(r){if(!Zx(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}const Qx=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]],df=Qx;function Rm(r,e){if(r.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function Tm(r,e,t){if(rn(r))return Xo(r,e,t),r;if(r instanceof Uint8Array)return be.subtle.importKey("raw",r,"AES-KW",!0,[t]);throw new TypeError(Or(r,...dt,"Uint8Array"))}const Xl=async(r,e,t)=>{const n=await Tm(e,r,"wrapKey");Rm(n,r);const i=await be.subtle.importKey("raw",t,...df);return new Uint8Array(await be.subtle.wrapKey("raw",i,n,"AES-KW"))},Yl=async(r,e,t)=>{const n=await Tm(e,r,"unwrapKey");Rm(n,r);const i=await be.subtle.unwrapKey("raw",t,n,"AES-KW",...df);return new Uint8Array(await be.subtle.exportKey("raw",i))};async function Om(r,e,t,n,i=new Uint8Array(0),o=new Uint8Array(0)){if(!rn(r))throw new TypeError(Or(r,...dt));if(Xo(r,"ECDH"),!rn(e))throw new TypeError(Or(e,...dt));Xo(e,"ECDH","deriveBits");const a=$i(fl(gt.encode(t)),fl(i),fl(o),Wh(n));let s;r.algorithm.name==="X25519"?s=256:r.algorithm.name==="X448"?s=448:s=Math.ceil(parseInt(r.algorithm.namedCurve.substr(-3),10)/8)<<3;const u=new Uint8Array(await be.subtle.deriveBits({name:r.algorithm.name,public:r},e,s));return Fx(u,n,a)}async function eE(r){if(!rn(r))throw new TypeError(Or(r,...dt));return be.subtle.generateKey(r.algorithm,!0,["deriveBits"])}function Dm(r){if(!rn(r))throw new TypeError(Or(r,...dt));return["P-256","P-384","P-521"].includes(r.algorithm.namedCurve)||r.algorithm.name==="X25519"||r.algorithm.name==="X448"}function tE(r){if(!(r instanceof Uint8Array)||r.length<8)throw new se("PBES2 Salt Input must be 8 or more octets")}function rE(r,e){if(r instanceof Uint8Array)return be.subtle.importKey("raw",r,"PBKDF2",!1,["deriveBits"]);if(rn(r))return Xo(r,e,"deriveBits","deriveKey"),r;throw new TypeError(Or(r,...dt,"Uint8Array"))}async function Bm(r,e,t,n){tE(r);const i=kx(e,r),o=parseInt(e.slice(13,16),10),a={hash:`SHA-${e.slice(8,11)}`,iterations:t,name:"PBKDF2",salt:i},s={length:o,name:"AES-KW"},u=await rE(n,e);if(u.usages.includes("deriveBits"))return new Uint8Array(await be.subtle.deriveBits(a,u,o));if(u.usages.includes("deriveKey"))return be.subtle.deriveKey(a,u,s,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const nE=async(r,e,t,n=2048,i=hf(new Uint8Array(16)))=>{const o=await Bm(i,r,n,e);return{encryptedKey:await Xl(r.slice(-6),o,t),p2c:n,p2s:qt(i)}},iE=async(r,e,t,n,i)=>{const o=await Bm(i,r,n,e);return Yl(r.slice(-6),o,t)};function Sc(r){switch(r){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Ie(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}const pf=(r,e)=>{if(r.startsWith("RS")||r.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${r} requires key modulusLength to be 2048 bits or larger`)}},oE=async(r,e,t)=>{if(!rn(e))throw new TypeError(Or(e,...dt));if(Xo(e,r,"encrypt","wrapKey"),pf(r,e),e.usages.includes("encrypt"))return new Uint8Array(await be.subtle.encrypt(Sc(r),e,t));if(e.usages.includes("wrapKey")){const n=await be.subtle.importKey("raw",t,...df);return new Uint8Array(await be.subtle.wrapKey("raw",n,e,Sc(r)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},aE=async(r,e,t)=>{if(!rn(e))throw new TypeError(Or(e,...dt));if(Xo(e,r,"decrypt","unwrapKey"),pf(r,e),e.usages.includes("decrypt"))return new Uint8Array(await be.subtle.decrypt(Sc(r),e,t));if(e.usages.includes("unwrapKey")){const n=await be.subtle.unwrapKey("raw",t,e,Sc(r),...df);return new Uint8Array(await be.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function jh(r){switch(r){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Ie(`Unsupported JWE Algorithm: ${r}`)}}const oa=r=>hf(new Uint8Array(jh(r)>>3)),km=(r,e)=>{const t=(r.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${e}-----
${t}
-----END ${e}-----`},Fm=async(r,e,t)=>{if(!rn(t))throw new TypeError(Or(t,...dt));if(!t.extractable)throw new TypeError("CryptoKey is not extractable");if(t.type!==r)throw new TypeError(`key is not a ${r} key`);return km(Jh(new Uint8Array(await be.subtle.exportKey(e,t))),`${r.toUpperCase()} KEY`)},sE=r=>Fm("public","spki",r),uE=r=>Fm("private","pkcs8",r),Ao=(r,e,t=0)=>{t===0&&(e.unshift(e.length),e.unshift(6));let n=r.indexOf(e[0],t);if(n===-1)return!1;const i=r.subarray(n,n+e.length);return i.length!==e.length?!1:i.every((o,a)=>o===e[a])||Ao(r,e,n+1)},ll=r=>{switch(!0){case Ao(r,[42,134,72,206,61,3,1,7]):return"P-256";case Ao(r,[43,129,4,0,34]):return"P-384";case Ao(r,[43,129,4,0,35]):return"P-521";case Ao(r,[43,101,110]):return"X25519";case Ao(r,[43,101,111]):return"X448";case Ao(r,[43,101,112]):return"Ed25519";case Ao(r,[43,101,113]):return"Ed448";default:throw new Ie("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},zm=async(r,e,t,n,i)=>{var o;let a,s;const u=new Uint8Array(atob(t.replace(r,"")).split("").map(f=>f.charCodeAt(0))),c=e==="spki";switch(n){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},s=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},s=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},s=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},s=c?["verify"]:["sign"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},s=c?["verify"]:["sign"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},s=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const f=ll(u);a=f.startsWith("P-")?{name:"ECDH",namedCurve:f}:{name:f},s=c?[]:["deriveBits"];break}case(Ms()&&"EdDSA"):{const f=ll(u).toUpperCase();a={name:`NODE-${f}`,namedCurve:`NODE-${f}`},s=c?["verify"]:["sign"];break}case"EdDSA":a={name:ll(u)},s=c?["verify"]:["sign"];break;default:throw new Ie('Invalid or unsupported "alg" (Algorithm) value')}return be.subtle.importKey(e,u,a,(o=i==null?void 0:i.extractable)!==null&&o!==void 0?o:!1,s)},cE=(r,e,t)=>zm(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",r,e,t),Um=(r,e,t)=>zm(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",r,e,t);function fE(r){let e,t;switch(r.kty){case"oct":{switch(r.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${r.alg.slice(-3)}`},t=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Ie(`${r.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},t=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},t=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},t=["deriveBits"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(r.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(r.alg.slice(-3),10)||1}`},t=r.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(r.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=r.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=r.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case(Ms()&&"OKP"):if(r.alg!=="EdDSA")throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(r.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},t=r.d?["sign"]:["verify"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":{switch(r.alg){case"EdDSA":e={name:r.crv},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Ie('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const lE=async r=>{var e,t;const{algorithm:n,keyUsages:i}=fE(r),o=[n,(e=r.ext)!==null&&e!==void 0?e:!1,(t=r.key_ops)!==null&&t!==void 0?t:i];if(n.name==="PBKDF2")return be.subtle.importKey("raw",jt(r.k),...o);const a={...r};return delete a.alg,delete a.use,be.subtle.importKey("jwk",a,...o)},kp=lE;function Fp(r){let e=[],t=0;for(;t<r.length;){let n=qm(r.subarray(t));e.push(n),t+=n.byteLength}return e}function qm(r){let e=0,t=r[0]&31;if(e++,t===31){for(t=0;r[e]>=128;)t=t*128+r[e]-128,e++;t=t*128+r[e]-128,e++}let n=0;if(r[e]<128)n=r[e],e++;else if(n===128){for(n=0;r[e+n]!==0||r[e+n+1]!==0;){if(n>r.byteLength)throw new TypeError("invalid indefinite form length");n++}const o=e+n+2;return{byteLength:o,contents:r.subarray(e,e+n),raw:r.subarray(0,o)}}else{let o=r[e]&127;e++,n=0;for(let a=0;a<o;a++)n=n*256+r[e],e++}const i=e+n;return{byteLength:i,contents:r.subarray(e,i),raw:r.subarray(0,i)}}function hE(r){const e=Fp(Fp(qm(r).contents)[0].contents);return Jh(e[e[0].raw[0]===160?6:5].raw)}function dE(r){const e=r.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),t=bm(e);return km(hE(t),"PUBLIC KEY")}async function pE(r,e,t){if(typeof r!="string"||r.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return Um(r,e,t)}async function gE(r,e,t){if(typeof r!="string"||r.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');let n;try{n=dE(r)}catch(i){throw new TypeError("failed to parse the X.509 certificate",{cause:i})}return Um(n,e,t)}async function mE(r,e,t){if(typeof r!="string"||r.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return cE(r,e,t)}async function gf(r,e,t){var n;if(!lr(r))throw new TypeError("JWK must be an object");if(e||(e=r.alg),typeof e!="string"||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(r.kty){case"oct":if(typeof r.k!="string"||!r.k)throw new TypeError('missing "k" (Key Value) Parameter value');return t??(t=r.ext!==!0),t?kp({...r,alg:e,ext:(n=r.ext)!==null&&n!==void 0?n:!1}):jt(r.k);case"RSA":if(r.oth!==void 0)throw new Ie('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return kp({...r,alg:e});default:throw new Ie('Unsupported "kty" (Key Type) Parameter value')}}const vE=(r,e)=>{if(!(e instanceof Uint8Array)){if(!Pm(e))throw new TypeError(Nm(r,e,...dt,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${dt.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},yE=(r,e,t)=>{if(!Pm(e))throw new TypeError(Nm(r,e,...dt));if(e.type==="secret")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(t==="sign"&&e.type==="public")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(t==="decrypt"&&e.type==="public")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&t==="verify"&&e.type==="private")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&t==="encrypt"&&e.type==="private")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},_E=(r,e,t)=>{r.startsWith("HS")||r==="dir"||r.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(r)?vE(r,e):yE(r,e,t)},mf=_E;async function bE(r,e,t,n,i){if(!(t instanceof Uint8Array))throw new TypeError(Or(t,"Uint8Array"));const o=parseInt(r.slice(1,4),10),a=await be.subtle.importKey("raw",t.subarray(o>>3),"AES-CBC",!1,["encrypt"]),s=await be.subtle.importKey("raw",t.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),u=new Uint8Array(await be.subtle.encrypt({iv:n,name:"AES-CBC"},a,e)),c=$i(i,n,u,_m(i.length<<3)),f=new Uint8Array((await be.subtle.sign("HMAC",s,c)).slice(0,o>>3));return{ciphertext:u,tag:f}}async function wE(r,e,t,n,i){let o;t instanceof Uint8Array?o=await be.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]):(Xo(t,r,"encrypt"),o=t);const a=new Uint8Array(await be.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},o,e)),s=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:s}}const xE=async(r,e,t,n,i)=>{if(!rn(t)&&!(t instanceof Uint8Array))throw new TypeError(Or(t,...dt,"Uint8Array"));switch(Im(r,n),r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Ec(t,parseInt(r.slice(-3),10)),bE(r,e,t,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Ec(t,parseInt(r.slice(1,4),10)),wE(r,e,t,n,i);default:throw new Ie("Unsupported JWE Content Encryption Algorithm")}},jl=xE;async function EE(r,e,t,n){const i=r.slice(0,7);n||(n=Cm(i));const{ciphertext:o,tag:a}=await jl(i,t,e,n,new Uint8Array(0));return{encryptedKey:o,iv:qt(n),tag:qt(a)}}async function SE(r,e,t,n,i){const o=r.slice(0,7);return Lm(o,e,t,n,i,new Uint8Array(0))}async function CE(r,e,t,n,i){switch(mf(r,e,"decrypt"),r){case"dir":{if(t!==void 0)throw new se("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(t!==void 0)throw new se("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!lr(n.epk))throw new se('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Dm(e))throw new Ie("ECDH with the provided key is not allowed or not supported by your javascript runtime");const o=await gf(n.epk,r);let a,s;if(n.apu!==void 0){if(typeof n.apu!="string")throw new se('JOSE Header "apu" (Agreement PartyUInfo) invalid');a=jt(n.apu)}if(n.apv!==void 0){if(typeof n.apv!="string")throw new se('JOSE Header "apv" (Agreement PartyVInfo) invalid');s=jt(n.apv)}const u=await Om(o,e,r==="ECDH-ES"?n.enc:r,r==="ECDH-ES"?jh(n.enc):parseInt(r.slice(-5,-2),10),a,s);if(r==="ECDH-ES")return u;if(t===void 0)throw new se("JWE Encrypted Key missing");return Yl(r.slice(-6),u,t)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(t===void 0)throw new se("JWE Encrypted Key missing");return aE(r,e,t)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(t===void 0)throw new se("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new se('JOSE Header "p2c" (PBES2 Count) missing or invalid');const o=(i==null?void 0:i.maxPBES2Count)||1e4;if(n.p2c>o)throw new se('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new se('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return iE(r,e,t,n.p2c,jt(n.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(t===void 0)throw new se("JWE Encrypted Key missing");return Yl(r,e,t)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(t===void 0)throw new se("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new se('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new se('JOSE Header "tag" (Authentication Tag) missing or invalid');const o=jt(n.iv),a=jt(n.tag);return SE(r,e,t,o,a)}default:throw new Ie('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Ru(r,e,t,n,i){if(i.crit!==void 0&&n.crit===void 0)throw new r('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(a=>typeof a!="string"||a.length===0))throw new r('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;t!==void 0?o=new Map([...Object.entries(t),...e.entries()]):o=e;for(const a of n.crit){if(!o.has(a))throw new Ie(`Extension Header Parameter "${a}" is not recognized`);if(i[a]===void 0)throw new r(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&n[a]===void 0)throw new r(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}const IE=(r,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(t=>typeof t!="string")))throw new TypeError(`"${r}" option must be an array of strings`);if(e)return new Set(e)},$l=IE;async function $h(r,e,t){var n;if(!lr(r))throw new se("Flattened JWE must be an object");if(r.protected===void 0&&r.header===void 0&&r.unprotected===void 0)throw new se("JOSE Header missing");if(typeof r.iv!="string")throw new se("JWE Initialization Vector missing or incorrect type");if(typeof r.ciphertext!="string")throw new se("JWE Ciphertext missing or incorrect type");if(typeof r.tag!="string")throw new se("JWE Authentication Tag missing or incorrect type");if(r.protected!==void 0&&typeof r.protected!="string")throw new se("JWE Protected Header incorrect type");if(r.encrypted_key!==void 0&&typeof r.encrypted_key!="string")throw new se("JWE Encrypted Key incorrect type");if(r.aad!==void 0&&typeof r.aad!="string")throw new se("JWE AAD incorrect type");if(r.header!==void 0&&!lr(r.header))throw new se("JWE Shared Unprotected Header incorrect type");if(r.unprotected!==void 0&&!lr(r.unprotected))throw new se("JWE Per-Recipient Unprotected Header incorrect type");let i;if(r.protected)try{const x=jt(r.protected);i=JSON.parse(Yn.decode(x))}catch{throw new se("JWE Protected Header is invalid")}if(!Lu(i,r.header,r.unprotected))throw new se("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const o={...i,...r.header,...r.unprotected};if(Ru(se,new Map,t==null?void 0:t.crit,i,o),o.zip!==void 0){if(!i||!i.zip)throw new se('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(o.zip!=="DEF")throw new Ie('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:a,enc:s}=o;if(typeof a!="string"||!a)throw new se("missing JWE Algorithm (alg) in JWE Header");if(typeof s!="string"||!s)throw new se("missing JWE Encryption Algorithm (enc) in JWE Header");const u=t&&$l("keyManagementAlgorithms",t.keyManagementAlgorithms),c=t&&$l("contentEncryptionAlgorithms",t.contentEncryptionAlgorithms);if(u&&!u.has(a))throw new wc('"alg" (Algorithm) Header Parameter not allowed');if(c&&!c.has(s))throw new wc('"enc" (Encryption Algorithm) Header Parameter not allowed');let f;r.encrypted_key!==void 0&&(f=jt(r.encrypted_key));let l=!1;typeof e=="function"&&(e=await e(i,r),l=!0);let p;try{p=await CE(a,e,f,o,t)}catch(x){if(x instanceof TypeError||x instanceof se||x instanceof Ie)throw x;p=oa(s)}const b=jt(r.iv),_=jt(r.tag),E=gt.encode((n=r.protected)!==null&&n!==void 0?n:"");let R;r.aad!==void 0?R=$i(E,gt.encode("."),gt.encode(r.aad)):R=E;let D=await Lm(s,p,jt(r.ciphertext),b,_,R);o.zip==="DEF"&&(D=await((t==null?void 0:t.inflateRaw)||Yx)(D));const m={plaintext:D};return r.protected!==void 0&&(m.protectedHeader=i),r.aad!==void 0&&(m.additionalAuthenticatedData=jt(r.aad)),r.unprotected!==void 0&&(m.sharedUnprotectedHeader=r.unprotected),r.header!==void 0&&(m.unprotectedHeader=r.header),l?{...m,key:e}:m}async function Hm(r,e,t){if(r instanceof Uint8Array&&(r=Yn.decode(r)),typeof r!="string")throw new se("Compact JWE must be a string or Uint8Array");const{0:n,1:i,2:o,3:a,4:s,length:u}=r.split(".");if(u!==5)throw new se("Invalid Compact JWE");const c=await $h({ciphertext:a,iv:o||void 0,protected:n||void 0,tag:s||void 0,encrypted_key:i||void 0},e,t),f={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return typeof e=="function"?{...f,key:c.key}:f}async function AE(r,e,t){if(!lr(r))throw new se("General JWE must be an object");if(!Array.isArray(r.recipients)||!r.recipients.every(lr))throw new se("JWE Recipients missing or incorrect type");if(!r.recipients.length)throw new se("JWE Recipients has no members");for(const n of r.recipients)try{return await $h({aad:r.aad,ciphertext:r.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:r.iv,protected:r.protected,tag:r.tag,unprotected:r.unprotected},e,t)}catch{}throw new mu}const ME=async r=>{if(r instanceof Uint8Array)return{kty:"oct",k:qt(r)};if(!rn(r))throw new TypeError(Or(r,...dt,"Uint8Array"));if(!r.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:t,alg:n,use:i,...o}=await be.subtle.exportKey("jwk",r);return o},NE=ME;async function PE(r){return sE(r)}async function LE(r){return uE(r)}async function Gm(r){return NE(r)}async function Vm(r,e,t,n,i={}){let o,a,s;switch(mf(r,t,"encrypt"),r){case"dir":{s=t;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Dm(t))throw new Ie("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:u,apv:c}=i;let{epk:f}=i;f||(f=(await eE(t)).privateKey);const{x:l,y:p,crv:b,kty:_}=await Gm(f),E=await Om(t,f,r==="ECDH-ES"?e:r,r==="ECDH-ES"?jh(e):parseInt(r.slice(-5,-2),10),u,c);if(a={epk:{x:l,crv:b,kty:_}},_==="EC"&&(a.epk.y=p),u&&(a.apu=qt(u)),c&&(a.apv=qt(c)),r==="ECDH-ES"){s=E;break}s=n||oa(e);const R=r.slice(-6);o=await Xl(R,E,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{s=n||oa(e),o=await oE(r,t,s);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||oa(e);const{p2c:u,p2s:c}=i;({encryptedKey:o,...a}=await nE(r,t,s,u,c));break}case"A128KW":case"A192KW":case"A256KW":{s=n||oa(e),o=await Xl(r,t,s);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||oa(e);const{iv:u}=i;({encryptedKey:o,...a}=await EE(r,t,s,u));break}default:throw new Ie('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:o,parameters:a}}const Km=Symbol();class Cc{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new se("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Lu(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new se("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Ru(se,new Map,t==null?void 0:t.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new se('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new Ie('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:i,enc:o}=n;if(typeof i!="string"||!i)throw new se('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof o!="string"||!o)throw new se('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let a;if(i==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(i==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let s;{let _;({cek:s,encryptedKey:a,parameters:_}=await Vm(i,o,e,this._cek,this._keyManagementParameters)),_&&(t&&Km in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,..._}:this.setUnprotectedHeader(_):this._protectedHeader?this._protectedHeader={...this._protectedHeader,..._}:this.setProtectedHeader(_))}this._iv||(this._iv=Cm(o));let u,c,f;this._protectedHeader?c=gt.encode(qt(JSON.stringify(this._protectedHeader))):c=gt.encode(""),this._aad?(f=qt(this._aad),u=$i(c,gt.encode("."),gt.encode(f))):u=c;let l,p;if(n.zip==="DEF"){const _=await((t==null?void 0:t.deflateRaw)||jx)(this._plaintext);({ciphertext:l,tag:p}=await jl(o,_,s,this._iv,u))}else({ciphertext:l,tag:p}=await jl(o,this._plaintext,s,this._iv,u));const b={ciphertext:qt(l),iv:qt(this._iv),tag:qt(p)};return a&&(b.encrypted_key=qt(a)),f&&(b.aad=f),this._protectedHeader&&(b.protected=Yn.decode(c)),this._sharedUnprotectedHeader&&(b.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(b.header=this._unprotectedHeader),b}}class RE{constructor(e,t,n){this.parent=e,this.key=t,this.options=n}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class TE{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const n=new RE(this,e,{crit:t==null?void 0:t.crit});return this._recipients.push(n),n}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,n,i;if(!this._recipients.length)throw new se("at least one recipient must be added");if(e={deflateRaw:e==null?void 0:e.deflateRaw},this._recipients.length===1){const[u]=this._recipients,c=await new Cc(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).encrypt(u.key,{...u.options,...e});let f={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(f.aad=c.aad),c.protected&&(f.protected=c.protected),c.unprotected&&(f.unprotected=c.unprotected),c.encrypted_key&&(f.recipients[0].encrypted_key=c.encrypted_key),c.header&&(f.recipients[0].header=c.header),f}let o;for(let u=0;u<this._recipients.length;u++){const c=this._recipients[u];if(!Lu(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new se("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const f={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:l}=f;if(typeof l!="string"||!l)throw new se('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(l==="dir"||l==="ECDH-ES")throw new se('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof f.enc!="string"||!f.enc)throw new se('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!o)o=f.enc;else if(o!==f.enc)throw new se('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Ru(se,new Map,c.options.crit,this._protectedHeader,f),f.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new se('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const a=oa(o);let s={ciphertext:"",iv:"",recipients:[],tag:""};for(let u=0;u<this._recipients.length;u++){const c=this._recipients[u],f={};s.recipients.push(f);const p={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+u:void 0;if(u===0){const E=await new Cc(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(a).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:p}).encrypt(c.key,{...c.options,...e,[Km]:!0});s.ciphertext=E.ciphertext,s.iv=E.iv,s.tag=E.tag,E.aad&&(s.aad=E.aad),E.protected&&(s.protected=E.protected),E.unprotected&&(s.unprotected=E.unprotected),f.encrypted_key=E.encrypted_key,E.header&&(f.header=E.header);continue}const{encryptedKey:b,parameters:_}=await Vm(((t=c.unprotectedHeader)===null||t===void 0?void 0:t.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((i=this._unprotectedHeader)===null||i===void 0?void 0:i.alg),o,c.key,a,{p2c:p});f.encrypted_key=qt(b),(c.unprotectedHeader||_)&&(f.header={...c.unprotectedHeader,..._})}return s}}function Wm(r,e){const t=`SHA-${r.slice(-3)}`;switch(r){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:r.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case(Ms()&&"EdDSA"):const{namedCurve:n}=e;return{name:n,namedCurve:n};case"EdDSA":return{name:e.name};default:throw new Ie(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}function Jm(r,e,t){if(rn(e))return Kx(e,r,t),e;if(e instanceof Uint8Array){if(!r.startsWith("HS"))throw new TypeError(Or(e,...dt));return be.subtle.importKey("raw",e,{hash:`SHA-${r.slice(-3)}`,name:"HMAC"},!1,[t])}throw new TypeError(Or(e,...dt,"Uint8Array"))}const OE=async(r,e,t,n)=>{const i=await Jm(r,e,"verify");pf(r,i);const o=Wm(r,i.algorithm);try{return await be.subtle.verify(o,i,t,n)}catch{return!1}},DE=OE;async function Zh(r,e,t){var n;if(!lr(r))throw new Ge("Flattened JWS must be an object");if(r.protected===void 0&&r.header===void 0)throw new Ge('Flattened JWS must have either of the "protected" or "header" members');if(r.protected!==void 0&&typeof r.protected!="string")throw new Ge("JWS Protected Header incorrect type");if(r.payload===void 0)throw new Ge("JWS Payload missing");if(typeof r.signature!="string")throw new Ge("JWS Signature missing or incorrect type");if(r.header!==void 0&&!lr(r.header))throw new Ge("JWS Unprotected Header incorrect type");let i={};if(r.protected)try{const R=jt(r.protected);i=JSON.parse(Yn.decode(R))}catch{throw new Ge("JWS Protected Header is invalid")}if(!Lu(i,r.header))throw new Ge("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...i,...r.header},a=Ru(Ge,new Map([["b64",!0]]),t==null?void 0:t.crit,i,o);let s=!0;if(a.has("b64")&&(s=i.b64,typeof s!="boolean"))throw new Ge('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:u}=o;if(typeof u!="string"||!u)throw new Ge('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=t&&$l("algorithms",t.algorithms);if(c&&!c.has(u))throw new wc('"alg" (Algorithm) Header Parameter not allowed');if(s){if(typeof r.payload!="string")throw new Ge("JWS Payload must be a string")}else if(typeof r.payload!="string"&&!(r.payload instanceof Uint8Array))throw new Ge("JWS Payload must be a string or an Uint8Array instance");let f=!1;typeof e=="function"&&(e=await e(i,r),f=!0),mf(u,e,"verify");const l=$i(gt.encode((n=r.protected)!==null&&n!==void 0?n:""),gt.encode("."),typeof r.payload=="string"?gt.encode(r.payload):r.payload),p=jt(r.signature);if(!await DE(u,e,p,l))throw new Yh;let _;s?_=jt(r.payload):typeof r.payload=="string"?_=gt.encode(r.payload):_=r.payload;const E={payload:_};return r.protected!==void 0&&(E.protectedHeader=i),r.header!==void 0&&(E.unprotectedHeader=r.header),f?{...E,key:e}:E}async function Xm(r,e,t){if(r instanceof Uint8Array&&(r=Yn.decode(r)),typeof r!="string")throw new Ge("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:a}=r.split(".");if(a!==3)throw new Ge("Invalid Compact JWS");const s=await Zh({payload:i,protected:n,signature:o},e,t),u={payload:s.payload,protectedHeader:s.protectedHeader};return typeof e=="function"?{...u,key:s.key}:u}async function BE(r,e,t){if(!lr(r))throw new Ge("General JWS must be an object");if(!Array.isArray(r.signatures)||!r.signatures.every(lr))throw new Ge("JWS Signatures missing or incorrect type");for(const n of r.signatures)try{return await Zh({header:n.header,payload:r.payload,protected:n.protected,signature:n.signature},e,t)}catch{}throw new Yh}const Xu=r=>Math.floor(r.getTime()/1e3),Ym=60,jm=Ym*60,Qh=jm*24,kE=Qh*7,FE=Qh*365.25,zE=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,Ic=r=>{const e=zE.exec(r);if(!e)throw new TypeError("Invalid time period format");const t=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(t);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(t*Ym);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(t*jm);case"day":case"days":case"d":return Math.round(t*Qh);case"week":case"weeks":case"w":return Math.round(t*kE);default:return Math.round(t*FE)}},zp=r=>r.toLowerCase().replace(/^application\//,""),UE=(r,e)=>typeof r=="string"?e.includes(r):Array.isArray(r)?e.some(Set.prototype.has.bind(new Set(r))):!1,ed=(r,e,t={})=>{const{typ:n}=t;if(n&&(typeof r.typ!="string"||zp(r.typ)!==zp(n)))throw new an('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(Yn.decode(e))}catch{}if(!lr(i))throw new Jr("JWT Claims Set must be a top-level JSON object");const{issuer:o}=t;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new an('unexpected "iss" claim value',"iss","check_failed");const{subject:a}=t;if(a&&i.sub!==a)throw new an('unexpected "sub" claim value',"sub","check_failed");const{audience:s}=t;if(s&&!UE(i.aud,typeof s=="string"?[s]:s))throw new an('unexpected "aud" claim value',"aud","check_failed");let u;switch(typeof t.clockTolerance){case"string":u=Ic(t.clockTolerance);break;case"number":u=t.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:c}=t,f=Xu(c||new Date);if((i.iat!==void 0||t.maxTokenAge)&&typeof i.iat!="number")throw new an('"iat" claim must be a number',"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new an('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>f+u)throw new an('"nbf" claim timestamp check failed',"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new an('"exp" claim must be a number',"exp","invalid");if(i.exp<=f-u)throw new Jl('"exp" claim timestamp check failed',"exp","check_failed")}if(t.maxTokenAge){const l=f-i.iat,p=typeof t.maxTokenAge=="number"?t.maxTokenAge:Ic(t.maxTokenAge);if(l-u>p)throw new Jl('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(l<0-u)throw new an('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function qE(r,e,t){var n;const i=await Xm(r,e,t);if(!((n=i.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&i.protectedHeader.b64===!1)throw new Jr("JWTs MUST NOT use unencoded payload");const a={payload:ed(i.protectedHeader,i.payload,t),protectedHeader:i.protectedHeader};return typeof e=="function"?{...a,key:i.key}:a}async function HE(r,e,t){const n=await Hm(r,e,t),i=ed(n.protectedHeader,n.plaintext,t),{protectedHeader:o}=n;if(o.iss!==void 0&&o.iss!==i.iss)throw new an('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(o.sub!==void 0&&o.sub!==i.sub)throw new an('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(o.aud!==void 0&&JSON.stringify(o.aud)!==JSON.stringify(i.aud))throw new an('replicated "aud" claim header parameter mismatch',"aud","mismatch");const a={payload:i,protectedHeader:o};return typeof e=="function"?{...a,key:n.key}:a}class $m{constructor(e){this._flattened=new Cc(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const n=await this._flattened.encrypt(e,t);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const GE=async(r,e,t)=>{const n=await Jm(r,e,"sign");pf(r,n);const i=await be.subtle.sign(Wm(r,n.algorithm),n,t);return new Uint8Array(i)},VE=GE;class td{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Ge("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Lu(this._protectedHeader,this._unprotectedHeader))throw new Ge("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},i=Ru(Ge,new Map([["b64",!0]]),t==null?void 0:t.crit,this._protectedHeader,n);let o=!0;if(i.has("b64")&&(o=this._protectedHeader.b64,typeof o!="boolean"))throw new Ge('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=n;if(typeof a!="string"||!a)throw new Ge('JWS "alg" (Algorithm) Header Parameter missing or invalid');mf(a,e,"sign");let s=this._payload;o&&(s=gt.encode(qt(s)));let u;this._protectedHeader?u=gt.encode(qt(JSON.stringify(this._protectedHeader))):u=gt.encode("");const c=$i(u,gt.encode("."),s),f=await VE(a,e,c),l={signature:qt(f),payload:""};return o&&(l.payload=Yn.decode(s)),this._unprotectedHeader&&(l.header=this._unprotectedHeader),this._protectedHeader&&(l.protected=Yn.decode(u)),l}}class Zm{constructor(e){this._flattened=new td(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const n=await this._flattened.sign(e,t);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class KE{constructor(e,t,n){this.parent=e,this.key=t,this.options=n}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class WE{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const n=new KE(this,e,t);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new Ge("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const n=this._signatures[t],i=new td(this._payload);i.setProtectedHeader(n.protectedHeader),i.setUnprotectedHeader(n.unprotectedHeader);const{payload:o,...a}=await i.sign(n.key,n.options);if(t===0)e.payload=o;else if(e.payload!==o)throw new Ge("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(a)}return e}}class rd{constructor(e){if(!lr(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:Xu(new Date)+Ic(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:Xu(new Date)+Ic(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:Xu(new Date)}:this._payload={...this._payload,iat:e},this}}class JE extends rd{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var n;const i=new Zm(gt.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Jr("JWTs MUST NOT use unencoded payload");return i.sign(e,t)}}class XE extends rd{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const n=new $m(gt.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(e,t)}}const Io=(r,e)=>{if(typeof r!="string"||!r)throw new wm(`${e} missing or invalid`)};async function Qm(r,e){if(!lr(r))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let t;switch(r.kty){case"EC":Io(r.crv,'"crv" (Curve) Parameter'),Io(r.x,'"x" (X Coordinate) Parameter'),Io(r.y,'"y" (Y Coordinate) Parameter'),t={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":Io(r.crv,'"crv" (Subtype of Key Pair) Parameter'),Io(r.x,'"x" (Public Key) Parameter'),t={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":Io(r.e,'"e" (Exponent) Parameter'),Io(r.n,'"n" (Modulus) Parameter'),t={e:r.e,kty:r.kty,n:r.n};break;case"oct":Io(r.k,'"k" (Key Value) Parameter'),t={k:r.k,kty:r.kty};break;default:throw new Ie('"kty" (Key Type) Parameter missing or unsupported')}const n=gt.encode(JSON.stringify(t));return qt(await ym(e,n))}async function YE(r,e){e??(e="sha256");const t=await Qm(r,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${t}`}async function jE(r,e){const t={...r,...e.header};if(!lr(t.jwk))throw new Ge('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await gf({...t.jwk,ext:!0},t.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new Ge('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function $E(r){switch(typeof r=="string"&&r.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Ie('Unsupported "alg" value for a JSON Web Key Set')}}function ev(r){return r&&typeof r=="object"&&Array.isArray(r.keys)&&r.keys.every(ZE)}function ZE(r){return lr(r)}function QE(r){return typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r))}class Zl{constructor(e){if(this._cached=new WeakMap,!ev(e))throw new xc("JSON Web Key Set malformed");this._jwks=QE(e)}async getKey(e,t){const{alg:n,kid:i}={...e,...t.header},o=$E(n),a=this._jwks.keys.filter(f=>{let l=o===f.kty;if(l&&typeof i=="string"&&(l=i===f.kid),l&&typeof f.alg=="string"&&(l=n===f.alg),l&&typeof f.use=="string"&&(l=f.use==="sig"),l&&Array.isArray(f.key_ops)&&(l=f.key_ops.includes("verify")),l&&n==="EdDSA"&&(l=f.crv==="Ed25519"||f.crv==="Ed448"),l)switch(n){case"ES256":l=f.crv==="P-256";break;case"ES256K":l=f.crv==="secp256k1";break;case"ES384":l=f.crv==="P-384";break;case"ES512":l=f.crv==="P-521";break}return l}),{0:s,length:u}=a;if(u===0)throw new Xh;if(u!==1)throw new xm;const c=this._cached.get(s)||this._cached.set(s,{}).get(s);if(c[n]===void 0){const f=await gf({...s,ext:!0},n);if(f instanceof Uint8Array||f.type!=="public")throw new xc("JSON Web Key Set members must be public keys");c[n]=f}return c[n]}}function eS(r){return Zl.prototype.getKey.bind(new Zl(r))}const tS=async(r,e,t)=>{let n,i,o=!1;typeof AbortController=="function"&&(n=new AbortController,i=setTimeout(()=>{o=!0,n.abort()},e));const a=await fetch(r.href,{signal:n?n.signal:void 0,redirect:"manual",headers:t.headers}).catch(s=>{throw o?new Em:s});if(i!==void 0&&clearTimeout(i),a.status!==200)throw new Ir("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new Ir("Failed to parse the JSON Web Key Set HTTP response as JSON")}},rS=tS;class Up extends Zl{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t==null?void 0:t.agent,headers:t==null?void 0:t.headers},this._timeoutDuration=typeof(t==null?void 0:t.timeoutDuration)=="number"?t==null?void 0:t.timeoutDuration:5e3,this._cooldownDuration=typeof(t==null?void 0:t.cooldownDuration)=="number"?t==null?void 0:t.cooldownDuration:3e4,this._cacheMaxAge=typeof(t==null?void 0:t.cacheMaxAge)=="number"?t==null?void 0:t.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,t){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,t)}catch(n){if(n instanceof Xh&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,t);throw n}}async reload(){if(this._pendingFetch&&Ms())return new Promise(e=>{const t=()=>{this._pendingFetch===void 0?e():setTimeout(t,5)};t()});this._pendingFetch||(this._pendingFetch=rS(this._url,this._timeoutDuration,this._options).then(e=>{if(!ev(e))throw new xc("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function nS(r,e){return Up.prototype.getKey.bind(new Up(r,e))}class iS extends rd{encode(){const e=qt(JSON.stringify({alg:"none"})),t=qt(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){if(typeof e!="string")throw new Jr("Unsecured JWT must be a string");const{0:n,1:i,2:o,length:a}=e.split(".");if(a!==3||o!=="")throw new Jr("Invalid Unsecured JWT");let s;try{if(s=JSON.parse(Yn.decode(jt(n))),s.alg!=="none")throw new Error}catch{throw new Jr("Invalid Unsecured JWT")}return{payload:ed(s,jt(i),t),header:s}}}const oS=qt,nd=jt,aS=Object.freeze(Object.defineProperty({__proto__:null,decode:nd,encode:oS},Symbol.toStringTag,{value:"Module"}));function sS(r){let e;if(typeof r=="string"){const t=r.split(".");(t.length===3||t.length===5)&&([e]=t)}else if(typeof r=="object"&&r)if("protected"in r)e=r.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const t=JSON.parse(Yn.decode(nd(e)));if(!lr(t))throw new Error;return t}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function uS(r){if(typeof r!="string")throw new Jr("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=r.split(".");if(t===5)throw new Jr("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new Jr("Invalid JWT");if(!e)throw new Jr("JWTs must contain a payload");let n;try{n=nd(e)}catch{throw new Jr("Failed to parse the base64url encoded payload")}let i;try{i=JSON.parse(Yn.decode(n))}catch{throw new Jr("Failed to parse the decoded payload as JSON")}if(!lr(i))throw new Jr("Invalid JWT Claims Set");return i}async function cS(r,e){var t;let n,i,o;switch(r){case"HS256":case"HS384":case"HS512":n=parseInt(r.slice(-3),10),i={name:"HMAC",hash:`SHA-${n}`,length:n},o=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(r.slice(-3),10),hf(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(r.slice(1,4),10),i={name:"AES-KW",length:n},o=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(r.slice(1,4),10),i={name:"AES-GCM",length:n},o=["encrypt","decrypt"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return be.subtle.generateKey(i,(t=e==null?void 0:e.extractable)!==null&&t!==void 0?t:!1,o)}function hl(r){var e;const t=(e=r==null?void 0:r.modulusLength)!==null&&e!==void 0?e:2048;if(typeof t!="number"||t<2048)throw new Ie("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function fS(r,e){var t,n,i;let o,a;switch(r){case"PS256":case"PS384":case"PS512":o={name:"RSA-PSS",hash:`SHA-${r.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:hl(e)},a=["sign","verify"];break;case"RS256":case"RS384":case"RS512":o={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:hl(e)},a=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o={name:"RSA-OAEP",hash:`SHA-${parseInt(r.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:hl(e)},a=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":o={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"];break;case"ES384":o={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"];break;case"ES512":o={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"];break;case(Ms()&&"EdDSA"):switch(e==null?void 0:e.crv){case void 0:case"Ed25519":o={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},a=["sign","verify"];break;default:throw new Ie("Invalid or unsupported crv option provided")}break;case"EdDSA":a=["sign","verify"];const s=(t=e==null?void 0:e.crv)!==null&&t!==void 0?t:"Ed25519";switch(s){case"Ed25519":case"Ed448":o={name:s};break;default:throw new Ie("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{a=["deriveKey","deriveBits"];const u=(n=e==null?void 0:e.crv)!==null&&n!==void 0?n:"P-256";switch(u){case"P-256":case"P-384":case"P-521":{o={name:"ECDH",namedCurve:u};break}case"X25519":case"X448":o={name:u};break;default:throw new Ie("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return be.subtle.generateKey(o,(i=e==null?void 0:e.extractable)!==null&&i!==void 0?i:!1,a)}async function lS(r,e){return fS(r,e)}async function hS(r,e){return cS(r,e)}const dS=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:$m,CompactSign:Zm,EmbeddedJWK:jE,EncryptJWT:XE,FlattenedEncrypt:Cc,FlattenedSign:td,GeneralEncrypt:TE,GeneralSign:WE,SignJWT:JE,UnsecuredJWT:iS,base64url:aS,calculateJwkThumbprint:Qm,calculateJwkThumbprintUri:YE,compactDecrypt:Hm,compactVerify:Xm,createLocalJWKSet:eS,createRemoteJWKSet:nS,decodeJwt:uS,decodeProtectedHeader:sS,errors:zx,exportJWK:Gm,exportPKCS8:LE,exportSPKI:PE,flattenedDecrypt:$h,flattenedVerify:Zh,generalDecrypt:AE,generalVerify:BE,generateKeyPair:lS,generateSecret:hS,importJWK:gf,importPKCS8:mE,importSPKI:pE,importX509:gE,jwtDecrypt:HE,jwtVerify:qE},Symbol.toStringTag,{value:"Module"})),pS=vu(dS);var ia=uo&&uo.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(f){try{c(n.next(f))}catch(l){a(l)}}function u(f){try{c(n.throw(f))}catch(l){a(l)}}function c(f){f.done?o(f.value):i(f.value).then(s,u)}c((n=n.apply(r,e||[])).next())})},tv=uo&&uo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.MangroveReviews=void 0;const gS=tv(vw),ks=tv(Dx),mS=pS;class _r{static signReview(e,t){return ia(this,void 0,void 0,function*(){t=_r.cleanPayload(t);const n="ES256",i=yield _r.publicToPem(e.publicKey),o=JSON.stringify(yield crypto.subtle.exportKey("jwk",e.publicKey));return yield new mS.SignJWT(t).setProtectedHeader({alg:n,kid:i,jwk:o,enc:"utf-8"}).sign(e.privateKey)})}static submitReview(e,t=_r.ORIGINAL_API){return ks.default.put(`${t}/submit/${e}`)}static signAndSubmitReview(e,t,n=_r.ORIGINAL_API){return ia(this,void 0,void 0,function*(){const i=yield _r.signReview(e,t);return _r.submitReview(i,n)})}static getReviews(e,t=_r.ORIGINAL_API){return ia(this,void 0,void 0,function*(){const{data:n}=yield ks.default.get(`${t}/reviews`,{params:e,headers:{"Content-Type":"application/json"}});return n})}static getSubject(e,t=_r.ORIGINAL_API){return ks.default.get(`${t}/subject/${encodeURIComponent(e)}`).then(({data:n})=>n)}static getIssuer(e,t=_r.ORIGINAL_API){return ks.default.get(`${t}/issuer/${encodeURIComponent(e)}`).then(({data:n})=>n)}static batchAggregate(e,t=_r.ORIGINAL_API){return!e.pems&&!e.subs?null:ks.default.post(`${t}/batch`,e).then(({data:n})=>n)}static generateKeypair(){return crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}static jwkToKeypair(e){return ia(this,void 0,void 0,function*(){let t=Object.assign({},e);if(!t||t.metadata!==_r.PRIVATE_KEY_METADATA)throw new Error(`does not contain the required metadata field "${_r.PRIVATE_KEY_METADATA}"`);const n=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]);delete t.d,delete t.dp,delete t.dq,delete t.q,delete t.qi,t.key_ops=["verify"];const i=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return{privateKey:n,publicKey:i}})}static keypairToJwk(e){return ia(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("jwk",e.privateKey);return t.metadata=_r.PRIVATE_KEY_METADATA,t})}static u8aToString(e){return new TextDecoder().decode(e)}static privateToPem(e){return ia(this,void 0,void 0,function*(){try{const t=yield crypto.subtle.exportKey("pkcs8",e);return`-----BEGIN PRIVATE KEY-----
${btoa(String.fromCharCode(...new Uint8Array(t)))}
-----END PRIVATE KEY-----`}catch{const n=yield crypto.subtle.exportKey("jwk",e);return(0,gS.default)(n,{private:!0})}})}static publicToPem(e){return ia(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("spki",e);return`-----BEGIN PUBLIC KEY-----${btoa(String.fromCharCode(...new Uint8Array(t)))}-----END PUBLIC KEY-----`})}static cleanPayload(e){if(!e.sub)throw"Payload must include subject URI in `sub` field.";if(!e.rating&&!e.opinion)throw"Payload must include either rating or opinion.";if(e.rating!==void 0&&(e.rating<0||e.rating>100))throw"Rating must be in the range from 0 to 100.";e.iat=Math.floor(Date.now()/1e3),e.rating===null&&delete e.rating,e.opinion||delete e.opinion,(!e.images||!e.images.length)&&delete e.images;const t=Object.assign({client_id:window.location.href},e.metadata);for(const n in t){const i=t[n];(i===null||i===!1)&&delete t[n]}return e.metadata=t,e}}Kc.MangroveReviews=_r;_r.ORIGINAL_API="https://api.mangrove.reviews";_r.PRIVATE_KEY_METADATA="Mangrove private key";(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MangroveReviews=void 0;const e=Kc;Object.defineProperty(r,"MangroveReviews",{enumerable:!0,get:function(){return e.MangroveReviews}})})(no);class vf{constructor(e){Ee(this,"keypair");Ee(this,"key_id");const t=new aa(void 0);this.key_id=t;const n=new aa(void 0);this.keypair=n,e.addCallbackAndRunD(async i=>{if(i==="")return;const o=await no.MangroveReviews.jwkToKeypair(JSON.parse(i));n.setData(o);const a=await no.MangroveReviews.publicToPem(o.publicKey);t.setData(a)});try{!Qi.runningFromConsole&&(e.data??"")===""&&vf.CreateIdentity(e).then(i=>{})}catch(i){console.error("Could not create identity: ",i)}}static async CreateIdentity(e){const t=await no.MangroveReviews.generateKeypair(),n=await no.MangroveReviews.keypairToJwk(t);(e.data??"")===""&&e.setData(JSON.stringify(n))}}const Vs=class{constructor(e,t,n,i){Ee(this,"subjectUri");Ee(this,"average");Ee(this,"_reviews",new aa([]));Ee(this,"reviews",this._reviews);Ee(this,"_lat");Ee(this,"_lon");Ee(this,"_uncertainty");Ee(this,"_name");Ee(this,"_identity");const o=sn.centerpointCoordinates(e);[this._lon,this._lat]=o,this._identity=n??new vf(new aa(void 0));const a=(i==null?void 0:i.nameKey)??"name";if(e.geometry.type==="Point")this._uncertainty=(i==null?void 0:i.uncertaintyRadius)??10;else{let u;e.geometry.type==="LineString"?u=[e.geometry.coordinates]:(e.geometry.type==="MultiLineString"||e.geometry.type==="Polygon")&&(u=e.geometry.coordinates);let c=0;for(const f of u)for(const l of f)c=Math.max(c,sn.distanceBetween(o,l));this._uncertainty=(i==null?void 0:i.uncertaintyRadius)??c}this._name=t.map(u=>u[a]??(i==null?void 0:i.fallbackName)),this.subjectUri=this.ConstructSubjectUri();const s=this;this.subjectUri.addCallbackAndRunD(async u=>{const c=await no.MangroveReviews.getReviews({sub:u});s.addReviews(c.reviews)}),this.ConstructSubjectUri(!0).addCallbackAndRunD(async u=>{try{const c=await no.MangroveReviews.getReviews({sub:u});s.addReviews(c.reviews)}catch{console.log("Could not fetch reviews for partially incorrect query ",u)}}),this.average=this._reviews.map(u=>{if(!u||u.length===0)return null;let c=0,f=0;for(const l of u)l.rating!==void 0&&(f++,c+=l.rating);return Math.round(c/f)})}static construct(e,t,n,i){const o=e.properties.id,a=Vs._featureReviewsCache[o];if(a!==void 0)return a;const s=new Vs(e,t,n,i);return Vs._featureReviewsCache[o]=s,s}async createReview(e){const t={sub:this.subjectUri.data,...e},n=this._identity.keypair.data;console.log(t);const i=await no.MangroveReviews.signReview(n,t);console.log("Signed:",i),await no.MangroveReviews.submitReview(i),this._reviews.data.push({...t,madeByLoggedInUser:new qs(!0)}),this._reviews.ping()}addReviews(e){const t=this,n=new Set(t._reviews.data.map(o=>o.rating+" "+o.opinion));let i=!1;for(const o of e){const a=o.payload;try{const u=new URL(a.sub);if(console.log("URL is",u),u.protocol==="geo:"){const c=u.pathname.split(",").map(l=>Number(l));if(sn.distanceBetween([this._lat,this._lon],c)>this._uncertainty)continue}}catch(u){console.warn(u)}const s=a.rating+" "+a.opinion;n.has(s)||(t._reviews.data.push({...a,madeByLoggedInUser:this._identity.key_id.map(u=>o.kid===u)}),i=!0)}i&&(t._reviews.data.sort((o,a)=>a.iat-o.iat),t._reviews.ping())}ConstructSubjectUri(e=!1){const t=this;return this._name.map(function(n){let i=`geo:${t._lat},${t._lon}?u=${t._uncertainty}`;return n&&(i+="&q="+(e?n:encodeURIComponent(n))),i})}};let dl=Vs;Ee(dl,"_featureReviewsCache",{});class id{constructor(e){Ee(this,"features");if(e===void 0)throw"Static feature source received undefined as source";let t;e.features?t=e.features:t=e,Array.isArray(t)?this.features=new qs(t):this.features=t}static fromGeojson(e){return new id(e)}}const vS=[{commits:314,contributor:"kjon"},{commits:294,contributor:"Pieter Vander Vennet"},{commits:178,contributor:"paunofu"},{commits:95,contributor:"Allan Nordhøy"},{commits:72,contributor:"Robin van der Linde"},{commits:61,contributor:"danieldegroot2"},{commits:45,contributor:"Anonymous"},{commits:36,contributor:"Iago"},{commits:33,contributor:"Jiří Podhorecký"},{commits:32,contributor:"Lucas"},{commits:32,contributor:"Babos Gábor"},{commits:31,contributor:"Supaplex"},{commits:29,contributor:"Artem"},{commits:25,contributor:"Reza Almanda"},{commits:22,contributor:"Marco"},{commits:21,contributor:"mcliquid"},{commits:21,contributor:"SC"},{commits:18,contributor:"el_libre como el chaval"},{commits:15,contributor:"WaldiS"},{commits:14,contributor:"macpac"},{commits:14,contributor:"LeJun"},{commits:14,contributor:"J. Lavoie"},{commits:13,contributor:"Olivier"},{commits:13,contributor:"Romain de Bossoreille"},{commits:13,contributor:"Joost"},{commits:12,contributor:"Piotr Strebski"},{commits:11,contributor:"Jaime Marquínez Ferrándiz"},{commits:11,contributor:"Túllio Franca"},{commits:10,contributor:"brunnerpaul"},{commits:10,contributor:"pdassori"},{commits:10,contributor:"bgo-eiu"},{commits:10,contributor:"Win Olario"},{commits:10,contributor:"Johannes Rössel"},{commits:10,contributor:"Irina"},{commits:9,contributor:"Ettore Atalan"},{commits:9,contributor:"deep map"},{commits:9,contributor:"Fjuro"},{commits:9,contributor:"Niels Madsen"},{commits:9,contributor:"Jacque Fresco"},{commits:8,contributor:"gallegonovato"},{commits:8,contributor:"Vinicius"},{commits:7,contributor:"NetworkedPoncho"},{commits:7,contributor:"Joost Schouppe"},{commits:7,contributor:"快乐的老鼠宝宝"},{commits:7,contributor:"Andrews Leruth"},{commits:7,contributor:"Niels Elgaard Larsen"},{commits:6,contributor:"Juele juele"},{commits:6,contributor:"Leonardo Gómez Berniga"},{commits:6,contributor:"Felipe Nogueira"},{commits:6,contributor:"David Haberthür"},{commits:6,contributor:"eMerzh"},{commits:6,contributor:"ⵣⵓⵀⵉⵔ ⴰⵎⴰⵣⵉⵖ زهير أمازيغ"},{commits:6,contributor:"Štefan Baebler"},{commits:6,contributor:"seppesantens"},{commits:6,contributor:"Nikolay Korotkiy"},{commits:6,contributor:"William Weber Berrutti"},{commits:6,contributor:"lvgx"},{commits:5,contributor:"ⵣⵓⵀⵉⵔ ⴰⵎⴰⵣⵉⵖ ZOUHIR DEHBI"},{commits:5,contributor:"sylvain-m"},{commits:5,contributor:"Fabio Bettani"},{commits:5,contributor:"BMN"},{commits:5,contributor:"Dingcycle"},{commits:5,contributor:"phlostically"},{commits:5,contributor:"Piotr"},{commits:5,contributor:"Alexey Shabanov"},{commits:4,contributor:"Krzysztof Chorzempa"},{commits:4,contributor:"Emory Shaw"},{commits:4,contributor:"André Marcelo Alvarenga"},{commits:4,contributor:"Klára Fleischhansová"},{commits:4,contributor:"Hiroshi Miura"},{commits:4,contributor:"Jeff Huang"},{commits:4,contributor:"Adolfo Jayme Barrientos"},{commits:4,contributor:"Polgár Sándor"},{commits:4,contributor:"Jan Zabel"},{commits:3,contributor:"Alexey Lutskyi"},{commits:3,contributor:"Bibi56"},{commits:3,contributor:"aleksej0R"},{commits:3,contributor:"liimee"},{commits:3,contributor:"foxandpotatoes"},{commits:3,contributor:"Sasha"},{commits:3,contributor:"Jose Luis Infante"},{commits:3,contributor:"Francois"},{commits:3,contributor:"Eduardo Addad de Oliveira"},{commits:3,contributor:"Wiktor Przybylski"},{commits:3,contributor:"Erik Palm"},{commits:3,contributor:"vankos"},{commits:3,contributor:"JCGF-OSM"},{commits:3,contributor:"SiegbjornSitumeang"},{commits:2,contributor:"Michel"},{commits:2,contributor:"Kelson Vibber"},{commits:2,contributor:"Peter Brodersen"},{commits:2,contributor:"nilocram"},{commits:2,contributor:"מוימוי טרייצקי"},{commits:2,contributor:"lmagreault"},{commits:2,contributor:"galder158@hotmail.com"},{commits:2,contributor:"HO Gin Wang"},{commits:2,contributor:"multiflexi"},{commits:2,contributor:"Tarcila Cataldi"},{commits:2,contributor:"Valerio Bozzolan"},{commits:2,contributor:"Manuel Tassi"},{commits:2,contributor:"Marc Marc"},{commits:2,contributor:"Midgard"},{commits:2,contributor:"M. Rey"},{commits:2,contributor:"Localizer"},{commits:2,contributor:"Eric Armijo"},{commits:2,contributor:"MeblIkea"},{commits:2,contributor:"わたなべけんご"},{commits:2,contributor:"Mateusz Konieczny"},{commits:2,contributor:"Kristoffer Grundström"},{commits:2,contributor:"Sebastian Kürten"},{commits:2,contributor:"Damian Tokarski"},{commits:2,contributor:"mic140"},{commits:2,contributor:"Heiko"},{commits:2,contributor:"Leo Alcaraz"},{commits:1,contributor:"Henry00572"},{commits:1,contributor:"Julio Salas"},{commits:1,contributor:"Michal Čermák"},{commits:1,contributor:"Juan"},{commits:1,contributor:"Traladarer"},{commits:1,contributor:"LuPa"},{commits:1,contributor:"gnu-ewm"},{commits:1,contributor:"Magnitudee"},{commits:1,contributor:"Dario Crespi"},{commits:1,contributor:"Hungarian_user"},{commits:1,contributor:"Stéphane De Greef"},{commits:1,contributor:"Falk Rund"},{commits:1,contributor:"sparky-oxford"},{commits:1,contributor:"jcn706"},{commits:1,contributor:"whatismoss"},{commits:1,contributor:"LePirlouit"},{commits:1,contributor:"SoftwareByRedline"},{commits:1,contributor:"plic ploc"},{commits:1,contributor:"Janina Ellinghaus"},{commits:1,contributor:"ssantos"},{commits:1,contributor:"Andre Fajar N"},{commits:1,contributor:"Ahen Purwakarta"},{commits:1,contributor:"Luna Jernberg"},{commits:1,contributor:"Rodrigo Tavares"},{commits:1,contributor:"Michał Targoński"},{commits:1,contributor:"Sean Young"},{commits:1,contributor:"Damian Pułka"},{commits:1,contributor:"Iváns"},{commits:1,contributor:"Beardhatcode"},{commits:1,contributor:"riiga"},{commits:1,contributor:"Carlos Ramos Carreño"}],yS={contributors:vS},_S=[{commits:6315,contributor:"Pieter Vander Vennet"},{commits:421,contributor:"Robin van der Linde"},{commits:55,contributor:"Tobias"},{commits:38,contributor:"Win Olario"},{commits:33,contributor:"Christian Neumann"},{commits:31,contributor:"Andrews Leruth"},{commits:31,contributor:"Pieter Fiers"},{commits:30,contributor:"Hosted Weblate"},{commits:30,contributor:"paunofu"},{commits:28,contributor:"riQQ"},{commits:26,contributor:"Joost"},{commits:26,contributor:"karelleketers"},{commits:24,contributor:"Ward"},{commits:23,contributor:"dependabot[bot]"},{commits:21,contributor:"wjtje"},{commits:21,contributor:"AlexanderRebai"},{commits:19,contributor:"Niels Elgaard Larsen"},{commits:19,contributor:"yopaseopor"},{commits:19,contributor:"Sebastian Kürten"},{commits:18,contributor:"Arno Deceuninck"},{commits:17,contributor:"pgm-chardelv1"},{commits:15,contributor:"Brice Maron"},{commits:15,contributor:"ToastHawaii"},{commits:13,contributor:"Nicole"},{commits:12,contributor:"Tobias Jordans"},{commits:12,contributor:"Bavo Vanderghote"},{commits:11,contributor:"Thibault Molleman"},{commits:11,contributor:"RobJN"},{commits:10,contributor:"LiamSimons"},{commits:9,contributor:"Midgard"},{commits:8,contributor:"pelderson"},{commits:8,contributor:"Codain"},{commits:8,contributor:"Mateusz Konieczny"},{commits:7,contributor:"OliNau"},{commits:7,contributor:"Flo Edelmann"},{commits:7,contributor:"Binnette"},{commits:6,contributor:"David Haberthür"},{commits:6,contributor:"danieldegroot2"},{commits:4,contributor:"Nadhem"},{commits:4,contributor:"Ward Beyens"},{commits:3,contributor:"Thierry1030"},{commits:3,contributor:"Weblate (bot)"},{commits:3,contributor:"Léo Villeveygoux"},{commits:2,contributor:"bxl-forever"},{commits:2,contributor:"Lu"},{commits:2,contributor:"Paul Brunner"},{commits:2,contributor:"ⵣⵓⵀⵉⵔ ⴰⵎⴰⵣⵉⵖ زهير أمازيغ"},{commits:2,contributor:"Jiří Podhorecký"},{commits:2,contributor:"pdassori"},{commits:2,contributor:"快乐的老鼠宝宝"},{commits:2,contributor:"arrival-spring"},{commits:2,contributor:"Strubbl"},{commits:2,contributor:"RayBB"},{commits:2,contributor:"Charlotte Delvaux"},{commits:2,contributor:"Supaplex"},{commits:2,contributor:"pbarban"},{commits:2,contributor:"graveelius"},{commits:2,contributor:"Stanislas Gueniffey"},{commits:1,contributor:"Roman Zhukov"},{commits:1,contributor:"Ciprian"},{commits:1,contributor:"redfast00"},{commits:1,contributor:"Daniel McDonald"},{commits:1,contributor:"M!dgard"},{commits:1,contributor:"galder158@hotmail.com"},{commits:1,contributor:"Bart Hanssens"},{commits:1,contributor:"brunnerpaul"},{commits:1,contributor:"flaburgan"},{commits:1,contributor:"bgo-eiu"},{commits:1,contributor:"Wouter van der Wal"},{commits:1,contributor:"eMerzh"},{commits:1,contributor:"Reiner Herrmann"},{commits:1,contributor:"Hopperpop"},{commits:1,contributor:"Arya"},{commits:1,contributor:"Robbert Gurdeep Singh"},{commits:1,contributor:"HispanicMojitos"},{commits:1,contributor:"kaipankrath"},{commits:1,contributor:"loviuz"},{commits:1,contributor:"kjonosm"},{commits:1,contributor:"Štefan Baebler"},{commits:1,contributor:"Mark Rogerson"},{commits:1,contributor:"nicole_s"},{commits:1,contributor:"SC"},{commits:1,contributor:"Raphael Das Gupta"},{commits:1,contributor:"Nikolay Korotkiy"},{commits:1,contributor:"Seppe Santens"},{commits:1,contributor:"root"},{commits:1,contributor:"Allan Nordhøy"},{commits:1,contributor:"Sebastian"},{commits:1,contributor:"Hiroshi Miura"},{commits:1,contributor:"riiga"},{commits:1,contributor:"Vinicius"},{commits:1,contributor:"Alexey Shabanov"},{commits:1,contributor:"Polgár Sándor"},{commits:1,contributor:"SiegbjornSitumeang"},{commits:1,contributor:"Marco"},{commits:1,contributor:"mozita"},{commits:1,contributor:"Schouppe Joost"},{commits:1,contributor:"Noémie"},{commits:1,contributor:"Tomas Fiers"},{commits:1,contributor:"tbowdecl97"}],bS={contributors:_S},wS="usersettings",xS={en:"A special layer which is not meant to be shown on a map, but which is used to set user settings",de:"Eine spezielle Ebene, die nicht für die Darstellung auf einer Karte gedacht ist, sondern für die Festlegung von Benutzereinstellungen verwendet wird",nl:"Een speciale lag die niet getoond wordt op de kaart, maar die de instellingen van de gebruiker weergeeft",pt:"Uma camada especial que não deve ser mostrada em um mapa, mas que é usada para definir as configurações do usuário",ca:"Una capa especial que no està pensada per mostrar-se en un mapa, però que s'utilitza per configurar la configuració de l'usuari",cs:"Speciální vrstva, která není určena k zobrazení na mapě, ale slouží k nastavení uživatelských nastavení"},ES="special",SS=["_mastodon_candidate_md=feat.properties._description.match(/\\[[^\\]]*\\]\\((.*(mastodon|en.osm.town).*)\\).*/)?.at(1)","_d=feat.properties._description?.replace(/&lt;/g,'<')?.replace(/&gt;/g,'>') ?? ''",`_mastodon_candidate_a=(feat => {const e = document.createElement('div');e.innerHTML = feat.properties._d;return Array.from(e.getElementsByTagName("a")).filter(a => a.href.match(/mastodon|en.osm.town/) !== null)[0]?.href   }) (feat) `,`_mastodon_link=(feat => {const e = document.createElement('div');e.innerHTML = feat.properties._d;return Array.from(e.getElementsByTagName("a")).filter(a => a.getAttribute("rel")?.indexOf('me') >= 0)[0]?.href})(feat) `,"_mastodon_candidate=feat.properties._mastodon_candidate_md ?? feat.properties._mastodon_candidate_a","__current_background:='initial_value'"],CS={render:{en:"Settings",nl:"Instellingen",de:"Einstellungen",fr:"Paramètres",da:"Indstillinger",ca:"Configuració",cs:"Nastavení"}},IS=null,AS=null,MS=[{id:"profile",render:{"*":"{user_profile()}"}},{id:"language_picker",render:{"*":"{language_picker()}"},mappings:[{if:"__url_parameter_initialized:language=yes",icon:"./assets/layers/usersettings/translate_disabled.svg",then:{en:"The language was set via an URL-parameter and cannot be set by the user.²",de:"Die Sprache wurde über einen URL-Parameter gesetzt und kann nicht vom Benutzer eingestellt werden.²",ca:"L'idioma es va establir mitjançant un paràmetre d'URL i l'usuari no pot definir-lo.²",cs:"Jazyk byl nastaven pomocí parametru URL a uživatel jej nemůže nastavit.²"}}]},{id:"inbox",mappings:[{if:"_unreadMessages=0",then:{ca:"{link(Obre la teva safata d'entrada,&LBRACE_backend&RBRACE/messages/inbox,,)}",cs:"{link(Otevřít schránku,&LBRACE_backend&RBRACE/messages/inbox,,)}",de:"{link(Deinen Posteingang öffnen,&LBRACE_backend&RBRACE/messages/inbox,,)}",en:"{link(Open your inbox,&LBRACE_backend&RBRACE/messages/inbox,,)}",nl:"{link(Ga naar je inbox,&LBRACE_backend&RBRACE/messages/inbox,,)}"}},{if:"_unreadMessages>0",then:{ca:"{link(<b class='alert'>Tens &LBRACE_unreadMessages&RBRACE</b><br/>Open your inbox,&LBRACE_backend&RBRACE/messages/inbox,,)}",cs:"{link(<b class='alert'>Máte &LBRACE_unreadMessages&RBRACE</b><br/>Otevřít schránku,&LBRACE_backend&RBRACE/messages/inbox,,)}",de:"{link(<b class='alert'>Du hast &LBRACE_unreadMessages&RBRACE</b><br/>Öffne Deinen Posteingang,&LBRACE_backend&RBRACE/messages/inbox,,)}",en:"{link(<b class='alert'>You have &LBRACE_unreadMessages&RBRACE</b><br/>Open your inbox,&LBRACE_backend&RBRACE/messages/inbox,,)}"}}]},{id:"settings-link",render:{ca:"{link(Obriu la vostra configuració a OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,)}",cs:"{link(Otevřít vaše nastavení na OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,)}",de:"{link(Öffne Deine Einstellungen auf OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,)}",en:"{link(Open your settings on OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,)}"}},{id:"logout",render:{"*":"{logout()}"}},{id:"background-layer-readonly",condition:{and:["_theme:backgroundLayer~*","mapcomplete-preferred-background-layer~*","_theme:backgroundLayer!:={mapcomplete-preferred-background-layer}"]},render:{en:"This thematic map has a predefined background layer set. Your default theme setting does not apply",ca:"Aquest mapa temàtic té un conjunt de capes de fons predefinides. La configuració predeterminada del tema no s'aplica",de:"Diese thematische Karte hat einen vordefinierten Hintergrund. Ihr Standardhintergrund wird nicht angewendet",cs:"Tato tematická mapa má předdefinovanou sadu podkladových vrstev. Vaše výchozí nastavení tématu se nepoužije"}},{id:"background-layer",question:{en:"What background layer should be shown by default?",ca:"Quina capa de fons s'ha de mostrar per defecte?",de:"Welche Hintergrundebene soll als Standard verwendet werden?",cs:"Jaká vrstva pozadí by se měla zobrazovat ve výchozím nastavení?"},condition:"_theme:backgroundLayer=",mappings:[{if:"mapcomplete-preferred-background-layer=",then:{en:"Use the default background layer",ca:"Utilitzeu la capa de fons predeterminada",de:"Standardhintergrund verwenden",cs:"Použití výchozí vrstvu pozadí"}},{if:"mapcomplete-preferred-background-layer=osm",then:{en:"Use OpenStreetMap-carto as default layer",ca:"Utilitzeu OpenStreetMap-carto com a capa predeterminada",de:"OpenStreetMap-carto als Standardhintergrund verwenden",cs:"Použít OpenStreetMap-carto jako výchozí vrstvu"}},{if:"mapcomplete-preferred-background-layer=photo",then:{en:"Use aerial imagery as default background",ca:"Utilitzeu imatges aèries com a fons predeterminat",de:"Satellitenbilder als Standardhintergrund verwenden",cs:"Použít letecké snímky jako výchozí pozadí"}},{if:"mapcomplete-preferred-background-layer=map",then:{en:"Use a non-openstreetmap based map as default background",ca:"Utilitzeu un mapa que no sigui openstreetmap com a fons predeterminat",de:"Eine eigene Karte als Standardhintergrund verwenden",cs:"Použití mapy, která není založena na mapě openstreetmap, jako výchozího pozadí"}},{if:"mapcomplete-preferred-background-layer:={__current_background}",then:{en:"Use the current background layer (<span class='code'>{__current_background}</span>) as default background",ca:"Utilitzeu la capa de fons actual (<span class='code'>{__current_background}</span>) com a fons predeterminat",de:"Aktuelle Hintergrundebene (<span class='code'>{__current_background}</span>) als Standardhintergrund verwenden",cs:"Použít aktuální vrstvu pozadí (<span class='code'>{__current_background}</span>) jako výchozí pozadí"},hideInAnswer:{or:["__current_background=","__current_background=osm","__current_background=initial_value"]}},{if:"mapcomplete-preferred-background-layer~*",then:{en:"Use background layer <span class='code'>{mapcomplete-preferred-background-layer}</span> as default background",ca:"Utilitza la capa de fons <span class='code'>{mapcomplete-preferred-background-layer}</span> com a fons predeterminat",de:"Hintergrundebene <span class='code'>{mapcomplete-preferred-background-layer}</span> als Standardhintergrund verwenden",cs:"Použít vrstvu pozadí <span class='code'>{mapcomplete-preferred-background-layer}</span> jako výchozí pozadí"},hideInAnswer:!0}]},{id:"picture-license",description:"This question is not meant to be placed on an OpenStreetMap-element; however it is used in the user information panel to ask which license the user wants",question:{en:"Under what license do you want to publish your pictures?",de:"Unter welcher Lizenz möchten Sie Ihre Bilder veröffentlichen?",nl:"Met welke licentie wil je je afbeeldingen toevoegen?",ca:"Sota quina llicència vols publicar les teves fotos?",pt:"Sob que licença você deseja publicar suas fotos?",cs:"Pod jakou licencí chcete své fotografie zveřejnit?"},mappings:[{if:"mapcomplete-pictures-license=",then:{en:"Pictures you take will be licensed with <b>CC0</b> and added to the public domain. This means that everyone can use your pictures for any purpose. <span class='subtle'>This is the default choice.</span>",de:"Die von Ihnen aufgenommenen Bilder werden mit <b>CC0</b> lizenziert und der Public Domain hinzugefügt. Das bedeutet, dass jeder Ihre Bilder für jeden Zweck verwenden kann. <span class='subtle'>Dies ist die Standardeinstellung.</span>",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC0</b>-licentie en dus aan het publieke domein toegevoegd worden. Dit betekent dat iedereen je afbeeldingen kan gebruiken voor elk mogelijks gebruik. <span class='subtle'>Dit is de standaard-instelling</span>",cs:"Pořízené fotografie budou licencovány pod <b>CC0</b> a přidány do veřejné domény. To znamená, že kdokoli může vaše snímky použít k jakémukoli účelu. <span class='subtle'>Toto je výchozí volba.</span>",ca:"Les imatges que feu tindran llicència <b>CC0</b> i s'afegiran al domini públic. Això vol dir que tothom pot utilitzar les vostres imatges per a qualsevol propòsit. <span class='subtle'>Aquesta és l'opció predeterminada. </span>",pt:"As fotos que você tirar serão licenciadas com <b>CC0</b> e adicionadas ao domínio público. Isso significa que todos podem usar suas fotos para qualquer finalidade. <span class='subtle'>Esta é a escolha padrão.</span>"},hideInAnswer:!0},{if:"mapcomplete-pictures-license=CC0",then:{en:"Pictures you take will be licensed with <b>CC0</b> and added to the public domain. This means that everyone can use your pictures for any purpose.",de:"Ihre aufgenommenen Bilder werden mit <b>CC0</b> lizenziert und der Public Domain hinzugefügt. Das bedeutet, dass jeder Ihre Bilder für jeden Zweck verwenden kann.",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC0</b>-licentie en dus aan het publieke domein toegevoegd worden. Dit betekent dat iedereen je afbeeldingen kan gebruiken voor elk mogelijks gebruik.",ru:"Изображения будут опубликованы под лицензией <b>CC0</b> и перейдут в общественное достояние. Это значит, что кто угодно имеет право использовать их без ограничений.",cs:"Pořízené fotografie budou licencovány pod <b>CC0</b> a přidány do veřejné domény. To znamená, že kdokoli může vaše snímky použít k jakémukoli účelu.",ca:"Les imatges que feu tindran llicència <b>CC0</b> i s'afegiran al domini públic. Això vol dir que tothom pot utilitzar les vostres imatges per a qualsevol propòsit.",es:"Las fotografías que tome tendrán una licencia con <b>CC0</b> y se agregarán al dominio público. Esto significa que todos pueden usar sus imágenes para cualquier propósito.",pt:"As fotos que você tirar serão licenciadas com <b>CC0</b> e adicionadas ao domínio público. Isso significa que todos podem usar suas fotos para qualquer finalidade.",da:"Billeder, som du har taget, vil blive udgivet under <b>CC0</b>-licensen og lagt ud i fælleseje. Det betyder, at alle kan bruge dine billeder til ethvert formål."}},{if:"mapcomplete-pictures-license=CC-BY 4.0",then:{en:"Pictures you take will be licensed with <b>CC-BY 4.0</b> which requires everyone using your picture that they have to attribute you",ca:"Les fotografies que facis es publicaran sota <b>CC-BY 4.0</b> que requereix que qualsevol que utilitzi la vostra imatge us ha de donar crèdits",de:"Die von Ihnen aufgenommenen Bilder werden mit <b>CC-BY 4.0</b> lizenziert, was bedeutet, dass jeder, der Ihr Bild verwendet, Sie als Urheber nennen muss",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC-BY 4.0</b>-licentie. Dit betekent dat iedereen je afbeelding mag gebruiken voor elke toepassing mits het vermelden van je naam",cs:"Pořízené fotografie budou licencovány pod <b>CC-BY 4.0</b>, což vyžaduje, aby vás uvedl každý, kdo použije vaší fotku",pt:"As fotos que você tirar serão licenciadas com <b>CC-BY 4.0</b>, que exige que todos que usam sua foto atribuam a você"}},{if:"mapcomplete-pictures-license=CC-BY-SA 4.0",then:{en:"Pictures you take will be licensed with <b>CC-BY-SA 4.0</b> which means that everyone using your picture must attribute you and that derivatives of your picture must be reshared with the same license.",de:"Die von Ihnen aufgenommenen Bilder werden mit <b>CC-BY-SA 4.0</b> lizenziert, was bedeutet, dass jeder, der Ihr Bild verwendet, Sie als Urheber nennen muss und dass Ableitungen Ihres Bildes mit der gleichen Lizenz weitergegeben werden müssen.",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC-BY-SA 4.0</b>-licentie. Dit betekent dat iedereen je afbeelding mag gebruiken voor elke toepassing mits het vermelden van je naam en dat afgeleide werken van je afbeelding ook ondere deze licentie moeten gepubliceerd worden.",cs:"Pořízené fotografie budou licencovány pod <b>CC-BY-SA 4.0</b>, což vyžaduje, aby vás uvedl každý, kdo použije vaší fotku a že odvozené fotky musí být dále sdíleny se stejnou licencí.",ca:"Les imatges que feu tindran una llicència amb <b>CC-BY-SA 4.0</b> el que significa que tothom que utilitzi la vostra imatge us ha d'atribuir i que els derivats de la vostra imatge s'han de tornar a compartir amb la mateixa llicència.",fr:"Les photos que vous prenez seront sous la licence <b>CC-BY-SA 4.0</b> ce qui signifie que quiconque utilisant votre photo doit vous créditer et que les modifications apportées à votre photo doivent être repartagées avec la même licence.",pt:"As fotos que você tirar serão licenciadas com <b>CC-BY-SA 4.0</b>, o que significa que todos que usarem sua foto devem atribuí-lo e que os derivados de sua foto devem ser compartilhados novamente com a mesma licença."}}]},{id:"show_tags",question:{en:"Show the raw OpenStreetMap-tags?",de:"Rohe OpenStreetMap-Tags anzeigen?",fr:"Afficher les attributs OpenStreetMap bruts ?",ca:"Mostra les etiquetes d'OpenStreetMap en brut?",cs:"Zobrazit nezpracované/raw tagy OpenStreetMap?"},questionHint:{en:"<b>Tags</b> are attributes that every element has. This is the technical data that is stored in the database. You don't need this information to edit with MapComplete, but advanced users might want to use this as reference.",de:"<b>Tags</b> sind die Eigenschaften, die jedes Objekt hat. Das sind die technischen Daten, die in der Datenbank gespeichert werden. Du brauchst diese Informationen nicht, um mit MapComplete Änderungen zu machen, aber fortgeschrittenen Nutzer*innen kann es als Referenz dienen.",ca:"Les <b>etiquetes</b> són atributs que té cada element. Aquestes són les dades tècniques que s'emmagatzemen a la base de dades. No necessiteu aquesta informació per editar amb MapComplete, però és possible que els usuaris avançats la vulguin fer servir com a referència.",cs:"<b>Tagy</b> jsou atributy, které má každý element. Jedná se o technické údaje, které jsou uloženy v databázi. K úpravám pomocí MapComplete tyto informace nepotřebujete, ale pokročilí uživatelé by je mohli chtít použít jako referenci."},mappings:[{if:"mapcomplete-show_tags=no",then:{en:"Never show the tags.",de:"Tags nie anzeigen.",ca:"No mostris mai les etiquetes.",cs:"Nikdy nezobrazovat tagy."}},{if:"mapcomplete-show_tags=",then:{en:"Show the tags that will be applied once I have made {__userjourney_tagsVisibleAt} changesets",de:"Tags anzeigen sobald ich {__userjourney_tagsVisibleAt} Changesets erstellt habe",ca:"Mostra les etiquetes que s'aplicaran un cop hagi fet {__userjourney_tagsVisibleAt} conjunts de canvis",cs:"Zobrazit tagy, které budou použity, jakmile provedu {__userjourney_tagsVisibleAt} sady změn"}},{if:"mapcomplete-show_tags=yes",then:{en:"Show the tags that will be applied when making a change",de:"Tags anzeigen, die bei der Änderung hinzugefügt werden",ca:"Mostra les etiquetes que s'aplicaran en fer un canvi",cs:"Zobrazení tagů, které budou použity při provádění změny"}},{if:"mapcomplete-show_tags=full",then:{en:"Show the tags that will be applied when making a change and show the tags table on every feature",de:"Tags anzeigen, die bei der Änderung hinzugefügt werden, und Tag-Tabelle bei jedem Objekt anzeigen",ca:"Mostra les etiquetes que s'aplicaran a l'hora de fer un canvi i mostra la taula d'etiquetes a cada element",cs:"Zobrazení tagů, které se použijí při provádění změny, a zobrazení tabulky tagů u každé funkce"}}]},{id:"all-questions-at-once",question:{en:"Should questions for unknown data fields appear one-by-one or together?",de:"Sollen Fragen für unbekannte Datenfelder einzeln oder zusammen angezeigt werden?",fr:"Est-ce que les questions pour les champs sans donnée doivent apparaître une à une ou toutes ensembles ?",pt:"As perguntas para campos de dados desconhecidos devem aparecer uma a uma ou juntas?",ca:"Les preguntes amb camps de dades desconeguts haurien d'aparèixer una per una o juntes?",nl:"Moeten onbeantwoorde vragen om beurt of allemaal samen getoond worden?",cs:"Mají se otázky pro neznámá datová pole zobrazovat jednotlivě, nebo společně?"},mappings:[{if:"mapcomplete-show-all-questions=true",then:{en:"Show all questions in the infobox together",de:"Alle Fragen in der Infobox zusammen anzeigen",ca:"Mostra totes les preguntes al quadre d'informació",fr:"Afficher toutes les question en même temps dans l'infobox",pt:"Mostrar todas as perguntas na caixa de informações juntas",nl:"Toon alle onbeantwoorde vragen",cs:"Zobrazit všechny otázky v infoboxu dohromady"}},{if:"mapcomplete-show-all-questions=false",then:{en:"Show questions one-by-one",de:"Fragen der Reihe nach anzeigen",ca:"Mostra les preguntes una per una",fr:"Afficher les questions une à une",pt:"Mostrar perguntas uma a uma",nl:"Toon de vragen één per één",cs:"Zobrazit otázky jednu po druhé"}}]},{id:"show_crosshair",question:{en:"Should a crosshair be shown in the center of the display?",cs:"Měl by se uprostřed displeje zobrazovat kříž?",de:"Soll ein Fadenkreuz in der Mitte des Bildschirms angezeigt werden?"},questionHint:{en:"This can help to accurately position a new element",cs:"To může pomoci přesněji umístit nový prvek",de:"Dies kann dazu beitragen, ein neues Element genau zu positionieren"},mappings:[{if:"mapcomplete-show_crosshair=yes",then:"Show a crosshair in the center of the map when zoomed in above level 17"},{if:"mapcomplete-show_crosshair=no",then:"Do not show a crosshair in the center of the map"},{if:"mapcomplete-show_crosshair=",then:"Do not show a crosshair in the center of the map",hideInAnswer:!0},{if:"mapcomplete-show_crosshair=always",then:"Always show a crosshair in the center of the map"}]},{id:"fixate-north",question:{en:"Should north always be up?",de:"Soll Norden immer oben sein?",ca:"El nord hauria d'estar sempre amunt?",cs:"Měl by být sever vždy nahoře?"},mappings:[{if:"mapcomplete-fixate-north=",then:{en:"Allow to rotate the map",de:"Drehen der Karte zulassen",ca:"Permet girar el mapa",fr:"Autoriser la rotation de la carte",da:"Tillad rotation af kortet",cs:"Umožnit otáčení mapy"}},{if:"mapcomplete-fixate-north=yes",then:{en:"Always keep north pointing up",de:"Norden immer nach oben zeigen lassen",fr:"Toujours garder le nord en haut",ca:"Mantingueu sempre el nord apuntant cap amunt",cs:"Sever vždy směřujte nahoru"}}]},{id:"mangrove-keys",render:{ca:"{link(Baixeu la clau privada del vostre compte de Mangrove,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE)}Qualsevol persona que tingui aquest fitxer pot fer ressenyes amb la vostra identitat",cs:"{link(Stáhnout soukromý klíč pro Mangrove účet,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE)}Kdokoli, kdo má tento soubor, může provádět recenze s vaší identitou",da:"{link(Hent den private nøgle til din Mangrove-konto,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE)}Enhver, der har denne fil, kan lave ændringer med din identitet",de:"{link(Laden Sie den privaten Schlüssel für Ihr Mangrove-Konto herunter,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE)}Jeder, der diese Datei besitzt, kann mit Ihrer Identität Rezensionen vornehmen",en:"{link(Download the private key for your Mangrove Account,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE)}Anyone possessing this file can make reviews with your identity"}},{id:"translations-title",label:["translations"],render:"<h3>Translating MapComplete</h3>"},{label:["translations"],id:"translation-mode",question:{en:"Do you want to help translating MapComplete?",de:"Möchten Sie bei der Übersetzung von MapComplete helfen?",cs:"Chcete pomoci s překladem MapComplete?",ca:"Vols ajudar a traduir MapComplete?",fr:"Voulez-vous aider à traduire MapComplete ?",pt:"Quer ajudar na tradução do MapComplete?"},mappings:[{if:"mapcomplete-translation-mode=false",icon:"./assets/layers/usersettings/translate_disabled.svg",then:{en:"Don't show a button to quickly change translations",de:"Keine Schaltfläche zum schnellen Wechseln von Übersetzungen anzeigen",ca:"No mostris cap botó per a canviar ràpidament les traduccions",fr:"Ne pas afficher de bouton pour modifier les traductions rapidement",pt:"Não mostrar um botão para alterar as traduções rapidamente",cs:"Nezobrazovat tlačítko pro rychlou změnu překladů"}},{if:"mapcomplete-translation-mode=true",icon:"./assets/svg/translate.svg",then:{en:"Show a button to quickly open translations when using MapComplete on a big screen",de:"Schaltfläche anzeigen zum schnellen Öffnen von Übersetzungen beim Verwenden von MapComplete auf einem großen Bildschirm",fr:"Afficher un bouton pour ouvrir rapidement les traductions lorsque vous utilisez MapComplete sur un grand écran",ca:"Mostra un botó per a obrir ràpidament les traduccions quan utilitzes MapComplet en una pantalla gran",pt:"Mostrar um botão para abrir traduções rapidamente ao usar o MapComplete em uma tela grande",da:"Vis en knap for hurtigt at åbne oversættelser, når du bruger MapComplete på en stor skærm",cs:"Zobrazit tlačítko pro rychlé otevření překladů při použití MapComplete na velké obrazovce"}},{if:"mapcomplete-translation-mode=mobile",icon:"./assets/layers/usersettings/translate_mobile.svg",then:{en:"Always show the translation buttons, including on mobile",de:"Übersetzungsschaltflächen immer anzeigen, auch auf dem Handy",ca:"Mostra sempre els botons de traducció, fins i tot al mòbil",fr:"Toujours afficher les boutons de traduction, même sur mobile",pt:"Mostrar sempre os botões de tradução, inclusive no celular",cs:"Vždy zobrazovat tlačítka překladu, a to i na mobilu"}}]},{label:["translations"],id:"translation-help",mappings:[{if:{or:["mapcomplete-translation-mode=yes","mapcomplete-translation-mode=true","mapcomplete-translation-mode=mobile"]},then:{ca:"Fes clic a la icona 'tradueix' al costat d'una cadena per introduir o actualitzar un fragment de text. Necessites un compte de Weblate per a això. Crea'n un amb el teu nom d'usuari OSM per desbloquejar automàticament el mode de traducció.",da:"Klik på 'oversæt'-ikonet ved siden af en streng for at indtaste eller opdatere et stykke tekst. Du skal have en Weblate-konto for at kunne gøre dette. Opret en med dit OSM-brugernavn for automatisk at låse oversættelsestilstanden op.",de:"Klicken Sie auf das Übersetzungssymbol neben einer Zeichenfolge, um den Übersetzungstext einzugeben oder zu aktualisieren. Dazu benötigen Sie ein Weblate-Konto. Erstellen Sie eines mit Ihrem OSM-Benutzernamen, um den Übersetzungsmodus automatisch freizuschalten.",en:"Click the 'translate'-icon next to a string to enter or update a piece of text. You need a Weblate-account for this. Create one with your OSM-username to automatically unlock translation mode.",es:"Haz clic en el icono 'traducir' al lado de una cadena para introducir o actualizar un texto. Necesitas una cuenta de Weblate para esto. Crea una con tu usuario de OSM para desbloquear el modo de traducción automáticamente.",fr:`Cliquez sur l'icône "traduire" à côté d'une chaîne de caractères pour saisir ou mettre à jour la chaine de texte. Vous aurez besoin d'un compte Weblate pour cela. Créez-en un avec votre nom d'utilisateur OSM pour déverrouiller automatiquement le mode traduction.`,nl:"Klik op het 'vertaal'-icoontje die naast een stukje tekst staat om deze tekst te vertalen of aan te passen. Hiervoor heb je een (gratis) Weblate-account nodig. Indien je jouw account maakt met dezelfde naam als je OSM-gebruikersnaam, dan zullen de vertaalknoppen automatisch verschijnen.",zh_Hant:"點字串旁邊的 'translate'-icon 來輸入或是更新一段文字。你需要 Weblate 帳號。用你 OSM 帳號名稱來創建帳號，並且自動解鎖翻譯模式。",cs:"Chcete-li zadat nebo aktualizovat část textu, klikněte na ikonu „přeložit“ vedle řetězce. K tomu potřebujete účet Weblate. Vytvořte si jej s vaším uživatelským jménem OSM, abyste automaticky odemkli režim překladu."},icon:"translate"}]},{label:["translations"],id:"translation-completeness",render:{ca:"Les traduccions de {_theme} en {_language} tenen un {_translation_percentage}%: {_translation_translated_count} cadenes de {_translation_total} estan traduïdes",da:"Oversættelser for {_theme} i {_language} er på {_translation_percentage}%: {_translation_translated_count} strenge ud af {_translation_total} er oversat",de:"Die Übersetzung für {_theme} in {_language} ist zu {_translation_percentage}% vollständig: {_translation_translated_count} Zeichenfolgen von {_translation_total} sind übersetzt",en:"Translations for {_theme} in {_language} are at {_translation_percentage}%: {_translation_translated_count} strings out of {_translation_total} are translated",es:"Las traducciones para {_theme} en {_language} están al {_translation_percentage}%: {_translation_translated_count} cadenas de {_translation_total} están traducidas",id:"Terjemahan untuk {_theme} dalam {_language} masih {_translation_percentage}%: {_translation_translated_count} string dari {_translation_total} diterjemahkan",nb_NO:"Oversettelsen for {_theme} i {_language} har {_translation_percentage}% dekning: {_translation_translated_count} strenger av {_translation_total} har blitt oversatt",nl:"Vertalingen voor {_theme} in {_language} zijn momenteel op {_translation_percentage}%: van {_translation_total} teksten zijn er reeds {_translation_translated_count} vertaald",zh_Hant:"{_theme} 的 {_language} 翻譯目前是 {_translation_percentage}%：{_translation_total} 中的 {_translation_translated_count} 已經翻譯了",fr:"Les traductions pour {_theme} en {_language} sont à {_translation_percentage} % : {_translation_translated_count} chaînes traduites sur {_translation_total}",cs:"Překlady pro {_theme} v {_language} jsou na úrovni {_translation_percentage}%: {_translation_translated_count} z {_translation_total} je přeloženo"},condition:{or:["mapcomplete-translation-mode=yes","mapcomplete-translation-mode=true","mapcomplete-translation-mode=mobile"]},mappings:[{if:"_translation_percentage=100",icon:"confirm",then:{en:"Completely translated",nl:"Volledig vertaald",de:"Vollständig übersetzt",ca:"Completament traduït",pt:"Traduzido completamente",cs:"Kompletně přeloženo"}}]},{id:"translation-links",label:["translations"],condition:{and:["_translation_links~*",{or:["mapcomplete-translation-mode=true","mapcomplete-translation-mode=mobile"]}]},render:{"*":"{multi(_translation_links,<a href='{link}' target='_blank' rel='noopener'>Translate entries of {id}</a>)}"}},{id:"verified-mastodon",mappings:[{if:"_mastodon_link~*",then:{en:"A link to your Mastodon-profile has been been found: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",de:"Es wurde ein Link zu deinem Mastodon-Profil gefunden: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",nl:"Een link naar je Mastodon-profiel werd gevonden: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",fr:"Un lien vers votre profil Mastodon a été trouvé : <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",ca:"S'ha trobat un enllaç al vostre perfil de Mastodon: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",cs:"Byl nalezen odkaz na váš profil Mastodon: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>"},icon:"mastodon"},{if:"_mastodon_candidate~*",then:{en:`We found a link to what looks to be a mastodon account, but it is unverified. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Edit your profile description</a> and place the following there: <span class='code'>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,de:`Wir haben einen Link gefunden, der aussieht wie ein Mastodon-Konto, aber nicht verifiziert ist. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Bearbeiten Sie Ihre Profilbeschreibung</a> und fügen Sie dort Folgendes ein: <span class='code'>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,nl:`Je profielbeschrijving bevat een link die vermoedelijk naar je Mastodon gaat, maar deze link is niet verifieerdbaar voor Mastodon.<a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Pas je profielbeschrijving aan</a> en plaats er de volgende code: <span class='code'>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,ca:`Hem trobat un enllaç al que sembla ser un compte de mastodon, però no està verificat. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Editeu la descripció del vostre perfil</a> i col·loqueu-hi el següent: <span class='code '>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,cs:`Našli jsme odkaz na to, co vypadá jako účet mastodon, ale je neověřený. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Upravte popis svého profilu</a> a umístěte tam následující: <span class='code '>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`},icon:"invalid"}]},{id:"cscount-thanks",mappings:[{if:"_csCount>0",then:{en:"You have made changes on {_csCount} different occasions! That is awesome!",de:"Sie haben bei {_csCount} verschiedenen Gelegenheiten Änderungen vorgenommen! Das ist großartig!",ca:"Has fet {_csCount} en diferents ocasions! Això és sorprenent!",fr:"Vous avez fait {_csCount} modifications ! C'est génial !",pt:"Você fez alterações em {_csCount} ocasiões diferentes! Isso é incrível!",nl:"Je hebt {_csCount} verschillende keren bijgedragen! Dat is indrukwekkend!",da:"Du har lavet ændringer ved {_csCount} forskellige begivenheder! Det er fantastisk!",es:"Has hecho cambios en {_csCount} ocasiones diferentes. ¡Es alucinante!",cs:"Změny jste provedli při {_csCount} různých příležitostech! To je úžasné!"},icon:"party"}]},{id:"translation-thanks",mappings:[{if:"_translation_contributions>0",then:{en:"You have contributed to translating MapComplete! That's awesome!",ca:"Has contribuït a traduir MapComplete! Això és fantàstic!",de:"Sie haben dazu beigetragen, MapComplete zu übersetzen! Das ist großartig!",nl:"Je hebt MapComplete helpen vertalen! Dat is fantastisch! Bedankt hiervoor!",cs:"Přispěli jste k překladu MapComplete! To je úžasné!",pt:"Você contribuiu para a tradução do MapComplete! Fantástico!"},icon:"party"}]},{id:"contributor-thanks",mappings:[{if:"_code_contributions>0",then:{en:"You have contributed code to MapComplete with {_code_contributions} commits! That's awesome!",de:"Sie haben Code zu MapComplete mit {_code_contributions} Commits beigetragen! Das ist großartig!",nl:"Je hebt mee geprogrammeerd aan MapComplete met {_code_contributions} commits! Das supercool van je! Bedankt hiervoor!",ca:"Heu aportat codi a MapComplete amb {_code_contributions} commits! Això és increïble!",cs:"Přispěli jste do MapComplete kódem s {_code_contributions} revizemi! To je úžasné!"},icon:"party",hideInAnswer:!0}]},{id:"show_debug",question:{en:"Show user settings debug info?",de:"Debug-Informationen zu den Benutzereinstellungen anzeigen?",cs:"Zobrazit informace o ladění v nastavení?",ca:"Vols mostrar la informació de depuració de la configuració de l'usuari?",pt:"Mostrar informações de depuração das configurações do usuário?"},mappings:[{if:"mapcomplete-show_debug=yes",icon:"./assets/svg/bug.svg",then:{en:"Show debug info",de:"Debug-Informationen anzeigen",cs:"Zobrazit informace o ladění",ca:"Mostra la informació de depuració",pt:"Mostrar informações de depuração"}},{if:"mapcomplete-show_debug=no",then:{en:"Don't show debug info",de:"Keine Debug-Informationen anzeigen",cs:"Nezobrazovat informace o ladění",ca:"No mostris informació de depuració",pt:"Não mostrar informações de depuração"}},{if:"mapcomplete-show_debug=",then:{en:"Don't show debug info",de:"Keine Debug-Informationen anzeigen",cs:"Nezobrazovat informace o ladění",pt:"Não mostrar informações de depuração",da:"Vis ikke debug-informationer",ca:"No mostris informació de depuració"},hideInAnswer:!0}]},{id:"debug-gps",condition:"mapcomplete-show_debug=yes",render:"{gps_all_tags()}"},{id:"debug",condition:"mapcomplete-show_debug=yes",render:"{all_tags()}"}],NS=[{id:"wikipedialink",labels:["defaults"],render:"<a href='https://wikipedia.org/wiki/{wikipedia}' target='_blank' rel='noopener'><img src='./assets/svg/wikipedia.svg' textmode='📖' alt='Wikipedia'/></a>",condition:{or:["wikipedia~*","wikidata~*"]},mappings:[{"#":"ignore-image-in-then",if:"wikipedia=",then:"<a href='https://www.wikidata.org/wiki/{wikidata}' target='_blank' rel='noopener'><img src='./assets/svg/wikidata.svg' alt='WD'/></a>"}]},{id:"phonelink",labels:["defaults"],render:"<a href='tel:{phone}'><img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/></a>",mappings:[{"#":"ignore-image-in-then",if:"contact:phone~*",then:"<a href='tel:{contact:phone}'><img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/></a>"}],condition:{or:["phone~*","contact:phone~*"]}},{id:"emaillink",labels:["defaults"],render:"<a href='mailto:{email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>",mappings:[{"#":"ignore-image-in-then",if:"contact:email~*",then:"<a href='mailto:{contact:email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>"}],condition:{or:["email~*","contact:email~*"]}},{id:"websitelink",labels:["defaults"],render:"<a href='{website}' target='_blank' rel='noopener'><img textmode='🌐' alt='website' src='./assets/layers/icons/website.svg'/></a>",condition:"website~*"},{id:"smokingicon",labels:["defaults"],mappings:[{"#":"ignore-image-in-then",if:"smoking=no",then:"<img textmode='🚭️' alt='no-smoking' src='./assets/layers/questions/no_smoking.svg'/>"},{"#":"ignore-image-in-then",if:"smoking=yes",then:"<img textmode='🚬️' alt='smoking-allowed' src='./assets/layers/questions/smoking.svg'/>"}]},{id:"sharelink",labels:["defaults"],render:"{share_link()}",metacondition:"_supports_sharing=yes"},{id:"osmlink",labels:["defaults"],render:"<a href='https://openstreetmap.org/{id}' target='_blank' rel='noopener'><img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/></a>",mappings:[{if:"id~.*/-.*",then:""},{"#":"ignore-image-in-then",if:"_backend~*",then:"<a href='{_backend}/{id}' target='_blank' rel='noopener'><img src='./assets/svg/osm-logo-us.svg'/></a>"}],condition:"id~(node|way|relation)/[0-9]*"},{id:"dogicon",labels:["defaults"],mappings:[{if:"dog=no","#":"ignore-image-in-then",then:"<img textmode='🐕 ⃠' alt='no_dogs' src='./assets/layers/questions/no_dogs.svg'>"},{if:"dog=leashed","#":"ignore-image-in-then",then:"<img textmode='🐕' alt='dogs are allowed but leashed' src='./assets/layers/questions/dogs_leashed.svg'>"},{if:{or:["dog=yes","dog=unleashed"]},"#":"ignore-image-in-then",then:"<img textmode='🐕' alt='dogs are allowed' src='./assets/layers/questions/dogs_allowed.svg'>"}]}],PS=[],LS={id:wS,description:xS,source:ES,calculatedTags:SS,title:CS,pointRendering:IS,lineRendering:AS,tagRenderings:MS,titleIcons:NS,_layerIcon:PS};class rv{metaTaggging_for_usersettings(e){Qi.AddLazyProperty(e.properties,"_mastodon_candidate_md",()=>{var t;return(t=e.properties._description.match(/\[[^\]]*\]\((.*(mastodon|en.osm.town).*)\).*/))==null?void 0:t.at(1)}),Qi.AddLazyProperty(e.properties,"_d",()=>{var t,n;return((n=(t=e.properties._description)==null?void 0:t.replace(/&lt;/g,"<"))==null?void 0:n.replace(/&gt;/g,">"))??""}),Qi.AddLazyProperty(e.properties,"_mastodon_candidate_a",()=>(t=>{var i;const n=document.createElement("div");return n.innerHTML=t.properties._d,(i=Array.from(n.getElementsByTagName("a")).filter(o=>o.href.match(/mastodon|en.osm.town/)!==null)[0])==null?void 0:i.href})(e)),Qi.AddLazyProperty(e.properties,"_mastodon_link",()=>(t=>{var i;const n=document.createElement("div");return n.innerHTML=t.properties._d,(i=Array.from(n.getElementsByTagName("a")).filter(o=>{var a;return((a=o.getAttribute("rel"))==null?void 0:a.indexOf("me"))>=0})[0])==null?void 0:i.href})(e)),Qi.AddLazyProperty(e.properties,"_mastodon_candidate",()=>e.properties._mastodon_candidate_md??e.properties._mastodon_candidate_a),e.properties.__current_backgroun="initial_value"}}Ee(rv,"themeName","usersettings");var Wp,Jp;const Ac=class{constructor(e,t,n,i,o){Ee(this,"osmConnection");Ee(this,"mangroveIdentity");Ee(this,"installedUserThemes");Ee(this,"showAllQuestionsAtOnce");Ee(this,"showTags");Ee(this,"showCrosshair");Ee(this,"fixateNorth");Ee(this,"homeLocation");Ee(this,"language");Ee(this,"preferredBackgroundLayer");Ee(this,"imageLicense");Ee(this,"gpsLocationHistoryRetentionTime",new aa(7*24*60*60,"gps_location_retention"));Ee(this,"preferencesAsTags");Ee(this,"_mapProperties");this.osmConnection=e,this._mapProperties=o,this.osmConnection.GetPreference("translation-mode","false").addCallbackAndRunD(s=>{s=s.toLowerCase(),s==="true"||s==="yes"?(Zi.showLinkOnMobile.setData(!1),Zi.showLinkToWeblate.setData(!0)):s==="false"||s==="no"?Zi.showLinkToWeblate.setData(!1):s==="mobile"?(Zi.showLinkOnMobile.setData(!0),Zi.showLinkToWeblate.setData(!0)):(Zi.showLinkOnMobile.setData(!1),Zi.showLinkToWeblate.setData(!1))}),this.showAllQuestionsAtOnce=aa.asBoolean(this.osmConnection.GetPreference("show-all-questions","false",{documentation:"Either 'true' or 'false'. If set, all questions will be shown all at once"})),this.language=this.osmConnection.GetPreference("language"),this.showTags=this.osmConnection.GetPreference("show_tags"),this.showCrosshair=this.osmConnection.GetPreference("show_crosshair"),this.fixateNorth=this.osmConnection.GetPreference("fixate-north"),this.mangroveIdentity=new vf(this.osmConnection.GetLongPreference("identity","mangrove")),this.preferredBackgroundLayer=this.osmConnection.GetPreference("preferred-background-layer",void 0,{documentation:"The ID of a layer or layer category that MapComplete uses by default"}),this.imageLicense=this.osmConnection.GetPreference("pictures-license","CC0",{documentation:"The license under which new images are uploaded"}),this.installedUserThemes=this.InitInstalledUserThemes(),this.homeLocation=this.initHomeLocation(),this.preferencesAsTags=this.initAmendedPrefs(n,i),this.syncLanguage()}syncLanguage(){gd.wasInitialized("language")||this.language.syncWith(Zi.language)}static initUserRelatedState(){try{return new av(LS,"userinformationpanel")}catch{return}}GetUnofficialTheme(e){console.log("GETTING UNOFFICIAL THEME");const t=this.osmConnection.GetLongPreference("unofficial-theme-"+e),n=t.data;if(n===void 0||n==="undefined"||n===""){t.setData(null);return}try{const i=JSON.parse(n);return i.isOfficial=!1,i}catch{console.warn("Removing theme "+e+" as it could not be parsed from the preferences; the content is:",n),t.setData(null);return}}markLayoutAsVisited(e){if(!e){console.error("Trying to mark a layout as visited, but ",e," got passed");return}e.hideFromOverview&&this.osmConnection.isLoggedIn.addCallbackAndRunD(t=>{if(t)return this.osmConnection.GetPreference("hidden-theme-"+(e==null?void 0:e.id)+"-enabled").setData("true"),!0}),e.official||this.osmConnection.GetLongPreference("unofficial-theme-"+e.id).setData(JSON.stringify({id:e.id,icon:e.icon,title:e.title.translations,shortDescription:e.shortDescription.translations,definition:e.definition}))}InitInstalledUserThemes(){const e="mapcomplete-unofficial-theme-",t="-combined-length";return this.osmConnection.preferencesHandler.preferences.map(n=>Object.keys(n).filter(i=>i.startsWith(e)&&i.endsWith(t)).map(i=>i.substring(e.length,i.length-t.length)))}initHomeLocation(){const e=[],t=ov.ListStabilized(this.osmConnection.userDetails.map(n=>{if(n===void 0)return;const i=n.home;if(i!==void 0)return[i.lon,i.lat]})).map(n=>n===void 0?e:[{type:"Feature",properties:{id:"home","user:home":"yes",_lon:n[0],_lat:n[1]},geometry:{type:"Point",coordinates:n}}]);return new id(t)}initAmendedPrefs(e,t){var s,u;const n=new aa({_theme:e==null?void 0:e.id,"_theme:backgroundLayer":e==null?void 0:e.defaultBackgroundId,_backend:this.osmConnection.Backend(),_applicationOpened:new Date().toISOString(),_supports_sharing:typeof window>"u"?"no":window.navigator.share?"yes":"no"});for(const c in vd.userJourney)n.data["__userjourney_"+c]=vd.userJourney[c];for(const c of gd.initializedParameters())n.data["__url_parameter_initialized:"+c]="yes";const i=this.osmConnection;i.preferencesHandler.preferences.addCallback(c=>{for(const f in c){const l=c[f];if(f.endsWith("-combined-length")){const p=Number(l),b=f.substring(0,f.length-6);let _="";for(let E=0;E<p;E++)_+=c[b+E];n.data[b.substring(0,b.length-10)]=_}else n.data[f]=c[f]}n.ping(),console.log("Amended prefs are:",n.data)});const o=i.GetPreference("translation-mode");Zi.language.mapD(c=>{n.data._language=c;const f=o.data;if((f==="true"||f==="mobile")&&e!==void 0){const l=e.missingTranslations(),p=l.total,b=l.untranslated.get(c)??[],_=b.some(m=>m.startsWith("themes:")),E=Qi.Dedup(b.filter(m=>m.startsWith("layers:")).map(m=>m.slice(7).split(".")[0])),R=Qi.NoNull([_?{id:"theme:"+e.id,link:md.hrefToWeblateZen(c,"themes",e.id)}:void 0,...E.map(m=>({id:"layer:"+m,link:md.hrefToWeblateZen(c,"layers",m)}))]),D=b.length;n.data._translation_total=""+p,n.data._translation_translated_count=""+(p-D),n.data._translation_percentage=""+Math.floor(100*(p-D)/p),n.data._translation_links=JSON.stringify(R)}n.ping()},[o]);const a=new rv;i.userDetails.addCallback(c=>{for(const b in c)n.data["_"+b]=""+c[b];a.metaTaggging_for_usersettings({properties:n.data});const f=c.name.toLowerCase().replace(/\s+/g,""),l=yS.contributors.find(b=>b.contributor.toLowerCase().replace(/\s+/g,"")===f);l&&(n.data._translation_contributions=""+l.commits);const p=bS.contributors.find(b=>b.contributor.toLowerCase().replace(/\s+/g,"")===f);p&&(n.data._code_contributions=""+p.commits),n.ping()}),n.addCallbackD(c=>{for(const f in c)f.startsWith("_")||f==="mapcomplete-language"||(c[f+"-combined-0"]?this.osmConnection.GetLongPreference(f,"").setData(c[f]):this.osmConnection.GetPreference(f,void 0,{prefix:""}).setData(c[f]))});for(const c in t)t[c].addCallbackAndRun&&t[c].addCallbackAndRun(f=>{n.data["__"+c]!==f&&(n.data["__"+c]=""+f,n.ping())});return(u=(s=this._mapProperties)==null?void 0:s.rasterLayer)==null||u.addCallbackAndRun(c=>{var f;n.data.__current_background=(f=c==null?void 0:c.properties)==null?void 0:f.id,n.ping()}),n}};let Fs=Ac;Ee(Fs,"usersettingsConfig",Ac.initUserRelatedState()),Ee(Fs,"availableUserSettingsIds",((Jp=(Wp=Ac.usersettingsConfig)==null?void 0:Wp.tagRenderings)==null?void 0:Jp.map(e=>e.id))??[]),Ee(Fs,"SHOW_TAGS_VALUES",["always","yes","full"]);const RS=r=>({}),qp=r=>({});function Hp(r){let e,t,n,i;const o=[OS,TS],a=[];function s(u,c){return typeof u[0]=="string"?0:1}return e=s(r),t=a[e]=o[e](r),{c(){t.c(),n=Mc()},m(u,c){a[e].m(u,c),Yo(u,n,c),i=!0},p(u,c){let f=e;e=s(u),e===f?a[e].p(u,c):(Nc(),xr(a[f],1,1,()=>{a[f]=null}),Pc(),t=a[e],t?t.p(u,c):(t=a[e]=o[e](u),t.c()),Zt(t,1),t.m(n.parentNode,n))},i(u){i||(Zt(t),i=!0)},o(u){xr(t),i=!1},d(u){a[e].d(u),u&&jo(n)}}}function TS(r){let e;return{c(){e=rh("template")},m(t,n){Yo(t,e,n),r[8](e)},p:Hs,i:Hs,o:Hs,d(t){t&&jo(e),r[8](null)}}}function OS(r){let e,t;return e=new hv({props:{src:r[0],class:r[5]}}),{c(){ju(e.$$.fragment)},m(n,i){$u(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.src=n[0]),e.$set(o)},i(n){t||(Zt(e.$$.fragment,n),t=!0)},o(n){xr(e.$$.fragment,n),t=!1},d(n){Zu(e,n)}}}function DS(r){let e,t,n=r[0]!==void 0&&Hp(r);return{c(){n&&n.c(),e=Mc()},m(i,o){n&&n.m(i,o),Yo(i,e,o),t=!0},p(i,o){i[0]!==void 0?n?(n.p(i,o),o&1&&Zt(n,1)):(n=Hp(i),n.c(),Zt(n,1),n.m(e.parentNode,e)):n&&(Nc(),xr(n,1,1,()=>{n=null}),Pc())},i(i){t||(Zt(n),t=!0)},o(i){xr(n),t=!1},d(i){n&&n.d(i),i&&jo(e)}}}function BS(r){let e,t,n,i,o,a;const s=r[7].image,u=Ks(s,r,r[6],qp),c=u||DS(r),f=r[7].default,l=Ks(f,r,r[6],null);return{c(){e=rh("a"),c&&c.c(),t=Yp(),l&&l.c(),Mn(e,"class",n=bd(r[3].extraClasses,"button text-ellipsis")),Mn(e,"href",r[1]),Mn(e,"target",i=r[2]?"_blank":void 0),Mn(e,"rel",o=r[2]?"noopener":void 0)},m(p,b){Yo(p,e,b),c&&c.m(e,null),Yu(e,t),l&&l.m(e,null),a=!0},p(p,[b]){u?u.p&&(!a||b&64)&&Ws(u,s,p,p[6],a?Xs(s,p[6],b,RS):Js(p[6]),qp):c&&c.p&&(!a||b&17)&&c.p(p,a?b:-1),l&&l.p&&(!a||b&64)&&Ws(l,f,p,p[6],a?Xs(f,p[6],b,null):Js(p[6]),null),(!a||b&8&&n!==(n=bd(p[3].extraClasses,"button text-ellipsis")))&&Mn(e,"class",n),(!a||b&2)&&Mn(e,"href",p[1]),(!a||b&4&&i!==(i=p[2]?"_blank":void 0))&&Mn(e,"target",i),(!a||b&4&&o!==(o=p[2]?"noopener":void 0))&&Mn(e,"rel",o)},i(p){a||(Zt(c,p),Zt(l,p),a=!0)},o(p){xr(c,p),xr(l,p),a=!1},d(p){p&&jo(e),c&&c.d(p),l&&l.d(p)}}}function kS(r,e,t){let{$$slots:n={},$$scope:i}=e,{imageUrl:o=void 0}=e,{href:a}=e,{newTab:s=!1}=e,{options:u={}}=e,c,f=mv("block justify-center shrink-0 mr-4",(u==null?void 0:u.imgSize)??"h-11 w-11");fv(()=>{if(c&&o){let p;(o??"")===""?p=void 0:typeof o!="string"&&(p=o==null?void 0:o.SetClass(f)),p&&c.replaceWith(p.ConstructElement())}});function l(p){lv[p?"unshift":"push"](()=>{c=p,t(4,c)})}return r.$$set=p=>{"imageUrl"in p&&t(0,o=p.imageUrl),"href"in p&&t(1,a=p.href),"newTab"in p&&t(2,s=p.newTab),"options"in p&&t(3,u=p.options),"$$scope"in p&&t(6,i=p.$$scope)},[o,a,s,u,c,f,i,n,l]}class a3 extends Ql{constructor(e){super(),eh(this,e,kS,BS,th,{imageUrl:0,href:1,newTab:2,options:3})}}const FS=r=>({}),Gp=r=>({}),zS=r=>({}),Vp=r=>({});function Kp(r){let e,t,n,i;const o=[GS,HS,qS,US],a=[];function s(u,c){return!u[0]&&u[2]==="loading"?0:u[2]==="error"?1:u[2]==="logged-in"?2:u[2]==="not-attempted"?3:-1}return~(e=s(r))&&(t=a[e]=o[e](r)),{c(){t&&t.c(),n=Mc()},m(u,c){~e&&a[e].m(u,c),Yo(u,n,c),i=!0},p(u,c){let f=e;e=s(u),e===f?~e&&a[e].p(u,c):(t&&(Nc(),xr(a[f],1,1,()=>{a[f]=null}),Pc()),~e?(t=a[e],t?t.p(u,c):(t=a[e]=o[e](u),t.c()),Zt(t,1),t.m(n.parentNode,n)):t=null)},i(u){i||(Zt(t),i=!0)},o(u){xr(t),i=!1},d(u){~e&&a[e].d(u),u&&jo(n)}}}function US(r){let e;const t=r[10]["not-logged-in"],n=Ks(t,r,r[9],Gp);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&512)&&Ws(n,t,i,i[9],e?Xs(t,i[9],o,FS):Js(i[9]),Gp)},i(i){e||(Zt(n,i),e=!0)},o(i){xr(n,i),e=!1},d(i){n&&n.d(i)}}}function qS(r){let e;const t=r[10].default,n=Ks(t,r,r[9],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&512)&&Ws(n,t,i,i[9],e?Xs(t,i[9],o,null):Js(i[9]),null)},i(i){e||(Zt(n,i),e=!0)},o(i){xr(n,i),e=!1},d(i){n&&n.d(i)}}}function HS(r){let e,t,n,i,o;return t=new sv({props:{class:"m-2 h-8 w-8 shrink-0"}}),i=new cv({props:{t:r[6][r[3]]}}),{c(){e=rh("div"),ju(t.$$.fragment),n=Yp(),ju(i.$$.fragment),Mn(e,"class","alert max-w-64 flex items-center")},m(a,s){Yo(a,e,s),$u(t,e,null),Yu(e,n),$u(i,e,null),o=!0},p(a,s){const u={};s&8&&(u.t=a[6][a[3]]),i.$set(u)},i(a){o||(Zt(t.$$.fragment,a),Zt(i.$$.fragment,a),o=!0)},o(a){xr(t.$$.fragment,a),xr(i.$$.fragment,a),o=!1},d(a){a&&jo(e),Zu(t),Zu(i)}}}function GS(r){let e;const t=r[10].loading,n=Ks(t,r,r[9],Vp),i=n||VS();return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){n&&n.p&&(!e||a&512)&&Ws(n,t,o,o[9],e?Xs(t,o[9],a,zS):Js(o[9]),Vp)},i(o){e||(Zt(i,o),e=!0)},o(o){xr(i,o),e=!1},d(o){i&&i.d(o)}}}function VS(r){let e,t;return e=new vv({}),{c(){ju(e.$$.fragment)},m(n,i){$u(e,n,i),t=!0},i(n){t||(Zt(e.$$.fragment,n),t=!0)},o(n){xr(e.$$.fragment,n),t=!1},d(n){Zu(e,n)}}}function KS(r){let e,t,n=r[1]&&Kp(r);return{c(){n&&n.c(),e=Mc()},m(i,o){n&&n.m(i,o),Yo(i,e,o),t=!0},p(i,[o]){i[1]?n?(n.p(i,o),o&2&&Zt(n,1)):(n=Kp(i),n.c(),Zt(n,1),n.m(e.parentNode,e)):n&&(Nc(),xr(n,1,1,()=>{n=null}),Pc())},i(i){t||(Zt(n),t=!0)},o(i){xr(n),t=!1},d(i){n&&n.d(i),i&&jo(e)}}}function WS(r,e,t){var E,R,D;let n,i,o,{$$slots:a={},$$scope:s}=e,{state:u}=e,{ignoreLoading:c=!1}=e,f=((E=u==null?void 0:u.osmConnection)==null?void 0:E.loadingStatus)??new qs("logged-in");kf(r,f,m=>t(2,i=m));let l=((R=u==null?void 0:u.featureSwitches)==null?void 0:R.featureSwitchUserbadge)??new qs(!0);kf(r,l,m=>t(1,n=m));const p=uv.t.general,b={offline:p.loginFailedOfflineMode,unreachable:p.loginFailedUnreachableMode,unknown:p.loginFailedUnreachableMode,readonly:p.loginFailedReadonlyMode},_=((D=u==null?void 0:u.osmConnection)==null?void 0:D.apiIsOnline)??new qs("online");return kf(r,_,m=>t(3,o=m)),r.$$set=m=>{"state"in m&&t(8,u=m.state),"ignoreLoading"in m&&t(0,c=m.ignoreLoading),"$$scope"in m&&t(9,s=m.$$scope)},[c,n,i,o,f,l,b,_,u,s,a]}class s3 extends Ql{constructor(e){super(),eh(this,e,WS,KS,th,{state:8,ignoreLoading:0})}}function JS(r){let e,t,n,i,o,a=[r[1],{width:"375px"},{height:"375px"},{viewBox:"0 0 375 375"},{version:"1.1"},{id:"svg11"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:svg":"http://www.w3.org/2000/svg"}],s={};for(let u=0;u<a.length;u+=1)s=pl(s,a[u]);return{c(){e=Ff("svg"),t=Ff("defs"),n=Ff("path"),Mn(t,"id","defs15"),Mn(n,"id","path2"),ra(n,"color",r[0]),ra(n,"fill",r[0]),ra(n,"stroke-linecap","round"),ra(n,"stroke-linejoin","round"),ra(n,"-inkscape-stroke","none"),Mn(n,"d","M 53.929688 27.095703 C 32.119816 27.095703 16.970068 40.812733 11.746094 53.177734 C 7.106544 64.159419 7.5344948 73.99011 7.6914062 76.158203 L 8.4628906 188.625 L 7.6914062 301.08984 C 7.5344948 303.25794 7.106544 313.08863 11.746094 324.07031 C 16.970068 336.43531 32.119816 350.1543 53.929688 350.1543 C 87.406 350.1543 140.12695 349.40625 140.12695 349.40625 A 15.663316 15.663316 0 0 0 140.16602 349.40625 C 140.16602 349.40625 151.12665 349.32365 161.72266 342.59961 C 172.31866 335.87554 182.41602 320.93277 182.41602 300.11719 L 182.41602 294.41016 A 15.66175 15.66175 0 0 0 166.75391 278.74805 A 15.66175 15.66175 0 0 0 151.0918 294.41016 L 151.0918 300.11719 C 151.0918 312.48521 147.76532 314.35785 144.9375 316.15234 C 142.10968 317.94684 139.64648 318.08594 139.64648 318.08594 C 139.59848 318.08661 86.922647 318.83008 53.929688 318.83008 C 42.493509 318.83008 42.353165 316.03148 40.599609 311.88086 C 38.846054 307.73024 38.962891 302.7207 38.962891 302.7207 A 15.663316 15.663316 0 0 0 39.013672 301.56836 L 39.787109 188.73242 A 15.66175 15.66175 0 0 0 39.78125 188.625 A 15.66175 15.66175 0 0 0 39.787109 188.51758 L 39.013672 75.681641 A 15.663316 15.663316 0 0 0 38.962891 74.527344 C 38.962891 74.527344 38.846054 69.517805 40.599609 65.367188 C 42.353165 61.216571 42.493508 58.419922 53.929688 58.419922 C 86.922646 58.419922 139.59847 59.161432 139.64648 59.162109 C 139.64648 59.162109 142.10968 59.303163 144.9375 61.097656 C 147.76532 62.892149 151.0918 64.762835 151.0918 77.130859 L 151.0918 82.839844 A 15.66175 15.66175 0 0 0 166.75391 98.5 A 15.66175 15.66175 0 0 0 182.41602 82.839844 L 182.41602 77.130859 C 182.41602 56.315277 172.31866 41.374459 161.72266 34.650391 C 151.12665 27.926322 140.16602 27.84375 140.16602 27.84375 A 15.663316 15.663316 0 0 0 140.12695 27.841797 C 140.12695 27.841797 87.406001 27.095703 53.929688 27.095703 z M 234.94336 74.408203 A 19.8664 19.8664 0 0 0 225.36719 78.158203 C 225.36719 78.158203 201.76359 95.524722 177.85938 116.39258 C 165.90727 126.82651 153.84111 138.11038 144.11523 149.23828 C 134.38936 160.36618 124.82118 169.15316 124.58594 187.41211 A 19.868386 19.868386 0 0 0 124.58594 187.41406 C 124.34949 205.98477 134.08341 214.90837 143.80273 226.0918 C 153.52206 237.27522 165.61857 248.59181 177.61914 259.06055 C 201.62029 279.99802 225.39648 297.42578 225.39648 297.42578 A 19.8664 19.8664 0 0 0 253.16602 293.16406 A 19.8664 19.8664 0 0 0 248.9043 265.39453 C 248.9043 265.39453 226.16776 248.68556 203.73828 229.11914 C 194.28077 220.86885 185.03853 212.15104 177.75586 204.33594 L 359.47461 204.33594 A 16.875 16.875 0 0 0 376.34961 187.46094 A 16.875 16.875 0 0 0 359.47461 170.58594 L 178.46289 170.58594 C 185.70519 162.89528 194.75718 154.38471 203.98828 146.32617 C 226.3516 126.80349 248.93359 110.14648 248.93359 110.14648 A 19.8664 19.8664 0 0 0 253.14453 82.369141 A 19.8664 19.8664 0 0 0 234.94336 74.408203 z "),yd(e,s)},m(u,c){Yo(u,e,c),Yu(e,t),Yu(e,n),i||(o=[Ps(e,"click",r[2]),Ps(e,"mouseover",r[3]),Ps(e,"mouseenter",r[4]),Ps(e,"mouseleave",r[5]),Ps(e,"keydown",r[6])],i=!0)},p(u,[c]){c&1&&ra(n,"color",u[0]),c&1&&ra(n,"fill",u[0]),yd(e,s=dv(a,[c&2&&u[1],{width:"375px"},{height:"375px"},{viewBox:"0 0 375 375"},{version:"1.1"},{id:"svg11"},{xmlns:"http://www.w3.org/2000/svg"},{"xmlns:svg":"http://www.w3.org/2000/svg"}]))},i:Hs,o:Hs,d(u){u&&jo(e),i=!1,pv(o)}}}function XS(r,e,t){const n=["color"];let i=_d(e,n),{color:o="#000000"}=e;function a(l){Ls.call(this,r,l)}function s(l){Ls.call(this,r,l)}function u(l){Ls.call(this,r,l)}function c(l){Ls.call(this,r,l)}function f(l){Ls.call(this,r,l)}return r.$$set=l=>{e=pl(pl({},e),gv(l)),t(1,i=_d(e,n)),"color"in l&&t(0,o=l.color)},[o,i,a,s,u,c,f]}class u3 extends Ql{constructor(e){super(),eh(this,e,XS,JS,th,{color:0})}}export{Po as B,dl as F,sn as G,s3 as L,id as S,ze as T,Fs as U,a3 as a,u3 as b,bS as c,yl as d,no as e,gs as p,yS as t};
//# sourceMappingURL=Login-0af34759.js.map
