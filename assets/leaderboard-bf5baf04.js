import"./modulepreload-polyfill-3cfb730f.js";import{S as N,i as q,s as y,e as h,a as I,N as k,d as v,f as u,g as S,E as B,t as E,O as L,h as C,F as j,D as H,c as J,m as P,n as U,j as R,M as T,b as M}from"./index-141c0a67.js";import{a as z,U as A}from"./UIEventSource-3dc88535.js";import{L as G}from"./Loading-23785c54.js";import{O as K}from"./OsmConnection-430322da.js";import"./Loading-737336d6.js";import"./LocalStorageSource-5e883918.js";import"./Constants-90b140d3.js";function D(r,e,o){const a=r.slice();return a[6]=e[o],a}function Q(r){let e,o;return e=new G({}),{c(){J(e.$$.fragment)},m(a,n){P(e,a,n),o=!0},p:U,i(a){o||(E(e.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),o=!1},d(a){R(e,a)}}}function V(r){let e,o,a,n,l=r[0].date+"",i,f=r[0].leaderboard,s=[];for(let t=0;t<f.length;t+=1)s[t]=F(D(r,f,t));return{c(){e=h("table"),o=h("tr"),o.innerHTML=`<th>Rank</th> 
        <th>Contributor</th> 
        <th>Number of images contributed</th>`,a=I();for(let t=0;t<s.length;t+=1)s[t].c();n=k(`
    Statistics generated on `),i=k(l)},m(t,m){v(t,e,m),u(e,o),u(e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);v(t,n,m),v(t,i,m)},p(t,m){if(m&3){f=t[0].leaderboard;let c;for(c=0;c<f.length;c+=1){const d=D(t,f,c);s[c]?s[c].p(d,m):(s[c]=F(d),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=f.length}m&1&&l!==(l=t[0].date+"")&&L(i,l)},i:U,o:U,d(t){t&&C(e),T(s,t),t&&C(n),t&&C(i)}}}function W(r){let e,o=r[6].name+"",a,n;return{c(){e=h("a"),a=k(o),M(e,"href",n=r[6].account)},m(l,i){v(l,e,i),u(e,a)},p(l,i){i&1&&o!==(o=l[6].name+"")&&L(a,o),i&1&&n!==(n=l[6].account)&&M(e,"href",n)},d(l){l&&C(e)}}}function X(r){let e,o=r[6].name+"",a,n;return{c(){e=h("a"),a=k(o),M(e,"class","thanks"),M(e,"href",n=r[6].account)},m(l,i){v(l,e,i),u(e,a)},p(l,i){i&1&&o!==(o=l[6].name+"")&&L(a,o),i&1&&n!==(n=l[6].account)&&M(e,"href",n)},d(l){l&&C(e)}}}function F(r){let e,o,a=r[6].rank+"",n,l,i,f,s,t,m=r[6].nrOfImages+"",c,d,O;function _(b,w){return b[1]===b[6].name?X:W}let g=_(r),p=g(r);return{c(){e=h("tr"),o=h("td"),n=k(a),l=I(),i=h("td"),p.c(),f=I(),s=h("td"),t=h("b"),c=k(m),d=k(`
            total images`),O=I()},m(b,w){v(b,e,w),u(e,o),u(o,n),u(e,l),u(e,i),p.m(i,null),u(e,f),u(e,s),u(s,t),u(t,c),u(s,d),u(e,O)},p(b,w){w&1&&a!==(a=b[6].rank+"")&&L(n,a),g===(g=_(b))&&p?p.p(b,w):(p.d(1),p=g(b),p&&(p.c(),p.m(i,null))),w&1&&m!==(m=b[6].nrOfImages+"")&&L(c,m)},d(b){b&&C(e),p.d()}}}function Y(r){let e,o,a,n,l,i,f,s,t,m;const c=[V,Q],d=[];function O(_,g){return _[0]?0:1}return n=O(r),l=d[n]=c[n](r),{c(){e=h("main"),o=h("h1"),o.textContent="Contributed images with MapComplete: leaderboard",a=I(),l.c(),i=I(),f=h("div"),s=k("Logged in as "),t=k(r[1])},m(_,g){v(_,e,g),u(e,o),u(e,a),d[n].m(e,null),u(e,i),u(e,f),u(f,s),u(f,t),m=!0},p(_,[g]){let p=n;n=O(_),n===p?d[n].p(_,g):(H(),S(d[p],1,1,()=>{d[p]=null}),B(),l=d[n],l?l.p(_,g):(l=d[n]=c[n](_),l.c()),E(l,1),l.m(e,i)),(!m||g&2)&&L(t,_[1])},i(_){m||(E(l),m=!0)},o(_){S(l),m=!1},d(_){_&&C(e),d[n].d()}}}function Z(r,e,o){let a,n,i=new K({attemptLogin:!0}).userDetails.map(t=>t.name);j(r,i,t=>o(1,n=t));let{source:f="https://raw.githubusercontent.com/pietervdvn/MapComplete-data/main/picture-leaderboard.json"}=e,s=z.FromPromise(A.downloadJsonCached(f));return j(r,s,t=>o(0,a=t)),r.$$set=t=>{"source"in t&&o(4,f=t.source)},[a,n,i,s,f]}class $ extends N{constructor(e){super(),q(this,e,Z,Y,y,{source:4})}}new $({target:document.getElementById("main")});
//# sourceMappingURL=leaderboard-bf5baf04.js.map
