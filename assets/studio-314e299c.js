var $i=Object.defineProperty;var xi=(o,e,t)=>e in o?$i(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var pe=(o,e,t)=>(xi(o,typeof e!="symbol"?e+"":e,t),t);import{a as ue,U as Te,I as Ci}from"./UIEventSource-bbce5861.js";import{S as ae,i as re,s as le,F as be,l as ge,o as $e,b as _,q as xe,d as b,f as g,r as K,G as ye,H as we,I as ve,u as Ee,t as u,g as m,h as y,v as Ie,w as Ce,x as Pe,y as de,z as ne,A as G,C as Y,e as v,c as $,a as A,O,m as x,U as Z,j as C,D as te,P as Xe,n as z,T as fe,a1 as lt,Q as Ri,R as Ai,N as Si,p as Mn,J as pt,E as Me,W as et,k as Ii}from"./index-b912cb3e.js";import{m as He,o as qe,a1 as ct,a2 as ft,a3 as ut,a4 as ji,a5 as On,a6 as ht,a7 as Ji,p as Wi}from"./Add-eee93d68.js";import{L as Mi,af as Dn,h as Nn,C as Fn,ag as Oi,ah as Be,ai as Ke,m as Di,aj as Ni}from"./FixImages-a81f407c.js";import{P as Ln,V as Fi,A as gt,a as Li,b as Ei,t as En,c as Pi}from"./AllKnownLayouts-d5236033.js";import{L as Pn}from"./LocalStorageSource-da1dc476.js";import{H as dt,Q as Hi,T as Bi,a as Ui}from"./tw-merge-61f8e831.js";import{C as zi,v as Vi}from"./Constants-e88b1152.js";import{E as mt,I as Qi,C as Gi}from"./Checkbox-bf25d2fb.js";import{_ as Yi,T as Hn,F as Bn}from"./preload-helper-92f2d0bc.js";import{B as De}from"./BackButton-ef323e92.js";import{a as Ki}from"./Loading-e16400d6.js";import{L as Zi,a as Un}from"./placeholder-31692285.js";import{O as Xi}from"./OsmConnection-51871801.js";import"./LanguagePicker-14b19501.js";import"./Dropdown-66fd9746.js";import"./ToSvelte-cbfa2f46.js";import"./Login-464f7b06.js";import"./LayoutConfig-6e3d67f8.js";function eo(o){let e,t,n,i,a;const s=o[2].default,l=be(s,o,o[1],null);let r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},o[0]],h={};for(let d=0;d<r.length;d+=1)h=ge(h,r[d]);return{c(){e=$e("svg"),l&&l.c(),t=$e("path"),_(t,"fill-rule","evenodd"),_(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"),_(t,"clip-rule","evenodd"),xe(e,h)},m(d,p){b(d,e,p),l&&l.m(e,null),g(e,t),n=!0,i||(a=[K(e,"click",o[3]),K(e,"mouseover",o[4]),K(e,"mouseenter",o[5]),K(e,"mouseleave",o[6]),K(e,"keydown",o[7])],i=!0)},p(d,[p]){l&&l.p&&(!n||p&2)&&ye(l,s,d,d[1],n?ve(s,d[1],p,null):we(d[1]),null),xe(e,h=Ee(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},p&1&&d[0]]))},i(d){n||(u(l,d),n=!0)},o(d){m(l,d),n=!1},d(d){d&&y(e),l&&l.d(d),i=!1,Ie(a)}}}function to(o,e,t){const n=[];let i=Ce(e,n),{$$slots:a={},$$scope:s}=e;function l(c){de.call(this,o,c)}function r(c){de.call(this,o,c)}function h(c){de.call(this,o,c)}function d(c){de.call(this,o,c)}function p(c){de.call(this,o,c)}return o.$$set=c=>{e=ge(ge({},e),Pe(c)),t(0,i=Ce(e,n)),"$$scope"in c&&t(1,s=c.$$scope)},[i,s,a,l,r,h,d,p]}class no extends ae{constructor(e){super(),re(this,e,to,eo,le,{})}}function io(o){let e,t,n,i,a;const s=o[2].default,l=be(s,o,o[1],null);let r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},o[0]],h={};for(let d=0;d<r.length;d+=1)h=ge(h,r[d]);return{c(){e=$e("svg"),l&&l.c(),t=$e("path"),_(t,"fill-rule","evenodd"),_(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"),_(t,"clip-rule","evenodd"),xe(e,h)},m(d,p){b(d,e,p),l&&l.m(e,null),g(e,t),n=!0,i||(a=[K(e,"click",o[3]),K(e,"mouseover",o[4]),K(e,"mouseenter",o[5]),K(e,"mouseleave",o[6]),K(e,"keydown",o[7])],i=!0)},p(d,[p]){l&&l.p&&(!n||p&2)&&ye(l,s,d,d[1],n?ve(s,d[1],p,null):we(d[1]),null),xe(e,h=Ee(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},p&1&&d[0]]))},i(d){n||(u(l,d),n=!0)},o(d){m(l,d),n=!1},d(d){d&&y(e),l&&l.d(d),i=!1,Ie(a)}}}function oo(o,e,t){const n=[];let i=Ce(e,n),{$$slots:a={},$$scope:s}=e;function l(c){de.call(this,o,c)}function r(c){de.call(this,o,c)}function h(c){de.call(this,o,c)}function d(c){de.call(this,o,c)}function p(c){de.call(this,o,c)}return o.$$set=c=>{e=ge(ge({},e),Pe(c)),t(0,i=Ce(e,n)),"$$scope"in c&&t(1,s=c.$$scope)},[i,s,a,l,r,h,d,p]}let so=class extends ae{constructor(e){super(),re(this,e,oo,io,le,{})}};function ao(o){let e,t,n,i,a;const s=o[2].default,l=be(s,o,o[1],null);let r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},o[0]],h={};for(let d=0;d<r.length;d+=1)h=ge(h,r[d]);return{c(){e=$e("svg"),l&&l.c(),t=$e("path"),_(t,"fill-rule","evenodd"),_(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z"),_(t,"clip-rule","evenodd"),xe(e,h)},m(d,p){b(d,e,p),l&&l.m(e,null),g(e,t),n=!0,i||(a=[K(e,"click",o[3]),K(e,"mouseover",o[4]),K(e,"mouseenter",o[5]),K(e,"mouseleave",o[6]),K(e,"keydown",o[7])],i=!0)},p(d,[p]){l&&l.p&&(!n||p&2)&&ye(l,s,d,d[1],n?ve(s,d[1],p,null):we(d[1]),null),xe(e,h=Ee(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},p&1&&d[0]]))},i(d){n||(u(l,d),n=!0)},o(d){m(l,d),n=!1},d(d){d&&y(e),l&&l.d(d),i=!1,Ie(a)}}}function ro(o,e,t){const n=[];let i=Ce(e,n),{$$slots:a={},$$scope:s}=e;function l(c){de.call(this,o,c)}function r(c){de.call(this,o,c)}function h(c){de.call(this,o,c)}function d(c){de.call(this,o,c)}function p(c){de.call(this,o,c)}return o.$$set=c=>{e=ge(ge({},e),Pe(c)),t(0,i=Ce(e,n)),"$$scope"in c&&t(1,s=c.$$scope)},[i,s,a,l,r,h,d,p]}class lo extends ae{constructor(e){super(),re(this,e,ro,ao,le,{})}}function ho(o){let e,t,n,i,a;const s=o[2].default,l=be(s,o,o[1],null);let r=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},o[0]],h={};for(let d=0;d<r.length;d+=1)h=ge(h,r[d]);return{c(){e=$e("svg"),l&&l.c(),t=$e("path"),_(t,"stroke-linecap","round"),_(t,"stroke-linejoin","round"),_(t,"stroke-width","2"),_(t,"d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),xe(e,h)},m(d,p){b(d,e,p),l&&l.m(e,null),g(e,t),n=!0,i||(a=[K(e,"click",o[3]),K(e,"mouseover",o[4]),K(e,"mouseenter",o[5]),K(e,"mouseleave",o[6]),K(e,"keydown",o[7])],i=!0)},p(d,[p]){l&&l.p&&(!n||p&2)&&ye(l,s,d,d[1],n?ve(s,d[1],p,null):we(d[1]),null),xe(e,h=Ee(r,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},p&1&&d[0]]))},i(d){n||(u(l,d),n=!0)},o(d){m(l,d),n=!1},d(d){d&&y(e),l&&l.d(d),i=!1,Ie(a)}}}function po(o,e,t){const n=[];let i=Ce(e,n),{$$slots:a={},$$scope:s}=e;function l(c){de.call(this,o,c)}function r(c){de.call(this,o,c)}function h(c){de.call(this,o,c)}function d(c){de.call(this,o,c)}function p(c){de.call(this,o,c)}return o.$$set=c=>{e=ge(ge({},e),Pe(c)),t(0,i=Ce(e,n)),"$$scope"in c&&t(1,s=c.$$scope)},[i,s,a,l,r,h,d,p]}class co extends ae{constructor(e){super(),re(this,e,po,ho,le,{})}}function fo(o){let e,t,n,i,a;const s=o[2].default,l=be(s,o,o[1],null);let r=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},o[0]],h={};for(let d=0;d<r.length;d+=1)h=ge(h,r[d]);return{c(){e=$e("svg"),l&&l.c(),t=$e("path"),_(t,"stroke-linecap","round"),_(t,"stroke-linejoin","round"),_(t,"stroke-width","2"),_(t,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),xe(e,h)},m(d,p){b(d,e,p),l&&l.m(e,null),g(e,t),n=!0,i||(a=[K(e,"click",o[3]),K(e,"mouseover",o[4]),K(e,"mouseenter",o[5]),K(e,"mouseleave",o[6]),K(e,"keydown",o[7])],i=!0)},p(d,[p]){l&&l.p&&(!n||p&2)&&ye(l,s,d,d[1],n?ve(s,d[1],p,null):we(d[1]),null),xe(e,h=Ee(r,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{viewBox:"0 0 24 24"},{stroke:"currentColor"},{"aria-hidden":"true"},p&1&&d[0]]))},i(d){n||(u(l,d),n=!0)},o(d){m(l,d),n=!1},d(d){d&&y(e),l&&l.d(d),i=!1,Ie(a)}}}function uo(o,e,t){const n=[];let i=Ce(e,n),{$$slots:a={},$$scope:s}=e;function l(c){de.call(this,o,c)}function r(c){de.call(this,o,c)}function h(c){de.call(this,o,c)}function d(c){de.call(this,o,c)}function p(c){de.call(this,o,c)}return o.$$set=c=>{e=ge(ge({},e),Pe(c)),t(0,i=Ce(e,n)),"$$scope"in c&&t(1,s=c.$$scope)},[i,s,a,l,r,h,d,p]}class go extends ae{constructor(e){super(),re(this,e,uo,fo,le,{})}}class zn{constructor(e,t,n,i){pe(this,"schema");pe(this,"category");pe(this,"server");pe(this,"showIntro",Pn.Get("studio-show-intro","intro"));pe(this,"expertMode");pe(this,"configuration",new ue({}));pe(this,"messages");pe(this,"selectedTab",new ue(0));pe(this,"highlightedItem",new ue(void 0));pe(this,"sendingUpdates",!1);pe(this,"_stores",new Map);this.schema=e,this.server=t,this.category=n,this.expertMode=(i==null?void 0:i.expertMode)??new ue(!1);const a=this.getId();this.configuration.mapD(s=>{if(!this.sendingUpdates){console.log("Not sending updates yet! Trigger 'startSendingUpdates' first");return}return JSON.stringify(s,null,"  ")}).stabilized(100).addCallbackD(async s=>{const l=a.data;if(l===void 0){console.warn("No id found in layer, not updating");return}await this.server.update(l,s,this.category)}),this.messages=this.createMessagesStore()}startSavingUpdates(e=!0){this.sendingUpdates=e,e&&this.configuration.ping()}getCurrentValueFor(e){let t=this.configuration.data;for(let n=0;n<e.length;n++){if(t==null)return;const i=e[n];t=t[i]}return t}async delete(){await this.server.delete(this.getId().data,this.category)}getStoreFor(e){const t=e.join("."),n=new ue(this.getCurrentValueFor(e));return n.addCallback(i=>{this.setValueAt(e,i)}),this._stores.set(t,n),this.configuration.addCallbackD(()=>{n.setData(this.getCurrentValueFor(e))}),n}register(e,t,n=!0){const i=t.addCallback(a=>{this.setValueAt(e,a)});return n||this.setValueAt(e,t.data),i}getSchemaStartingWith(e){return this.schema.filter(t=>!e.some((n,i)=>!(t.path.length>e.length&&t.path[i]===n)))}getTranslationAt(e){const t=this.getSchema(e)[0];return{path:e,type:"translation",hints:{typehint:"translation"},required:t.required??!1,description:t.description??"A translatable object"}}getSchema(e){const t=this.schema.filter(n=>n!==void 0&&!e.some((i,a)=>!(n.path.length==e.length&&n.path[a]===i)));return t.length==0&&console.warn("No schemas found for path",e.join(".")),t}setValueAt(e,t){let n=this.configuration.data;const i=t==null||t===""||typeof t=="object"&&Object.keys(t).length===0;for(let s=0;s<e.length-1;s++){const l=e[s];if(n[l]===void 0){if(i)return;n[l]=typeof e[s+1]=="number"?[]:{}}n=n[l]}const a=e.at(-1);i?n&&n[a]&&(delete n[a],this.configuration.ping()):n[a]!==t&&(n[a]=t,this.configuration.ping())}messagesFor(e){return this.messages.map(t=>t?t.filter(n=>{if(n.level==="debug"||n.level==="information")return!1;const i=n.context.path;for(let a=0;a<Math.min(i.length,e.length);a++)if(i[a]!==e[a])return!1;return!0}):[])}createMessagesStore(){return this.configuration.mapAsyncD(async e=>this.validate?await this.validate(e):[]).map(e=>e??[])}}class mo extends Oi{constructor(t,n,i){super("When validating a layer, the tagRenderings are first expanded. Some builtin tagRendering-calls (e.g. `contact`) will introduce _multiple_ tagRenderings, causing the count to be off. This class rewrites the error messages to fix this",[],"ContextRewritingStep");pe(this,"_step");pe(this,"_state");pe(this,"_getTagRenderings");this._state=t,this._step=n,this._getTagRenderings=i}convert(t,n){var l;const i=this._step.convert(t,n),a=(l=t.tagRenderings)==null?void 0:l.map(r=>r.id);if(!a)return i;let s;return i===void 0?s=new Ln(this._state).convert(t,n).tagRenderings:s=this._getTagRenderings(i),n.rewriteMessages(r=>{if(r[0]!=="tagRenderings")return;const h=[...r],d=s[h[1]].id,p=a.indexOf(d);if(p<0){console.warn("Original ID was not found: ",d);return}return h[1]=p,h}),i}}class Vn extends zn{constructor(t,n,i,a){super(t,n,"layers",a);pe(this,"osmConnection");pe(this,"imageUploadManager",{getCountsFor(){return 0}});pe(this,"layout");pe(this,"featureSwitches");pe(this,"testTags",new ue({id:"node/-12345"}));pe(this,"exampleFeature",{type:"Feature",properties:this.testTags.data,geometry:{type:"Point",coordinates:[3.21,51.2]}});this.osmConnection=i,this.layout={getMatchingLayer:()=>{try{return new Mi(this.configuration.data,"dynamic")}catch{return}}},this.featureSwitches={featureSwitchIsDebugging:new ue(!0)},this.addMissingTagRenderingIds();function s(l,r){if(!l)return!1;if(l[r]){const h=l[r].length,d=Te.NoNull(l[r]);if(d.length!=h)return l[r]=d,!0}return!1}this.configuration.addCallbackAndRunD(l=>{let r=s(l,"tagRenderings")||s(l,"pointRenderings");for(const h of l.tagRenderings??[]){if(typeof h=="string")continue;const d=h;d.freeform&&Object.keys(d.freeform).length===0&&(delete d.freeform,r=!0)}r&&this.configuration.ping()})}buildValidation(t){return new mo(t,new Dn(new Ln(t),new Fi("dynamic",!1,void 0,!0)),n=>n.raw.tagRenderings)}getId(){return this.configuration.mapD(t=>t.id)}addMissingTagRenderingIds(){this.configuration.addCallbackD(t=>{var i,a,s,l,r,h;const n=Te.NoNull(t.tagRenderings??[]);for(let d=0;d<n.length;d++){const p=n[d];if(typeof p!="string"&&!p.id&&!p.override){const c=p;let f=""+d+"_"+Te.randomString(5);(i=c==null?void 0:c.freeform)!=null&&i.key?f=(a=c==null?void 0:c.freeform)==null?void 0:a.key:(l=(s=c.mappings)==null?void 0:s[0])!=null&&l.if&&(f=((r=c.freeform)==null?void 0:r.key)??((h=Nn.Tag(c.mappings[0].if).usedKeys())==null?void 0:h[0])??""+d),c.id=f}}})}async validate(t){const n=gt.getSharedLayersConfigs(),i=n.get("questions"),a=new Map;for(const h of i.tagRenderings)a.set(h.id,h);const s={tagRenderings:a,sharedLayers:n},l=this.buildValidation(s),r=Fn.construct([],["prepare"]);try{l.convert(t,r)}catch(h){console.error(h),r.err(h)}return r.messages}}class bo extends zn{constructor(e,t,n){super(e,t,"themes",n),this.setupFixers()}buildValidation(e){return new Dn(new Li(e),new Ei(void 0,"",!1,new Set(e.tagRenderings.keys())))}getId(){return this.configuration.mapD(e=>e.id)}setupFixers(){this.configuration.addCallbackAndRunD(e=>{if(e.layers)for(let t=e.layers.length;t>=0;t--)e.layers[t]||e.layers.splice(t,1)})}async validate(e){const t=gt.getSharedLayersConfigs();for(const r of e.layers??[]){if(typeof r!="string"||!r.startsWith("https://"))continue;const h=await Te.downloadJsonCached(r,1e3*60*10);t.set(r,h)}const n=t.get("questions"),i=new Map;for(const r of n.tagRenderings)i.set(r.id,r);const a={tagRenderings:i,sharedLayers:t},s=this.buildValidation(a),l=Fn.construct([],["prepare"]);e.layers&&Te.NoNullInplace(e.layers);try{s.convert(e,l)}catch(r){console.error(r),l.err(r)}return l.messages}}const Qn=[{path:[],required:!1,hints:{},type:"object",description:"Configuration for a single layer"},{path:["id"],required:!0,hints:{typehint:"id",group:"Basic",question:"What is the identifier of this layer?"},type:"string",description:`This should be a simple, lowercase, human readable string that is used to identify the layer.
 A good ID is:
 - a noun
 - written in singular
 - describes the object
 - in english
 - only has lowercase letters, numbers or underscores. Do not use a space or a dash`},{path:["name"],required:!1,hints:{group:"Basic",question:"What is the name of this layer?",ifunset:"This will hide the layer in the layer control, making it not filterable and not toggleable"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Used in the layer control panel to toggle a layer on and of."},{path:["description"],required:!1,hints:{group:"Basic",question:"How would you describe the features that are shown on this layer?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A description for the features shown in this layer.
This often resembles the introduction of the wiki.osm.org-page for this feature.`},{path:["source"],required:!0,hints:{types:"Load data with specific tags from OpenStreetMap ; Load data from an external geojson source ;",typesdefault:"0",group:"Basic",question:"Where should the data be fetched from?",title:"Data Source"},type:[{type:"object",properties:{osmTags:{$ref:"#/definitions/TagConfigJson",description:`question: Which tags must be present on the feature to show it in this layer?
Every source must set which tags have to be present in order to load the given layer.`}},required:["osmTags"]},{type:"object",properties:{geoJson:{description:`The actual source of the data to load, if loaded via geojson.

# A single geojson-file
source: {geoJson: "https://my.source.net/some-geo-data.geojson"}
 fetches a geojson from a third party source

# A tiled geojson source
source: {geoJson: "https://my.source.net/some-tile-geojson-{layer}-{z}-{x}-{y}.geojson", geoJsonZoomLevel: 14}
 to use a tiled geojson source. The web server must offer multiple geojsons. {z}, {x} and {y} are substituted by the location; {layer} is substituted with the id of the loaded layer

Some API's use a BBOX instead of a tile, this can be used by specifying {y_min}, {y_max}, {x_min} and {x_max}

question: What is the URL of the geojson?
type: url`,type:"string"},geoJsonZoomLevel:{description:`To load a tiled geojson layer, set the zoomlevel of the tiles

question: If using a tiled geojson, what is the zoomlevel of the tiles?
ifunset: This is not a tiled geojson`,type:"number"},mercatorCrs:{description:`Some API's use a mercator-projection (EPSG:900913) instead of WGS84. Set the flag \`mercatorCrs: true\`  in the source for this

question: Does this geojson use  EPSG:900913 instead of WGS84 as projection?
iftrue: This geojson uses EPSG:900913 instead of WGS84
ifunset: This geojson uses WGS84 just like most geojson (default)`,type:"boolean"},idKey:{description:`Some API's have an id-field, but give it a different name.
Setting this key will rename this field into 'id'

ifunset: An id with key \`id\` will be assigned automatically if no attribute \`id\` is set
inline: This geojson uses <b>{value}</b> as attribute to set the id
question: What is the name of the attribute containing the ID of the object?`,type:"string"}},required:["geoJson"]},{enum:["special","special:library"],type:"string"}],description:`This determines where the data for the layer is fetched: from OSM or from an external geojson dataset.
If no 'geojson' is defined, data will be fetched from overpass and the OSM-API.
Every source _must_ define which tags _must_ be present in order to be picked up.
Note: a source must always be defined. 'special' is only allowed if this is a builtin-layer`},{path:["source","osmTags"],required:!0,hints:{typehint:"tag",question:"Which tags must be present on the feature to show it in this layer?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"Every source must set which tags have to be present in order to load the given layer."},{path:["source","geoJson"],required:!0,hints:{typehint:"url",question:"What is the URL of the geojson?"},type:"string",description:`The actual source of the data to load, if loaded via geojson.
# A single geojson-file
source: {geoJson: "https://my.source.net/some-geo-data.geojson"}
 fetches a geojson from a third party source
# A tiled geojson source
source: {geoJson: "https://my.source.net/some-tile-geojson-{layer}-{z}-{x}-{y}.geojson", geoJsonZoomLevel: 14}
 to use a tiled geojson source. The web server must offer multiple geojsons. {z}, {x} and {y} are substituted by the location; {layer} is substituted with the id of the loaded layer
Some API's use a BBOX instead of a tile, this can be used by specifying {y_min}, {y_max}, {x_min} and {x_max}`},{path:["source","geoJsonZoomLevel"],required:!1,hints:{question:"If using a tiled geojson, what is the zoomlevel of the tiles?",ifunset:"This is not a tiled geojson"},type:"number",description:"To load a tiled geojson layer, set the zoomlevel of the tiles"},{path:["source","mercatorCrs"],required:!1,hints:{question:"Does this geojson use  EPSG:900913 instead of WGS84 as projection?",iftrue:"This geojson uses EPSG:900913 instead of WGS84",ifunset:"This geojson uses WGS84 just like most geojson (default)"},type:"boolean",description:"Some API's use a mercator-projection (EPSG:900913) instead of WGS84. Set the flag `mercatorCrs: true`  in the source for this"},{path:["source","idKey"],required:!1,hints:{question:"What is the name of the attribute containing the ID of the object?",ifunset:"An id with key `id` will be assigned automatically if no attribute `id` is set",inline:"This geojson uses <b>{value}</b> as attribute to set the id"},type:"string",description:`Some API's have an id-field, but give it a different name.
Setting this key will rename this field into 'id'`},{path:["calculatedTags"],required:!1,hints:{group:"expert",question:"What extra attributes should be calculated with javascript?"},type:"array",description:`A list of extra tags to calculate, specified as "keyToAssignTo=javascript-expression".
There are a few extra functions available. Refer to <a>Docs/CalculatedTags.md</a> for more information
The functions will be run in order, e.g.
[
 "_max_overlap_m2=Math.max(...feat.overlapsWith("someOtherLayer").map(o => o.overlap))
 "_max_overlap_ratio=Number(feat._max_overlap_m2)/feat.area
]
The specified tags are evaluated lazily. E.g. if a calculated tag is only used in the popup (e.g. the number of nearby features),
the expensive calculation will only be performed then for that feature. This avoids clogging up the contributors PC when all features are loaded.
If a tag has to be evaluated strictly, use ':=' instead:
[
"_some_key:=some_javascript_expression"
]
See the full documentation on [https://github.com/pietervdvn/MapComplete/blob/master/Docs/CalculatedTags.md]`},{path:["isShown"],required:!1,hints:{group:"advanced",question:"What other tags should features match for being shown?",ifunset:"all features which match the 'source'-specification are shown."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, only features matching this extra tag will be shown.
This is useful to hide certain features from view based on a calculated tag or if the features are provided by a different layer.`},{path:["isShown","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["isShown","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["isCounted"],required:!1,hints:{question:"should this layer be included in the summary counts?",iftrue:"Do include the count",iffalse:"Do not include the counts",ifunset:"Do count"},type:"boolean",description:`The layer server can give summary counts for a tile.
This should however be disabled for some layers, e.g. because there are too many features (walls_and_buildings) or because the count is irrelevant.`},{path:["minzoom"],required:!1,hints:{typehint:"nat",group:"Basic",default:"0",question:"At what zoom level should features of the layer be shown?",ifunset:"Always load this layer, even if the entire world is in view."},type:"number",description:`The minimum needed zoomlevel required to start loading and displaying the data.
This can be used to only show common features (e.g. a bicycle parking) only when the map is zoomed in very much (17).
This prevents cluttering the map with thousands of parkings if one is looking to an entire city.`},{path:["shownByDefault"],required:!1,hints:{group:"advanced",default:"true",question:"Should this layer be enabled when opening the map for the first time?",iftrue:"the layer is enabled when opening the map",iffalse:"the layer is hidden until the contributor enables it. (If the filter-popup is disabled, this might never get enabled nor loaded)"},type:"boolean",description:`Indicates if this layer is shown by default;
can be used to hide a layer from start, or to load the layer but only to show it when appropriate (e.g. for advanced users)`},{path:["minzoomVisible"],required:!1,hints:{group:"expert",default:"100 (thus: always visible"},type:"number",description:"The zoom level at which point the data is hidden again"},{path:["title"],required:!1,hints:{typehint:"translation",types:"use a fixed translation ; Use a dynamic tagRendering ; hidden",typesdefault:"1",group:"title",question:"Edit the popup title",inline:"{translated{value}}"},type:[{$ref:"#/definitions/Record<string,string>"},{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"The title shown in a popup for elements of this layer."},{path:["title","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["title","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["title","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["title","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["title","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["title","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["title","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["title","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["title","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["title","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["title","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["title","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["title","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["title","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["title","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["title","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["title","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["title","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["title","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["title","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["popupInFloatover"],required:!1,hints:{group:"advanced",default:"sidebar",question:"Should the information for this layer be shown in the sidebar or in a splash screen?",iftrue:"show the infobox in the splashscreen floating over the entire UI; hide the title bar",iffalse:"show the infobox in a sidebar on the right",suggestions:[{if:"value=title",then:"Show in a floatover and show the title bar"}]},type:["string","boolean"],description:"If set, open the selectedElementView in a floatOver instead of on the right."},{path:["titleIcons"],required:!1,hints:{typehint:"icon[]",group:"infobox"},type:[{type:"array",items:{anyOf:[{allOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"}}}]},{type:"string"}]}},{type:"array",items:[{type:"string",enum:["defaults"]}],minItems:1,maxItems:1}],description:`Small icons shown next to the title.
If not specified, the OsmLink and wikipedia links will be used by default.
Use an empty array to hide them.
Note that "defaults" will insert all the default titleIcons (which are added automatically)
Use \`auto:<tagrenderingId>\` to automatically create an icon based on a tagRendering which has icons`},{path:["titleIcons"],required:!1,hints:{},type:"object",description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`},{path:["titleIcons","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["titleIcons","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["titleIcons","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["titleIcons","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["titleIcons","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["titleIcons","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["titleIcons","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["titleIcons","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["titleIcons","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["titleIcons","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["titleIcons","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["titleIcons","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["titleIcons","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["titleIcons","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["titleIcons","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["titleIcons","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["titleIcons","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["titleIcons","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["titleIcons","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["titleIcons","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering"],required:!0,hints:{group:"pointrendering"},type:"array",description:`Creates points to render on the map.
This can render points for point-objects, lineobjects or areaobjects; use 'location' to indicate where it should be rendered`},{path:["pointRendering"],required:!1,hints:{},type:"object",description:`The PointRenderingConfig gives all details onto how to render a single point of a feature.
This can be used if:
- The feature is a point
- To render something at the centroid of an area, or at the start, end or projected centroid of a way`},{path:["pointRendering","location"],required:!0,hints:{question:"At what location should this icon be shown?",suggestions:[{if:"value=point",then:"Show an icon for point (node) objects"},{if:"value=centroid",then:"Show an icon for line or polygon (way) objects at their centroid location"},{if:"value=start",then:"Show an icon for line (way) objects at the start"},{if:"value=end",then:"Show an icon for line (way) object at the end"},{if:"value=projected_centerpoint",then:"Show an icon for line (way) object near the centroid location, but moved onto the line. Does not show an item on polygons"},{if:"value=polygon_centroid",then:"Show an icon at a polygon centroid (but not if it is a way)"}],multianswer:"true"},type:"array",description:""},{path:["pointRendering","marker"],required:!1,hints:{},type:"array",description:"The marker for an element.\nNote that this also defines the icon for this layer (rendered with the overpass-tags) <i>and</i> the icon in the presets.\nThe result of the icon is rendered as follows:\n- The first icon is rendered on the map\n- The second entry is overlayed on top of it\n- ...\nAs a result, on could use a generic icon (`pin`, `circle`, `square`) with a color, then overlay it with a specific icon."},{path:["pointRendering","marker","icon"],required:!0,hints:{typehint:"icon",question:"What icon should be used?",suggestions:[{if:"value=pin",then:"pin",icon:"pin"},{if:"value=bug",then:"bug",icon:"bug"},{if:"value=square",then:"square",icon:"square"},{if:"value=square_rounded",then:"square_rounded",icon:"square_rounded"},{if:"value=circle",then:"circle",icon:"circle"},{if:"value=checkmark",then:"checkmark",icon:"checkmark"},{if:"value=clock",then:"clock",icon:"clock"},{if:"value=close",then:"close",icon:"close"},{if:"value=crosshair",then:"crosshair",icon:"crosshair"},{if:"value=help",then:"help",icon:"help"},{if:"value=home",then:"home",icon:"home"},{if:"value=invalid",then:"invalid",icon:"invalid"},{if:"value=location",then:"location",icon:"location"},{if:"value=location_empty",then:"location_empty",icon:"location_empty"},{if:"value=location_locked",then:"location_locked",icon:"location_locked"},{if:"value=note",then:"note",icon:"note"},{if:"value=resolved",then:"resolved",icon:"resolved"},{if:"value=ring",then:"ring",icon:"ring"},{if:"value=scissors",then:"scissors",icon:"scissors"},{if:"value=teardrop",then:"teardrop",icon:"teardrop"},{if:"value=teardrop_with_hole_green",then:"teardrop_with_hole_green",icon:"teardrop_with_hole_green"},{if:"value=triangle",then:"triangle",icon:"triangle"},{if:"value=brick_wall_square",then:"brick_wall_square",icon:"brick_wall_square"},{if:"value=brick_wall_round",then:"brick_wall_round",icon:"brick_wall_round"},{if:"value=gps_arrow",then:"gps_arrow",icon:"gps_arrow"},{if:"value=checkmark",then:"checkmark",icon:"checkmark"},{if:"value=help",then:"help",icon:"help"},{if:"value=close",then:"close",icon:"close"},{if:"value=invalid",then:"invalid",icon:"invalid"},{if:"value=heart",then:"heart",icon:"heart"},{if:"value=heart_outline",then:"heart_outline",icon:"heart_outline"},{if:"value=link",then:"link",icon:"link"},{if:"value=confirm",then:"confirm",icon:"confirm"},{if:"value=direction",then:"direction",icon:"direction"},{if:"value=not_found",then:"not_found",icon:"not_found"},{if:"value=mastodon",then:"mastodon",icon:"mastodon"},{if:"value=party",then:"party",icon:"party"},{if:"value=addSmall",then:"addSmall",icon:"addSmall"}]},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"object",properties:{builtin:{type:"string"},override:{}},required:["builtin","override"]},{type:"string"}],description:""},{path:["pointRendering","marker","icon","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["pointRendering","marker","icon","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","marker","icon","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","marker","icon","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","marker","color"],required:!1,hints:{typehint:"color",question:"What colour should the icon be?"},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"object",properties:{builtin:{type:"string"},override:{}},required:["builtin","override"]},{type:"string"}],description:"This will only work for the default icons such as `pin`,`circle`,..."},{path:["pointRendering","marker","color","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["pointRendering","marker","color","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","marker","color","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","marker","color","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","iconBadges"],required:!1,hints:{group:"hidden"},type:"array",description:"A list of extra badges to show next to the icon as small badge\nThey will be added as a 25% height icon at the bottom right of the icon, with all the badges in a flex layout.\nNote: strings are interpreted as icons, so layering and substituting is supported. You can use `circle:white;./my_icon.svg` to add a background circle"},{path:["pointRendering","iconBadges","if"],required:!0,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","iconBadges","then"],required:!0,hints:{typehint:"icon"},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"string"}],description:"Badge to show"},{path:["pointRendering","iconBadges","then","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["pointRendering","iconBadges","then","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","iconBadges","then","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","iconBadges","then","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","iconSize"],required:!1,hints:{question:"What size should the marker be on the map?",ifunset:"Use the default size (<b>40,40</b> px)"},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:'A string containing "<width>,<height>" in pixels'},{path:["pointRendering","iconSize","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","iconSize","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","iconSize","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","iconSize","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","iconSize","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","iconSize","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","iconSize","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","iconSize","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","iconSize","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","iconSize","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","iconSize","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","iconSize","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","iconSize","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","iconSize","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","iconSize","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","iconSize","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","iconSize","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","iconSize","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","iconSize","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","iconSize","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","anchor"],required:!1,hints:{question:"What is the anchorpoint of the icon?",ifunset:"Use MapComplete-default (<b>center</b>)",suggestions:[{if:"value=center",then:"Place the <b>center</b> of the icon on the geographical location"},{if:"value=top",then:"Place the <b>top</b> of the icon on the geographical location"},{if:"value=bottom",then:"Place the <b>bottom</b> of the icon on the geographical location"},{if:"value=left",then:"Place the <b>left</b> of the icon on the geographical location"},{if:"value=right",then:"Place the <b>right</b> of the icon on the geographical location"}]},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"This matches the geographical point with a location on the icon."},{path:["pointRendering","anchor","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","anchor","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","anchor","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","anchor","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","anchor","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","anchor","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","anchor","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","anchor","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","anchor","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","anchor","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","anchor","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","anchor","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","anchor","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","anchor","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","anchor","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","anchor","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","anchor","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","anchor","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","anchor","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","anchor","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","rotation"],required:!1,hints:{question:"What rotation should be applied on the icon?",ifunset:"Do not rotate"},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"This is mostly useful for items that face a specific direction, such as surveillance cameras\nThis is interpreted as css property for 'rotate', thus has to end with 'deg', e.g. `90deg`, `{direction}deg`, `calc(90deg - {camera:direction}deg)``"},{path:["pointRendering","rotation","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","rotation","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","rotation","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","rotation","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","rotation","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","rotation","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotation","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotation","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","rotation","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotation","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotation","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","rotation","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","rotation","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","rotation","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","rotation","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","rotation","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","rotation","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","rotation","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","rotation","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","rotation","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","label"],required:!1,hints:{types:"Dynamic value based on the attributes ; string",question:"What label should be shown beneath the marker?",ifunset:"Do not show a label beneath the marker",inline:"Always show label <b>{value}</b> beneath the marker"},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:'For example: `&LT;div style="background: white">{name}&LT;/div>`\nIf the icon is undefined, then the label is shown in the center of the feature.'},{path:["pointRendering","label","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","label","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","label","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","label","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","label","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","label","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","label","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","label","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","label","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","label","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","label","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","label","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","label","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","label","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","label","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","label","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","label","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","label","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","label","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","label","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","labelCss"],required:!1,hints:{types:"Dynamic value ; string",group:"expert",question:"What CSS should be applied to the label?",ifunset:"Do not apply extra CSS-labels to the label",inline:"Apply CSS-style <b>{value}</b> to the label"},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"You can set the css-properties here, e.g. `background: red; font-size: 12px; `"},{path:["pointRendering","labelCss","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","labelCss","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","labelCss","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","labelCss","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","labelCss","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","labelCss","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCss","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCss","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","labelCss","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCss","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCss","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","labelCss","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","labelCss","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","labelCss","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","labelCss","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","labelCss","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","labelCss","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","labelCss","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","labelCss","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","labelCss","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","labelCssClasses"],required:!1,hints:{types:"Dynamic value ; string",question:"Which CSS-classes should be applied to the label?",ifunset:"Do not apply extra CSS-classes to the label",inline:"Apply CSS-classes <b>{value}</b> to the label",suggestions:[{if:"value=bg-white rounded px-2",then:"Draw on a white background"}]},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"The classes should be separated by a space (` `)\nYou can use most Tailwind-css classes, see https://tailwindcss.com/ for more information\nFor example: `center bg-gray-500 mx-2 my-1 rounded-full`"},{path:["pointRendering","labelCssClasses","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","labelCssClasses","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","labelCssClasses","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","labelCssClasses","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","labelCssClasses","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","labelCssClasses","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCssClasses","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCssClasses","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","labelCssClasses","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCssClasses","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","labelCssClasses","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","labelCssClasses","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","labelCssClasses","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","labelCssClasses","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","labelCssClasses","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","labelCssClasses","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","labelCssClasses","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","labelCssClasses","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","labelCssClasses","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","labelCssClasses","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","css"],required:!1,hints:{types:"Dynamic value ; string",group:"expert",question:"What CSS should be applied to the entire marker?",ifunset:"Do not apply extra CSS element to the entire marker",inline:"Apply CSS-style <b>{value}</b> to the _entire marker_"},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"You can set the css-properties here, e.g. `background: red; font-size: 12px; `\nThis will be applied to the _container_ containing both the marker and the label"},{path:["pointRendering","css","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","css","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","css","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","css","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","css","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","css","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","css","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","css","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","css","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","css","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","css","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","css","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","css","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","css","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","css","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","css","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","css","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","css","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","css","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","css","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","cssClasses"],required:!1,hints:{types:"Dynamic value ; string",group:"expert",question:"Which CSS-classes should be applied to the entire marker?",ifunset:"Do not apply extra CSS-classes to the label",inline:"Apply CSS-classes <b>{value}</b> to the entire container"},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{type:"string"}],description:"This will be applied to the _container_ containing both the marker and the label\nThe classes should be separated by a space (` `)\nYou can use most Tailwind-css classes, see https://tailwindcss.com/ for more information\nFor example: `center bg-gray-500 mx-2 my-1 rounded-full`"},{path:["pointRendering","cssClasses","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","cssClasses","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","cssClasses","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","cssClasses","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","cssClasses","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","cssClasses","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","cssClasses","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","cssClasses","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","cssClasses","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","cssClasses","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","cssClasses","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","cssClasses","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","cssClasses","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","cssClasses","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","cssClasses","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","cssClasses","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","cssClasses","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","cssClasses","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","cssClasses","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","cssClasses","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","pitchAlignment"],required:!1,hints:{group:"expert",question:"If the map is pitched, should the icon stay parallel to the screen or to the groundplane?",suggestions:[{if:"value=canvas",then:"The icon will stay upward and not be transformed as if it sticks to the screen"},{if:"value=map",then:"The icon will be transformed as if it were painted onto the ground. (Automatically sets rotationAlignment)"}]},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{enum:["canvas","map"],type:"string"}],description:""},{path:["pointRendering","pitchAlignment","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","pitchAlignment","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","pitchAlignment","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","pitchAlignment","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","pitchAlignment","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","pitchAlignment","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","pitchAlignment","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","pitchAlignment","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","pitchAlignment","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","pitchAlignment","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","pitchAlignment","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","pitchAlignment","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","pitchAlignment","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","pitchAlignment","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","pitchAlignment","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","pitchAlignment","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","pitchAlignment","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","pitchAlignment","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","pitchAlignment","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","pitchAlignment","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["pointRendering","rotationAlignment"],required:!1,hints:{group:"expert",question:"Should the icon be rotated if the map is rotated?",ifunset:"Do not rotate or tilt icons. Always keep the icons straight",suggestions:[{if:"value=canvas",then:"Never rotate the icon"},{if:"value=map",then:"If the map is rotated, rotate the icon as well. This gives the impression of an icon that floats perpendicular above the ground."}]},type:[{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},{enum:["canvas","map"],type:"string"}],description:""},{path:["pointRendering","rotationAlignment","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["pointRendering","rotationAlignment","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["pointRendering","rotationAlignment","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","rotationAlignment","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","rotationAlignment","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["pointRendering","rotationAlignment","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotationAlignment","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotationAlignment","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["pointRendering","rotationAlignment","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotationAlignment","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["pointRendering","rotationAlignment","freeform"],required:!1,hints:{question:"Should a freeform text field be shown?",ifunset:"Do not add a freeform text field"},type:"object",description:"Allow freeform text input from the user"},{path:["pointRendering","rotationAlignment","freeform","key"],required:!1,hints:{},type:"string",description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`},{path:["pointRendering","rotationAlignment","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["pointRendering","rotationAlignment","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["pointRendering","rotationAlignment","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["pointRendering","rotationAlignment","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be added to this mapping?",ifunset:"Do not show an extra icon next to the render value",inline:`<img src='{icon}' class="w-8 h-8" /> {icon}`},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number`},{path:["pointRendering","rotationAlignment","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["pointRendering","rotationAlignment","mappings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["pointRendering","rotationAlignment","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["pointRendering","rotationAlignment","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["lineRendering"],required:!1,hints:{group:"linerendering"},type:"array",description:"Creates lines and areas to render on the map"},{path:["lineRendering"],required:!1,hints:{},type:"object",description:`The LineRenderingConfig gives all details onto how to render a single line of a feature.
This can be used if:
- The feature is a line
- The feature is an area`},{path:["lineRendering","color"],required:!1,hints:{typehint:"color",types:"dynamic value ; string",question:"What color should lines be drawn in?",inline:"The line colour always is <b>{value}</b>",title:"Line Colour"},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"string"}],description:`For an area, this will be the colour of the outside line.
If the value starts with "--", the style of the body element will be queried for the corresponding variable instead`},{path:["lineRendering","color","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["lineRendering","color","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["lineRendering","color","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["lineRendering","color","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["lineRendering","width"],required:!1,hints:{typehint:"pnat",types:"dynamic value ; string",question:"How wide should the line be?",ifunset:"Use the default-linewidth of 7 pixels",inline:"The line width is <b>{value} pixels</b>",title:"Line width"},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:["string","number"]}],description:"The stroke-width for way-elements"},{path:["lineRendering","width","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["lineRendering","width","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["lineRendering","width","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["lineRendering","width","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["lineRendering","dashArray"],required:!1,hints:{question:"Should a dasharray be used to render the lines?",ifunset:"Ways are rendered with a full line"},type:"string",description:"The dasharray defines 'pixels of line, pixels of gap, pixels of line, pixels of gap, ...'. For example, `5 6` will be 5 pixels of line followed by a 6 pixel gap.\nCannot be a dynamic property due to a MapLibre limitation (see https://github.com/maplibre/maplibre-gl-js/issues/1235)"},{path:["lineRendering","lineCap"],required:!1,hints:{types:"dynamic value ; string",question:"What form should the line-ending have?",ifunset:"Use the default value (round ending)",suggestions:[{if:"value=round",then:"Round endings"},{if:"value=square",then:"square endings"},{if:"value=butt",then:"no ending (square ending at the end, without padding)"}],title:"Line Cap"},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"string"}],description:""},{path:["lineRendering","lineCap","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["lineRendering","lineCap","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["lineRendering","lineCap","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["lineRendering","lineCap","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["lineRendering","fillColor"],required:!1,hints:{typehint:"color",types:"dynamic value ; string",question:"What colour should be used as fill colour for polygons?",ifunset:"The polygon fill colour will be a more transparent version of the stroke colour",inline:"The fill colour is <b>{value}</b>",suggestions:[{if:"value=#00000000",then:"Use a transparent fill (only render the outline)"}]},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"string"}],description:""},{path:["lineRendering","fillColor","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["lineRendering","fillColor","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["lineRendering","fillColor","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["lineRendering","fillColor","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["lineRendering","offset"],required:!1,hints:{typehint:"int",types:"dynamic value ; number",question:"Should the lines be moved (offsetted) with a number of pixels against the geographical lines?",ifunset:"don't offset lines on the map",inline:"Pixel offset by <b>{value}</b> pixels"},type:[{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},{type:"number"}],description:`The number of pixels this line should be moved.
Use a positive number to move to the right in the drawing direction or a negative to move to the left (left/right as defined by the drawing direction of the line).
IMPORTANT: MapComplete will already normalize 'key:both:property' and 'key:both' into the corresponding 'key:left' and 'key:right' tagging (same for 'sidewalk=left/right/both' which is rewritten to 'sidewalk:left' and 'sidewalk:right')
This simplifies programming. Refer to the CalculatedTags.md-documentation for more details`},{path:["lineRendering","offset","render"],required:!1,hints:{question:"What value should be shown (if no predefined option matches)?"},type:"string",description:`This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.
This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``},{path:["lineRendering","offset","mappings"],required:!1,hints:{},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["lineRendering","offset","mappings","if"],required:!0,hints:{typehint:"tag",question:"When should this single mapping match?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.
For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}
This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},{path:["lineRendering","offset","mappings","then"],required:!0,hints:{question:"What text should be shown?"},type:"string",description:"If the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option"},{path:["lineRendering","imageAlongWay"],required:!1,hints:{typehint:"image",question:"What PNG-image should be shown along the way?",ifunset:"no image is shown along the way"},type:[{type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`},then:{type:"string"}},required:["if","then"]}},{type:"string"}],description:""},{path:["lineRendering","imageAlongWay","if"],required:!0,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["passAllFeatures"],required:!1,hints:{group:"expert",question:"should this layer pass features to the next layers?",iftrue:"Make the features from this layer also available to the other layer; might result in this object being rendered by multiple layers",iffalse:"normal behaviour: don't pass features allong"},type:"boolean",description:`If set, this layer will pass all the features it receives onto the next layer.
This is ideal for decoration, e.g. directions on cameras`},{path:["doNotDownload"],required:!1,hints:{group:"expert",default:"false",question:"Should this layer be downloaded or is the data provided by a different layer (which has 'passAllFeatures'-set)?",iftrue:"Do not attempt to query the data for this layer from overpass/the OSM API",iffalse:"download the data as usual"},type:"boolean",description:"If set, this layer will not query overpass; but it'll still match the tags above which are by chance returned by other layers.\nWorks well together with 'passAllFeatures', to add decoration\nThe opposite of `forceLoad`"},{path:["forceLoad"],required:!1,hints:{group:"expert",default:"false",question:"Should this layer be forcibly loaded?",iffalse:"only download data for this layer when needed (default)"},type:"boolean",description:`Advanced option - might be set by the theme compiler
If true, this data will _always_ be loaded, even if the theme is disabled by a filter or hidden.
The opposite of \`doNotDownload\`
ifftrue: always download this layer, even if it is disabled`},{path:["presets"],required:!1,hints:{group:"presets"},type:"array",description:`<div class='flex'>
    <div>
Presets for this layer.
A preset consists of one or more attributes (tags), a title and optionally a description and optionally example images.
When the contributor wishes to add a point to OpenStreetMap, they'll:
1. Press the 'add new point'-button
2. Choose a preset from the list of all presets
3. Confirm the choice. In this step, the \`description\` (if set) and \`exampleImages\` (if given) will be shown
4. Confirm the location
5. A new point will be created with the attributes that were defined in the preset
If no presets are defined, the button which invites to add a new preset will not be shown.
</div>
<video controls autoplay muted src='./Docs/Screenshots/AddNewItemScreencast.webm' class='w-64'/>
</div>`},{path:["presets","title"],required:!0,hints:{question:"What is the word to describe this object?",inline:"Add {translated(value)::font-bold} here"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"The title - shown on the 'add-new'-button.\nThis should include the article of the noun, e.g. 'a hydrant', 'a bicycle pump'.\nThis text will be inserted into `Add {category} here`, becoming `Add a hydrant here`.\nDo _not_ indicate 'new': 'add a new shop here' is incorrect, as the shop might have existed forever, it could just be unmapped!"},{path:["presets","tags"],required:!0,hints:{typehint:"simple_tag",typehelper:"uploadableOnly",question:"What tag should be added to the new object?"},type:"array",description:`A single tag (encoded as <code>key=value</code>) out of all the tags to add onto the newly created point.
Note that the icon in the UI will be chosen automatically based on the tags provided here.`},{path:["presets","description"],required:!1,hints:{question:"How would you describe this feature?",ifunset:"No extra description is given. This can be used to further explain the preset"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`An extra explanation of what the feature is, if it is not immediately clear from the title alone.
The _first sentence_ of the description is shown on the button of the \`add\` menu.
The full description is shown in the confirmation dialog.
(The first sentence is until the first '.'-character in the description)`},{path:["presets","exampleImages"],required:!1,hints:{typehint:"image",question:"What is the URL of an image showing such a feature?"},type:"array",description:"The URL of an example image which shows a real-life example of what such a feature might look like."},{path:["presets","snapToLayer"],required:!1,hints:{question:"Should the created point be snapped to a line layer?",suggestions:[{if:"value=address",then:"address - Addresses"},{if:"value=advertising",then:"advertising - We will complete data from advertising features with reference, operator and lit"},{if:"value=aerialway",then:"aerialway - Various forms of transport for passengers and goods that use wires, including cable cars, gondolas, chair lifts, drag lifts, and zip lines. "},{if:"value=ambulancestation",then:"ambulancestation - An ambulance station is an area for storage of ambulance vehicles, medical equipment, personal protective equipment, and other medical supplies."},{if:"value=animal_shelter",then:"animal_shelter - An animal shelter is a facility where animals in trouble are brought and facility's staff (volunteers or not) feeds them and cares of them, rehabilitating and healing them if necessary. This definition includes kennels for abandoned dogs, catteries for abandoned cats, shelters for other abandoned pets and wildlife recovery centres. "},{if:"value=artwork",then:"artwork - An open map of statues, busts, graffitis and other artwork all over the world"},{if:"value=assembly_point",then:"assembly_point - This layer contains assembly points and waiting areas where all employees, passengers or a large crowd assemble in case of an emergency."},{if:"value=atm",then:"atm - ATMs to withdraw money"},{if:"value=bank",then:"bank - A financial institution to deposit money"},{if:"value=barrier",then:"barrier - Obstacles while cycling, such as bollards and cycle barriers"},{if:"value=bench",then:"bench - A bench is a wooden, metal, stone,  surface where a human can sit. This layers visualises them and asks a few questions about them."},{if:"value=bench_at_pt",then:"bench_at_pt - A layer showing all public-transport-stops which do have a bench"},{if:"value=bicycle_library",then:"bicycle_library - A facility where bicycles can be lent for longer period of times"},{if:"value=bicycle_rental",then:"bicycle_rental - Bicycle rental stations"},{if:"value=bicycle_tube_vending_machine",then:"bicycle_tube_vending_machine - A layer showing vending machines for bicycle tubes (either purpose-built bicycle tube vending machines or classical vending machines with bicycle tubes and optionally additional bicycle related objects such as lights, gloves, locks, )"},{if:"value=bike_cafe",then:"bike_cafe - A bike caf is a caf geared towards cyclists, for example with services such as a pump, with lots of bicycle-related decoration, "},{if:"value=bike_cleaning",then:"bike_cleaning - A layer showing facilities where one can clean their bike"},{if:"value=bike_parking",then:"bike_parking - A layer showing where you can park your bike"},{if:"value=bike_repair_station",then:"bike_repair_station - A layer showing bicycle pumps and bicycle repair tool stands"},{if:"value=bike_shop",then:"bike_shop - A shop specifically selling bicycles or related items"},{if:"value=bike_themed_object",then:"bike_themed_object - A layer with bike-themed objects but who don't match any other layer"},{if:"value=binocular",then:"binocular - Binoculars"},{if:"value=birdhide",then:"birdhide - A birdhide"},{if:"value=brothel",then:"brothel - An establishment specifically dedicated to prostitution. "},{if:"value=cafe_pub",then:"cafe_pub - A layer showing cafs and pubs where one can gather around a drink. The layer asks for some relevant questions"},{if:"value=car_rental",then:"car_rental - Places where you can rent a car"},{if:"value=charging_station",then:"charging_station - A charging station"},{if:"value=cinema",then:"cinema -  A place showing movies (films), generally open to the public for a fee. Commonly referred to as a movie theater in the US"},{if:"value=climbing",then:"climbing - A dummy layer which contains tagrenderings, shared among the climbing layers"},{if:"value=climbing_area",then:"climbing_area - An area where climbing is possible, e.g. a crag, site, boulder,  Contains aggregation of routes"},{if:"value=climbing_club",then:"climbing_club - A climbing club or organisation"},{if:"value=climbing_gym",then:"climbing_gym - A climbing gym"},{if:"value=climbing_opportunity",then:"climbing_opportunity - Fallback layer with items on which climbing _might_ be possible. It is loaded when zoomed in a lot, to prevent duplicate items to be added"},{if:"value=climbing_route",then:"climbing_route - A single climbing route and its properties. Some properties are derived from the containing features"},{if:"value=clock",then:"clock - Layer with public clocks"},{if:"value=conflation",then:"conflation - If the import-button moves OSM points, the imported way points or conflates, a preview is shown. This layer defines how this preview is rendered. This layer cannot be included in a theme."},{if:"value=crab_address",then:"crab_address - Address data for Flanders by the governement, suited for import into OpenStreetMap. Datadump from 2021-10-26. This layer contains only visualisation logic. Import buttons should be added via an override. Note that HNRLABEL contains the original value, whereas _HNRLABEL contains a slightly cleaned version"},{if:"value=crossings",then:"crossings - Crossings for pedestrians and cyclists"},{if:"value=current_view",then:`current_view - A meta-layer which contains one single feature, namely the bounding box of the current map view. This can be used to trigger special actions. If a popup is defined for this layer, this popup will be accessible via an extra button on screen.

The icon on the button is the default icon of the layer, but can be customized by detecting 'button=yes'.`},{if:"value=cycleways_and_roads",then:"cycleways_and_roads - All infrastructure that someone can cycle over, accompanied with questions about this infrastructure"},{if:"value=defibrillator",then:"defibrillator - A layer showing defibrillators which can be used in case of emergency. This contains public defibrillators, but also defibrillators which might need staff to fetch the actual device"},{if:"value=dentist",then:"dentist - This layer shows dentist offices"},{if:"value=direction",then:"direction - This layer visualizes directions"},{if:"value=disaster_response",then:"disaster_response - This layer contains organizations that have the main objective to help the civil population during and after natural or anthropogenic disasters by working in the affected area."},{if:"value=doctors",then:"doctors - This layer shows doctor offices"},{if:"value=dogpark",then:"dogpark - A layer showing dogparks, which are areas where dog are allowed to run without a leash"},{if:"value=drinking_water",then:"drinking_water - A layer showing drinking water fountains"},{if:"value=elevator",then:"elevator - This layer show elevators and asks for operational status and elevator dimensions. Useful for wheelchair accessibility information"},{if:"value=elongated_coin",then:"elongated_coin - Layer showing penny presses."},{if:"value=entrance",then:"entrance - A layer showing entrances and offering capabilities to survey some advanced data which is important for e.g. wheelchair users (but also bicycle users, people who want to deliver, )"},{if:"value=etymology",then:"etymology - All objects which have an etymology known"},{if:"value=extinguisher",then:"extinguisher - Map layer to show fire extinguishers."},{if:"value=filters",then:"filters - This layer acts as library for common filters"},{if:"value=fire_station",then:"fire_station - Map layer to show fire stations."},{if:"value=fitness_centre",then:"fitness_centre - Layer showing fitness centres"},{if:"value=fitness_station",then:"fitness_station - Find a fitness station near you, and add missing ones."},{if:"value=fixme",then:"fixme - OSM objects that likely need to be fixed, based on a FIXME tag."},{if:"value=food",then:"food - A layer showing restaurants and fast-food amenities (with a special rendering for friteries)"},{if:"value=food_courts",then:"food_courts - Food courts with a variety of food options."},{if:"value=ghost_bike",then:"ghost_bike - A layer showing memorials for cyclists, killed in road accidents"},{if:"value=governments",then:"governments - This layer show governmental buildings. It was setup as commissioned layer for the client of OSOC '22"},{if:"value=gps_location",then:"gps_location - Meta layer showing the current location of the user. Add this to your theme and override the icon to change the appearance of the current location. The object will always have `id=gps` and will have _all_ the properties included in the [`Coordinates`-object](https://developer.mozilla.org/en-US/docs/Web/API/GeolocationCoordinates) (except latitude and longitude) returned by the browser, such as `speed`, `altitude`, `heading`, ...."},{if:"value=gps_location_history",then:"gps_location_history - Meta layer which contains the previous locations of the user as single points. This is mainly for technical reasons, e.g. to keep match the distance to the modified object"},{if:"value=gps_track",then:"gps_track - Meta layer showing the previous locations of the user as single line with controls, e.g. to erase, upload or download this track. Add this to your theme and override the maprendering to change the appearance of the travelled track."},{if:"value=guidepost",then:"guidepost - Guideposts (also known as fingerposts or finger posts) are often found along official hiking/cycling/riding/skiing routes to indicate the directions to different destinations"},{if:"value=hackerspace",then:"hackerspace - Hackerspace"},{if:"value=home_location",then:"home_location - Meta layer showing the home location of the user. The home location can be set in the [profile settings](https://www.openstreetmap.org/profile/edit) of OpenStreetMap."},{if:"value=hospital",then:"hospital - A layer showing hospital grounds"},{if:"value=hotel",then:"hotel - Layer showing all hotels"},{if:"value=hydrant",then:"hydrant - Map layer to show fire hydrants."},{if:"value=ice_cream",then:"ice_cream - A place where ice cream is sold over the counter"},{if:"value=icons",then:"icons - A layer acting as library for icon-tagrenderings, especially to show as badge next to a POI"},{if:"value=id_presets",then:"id_presets - Layer containing various presets and questions generated by ID. These are meant to be reused in other layers by importing the tagRenderings with `id_preset.<tagrendering>"},{if:"value=import_candidate",then:"import_candidate - Layer used as template in the importHelper"},{if:"value=indoors",then:"indoors - Basic indoor mapping: shows room outlines"},{if:"value=information_board",then:"information_board - A layer showing touristical, road side information boards (e.g. giving information about the landscape, a building, a feature, a map, )"},{if:"value=item_with_image",then:"item_with_image - All items with an image. All alone, not a layer which is relevant for any MapComplete theme, as it is a random collection of items. However, when put into the databank, this allows to quickly fetch (the URL of) pictures nearby a different object, to quickly link this"},{if:"value=kerbs",then:"kerbs - A layer showing kerbs."},{if:"value=kindergarten_childcare",then:"kindergarten_childcare - Shows kindergartens and preschools. Both are grouped in one layer, as they are regularly confused with each other"},{if:"value=last_click",then:"last_click - This 'layer' is not really a layer, but contains part of the code how the popup to 'add a new marker' is displayed"},{if:"value=love_hotel",then:"love_hotel - A love hotel is a type of short-stay hotel found around the world operated primarily for the purpose of allowing guests privacy for sexual activities"},{if:"value=map",then:"map - A map, meant for tourists which is permanently installed in the public space"},{if:"value=maproulette",then:"maproulette - Layer showing all tasks in MapRoulette"},{if:"value=maproulette_challenge",then:"maproulette_challenge - Layer showing tasks of a single MapRoulette challenge. This layer is intended to be reused and extended in themes; refer to [the documentation](https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Integrating_Maproulette.md) on how to do this."},{if:"value=maxspeed",then:"maxspeed - Shows the allowed speed for every road"},{if:"value=memorial",then:"memorial - Layer showing memorial plaques, based upon a unofficial theme. Can be expanded to have multiple types of memorials later on"},{if:"value=mountain_rescue",then:"mountain_rescue - A building where first aid responders store material and might be on watch"},{if:"value=named_streets",then:"named_streets - Hidden layer with all streets which have a name. Useful to detect addresses"},{if:"value=nature_reserve",then:"nature_reserve - A nature reserve is an area where nature can take its course"},{if:"value=note",then:"note - This layer shows notes on OpenStreetMap. Having this layer in your theme will trigger the 'add new note' functionality in the 'addNewPoint'-popup (or if your theme has no presets, it'll enable adding notes)"},{if:"value=observation_tower",then:"observation_tower - Towers with a panoramic view"},{if:"value=osm_community_index",then:"osm_community_index - A layer showing the OpenStreetMap Communities"},{if:"value=outdoor_seating",then:"outdoor_seating - Outdoor seating areas, usually located near cafes and restaurants."},{if:"value=parcel_lockers",then:"parcel_lockers - Layer showing parcel lockers for collecting and sending parcels."},{if:"value=parking",then:"parking - A layer showing car parkings"},{if:"value=parking_spaces",then:"parking_spaces - Layer showing individual parking spaces."},{if:"value=parking_ticket_machine",then:"parking_ticket_machine - Layer with parking ticket machines to pay for parking."},{if:"value=pedestrian_path",then:"pedestrian_path - Pedestrian footpaths, especially used for indoor navigation and snapping entrances to this layer"},{if:"value=pharmacy",then:"pharmacy - A layer showing pharmacies, which (probably) dispense prescription drugs"},{if:"value=physiotherapist",then:"physiotherapist - This layer shows physiotherapists"},{if:"value=picnic_table",then:"picnic_table - The layer showing picnic tables"},{if:"value=play_forest",then:"play_forest - Een speelbos is een vrij toegankelijke zone in een bos"},{if:"value=playground",then:"playground - Playgrounds"},{if:"value=playground_equipment",then:"playground_equipment - Layer showing playground equipment"},{if:"value=postboxes",then:"postboxes - The layer showing postboxes."},{if:"value=postoffices",then:"postoffices - A layer showing post offices."},{if:"value=public_bookcase",then:"public_bookcase - A streetside cabinet with books, accessible to anyone"},{if:"value=questions",then:"questions - Special library layer which does not need a '.questions'-prefix before being imported"},{if:"value=railway_platforms",then:"railway_platforms - Find every platform in the station, and the train routes that use them."},{if:"value=rainbow_crossings",then:"rainbow_crossings - A layer showing pedestrian crossings with rainbow paintings"},{if:"value=range",then:"range - Meta-layer, simply showing a bbox in red"},{if:"value=reception_desk",then:"reception_desk - A layer showing where the reception desks are and which asks some accessibility information"},{if:"value=recycling",then:"recycling - A layer with recycling containers and centres"},{if:"value=route_marker",then:"route_marker - Route markers are small markers often found along official hiking/cycling/riding/skiing routes to indicate the direction of the route."},{if:"value=school",then:"school - Schools giving primary and secondary education and post-secondary, non-tertiary education. Note that this level of education does not imply an age of the pupiles"},{if:"value=selected_element",then:"selected_element - Highlights the currently selected element. Override this layer to have different colors"},{if:"value=shelter",then:"shelter - Layer showing shelter structures"},{if:"value=shops",then:"shops - A shop"},{if:"value=shower",then:"shower - A layer showing (public) showers"},{if:"value=ski_piste",then:"ski_piste - Ski and snowboard pistes"},{if:"value=slow_roads",then:"slow_roads - All carfree roads"},{if:"value=souvenir_coin",then:"souvenir_coin - Layer showing machines selling souvenir coins"},{if:"value=souvenir_note",then:"souvenir_note - Layer showing machines selling souvenir banknotes"},{if:"value=speed_camera",then:"speed_camera - Layer showing speed cameras"},{if:"value=speed_display",then:"speed_display - Layer showing speed displays that alert drivers of their speed."},{if:"value=split_point",then:"split_point - Layer rendering the little scissors for the minimap in the 'splitRoadWizard'"},{if:"value=split_road",then:"split_road - Layer rendering the way to split in the 'splitRoadWizard'. This one is used instead of the variable rendering by the themes themselves, as they might not always be very visible"},{if:"value=sport_pitch",then:"sport_pitch - A sport pitch"},{if:"value=sports_centre",then:"sports_centre - Indoor and outdoor sports centres can be found on this layer"},{if:"value=stairs",then:"stairs - Layer showing stairs and escalators"},{if:"value=street_lamps",then:"street_lamps - A layer showing street lights"},{if:"value=stripclub",then:"stripclub - A venue where erotic dance, striptease, or lap dances are performed commercially. "},{if:"value=summary",then:"summary - Special layer which shows `count`"},{if:"value=surveillance_camera",then:"surveillance_camera - This layer shows surveillance cameras and allows a contributor to update information and add new cameras"},{if:"value=tertiary_education",then:"tertiary_education - Layer with all tertiary education institutes (ISCED:2011 levels 6,7 and 8)"},{if:"value=ticket_machine",then:"ticket_machine - Find ticket machines for public transport tickets"},{if:"value=ticket_validator",then:"ticket_validator - Find ticket validators to validate public transport tickets"},{if:"value=toilet",then:"toilet - A layer showing (public) toilets"},{if:"value=toilet_at_amenity",then:"toilet_at_amenity - A layer showing (public) toilets located at different places."},{if:"value=trail",then:"trail - Waymarked trails"},{if:"value=transit_routes",then:"transit_routes - Layer showing bus lines"},{if:"value=transit_stops",then:"transit_stops - Layer showing different types of transit stops."},{if:"value=tree_node",then:"tree_node - A layer showing trees"},{if:"value=trolley_bay",then:"trolley_bay - Find trolley bays for shopping trolleys."},{if:"value=unit",then:"unit - Library layer with all common units.  Units can _only_ be imported from this file."},{if:"value=usersettings",then:"usersettings - A special layer which is not meant to be shown on a map, but which is used to set user settings"},{if:"value=vending_machine",then:"vending_machine - Layer showing vending machines"},{if:"value=veterinary",then:"veterinary - A layer showing veterinarians"},{if:"value=viewpoint",then:"viewpoint - A nice viewpoint or nice view. Ideal to add an image if no other category fits"},{if:"value=village_green",then:"village_green - A layer showing village-green (which are communal green areas, but not quite parks)"},{if:"value=visitor_information_centre",then:"visitor_information_centre - A visitor center offers information about a specific attraction or place of interest where it is located."},{if:"value=walls_and_buildings",then:"walls_and_buildings - Special builtin layer providing all walls and buildings. This layer is useful in presets for objects which can be placed against walls (e.g. AEDs, postboxes, entrances, addresses, surveillance cameras, ). This layer is invisible by default and not toggleable by the user."},{if:"value=waste_basket",then:"waste_basket - This is a public waste basket, thrash can, where you can throw away your thrash."},{if:"value=waste_disposal",then:"waste_disposal - Waste Disposal Bin, medium to large bin for disposal of (household) waste"},{if:"value=windturbine",then:"windturbine - Modern windmills generating electricity"}]},type:"array",description:"If specified, these layers will be shown in the precise location picker  and the new point will be snapped towards it.\nFor example, this can be used to snap against `walls_and_buildings` (e.g. to attach a defibrillator, an entrance, an artwork, ... to the wall)\nor to snap an obstacle (such as a bollard) to the `cycleways_and_roads`."},{path:["presets","maxSnapDistance"],required:!1,hints:{question:"What is the maximum distance in the location-input that a point can be moved to be snapped to a way?",ifunset:"Do not snap to a layer",inline:"a point is snapped if the location input is at most <b>{value}m</b> away from an object"},type:"number",description:`If specified, a new point will only be snapped if it is within this range.
If further away, it'll be placed in the center of the location input
Distance in meter`},{path:["tagRenderings"],required:!1,hints:{typehint:"tagrendering[]",group:"tagrenderings",question:"Edit this way this attributed is displayed or queried"},type:[{description:`A QuestionableTagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
If the desired tags are missing and a question is defined, a question will be shown instead.`,type:"object",properties:{id:{type:"string"},mappings:{description:`Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes

question: What are common options?`,type:"array",items:{$ref:"#/definitions/MappingConfigJson"}},multiAnswer:{description:`If true, use checkboxes instead of radio buttons when asking the question

question: Should a contributor be allowed to select multiple mappings?

iftrue: allow to select multiple mappings
iffalse: only allow to select a single mapping
ifunset: only allow to select a single mapping`,type:"boolean"},freeform:{description:"Allow freeform text input from the user",type:"object",properties:{key:{description:`question: What is the name of the attribute that should be written to?
This is the OpenStreetMap-key that that value will be written to
ifunset: do not offer a freeform textfield as answer option`,type:"string"},type:{description:`question: What is the input type?
The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values
ifunset: use an unconstrained <b>string</b> as input (default)
suggestions: return validators.AllValidators.filter(type => !type.isMeta).map((type) => ({if: "value="+type.name, then: "<b>"+type.name+"</b> "+type.explanation.split("\\n")[0]}))`,type:"string"},placeholder:{description:`question: What placeholder text should be shown in the input-element if there is no input?
A (translated) text that is shown (as gray text) within the textfield
type: translation
group: expert
ifunset: No specific placeholder is set, show the type of the textfield`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},helperArgs:{description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'
group: expert`,type:"array",items:{}},addExtraTags:{description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'
group: expert`,type:"array",items:{type:"string"}},inline:{description:`question: Show the freeform as box within the question?
Instead of showing a full-width text field, the text field will be shown within the rendering of the question.

This combines badly with special input elements, as it'll distort the layout.
ifunset: show the freeform input field full-width
iftrue: show the freeform input field as a small field within the question
group: expert`,type:"boolean"},default:{description:`question: What value should be entered in the text field if no value is set?
This can help people to quickly enter the most common option
ifunset: do not prefill the textfield
group: expert`,type:"string"},invalidValues:{description:`question: What values of the freeform key should be interpreted as 'unknown'?
For example, if a feature has \`shop=yes\`, the question 'what type of shop is this?' should still asked
ifunset: The question will be considered answered if any value is set for the key
group: expert`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]}}},question:{description:`question: What question should be shown to the contributor?

A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well.

ifunset: This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},questionHint:{description:`question: Should some extra information be shown to the contributor, alongside the question?
This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like
ifunset: No extra hint is given`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},editButtonAriaLabel:{description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},labels:{description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer",type:"array",items:{type:"string"}},render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},required:["id"],additionalProperties:!1},{type:"object",properties:{id:{type:"string"},builtin:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{allOf:[{$ref:"#/definitions/default<(string|QuestionableTagRenderingConfigJson|{builtin:string;override:Partial<QuestionableTagRenderingConfigJson>;})[]>"},{type:"object",properties:{id:{type:"string"}},required:["id"]}]},{type:"string"}],description:`A tag rendering is a block that either shows the known value or asks a question.
Refer to the class \`TagRenderingConfigJson\` to see the possibilities.
Note that we can also use a string here - where the string refers to a tag rendering defined in \`assets/questions/questions.json\`,
where a few very general questions are defined e.g. website, phone number, ...
Furthermore, _all_ the questions of another layer can be reused with \`otherlayer.*\`
If you need only a single of the tagRenderings, use \`otherlayer.tagrenderingId\`
If one or more questions have a 'group' or 'label' set, select all the entries with the corresponding group or label with \`otherlayer.*group\`
Remark: if a tagRendering is 'lent' from another layer, the 'source'-tags are copied and added as condition.
If they are not wanted, remove them with an override
A special value is 'questions', which indicates the location of the questions box. If not specified, it'll be appended to the bottom of the featureInfobox.
At last, one can define a group of renderings where parts of all strings will be replaced by multiple other strings.
This is mainly create questions for a 'left' and a 'right' side of the road.
These will be grouped and questions will be asked together`},{path:["tagRenderings","mappings"],required:!1,hints:{question:"What are common options?"},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["tagRenderings","mappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be matched to show this option?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"If in 'question'-mode and the contributor selects this option, these tags will be applied to the object"},{path:["tagRenderings","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What corresponding text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Shown if the `if` is fulfilled"},{path:["tagRenderings","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be shown next to this mapping?",ifunset:"Show no icon"},type:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}],description:"This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)"},{path:["tagRenderings","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the  icon"},{path:["tagRenderings","mappings","icon","class"],required:!1,hints:{},type:"string",description:"Size of the image"},{path:["tagRenderings","mappings","hideInAnswer"],required:!1,hints:{typehint:"tag",question:"Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?",iftrue:"Never show this mapping as option to pick",ifunset:"Always show this mapping as option to pick"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}],description:`In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).
In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.
To demonstrate an example making a default assumption:
mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]
For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}
Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch
e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:
{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},
    ]
}
Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`},{path:["tagRenderings","mappings","hideInAnswer","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","hideInAnswer","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","alsoShowIf"],required:!1,hints:{question:"In what other cases should this item be rendered?",ifunset:"No other cases when this text is shown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!`},{path:["tagRenderings","mappings","alsoShowIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","alsoShowIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","ifnot"],required:!1,hints:{question:"What tags should be applied if this mapping is _not_ chosen?",ifunset:"Do not apply a tag if a different mapping is chosen."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"Only applicable if 'multiAnswer' is set.\nThis is for situations such as:\n`accepts:coins=no` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.\nThis can be done with `ifnot`\nNote that we can not explicitly render this negative case to the user, we cannot show `does _not_ accept coins`.\nIf this is important to your usecase, consider using multiple radiobutton-fields without `multiAnswer`"},{path:["tagRenderings","mappings","ifnot","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","ifnot","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","addExtraTags"],required:!1,hints:{typehint:"simple_tag",question:"What extra tags should be added to the object if this object is chosen?"},type:"array",description:`If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.
This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``},{path:["tagRenderings","mappings","searchTerms"],required:!1,hints:{group:"hidden",question:"If there are many options, what search terms match too?"},type:"object",description:`If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction
Searchterms (per language) allow to easily find an option if there are many options`},{path:["tagRenderings","mappings","priorityIf"],required:!1,hints:{group:"hidden"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly`},{path:["tagRenderings","mappings","priorityIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","priorityIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","mappings","#"],required:!1,hints:{group:"hidden"},type:"string",description:"Used for comments or to disable a validation\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed"},{path:["tagRenderings","multiAnswer"],required:!1,hints:{question:"Should a contributor be allowed to select multiple mappings?",iftrue:"allow to select multiple mappings",iffalse:"only allow to select a single mapping",ifunset:"only allow to select a single mapping"},type:"boolean",description:"If true, use checkboxes instead of radio buttons when asking the question"},{path:["tagRenderings","freeform"],required:!1,hints:{},type:"object",description:"Allow freeform text input from the user"},{path:["tagRenderings","freeform","key"],required:!1,hints:{question:"What is the name of the attribute that should be written to?",ifunset:"do not offer a freeform textfield as answer option"},type:"string",description:"This is the OpenStreetMap-key that that value will be written to"},{path:["tagRenderings","freeform","type"],required:!1,hints:{question:"What is the input type?",ifunset:"use an unconstrained <b>string</b> as input (default)",suggestions:[{if:"value=string",then:"<b>string</b> A simple piece of text"},{if:"value=text",then:"<b>text</b> A longer piece of text. Uses an textArea instead of a textField"},{if:"value=date",then:"<b>date</b> A date with date picker"},{if:"value=nat",then:"<b>nat</b> A  whole, positive number or zero"},{if:"value=int",then:"<b>int</b> A whole number, either positive, negative or zero"},{if:"value=distance",then:'<b>distance</b> A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]'},{if:"value=direction",then:"<b>direction</b> A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)."},{if:"value=wikidata",then:"<b>wikidata</b> A wikidata identifier, e.g. Q42. "},{if:"value=pnat",then:"<b>pnat</b> A strict positive number"},{if:"value=float",then:"<b>float</b> A decimal number"},{if:"value=pfloat",then:"<b>pfloat</b> A positive decimal number or zero"},{if:"value=email",then:"<b>email</b> An email adress"},{if:"value=url",then:"<b>url</b> The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user. Furthermore, some tracking parameters will be removed"},{if:"value=phone",then:"<b>phone</b> A phone number"},{if:"value=opening_hours",then:"<b>opening_hours</b> Has extra elements to easily input when a POI is opened. "},{if:"value=color",then:"<b>color</b> Shows a color picker"},{if:"value=icon",then:"<b>icon</b> Makes sure that a valid .svg-path is added"},{if:"value=fediverse",then:"<b>fediverse</b> Validates fediverse addresses and normalizes them into `@username@server`-format"},{if:"value=id",then:"<b>id</b> Checks for valid identifiers for layers, will automatically replace spaces and uppercase"},{if:"value=slope",then:"<b>slope</b> Validates that the slope is a valid number.The accompanying input element uses the gyroscope and the compass to determine the correct incline. The sign of the incline will be set automatically. The bearing of the way is compared to the bearing of the compass, as such, the device knows if it is measuring in the forward or backward direction."},{if:"value=velopark",then:"<b>velopark</b> A special URL-validator that checks the domain name and rewrites to the correct velopark format."},{if:"value=currency",then:"<b>currency</b> Validates monetary amounts"}]},type:"string",description:`The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values`},{path:["tagRenderings","freeform","placeholder"],required:!1,hints:{typehint:"translation",group:"expert",question:"What placeholder text should be shown in the input-element if there is no input?",ifunset:"No specific placeholder is set, show the type of the textfield"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A (translated) text that is shown (as gray text) within the textfield"},{path:["tagRenderings","freeform","helperArgs"],required:!1,hints:{group:"expert"},type:"array",description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'`},{path:["tagRenderings","freeform","addExtraTags"],required:!1,hints:{group:"expert"},type:"array",description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'`},{path:["tagRenderings","freeform","inline"],required:!1,hints:{group:"expert",question:"Show the freeform as box within the question?",iftrue:"show the freeform input field as a small field within the question",ifunset:"show the freeform input field full-width"},type:"boolean",description:`Instead of showing a full-width text field, the text field will be shown within the rendering of the question.
This combines badly with special input elements, as it'll distort the layout.`},{path:["tagRenderings","freeform","default"],required:!1,hints:{group:"expert",question:"What value should be entered in the text field if no value is set?",ifunset:"do not prefill the textfield"},type:"string",description:"This can help people to quickly enter the most common option"},{path:["tagRenderings","freeform","invalidValues"],required:!1,hints:{group:"expert",question:"What values of the freeform key should be interpreted as 'unknown'?",ifunset:"The question will be considered answered if any value is set for the key"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"For example, if a feature has `shop=yes`, the question 'what type of shop is this?' should still asked"},{path:["tagRenderings","freeform","invalidValues","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","freeform","invalidValues","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","question"],required:!1,hints:{question:"What question should be shown to the contributor?",ifunset:"This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well."},{path:["tagRenderings","questionHint"],required:!1,hints:{question:"Should some extra information be shown to the contributor, alongside the question?",ifunset:"No extra hint is given"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like`},{path:["tagRenderings","editButtonAriaLabel"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`},{path:["tagRenderings","labels"],required:!1,hints:{},type:"array",description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer"},{path:["tagRenderings","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["tagRenderings","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["tagRenderings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["tagRenderings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["tagRenderings","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["tagRenderings","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["tagRenderings","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["tagRenderings","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["tagRenderings","override","mappings"],required:!1,hints:{question:"What are common options?"},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["tagRenderings","override","mappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be matched to show this option?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"If in 'question'-mode and the contributor selects this option, these tags will be applied to the object"},{path:["tagRenderings","override","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What corresponding text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Shown if the `if` is fulfilled"},{path:["tagRenderings","override","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be shown next to this mapping?",ifunset:"Show no icon"},type:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}],description:"This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)"},{path:["tagRenderings","override","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the  icon"},{path:["tagRenderings","override","mappings","icon","class"],required:!1,hints:{},type:"string",description:"Size of the image"},{path:["tagRenderings","override","mappings","hideInAnswer"],required:!1,hints:{typehint:"tag",question:"Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?",iftrue:"Never show this mapping as option to pick",ifunset:"Always show this mapping as option to pick"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}],description:`In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).
In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.
To demonstrate an example making a default assumption:
mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]
For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}
Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch
e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:
{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},
    ]
}
Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`},{path:["tagRenderings","override","mappings","hideInAnswer","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","hideInAnswer","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","alsoShowIf"],required:!1,hints:{question:"In what other cases should this item be rendered?",ifunset:"No other cases when this text is shown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!`},{path:["tagRenderings","override","mappings","alsoShowIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","alsoShowIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","ifnot"],required:!1,hints:{question:"What tags should be applied if this mapping is _not_ chosen?",ifunset:"Do not apply a tag if a different mapping is chosen."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"Only applicable if 'multiAnswer' is set.\nThis is for situations such as:\n`accepts:coins=no` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.\nThis can be done with `ifnot`\nNote that we can not explicitly render this negative case to the user, we cannot show `does _not_ accept coins`.\nIf this is important to your usecase, consider using multiple radiobutton-fields without `multiAnswer`"},{path:["tagRenderings","override","mappings","ifnot","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","ifnot","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","addExtraTags"],required:!1,hints:{typehint:"simple_tag",question:"What extra tags should be added to the object if this object is chosen?"},type:"array",description:`If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.
This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``},{path:["tagRenderings","override","mappings","searchTerms"],required:!1,hints:{group:"hidden",question:"If there are many options, what search terms match too?"},type:"object",description:`If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction
Searchterms (per language) allow to easily find an option if there are many options`},{path:["tagRenderings","override","mappings","priorityIf"],required:!1,hints:{group:"hidden"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly`},{path:["tagRenderings","override","mappings","priorityIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","priorityIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","mappings","#"],required:!1,hints:{group:"hidden"},type:"string",description:"Used for comments or to disable a validation\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed"},{path:["tagRenderings","override","multiAnswer"],required:!1,hints:{question:"Should a contributor be allowed to select multiple mappings?",iftrue:"allow to select multiple mappings",iffalse:"only allow to select a single mapping",ifunset:"only allow to select a single mapping"},type:"boolean",description:"If true, use checkboxes instead of radio buttons when asking the question"},{path:["tagRenderings","override","freeform"],required:!1,hints:{},type:"object",description:"Allow freeform text input from the user"},{path:["tagRenderings","override","freeform","key"],required:!1,hints:{question:"What is the name of the attribute that should be written to?",ifunset:"do not offer a freeform textfield as answer option"},type:"string",description:"This is the OpenStreetMap-key that that value will be written to"},{path:["tagRenderings","override","freeform","type"],required:!1,hints:{question:"What is the input type?",ifunset:"use an unconstrained <b>string</b> as input (default)",suggestions:[{if:"value=string",then:"<b>string</b> A simple piece of text"},{if:"value=text",then:"<b>text</b> A longer piece of text. Uses an textArea instead of a textField"},{if:"value=date",then:"<b>date</b> A date with date picker"},{if:"value=nat",then:"<b>nat</b> A  whole, positive number or zero"},{if:"value=int",then:"<b>int</b> A whole number, either positive, negative or zero"},{if:"value=distance",then:'<b>distance</b> A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]'},{if:"value=direction",then:"<b>direction</b> A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)."},{if:"value=wikidata",then:"<b>wikidata</b> A wikidata identifier, e.g. Q42. "},{if:"value=pnat",then:"<b>pnat</b> A strict positive number"},{if:"value=float",then:"<b>float</b> A decimal number"},{if:"value=pfloat",then:"<b>pfloat</b> A positive decimal number or zero"},{if:"value=email",then:"<b>email</b> An email adress"},{if:"value=url",then:"<b>url</b> The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user. Furthermore, some tracking parameters will be removed"},{if:"value=phone",then:"<b>phone</b> A phone number"},{if:"value=opening_hours",then:"<b>opening_hours</b> Has extra elements to easily input when a POI is opened. "},{if:"value=color",then:"<b>color</b> Shows a color picker"},{if:"value=icon",then:"<b>icon</b> Makes sure that a valid .svg-path is added"},{if:"value=fediverse",then:"<b>fediverse</b> Validates fediverse addresses and normalizes them into `@username@server`-format"},{if:"value=id",then:"<b>id</b> Checks for valid identifiers for layers, will automatically replace spaces and uppercase"},{if:"value=slope",then:"<b>slope</b> Validates that the slope is a valid number.The accompanying input element uses the gyroscope and the compass to determine the correct incline. The sign of the incline will be set automatically. The bearing of the way is compared to the bearing of the compass, as such, the device knows if it is measuring in the forward or backward direction."},{if:"value=velopark",then:"<b>velopark</b> A special URL-validator that checks the domain name and rewrites to the correct velopark format."},{if:"value=currency",then:"<b>currency</b> Validates monetary amounts"}]},type:"string",description:`The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values`},{path:["tagRenderings","override","freeform","placeholder"],required:!1,hints:{typehint:"translation",group:"expert",question:"What placeholder text should be shown in the input-element if there is no input?",ifunset:"No specific placeholder is set, show the type of the textfield"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A (translated) text that is shown (as gray text) within the textfield"},{path:["tagRenderings","override","freeform","helperArgs"],required:!1,hints:{group:"expert"},type:"array",description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'`},{path:["tagRenderings","override","freeform","addExtraTags"],required:!1,hints:{group:"expert"},type:"array",description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'`},{path:["tagRenderings","override","freeform","inline"],required:!1,hints:{group:"expert",question:"Show the freeform as box within the question?",iftrue:"show the freeform input field as a small field within the question",ifunset:"show the freeform input field full-width"},type:"boolean",description:`Instead of showing a full-width text field, the text field will be shown within the rendering of the question.
This combines badly with special input elements, as it'll distort the layout.`},{path:["tagRenderings","override","freeform","default"],required:!1,hints:{group:"expert",question:"What value should be entered in the text field if no value is set?",ifunset:"do not prefill the textfield"},type:"string",description:"This can help people to quickly enter the most common option"},{path:["tagRenderings","override","freeform","invalidValues"],required:!1,hints:{group:"expert",question:"What values of the freeform key should be interpreted as 'unknown'?",ifunset:"The question will be considered answered if any value is set for the key"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"For example, if a feature has `shop=yes`, the question 'what type of shop is this?' should still asked"},{path:["tagRenderings","override","freeform","invalidValues","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","freeform","invalidValues","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","question"],required:!1,hints:{question:"What question should be shown to the contributor?",ifunset:"This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well."},{path:["tagRenderings","override","questionHint"],required:!1,hints:{question:"Should some extra information be shown to the contributor, alongside the question?",ifunset:"No extra hint is given"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like`},{path:["tagRenderings","override","editButtonAriaLabel"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`},{path:["tagRenderings","override","labels"],required:!1,hints:{},type:"array",description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer"},{path:["tagRenderings","override","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["tagRenderings","override","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["tagRenderings","override","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["tagRenderings","override","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["tagRenderings","override","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["tagRenderings","override","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["tagRenderings","override","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","override","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["tagRenderings","override","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["tagRenderings"],required:!1,hints:{},type:"object",description:`Rewrites and multiplies the given renderings of type T.
This can be used for introducing many similar questions automatically,
which also makes translations easier.
(Note that the key does _not_ need to be wrapped in {}.
However, we recommend to use them if the key is used in a translation, as missing keys will be picked up and warned for by the translation scripts)
For example:
\`\`\`
{
    rewrite: {
        sourceString: ["key", "a|b|c"],
        into: [
            ["X", 0]
            ["Y", 1],
            ["Z", 2]
        ],
        renderings: [{
            "key":"a|b|c"
        }]
    }
}
\`\`\`
will result in _three_ copies (as the values to rewrite into have three values, namely:
[
  {
  # The first pair: key --> X, a|b|c --> 0
      "X": 0
  },
  {
      "Y": 1
  },
  {
      "Z": 2
  }
]`},{path:["tagRenderings","renderings","mappings"],required:!1,hints:{question:"What are common options?"},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["tagRenderings","renderings","mappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be matched to show this option?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"If in 'question'-mode and the contributor selects this option, these tags will be applied to the object"},{path:["tagRenderings","renderings","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What corresponding text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Shown if the `if` is fulfilled"},{path:["tagRenderings","renderings","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be shown next to this mapping?",ifunset:"Show no icon"},type:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}],description:"This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)"},{path:["tagRenderings","renderings","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the  icon"},{path:["tagRenderings","renderings","mappings","icon","class"],required:!1,hints:{},type:"string",description:"Size of the image"},{path:["tagRenderings","renderings","mappings","hideInAnswer"],required:!1,hints:{typehint:"tag",question:"Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?",iftrue:"Never show this mapping as option to pick",ifunset:"Always show this mapping as option to pick"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}],description:`In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).
In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.
To demonstrate an example making a default assumption:
mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]
For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}
Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch
e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:
{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},
    ]
}
Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`},{path:["tagRenderings","renderings","mappings","hideInAnswer","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","hideInAnswer","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","alsoShowIf"],required:!1,hints:{question:"In what other cases should this item be rendered?",ifunset:"No other cases when this text is shown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!`},{path:["tagRenderings","renderings","mappings","alsoShowIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","alsoShowIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","ifnot"],required:!1,hints:{question:"What tags should be applied if this mapping is _not_ chosen?",ifunset:"Do not apply a tag if a different mapping is chosen."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"Only applicable if 'multiAnswer' is set.\nThis is for situations such as:\n`accepts:coins=no` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.\nThis can be done with `ifnot`\nNote that we can not explicitly render this negative case to the user, we cannot show `does _not_ accept coins`.\nIf this is important to your usecase, consider using multiple radiobutton-fields without `multiAnswer`"},{path:["tagRenderings","renderings","mappings","ifnot","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","ifnot","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","addExtraTags"],required:!1,hints:{typehint:"simple_tag",question:"What extra tags should be added to the object if this object is chosen?"},type:"array",description:`If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.
This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``},{path:["tagRenderings","renderings","mappings","searchTerms"],required:!1,hints:{group:"hidden",question:"If there are many options, what search terms match too?"},type:"object",description:`If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction
Searchterms (per language) allow to easily find an option if there are many options`},{path:["tagRenderings","renderings","mappings","priorityIf"],required:!1,hints:{group:"hidden"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly`},{path:["tagRenderings","renderings","mappings","priorityIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","priorityIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","#"],required:!1,hints:{group:"hidden"},type:"string",description:"Used for comments or to disable a validation\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed"},{path:["tagRenderings","renderings","multiAnswer"],required:!1,hints:{question:"Should a contributor be allowed to select multiple mappings?",iftrue:"allow to select multiple mappings",iffalse:"only allow to select a single mapping",ifunset:"only allow to select a single mapping"},type:"boolean",description:"If true, use checkboxes instead of radio buttons when asking the question"},{path:["tagRenderings","renderings","freeform"],required:!1,hints:{},type:"object",description:"Allow freeform text input from the user"},{path:["tagRenderings","renderings","freeform","key"],required:!1,hints:{question:"What is the name of the attribute that should be written to?",ifunset:"do not offer a freeform textfield as answer option"},type:"string",description:"This is the OpenStreetMap-key that that value will be written to"},{path:["tagRenderings","renderings","freeform","type"],required:!1,hints:{question:"What is the input type?",ifunset:"use an unconstrained <b>string</b> as input (default)",suggestions:[{if:"value=string",then:"<b>string</b> A simple piece of text"},{if:"value=text",then:"<b>text</b> A longer piece of text. Uses an textArea instead of a textField"},{if:"value=date",then:"<b>date</b> A date with date picker"},{if:"value=nat",then:"<b>nat</b> A  whole, positive number or zero"},{if:"value=int",then:"<b>int</b> A whole number, either positive, negative or zero"},{if:"value=distance",then:'<b>distance</b> A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]'},{if:"value=direction",then:"<b>direction</b> A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)."},{if:"value=wikidata",then:"<b>wikidata</b> A wikidata identifier, e.g. Q42. "},{if:"value=pnat",then:"<b>pnat</b> A strict positive number"},{if:"value=float",then:"<b>float</b> A decimal number"},{if:"value=pfloat",then:"<b>pfloat</b> A positive decimal number or zero"},{if:"value=email",then:"<b>email</b> An email adress"},{if:"value=url",then:"<b>url</b> The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user. Furthermore, some tracking parameters will be removed"},{if:"value=phone",then:"<b>phone</b> A phone number"},{if:"value=opening_hours",then:"<b>opening_hours</b> Has extra elements to easily input when a POI is opened. "},{if:"value=color",then:"<b>color</b> Shows a color picker"},{if:"value=icon",then:"<b>icon</b> Makes sure that a valid .svg-path is added"},{if:"value=fediverse",then:"<b>fediverse</b> Validates fediverse addresses and normalizes them into `@username@server`-format"},{if:"value=id",then:"<b>id</b> Checks for valid identifiers for layers, will automatically replace spaces and uppercase"},{if:"value=slope",then:"<b>slope</b> Validates that the slope is a valid number.The accompanying input element uses the gyroscope and the compass to determine the correct incline. The sign of the incline will be set automatically. The bearing of the way is compared to the bearing of the compass, as such, the device knows if it is measuring in the forward or backward direction."},{if:"value=velopark",then:"<b>velopark</b> A special URL-validator that checks the domain name and rewrites to the correct velopark format."},{if:"value=currency",then:"<b>currency</b> Validates monetary amounts"}]},type:"string",description:`The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values`},{path:["tagRenderings","renderings","freeform","placeholder"],required:!1,hints:{typehint:"translation",group:"expert",question:"What placeholder text should be shown in the input-element if there is no input?",ifunset:"No specific placeholder is set, show the type of the textfield"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A (translated) text that is shown (as gray text) within the textfield"},{path:["tagRenderings","renderings","freeform","helperArgs"],required:!1,hints:{group:"expert"},type:"array",description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'`},{path:["tagRenderings","renderings","freeform","addExtraTags"],required:!1,hints:{group:"expert"},type:"array",description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'`},{path:["tagRenderings","renderings","freeform","inline"],required:!1,hints:{group:"expert",question:"Show the freeform as box within the question?",iftrue:"show the freeform input field as a small field within the question",ifunset:"show the freeform input field full-width"},type:"boolean",description:`Instead of showing a full-width text field, the text field will be shown within the rendering of the question.
This combines badly with special input elements, as it'll distort the layout.`},{path:["tagRenderings","renderings","freeform","default"],required:!1,hints:{group:"expert",question:"What value should be entered in the text field if no value is set?",ifunset:"do not prefill the textfield"},type:"string",description:"This can help people to quickly enter the most common option"},{path:["tagRenderings","renderings","freeform","invalidValues"],required:!1,hints:{group:"expert",question:"What values of the freeform key should be interpreted as 'unknown'?",ifunset:"The question will be considered answered if any value is set for the key"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"For example, if a feature has `shop=yes`, the question 'what type of shop is this?' should still asked"},{path:["tagRenderings","renderings","freeform","invalidValues","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","freeform","invalidValues","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","question"],required:!1,hints:{question:"What question should be shown to the contributor?",ifunset:"This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well."},{path:["tagRenderings","renderings","questionHint"],required:!1,hints:{question:"Should some extra information be shown to the contributor, alongside the question?",ifunset:"No extra hint is given"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like`},{path:["tagRenderings","renderings","editButtonAriaLabel"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`},{path:["tagRenderings","renderings","labels"],required:!1,hints:{},type:"array",description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer"},{path:["tagRenderings","renderings","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["tagRenderings","renderings","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["tagRenderings","renderings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["tagRenderings","renderings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["tagRenderings","renderings","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["tagRenderings","renderings","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["tagRenderings","renderings","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["tagRenderings","renderings","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["tagRenderings","renderings","override","mappings"],required:!1,hints:{question:"What are common options?"},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["tagRenderings","renderings","override","mappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be matched to show this option?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"If in 'question'-mode and the contributor selects this option, these tags will be applied to the object"},{path:["tagRenderings","renderings","override","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What corresponding text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Shown if the `if` is fulfilled"},{path:["tagRenderings","renderings","override","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be shown next to this mapping?",ifunset:"Show no icon"},type:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}],description:"This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)"},{path:["tagRenderings","renderings","override","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the  icon"},{path:["tagRenderings","renderings","override","mappings","icon","class"],required:!1,hints:{},type:"string",description:"Size of the image"},{path:["tagRenderings","renderings","override","mappings","hideInAnswer"],required:!1,hints:{typehint:"tag",question:"Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?",iftrue:"Never show this mapping as option to pick",ifunset:"Always show this mapping as option to pick"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}],description:`In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).
In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.
To demonstrate an example making a default assumption:
mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]
For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}
Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch
e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:
{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},
    ]
}
Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`},{path:["tagRenderings","renderings","override","mappings","hideInAnswer","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","hideInAnswer","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","alsoShowIf"],required:!1,hints:{question:"In what other cases should this item be rendered?",ifunset:"No other cases when this text is shown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!`},{path:["tagRenderings","renderings","override","mappings","alsoShowIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","alsoShowIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","ifnot"],required:!1,hints:{question:"What tags should be applied if this mapping is _not_ chosen?",ifunset:"Do not apply a tag if a different mapping is chosen."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"Only applicable if 'multiAnswer' is set.\nThis is for situations such as:\n`accepts:coins=no` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.\nThis can be done with `ifnot`\nNote that we can not explicitly render this negative case to the user, we cannot show `does _not_ accept coins`.\nIf this is important to your usecase, consider using multiple radiobutton-fields without `multiAnswer`"},{path:["tagRenderings","renderings","override","mappings","ifnot","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","ifnot","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","addExtraTags"],required:!1,hints:{typehint:"simple_tag",question:"What extra tags should be added to the object if this object is chosen?"},type:"array",description:`If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.
This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``},{path:["tagRenderings","renderings","override","mappings","searchTerms"],required:!1,hints:{group:"hidden",question:"If there are many options, what search terms match too?"},type:"object",description:`If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction
Searchterms (per language) allow to easily find an option if there are many options`},{path:["tagRenderings","renderings","override","mappings","priorityIf"],required:!1,hints:{group:"hidden"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly`},{path:["tagRenderings","renderings","override","mappings","priorityIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","priorityIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","#"],required:!1,hints:{group:"hidden"},type:"string",description:"Used for comments or to disable a validation\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed"},{path:["tagRenderings","renderings","override","multiAnswer"],required:!1,hints:{question:"Should a contributor be allowed to select multiple mappings?",iftrue:"allow to select multiple mappings",iffalse:"only allow to select a single mapping",ifunset:"only allow to select a single mapping"},type:"boolean",description:"If true, use checkboxes instead of radio buttons when asking the question"},{path:["tagRenderings","renderings","override","freeform"],required:!1,hints:{},type:"object",description:"Allow freeform text input from the user"},{path:["tagRenderings","renderings","override","freeform","key"],required:!1,hints:{question:"What is the name of the attribute that should be written to?",ifunset:"do not offer a freeform textfield as answer option"},type:"string",description:"This is the OpenStreetMap-key that that value will be written to"},{path:["tagRenderings","renderings","override","freeform","type"],required:!1,hints:{question:"What is the input type?",ifunset:"use an unconstrained <b>string</b> as input (default)",suggestions:[{if:"value=string",then:"<b>string</b> A simple piece of text"},{if:"value=text",then:"<b>text</b> A longer piece of text. Uses an textArea instead of a textField"},{if:"value=date",then:"<b>date</b> A date with date picker"},{if:"value=nat",then:"<b>nat</b> A  whole, positive number or zero"},{if:"value=int",then:"<b>int</b> A whole number, either positive, negative or zero"},{if:"value=distance",then:'<b>distance</b> A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]'},{if:"value=direction",then:"<b>direction</b> A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)."},{if:"value=wikidata",then:"<b>wikidata</b> A wikidata identifier, e.g. Q42. "},{if:"value=pnat",then:"<b>pnat</b> A strict positive number"},{if:"value=float",then:"<b>float</b> A decimal number"},{if:"value=pfloat",then:"<b>pfloat</b> A positive decimal number or zero"},{if:"value=email",then:"<b>email</b> An email adress"},{if:"value=url",then:"<b>url</b> The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user. Furthermore, some tracking parameters will be removed"},{if:"value=phone",then:"<b>phone</b> A phone number"},{if:"value=opening_hours",then:"<b>opening_hours</b> Has extra elements to easily input when a POI is opened. "},{if:"value=color",then:"<b>color</b> Shows a color picker"},{if:"value=icon",then:"<b>icon</b> Makes sure that a valid .svg-path is added"},{if:"value=fediverse",then:"<b>fediverse</b> Validates fediverse addresses and normalizes them into `@username@server`-format"},{if:"value=id",then:"<b>id</b> Checks for valid identifiers for layers, will automatically replace spaces and uppercase"},{if:"value=slope",then:"<b>slope</b> Validates that the slope is a valid number.The accompanying input element uses the gyroscope and the compass to determine the correct incline. The sign of the incline will be set automatically. The bearing of the way is compared to the bearing of the compass, as such, the device knows if it is measuring in the forward or backward direction."},{if:"value=velopark",then:"<b>velopark</b> A special URL-validator that checks the domain name and rewrites to the correct velopark format."},{if:"value=currency",then:"<b>currency</b> Validates monetary amounts"}]},type:"string",description:`The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values`},{path:["tagRenderings","renderings","override","freeform","placeholder"],required:!1,hints:{typehint:"translation",group:"expert",question:"What placeholder text should be shown in the input-element if there is no input?",ifunset:"No specific placeholder is set, show the type of the textfield"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A (translated) text that is shown (as gray text) within the textfield"},{path:["tagRenderings","renderings","override","freeform","helperArgs"],required:!1,hints:{group:"expert"},type:"array",description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'`},{path:["tagRenderings","renderings","override","freeform","addExtraTags"],required:!1,hints:{group:"expert"},type:"array",description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'`},{path:["tagRenderings","renderings","override","freeform","inline"],required:!1,hints:{group:"expert",question:"Show the freeform as box within the question?",iftrue:"show the freeform input field as a small field within the question",ifunset:"show the freeform input field full-width"},type:"boolean",description:`Instead of showing a full-width text field, the text field will be shown within the rendering of the question.
This combines badly with special input elements, as it'll distort the layout.`},{path:["tagRenderings","renderings","override","freeform","default"],required:!1,hints:{group:"expert",question:"What value should be entered in the text field if no value is set?",ifunset:"do not prefill the textfield"},type:"string",description:"This can help people to quickly enter the most common option"},{path:["tagRenderings","renderings","override","freeform","invalidValues"],required:!1,hints:{group:"expert",question:"What values of the freeform key should be interpreted as 'unknown'?",ifunset:"The question will be considered answered if any value is set for the key"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"For example, if a feature has `shop=yes`, the question 'what type of shop is this?' should still asked"},{path:["tagRenderings","renderings","override","freeform","invalidValues","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","freeform","invalidValues","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","question"],required:!1,hints:{question:"What question should be shown to the contributor?",ifunset:"This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well."},{path:["tagRenderings","renderings","override","questionHint"],required:!1,hints:{question:"Should some extra information be shown to the contributor, alongside the question?",ifunset:"No extra hint is given"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like`},{path:["tagRenderings","renderings","override","editButtonAriaLabel"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`},{path:["tagRenderings","renderings","override","labels"],required:!1,hints:{},type:"array",description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer"},{path:["tagRenderings","renderings","override","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["tagRenderings","renderings","override","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["tagRenderings","renderings","override","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["tagRenderings","renderings","override","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["tagRenderings","renderings","override","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["tagRenderings","renderings","override","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["tagRenderings","renderings","override","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["tagRenderings","renderings","override","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["tagRenderings","renderings","mappings"],required:!1,hints:{question:"What are common options?"},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["tagRenderings","renderings","mappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be matched to show this option?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"If in 'question'-mode and the contributor selects this option, these tags will be applied to the object"},{path:["tagRenderings","renderings","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What corresponding text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Shown if the `if` is fulfilled"},{path:["tagRenderings","renderings","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be shown next to this mapping?",ifunset:"Show no icon"},type:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}],description:"This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)"},{path:["tagRenderings","renderings","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the  icon"},{path:["tagRenderings","renderings","mappings","icon","class"],required:!1,hints:{},type:"string",description:"Size of the image"},{path:["tagRenderings","renderings","mappings","hideInAnswer"],required:!1,hints:{typehint:"tag",question:"Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?",iftrue:"Never show this mapping as option to pick",ifunset:"Always show this mapping as option to pick"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}],description:`In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).
In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.
To demonstrate an example making a default assumption:
mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]
For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}
Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch
e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:
{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},
    ]
}
Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`},{path:["tagRenderings","renderings","mappings","hideInAnswer","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","hideInAnswer","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","alsoShowIf"],required:!1,hints:{question:"In what other cases should this item be rendered?",ifunset:"No other cases when this text is shown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!`},{path:["tagRenderings","renderings","mappings","alsoShowIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","alsoShowIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","ifnot"],required:!1,hints:{question:"What tags should be applied if this mapping is _not_ chosen?",ifunset:"Do not apply a tag if a different mapping is chosen."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"Only applicable if 'multiAnswer' is set.\nThis is for situations such as:\n`accepts:coins=no` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.\nThis can be done with `ifnot`\nNote that we can not explicitly render this negative case to the user, we cannot show `does _not_ accept coins`.\nIf this is important to your usecase, consider using multiple radiobutton-fields without `multiAnswer`"},{path:["tagRenderings","renderings","mappings","ifnot","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","ifnot","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","addExtraTags"],required:!1,hints:{typehint:"simple_tag",question:"What extra tags should be added to the object if this object is chosen?"},type:"array",description:`If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.
This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``},{path:["tagRenderings","renderings","mappings","searchTerms"],required:!1,hints:{group:"hidden",question:"If there are many options, what search terms match too?"},type:"object",description:`If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction
Searchterms (per language) allow to easily find an option if there are many options`},{path:["tagRenderings","renderings","mappings","priorityIf"],required:!1,hints:{group:"hidden"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly`},{path:["tagRenderings","renderings","mappings","priorityIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","priorityIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","mappings","#"],required:!1,hints:{group:"hidden"},type:"string",description:"Used for comments or to disable a validation\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed"},{path:["tagRenderings","renderings","multiAnswer"],required:!1,hints:{question:"Should a contributor be allowed to select multiple mappings?",iftrue:"allow to select multiple mappings",iffalse:"only allow to select a single mapping",ifunset:"only allow to select a single mapping"},type:"boolean",description:"If true, use checkboxes instead of radio buttons when asking the question"},{path:["tagRenderings","renderings","freeform"],required:!1,hints:{},type:"object",description:"Allow freeform text input from the user"},{path:["tagRenderings","renderings","freeform","key"],required:!1,hints:{question:"What is the name of the attribute that should be written to?",ifunset:"do not offer a freeform textfield as answer option"},type:"string",description:"This is the OpenStreetMap-key that that value will be written to"},{path:["tagRenderings","renderings","freeform","type"],required:!1,hints:{question:"What is the input type?",ifunset:"use an unconstrained <b>string</b> as input (default)",suggestions:[{if:"value=string",then:"<b>string</b> A simple piece of text"},{if:"value=text",then:"<b>text</b> A longer piece of text. Uses an textArea instead of a textField"},{if:"value=date",then:"<b>date</b> A date with date picker"},{if:"value=nat",then:"<b>nat</b> A  whole, positive number or zero"},{if:"value=int",then:"<b>int</b> A whole number, either positive, negative or zero"},{if:"value=distance",then:'<b>distance</b> A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]'},{if:"value=direction",then:"<b>direction</b> A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)."},{if:"value=wikidata",then:"<b>wikidata</b> A wikidata identifier, e.g. Q42. "},{if:"value=pnat",then:"<b>pnat</b> A strict positive number"},{if:"value=float",then:"<b>float</b> A decimal number"},{if:"value=pfloat",then:"<b>pfloat</b> A positive decimal number or zero"},{if:"value=email",then:"<b>email</b> An email adress"},{if:"value=url",then:"<b>url</b> The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user. Furthermore, some tracking parameters will be removed"},{if:"value=phone",then:"<b>phone</b> A phone number"},{if:"value=opening_hours",then:"<b>opening_hours</b> Has extra elements to easily input when a POI is opened. "},{if:"value=color",then:"<b>color</b> Shows a color picker"},{if:"value=icon",then:"<b>icon</b> Makes sure that a valid .svg-path is added"},{if:"value=fediverse",then:"<b>fediverse</b> Validates fediverse addresses and normalizes them into `@username@server`-format"},{if:"value=id",then:"<b>id</b> Checks for valid identifiers for layers, will automatically replace spaces and uppercase"},{if:"value=slope",then:"<b>slope</b> Validates that the slope is a valid number.The accompanying input element uses the gyroscope and the compass to determine the correct incline. The sign of the incline will be set automatically. The bearing of the way is compared to the bearing of the compass, as such, the device knows if it is measuring in the forward or backward direction."},{if:"value=velopark",then:"<b>velopark</b> A special URL-validator that checks the domain name and rewrites to the correct velopark format."},{if:"value=currency",then:"<b>currency</b> Validates monetary amounts"}]},type:"string",description:`The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values`},{path:["tagRenderings","renderings","freeform","placeholder"],required:!1,hints:{typehint:"translation",group:"expert",question:"What placeholder text should be shown in the input-element if there is no input?",ifunset:"No specific placeholder is set, show the type of the textfield"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A (translated) text that is shown (as gray text) within the textfield"},{path:["tagRenderings","renderings","freeform","helperArgs"],required:!1,hints:{group:"expert"},type:"array",description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'`},{path:["tagRenderings","renderings","freeform","addExtraTags"],required:!1,hints:{group:"expert"},type:"array",description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'`},{path:["tagRenderings","renderings","freeform","inline"],required:!1,hints:{group:"expert",question:"Show the freeform as box within the question?",iftrue:"show the freeform input field as a small field within the question",ifunset:"show the freeform input field full-width"},type:"boolean",description:`Instead of showing a full-width text field, the text field will be shown within the rendering of the question.
This combines badly with special input elements, as it'll distort the layout.`},{path:["tagRenderings","renderings","freeform","default"],required:!1,hints:{group:"expert",question:"What value should be entered in the text field if no value is set?",ifunset:"do not prefill the textfield"},type:"string",description:"This can help people to quickly enter the most common option"},{path:["tagRenderings","renderings","freeform","invalidValues"],required:!1,hints:{group:"expert",question:"What values of the freeform key should be interpreted as 'unknown'?",ifunset:"The question will be considered answered if any value is set for the key"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"For example, if a feature has `shop=yes`, the question 'what type of shop is this?' should still asked"},{path:["tagRenderings","renderings","freeform","invalidValues","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","freeform","invalidValues","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","question"],required:!1,hints:{question:"What question should be shown to the contributor?",ifunset:"This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well."},{path:["tagRenderings","renderings","questionHint"],required:!1,hints:{question:"Should some extra information be shown to the contributor, alongside the question?",ifunset:"No extra hint is given"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like`},{path:["tagRenderings","renderings","editButtonAriaLabel"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`},{path:["tagRenderings","renderings","labels"],required:!1,hints:{},type:"array",description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer"},{path:["tagRenderings","renderings","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["tagRenderings","renderings","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["tagRenderings","renderings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["tagRenderings","renderings","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["tagRenderings","renderings","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["tagRenderings","renderings","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["tagRenderings","renderings","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["tagRenderings","renderings","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["tagRenderings","renderings","override","mappings"],required:!1,hints:{question:"What are common options?"},type:"array",description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes"},{path:["tagRenderings","renderings","override","mappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be matched to show this option?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:"If in 'question'-mode and the contributor selects this option, these tags will be applied to the object"},{path:["tagRenderings","renderings","override","mappings","then"],required:!0,hints:{typehint:"rendered",question:"What corresponding text should be shown?"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"Shown if the `if` is fulfilled"},{path:["tagRenderings","renderings","override","mappings","icon"],required:!1,hints:{typehint:"icon",question:"What icon should be shown next to this mapping?",ifunset:"Show no icon"},type:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}],description:"This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)"},{path:["tagRenderings","renderings","override","mappings","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the  icon"},{path:["tagRenderings","renderings","override","mappings","icon","class"],required:!1,hints:{},type:"string",description:"Size of the image"},{path:["tagRenderings","renderings","override","mappings","hideInAnswer"],required:!1,hints:{typehint:"tag",question:"Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?",iftrue:"Never show this mapping as option to pick",ifunset:"Always show this mapping as option to pick"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}],description:`In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).
In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.
To demonstrate an example making a default assumption:
mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]
For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}
Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch
e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:
{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},
    ]
}
Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`},{path:["tagRenderings","renderings","override","mappings","hideInAnswer","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","hideInAnswer","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","alsoShowIf"],required:!1,hints:{question:"In what other cases should this item be rendered?",ifunset:"No other cases when this text is shown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!`},{path:["tagRenderings","renderings","override","mappings","alsoShowIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","alsoShowIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","ifnot"],required:!1,hints:{question:"What tags should be applied if this mapping is _not_ chosen?",ifunset:"Do not apply a tag if a different mapping is chosen."},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"Only applicable if 'multiAnswer' is set.\nThis is for situations such as:\n`accepts:coins=no` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.\nThis can be done with `ifnot`\nNote that we can not explicitly render this negative case to the user, we cannot show `does _not_ accept coins`.\nIf this is important to your usecase, consider using multiple radiobutton-fields without `multiAnswer`"},{path:["tagRenderings","renderings","override","mappings","ifnot","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","ifnot","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","addExtraTags"],required:!1,hints:{typehint:"simple_tag",question:"What extra tags should be added to the object if this object is chosen?"},type:"array",description:`If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.
This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``},{path:["tagRenderings","renderings","override","mappings","searchTerms"],required:!1,hints:{group:"hidden",question:"If there are many options, what search terms match too?"},type:"object",description:`If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction
Searchterms (per language) allow to easily find an option if there are many options`},{path:["tagRenderings","renderings","override","mappings","priorityIf"],required:!1,hints:{group:"hidden"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly`},{path:["tagRenderings","renderings","override","mappings","priorityIf","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","priorityIf","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","mappings","#"],required:!1,hints:{group:"hidden"},type:"string",description:"Used for comments or to disable a validation\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed"},{path:["tagRenderings","renderings","override","multiAnswer"],required:!1,hints:{question:"Should a contributor be allowed to select multiple mappings?",iftrue:"allow to select multiple mappings",iffalse:"only allow to select a single mapping",ifunset:"only allow to select a single mapping"},type:"boolean",description:"If true, use checkboxes instead of radio buttons when asking the question"},{path:["tagRenderings","renderings","override","freeform"],required:!1,hints:{},type:"object",description:"Allow freeform text input from the user"},{path:["tagRenderings","renderings","override","freeform","key"],required:!1,hints:{question:"What is the name of the attribute that should be written to?",ifunset:"do not offer a freeform textfield as answer option"},type:"string",description:"This is the OpenStreetMap-key that that value will be written to"},{path:["tagRenderings","renderings","override","freeform","type"],required:!1,hints:{question:"What is the input type?",ifunset:"use an unconstrained <b>string</b> as input (default)",suggestions:[{if:"value=string",then:"<b>string</b> A simple piece of text"},{if:"value=text",then:"<b>text</b> A longer piece of text. Uses an textArea instead of a textField"},{if:"value=date",then:"<b>date</b> A date with date picker"},{if:"value=nat",then:"<b>nat</b> A  whole, positive number or zero"},{if:"value=int",then:"<b>int</b> A whole number, either positive, negative or zero"},{if:"value=distance",then:'<b>distance</b> A geographical distance in meters (rounded at two points). Will give an extra minimap with a measurement tool. Arguments: [ zoomlevel, preferredBackgroundMapType (comma separated) ], e.g. `["21", "map,photo"]'},{if:"value=direction",then:"<b>direction</b> A geographical direction, in degrees. 0 is north, 90 is east, ... Will return a value between 0 (incl) and 360 (excl)."},{if:"value=wikidata",then:"<b>wikidata</b> A wikidata identifier, e.g. Q42. "},{if:"value=pnat",then:"<b>pnat</b> A strict positive number"},{if:"value=float",then:"<b>float</b> A decimal number"},{if:"value=pfloat",then:"<b>pfloat</b> A positive decimal number or zero"},{if:"value=email",then:"<b>email</b> An email adress"},{if:"value=url",then:"<b>url</b> The validatedTextField will format URLs to always be valid and have a https://-header (even though the 'https'-part will be hidden from the user. Furthermore, some tracking parameters will be removed"},{if:"value=phone",then:"<b>phone</b> A phone number"},{if:"value=opening_hours",then:"<b>opening_hours</b> Has extra elements to easily input when a POI is opened. "},{if:"value=color",then:"<b>color</b> Shows a color picker"},{if:"value=icon",then:"<b>icon</b> Makes sure that a valid .svg-path is added"},{if:"value=fediverse",then:"<b>fediverse</b> Validates fediverse addresses and normalizes them into `@username@server`-format"},{if:"value=id",then:"<b>id</b> Checks for valid identifiers for layers, will automatically replace spaces and uppercase"},{if:"value=slope",then:"<b>slope</b> Validates that the slope is a valid number.The accompanying input element uses the gyroscope and the compass to determine the correct incline. The sign of the incline will be set automatically. The bearing of the way is compared to the bearing of the compass, as such, the device knows if it is measuring in the forward or backward direction."},{if:"value=velopark",then:"<b>velopark</b> A special URL-validator that checks the domain name and rewrites to the correct velopark format."},{if:"value=currency",then:"<b>currency</b> Validates monetary amounts"}]},type:"string",description:`The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values`},{path:["tagRenderings","renderings","override","freeform","placeholder"],required:!1,hints:{typehint:"translation",group:"expert",question:"What placeholder text should be shown in the input-element if there is no input?",ifunset:"No specific placeholder is set, show the type of the textfield"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A (translated) text that is shown (as gray text) within the textfield"},{path:["tagRenderings","renderings","override","freeform","helperArgs"],required:!1,hints:{group:"expert"},type:"array",description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'`},{path:["tagRenderings","renderings","override","freeform","addExtraTags"],required:!1,hints:{group:"expert"},type:"array",description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'`},{path:["tagRenderings","renderings","override","freeform","inline"],required:!1,hints:{group:"expert",question:"Show the freeform as box within the question?",iftrue:"show the freeform input field as a small field within the question",ifunset:"show the freeform input field full-width"},type:"boolean",description:`Instead of showing a full-width text field, the text field will be shown within the rendering of the question.
This combines badly with special input elements, as it'll distort the layout.`},{path:["tagRenderings","renderings","override","freeform","default"],required:!1,hints:{group:"expert",question:"What value should be entered in the text field if no value is set?",ifunset:"do not prefill the textfield"},type:"string",description:"This can help people to quickly enter the most common option"},{path:["tagRenderings","renderings","override","freeform","invalidValues"],required:!1,hints:{group:"expert",question:"What values of the freeform key should be interpreted as 'unknown'?",ifunset:"The question will be considered answered if any value is set for the key"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:"For example, if a feature has `shop=yes`, the question 'what type of shop is this?' should still asked"},{path:["tagRenderings","renderings","override","freeform","invalidValues","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","freeform","invalidValues","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","question"],required:!1,hints:{question:"What question should be shown to the contributor?",ifunset:"This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:"A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well."},{path:["tagRenderings","renderings","override","questionHint"],required:!1,hints:{question:"Should some extra information be shown to the contributor, alongside the question?",ifunset:"No extra hint is given"},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like`},{path:["tagRenderings","renderings","override","editButtonAriaLabel"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`},{path:["tagRenderings","renderings","override","labels"],required:!1,hints:{},type:"array",description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer"},{path:["tagRenderings","renderings","override","render"],required:!1,hints:{typehint:"rendered",question:"What text should be rendered?",ifunset:"No text is shown if no predefined options match."},type:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}],description:"This piece of text will be shown in the infobox.\nIn this text, values within braces (such as {braced(key)}) are replaced by the corresponding `value` in the object.\nFor example, if the object contains tags `amenity=school; name=Windy Hill School`, the render string `This school is named {name}` will be shown to the user as `This school is named Windy Hill School`\nThis text will be shown if:\n- there is no mapping which matches (or there are no matches)\n- no question, no mappings and no 'freeform' is set\nNote that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as `This is of type A &lt;br>&lt;img src='typeA-icon.svg' />`"},{path:["tagRenderings","renderings","override","icon"],required:!1,hints:{typehint:"icon",question:"what icon should be shown next to the 'render' value?",ifunset:"No additional icon is shown next to the always shown text"},type:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}],description:`An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value`},{path:["tagRenderings","renderings","override","icon","path"],required:!0,hints:{typehint:"icon"},type:"string",description:"The path to the icon"},{path:["tagRenderings","renderings","override","icon","class"],required:!1,hints:{},type:"string",description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`},{path:["tagRenderings","renderings","override","condition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown?",ifunset:"No specific condition set; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.
This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`
A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``},{path:["tagRenderings","renderings","override","condition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","condition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","metacondition"],required:!1,hints:{typehint:"tag",question:"When should this item be shown (including special conditions)?",ifunset:"No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`},{path:["tagRenderings","renderings","override","metacondition","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","metacondition","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["tagRenderings","renderings","override","description"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`},{path:["tagRenderings","renderings","override","classes"],required:!1,hints:{question:"What css-classes should be applied to showing this attribute?"},type:"string",description:`A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.
Values are split on \` \`  (space)`},{path:["filter"],required:!1,hints:{group:"filters"},type:[{type:"array",items:{anyOf:[{$ref:"#/definitions/default_1"},{type:"string"}]}},{type:"object",properties:{sameAs:{type:"string"}},required:["sameAs"]}],description:`All the extra questions for filtering.
If a string is given, mapComplete will search in
1. The tagrenderings for a match on ID and use the mappings as options
2. search 'filters.json' for the appropriate filter or
3. will try to parse it as \`layername.filterid\` and us that one.`},{path:["filter","id"],required:!0,hints:{},type:"string",description:"An id/name for this filter, used to set the URL parameters"},{path:["filter","options"],required:!0,hints:{},type:"array",description:`The options for a filter
If there are multiple options these will be a list of radio buttons
If there is only one option this will be a checkbox
Filtering is done based on the given osmTags that are compared to the objects in that layer.
An example which searches by name:
\`\`\`
{
      "id": "shop-name",
      "options": [
        {
          "fields": [
            {
              "name": "search",
              "type": "string"
            }
          ],
          "osmTags": "name~i~.*{search}.*",
          "question": {
            "en": "Only show shops with name {search}",
          }
        }
      ]
    }
    \`\`\``},{path:["filter","options","osmTags"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["filter","options","osmTags","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["filter","options","osmTags","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["filter","options","fields","name"],required:!0,hints:{},type:"string",description:'If name is `search`, use  "_first_comment~.*{search}.*" as osmTags'},{path:["filter","#"],required:!1,hints:{},type:"string",description:'Used for comments or to disable a check\n"ignore-possible-duplicate": disables a check in `DetectDuplicateFilters` which complains that a filter can be replaced by a filter from the `filters`-library-layer'},{path:["deletion"],required:!1,hints:{types:"Use an advanced delete configuration ; boolean",group:"editing",iftrue:"Allow deletion",iffalse:"Do not allow deletion",ifunset:"Do not allow deletion"},type:[{type:"object",properties:{neededChangesets:{description:`*
By default, the contributor needs 20 previous changesets to delete points edited by others.
For some small features (e.g. bicycle racks) this is too much and this requirement can be lowered or dropped, which can be done here.

type: nat
question: How many changesets must a contributor have before being allowed to delete a point?`,type:"number"},extraDeleteReasons:{description:`*
By default, three reasons to delete a point are shown:

- The point does not exist anymore
- The point was a testing point
- THe point could not be found

However, for some layers, there might be different or more specific reasons for deletion which can be user friendly to set, e.g.:

- the shop has closed
- the climbing route has been closed of for nature conservation reasons
- ...

These reasons can be stated here and will be shown in the list of options the user can choose from`,type:"array",items:{type:"object",properties:{explanation:{description:`The text that will be shown to the user as option for why this point does not exist anymore.
Note that the most common reasons (test point, does not exist anymore, cannot be found) are already offered by default

question: For what extra reason might this feature be removed in real-life?`},changesetMessage:{description:`The text that will be uploaded into the changeset or will be used in the fixme in case of a soft deletion
Should be a few words, in english

question: What should be added to the changeset as delete reason?`,type:"string"}},required:["changesetMessage","explanation"]}},nonDeleteMappings:{description:`In some cases, a (starting) contributor might wish to delete a feature even though deletion is not appropriate.
(The most relevant case are small paths running over private property. These should be marked as 'private' instead of deleted, as the community might trace the path again from aerial imagery, gettting us back to the original situation).

By adding a 'nonDeleteMapping', an option can be added into the list which will retag the feature.
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!`,type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The tags that will be given to the object.
This must remove tags so that the 'source/osmTags' won't match anymore

question: What tags should be applied to the object?`},then:{description:`The human explanation for the options

question: What text should be shown to the contributor for this reason?`}},required:["if","then"]}},softDeletionTags:{description:`In some cases, the contributor is not allowed to delete the current feature (e.g. because it isn't a point, the point is referenced by a relation or the user isn't experienced enough).
To still offer the user a 'delete'-option, the feature is retagged with these tags. This is a soft deletion, as the point isn't actually removed from OSM but rather marked as 'disused'
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!

Example (note that "amenity=" erases the 'amenity'-key alltogether):

\`\`\`
{
    "and": ["disussed:amenity=public_bookcase", "amenity="]
}
\`\`\`

or (notice the use of the ':='-tag to copy the old value of 'shop=*' into 'disused:shop='):

\`\`\`
{
    "and": ["disused:shop:={shop}", "shop="]
}
\`\`\`

question: If a hard delete is not possible, what tags should be applied to mark this feature as deleted?
type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},omitDefaultDeleteReasons:{description:`Set this flag if the default delete reasons should be omitted from the dialog.
This requires at least one extraDeleteReason or nonDeleteMapping

question: Should the default delete reasons be hidden?
iftrue: Hide the default delete reasons
iffalse: Show the default delete reasons
ifunset: Show the default delete reasons (default behaviour)`,anyOf:[{type:"array",items:{type:"string"}},{type:"boolean"}]}},additionalProperties:!1},{type:"boolean"}],description:`This block defines under what circumstances the delete dialog is shown for objects of this layer.
If set, a dialog is shown to the user to (soft) delete the point.
The dialog is built to be user friendly and to prevent mistakes.
If deletion is not possible, the dialog will hide itself and show the reason of non-deletability instead.
To configure, the following values are possible:
- false: never ever show the delete button
- true: show the default delete button
- undefined: use the mapcomplete default to show deletion or not. Currently, this is the same as 'false' but this will change in the future
- or: a hash with options (see below)
### The delete dialog
#### Hard deletion if enough experience
A feature can only be deleted from OpenStreetMap by mapcomplete if:
- It is a node
- No ways or relations use the node
- The logged-in user has enough experience OR the user is the only one to have edited the point previously
- The logged-in user has no unread messages (or has a ton of experience)
- The user did not select one of the 'non-delete-options' (see below)
In all other cases, a 'soft deletion' is used.
#### Soft deletion
A 'soft deletion' is when the point isn't deleted fromOSM but retagged so that it'll won't how up in the mapcomplete theme anymore.
This makes it look like it was deleted, without doing damage. A fixme will be added to the point.
Note that a soft deletion is _only_ possible if these tags are provided by the theme creator, as they'll be different for every theme
##### No-delete options
In some cases, the contributor might want to delete something for the wrong reason (e.g. someone who wants to have a path removed "because the path is on their private property").
However, the path exists in reality and should thus be on OSM - otherwise the next contributor will pass by and notice "hey, there is a path missing here! Let me redraw it in OSM!)
The correct approach is to retag the feature in such a way that it is semantically correct *and* that it doesn't show up on the theme anymore.
A no-delete option is offered as 'reason to delete it', but secretly retags.`},{path:["deletion","neededChangesets"],required:!1,hints:{typehint:"nat",question:"How many changesets must a contributor have before being allowed to delete a point?"},type:"number",description:`*
By default, the contributor needs 20 previous changesets to delete points edited by others.
For some small features (e.g. bicycle racks) this is too much and this requirement can be lowered or dropped, which can be done here.`},{path:["deletion","extraDeleteReasons"],required:!1,hints:{},type:"array",description:`*
By default, three reasons to delete a point are shown:
- The point does not exist anymore
- The point was a testing point
- THe point could not be found
However, for some layers, there might be different or more specific reasons for deletion which can be user friendly to set, e.g.:
- the shop has closed
- the climbing route has been closed of for nature conservation reasons
- ...
These reasons can be stated here and will be shown in the list of options the user can choose from`},{path:["deletion","extraDeleteReasons","explanation"],required:!0,hints:{question:"For what extra reason might this feature be removed in real-life?"},description:`The text that will be shown to the user as option for why this point does not exist anymore.
Note that the most common reasons (test point, does not exist anymore, cannot be found) are already offered by default`},{path:["deletion","extraDeleteReasons","changesetMessage"],required:!0,hints:{question:"What should be added to the changeset as delete reason?"},type:"string",description:`The text that will be uploaded into the changeset or will be used in the fixme in case of a soft deletion
Should be a few words, in english`},{path:["deletion","nonDeleteMappings"],required:!1,hints:{},type:"array",description:`In some cases, a (starting) contributor might wish to delete a feature even though deletion is not appropriate.
(The most relevant case are small paths running over private property. These should be marked as 'private' instead of deleted, as the community might trace the path again from aerial imagery, gettting us back to the original situation).
By adding a 'nonDeleteMapping', an option can be added into the list which will retag the feature.
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!`},{path:["deletion","nonDeleteMappings","if"],required:!0,hints:{typehint:"tag",question:"What tags should be applied to the object?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The tags that will be given to the object.
This must remove tags so that the 'source/osmTags' won't match anymore`},{path:["deletion","nonDeleteMappings","then"],required:!0,hints:{question:"What text should be shown to the contributor for this reason?"},description:"The human explanation for the options"},{path:["deletion","softDeletionTags"],required:!1,hints:{typehint:"tag",question:"If a hard delete is not possible, what tags should be applied to mark this feature as deleted?"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}],description:`In some cases, the contributor is not allowed to delete the current feature (e.g. because it isn't a point, the point is referenced by a relation or the user isn't experienced enough).
To still offer the user a 'delete'-option, the feature is retagged with these tags. This is a soft deletion, as the point isn't actually removed from OSM but rather marked as 'disused'
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!
Example (note that "amenity=" erases the 'amenity'-key alltogether):
\`\`\`
{
    "and": ["disussed:amenity=public_bookcase", "amenity="]
}
\`\`\`
or (notice the use of the ':='-tag to copy the old value of 'shop=*' into 'disused:shop='):
\`\`\`
{
    "and": ["disused:shop:={shop}", "shop="]
}
\`\`\``},{path:["deletion","softDeletionTags","and"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["deletion","softDeletionTags","or"],required:!1,hints:{typehint:"tag"},type:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}],description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation`},{path:["deletion","omitDefaultDeleteReasons"],required:!1,hints:{question:"Should the default delete reasons be hidden?",iftrue:"Hide the default delete reasons",iffalse:"Show the default delete reasons",ifunset:"Show the default delete reasons (default behaviour)"},type:[{type:"array",items:{type:"string"}},{type:"boolean"}],description:`Set this flag if the default delete reasons should be omitted from the dialog.
This requires at least one extraDeleteReason or nonDeleteMapping`},{path:["allowMove"],required:!1,hints:{types:"use an advanced move configuration ; boolean",group:"editing",question:"Is deleting a point allowed?",iftrue:"Allow contributors to move a point (for accuracy or a relocation)",iffalse:"Don't allow contributors to move points",ifunset:"Don't allow contributors to move points (default)"},type:[{type:"object",properties:{enableImproveAccuracy:{description:`question: Should moving this type of point to improve the accuracy be allowed?
iftrue: This point can be moved to improve the accuracy
ifunset: (default) This point can be moved to improve the accuracy
iffalse: This point cannot be moved to improve the accuracy`,type:"boolean"},enableRelocation:{description:"question: Should moving this type of point due to a relocation be allowed?\n\nThis will erase the attributes `addr:street`, `addr:housenumber`, `addr:city` and `addr:postcode`\n\niftrue: This type of point can be moved due to a relocation (and will remove address information when this is done)\nifunset: (default) This type of point can be moved due to a relocation (and will remove address information when this is done)\niffalse: This type of point cannot be moved due to a relocation",type:"boolean"}},additionalProperties:!1},{type:"boolean"}],description:`Indicates if a point can be moved and why.
A feature can be moved by MapComplete if:
- It is a point
- The point is _not_ part of a way or a a relation.`},{path:["allowMove","enableImproveAccuracy"],required:!1,hints:{question:"Should moving this type of point to improve the accuracy be allowed?",iftrue:"This point can be moved to improve the accuracy",iffalse:"This point cannot be moved to improve the accuracy",ifunset:"(default) This point can be moved to improve the accuracy"},type:"boolean",description:""},{path:["allowMove","enableRelocation"],required:!1,hints:{question:"Should moving this type of point due to a relocation be allowed?",iftrue:"This type of point can be moved due to a relocation (and will remove address information when this is done)",iffalse:"This type of point cannot be moved due to a relocation",ifunset:"(default) This type of point can be moved due to a relocation (and will remove address information when this is done)"},type:"boolean",description:"This will erase the attributes `addr:street`, `addr:housenumber`, `addr:city` and `addr:postcode`"},{path:["allowSplit"],required:!1,hints:{group:"editing",question:"Should the contributor be able to split ways using this layer?",iftrue:"enable the 'split-roads'-component",iffalse:"don't enable the split-roads component",ifunset:"don't enable the split-roads component"},type:"boolean",description:`If set, a 'split this way' button is shown on objects rendered as LineStrings, e.g. highways.
If the way is part of a relation, MapComplete will attempt to update this relation as well`},{path:["units"],required:!1,hints:{},type:[{description:`In some cases, a value is represented in a certain unit (such as meters for heigt/distance/..., km/h for speed, ...)

Sometimes, multiple denominations are possible (e.g. km/h vs mile/h; megawatt vs kilowatt vs gigawatt for power generators, ...)

This brings in some troubles, as there are multiple ways to write it (no denomitation, 'm' vs 'meter' 'metre', ...)

Not only do we want to write consistent data to OSM, we also want to present this consistently to the user.
This is handled by defining units.

# Rendering

To render a value with long (human) denomination, use {canonical(key)}

# Usage

First of all, you define which keys have units applied, for example:

\`\`\`
units: [
 appliesTo: ["maxspeed", "maxspeed:hgv", "maxspeed:bus"]
 applicableUnits: [
     ...
 ]
]
\`\`\`

ApplicableUnits defines which is the canonical extension, how it is presented to the user, ...:

\`\`\`
applicableUnits: [
{
    canonicalDenomination: "km/h",
    alternativeDenomination: ["km/u", "kmh", "kph"]
    default: true,
    human: {
        en: "kilometer/hour",
        nl: "kilometer/uur"
    },
    humanShort: {
        en: "km/h",
        nl: "km/u"
    }
},
{
    canoncialDenomination: "mph",
    ... similar for miles an hour ...
}
]
\`\`\`


If this is defined, then every key which the denominations apply to (\`maxspeed\`, \`maxspeed:hgv\` and \`maxspeed:bus\`) will be rewritten at the metatagging stage:
every value will be parsed and the canonical extension will be added add presented to the other parts of the code.

Also, if a freeform text field is used, an extra dropdown with applicable denominations will be given`,type:"object",properties:{quantity:{description:"What is quantified? E.g. 'speed', 'length' (including width, diameter, ...), 'electric tension', 'electric current', 'duration'",type:"string"},appliesToKey:{description:"Every key from this list will be normalized.\n\nTo render the value properly (with a human readable denomination), use `{canonical(<key>)}`",type:"array",items:{type:"string"}},eraseInvalidValues:{description:`If set, invalid values will be erased in the MC application (but not in OSM of course!)
Be careful with setting this`,type:"boolean"},applicableUnits:{description:`The possible denominations for this unit.
For length, denominations could be "meter", "kilometer", "miles", "foot"`,type:"array",items:{$ref:"#/definitions/DenominationConfigJson"}},defaultInput:{description:`In some cases, the default denomination is not the most user friendly to input.
E.g., when measuring kerb heights, it is illogical to ask contributors to input an amount in meters.

When a default input method should be used, this can be specified by setting the canonical denomination here, e.g.
\`defaultInput: "cm"\`. This must be a denomination which appears in the applicableUnits`,type:"string"}},required:["applicableUnits"],additionalProperties:!1},{$ref:"#/definitions/Record<string,string|{quantity:string;denominations:string[];canonical?:string|undefined;inverted?:boolean|undefined;}>"}],description:'Either a list with [{"key": "unitname", "key2": {"quantity": "unitname", "denominations": ["denom", "denom"]}}]\nUse `"inverted": true` if the amount should be _divided_ by the denomination, e.g. for charge over time (`5/day`)'},{path:["units","quantity"],required:!1,hints:{},type:"string",description:"What is quantified? E.g. 'speed', 'length' (including width, diameter, ...), 'electric tension', 'electric current', 'duration'"},{path:["units","appliesToKey"],required:!1,hints:{},type:"array",description:"Every key from this list will be normalized.\nTo render the value properly (with a human readable denomination), use `{canonical(<key>)}`"},{path:["units","eraseInvalidValues"],required:!1,hints:{},type:"boolean",description:`If set, invalid values will be erased in the MC application (but not in OSM of course!)
Be careful with setting this`},{path:["units","applicableUnits"],required:!0,hints:{},type:"array",description:`The possible denominations for this unit.
For length, denominations could be "meter", "kilometer", "miles", "foot"`},{path:["units","applicableUnits","useIfNoUnitGiven"],required:!1,hints:{},type:[{type:"array",items:{type:"string"}},{type:"boolean"}],description:`If this evaluates to true and the value to interpret has _no_ unit given, assumes that this unit is meant.
Alternatively, a list of country codes can be given where this acts as the default interpretation
E.g., a denomination using "meter" would probably set this flag to "true";
a denomination for "mp/h" will use the condition "_country=gb" to indicate that it is the default in the UK.
If none of the units indicate that they are the default, the first denomination will be used instead`},{path:["units","applicableUnits","canonicalDenomination"],required:!0,hints:{},type:"string",description:`The canonical value for this denomination which will be added to the value in OSM.
e.g. "m" for meters
If the user inputs '42', the canonical value will be added and it'll become '42m'.
Important: often, _no_ canonical values are expected, e.g. in the case of 'maxspeed' where 'km/h' is the default.
In this case, an empty string should be used`},{path:["units","applicableUnits","canonicalDenominationSingular"],required:!1,hints:{},type:"string",description:"The canonical denomination in the case that the unit is precisely '1'.\nUsed for display purposes only.\nE.g.: for duration of something in minutes: `2 minutes` but `1 minute`; the `minute` goes here"},{path:["units","applicableUnits","alternativeDenomination"],required:!1,hints:{},type:"array",description:"A list of alternative values which can occur in the OSM database - used for parsing.\nE.g.: while 'm' is canonical, `meter`, `mtrs`, ... can occur as well"},{path:["units","applicableUnits","human"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`The value for humans in the dropdown. This should not use abbreviations and should be translated, e.g.
{
    "en": "meter",
    "fr": "metre"
}`},{path:["units","applicableUnits","humanSingular"],required:!1,hints:{},type:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}],description:`The value for humans in the dropdown. This should not use abbreviations and should be translated, e.g.
{
    "en": "minute",
    "nl": "minuut"
}`},{path:["units","applicableUnits","prefix"],required:!1,hints:{},type:"boolean",description:`If set, then the canonical value will be prefixed instead, e.g. for ''
Note that if all values use 'prefix', the dropdown might move to before the text field`},{path:["units","applicableUnits","addSpace"],required:!1,hints:{},type:"boolean",description:"If set, add a space between the quantity and the denomination.\nE.g.: `50 mph` instad of `50mph`"},{path:["units","defaultInput"],required:!1,hints:{},type:"string",description:`In some cases, the default denomination is not the most user friendly to input.
E.g., when measuring kerb heights, it is illogical to ask contributors to input an amount in meters.
When a default input method should be used, this can be specified by setting the canonical denomination here, e.g.
\`defaultInput: "cm"\`. This must be a denomination which appears in the applicableUnits`},{path:["syncSelection"],required:!1,hints:{group:"advanced",question:"Should enabling/disabling the layer be saved (locally or in the cloud)?",suggestions:[{if:"value=no",then:"Don't save, always revert to the default"},{if:"value=local",then:"Save selection in local storage"},{if:"value=theme-only",then:"Save the state in the OSM-usersettings, but apply on this theme only (default)"},{if:"value=global",then:"Save in OSM-usersettings and toggle on _all_ themes using this layer"}]},type:"string",description:"If set, synchronizes whether or not this layer is enabled."},{path:["#"],required:!1,hints:{group:"hidden"},type:"string",description:`Used for comments and/or to disable some checks
no-question-hint-check: disables a check in MiscTagRenderingChecks which complains about 'div', 'span' or 'class=subtle'-HTML elements in the tagRendering`},{path:["fullNodeDatabase"],required:!1,hints:{group:"hidden"},type:"boolean",description:"_Set automatically by MapComplete, please ignore_"}];class yo{static isTranslation(e){return e.type?Array.isArray(e.type)?e.type.some(t=>t.$ref==="#/definitions/Record<string,string>"):e.type.$ref==="#/definitions/Record<string,string>":!1}}function wo(o){let e,t,n,i=o[0].message+"",a,s,l,r;return t=new no({props:{class:"mx-1 h-6 w-6 shrink-0"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),a=O(i),s=A(),l=v("div"),_(e,"class","information flex items-center justify-between")},m(h,d){b(h,e,d),x(t,e,null),g(e,n),g(e,a),g(e,s),g(e,l),r=!0},p(h,d){(!r||d&1)&&i!==(i=h[0].message+"")&&Z(a,i)},i(h){r||(u(t.$$.fragment,h),r=!0)},o(h){m(t.$$.fragment,h),r=!1},d(h){h&&y(e),C(t)}}}function vo(o){let e,t,n,i=o[0].message+"",a,s,l,r;return t=new mt({props:{class:"mx-1 h-6 w-6 shrink-0"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),a=O(i),s=A(),l=v("div"),_(e,"class","warning flex items-center justify-between")},m(h,d){b(h,e,d),x(t,e,null),g(e,n),g(e,a),g(e,s),g(e,l),r=!0},p(h,d){(!r||d&1)&&i!==(i=h[0].message+"")&&Z(a,i)},i(h){r||(u(t.$$.fragment,h),r=!0)},o(h){m(t.$$.fragment,h),r=!1},d(h){h&&y(e),C(t)}}}function _o(o){let e,t,n,i=o[0].message+"",a,s,l,r;return t=new mt({props:{class:"mx-1 h-6 w-6 shrink-0"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),a=O(i),s=A(),l=v("div"),_(e,"class","alert flex items-center justify-between")},m(h,d){b(h,e,d),x(t,e,null),g(e,n),g(e,a),g(e,s),g(e,l),r=!0},p(h,d){(!r||d&1)&&i!==(i=h[0].message+"")&&Z(a,i)},i(h){r||(u(t.$$.fragment,h),r=!0)},o(h){m(t.$$.fragment,h),r=!1},d(h){h&&y(e),C(t)}}}function To(o){let e,t,n,i;const a=[_o,vo,wo],s=[];function l(r,h){return r[0].level==="error"?0:r[0].level==="warning"?1:r[0].level==="information"?2:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=ne()},m(r,h){~e&&s[e].m(r,h),b(r,n,h),i=!0},p(r,[h]){let d=e;e=l(r),e===d?~e&&s[e].p(r,h):(t&&(G(),m(s[d],1,1,()=>{s[d]=null}),Y()),~e?(t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),u(t,1),t.m(n.parentNode,n)):t=null)},i(r){i||(u(t),i=!0)},o(r){m(t),i=!1},d(r){~e&&s[e].d(r),r&&y(n)}}}function qo(o,e,t){let{message:n}=e;return o.$$set=i=>{"message"in i&&t(0,n=i.message)},[n]}class ot extends ae{constructor(e){super(),re(this,e,qo,To,le,{message:0})}}function _t(o,e,t){const n=o.slice();return n[19]=e[t],n}function ko(o){let e,t,n,i,a;t=new He({props:{editMode:o[7],config:o[3],selectedElement:void 0,state:o[0],tags:o[8]}});let s=o[5].length>0&&Tt(o),l=window.location.hostname==="127.0.0.1"&&xo(o);return{c(){e=v("div"),$(t.$$.fragment),n=A(),s&&s.c(),i=A(),l&&l.c(),_(e,"class","flex w-full flex-col")},m(r,h){b(r,e,h),x(t,e,null),g(e,n),s&&s.m(e,null),g(e,i),l&&l.m(e,null),a=!0},p(r,h){const d={};h&8&&(d.config=r[3]),h&1&&(d.state=r[0]),t.$set(d),r[5].length>0?s?(s.p(r,h),h&32&&u(s,1)):(s=Tt(r),s.c(),u(s,1),s.m(e,i)):s&&(G(),m(s,1,1,()=>{s=null}),Y()),window.location.hostname==="127.0.0.1"&&l.p(r,h)},i(r){a||(u(t.$$.fragment,r),u(s),a=!0)},o(r){m(t.$$.fragment,r),m(s),a=!1},d(r){r&&y(e),C(t),s&&s.d(),l&&l.d()}}}function $o(o){let e,t;return{c(){e=v("span"),t=O(o[4]),_(e,"class","alert")},m(n,i){b(n,e,i),g(e,t)},p(n,i){i&16&&Z(t,n[4])},i:z,o:z,d(n){n&&y(e)}}}function Tt(o){let e,t,n=o[5],i=[];for(let s=0;s<n.length;s+=1)i[s]=qt(_t(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l&32){n=s[5];let r;for(r=0;r<n.length;r+=1){const h=_t(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=qt(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function qt(o){let e,t;return e=new ot({props:{message:o[19]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&32&&(a.message=n[19]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function xo(o){let e,t,n,i=o[1].join(".")+"",a,s,l,r=o[2].hints.typehint+"",h,d,p=o[2].hints.group+"",c,f,w;return{c(){e=v("span"),t=O("SchemaBasedField "),n=v("b"),a=O(i),s=A(),l=v("span"),h=O(r),d=O(`
        Group: `),c=O(p),_(l,"class","cursor-pointer"),_(e,"class","subtle")},m(I,T){b(I,e,T),g(e,t),g(e,n),g(n,a),g(e,s),g(e,l),g(l,h),g(e,d),g(e,c),f||(w=[K(l,"click",o[10]),K(e,"click",o[11])],f=!0)},p(I,T){T&2&&i!==(i=I[1].join(".")+"")&&Z(a,i),T&4&&r!==(r=I[2].hints.typehint+"")&&Z(h,r),T&4&&p!==(p=I[2].hints.group+"")&&Z(c,p)},d(I){I&&y(e),f=!1,Ie(w)}}}function Co(o){let e,t,n,i;const a=[$o,ko],s=[];function l(r,h){return r[4]!==void 0?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=ne()},m(r,h){s[e].m(r,h),b(r,n,h),i=!0},p(r,[h]){let d=e;e=l(r),e===d?s[e].p(r,h):(G(),m(s[d],1,1,()=>{s[d]=null}),Y(),t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),u(t,1),t.m(n.parentNode,n))},i(r){i||(u(t),i=!0)},o(r){m(t),i=!1},d(r){s[e].d(r),r&&y(n)}}}function Ze(o){return o===void 0?!1:(o.type&&(o=o.type),o==="boolean"?!0:Array.isArray(o)?o.some(e=>Ze(e)):!1)}function Ro(o,e,t){var q,R,N,J,P;let n,{state:i}=e,{path:a=[]}=e,{schema:s}=e,{startInEditModeIfUnset:l=s.hints&&!s.hints.ifunset}=e;const r=((q=s.hints)==null?void 0:q.typehint)==="translation"||((R=s.hints)==null?void 0:R.typehint)==="rendered"||yo.isTranslation(s);let h=s.hints.typehint??"string",d=(s.hints.inline??s.path.join("."))+(r?" <b>{translated(value)}</b>":" <b>{value}</b>");s.type==="boolean"&&(d=void 0),(s.hints.typehint==="tag"||s.hints.typehint==="simple_tag")&&(d="{tags()}");let p=(N=s.hints.typehelper)==null?void 0:N.split(","),c=s.hints.inline!==void 0;if(r&&(h="translation",s.hints.inline)){const W=s.hints.inline;d=W,c=!1,p=[W.substring(0,W.indexOf("{")),W.substring(W.indexOf("}")+1)]}h.endsWith("[]")&&(h=h.substring(0,h.length-2));const f={id:a.join("_"),render:d,question:s.hints.question,questionHint:s.description,questionHintIsMd:!0,freeform:s.type==="boolean"?void 0:{key:"value",type:h,inline:c,helperArgs:p}};s.hints.default?f.mappings=[{if:"value=",then:a.at(-1)+" is not set. The default value <b>"+s.hints.default+"</b> will be used. "+(s.hints.ifunset??""),hideInAnswer:Ze(s.type)}]:s.required||(f.mappings=[{if:"value=",then:a.at(-1)+" is not set. "+(s.hints.ifunset??"")}]),Ze(s.type)&&(f.mappings=f.mappings??[],f.mappings.push({if:"value=true",then:((J=s.hints)==null?void 0:J.iftrue)??"Yes"},{if:"value=false",then:((P=s.hints)==null?void 0:P.iffalse)??"No"})),s.hints.suggestions&&(f.mappings||(f.mappings=[]),f.mappings.push(...s.hints.suggestions));let w,I,T=i.messagesFor(a);te(o,T,W=>t(5,n=W));try{w=new Be(f,"config based on "+s.path.join("."))}catch(W){console.error(W,w),I=a.join(".")+" "+W}let F=i.getCurrentValueFor(a),L=F===void 0&&l;const D=new ue({value:F});try{Xe(i.register(a,D.map(W=>{const k=W.value;if(typeof k=="object")return{...k};if(s.type==="boolean")return k==null?k:k==="true"||k==="yes"||k==="1";if(Ze(s.type)){if(k==="true"||k==="yes"||k==="1")return!0;if(k==="false"||k==="no"||k==="0"||k===!1)return!1}return s.type==="number"?k===""||k===null||isNaN(Number(k))?void 0:Number(k):r&&typeof k=="string"?k===""?{}:JSON.parse(k):k}),r))}catch(W){console.error("Could not register",a,"due to",W)}const j=()=>console.log(s),S=()=>console.log(s);return o.$$set=W=>{"state"in W&&t(0,i=W.state),"path"in W&&t(1,a=W.path),"schema"in W&&t(2,s=W.schema),"startInEditModeIfUnset"in W&&t(9,l=W.startInEditModeIfUnset)},[i,a,s,w,I,n,T,L,D,l,j,S]}class ke extends ae{constructor(e){super(),re(this,e,Ro,Co,le,{state:0,path:1,schema:2,startInEditModeIfUnset:9})}}function kt(o,e,t){const n=o.slice();return n[18]=e[t],n}const Ao=o=>({}),$t=o=>({class:"my-4 self-end"});function xt(o,e,t){const n=o.slice();return n[21]=e[t],n}function Ct(o){let e,t;return{c(){e=O("TagRendering "),t=O(o[3])},m(n,i){b(n,e,i),b(n,t,i)},p(n,i){i&8&&Z(t,n[3])},d(n){n&&y(e),n&&y(t)}}}function Rt(o){let e=o[2].hints.question+"",t;return{c(){t=O(e)},m(n,i){b(n,t,i)},p(n,i){i&4&&e!==(e=n[2].hints.question+"")&&Z(t,e)},d(n){n&&y(t)}}}function So(o){let e,t=o[2].hints.question&&Rt(o);return{c(){t&&t.c(),e=ne()},m(n,i){t&&t.m(n,i),b(n,e,i)},p(n,i){n[2].hints.question?t?t.p(n,i):(t=Rt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&y(e)}}}function Io(o){let e,t;return e=new ct({props:{src:o[11]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p:z,i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function At(o){let e,t;return e=new ot({props:{message:o[21]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&16&&(a.message=n[21]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function jo(o){let e,t;return e=new He({props:{selectedElement:o[0].exampleFeature,config:o[18],editingEnabled:new Ci(!0),state:o[0],tags:o[9]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.selectedElement=n[0].exampleFeature),i&32&&(a.config=n[18]),i&1&&(a.state=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Jo(o){let e,t,n,i,a;return n=new ft({props:{src:o[18].metacondition.asHumanString(!0,!1,{})}}),{c(){e=O(`This tagRendering is currently not shown. It will appear if the feature matches the
        metacondition
        `),t=v("b"),$(n.$$.fragment),i=O(`
        For a breakdown of usable meta conditions, go to a mapcomplete theme > settings and enable debug-data.
        The meta-tags will appear at the bottom`)},m(s,l){b(s,e,l),b(s,t,l),x(n,t,null),b(s,i,l),a=!0},p(s,l){const r={};l&32&&(r.src=s[18].metacondition.asHumanString(!0,!1,{})),n.$set(r)},i(s){a||(u(n.$$.fragment,s),a=!0)},o(s){m(n.$$.fragment,s),a=!1},d(s){s&&y(e),s&&y(t),C(n),s&&y(i)}}}function Wo(o){let e,t,n,i,a;return n=new ft({props:{src:o[18].condition.asHumanString(!0,!1,{})}}),{c(){e=O(`This tagRendering is currently not shown. It will appear if the feature matches the
        condition
        `),t=v("b"),$(n.$$.fragment),i=O(`

        Try to answer the relevant question above`)},m(s,l){b(s,e,l),b(s,t,l),x(n,t,null),b(s,i,l),a=!0},p(s,l){const r={};l&32&&(r.src=s[18].condition.asHumanString(!0,!1,{})),n.$set(r)},i(s){a||(u(n.$$.fragment,s),a=!0)},o(s){m(n.$$.fragment,s),a=!1},d(s){s&&y(e),s&&y(t),C(n),s&&y(i)}}}function Mo(o){let e,t,n=o[18].error+"",i;return{c(){e=v("div"),t=O("Could not create a preview of this tagRendering: "),i=O(n),_(e,"class","alert")},m(a,s){b(a,e,s),g(e,t),g(e,i)},p(a,s){s&32&&n!==(n=a[18].error+"")&&Z(i,n)},i:z,o:z,d(a){a&&y(e)}}}function St(o){let e,t,n,i,a,s;const l=[Mo,Wo,Jo,jo],r=[];function h(d,p){return p&96&&(e=null),p&96&&(t=null),d[18].error!==void 0?0:(e==null&&(e=!!(d[18].condition&&!d[18].condition.matchesProperties(d[6]))),e?1:(t==null&&(t=!!(d[18].metacondition&&!d[18].metacondition.matchesProperties(d[6]))),t?2:3))}return n=h(o,-1),i=r[n]=l[n](o),{c(){i.c(),a=ne()},m(d,p){r[n].m(d,p),b(d,a,p),s=!0},p(d,p){let c=n;n=h(d,p),n===c?r[n].p(d,p):(G(),m(r[c],1,1,()=>{r[c]=null}),Y(),i=r[n],i?i.p(d,p):(i=r[n]=l[n](d),i.c()),u(i,1),i.m(a.parentNode,a))},i(d){s||(u(i),s=!0)},o(d){m(i),s=!1},d(d){r[n].d(d),d&&y(a)}}}function Oo(o){let e,t,n,i,a,s,l,r,h,d,p,c,f=o[3]&&Ct(o);i=new qe({props:{clss:"primary",$$slots:{default:[So]},$$scope:{ctx:o}}}),i.$on("click",o[13]);let w=o[11]&&Io(o),I=o[4],T=[];for(let R=0;R<I.length;R+=1)T[R]=At(xt(o,I,R));const F=R=>m(T[R],1,1,()=>{T[R]=null}),L=o[12].default,D=be(L,o,o[14],$t);let j=o[5],S=[];for(let R=0;R<j.length;R+=1)S[R]=St(kt(o,j,R));const q=R=>m(S[R],1,1,()=>{S[R]=null});return{c(){e=v("div"),t=v("div"),f&&f.c(),n=A(),$(i.$$.fragment),a=A(),w&&w.c(),s=A();for(let R=0;R<T.length;R+=1)T[R].c();l=A(),D&&D.c(),r=A(),h=v("div"),d=v("h3"),d.textContent="Preview of this question",p=A();for(let R=0;R<S.length;R+=1)S[R].c();_(t,"class","interactive border-interactive m-4 flex w-full flex-col"),_(h,"class","m-4 flex w-full flex-col"),_(e,"class","flex")},m(R,N){b(R,e,N),g(e,t),f&&f.m(t,null),g(t,n),x(i,t,null),g(t,a),w&&w.m(t,null),g(t,s);for(let J=0;J<T.length;J+=1)T[J]&&T[J].m(t,null);g(t,l),D&&D.m(t,null),g(e,r),g(e,h),g(h,d),g(h,p);for(let J=0;J<S.length;J+=1)S[J]&&S[J].m(h,null);c=!0},p(R,[N]){R[3]?f?f.p(R,N):(f=Ct(R),f.c(),f.m(t,n)):f&&(f.d(1),f=null);const J={};if(N&16388&&(J.$$scope={dirty:N,ctx:R}),i.$set(J),R[11]&&w.p(R,N),N&16){I=R[4];let P;for(P=0;P<I.length;P+=1){const W=xt(R,I,P);T[P]?(T[P].p(W,N),u(T[P],1)):(T[P]=At(W),T[P].c(),u(T[P],1),T[P].m(t,l))}for(G(),P=I.length;P<T.length;P+=1)F(P);Y()}if(D&&D.p&&(!c||N&16384)&&ye(D,L,R,R[14],c?ve(L,R[14],N,Ao):we(R[14]),$t),N&609){j=R[5];let P;for(P=0;P<j.length;P+=1){const W=kt(R,j,P);S[P]?(S[P].p(W,N),u(S[P],1)):(S[P]=St(W),S[P].c(),u(S[P],1),S[P].m(h,null))}for(G(),P=j.length;P<S.length;P+=1)q(P);Y()}},i(R){if(!c){u(i.$$.fragment,R),u(w);for(let N=0;N<I.length;N+=1)u(T[N]);u(D,R);for(let N=0;N<j.length;N+=1)u(S[N]);c=!0}},o(R){m(i.$$.fragment,R),m(w),T=T.filter(Boolean);for(let N=0;N<T.length;N+=1)m(T[N]);m(D,R),S=S.filter(Boolean);for(let N=0;N<S.length;N+=1)m(S[N]);c=!1},d(R){R&&y(e),f&&f.d(),C(i),w&&w.d(),fe(T,R),D&&D.d(R),fe(S,R)}}}function Do(o,e,t){let n,i,a,s,{$$slots:l={},$$scope:r}=e,{state:h}=e,{path:d}=e,{schema:p}=e,c=h.getStoreFor(d),f={};for(let S of En){if(S.labels)for(let q of S.labels)f[q]=(f[q]??[]).concat(S);f[S.id]=[S]}let I=c.map(S=>typeof S=="string"?f[S]:[S]).map(S=>S?(console.log("Regenerating configs"),S.map(q=>{try{return new Be(q)}catch(R){return{error:R}}})):[{error:"No configuartions found"}]);te(o,I,S=>t(5,a=S));let T=c.mapD(S=>{if(S!=null&&S.id)return S.id;if(typeof S=="string")return S});te(o,T,S=>t(3,n=S));let F=h.testTags;te(o,F,S=>t(6,s=S));let L=h.messagesFor(d);te(o,L,S=>t(4,i=S));let D=p.description;const j=()=>h.highlightedItem.setData({path:d,schema:p});return o.$$set=S=>{"state"in S&&t(0,h=S.state),"path"in S&&t(1,d=S.path),"schema"in S&&t(2,p=S.schema),"$$scope"in S&&t(14,r=S.$$scope)},[h,d,p,n,i,a,s,I,T,F,L,D,l,j,r]}class Gn extends ae{constructor(e){super(),re(this,e,Do,Oo,le,{state:0,path:1,schema:2})}}function It(o,e,t){const n=o.slice();return n[24]=e[t],n}function jt(o,e,t){const n=o.slice();return n[21]=e[t],n}function Jt(o){let e,t=o[2].hints.title+"",n,i,a,s=o[2].description+"",l;return{c(){e=v("h3"),n=O(t),i=A(),a=v("div"),l=O(s)},m(r,h){b(r,e,h),g(e,n),b(r,i,h),b(r,a,h),g(a,l)},p(r,h){h&4&&t!==(t=r[2].hints.title+"")&&Z(n,t),h&4&&s!==(s=r[2].description+"")&&Z(l,s)},d(r){r&&y(e),r&&y(i),r&&y(a)}}}function No(o){let e,t,n,i,a,s,l;t=new He({props:{config:o[10],selectedElement:void 0,state:o[0],tags:o[9]}});const r=[Eo,Lo],h=[];function d(p,c){return p[3]!==void 0?0:p[7].length>0?1:-1}return~(i=d(o))&&(a=h[i]=r[i](o)),{c(){e=v("div"),$(t.$$.fragment),n=A(),a&&a.c(),s=ne()},m(p,c){b(p,e,c),x(t,e,null),b(p,n,c),~i&&h[i].m(p,c),b(p,s,c),l=!0},p(p,c){const f={};c&1&&(f.state=p[0]),t.$set(f);let w=i;i=d(p),i===w?~i&&h[i].p(p,c):(a&&(G(),m(h[w],1,1,()=>{h[w]=null}),Y()),~i?(a=h[i],a?a.p(p,c):(a=h[i]=r[i](p),a.c()),u(a,1),a.m(s.parentNode,s)):a=null)},i(p){l||(u(t.$$.fragment,p),u(a),l=!0)},o(p){m(t.$$.fragment,p),m(a),l=!1},d(p){p&&y(e),C(t),p&&y(n),~i&&h[i].d(p),p&&y(s)}}}function Fo(o){let e,t=o[11].builtin+"",n,i;return{c(){e=O("This object refers to "),n=O(t),i=O(` and overrides some properties. This cannot be edited
    with MapComplete Studio`)},m(a,s){b(a,e,s),b(a,n,s),b(a,i,s)},p:z,i:z,o:z,d(a){a&&y(e),a&&y(n),a&&y(i)}}}function Lo(o){let e,t,n=o[7],i=[];for(let s=0;s<n.length;s+=1)i[s]=Wt(It(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l&128){n=s[7];let r;for(r=0;r<n.length;r+=1){const h=It(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Wt(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function Eo(o){let e,t,n=o[4],i=[];for(let s=0;s<n.length;s+=1)i[s]=Mt(jt(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l&113){n=s[4];let r;for(r=0;r<n.length;r+=1){const h=jt(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Mt(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function Wt(o){let e,t;return e=new ot({props:{message:o[24]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&128&&(a.message=n[24]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Po(o){let e,t,n=o[21].path.join(".")+"",i;return{c(){e=v("span"),t=O("Omitted expert question "),i=O(n),_(e,"class","subtle")},m(a,s){b(a,e,s),g(e,t),g(e,i)},p(a,s){s&16&&n!==(n=a[21].path.join(".")+"")&&Z(i,n)},i:z,o:z,d(a){a&&y(e)}}}function Ho(o){var n,i;let e,t;return e=new Ue({props:{state:o[0],schema:o[21],path:[...o[5],((i=(n=o[21])==null?void 0:n.path)==null?void 0:i.at(-1))??"???"]}}),{c(){$(e.$$.fragment)},m(a,s){x(e,a,s),t=!0},p(a,s){var r,h;const l={};s&1&&(l.state=a[0]),s&16&&(l.schema=a[21]),s&48&&(l.path=[...a[5],((h=(r=a[21])==null?void 0:r.path)==null?void 0:h.at(-1))??"???"]),e.$set(l)},i(a){t||(u(e.$$.fragment,a),t=!0)},o(a){m(e.$$.fragment,a),t=!1},d(a){C(e,a)}}}function Mt(o){let e,t,n,i;const a=[Ho,Po],s=[];function l(r,h){var d;return r[6]||((d=r[21].hints)==null?void 0:d.group)!=="expert"?0:window.location.hostname==="127.0.0.1"?1:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=ne()},m(r,h){~e&&s[e].m(r,h),b(r,n,h),i=!0},p(r,h){let d=e;e=l(r),e===d?~e&&s[e].p(r,h):(t&&(G(),m(s[d],1,1,()=>{s[d]=null}),Y()),~e?(t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),u(t,1),t.m(n.parentNode,n)):t=null)},i(r){i||(u(t),i=!0)},o(r){m(t),i=!1},d(r){~e&&s[e].d(r),r&&y(n)}}}function Bo(o){let e,t,n,i=o[1].join(".")+"",a,s,l,r=o[2].hints.typehint+"",h,d,p;return{c(){e=v("span"),t=O("SchemaBasedMultiType "),n=v("b"),a=O(i),s=A(),l=v("span"),h=O(r),_(l,"class","cursor-pointer"),_(e,"class","subtle")},m(c,f){b(c,e,f),g(e,t),g(e,n),g(n,a),g(e,s),g(e,l),g(l,h),d||(p=K(l,"click",o[14]),d=!0)},p(c,f){f&2&&i!==(i=c[1].join(".")+"")&&Z(a,i),f&4&&r!==(r=c[2].hints.typehint+"")&&Z(h,r)},d(c){c&&y(e),d=!1,p()}}}function Uo(o){let e,t,n,i,a,s,l=o[2].hints.title!==void 0&&Jt(o);const r=[Fo,No],h=[];function d(c,f){return c[12]?0:1}n=d(o),i=h[n]=r[n](o);let p=window.location.hostname==="127.0.0.1"&&Bo(o);return{c(){e=v("div"),l&&l.c(),t=A(),i.c(),a=A(),p&&p.c(),_(e,"class","m-1 flex flex-col gap-y-2 border-2 border-dashed border-gray-300 p-2")},m(c,f){b(c,e,f),l&&l.m(e,null),g(e,t),h[n].m(e,null),g(e,a),p&&p.m(e,null),s=!0},p(c,[f]){c[2].hints.title!==void 0?l?l.p(c,f):(l=Jt(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),i.p(c,f),window.location.hostname==="127.0.0.1"&&p.p(c,f)},i(c){s||(u(i),s=!0)},o(c){m(i),s=!1},d(c){c&&y(e),l&&l.d(),h[n].d(),p&&p.d()}}}function zo(o,e,t){var N;let n,i,{state:a}=e,{path:s=[]}=e,{schema:l}=e,r=a.expertMode;te(o,r,J=>t(6,n=J));const h=l.hints.typesdefault?Number(l.hints.typesdefault):void 0,d=(N=l.type)==null?void 0:N.findIndex(J=>J.type==="boolean"),p=l.hints.types.split(";");d>=0&&p.splice(d);let c=!1;{const J=Array.isArray(l.type)?l.type[l.type.length-1].type:[];c=J==="string"||Array.isArray(J)&&J.some(P=>P==="string")}c&&p.splice(p.length-1,1);const f={id:"TYPE_OF:"+s.join("_"),question:l.hints.question??"Which subcategory is needed for "+l.path.at(-1)+"?",questionHint:l.description,questionHintIsMd:!0,mappings:p.map(J=>J.trim()).filter(J=>J.length>0).map((J,P)=>({if:"chosen_type_index="+P,addExtraTags:["value="],then:J+(P===h?" (Default)":"")})),render:c?l.hints.inline??"Use a hardcoded value: <b>{value}</b>":void 0,freeform:c?{key:"value",inline:!0,type:l.hints.typehint,addExtraTags:["chosen_type_index="]}:void 0};let w=new ue({});l.hints.ifunset&&f.mappings.push({if:{and:["value=","chosen_type_index="]},then:l.hints.ifunset}),l.hints.suggestions&&f.mappings.push(...l.hints.suggestions),d>=0&&f.mappings.unshift({if:"value=true",then:l.hints.iftrue??"Yes",addExtraTags:["chosen_type_index="]},{if:"value=false",then:l.hints.iffalse??"No",addExtraTags:["chosen_type_index="]});const I=new Be(f,"config based on "+l.path.join("."));let T=h;const F=a.getCurrentValueFor(s);let L=(F==null?void 0:F.override)!==void 0;if(d>=0&&(F===!0||F===!1))w.setData({value:""+F});else if(c&&typeof F=="string")w.setData({value:F}),T=void 0;else if(F){const J=[];e:for(let P=0;P<l.type.length;P++){const W=l.type[P];let k=0;for(const M of Object.keys(W.properties??{}))F[M]&&k++;if(W.required){let M=0;for(const X of W.required){if(F[X]===void 0)continue e;M++}J.push({index:P,matchingPropertiesCount:M,optionalMatches:k})}else J.push({index:P,matchingPropertiesCount:0,optionalMatches:k})}J.sort((P,W)=>W.optionalMatches-P.optionalMatches),J.sort((P,W)=>W.matchingPropertiesCount-P.matchingPropertiesCount),J.length>0&&(T=J[0].index,w.setData({chosen_type_index:""+T}))}else h!==void 0?w.setData({chosen_type_index:""+h}):T=h;if(d>=0||c){const J=w.mapD(P=>P.chosen_type_index?"":c?P.value:P.value==="true");Xe(a.register(s,J))}let D=[],j=s;const S=a.getStoreFor(s);Xe(w.addCallbackAndRun(J=>{if(J.value!==void 0&&J.value!==""){t(3,T=void 0);return}const P=T;t(3,T=J.chosen_type_index?Number(J.chosen_type_index):h);const W=l.type[T];if(T!==P){t(4,D=[]);const M=a.getCurrentValueFor(s)??{};for(const X of(W==null?void 0:W.required)??[])M[X]??(M[X]={});S.setData(M)}if(!W)return;t(5,j=s);const k=s.filter(M=>typeof M=="string");if(W.$ref==="#/definitions/Record<string,string>"){const M=a.getTranslationAt(k);D.push(M),t(5,j=s.slice(0,s.length-2));return}if(W.properties)for(const M of Object.keys(W.properties))D.push(...a.getSchema([...k,M]))}));let q=a.messagesFor(s);te(o,q,J=>t(7,i=J));const R=()=>console.log(l);return o.$$set=J=>{"state"in J&&t(0,a=J.state),"path"in J&&t(1,s=J.path),"schema"in J&&t(2,l=J.schema)},[a,s,l,T,D,j,n,i,r,w,I,F,L,q,R]}class Yn extends ae{constructor(e){super(),re(this,e,zo,Uo,le,{state:0,path:1,schema:2})}}const Vo=o=>({}),Ot=o=>({});function Dt(o,e,t){const n=o.slice();return n[32]=e[t],n[34]=t,n}function Nt(o,e,t){const n=o.slice();return n[36]=e[t],n}function Ft(o,e,t){const n=o.slice();return n[32]=e[t],n[34]=t,n}function Lt(o,e,t){const n=o.slice();return n[29]=e[t],n}function Qo(o){let e,t;return e=new ct({props:{src:o[0].description}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&1&&(a.src=n[0].description),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Go(o){let e,t,n=o[6],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ht(Dt(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l[0]&127819){n=s[6];let r;for(r=0;r<n.length;r+=1){const h=Dt(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Ht(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function Yo(o){let e,t,n=o[6],i=[];for(let s=0;s<n.length;s+=1)i[s]=Bt(Ft(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l[0]&20547){n=s[6];let r;for(r=0;r<n.length;r+=1){const h=Ft(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Bt(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function Ko(o){let e,t,n,i=o[7].length>0&&Ut(o);return{c(){e=O(`No values are defined
    `),i&&i.c(),t=ne()},m(a,s){b(a,e,s),i&&i.m(a,s),b(a,t,s),n=!0},p(a,s){a[7].length>0?i?(i.p(a,s),s[0]&128&&u(i,1)):(i=Ut(a),i.c(),u(i,1),i.m(t.parentNode,t)):i&&(G(),m(i,1,1,()=>{i=null}),Y())},i(a){n||(u(i),n=!0)},o(a){m(i),n=!1},d(a){a&&y(e),i&&i.d(a),a&&y(t)}}}function Zo(o){let e;return{c(){e=O("No array defined")},m(t,n){b(t,e,n)},p:z,i:z,o:z,d(t){t&&y(e)}}}function Xo(o){let e,t,n,i,a,s,l,r,h,d,p;r=new ut({props:{class:"h-4 w-4"}});function c(){return o[19](o[34])}return{c(){e=v("div"),t=v("h3"),n=O(o[3]),i=A(),a=O(o[34]),s=A(),l=v("button"),$(r.$$.fragment),_(t,"class","m-0"),_(l,"class","h-fit w-fit rounded-full border border-black p-1"),_(e,"class","flex items-center justify-between")},m(f,w){b(f,e,w),g(e,t),g(t,n),g(t,i),g(t,a),g(e,s),g(e,l),x(r,l,null),h=!0,d||(p=K(l,"click",c),d=!0)},p(f,w){o=f,(!h||w[0]&8)&&Z(n,o[3])},i(f){h||(u(r.$$.fragment,f),h=!0)},o(f){m(r.$$.fragment,f),h=!1},d(f){f&&y(e),C(r),d=!1,p()}}}function es(o){let e,t,n=o[9],i=[];for(let s=0;s<n.length;s+=1)i[s]=Et(Nt(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l[0]&4610){n=s[9];let r;for(r=0;r<n.length;r+=1){const h=Nt(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Et(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function ts(o){let e,t;return e=new Yn({props:{state:o[1],path:o[12](o[34],[]),schema:o[13]()}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&2&&(a.state=n[1]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function ns(o){let e,t;return e=new Gn({props:{state:o[1],path:o[12](o[34],[]),schema:o[0],$$slots:{default:[os]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&2&&(a.state=n[1]),i[0]&1&&(a.schema=n[0]),i[0]&134217792&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Et(o){let e,t;return e=new Ue({props:{state:o[1],path:o[12](o[34],[o[36].path.at(-1)]),schema:o[36]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&2&&(a.state=n[1]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function is(o){let e,t,n,i,a;function s(){return o[21](o[34])}function l(){return o[22](o[34])}return{c(){e=v("button"),e.textContent="Move to front",t=A(),n=v("button"),n.textContent="Move up"},m(r,h){b(r,e,h),b(r,t,h),b(r,n,h),i||(a=[K(e,"click",s),K(n,"click",l)],i=!0)},p(r,h){o=r},d(r){r&&y(e),r&&y(t),r&&y(n),i=!1,Ie(a)}}}function Pt(o){let e,t,n,i,a;function s(){return o[23](o[34])}function l(){return o[24](o[34])}return{c(){e=v("button"),e.textContent="Move down",t=A(),n=v("button"),n.textContent="Move to back"},m(r,h){b(r,e,h),b(r,t,h),b(r,n,h),i||(a=[K(e,"click",s),K(n,"click",l)],i=!0)},p(r,h){o=r},d(r){r&&y(e),r&&y(t),r&&y(n),i=!1,Ie(a)}}}function os(o){let e,t,n,i,a,s,l,r,h;t=new ut({props:{class:"h-4 w-4"}});function d(){return o[20](o[34])}let p=o[34]>0&&is(o),c=o[34]+1<o[6].length&&Pt(o);return{c(){e=v("button"),$(t.$$.fragment),n=O(`
              Delete this question`),i=A(),p&&p.c(),a=A(),c&&c.c(),s=ne()},m(f,w){b(f,e,w),x(t,e,null),g(e,n),b(f,i,w),p&&p.m(f,w),b(f,a,w),c&&c.m(f,w),b(f,s,w),l=!0,r||(h=K(e,"click",d),r=!0)},p(f,w){o=f,o[34]>0&&p.p(o,w),o[34]+1<o[6].length?c?c.p(o,w):(c=Pt(o),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i(f){l||(u(t.$$.fragment,f),l=!0)},o(f){m(t.$$.fragment,f),l=!1},d(f){f&&y(e),C(t),f&&y(i),p&&p.d(f),f&&y(a),c&&c.d(f),f&&y(s),r=!1,h()}}}function Ht(o){let e,t,n,i,a,s,l=!o[8]&&Xo(o);const r=[ns,ts,es],h=[];function d(p,c){return p[8]?0:p[0].hints.types?1:2}return n=d(o),i=h[n]=r[n](o),{c(){l&&l.c(),e=A(),t=v("div"),i.c(),a=A(),_(t,"class","border border-black")},m(p,c){l&&l.m(p,c),b(p,e,c),b(p,t,c),h[n].m(t,null),g(t,a),s=!0},p(p,c){p[8]||l.p(p,c);let f=n;n=d(p),n===f?h[n].p(p,c):(G(),m(h[f],1,1,()=>{h[f]=null}),Y(),i=h[n],i?i.p(p,c):(i=h[n]=r[n](p),i.c()),u(i,1),i.m(t,a))},i(p){s||(u(l),u(i),s=!0)},o(p){m(l),m(i),s=!1},d(p){l&&l.d(p),p&&y(e),p&&y(t),h[n].d()}}}function Bt(o){let e,t,n,i,a,s,l,r,h;t=new ke({props:{state:o[1],schema:o[0],path:o[12](o[34],[])}}),a=new ut({props:{class:"h-4 w-4"}});function d(){return o[18](o[34])}return{c(){e=v("div"),$(t.$$.fragment),n=A(),i=v("button"),$(a.$$.fragment),s=A(),_(i,"class","h-fit w-fit rounded-full border border-black p-1"),_(e,"class","flex w-full")},m(p,c){b(p,e,c),x(t,e,null),g(e,n),g(e,i),x(a,i,null),g(e,s),l=!0,r||(h=K(i,"click",d),r=!0)},p(p,c){o=p;const f={};c[0]&2&&(f.state=o[1]),c[0]&1&&(f.schema=o[0]),t.$set(f)},i(p){l||(u(t.$$.fragment,p),u(a.$$.fragment,p),l=!0)},o(p){m(t.$$.fragment,p),m(a.$$.fragment,p),l=!1},d(p){p&&y(e),C(t),C(a),r=!1,h()}}}function Ut(o){let e,t,n=o[7],i=[];for(let s=0;s<n.length;s+=1)i[s]=zt(Lt(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l[0]&128){n=s[7];let r;for(r=0;r<n.length;r+=1){const h=Lt(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=zt(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function zt(o){let e,t;return e=new ot({props:{message:o[29]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&128&&(a.message=n[29]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Vt(o){let e,t,n;return{c(){e=v("button"),e.textContent="Add a builtin tagRendering"},m(i,a){b(i,e,a),t||(n=K(e,"click",o[26]),t=!0)},p:z,d(i){i&&y(e),t=!1,n()}}}function ss(o){let e,t,n=o[0].path.at(-1)+"",i,a,s,l,r,h,d,p,c,f,w,I,T,F,L,D,j,S=o[9].length>0&&Qo(o);const q=[Zo,Ko,Yo,Go],R=[];function N(k,M){return k[6]===void 0?0:k[6].length===0?1:k[9].length===0?2:3}l=N(o),r=R[l]=q[l](o);let J=o[2].length===1&&o[2][0]==="tagRenderings"&&Vt(o);const P=o[17]["extra-button"],W=be(P,o,o[27],Ot);return{c(){e=v("div"),t=v("h3"),i=O(n),a=A(),S&&S.c(),s=A(),r.c(),h=A(),d=v("div"),p=v("button"),c=O("Add "),f=O(o[4]),w=A(),I=O(o[3]),T=A(),J&&J.c(),F=A(),W&&W.c(),_(d,"class","flex"),_(e,"class","pl-2")},m(k,M){b(k,e,M),g(e,t),g(t,i),g(e,a),S&&S.m(e,null),g(e,s),R[l].m(e,null),g(e,h),g(e,d),g(d,p),g(p,c),g(p,f),g(p,w),g(p,I),g(d,T),J&&J.m(d,null),g(d,F),W&&W.m(d,null),L=!0,D||(j=K(p,"click",o[25]),D=!0)},p(k,M){(!L||M[0]&1)&&n!==(n=k[0].path.at(-1)+"")&&Z(i,n),k[9].length>0&&S.p(k,M);let X=l;l=N(k),l===X?R[l].p(k,M):(G(),m(R[X],1,1,()=>{R[X]=null}),Y(),r=R[l],r?r.p(k,M):(r=R[l]=q[l](k),r.c()),u(r,1),r.m(e,h)),(!L||M[0]&16)&&Z(f,k[4]),(!L||M[0]&8)&&Z(I,k[3]),k[2].length===1&&k[2][0]==="tagRenderings"?J?J.p(k,M):(J=Vt(k),J.c(),J.m(d,F)):J&&(J.d(1),J=null),W&&W.p&&(!L||M[0]&134217728)&&ye(W,P,k,k[27],L?ve(P,k[27],M,Vo):we(k[27]),Ot)},i(k){L||(u(S),u(r),u(W,k),L=!0)},o(k){m(S),m(r),m(W,k),L=!1},d(k){k&&y(e),S&&S.d(),R[l].d(),J&&J.d(),W&&W.d(k),D=!1,j()}}}function as(o,e,t){let n,i,{$$slots:a={},$$scope:s}=e,{state:l}=e,{schema:r}=e,h=r.path.at(-1),d=h;h!=null&&h.endsWith("s")&&(d=h.slice(0,h.length-1));let p="a";d!=null&&d.match(/^[aeoui]/)&&(p="an");let{path:c=[]}=e;const f=c.length===1&&c[0]==="tagRenderings";f&&(r={...r},r.description=void 0);const w=l.getSchemaStartingWith(r.path).filter(E=>E.path.length-1===r.path.length);let I=l.messagesFor(c);te(o,I,E=>t(7,i=E));const T=l.getStoreFor(c);te(o,T,E=>t(6,n=E)),T.data===void 0&&T.setData([]);function F(E){T.data===void 0&&T.setData([]),T.data.push(E),T.ping(),f&&l.highlightedItem.setData({path:[...c,T.data.length-1],schema:r})}function L(E,he){const Q=[...c,E],se=[...he];for(const ie of c)if(se[0]===ie)se.splice(0,1);else break;return Q.push(...se),Q}function D(){const E={...r};return E.hints.typehint=void 0,E}function j(E){T.data.splice(E,1),T.ping()}function S(E,he){const Q=T.data[E];t(5,T.data[E]=T.data[he],T),t(5,T.data[he]=Q,T),T.ping()}function q(E,he){const Q=T.data[E];T.data.splice(E,1),T.data.splice(he,0,Q),T.ping()}const R=E=>{j(E)},N=E=>{j(E)},J=E=>{j(E)},P=E=>{q(E,0)},W=E=>{S(E,E-1)},k=E=>{S(E,E+1)},M=E=>{q(E,n.length-1)},X=()=>F(),B=()=>{F("images")};return o.$$set=E=>{"state"in E&&t(1,l=E.state),"schema"in E&&t(0,r=E.schema),"path"in E&&t(2,c=E.path),"$$scope"in E&&t(27,s=E.$$scope)},[r,l,c,d,p,T,n,i,f,w,I,F,L,D,j,S,q,a,R,N,J,P,W,k,M,X,B,s]}class Kn extends ae{constructor(e){super(),re(this,e,as,ss,le,{state:1,schema:0,path:2},null,[-1,-1])}}function rs(o){let e,t,n;return t=new He({props:{config:o[2],selectedElement:void 0,state:o[0],tags:o[1]}}),{c(){e=v("div"),$(t.$$.fragment)},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,[a]){const s={};a&1&&(s.state=i[0]),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function ls(o,e,t){let{schema:n}=e,{state:i}=e,{path:a=[]}=e;const s={mappings:n.hints.suggestions,multiAnswer:!0,id:"multi_anwser_"+a.join("_"),question:n.hints.question},l=new ue({});{const h=i.getCurrentValueFor(a);h&&h.length>0&&l.setData({value:h.join(";")})}l.addCallbackD(h=>{var p;const d=(p=h.value)==null?void 0:p.split(";");d&&i.setValueAt(a,d)});const r=new Be(s);return o.$$set=h=>{"schema"in h&&t(3,n=h.schema),"state"in h&&t(0,i=h.state),"path"in h&&t(4,a=h.path)},[i,l,r,n,a]}class hs extends ae{constructor(e){super(),re(this,e,ls,rs,le,{schema:3,state:0,path:4})}}function ds(o){let e,t,n=o[0].path.join(".")+"",i,a,s=o[0].hints.group+"",l;return{c(){e=v("div"),t=O("Not showing SBI "),i=O(n),a=O(" due to group "),l=O(s),_(e,"class","subtle")},m(r,h){b(r,e,h),g(e,t),g(e,i),g(e,a),g(e,l)},p(r,h){h&1&&n!==(n=r[0].path.join(".")+"")&&Z(i,n),h&1&&s!==(s=r[0].hints.group+"")&&Z(l,s)},i:z,o:z,d(r){r&&y(e)}}}function ps(o){let e,t,n,i,a;const s=[ms,gs,us,fs,cs],l=[];function r(h,d){var p,c,f;return d&1&&(e=null),e==null&&(e=!!((c=(p=h[0].hints)==null?void 0:p.typehint)!=null&&c.endsWith("[]"))),e?0:h[0].type==="array"&&h[0].hints.multianswer==="true"?1:h[0].type==="array"?2:(f=h[0].hints)!=null&&f.types?3:4}return t=r(o,-1),n=l[t]=s[t](o),{c(){n.c(),i=ne()},m(h,d){l[t].m(h,d),b(h,i,d),a=!0},p(h,d){let p=t;t=r(h,d),t===p?l[t].p(h,d):(G(),m(l[p],1,1,()=>{l[p]=null}),Y(),n=l[t],n?n.p(h,d):(n=l[t]=s[t](h),n.c()),u(n,1),n.m(i.parentNode,i))},i(h){a||(u(n),a=!0)},o(h){m(n),a=!1},d(h){l[t].d(h),h&&y(i)}}}function cs(o){let e,t;return e=new ke({props:{path:o[2],state:o[1],schema:o[0]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&4&&(a.path=n[2]),i&2&&(a.state=n[1]),i&1&&(a.schema=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function fs(o){let e,t;return e=new Yn({props:{path:o[2],state:o[1],schema:o[0]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&4&&(a.path=n[2]),i&2&&(a.state=n[1]),i&1&&(a.schema=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function us(o){let e,t;return e=new Kn({props:{path:o[2],state:o[1],schema:o[0]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&4&&(a.path=n[2]),i&2&&(a.state=n[1]),i&1&&(a.schema=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function gs(o){let e,t;return e=new hs({props:{path:o[2],state:o[1],schema:o[0]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&4&&(a.path=n[2]),i&2&&(a.state=n[1]),i&1&&(a.schema=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function ms(o){let e,t;return e=new Kn({props:{path:o[2],state:o[1],schema:o[0]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&4&&(a.path=n[2]),i&2&&(a.state=n[1]),i&1&&(a.schema=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function bs(o){let e,t,n,i;const a=[ps,ds],s=[];function l(r,h){var d;return(((d=r[0].hints)==null?void 0:d.group)!=="expert"||r[3])&&r[0].hints.group!=="hidden"?0:window.location.hostname==="127.0.0.1"?1:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=ne()},m(r,h){~e&&s[e].m(r,h),b(r,n,h),i=!0},p(r,[h]){let d=e;e=l(r),e===d?~e&&s[e].p(r,h):(t&&(G(),m(s[d],1,1,()=>{s[d]=null}),Y()),~e?(t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),u(t,1),t.m(n.parentNode,n)):t=null)},i(r){i||(u(t),i=!0)},o(r){m(t),i=!1},d(r){~e&&s[e].d(r),r&&y(n)}}}function ys(o,e,t){let n,{schema:i}=e,{state:a}=e,{path:s=[]}=e,l=a.expertMode;return te(o,l,r=>t(3,n=r)),o.$$set=r=>{"schema"in r&&t(0,i=r.schema),"state"in r&&t(1,a=r.state),"path"in r&&t(2,s=r.path)},[i,a,s,n,l]}class Ue extends ae{constructor(e){super(),re(this,e,ys,bs,le,{schema:0,state:1,path:2})}}function Qt(o,e,t){const n=o.slice();return n[10]=e[t],n}function Gt(o,e,t){const n=o.slice();return n[10]=e[t],n}const ws=o=>({}),Yt=o=>({});function vs(o){let e,t,n=o[5],i=[];for(let s=0;s<n.length;s+=1)i[s]=Kt(Qt(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){e=v("div");for(let s=0;s<i.length;s+=1)i[s].c();_(e,"class","flex w-full flex-col gap-y-1 pl-2")},m(s,l){b(s,e,l);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);t=!0},p(s,l){if(l&41){n=s[5];let r;for(r=0;r<n.length;r+=1){const h=Qt(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Kt(h),i[r].c(),u(i[r],1),i[r].m(e,null))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){s&&y(e),fe(i,s)}}}function _s(o){let e,t,n,i,a,s,l;const r=o[7].description,h=be(r,o,o[6],Yt);let d=o[5],p=[];for(let f=0;f<d.length;f+=1)p[f]=Zt(Gt(o,d,f));const c=f=>m(p[f],1,1,()=>{p[f]=null});return{c(){e=v("div"),t=v("h3"),n=O(o[2]),i=A(),a=v("div"),h&&h.c(),s=A();for(let f=0;f<p.length;f+=1)p[f].c();_(a,"class","flex w-full flex-col gap-y-1 border border-black pl-2"),_(e,"class","flex w-full flex-col")},m(f,w){b(f,e,w),g(e,t),g(t,n),g(e,i),g(e,a),h&&h.m(a,null),g(a,s);for(let I=0;I<p.length;I+=1)p[I]&&p[I].m(a,null);l=!0},p(f,w){if((!l||w&4)&&Z(n,f[2]),h&&h.p&&(!l||w&64)&&ye(h,r,f,f[6],l?ve(r,f[6],w,ws):we(f[6]),Yt),w&33){d=f[5];let I;for(I=0;I<d.length;I+=1){const T=Gt(f,d,I);p[I]?(p[I].p(T,w),u(p[I],1)):(p[I]=Zt(T),p[I].c(),u(p[I],1),p[I].m(a,null))}for(G(),I=d.length;I<p.length;I+=1)c(I);Y()}},i(f){if(!l){u(h,f);for(let w=0;w<d.length;w+=1)u(p[w]);l=!0}},o(f){m(h,f),p=p.filter(Boolean);for(let w=0;w<p.length;w+=1)m(p[w]);l=!1},d(f){f&&y(e),h&&h.d(f),fe(p,f)}}}function Ts(o){let e,t=o[3].join(".")+"",n;return{c(){e=O("Bug: Region received empty list as configuration at "),n=O(t)},m(i,a){b(i,e,a),b(i,n,a)},p(i,a){a&8&&t!==(t=i[3].join(".")+"")&&Z(n,t)},i:z,o:z,d(i){i&&y(e),i&&y(n)}}}function qs(o){let e,t=o[3].join(".")+"",n;return{c(){e=O("Bug: 'Region' received 'undefined' at "),n=O(t)},m(i,a){b(i,e,a),b(i,n,a)},p(i,a){a&8&&t!==(t=i[3].join(".")+"")&&Z(n,t)},i:z,o:z,d(i){i&&y(e),i&&y(n)}}}function Kt(o){let e,t;return e=new Ue({props:{state:o[0],path:o[3].concat(o[10].path),schema:o[10]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.state=n[0]),i&8&&(a.path=n[3].concat(n[10].path)),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Zt(o){let e,t;return e=new Ue({props:{state:o[0],path:o[10].path,schema:o[10]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.state=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function ks(o){let e,t,n,i;const a=[qs,Ts,_s,vs],s=[];function l(r,h){return r[1]===void 0?0:r[1].length===0?1:r[2]?2:3}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=ne()},m(r,h){s[e].m(r,h),b(r,n,h),i=!0},p(r,[h]){let d=e;e=l(r),e===d?s[e].p(r,h):(G(),m(s[d],1,1,()=>{s[d]=null}),Y(),t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),u(t,1),t.m(n.parentNode,n))},i(r){i||(u(t),i=!0)},o(r){m(t),i=!1},d(r){s[e].d(r),r&&y(n)}}}function $s(o,e,t){let n,{$$slots:i={},$$scope:a}=e,{state:s}=e,{configs:l}=e,{title:r=void 0}=e,{path:h=[]}=e,d=s.expertMode;te(o,d,f=>t(8,n=f));let p=l.filter(f=>{var w;return((w=f.hints)==null?void 0:w.group)!=="hidden"}),c=n?p:p.filter(f=>{var w;return((w=f.hints)==null?void 0:w.group)!=="expert"});return o.$$set=f=>{"state"in f&&t(0,s=f.state),"configs"in f&&t(1,l=f.configs),"title"in f&&t(2,r=f.title),"path"in f&&t(3,h=f.path),"$$scope"in f&&t(6,a=f.$$scope)},[s,l,r,h,d,c,a,i]}class me extends ae{constructor(e){super(),re(this,e,$s,ks,le,{state:0,configs:1,title:2,path:3})}}function Xt(o){let e,t,n,i,a;return t=new mt({props:{class:"h-6 w-6"}}),{c(){e=v("span"),$(t.$$.fragment),n=A(),i=O(o[0]),_(e,"class","alert flex w-min")},m(s,l){b(s,e,l),x(t,e,null),g(e,n),g(e,i),a=!0},p(s,l){(!a||l&1)&&Z(i,s[0])},i(s){a||(u(t.$$.fragment,s),a=!0)},o(s){m(t.$$.fragment,s),a=!1},d(s){s&&y(e),C(t)}}}function xs(o){let e,t,n=o[0]>0&&Xt(o);return{c(){n&&n.c(),e=ne()},m(i,a){n&&n.m(i,a),b(i,e,a),t=!0},p(i,[a]){i[0]>0?n?(n.p(i,a),a&1&&u(n,1)):(n=Xt(i),n.c(),u(n,1),n.m(e.parentNode,e)):n&&(G(),m(n,1,1,()=>{n=null}),Y())},i(i){t||(u(n),t=!0)},o(i){m(n),t=!1},d(i){n&&n.d(i),i&&y(e)}}}function Cs(o,e,t){let n,{firstPaths:i}=e,{state:a}=e,s=a.messages.map(l=>l.filter(r=>{const h=r.context.path;return i.has(h[0])||h.length>1&&i.has(h[1])}).length);return te(o,s,l=>t(0,n=l)),o.$$set=l=>{"firstPaths"in l&&t(2,i=l.firstPaths),"state"in l&&t(3,a=l.state)},[n,s,i,a]}class ze extends ae{constructor(e){super(),re(this,e,Cs,xs,le,{firstPaths:2,state:3})}}const Rs=o=>({}),en=o=>({});function As(o){var p;let e,t,n,i,a,s;function l(c,f){return f&8&&(t=null),t==null&&(t=Object.keys(c[3]).length>0),t?js:Is}let r=l(o,-1),h=r(o);i=new ft({props:{src:(p=o[5])==null?void 0:p.asHumanString(!1,!1,o[6])}});let d=o[7].length>0&&tn(o);return{c(){e=v("div"),h.c(),n=A(),$(i.$$.fragment),a=A(),d&&d.c()},m(c,f){b(c,e,f),h.m(e,null),g(e,n),x(i,e,null),g(e,a),d&&d.m(e,null),s=!0},p(c,f){var I;r===(r=l(c,f))&&h?h.p(c,f):(h.d(1),h=r(c),h&&(h.c(),h.m(e,n)));const w={};f&96&&(w.src=(I=c[5])==null?void 0:I.asHumanString(!1,!1,c[6])),i.$set(w),c[7].length>0?d?(d.p(c,f),f&128&&u(d,1)):(d=tn(c),d.c(),u(d,1),d.m(e,null)):d&&(G(),m(d,1,1,()=>{d=null}),Y())},i(c){s||(u(i.$$.fragment,c),u(d),s=!0)},o(c){m(i.$$.fragment,c),m(d),s=!1},d(c){c&&y(e),h.d(),C(i),d&&d.d()}}}function Ss(o){let e,t,n,i,a;n=new me({props:{state:o[0],configs:o[13],path:o[1]}});const s=o[15].delete,l=be(s,o,o[14],en);return{c(){e=v("div"),t=v("div"),$(n.$$.fragment),i=A(),l&&l.c(),_(t,"class","flex w-full flex-col"),_(e,"class","flex w-full items-start justify-between")},m(r,h){b(r,e,h),g(e,t),x(n,t,null),g(e,i),l&&l.m(e,null),a=!0},p(r,h){const d={};h&1&&(d.state=r[0]),h&2&&(d.path=r[1]),n.$set(d),l&&l.p&&(!a||h&16384)&&ye(l,s,r,r[14],a?ve(s,r[14],h,Rs):we(r[14]),en)},i(r){a||(u(n.$$.fragment,r),u(l,r),a=!0)},o(r){m(n.$$.fragment,r),m(l,r),a=!1},d(r){r&&y(e),C(n),l&&l.d(r)}}}function Is(o){let e;return{c(){e=v("i"),e.textContent="No then is set"},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function js(o){let e,t;return{c(){e=v("b"),t=O(o[4])},m(n,i){b(n,e,i),g(e,t)},p(n,i){i&16&&Z(t,n[4])},d(n){n&&y(e)}}}function tn(o){let e,t,n,i=o[7].length+"",a,s,l;return t=new ji({props:{class:"h-6 w-6"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),a=O(i),s=O(" errors"),_(e,"class","alert m-2 flex")},m(r,h){b(r,e,h),x(t,e,null),g(e,n),g(e,a),g(e,s),l=!0},p(r,h){(!l||h&128)&&i!==(i=r[7].length+"")&&Z(a,i)},i(r){l||(u(t.$$.fragment,r),l=!0)},o(r){m(t.$$.fragment,r),l=!1},d(r){r&&y(e),C(t)}}}function Js(o){let e,t,n,i,a,s,l,r,h;t=new co({props:{class:"h-6 w-6"}});const d=[Ss,As],p=[];function c(f,w){return f[2]?0:1}return i=c(o),a=p[i]=d[i](o),{c(){e=v("button"),$(t.$$.fragment),n=A(),a.c(),s=ne()},m(f,w){b(f,e,w),x(t,e,null),b(f,n,w),p[i].m(f,w),b(f,s,w),l=!0,r||(h=K(e,"click",o[16]),r=!0)},p(f,[w]){let I=i;i=c(f),i===I?p[i].p(f,w):(G(),m(p[I],1,1,()=>{p[I]=null}),Y(),a=p[i],a?a.p(f,w):(a=p[i]=d[i](f),a.c()),u(a,1),a.m(s.parentNode,s))},i(f){l||(u(t.$$.fragment,f),u(a),l=!0)},o(f){m(t.$$.fragment,f),m(a),l=!1},d(f){f&&y(e),C(t),f&&y(n),p[i].d(f),f&&y(s),r=!1,h()}}}function Ws(o,e,t){var S;let n,i,a,s,l,{$$slots:r={},$$scope:h}=e,{state:d}=e,{path:p}=e,c=d.messagesFor(p);te(o,c,q=>t(7,l=q));let w=d.getStoreFor([...p,"if"]).map(q=>q?Nn.Tag(q):void 0);te(o,w,q=>t(5,a=q));let I=w.map(q=>{if(!q)return{};const R=q.usedKeys(),N={};for(const J of R)N[J]="value";return N});te(o,I,q=>t(6,s=q));let T=d.getStoreFor([...p,"then"]);te(o,T,q=>t(3,n=q));let F=T.mapD(q=>typeof q=="string"?q:q.en);te(o,F,q=>t(4,i=q));let L=((S=Object.keys(n??{}))==null?void 0:S.length)===0,D=Ke.filter(q=>q.path[0]==="mappings").map(q=>Te.Clone(q)).map(q=>(q.path.splice(0,1),q)).filter(q=>q.path.length==1&&q.hints.group!=="hidden");const j=()=>{t(2,L=!L)};return o.$$set=q=>{"state"in q&&t(0,d=q.state),"path"in q&&t(1,p=q.path),"$$scope"in q&&t(14,h=q.$$scope)},[d,p,L,n,i,a,s,l,c,w,I,T,F,D,h,r,j]}class Ms extends ae{constructor(e){super(),re(this,e,Ws,Js,le,{state:0,path:1})}}function nn(o,e,t){const n=o.slice();return n[28]=e[t],n}function on(o,e,t){const n=o.slice();return n[31]=e[t],n[33]=t,n}const Os=o=>({}),sn=o=>({}),Ds=o=>({}),an=o=>({});function Ns(o){var Je;let e,t,n,i,a=[],s=new Map,l,r,h,d,p,c,f,w,I,T,F,L,D,j,S,q,R,N,J,P;const W=o[16]["upper-right"],k=be(W,o,o[20],sn);let M=o[4]&&rn(o),X=o[6]??[];const B=H=>H[31];for(let H=0;H<X.length;H+=1){let V=on(o,X,H),oe=B(V);s.set(oe,a[H]=ln(oe,V))}let E=o[4]&&hn(o);w=new ke({props:{state:o[0],path:[...o[1],"render"],schema:o[2].render}});let he=((Je=o[14])==null?void 0:Je.length)>0&&Es(o);F=new ke({props:{state:o[0],path:[...o[1],"icon"],schema:o[2].icon}}),D=new ke({props:{state:o[0],path:[...o[1],"condition"],schema:o[2].condition}});let Q=o[3]&&dn(o),se=o[15],ie=[];for(let H=0;H<se.length;H+=1)ie[H]=pn(nn(o,se,H));const Re=H=>m(ie[H],1,1,()=>{ie[H]=null});return R=new qe({props:{clss:"small mt-8",$$slots:{default:[Ps]},$$scope:{ctx:o}}}),R.$on("click",o[19]),{c(){e=v("div"),t=v("div"),k&&k.c(),n=A(),M&&M.c(),i=A();for(let H=0;H<a.length;H+=1)a[H].c();l=A(),r=v("button"),r.textContent="Add a predefined option",h=A(),E&&E.c(),d=A(),p=v("h3"),p.textContent="Text field and input element configuration",c=A(),f=v("div"),$(w.$$.fragment),I=A(),he&&he.c(),T=A(),$(F.$$.fragment),L=A(),$(D.$$.fragment),j=A(),Q&&Q.c(),S=A();for(let H=0;H<ie.length;H+=1)ie[H].c();q=A(),$(R.$$.fragment),_(t,"class","flex justify-end"),_(r,"class","primary"),_(f,"class","border-l border-dashed border-gray-800 pl-2"),_(e,"class","flex w-full flex-col gap-y-1 p-1 pr-12")},m(H,V){b(H,e,V),g(e,t),k&&k.m(t,null),g(e,n),M&&M.m(e,null),g(e,i);for(let oe=0;oe<a.length;oe+=1)a[oe]&&a[oe].m(e,null);g(e,l),g(e,r),g(e,h),E&&E.m(e,null),g(e,d),g(e,p),g(e,c),g(e,f),x(w,f,null),g(f,I),he&&he.m(f,null),g(f,T),x(F,f,null),g(e,L),x(D,e,null),g(e,j),Q&&Q.m(e,null),g(e,S);for(let oe=0;oe<ie.length;oe+=1)ie[oe]&&ie[oe].m(e,null);g(e,q),x(R,e,null),N=!0,J||(P=K(r,"click",o[18]),J=!0)},p(H,V){var Qe;k&&k.p&&(!N||V[0]&1048576)&&ye(k,W,H,H[20],N?ve(W,H[20],V,Os):we(H[20]),sn),H[4]?M?(M.p(H,V),V[0]&16&&u(M,1)):(M=rn(H),M.c(),u(M,1),M.m(e,i)):M&&(G(),m(M,1,1,()=>{M=null}),Y()),V[0]&12355&&(X=H[6]??[],G(),a=Ri(a,V,B,1,H,X,s,e,Ai,ln,l,on),Y()),H[4]?E?(E.p(H,V),V[0]&16&&u(E,1)):(E=hn(H),E.c(),u(E,1),E.m(e,d)):E&&(G(),m(E,1,1,()=>{E=null}),Y());const oe={};V[0]&1&&(oe.state=H[0]),V[0]&2&&(oe.path=[...H[1],"render"]),V[0]&4&&(oe.schema=H[2].render),w.$set(oe),((Qe=H[14])==null?void 0:Qe.length)>0&&he.p(H,V);const We={};V[0]&1&&(We.state=H[0]),V[0]&2&&(We.path=[...H[1],"icon"]),V[0]&4&&(We.schema=H[2].icon),F.$set(We);const _e={};if(V[0]&1&&(_e.state=H[0]),V[0]&2&&(_e.path=[...H[1],"condition"]),V[0]&4&&(_e.schema=H[2].condition),D.$set(_e),H[3]?Q?(Q.p(H,V),V[0]&8&&u(Q,1)):(Q=dn(H),Q.c(),u(Q,1),Q.m(e,S)):Q&&(G(),m(Q,1,1,()=>{Q=null}),Y()),V[0]&32775){se=H[15];let ce;for(ce=0;ce<se.length;ce+=1){const Ge=nn(H,se,ce);ie[ce]?(ie[ce].p(Ge,V),u(ie[ce],1)):(ie[ce]=pn(Ge),ie[ce].c(),u(ie[ce],1),ie[ce].m(e,q))}for(G(),ce=se.length;ce<ie.length;ce+=1)Re(ce);Y()}const Ae={};V[0]&1048576&&(Ae.$$scope={dirty:V,ctx:H}),R.$set(Ae)},i(H){if(!N){u(k,H),u(M);for(let V=0;V<X.length;V+=1)u(a[V]);u(E),u(w.$$.fragment,H),u(he),u(F.$$.fragment,H),u(D.$$.fragment,H),u(Q);for(let V=0;V<se.length;V+=1)u(ie[V]);u(R.$$.fragment,H),N=!0}},o(H){m(k,H),m(M);for(let V=0;V<a.length;V+=1)m(a[V]);m(E),m(w.$$.fragment,H),m(he),m(F.$$.fragment,H),m(D.$$.fragment,H),m(Q),ie=ie.filter(Boolean);for(let V=0;V<ie.length;V+=1)m(ie[V]);m(R.$$.fragment,H),N=!1},d(H){H&&y(e),k&&k.d(H),M&&M.d();for(let V=0;V<a.length;V+=1)a[V].d();E&&E.d(),C(w),he&&he.d(),C(F),C(D),Q&&Q.d(),fe(ie,H),C(R),J=!1,P()}}}function Fs(o){let e,t,n,i;t=new He({props:{config:o[10],selectedElement:void 0,state:o[0],tags:o[11]}});const a=o[16]["upper-right"],s=be(a,o,o[20],an);return{c(){e=v("div"),$(t.$$.fragment),n=A(),s&&s.c(),_(e,"class","low-interaction flex")},m(l,r){b(l,e,r),x(t,e,null),g(e,n),s&&s.m(e,null),i=!0},p(l,r){const h={};r[0]&1&&(h.state=l[0]),t.$set(h),s&&s.p&&(!i||r[0]&1048576)&&ye(s,a,l,l[20],i?ve(a,l[20],r,Ds):we(l[20]),an)},i(l){i||(u(t.$$.fragment,l),u(s,l),i=!0)},o(l){m(t.$$.fragment,l),m(s,l),i=!1},d(l){l&&y(e),C(t),s&&s.d(l)}}}function rn(o){let e,t,n,i;return e=new ke({props:{startInEditModeIfUnset:!0,state:o[0],path:[...o[1],"question"],schema:o[2].question}}),n=new ke({props:{state:o[0],path:[...o[1],"questionHint"],schema:o[2].questionHint}}),{c(){$(e.$$.fragment),t=A(),$(n.$$.fragment)},m(a,s){x(e,a,s),b(a,t,s),x(n,a,s),i=!0},p(a,s){const l={};s[0]&1&&(l.state=a[0]),s[0]&2&&(l.path=[...a[1],"question"]),s[0]&4&&(l.schema=a[2].question),e.$set(l);const r={};s[0]&1&&(r.state=a[0]),s[0]&2&&(r.path=[...a[1],"questionHint"]),s[0]&4&&(r.schema=a[2].questionHint),n.$set(r)},i(a){i||(u(e.$$.fragment,a),u(n.$$.fragment,a),i=!0)},o(a){m(e.$$.fragment,a),m(n.$$.fragment,a),i=!1},d(a){C(e,a),a&&y(t),C(n,a)}}}function Ls(o){let e,t,n,i,a;t=new go({props:{class:"h-4 w-4"}});function s(){return o[17](o[33])}return{c(){e=v("button"),$(t.$$.fragment),_(e,"slot","delete"),_(e,"class","no-image-background rounded-full")},m(l,r){b(l,e,r),x(t,e,null),n=!0,i||(a=K(e,"click",s),i=!0)},p(l,r){o=l},i(l){n||(u(t.$$.fragment,l),n=!0)},o(l){m(t.$$.fragment,l),n=!1},d(l){l&&y(e),C(t),i=!1,a()}}}function ln(o,e){let t,n,i;return n=new Ms({props:{state:e[0],path:[...e[1],"mappings",e[33]],$$slots:{delete:[Ls]},$$scope:{ctx:e}}}),{key:o,first:null,c(){t=v("div"),$(n.$$.fragment),_(t,"class","interactive flex w-full"),this.first=t},m(a,s){b(a,t,s),x(n,t,null),i=!0},p(a,s){e=a;const l={};s[0]&1&&(l.state=e[0]),s[0]&66&&(l.path=[...e[1],"mappings",e[33]]),s[0]&1048640&&(l.$$scope={dirty:s,ctx:e}),n.$set(l)},i(a){i||(u(n.$$.fragment,a),i=!0)},o(a){m(n.$$.fragment,a),i=!1},d(a){a&&y(t),C(n)}}}function hn(o){let e,t;return e=new ke({props:{state:o[0],path:[...o[1],"multiAnswer"],schema:o[2].multiAnswer}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&1&&(a.state=n[0]),i[0]&2&&(a.path=[...n[1],"multiAnswer"]),i[0]&4&&(a.schema=n[2].multiAnswer),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Es(o){let e,t;return e=new me({props:{state:o[0],path:o[1],configs:o[14]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&1&&(a.state=n[0]),i[0]&2&&(a.path=n[1]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function dn(o){let e,t;return e=new ke({props:{state:o[0],path:[...o[1],"metacondition"],schema:o[2].metacondition}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&1&&(a.state=n[0]),i[0]&2&&(a.path=[...n[1],"metacondition"]),i[0]&4&&(a.schema=n[2].metacondition),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function pn(o){let e,t;return e=new ke({props:{state:o[0],path:[...o[1],o[28]],schema:o[2][o[28]]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&1&&(a.state=n[0]),i[0]&2&&(a.path=[...n[1],n[28]]),i[0]&4&&(a.schema=n[2][n[28]]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Ps(o){let e,t,n;return e=new so({props:{class:"h-6 w-6"}}),{c(){$(e.$$.fragment),t=O(`
      Show the introduction again`)},m(i,a){x(e,i,a),b(i,t,a),n=!0},p:z,i(i){n||(u(e.$$.fragment,i),n=!0)},o(i){m(e.$$.fragment,i),n=!1},d(i){C(e,i),i&&y(t)}}}function Hs(o){let e,t,n,i;const a=[Fs,Ns],s=[];function l(r,h){return typeof r[5]=="string"?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=ne()},m(r,h){s[e].m(r,h),b(r,n,h),i=!0},p(r,h){let d=e;e=l(r),e===d?s[e].p(r,h):(G(),m(s[d],1,1,()=>{s[d]=null}),Y(),t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),u(t,1),t.m(n.parentNode,n))},i(r){i||(u(t),i=!0)},o(r){m(t),i=!1},d(r){s[e].d(r),r&&y(n)}}}function Bs(o,e,t){let n,i,a,s,{$$slots:l={},$$scope:r}=e,{state:h}=e,{path:d}=e,p=h.expertMode;te(o,p,B=>t(3,n=B));const c=h.getStoreFor(d);te(o,c,B=>t(5,a=B));let f=c.data,w=ue.asBoolean(Pn.Get("studio-seen-tagrendering-tutorial","false"));lt(()=>{w.data||(h.showIntro.setData("tagrenderings"),w.setData(!0))});let I=h.configuration.mapD(B=>{var E;return d.at(0)==="tagRenderings"&&((E=B.source)==null?void 0:E.geoJson)===void 0});te(o,I,B=>t(4,i=B));let T=[],F={};for(const B of En){let E=B.description??B.question??"No description available";if(E=E.en??E,B.labels){const he=B.labels;for(const Q of he){let se=F[Q];se||(se={if:"value="+Q,then:{en:"Builtin collection <b>"+Q+"</b>:"}},F[Q]=se,T.push(se)),se.then.en=se.then.en+"<div>"+E+"</div>"}}T.push({if:"value="+B.id,then:{en:"Builtin <b>"+B.id+"</b> <div class='subtle'>"+E+"</div>"}})}const L=new Be({question:"Which builtin element should be shown?",mappings:T}),D=new ue({value:f});D.addCallbackAndRunD(B=>{c.setData(B.value)});let j=h.getStoreFor([...d,"mappings"]);te(o,j,B=>t(6,s=B));const S={};for(const B of Ke)B.path.length===1&&(S[B.path[0]]=B);function q(){j.data===void 0&&j.setData([])}const R=new Set(["question","questionHint","multiAnswer","freeform","render","condition","metacondition","mappings","icon"]),N=new Set(["labels","description","classes"]),J=Ke.filter(B=>B.path.length==2&&B.path[0]==="freeform"&&i);let P=n?J:J.filter(B=>{var E;return((E=B.hints)==null?void 0:E.group)!=="expert"});const W=Ke.filter(B=>B.path.length>=1&&!R.has(B.path[0])&&!N.has(B.path[0])).map(B=>B.path.join("."));console.log({state:h});const k=B=>{q(),j.data.splice(B,1),j.ping()},M=()=>{q(),j.data.push({if:void 0,then:{}}),j.ping()},X=()=>h.showIntro.setData("tagrenderings");return o.$$set=B=>{"state"in B&&t(0,h=B.state),"path"in B&&t(1,d=B.path),"$$scope"in B&&t(20,r=B.$$scope)},[h,d,S,n,i,a,s,p,c,I,L,D,j,q,P,W,l,k,M,X,r]}class Us extends ae{constructor(e){super(),re(this,e,Bs,Hs,le,{state:0,path:1},null,[-1,-1])}}function cn(o,e,t){const n=o.slice();return n[1]=e[t],n}function fn(o){let e;return{c(){e=v("div"),e.textContent="No errors, warnings or messages",_(e,"class","thanks")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function un(o){let e,t=o[1].level+"",n,i,a,s=o[1].context.path.join(".")+"",l,r,h=o[1].message+"",d,p,c,f=o[1].context.operation.join(".")+"",w,I;return{c(){e=v("li"),n=O(t),i=A(),a=v("span"),l=O(s),r=A(),d=O(h),p=A(),c=v("span"),w=O(f),I=A(),_(a,"class","literal-code"),_(c,"class","literal-code")},m(T,F){b(T,e,F),g(e,n),g(e,i),g(e,a),g(a,l),g(e,r),g(e,d),g(e,p),g(e,c),g(c,w),g(e,I)},p(T,F){F&1&&t!==(t=T[1].level+"")&&Z(n,t),F&1&&s!==(s=T[1].context.path.join(".")+"")&&Z(l,s),F&1&&h!==(h=T[1].message+"")&&Z(d,h),F&1&&f!==(f=T[1].context.operation.join(".")+"")&&Z(w,f)},d(T){T&&y(e)}}}function zs(o){let e,t,n=o[0].length===0&&fn(),i=o[0],a=[];for(let s=0;s<i.length;s+=1)a[s]=un(cn(o,i,s));return{c(){n&&n.c(),e=A();for(let s=0;s<a.length;s+=1)a[s].c();t=ne()},m(s,l){n&&n.m(s,l),b(s,e,l);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(s,l);b(s,t,l)},p(s,[l]){if(s[0].length===0?n||(n=fn(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l&1){i=s[0];let r;for(r=0;r<i.length;r+=1){const h=cn(s,i,r);a[r]?a[r].p(h,l):(a[r]=un(h),a[r].c(),a[r].m(t.parentNode,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:z,o:z,d(s){n&&n.d(s),s&&y(e),fe(a,s),s&&y(t)}}}function Vs(o,e,t){let{messages:n}=e;return o.$$set=i=>{"messages"in i&&t(0,n=i.messages)},[n]}class Zn extends ae{constructor(e){super(),re(this,e,Vs,zs,le,{messages:0})}}function Qs(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function gn(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),t.push.apply(t,n)}return t}function mn(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gn(Object(t),!0).forEach(function(n){Qs(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):gn(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function Gs(o,e){if(o==null)return{};var t={},n=Object.keys(o),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=o[i]);return t}function Ys(o,e){if(o==null)return{};var t=Gs(o,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}function Ks(o,e){return Zs(o)||Xs(o,e)||ea(o,e)||ta()}function Zs(o){if(Array.isArray(o))return o}function Xs(o,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(o)))){var t=[],n=!0,i=!1,a=void 0;try{for(var s=o[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(t.push(l.value),!(e&&t.length===e));n=!0);}catch(r){i=!0,a=r}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return t}}function ea(o,e){if(o){if(typeof o=="string")return bn(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bn(o,e)}}function bn(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}function ta(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function na(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function yn(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),t.push.apply(t,n)}return t}function wn(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yn(Object(t),!0).forEach(function(n){na(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):yn(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function ia(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];return function(n){return e.reduceRight(function(i,a){return a(i)},n)}}function Fe(o){return function e(){for(var t=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.length>=o.length?o.apply(this,i):function(){for(var s=arguments.length,l=new Array(s),r=0;r<s;r++)l[r]=arguments[r];return e.apply(t,[].concat(i,l))}}}function tt(o){return{}.toString.call(o).includes("Object")}function oa(o){return!Object.keys(o).length}function Le(o){return typeof o=="function"}function sa(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function aa(o,e){return tt(e)||Se("changeType"),Object.keys(e).some(function(t){return!sa(o,t)})&&Se("changeField"),e}function ra(o){Le(o)||Se("selectorType")}function la(o){Le(o)||tt(o)||Se("handlerType"),tt(o)&&Object.values(o).some(function(e){return!Le(e)})&&Se("handlersType")}function ha(o){o||Se("initialIsRequired"),tt(o)||Se("initialType"),oa(o)&&Se("initialContent")}function da(o,e){throw new Error(o[e]||o.default)}var pa={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Se=Fe(da)(pa),Ye={changes:aa,selector:ra,handler:la,initial:ha};function ca(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ye.initial(o),Ye.handler(e);var t={current:o},n=Fe(ga)(t,e),i=Fe(ua)(t),a=Fe(Ye.changes)(o),s=Fe(fa)(t);function l(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return Ye.selector(h),h(t.current)}function r(h){ia(n,i,a,s)(h)}return[l,r]}function fa(o,e){return Le(e)?e(o.current):e}function ua(o,e){return o.current=wn(wn({},o.current),e),e}function ga(o,e,t){return Le(e)?e(o.current):Object.keys(t).forEach(function(n){var i;return(i=e[n])===null||i===void 0?void 0:i.call(e,o.current[n])}),t}var ma={create:ca},ba={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function ya(o){return function e(){for(var t=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.length>=o.length?o.apply(this,i):function(){for(var s=arguments.length,l=new Array(s),r=0;r<s;r++)l[r]=arguments[r];return e.apply(t,[].concat(i,l))}}}function wa(o){return{}.toString.call(o).includes("Object")}function va(o){return o||vn("configIsRequired"),wa(o)||vn("configType"),o.urls?(_a(),{paths:{vs:o.urls.monacoBase}}):o}function _a(){console.warn(Xn.deprecation)}function Ta(o,e){throw new Error(o[e]||o.default)}var Xn={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},vn=ya(Ta)(Xn),qa={config:va},ka=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduceRight(function(a,s){return s(a)},i)}};function ei(o,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&o[t]&&Object.assign(e[t],ei(o[t],e[t]))}),mn(mn({},o),e)}var $a={type:"cancelation",msg:"operation is manually canceled"};function at(o){var e=!1,t=new Promise(function(n,i){o.then(function(a){return e?i($a):n(a)}),o.catch(i)});return t.cancel=function(){return e=!0},t}var xa=ma.create({config:ba,isInitialized:!1,resolve:null,reject:null,monaco:null}),ti=Ks(xa,2),Ve=ti[0],st=ti[1];function Ca(o){var e=qa.config(o),t=e.monaco,n=Ys(e,["monaco"]);st(function(i){return{config:ei(i.config,n),monaco:t}})}function Ra(){var o=Ve(function(e){var t=e.monaco,n=e.isInitialized,i=e.resolve;return{monaco:t,isInitialized:n,resolve:i}});if(!o.isInitialized){if(st({isInitialized:!0}),o.monaco)return o.resolve(o.monaco),at(rt);if(window.monaco&&window.monaco.editor)return ni(window.monaco),o.resolve(window.monaco),at(rt);ka(Aa,Ia)(ja)}return at(rt)}function Aa(o){return document.body.appendChild(o)}function Sa(o){var e=document.createElement("script");return o&&(e.src=o),e}function Ia(o){var e=Ve(function(n){var i=n.config,a=n.reject;return{config:i,reject:a}}),t=Sa("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return o()},t.onerror=e.reject,t}function ja(){var o=Ve(function(t){var n=t.config,i=t.resolve,a=t.reject;return{config:n,resolve:i,reject:a}}),e=window.require;e.config(o.config),e(["vs/editor/editor.main"],function(t){ni(t),o.resolve(t)},function(t){o.reject(t)})}function ni(o){Ve().monaco||st({monaco:o})}function Ja(){return Ve(function(o){var e=o.monaco;return e})}var rt=new Promise(function(o,e){return st({resolve:o,reject:e})}),_n={config:Ca,init:Ra,__getMonacoInstance:Ja};const Wa="Configuration for a single layer",Ma="object",Oa={id:{description:`question: What is the identifier of this layer?

This should be a simple, lowercase, human readable string that is used to identify the layer.
 A good ID is:
 - a noun
 - written in singular
 - describes the object
 - in english
 - only has lowercase letters, numbers or underscores. Do not use a space or a dash

type: id
group: Basic`,type:"string"},name:{description:`Used in the layer control panel to toggle a layer on and of.

ifunset: This will hide the layer in the layer control, making it not filterable and not toggleable

group: Basic
question: What is the name of this layer?`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},description:{description:`A description for the features shown in this layer.
This often resembles the introduction of the wiki.osm.org-page for this feature.

group: Basic
question: How would you describe the features that are shown on this layer?`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},source:{description:`Question: Where should the data be fetched from?
title: Data Source

This determines where the data for the layer is fetched: from OSM or from an external geojson dataset.

If no 'geojson' is defined, data will be fetched from overpass and the OSM-API.

Every source _must_ define which tags _must_ be present in order to be picked up.

Note: a source must always be defined. 'special' is only allowed if this is a builtin-layer

types: Load data with specific tags from OpenStreetMap ; Load data from an external geojson source ;
typesdefault: 0
group: Basic`,anyOf:[{type:"object",properties:{osmTags:{$ref:"#/definitions/TagConfigJson",description:`question: Which tags must be present on the feature to show it in this layer?
Every source must set which tags have to be present in order to load the given layer.`}},required:["osmTags"]},{type:"object",properties:{geoJson:{description:`The actual source of the data to load, if loaded via geojson.

# A single geojson-file
source: {geoJson: "https://my.source.net/some-geo-data.geojson"}
 fetches a geojson from a third party source

# A tiled geojson source
source: {geoJson: "https://my.source.net/some-tile-geojson-{layer}-{z}-{x}-{y}.geojson", geoJsonZoomLevel: 14}
 to use a tiled geojson source. The web server must offer multiple geojsons. {z}, {x} and {y} are substituted by the location; {layer} is substituted with the id of the loaded layer

Some API's use a BBOX instead of a tile, this can be used by specifying {y_min}, {y_max}, {x_min} and {x_max}

question: What is the URL of the geojson?
type: url`,type:"string"},geoJsonZoomLevel:{description:`To load a tiled geojson layer, set the zoomlevel of the tiles

question: If using a tiled geojson, what is the zoomlevel of the tiles?
ifunset: This is not a tiled geojson`,type:"number"},mercatorCrs:{description:`Some API's use a mercator-projection (EPSG:900913) instead of WGS84. Set the flag \`mercatorCrs: true\`  in the source for this

question: Does this geojson use  EPSG:900913 instead of WGS84 as projection?
iftrue: This geojson uses EPSG:900913 instead of WGS84
ifunset: This geojson uses WGS84 just like most geojson (default)`,type:"boolean"},idKey:{description:`Some API's have an id-field, but give it a different name.
Setting this key will rename this field into 'id'

ifunset: An id with key \`id\` will be assigned automatically if no attribute \`id\` is set
inline: This geojson uses <b>{value}</b> as attribute to set the id
question: What is the name of the attribute containing the ID of the object?`,type:"string"}},required:["geoJson"]},{enum:["special","special:library"],type:"string"}]},calculatedTags:{description:`A list of extra tags to calculate, specified as "keyToAssignTo=javascript-expression".
There are a few extra functions available. Refer to <a>Docs/CalculatedTags.md</a> for more information
The functions will be run in order, e.g.
[
 "_max_overlap_m2=Math.max(...feat.overlapsWith("someOtherLayer").map(o => o.overlap))
 "_max_overlap_ratio=Number(feat._max_overlap_m2)/feat.area
]

The specified tags are evaluated lazily. E.g. if a calculated tag is only used in the popup (e.g. the number of nearby features),
the expensive calculation will only be performed then for that feature. This avoids clogging up the contributors PC when all features are loaded.

If a tag has to be evaluated strictly, use ':=' instead:

[
"_some_key:=some_javascript_expression"
]

See the full documentation on [https://github.com/pietervdvn/MapComplete/blob/master/Docs/CalculatedTags.md]

group: expert
question: What extra attributes should be calculated with javascript?`,type:"array",items:{type:"string"}},isShown:{description:`If set, only features matching this extra tag will be shown.
This is useful to hide certain features from view based on a calculated tag or if the features are provided by a different layer.

question: What other tags should features match for being shown?
group: advanced
ifunset: all features which match the 'source'-specification are shown.`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},isCounted:{description:`question: should this layer be included in the summary counts?

The layer server can give summary counts for a tile.
This should however be disabled for some layers, e.g. because there are too many features (walls_and_buildings) or because the count is irrelevant.

ifunset: Do count
iffalse: Do not include the counts
iftrue: Do include the count`,type:"boolean"},minzoom:{description:`The minimum needed zoomlevel required to start loading and displaying the data.
This can be used to only show common features (e.g. a bicycle parking) only when the map is zoomed in very much (17).
This prevents cluttering the map with thousands of parkings if one is looking to an entire city.

Default: 0
group: Basic
type: nat
question: At what zoom level should features of the layer be shown?
ifunset: Always load this layer, even if the entire world is in view.`,type:"number"},shownByDefault:{description:`Indicates if this layer is shown by default;
can be used to hide a layer from start, or to load the layer but only to show it when appropriate (e.g. for advanced users)

question: Should this layer be enabled when opening the map for the first time?
iftrue: the layer is enabled when opening the map
iffalse: the layer is hidden until the contributor enables it. (If the filter-popup is disabled, this might never get enabled nor loaded)
default: true
group: advanced`,type:"boolean"},minzoomVisible:{description:`The zoom level at which point the data is hidden again
Default: 100 (thus: always visible

group: expert`,type:"number"},title:{description:`question: Edit the popup title
The title shown in a popup for elements of this layer.

group: title
types: use a fixed translation ; Use a dynamic tagRendering ; hidden
typesdefault: 1
type: translation
inline: {translated{value}}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},popupInFloatover:{description:`Question: Should the information for this layer be shown in the sidebar or in a splash screen?

If set, open the selectedElementView in a floatOver instead of on the right.

iftrue: show the infobox in the splashscreen floating over the entire UI; hide the title bar
iffalse: show the infobox in a sidebar on the right
suggestions: return [{if: "value=title", then: "Show in a floatover and show the title bar"}]
group: advanced
default: sidebar`,type:["string","boolean"]},titleIcons:{description:`Small icons shown next to the title.
If not specified, the OsmLink and wikipedia links will be used by default.
Use an empty array to hide them.
Note that "defaults" will insert all the default titleIcons (which are added automatically)

Use \`auto:<tagrenderingId>\` to automatically create an icon based on a tagRendering which has icons

Type: icon[]
group: infobox`,anyOf:[{type:"array",items:{anyOf:[{allOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"}}}]},{type:"string"}]}},{type:"array",items:[{type:"string",enum:["defaults"]}],minItems:1,maxItems:1}]},pointRendering:{description:`Creates points to render on the map.
This can render points for point-objects, lineobjects or areaobjects; use 'location' to indicate where it should be rendered

group: pointrendering`,type:"array",items:{$ref:"#/definitions/default_4"}},lineRendering:{description:`Creates lines and areas to render on the map
group: linerendering`,type:"array",items:{$ref:"#/definitions/default_5"}},passAllFeatures:{description:`If set, this layer will pass all the features it receives onto the next layer.
This is ideal for decoration, e.g. directions on cameras
iftrue: Make the features from this layer also available to the other layer; might result in this object being rendered by multiple layers
iffalse: normal behaviour: don't pass features allong
question: should this layer pass features to the next layers?
group: expert`,type:"boolean"},doNotDownload:{description:`If set, this layer will not query overpass; but it'll still match the tags above which are by chance returned by other layers.
Works well together with 'passAllFeatures', to add decoration
The opposite of \`forceLoad\`

iftrue: Do not attempt to query the data for this layer from overpass/the OSM API
iffalse: download the data as usual
group: expert
question: Should this layer be downloaded or is the data provided by a different layer (which has 'passAllFeatures'-set)?
default: false`,type:"boolean"},forceLoad:{description:`Advanced option - might be set by the theme compiler

If true, this data will _always_ be loaded, even if the theme is disabled by a filter or hidden.
The opposite of \`doNotDownload\`

question: Should this layer be forcibly loaded?
ifftrue: always download this layer, even if it is disabled
iffalse: only download data for this layer when needed (default)
default: false
group: expert`,type:"boolean"},presets:{description:`<div class='flex'>
    <div>
Presets for this layer.

A preset consists of one or more attributes (tags), a title and optionally a description and optionally example images.

When the contributor wishes to add a point to OpenStreetMap, they'll:

1. Press the 'add new point'-button
2. Choose a preset from the list of all presets
3. Confirm the choice. In this step, the \`description\` (if set) and \`exampleImages\` (if given) will be shown
4. Confirm the location
5. A new point will be created with the attributes that were defined in the preset

If no presets are defined, the button which invites to add a new preset will not be shown.
</div>
<video controls autoplay muted src='./Docs/Screenshots/AddNewItemScreencast.webm' class='w-64'/>
</div>

group: presets`,type:"array",items:{type:"object",properties:{title:{description:`The title - shown on the 'add-new'-button.

This should include the article of the noun, e.g. 'a hydrant', 'a bicycle pump'.
This text will be inserted into \`Add {category} here\`, becoming \`Add a hydrant here\`.

Do _not_ indicate 'new': 'add a new shop here' is incorrect, as the shop might have existed forever, it could just be unmapped!

question: What is the word to describe this object?
inline: Add {translated(value)::font-bold} here`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},tags:{description:`A single tag (encoded as <code>key=value</code>) out of all the tags to add onto the newly created point.
Note that the icon in the UI will be chosen automatically based on the tags provided here.

question: What tag should be added to the new object?
type: simple_tag
typeHelper: uploadableOnly`,type:"array",items:{type:"string"}},description:{description:`An extra explanation of what the feature is, if it is not immediately clear from the title alone.

The _first sentence_ of the description is shown on the button of the \`add\` menu.
The full description is shown in the confirmation dialog.

(The first sentence is until the first '.'-character in the description)

question: How would you describe this feature?
ifunset: No extra description is given. This can be used to further explain the preset`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},exampleImages:{description:`The URL of an example image which shows a real-life example of what such a feature might look like.

Type: image
question: What is the URL of an image showing such a feature?`,type:"array",items:{type:"string"}},snapToLayer:{description:`question: Should the created point be snapped to a line layer?

If specified, these layers will be shown in the precise location picker  and the new point will be snapped towards it.
For example, this can be used to snap against \`walls_and_buildings\` (e.g. to attach a defibrillator, an entrance, an artwork, ... to the wall)
or to snap an obstacle (such as a bollard) to the \`cycleways_and_roads\`.

suggestions: return Array.from(layers.keys()).map(key => ({if: "value="+key, then: key+" - "+layers.get(key).description}))`,type:"array",items:{type:"string"}},maxSnapDistance:{description:`question: What is the maximum distance in the location-input that a point can be moved to be snapped to a way?

inline: a point is snapped if the location input is at most <b>{value}m</b> away from an object

If specified, a new point will only be snapped if it is within this range.
If further away, it'll be placed in the center of the location input
Distance in meter

ifunset: Do not snap to a layer`,type:"number"}},required:["tags","title"]}},tagRenderings:{description:`question: Edit this way this attributed is displayed or queried

A tag rendering is a block that either shows the known value or asks a question.

Refer to the class \`TagRenderingConfigJson\` to see the possibilities.

Note that we can also use a string here - where the string refers to a tag rendering defined in \`assets/questions/questions.json\`,
where a few very general questions are defined e.g. website, phone number, ...
Furthermore, _all_ the questions of another layer can be reused with \`otherlayer.*\`
If you need only a single of the tagRenderings, use \`otherlayer.tagrenderingId\`
If one or more questions have a 'group' or 'label' set, select all the entries with the corresponding group or label with \`otherlayer.*group\`
Remark: if a tagRendering is 'lent' from another layer, the 'source'-tags are copied and added as condition.
If they are not wanted, remove them with an override

A special value is 'questions', which indicates the location of the questions box. If not specified, it'll be appended to the bottom of the featureInfobox.

At last, one can define a group of renderings where parts of all strings will be replaced by multiple other strings.
This is mainly create questions for a 'left' and a 'right' side of the road.
These will be grouped and questions will be asked together

type: tagrendering[]
group: tagrenderings`,type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"},builtin:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{allOf:[{$ref:"#/definitions/default<(string|QuestionableTagRenderingConfigJson|{builtin:string;override:Partial<QuestionableTagRenderingConfigJson>;})[]>"},{type:"object",properties:{id:{type:"string"}},required:["id"]}]},{type:"string"}]}},filter:{description:`All the extra questions for filtering.
If a string is given, mapComplete will search in
1. The tagrenderings for a match on ID and use the mappings as options
2. search 'filters.json' for the appropriate filter or
3. will try to parse it as \`layername.filterid\` and us that one.


group: filters`,anyOf:[{type:"array",items:{anyOf:[{$ref:"#/definitions/default_1"},{type:"string"}]}},{type:"object",properties:{sameAs:{type:"string"}},required:["sameAs"]}]},deletion:{description:`This block defines under what circumstances the delete dialog is shown for objects of this layer.
If set, a dialog is shown to the user to (soft) delete the point.
The dialog is built to be user friendly and to prevent mistakes.
If deletion is not possible, the dialog will hide itself and show the reason of non-deletability instead.

To configure, the following values are possible:

- false: never ever show the delete button
- true: show the default delete button
- undefined: use the mapcomplete default to show deletion or not. Currently, this is the same as 'false' but this will change in the future
- or: a hash with options (see below)

### The delete dialog



#### Hard deletion if enough experience

A feature can only be deleted from OpenStreetMap by mapcomplete if:

- It is a node
- No ways or relations use the node
- The logged-in user has enough experience OR the user is the only one to have edited the point previously
- The logged-in user has no unread messages (or has a ton of experience)
- The user did not select one of the 'non-delete-options' (see below)

In all other cases, a 'soft deletion' is used.

#### Soft deletion

A 'soft deletion' is when the point isn't deleted fromOSM but retagged so that it'll won't how up in the mapcomplete theme anymore.
This makes it look like it was deleted, without doing damage. A fixme will be added to the point.

Note that a soft deletion is _only_ possible if these tags are provided by the theme creator, as they'll be different for every theme

##### No-delete options

In some cases, the contributor might want to delete something for the wrong reason (e.g. someone who wants to have a path removed "because the path is on their private property").
However, the path exists in reality and should thus be on OSM - otherwise the next contributor will pass by and notice "hey, there is a path missing here! Let me redraw it in OSM!)

The correct approach is to retag the feature in such a way that it is semantically correct *and* that it doesn't show up on the theme anymore.
A no-delete option is offered as 'reason to delete it', but secretly retags.

group: editing
types: Use an advanced delete configuration ; boolean
iftrue: Allow deletion
iffalse: Do not allow deletion
ifunset: Do not allow deletion`,anyOf:[{$ref:"#/definitions/DeleteConfigJson"},{type:"boolean"}]},allowMove:{description:`Indicates if a point can be moved and why.

A feature can be moved by MapComplete if:

- It is a point
- The point is _not_ part of a way or a a relation.

types: use an advanced move configuration ; boolean
group: editing
question: Is deleting a point allowed?
iftrue: Allow contributors to move a point (for accuracy or a relocation)
iffalse: Don't allow contributors to move points
ifunset: Don't allow contributors to move points (default)`,anyOf:[{$ref:"#/definitions/default_3"},{type:"boolean"}]},allowSplit:{description:`If set, a 'split this way' button is shown on objects rendered as LineStrings, e.g. highways.

If the way is part of a relation, MapComplete will attempt to update this relation as well
question: Should the contributor be able to split ways using this layer?
iftrue: enable the 'split-roads'-component
iffalse: don't enable the split-roads component
ifunset: don't enable the split-roads component
group: editing`,type:"boolean"},units:{description:'Either a list with [{"key": "unitname", "key2": {"quantity": "unitname", "denominations": ["denom", "denom"]}}]\n\nUse `"inverted": true` if the amount should be _divided_ by the denomination, e.g. for charge over time (`5/day`)',type:"array",items:{anyOf:[{$ref:"#/definitions/default_2"},{$ref:"#/definitions/Record<string,string|{quantity:string;denominations:string[];canonical?:string|undefined;inverted?:boolean|undefined;}>"}]}},syncSelection:{description:`If set, synchronizes whether or not this layer is enabled.

group: advanced
question: Should enabling/disabling the layer be saved (locally or in the cloud)?
suggestions: return [{if: "value=no", then: "Don't save, always revert to the default"}, {if: "value=local", then: "Save selection in local storage"}, {if: "value=theme-only", then: "Save the state in the OSM-usersettings, but apply on this theme only (default)"}, {if: "value=global", then: "Save in OSM-usersettings and toggle on _all_ themes using this layer"}]`,enum:["global","local","no","theme-only"],type:"string"},"#":{description:`Used for comments and/or to disable some checks

no-question-hint-check: disables a check in MiscTagRenderingChecks which complains about 'div', 'span' or 'class=subtle'-HTML elements in the tagRendering

group: hidden`,type:"string"},fullNodeDatabase:{description:`_Set automatically by MapComplete, please ignore_

group: hidden`,type:"boolean"}},Da=["id","pointRendering","source"],Na={TagConfigJson:{description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}]},"{and:TagConfigJson[];}":{type:"object",properties:{and:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["and"],additionalProperties:!1},"{or:TagConfigJson[];}":{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"],additionalProperties:!1},"Record<string,string>":{type:"object",additionalProperties:!1},"Record<string,string|Record<string,string>>":{type:"object",additionalProperties:!1},DenominationConfigJson:{type:"object",properties:{useIfNoUnitGiven:{description:`If this evaluates to true and the value to interpret has _no_ unit given, assumes that this unit is meant.
Alternatively, a list of country codes can be given where this acts as the default interpretation

E.g., a denomination using "meter" would probably set this flag to "true";
a denomination for "mp/h" will use the condition "_country=gb" to indicate that it is the default in the UK.

If none of the units indicate that they are the default, the first denomination will be used instead`,anyOf:[{type:"array",items:{type:"string"}},{type:"boolean"}]},canonicalDenomination:{description:`The canonical value for this denomination which will be added to the value in OSM.
e.g. "m" for meters
If the user inputs '42', the canonical value will be added and it'll become '42m'.

Important: often, _no_ canonical values are expected, e.g. in the case of 'maxspeed' where 'km/h' is the default.
In this case, an empty string should be used`,type:"string"},canonicalDenominationSingular:{description:"The canonical denomination in the case that the unit is precisely '1'.\nUsed for display purposes only.\n\nE.g.: for duration of something in minutes: `2 minutes` but `1 minute`; the `minute` goes here",type:"string"},alternativeDenomination:{description:"A list of alternative values which can occur in the OSM database - used for parsing.\nE.g.: while 'm' is canonical, `meter`, `mtrs`, ... can occur as well",type:"array",items:{type:"string"}},human:{description:`The value for humans in the dropdown. This should not use abbreviations and should be translated, e.g.
{
    "en": "meter",
    "fr": "metre"
}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},humanSingular:{description:`The value for humans in the dropdown. This should not use abbreviations and should be translated, e.g.
{
    "en": "minute",
    "nl": "minuut"
}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},prefix:{description:`If set, then the canonical value will be prefixed instead, e.g. for ''
Note that if all values use 'prefix', the dropdown might move to before the text field`,type:"boolean"},addSpace:{description:"If set, add a space between the quantity and the denomination.\n\nE.g.: `50 mph` instad of `50mph`",type:"boolean"}},required:["canonicalDenomination"],additionalProperties:!1},MinimalTagRenderingConfigJson:{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},IconConfigJson:{type:"object",properties:{icon:{description:`question: What icon should be used?
type: icon
suggestions: return Constants.defaultPinIcons.map(i => ({if: "value="+i, then: i, icon: i}))`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{}},required:["builtin","override"]},{type:"string"}]},color:{description:"question: What colour should the icon be?\nThis will only work for the default icons such as `pin`,`circle`,...\ntype: color",anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{}},required:["builtin","override"]},{type:"string"}]}},required:["icon"],additionalProperties:!1},TagRenderingConfigJson:{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},"Record<string,string[]>":{type:"object",additionalProperties:!1},MappingConfigJson:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: What tags should be matched to show this option?

If in 'question'-mode and the contributor selects this option, these tags will be applied to the object`},then:{description:"Question: What corresponding text should be shown?\nShown if the `if` is fulfilled\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be shown next to this mapping?

This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)

ifunset: Show no icon
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}]},hideInAnswer:{description:`question: Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?
iftrue: Never show this mapping as option to pick
ifunset: Always show this mapping as option to pick
type: tag

In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).

In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.

To demonstrate an example making a default assumption:

mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]


For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}

Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch

e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:

{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},

    ]
}

Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}]},alsoShowIf:{description:`question: In what other cases should this item be rendered?

Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!

ifunset: No other cases when this text is shown`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},ifnot:{description:`question: What tags should be applied if this mapping is _not_ chosen?

Only applicable if 'multiAnswer' is set.
This is for situations such as:
\`accepts:coins=no\` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.
This can be done with \`ifnot\`
Note that we can not explicitly render this negative case to the user, we cannot show \`does _not_ accept coins\`.
If this is important to your usecase, consider using multiple radiobutton-fields without \`multiAnswer\`

ifunset: Do not apply a tag if a different mapping is chosen.`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},addExtraTags:{description:`question: What extra tags should be added to the object if this object is chosen?
type: simple_tag

If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.

This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``,type:"array",items:{type:"string"}},searchTerms:{description:`question: If there are many options, what search terms match too?
If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction

Searchterms (per language) allow to easily find an option if there are many options
group: hidden`,$ref:"#/definitions/Record<string,string[]>"},priorityIf:{description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly
group: hidden`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},"#":{description:"Used for comments or to disable a validation\n\ngroup: hidden\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed",type:"string"}},required:["if","then"],additionalProperties:!1},T:{type:"object",additionalProperties:!1},default_4:{description:`The PointRenderingConfig gives all details onto how to render a single point of a feature.

This can be used if:

- The feature is a point
- To render something at the centroid of an area, or at the start, end or projected centroid of a way`,type:"object",properties:{location:{description:`question: At what location should this icon be shown?
multianswer: true
suggestions: return [{if: "value=point",then: "Show an icon for point (node) objects"},{if: "value=centroid",then: "Show an icon for line or polygon (way) objects at their centroid location"}, {if: "value=start",then: "Show an icon for line (way) objects at the start"},{if: "value=end",then: "Show an icon for line (way) object at the end"},{if: "value=projected_centerpoint",then: "Show an icon for line (way) object near the centroid location, but moved onto the line. Does not show an item on polygons"}, {if: "value=polygon_centroid",then: "Show an icon at a polygon centroid (but not if it is a way)"}]`,type:"array",items:{type:"string"}},marker:{description:`The marker for an element.
Note that this also defines the icon for this layer (rendered with the overpass-tags) <i>and</i> the icon in the presets.

The result of the icon is rendered as follows:
- The first icon is rendered on the map
- The second entry is overlayed on top of it
- ...

As a result, on could use a generic icon (\`pin\`, \`circle\`, \`square\`) with a color, then overlay it with a specific icon.`,type:"array",items:{$ref:"#/definitions/IconConfigJson"}},iconBadges:{description:`A list of extra badges to show next to the icon as small badge
They will be added as a 25% height icon at the bottom right of the icon, with all the badges in a flex layout.

Note: strings are interpreted as icons, so layering and substituting is supported. You can use \`circle:white;./my_icon.svg\` to add a background circle
group: hidden`,type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`},then:{description:`Badge to show
Type: icon`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]}},required:["if","then"]}},iconSize:{description:`question: What size should the marker be on the map?
A string containing "<width>,<height>" in pixels
ifunset: Use the default size (<b>40,40</b> px)`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},anchor:{description:`question: What is the anchorpoint of the icon?

This matches the geographical point with a location on the icon.

ifunset: Use MapComplete-default (<b>center</b>)
suggestions: return [{if: "value=center", then: "Place the <b>center</b> of the icon on the geographical location"},{if: "value=top", then: "Place the <b>top</b> of the icon on the geographical location"},{if: "value=bottom", then: "Place the <b>bottom</b> of the icon on the geographical location"},{if: "value=left", then: "Place the <b>left</b> of the icon on the geographical location"},{if: "value=right", then: "Place the <b>right</b> of the icon on the geographical location"}]`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},rotation:{description:"question: What rotation should be applied on the icon?\nThis is mostly useful for items that face a specific direction, such as surveillance cameras\nThis is interpreted as css property for 'rotate', thus has to end with 'deg', e.g. `90deg`, `{direction}deg`, `calc(90deg - {camera:direction}deg)``\nifunset: Do not rotate",anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},label:{description:`question: What label should be shown beneath the marker?
For example: \`&LT;div style="background: white">{name}&LT;/div>\`

If the icon is undefined, then the label is shown in the center of the feature.
types: Dynamic value based on the attributes ; string
inline: Always show label <b>{value}</b> beneath the marker
ifunset: Do not show a label beneath the marker`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},labelCss:{description:`question: What CSS should be applied to the label?
You can set the css-properties here, e.g. \`background: red; font-size: 12px; \`
inline: Apply CSS-style <b>{value}</b> to the label
types: Dynamic value ; string
ifunset: Do not apply extra CSS-labels to the label
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},labelCssClasses:{description:`question: Which CSS-classes should be applied to the label?

The classes should be separated by a space (\` \`)
You can use most Tailwind-css classes, see https://tailwindcss.com/ for more information
For example: \`center bg-gray-500 mx-2 my-1 rounded-full\`
inline: Apply CSS-classes <b>{value}</b> to the label
types: Dynamic value ; string
ifunset: Do not apply extra CSS-classes to the label
suggestions: return [{if: "value=bg-white rounded px-2", then: "Draw on a white background"}]`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},css:{description:`question: What CSS should be applied to the entire marker?
You can set the css-properties here, e.g. \`background: red; font-size: 12px; \`
This will be applied to the _container_ containing both the marker and the label
inline: Apply CSS-style <b>{value}</b> to the _entire marker_
types: Dynamic value ; string
ifunset: Do not apply extra CSS element to the entire marker
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},cssClasses:{description:`question: Which CSS-classes should be applied to the entire marker?
This will be applied to the _container_ containing both the marker and the label

The classes should be separated by a space (\` \`)
You can use most Tailwind-css classes, see https://tailwindcss.com/ for more information
For example: \`center bg-gray-500 mx-2 my-1 rounded-full\`
inline: Apply CSS-classes <b>{value}</b> to the entire container
ifunset: Do not apply extra CSS-classes to the label
types: Dynamic value ; string
ifunset: Do not apply extra CSS-classes to the entire marker
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},pitchAlignment:{description:`question: If the map is pitched, should the icon stay parallel to the screen or to the groundplane?
suggestions: return [{if: "value=canvas", then: "The icon will stay upward and not be transformed as if it sticks to the screen"}, {if: "value=map", then: "The icon will be transformed as if it were painted onto the ground. (Automatically sets rotationAlignment)"}]
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{enum:["canvas","map"],type:"string"}]},rotationAlignment:{description:`question: Should the icon be rotated if the map is rotated?
ifunset: Do not rotate or tilt icons. Always keep the icons straight
suggestions: return [{if: "value=canvas", then: "Never rotate the icon"}, {if: "value=map", then: "If the map is rotated, rotate the icon as well. This gives the impression of an icon that floats perpendicular above the ground."}]
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{enum:["canvas","map"],type:"string"}]}},required:["location"],additionalProperties:!1},default_5:{description:`The LineRenderingConfig gives all details onto how to render a single line of a feature.

This can be used if:

- The feature is a line
- The feature is an area`,type:"object",properties:{color:{description:`question: What color should lines be drawn in?

For an area, this will be the colour of the outside line.
If the value starts with "--", the style of the body element will be queried for the corresponding variable instead

types: dynamic value ; string
title: Line Colour
inline: The line colour always is <b>{value}</b>
type: color`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]},width:{description:`question: How wide should the line be?
The stroke-width for way-elements

types: dynamic value ; string
title: Line width
inline: The line width is <b>{value} pixels</b>
type: pnat
ifunset: Use the default-linewidth of 7 pixels`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:["string","number"]}]},dashArray:{description:`question: Should a dasharray be used to render the lines?
The dasharray defines 'pixels of line, pixels of gap, pixels of line, pixels of gap, ...'. For example, \`5 6\` will be 5 pixels of line followed by a 6 pixel gap.
Cannot be a dynamic property due to a MapLibre limitation (see https://github.com/maplibre/maplibre-gl-js/issues/1235)
ifunset: Ways are rendered with a full line`,type:"string"},lineCap:{description:`question: What form should the line-ending have?
suggestions: return [{if:"value=round",then:"Round endings"}, {if: "value=square", then: "square endings"}, {if: "value=butt", then: "no ending (square ending at the end, without padding)"}]
types: dynamic value ; string
title: Line Cap
ifunset: Use the default value (round ending)`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]},fillColor:{description:`question: What colour should be used as fill colour for polygons?
ifunset: The polygon fill colour will be a more transparent version of the stroke colour
suggestions: return [{if: "value=#00000000", then: "Use a transparent fill (only render the outline)"}]
inline: The fill colour is <b>{value}</b>
types: dynamic value ; string
type: color`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]},offset:{description:`question: Should the lines be moved (offsetted) with a number of pixels against the geographical lines?
The number of pixels this line should be moved.
Use a positive number to move to the right in the drawing direction or a negative to move to the left (left/right as defined by the drawing direction of the line).

IMPORTANT: MapComplete will already normalize 'key:both:property' and 'key:both' into the corresponding 'key:left' and 'key:right' tagging (same for 'sidewalk=left/right/both' which is rewritten to 'sidewalk:left' and 'sidewalk:right')
This simplifies programming. Refer to the CalculatedTags.md-documentation for more details
ifunset: don't offset lines on the map
inline: Pixel offset by <b>{value}</b> pixels
types: dynamic value ; number
type: int`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"number"}]},imageAlongWay:{description:`question: What PNG-image should be shown along the way?

ifunset: no image is shown along the way
suggestions: [{if: "./assets/png/oneway.png", then: "Show a oneway error"}]
type: image`,anyOf:[{type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`},then:{type:"string"}},required:["if","then"]}},{type:"string"}]}},additionalProperties:!1},QuestionableTagRenderingConfigJson:{description:`A QuestionableTagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
If the desired tags are missing and a question is defined, a question will be shown instead.`,type:"object",properties:{id:{type:"string"},mappings:{description:`Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes

question: What are common options?`,type:"array",items:{$ref:"#/definitions/MappingConfigJson"}},multiAnswer:{description:`If true, use checkboxes instead of radio buttons when asking the question

question: Should a contributor be allowed to select multiple mappings?

iftrue: allow to select multiple mappings
iffalse: only allow to select a single mapping
ifunset: only allow to select a single mapping`,type:"boolean"},freeform:{description:"Allow freeform text input from the user",type:"object",properties:{key:{description:`question: What is the name of the attribute that should be written to?
This is the OpenStreetMap-key that that value will be written to
ifunset: do not offer a freeform textfield as answer option`,type:"string"},type:{description:`question: What is the input type?
The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values
ifunset: use an unconstrained <b>string</b> as input (default)
suggestions: return validators.AllValidators.filter(type => !type.isMeta).map((type) => ({if: "value="+type.name, then: "<b>"+type.name+"</b> "+type.explanation.split("\\n")[0]}))`,type:"string"},placeholder:{description:`question: What placeholder text should be shown in the input-element if there is no input?
A (translated) text that is shown (as gray text) within the textfield
type: translation
group: expert
ifunset: No specific placeholder is set, show the type of the textfield`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},helperArgs:{description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'
group: expert`,type:"array",items:{}},addExtraTags:{description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'
group: expert`,type:"array",items:{type:"string"}},inline:{description:`question: Show the freeform as box within the question?
Instead of showing a full-width text field, the text field will be shown within the rendering of the question.

This combines badly with special input elements, as it'll distort the layout.
ifunset: show the freeform input field full-width
iftrue: show the freeform input field as a small field within the question
group: expert`,type:"boolean"},default:{description:`question: What value should be entered in the text field if no value is set?
This can help people to quickly enter the most common option
ifunset: do not prefill the textfield
group: expert`,type:"string"},invalidValues:{description:`question: What values of the freeform key should be interpreted as 'unknown'?
For example, if a feature has \`shop=yes\`, the question 'what type of shop is this?' should still asked
ifunset: The question will be considered answered if any value is set for the key
group: expert`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]}}},question:{description:`question: What question should be shown to the contributor?

A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well.

ifunset: This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},questionHint:{description:`question: Should some extra information be shown to the contributor, alongside the question?
This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like
ifunset: No extra hint is given`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},editButtonAriaLabel:{description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},labels:{description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer",type:"array",items:{type:"string"}},render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},required:["id"],additionalProperties:!1},"Partial<QuestionableTagRenderingConfigJson>":{type:"object",properties:{id:{type:"string"},mappings:{description:`Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes

question: What are common options?`,type:"array",items:{$ref:"#/definitions/MappingConfigJson"}},multiAnswer:{description:`If true, use checkboxes instead of radio buttons when asking the question

question: Should a contributor be allowed to select multiple mappings?

iftrue: allow to select multiple mappings
iffalse: only allow to select a single mapping
ifunset: only allow to select a single mapping`,type:"boolean"},freeform:{description:"Allow freeform text input from the user",type:"object",properties:{key:{description:`question: What is the name of the attribute that should be written to?
This is the OpenStreetMap-key that that value will be written to
ifunset: do not offer a freeform textfield as answer option`,type:"string"},type:{description:`question: What is the input type?
The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values
ifunset: use an unconstrained <b>string</b> as input (default)
suggestions: return validators.AllValidators.filter(type => !type.isMeta).map((type) => ({if: "value="+type.name, then: "<b>"+type.name+"</b> "+type.explanation.split("\\n")[0]}))`,type:"string"},placeholder:{description:`question: What placeholder text should be shown in the input-element if there is no input?
A (translated) text that is shown (as gray text) within the textfield
type: translation
group: expert
ifunset: No specific placeholder is set, show the type of the textfield`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},helperArgs:{description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'
group: expert`,type:"array",items:{}},addExtraTags:{description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'
group: expert`,type:"array",items:{type:"string"}},inline:{description:`question: Show the freeform as box within the question?
Instead of showing a full-width text field, the text field will be shown within the rendering of the question.

This combines badly with special input elements, as it'll distort the layout.
ifunset: show the freeform input field full-width
iftrue: show the freeform input field as a small field within the question
group: expert`,type:"boolean"},default:{description:`question: What value should be entered in the text field if no value is set?
This can help people to quickly enter the most common option
ifunset: do not prefill the textfield
group: expert`,type:"string"},invalidValues:{description:`question: What values of the freeform key should be interpreted as 'unknown'?
For example, if a feature has \`shop=yes\`, the question 'what type of shop is this?' should still asked
ifunset: The question will be considered answered if any value is set for the key
group: expert`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]}}},question:{description:`question: What question should be shown to the contributor?

A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well.

ifunset: This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},questionHint:{description:`question: Should some extra information be shown to the contributor, alongside the question?
This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like
ifunset: No extra hint is given`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},editButtonAriaLabel:{description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},labels:{description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer",type:"array",items:{type:"string"}},render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},"default<(string|QuestionableTagRenderingConfigJson|{builtin:string;override:Partial<QuestionableTagRenderingConfigJson>;})[]>":{description:`Rewrites and multiplies the given renderings of type T.

This can be used for introducing many similar questions automatically,
which also makes translations easier.

(Note that the key does _not_ need to be wrapped in {}.
However, we recommend to use them if the key is used in a translation, as missing keys will be picked up and warned for by the translation scripts)

For example:

\`\`\`
{
    rewrite: {
        sourceString: ["key", "a|b|c"],
        into: [
            ["X", 0]
            ["Y", 1],
            ["Z", 2]
        ],
        renderings: [{
            "key":"a|b|c"
        }]
    }
}
\`\`\`
will result in _three_ copies (as the values to rewrite into have three values, namely:

[
  {
  # The first pair: key --> X, a|b|c --> 0
      "X": 0
  },
  {
      "Y": 1
  },
  {
      "Z": 2
  }

]`,type:"object",properties:{rewrite:{type:"object",properties:{sourceString:{type:"array",items:{type:"string"}},into:{type:"array",items:{type:"array",items:{}}}},required:["into","sourceString"]},subexpand:{$ref:"#/definitions/Record<string,string[]>"},renderings:{anyOf:[{type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{type:"string"}]}},{type:"array",items:{type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{type:"string"}]}}}]}},required:["renderings","rewrite"],additionalProperties:!1},default_1:{type:"object",properties:{id:{description:"An id/name for this filter, used to set the URL parameters",type:"string"},options:{description:`The options for a filter
If there are multiple options these will be a list of radio buttons
If there is only one option this will be a checkbox
Filtering is done based on the given osmTags that are compared to the objects in that layer.

An example which searches by name:

\`\`\`
{
      "id": "shop-name",
      "options": [
        {
          "fields": [
            {
              "name": "search",
              "type": "string"
            }
          ],
          "osmTags": "name~i~.*{search}.*",
          "question": {
            "en": "Only show shops with name {search}",
          }
        }
      ]
    }
    \`\`\``,type:"array",items:{type:"object",properties:{question:{},osmTags:{description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},default:{type:"boolean"},fields:{type:"array",items:{type:"object",properties:{name:{description:'If name is `search`, use  "_first_comment~.*{search}.*" as osmTags',type:"string"},type:{type:"string"}},required:["name"]}}},required:["question"]}},"#":{description:'Used for comments or to disable a check\n\n"ignore-possible-duplicate": disables a check in `DetectDuplicateFilters` which complains that a filter can be replaced by a filter from the `filters`-library-layer',type:"string"}},required:["id","options"],additionalProperties:!1},DeleteConfigJson:{type:"object",properties:{neededChangesets:{description:`*
By default, the contributor needs 20 previous changesets to delete points edited by others.
For some small features (e.g. bicycle racks) this is too much and this requirement can be lowered or dropped, which can be done here.

type: nat
question: How many changesets must a contributor have before being allowed to delete a point?`,type:"number"},extraDeleteReasons:{description:`*
By default, three reasons to delete a point are shown:

- The point does not exist anymore
- The point was a testing point
- THe point could not be found

However, for some layers, there might be different or more specific reasons for deletion which can be user friendly to set, e.g.:

- the shop has closed
- the climbing route has been closed of for nature conservation reasons
- ...

These reasons can be stated here and will be shown in the list of options the user can choose from`,type:"array",items:{type:"object",properties:{explanation:{description:`The text that will be shown to the user as option for why this point does not exist anymore.
Note that the most common reasons (test point, does not exist anymore, cannot be found) are already offered by default

question: For what extra reason might this feature be removed in real-life?`},changesetMessage:{description:`The text that will be uploaded into the changeset or will be used in the fixme in case of a soft deletion
Should be a few words, in english

question: What should be added to the changeset as delete reason?`,type:"string"}},required:["changesetMessage","explanation"]}},nonDeleteMappings:{description:`In some cases, a (starting) contributor might wish to delete a feature even though deletion is not appropriate.
(The most relevant case are small paths running over private property. These should be marked as 'private' instead of deleted, as the community might trace the path again from aerial imagery, gettting us back to the original situation).

By adding a 'nonDeleteMapping', an option can be added into the list which will retag the feature.
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!`,type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The tags that will be given to the object.
This must remove tags so that the 'source/osmTags' won't match anymore

question: What tags should be applied to the object?`},then:{description:`The human explanation for the options

question: What text should be shown to the contributor for this reason?`}},required:["if","then"]}},softDeletionTags:{description:`In some cases, the contributor is not allowed to delete the current feature (e.g. because it isn't a point, the point is referenced by a relation or the user isn't experienced enough).
To still offer the user a 'delete'-option, the feature is retagged with these tags. This is a soft deletion, as the point isn't actually removed from OSM but rather marked as 'disused'
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!

Example (note that "amenity=" erases the 'amenity'-key alltogether):

\`\`\`
{
    "and": ["disussed:amenity=public_bookcase", "amenity="]
}
\`\`\`

or (notice the use of the ':='-tag to copy the old value of 'shop=*' into 'disused:shop='):

\`\`\`
{
    "and": ["disused:shop:={shop}", "shop="]
}
\`\`\`

question: If a hard delete is not possible, what tags should be applied to mark this feature as deleted?
type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},omitDefaultDeleteReasons:{description:`Set this flag if the default delete reasons should be omitted from the dialog.
This requires at least one extraDeleteReason or nonDeleteMapping

question: Should the default delete reasons be hidden?
iftrue: Hide the default delete reasons
iffalse: Show the default delete reasons
ifunset: Show the default delete reasons (default behaviour)`,anyOf:[{type:"array",items:{type:"string"}},{type:"boolean"}]}},additionalProperties:!1},default_3:{type:"object",properties:{enableImproveAccuracy:{description:`question: Should moving this type of point to improve the accuracy be allowed?
iftrue: This point can be moved to improve the accuracy
ifunset: (default) This point can be moved to improve the accuracy
iffalse: This point cannot be moved to improve the accuracy`,type:"boolean"},enableRelocation:{description:"question: Should moving this type of point due to a relocation be allowed?\n\nThis will erase the attributes `addr:street`, `addr:housenumber`, `addr:city` and `addr:postcode`\n\niftrue: This type of point can be moved due to a relocation (and will remove address information when this is done)\nifunset: (default) This type of point can be moved due to a relocation (and will remove address information when this is done)\niffalse: This type of point cannot be moved due to a relocation",type:"boolean"}},additionalProperties:!1},default_2:{description:`In some cases, a value is represented in a certain unit (such as meters for heigt/distance/..., km/h for speed, ...)

Sometimes, multiple denominations are possible (e.g. km/h vs mile/h; megawatt vs kilowatt vs gigawatt for power generators, ...)

This brings in some troubles, as there are multiple ways to write it (no denomitation, 'm' vs 'meter' 'metre', ...)

Not only do we want to write consistent data to OSM, we also want to present this consistently to the user.
This is handled by defining units.

# Rendering

To render a value with long (human) denomination, use {canonical(key)}

# Usage

First of all, you define which keys have units applied, for example:

\`\`\`
units: [
 appliesTo: ["maxspeed", "maxspeed:hgv", "maxspeed:bus"]
 applicableUnits: [
     ...
 ]
]
\`\`\`

ApplicableUnits defines which is the canonical extension, how it is presented to the user, ...:

\`\`\`
applicableUnits: [
{
    canonicalDenomination: "km/h",
    alternativeDenomination: ["km/u", "kmh", "kph"]
    default: true,
    human: {
        en: "kilometer/hour",
        nl: "kilometer/uur"
    },
    humanShort: {
        en: "km/h",
        nl: "km/u"
    }
},
{
    canoncialDenomination: "mph",
    ... similar for miles an hour ...
}
]
\`\`\`


If this is defined, then every key which the denominations apply to (\`maxspeed\`, \`maxspeed:hgv\` and \`maxspeed:bus\`) will be rewritten at the metatagging stage:
every value will be parsed and the canonical extension will be added add presented to the other parts of the code.

Also, if a freeform text field is used, an extra dropdown with applicable denominations will be given`,type:"object",properties:{quantity:{description:"What is quantified? E.g. 'speed', 'length' (including width, diameter, ...), 'electric tension', 'electric current', 'duration'",type:"string"},appliesToKey:{description:"Every key from this list will be normalized.\n\nTo render the value properly (with a human readable denomination), use `{canonical(<key>)}`",type:"array",items:{type:"string"}},eraseInvalidValues:{description:`If set, invalid values will be erased in the MC application (but not in OSM of course!)
Be careful with setting this`,type:"boolean"},applicableUnits:{description:`The possible denominations for this unit.
For length, denominations could be "meter", "kilometer", "miles", "foot"`,type:"array",items:{$ref:"#/definitions/DenominationConfigJson"}},defaultInput:{description:`In some cases, the default denomination is not the most user friendly to input.
E.g., when measuring kerb heights, it is illogical to ask contributors to input an amount in meters.

When a default input method should be used, this can be specified by setting the canonical denomination here, e.g.
\`defaultInput: "cm"\`. This must be a denomination which appears in the applicableUnits`,type:"string"}},required:["applicableUnits"],additionalProperties:!1},"Record<string,string|{quantity:string;denominations:string[];canonical?:string|undefined;inverted?:boolean|undefined;}>":{type:"object",additionalProperties:!1}},Fa="http://json-schema.org/draft-07/schema#",La=!1,Ea={description:Wa,type:Ma,properties:Oa,required:Da,definitions:Na,$schema:Fa,additionalProperties:La},Pa=`Defines the entire theme.

A theme is the collection of the layers that are shown; the intro text, the icon, ...
It more or less defines the entire experience.

Most of the fields defined here are metadata about the theme, such as its name, description, supported languages, default starting location, ...

The main chunk of the json will however be the 'layers'-array, where the details of your layers are.

General remark: a type (string | any) indicates either a fixed or a translatable string.`,Ha="object",Ba={id:{description:`question: What is the id of this layout?

The id is a unique string to identify the theme

It should be
- in english
- describe the theme in a single word (or a few words)
- all lowercase and with only [a-z] or underscores (_)

This is used as hashtag in the changeset message, which will read something like "Adding data with #mapcomplete for theme #<the theme id>"

On official themes, it'll become the name of the page, e.g.
'cyclestreets' which become 'cyclestreets.html'

type: id
group: basic`,type:"string"},title:{description:`question: What is the title of this theme?

The human-readable title, as shown in the welcome message and the index page
group: basic`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},mustHaveLanguage:{description:`Only used in 'generateLayerOverview': if present, every translation will be checked to make sure it is fully translated.

This must be a list of two-letter, lowercase codes which identifies the language, e.g. "en", "nl", ...`,type:"array",items:{type:"string"}},description:{description:`question: How would you describe this theme?
The description, as shown in the welcome message and the more-screen
group: basic`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},shortDescription:{description:`A short description, showed as social description and in the 'more theme'-buttons.
Note that if this one is not defined, the first sentence of 'description' is used
group: hidden`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},descriptionTail:{description:`A part of the description, shown under the login-button.
group: hidden`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be used to represent this theme?

Used as logo in the more-screen and (for official themes) as favicon, webmanifest logo, ...

Either a URL or a base64 encoded value (which should include 'data:image/svg+xml;base64)

Type: icon
group: basic`,type:"string"},socialImage:{description:`question: What image should be used as social image preview?
This is included as og:image-tag on official themes.

See https://www.h3xed.com/web-and-internet/how-to-use-og-image-meta-tag-facebook-reddit for more information
ifunset: use the default social image of mapcomplete (or generate one based on the icon)
Type: image
group: basic`,type:"string"},extraLink:{description:`question: should an extra help button be shown in certain circumstances?
Adds an additional button on the top-left of the application.
This can link to an arbitrary location.

For example {icon: "./assets/svg/pop-out.svg", href: 'https://mapcomplete.org/{theme}.html?lat={lat}&lon={lon}&z={zoom}, requirements: ["iframe","no-welcome-message]},

group: advanced
ifunset: show a link to open MapComplete full screen if used in an iframe`,$ref:"#/definitions/default"},startZoom:{description:`question: At what zoomlevel should this theme open?
Default location and zoom to start.
Note that this is barely used. Once the user has visited mapcomplete at least once, the previous location of the user will be used
ifunset: Use the default startzoom (0)
type: float
group: start_location`,type:"number"},startLat:{description:`question: At what start latitude should this theme open?
Default location and zoom to start.
Note that this is barely used. Once the user has visited mapcomplete at least once, the previous location of the user will be used
ifunset: Use 0 as start latitude
type: float
group: start_location`,type:"number"},startLon:{description:`question: At what start longitude should this theme open?
Default location and zoom to start.
Note that this is barely used. Once the user has visited mapcomplete at least once, the previous location of the user will be used
ifunset: Use 0 as start longitude
type: float
group: start_location`,type:"number"},defaultBackgroundId:{description:"The id of the default background. BY default: vanilla OSM",type:"string"},credits:{description:"Who helped to create this theme and should be attributed?",anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},hideFromOverview:{description:"If set to true, this layout will not be shown in the overview with more themes",type:"boolean"},layers:{description:`question: What layers should this map show?
type: layer[]
types: hidden | layer | hidden
group: layers
suggestions: return Array.from(layers.keys()).map(key => ({if: "value="+key, then: "<b>"+key+"</b> (builtin) - "+layers.get(key).description}))

A theme must contain at least one layer.

A layer contains all features of a single type, for example "shops", "bicycle pumps", "benches".
Note that every layer contains a specification of attributes that it should match. MapComplete will fetch the relevant data from either overpass, the OSM-API or the cache server.
If a feature can match multiple layers, the first matching layer in the list will be used.
This implies that the _order_ of the layers is important.


<div class='hidden-in-studio'>
Note that builtin layers can be reused. Either put in the name of the layer to reuse, or use {builtin: "layername", override: ...}

The 'override'-object will be copied over the original values of the layer, which allows to change certain aspects of the layer

For example: If you would like to use layer nature reserves, but only from a specific operator (eg. Natuurpunt) you would use the following in your theme:

\`\`\`
"layer": {
 "builtin": "nature_reserve",
 "override": {"source":
 {"osmTags": {
 "+and":["operator=Natuurpunt"]
   }
  }
 }
}
\`\`\`

It's also possible to load multiple layers at once, for example, if you would like for both drinking water and benches to start at the zoomlevel at 12, you would use the following:

\`\`\`
"layer": {
 "builtin": ["benches", "drinking_water"],
 "override": {"minzoom": 12}
}
\`\`\`
</div>`,type:"array",items:{anyOf:[{$ref:"#/definitions/LayerConfigJson"},{type:"object",properties:{builtin:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},override:{$ref:"#/definitions/Partial<LayerConfigJson>"},hideTagRenderingsWithLabels:{description:`TagRenderings with any of these labels will be removed from the layer.
Note that the 'id' and 'group' are considered labels too`,type:"array",items:{type:"string"}}},required:["builtin","override"]},{type:"string"}]}},overrideAll:{description:`An override applied on all layers of the theme.

E.g.: if there are two layers defined:
\`\`\`
"layers":[
 {"title": ..., "tagRenderings": [...], "osmSource":{"tags": ...}},
 {"title", ..., "tagRenderings", [...], "osmSource":{"tags" ...}}
]
\`\`\`

and overrideAll is specified:
\`\`\`
"overrideAll": {
    "osmSource":{"geoJsonSource":"xyz"}
}
then the result will be that all the layers will have these properties applied and result in:
"layers":[
 {"title": ..., "tagRenderings": [...], "osmSource":{"tags": ..., "geoJsonSource":"xyz"}},
 {"title", ..., "tagRenderings", [...], "osmSource":{"tags" ..., "geoJsonSource":"xyz"}}
]
\`\`\`

If the overrideAll contains a list where the keys starts with a plus, the values will be appended (instead of discarding the old list), for example

"overrideAll": {
  "+tagRenderings": [ { ... some tagrendering ... }]
}

In the above scenario, \`sometagrendering\` will be added at the beginning of the tagrenderings of every layer`,$ref:"#/definitions/Partial<any>"},tileLayerSources:{description:"Define some (overlay) slippy map tilesources",type:"array",items:{allOf:[{$ref:"#/definitions/RasterLayerProperties"},{type:"object",properties:{defaultState:{type:"boolean"}}}]}},customCss:{description:`The URL of a custom CSS stylesheet to modify the layout
group: advanced`,type:"string"},lockLocation:{description:`If set to true, the basemap will not scroll outside of the area visible on initial zoom.
If set to [[lon, lat], [lon, lat]], the map will not scroll outside of those bounds.
Off by default, which will enable panning to the entire world`,anyOf:[{type:"array",items:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:2,maxItems:2},{type:"array",items:{type:"array",items:{type:"number"}}}]},enableUserBadge:{description:`question: Should a user be able to login with OpenStreetMap?

If not logged in, will not show the login buttons and hide all the editable elements.
As such, MapComplete will become read-only and a purely visualisation tool.

ifunset: Enable the possiblity to login with OpenStreetMap (default)
iffalse: Do not enable to login with OpenStreetMap, have a read-only view of MapComplete.
iftrue: Enable the possiblity to login with OpenStreetMap
group: feature_switches`,type:"boolean"},enableShareScreen:{description:`question: Should the tab with options to share the current screen be enabled?

On can get the iFrame embed code here

ifunset: Enable the sharescreen (default)
iffalse: Do not enable the share screen
iftrue: Enable the share screen
group: feature_switches`,type:"boolean"},enableMoreQuests:{description:`question: Should the user be able to switch to different themes?

Typically enabled in iframes and/or on commisioned themes

iftrue: enable to go back to the index page showing all themes
iffalse: do not enable to go back to the index page showing all themes; hide the 'more themes' buttons
ifunset: mapcomplete default: enable to go back to the index page showing all themes
group: feature_switches`,type:"boolean"},enableLayers:{description:`question: Should the user be able to enable/disable layers and to filter the layers?

The corresponding URL-parameter is 'fs-filters' instead of 'fs-layers'
iftrue: enable the filters/layers pane
iffalse: do not enable to filter or to disable layers; hide the 'filter' tab from the overview and the button at the bottom-left
ifunset: mapcomplete default: enable to filter or to enable/disable layers
group: feature_switches`,type:"boolean"},enableSearch:{description:`question: Should the user be able to search for locations?

ifunset: MapComplete default: allow to search
iftrue: Allow to search
iffalse: Do not allow to search; hide the search-bar
group: feature_switches`,type:"boolean"},enableAddNewPoints:{description:`question: Should the user be able to add new points?

Adding new points is only possible if the loaded layers have presets set.
Some layers do not have presets. If the theme only has layers without presets, then adding new points will not be possible.

ifunset: MapComplete default: allow to create new points
iftrue: Allow to create new points
iffalse: Do not allow to create new points, even if the layers in this theme support creating new points
group: feature_switches`,type:"boolean"},enableGeolocation:{description:`question: Should the user be able to use their GPS to geolocate themselfes on the map?
ifunset: MapComplete default: allow to use the GPS
iftrue: Allow to use the GPS
iffalse: Do not allow to use the GPS, hide the geolocation-buttons
group: feature_switches`,type:"boolean"},enableBackgroundLayerSelection:{description:`Enable switching the backgroundlayer.
If false, the quickswitch-buttons are removed (bottom left) and the dropdown in the layer selection is removed as well

question: Should the user be able to switch the background layer?

iftrue: Allow to switch the background layer
iffalse: Do not allow to switch the background layer
ifunset: MapComplete default: Allow to switch the background layer
group: feature_switches`,type:"boolean"},enableShowAllQuestions:{description:`question: Should the questions about a feature be presented one by one or all at once?
iftrue: Show all unanswered questions at the same time
iffalse: Show unanswered questions one by one
ifunset: MapComplete default: Use the preference of the user to show questions at the same time or one by one
group: feature_switches`,type:"boolean"},enableDownload:{description:`question: Should the 'download as CSV'- and 'download as Geojson'-buttons be enabled?
iftrue: Enable the option to download the map as CSV and GeoJson
iffalse: Disable the option to download the map as CSV and GeoJson
ifunset: MapComplete default: Enable the option to download the map as CSV and GeoJson
group: feature_switches`,type:"boolean"},enablePdfDownload:{description:`question: Should the 'download as PDF'-button be enabled?
iftrue: Enable the option to download the map as PDF
iffalse: Enable the option to download the map as PDF
ifunset: MapComplete default: Enable the option to download the map as PDF
group: feature_switches`,type:"boolean"},enableNoteImports:{description:`question: Should the 'notes' from OpenStreetMap be loaded and parsed for import helper notes?
If true, notes will be loaded and parsed. If a note is an import (as created by the import_helper.html-tool from mapcomplete),
these notes will be shown if a relevant layer is present.

ifunset: MapComplete default: do not load import notes for sideloaded themes but do load them for official themes
iftrue: Load notes and show import notes
iffalse: Do not load import notes
group: advanced`,type:"boolean"},enableTerrain:{description:`question: Should the map use elevation data to give a 3D-feel?

This is especially useful for hiking maps, skiing maps etc...

ifunset: MapComplete default: don't use terrain
iftrue: Use elevation and render 3D
iffalse: Do not use terrain
group: advanced`,type:"boolean"},overpassUrl:{description:`question: What overpass-api instance should be used for this layout?

ifunset: Use the default, builtin collection of overpass instances
group: advanced`,type:"array",items:{type:"string"}},overpassTimeout:{description:`question: After how much seconds should the overpass-query stop?
If a query takes too long, the overpass-server will abort.
Once can set the amount of time before overpass gives up here.
ifunset: use the default amount of 30 seconds as timeout
type: pnat
group: advanced`,type:"number"},overpassMaxZoom:{description:`At low zoom levels, overpass is used to query features.
At high zoom level, the OSM api is used to fetch one or more BBOX aligning with a slippy tile.
The overpassMaxZoom controls the flipoverpoint: if the zoom is this or lower, overpass is used.`,type:"number"},osmApiTileSize:{description:`When the OSM-api is used to fetch features, it does so in a tiled fashion.
These tiles are using a ceratin zoom level, that can be controlled here
Default: overpassMaxZoom + 1`,type:"number"},enableNodeDatabase:{description:`Enables tracking of all nodes when data is loaded.
This is useful for the 'ImportWay' and 'ConflateWay'-buttons who need this database.

Note: this flag will be automatically set and can thus be ignored.
group: hidden`,type:"boolean"}},Ua=["description","icon","id","layers","title"],za={TagConfigJson:{description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"]},{type:"string"}]},"{and:TagConfigJson[];}":{type:"object",properties:{and:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["and"],additionalProperties:!1},"{or:TagConfigJson[];}":{type:"object",properties:{or:{type:"array",items:{$ref:"#/definitions/TagConfigJson"}}},required:["or"],additionalProperties:!1},"Record<string,string>":{type:"object",additionalProperties:!1},"Record<string,string|Record<string,string>>":{type:"object",additionalProperties:!1},DenominationConfigJson:{type:"object",properties:{useIfNoUnitGiven:{description:`If this evaluates to true and the value to interpret has _no_ unit given, assumes that this unit is meant.
Alternatively, a list of country codes can be given where this acts as the default interpretation

E.g., a denomination using "meter" would probably set this flag to "true";
a denomination for "mp/h" will use the condition "_country=gb" to indicate that it is the default in the UK.

If none of the units indicate that they are the default, the first denomination will be used instead`,anyOf:[{type:"array",items:{type:"string"}},{type:"boolean"}]},canonicalDenomination:{description:`The canonical value for this denomination which will be added to the value in OSM.
e.g. "m" for meters
If the user inputs '42', the canonical value will be added and it'll become '42m'.

Important: often, _no_ canonical values are expected, e.g. in the case of 'maxspeed' where 'km/h' is the default.
In this case, an empty string should be used`,type:"string"},canonicalDenominationSingular:{description:"The canonical denomination in the case that the unit is precisely '1'.\nUsed for display purposes only.\n\nE.g.: for duration of something in minutes: `2 minutes` but `1 minute`; the `minute` goes here",type:"string"},alternativeDenomination:{description:"A list of alternative values which can occur in the OSM database - used for parsing.\nE.g.: while 'm' is canonical, `meter`, `mtrs`, ... can occur as well",type:"array",items:{type:"string"}},human:{description:`The value for humans in the dropdown. This should not use abbreviations and should be translated, e.g.
{
    "en": "meter",
    "fr": "metre"
}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},humanSingular:{description:`The value for humans in the dropdown. This should not use abbreviations and should be translated, e.g.
{
    "en": "minute",
    "nl": "minuut"
}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},prefix:{description:`If set, then the canonical value will be prefixed instead, e.g. for ''
Note that if all values use 'prefix', the dropdown might move to before the text field`,type:"boolean"},addSpace:{description:"If set, add a space between the quantity and the denomination.\n\nE.g.: `50 mph` instad of `50mph`",type:"boolean"}},required:["canonicalDenomination"],additionalProperties:!1},MinimalTagRenderingConfigJson:{description:"Mostly used for lineRendering and pointRendering",type:"object",properties:{render:{description:`question: What value should be shown (if no predefined option matches)?

This piece of text will be shown in the infobox.
Note that "&LBRACEkey&RBRACE"-parts are substituted by the corresponding values of the element.

This value will be used if there is no mapping which matches (or there are no matches)
Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\``,type:"string"},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option",type:"string"}},required:["if","then"]}}},additionalProperties:!1},IconConfigJson:{type:"object",properties:{icon:{description:`question: What icon should be used?
type: icon
suggestions: return Constants.defaultPinIcons.map(i => ({if: "value="+i, then: i, icon: i}))`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{}},required:["builtin","override"]},{type:"string"}]},color:{description:"question: What colour should the icon be?\nThis will only work for the default icons such as `pin`,`circle`,...\ntype: color",anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{}},required:["builtin","override"]},{type:"string"}]}},required:["icon"],additionalProperties:!1},TagRenderingConfigJson:{description:`A TagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
For an _editable_ tagRendering, use 'QuestionableTagRenderingConfigJson' instead, which extends this one`,type:"object",properties:{render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},freeform:{description:`question: Should a freeform text field be shown?
Allow freeform text input from the user
ifunset: Do not add a freeform text field`,type:"object",properties:{key:{description:`What attribute should be filled out
If this key is present in the feature, then 'render' is used to display the value.
If this is undefined, the rendering is _always_ shown`,type:"string"}}},mappings:{description:"Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes",type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: When should this single mapping match?

If this condition is met, then the text under \`then\` will be shown.
If no value matches, and the user selects this mapping as an option, then these tags will be uploaded to OSM.

For example: {'if': 'diet:vegetarion=yes', 'then':'A vegetarian option is offered here'}

This can be an substituting-tag as well, e.g. {'if': 'addr:street:={_calculated_nearby_streetname}', 'then': '{_calculated_nearby_streetname}'}`},then:{description:"question: What text should be shown?\n\nIf the condition `if` is met, the text `then` will be rendered.\nIf not known yet, the user will be presented with `then` as an option\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be added to this mapping?
ifunset: Do not show an extra icon next to the render value

An icon supporting this mapping; typically shown pretty small.
This can be used to show a 'phone'-icon next to the phone number
inline: <img src='{icon}' class="w-8 h-8" /> {icon}
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]}},required:["if","then"]}},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},"Record<string,string[]>":{type:"object",additionalProperties:!1},MappingConfigJson:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`question: What tags should be matched to show this option?

If in 'question'-mode and the contributor selects this option, these tags will be applied to the object`},then:{description:"Question: What corresponding text should be shown?\nShown if the `if` is fulfilled\nType: rendered",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},icon:{description:`question: What icon should be shown next to this mapping?

This icon will only be shown if the value is known, it is not displayed in the options (but might be in the future)

ifunset: Show no icon
Type: icon`,anyOf:[{type:"object",properties:{path:{description:`The path to the  icon
Type: icon`,type:"string"},class:{description:"Size of the image",type:"string"}},required:["path"]},{type:"string"}]},hideInAnswer:{description:`question: Under what circumstances should this mapping be <b>hidden</b> from the possibilities a contributor can pick?
iftrue: Never show this mapping as option to pick
ifunset: Always show this mapping as option to pick
type: tag

In some cases, multiple taggings exist (e.g. a default assumption, or a commonly mapped abbreviation and a fully written variation).

In the latter case, a correct text should be shown, but only a single, canonical tagging should be selectable by the user.
In this case, one of the mappings can be hiden by setting this flag.

To demonstrate an example making a default assumption:

mappings: [
 {
     if: "access=", -- no access tag present, we assume accessible
     then: "Accessible to the general public",
     hideInAnswer: true
 },
 {
     if: "access=yes",
     then: "Accessible to the general public", -- the user selected this, we add that to OSM
 },
 {
     if: "access=no",
     then: "Not accessible to the public"
 }
]


For example, for an operator, we have \`operator=Agentschap Natuur en Bos\`, which is often abbreviated to \`operator=ANB\`.
Then, we would add two mappings:
{
    if: "operator=Agentschap Natuur en Bos" -- the non-abbreviated version which should be uploaded
    then: "Maintained by Agentschap Natuur en Bos"
},
{
    if: "operator=ANB", -- we don't want to upload abbreviations
    then: "Maintained by Agentschap Natuur en Bos"
    hideInAnswer: true
}

Hide in answer can also be a tagsfilter, e.g. to make sure an option is only shown when appropriate.
Keep in mind that this is reverse logic: it will be hidden in the answer if the condition is true, it will thus only show in the case of a mismatch

e.g., for toilets: if "wheelchair=no", we know there is no wheelchair dedicated room.
For the location of the changing table, the option "in the wheelchair accessible toilet is weird", so we write:

{
    "question": "Where is the changing table located?"
    "mappings": [
        {"if":"changing_table:location=female","then":"In the female restroom"},
       {"if":"changing_table:location=male","then":"In the male restroom"},
       {"if":"changing_table:location=wheelchair","then":"In the wheelchair accessible restroom", "hideInAnswer": "wheelchair=no"},

    ]
}

Also have a look for the meta-tags
{
    if: "operator=Agentschap Natuur en Bos",
    then: "Maintained by Agentschap Natuur en Bos",
    hideInAnswer: "_country!=be"
}`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:["string","boolean"]}]},alsoShowIf:{description:`question: In what other cases should this item be rendered?

Also show this 'then'-option if the feature matches these tags.
Ideal for outdated tags or default assumptions. The tags from this options will <b>not</b> be set if the option is chosen!

ifunset: No other cases when this text is shown`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},ifnot:{description:`question: What tags should be applied if this mapping is _not_ chosen?

Only applicable if 'multiAnswer' is set.
This is for situations such as:
\`accepts:coins=no\` where one can select all the possible payment methods. However, we want to make explicit that some options _were not_ selected.
This can be done with \`ifnot\`
Note that we can not explicitly render this negative case to the user, we cannot show \`does _not_ accept coins\`.
If this is important to your usecase, consider using multiple radiobutton-fields without \`multiAnswer\`

ifunset: Do not apply a tag if a different mapping is chosen.`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},addExtraTags:{description:`question: What extra tags should be added to the object if this object is chosen?
type: simple_tag

If chosen as answer, these tags will be applied onto the object, together with the tags from the \`if\`
Not compatible with multiAnswer.

This can be used e.g. to erase other keys which indicate the 'not' value:
\`\`\`json
{
    "if": "crossing:marking=rainbow",
    "then": "This is a rainbow crossing",
    "addExtraTags": ["not:crossing:marking="]
}
\`\`\``,type:"array",items:{type:"string"}},searchTerms:{description:`question: If there are many options, what search terms match too?
If there are many options, the mappings-radiobuttons will be replaced by an element with a searchfunction

Searchterms (per language) allow to easily find an option if there are many options
group: hidden`,$ref:"#/definitions/Record<string,string[]>"},priorityIf:{description:`If the searchable selector is picked, mappings with this item will have priority and show up even if the others are hidden
Use this sparingly
group: hidden`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},"#":{description:"Used for comments or to disable a validation\n\ngroup: hidden\nignore-image-in-then: normally, a `then`-clause is not allowed to have an `img`-html-element as icons are preferred. In some cases (most notably title-icons), this is allowed",type:"string"}},required:["if","then"],additionalProperties:!1},T:{type:"object",additionalProperties:!1},default_4:{description:`The PointRenderingConfig gives all details onto how to render a single point of a feature.

This can be used if:

- The feature is a point
- To render something at the centroid of an area, or at the start, end or projected centroid of a way`,type:"object",properties:{location:{description:`question: At what location should this icon be shown?
multianswer: true
suggestions: return [{if: "value=point",then: "Show an icon for point (node) objects"},{if: "value=centroid",then: "Show an icon for line or polygon (way) objects at their centroid location"}, {if: "value=start",then: "Show an icon for line (way) objects at the start"},{if: "value=end",then: "Show an icon for line (way) object at the end"},{if: "value=projected_centerpoint",then: "Show an icon for line (way) object near the centroid location, but moved onto the line. Does not show an item on polygons"}, {if: "value=polygon_centroid",then: "Show an icon at a polygon centroid (but not if it is a way)"}]`,type:"array",items:{type:"string"}},marker:{description:`The marker for an element.
Note that this also defines the icon for this layer (rendered with the overpass-tags) <i>and</i> the icon in the presets.

The result of the icon is rendered as follows:
- The first icon is rendered on the map
- The second entry is overlayed on top of it
- ...

As a result, on could use a generic icon (\`pin\`, \`circle\`, \`square\`) with a color, then overlay it with a specific icon.`,type:"array",items:{$ref:"#/definitions/IconConfigJson"}},iconBadges:{description:`A list of extra badges to show next to the icon as small badge
They will be added as a 25% height icon at the bottom right of the icon, with all the badges in a flex layout.

Note: strings are interpreted as icons, so layering and substituting is supported. You can use \`circle:white;./my_icon.svg\` to add a background circle
group: hidden`,type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`},then:{description:`Badge to show
Type: icon`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]}},required:["if","then"]}},iconSize:{description:`question: What size should the marker be on the map?
A string containing "<width>,<height>" in pixels
ifunset: Use the default size (<b>40,40</b> px)`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},anchor:{description:`question: What is the anchorpoint of the icon?

This matches the geographical point with a location on the icon.

ifunset: Use MapComplete-default (<b>center</b>)
suggestions: return [{if: "value=center", then: "Place the <b>center</b> of the icon on the geographical location"},{if: "value=top", then: "Place the <b>top</b> of the icon on the geographical location"},{if: "value=bottom", then: "Place the <b>bottom</b> of the icon on the geographical location"},{if: "value=left", then: "Place the <b>left</b> of the icon on the geographical location"},{if: "value=right", then: "Place the <b>right</b> of the icon on the geographical location"}]`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},rotation:{description:"question: What rotation should be applied on the icon?\nThis is mostly useful for items that face a specific direction, such as surveillance cameras\nThis is interpreted as css property for 'rotate', thus has to end with 'deg', e.g. `90deg`, `{direction}deg`, `calc(90deg - {camera:direction}deg)``\nifunset: Do not rotate",anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},label:{description:`question: What label should be shown beneath the marker?
For example: \`&LT;div style="background: white">{name}&LT;/div>\`

If the icon is undefined, then the label is shown in the center of the feature.
types: Dynamic value based on the attributes ; string
inline: Always show label <b>{value}</b> beneath the marker
ifunset: Do not show a label beneath the marker`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},labelCss:{description:`question: What CSS should be applied to the label?
You can set the css-properties here, e.g. \`background: red; font-size: 12px; \`
inline: Apply CSS-style <b>{value}</b> to the label
types: Dynamic value ; string
ifunset: Do not apply extra CSS-labels to the label
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},labelCssClasses:{description:`question: Which CSS-classes should be applied to the label?

The classes should be separated by a space (\` \`)
You can use most Tailwind-css classes, see https://tailwindcss.com/ for more information
For example: \`center bg-gray-500 mx-2 my-1 rounded-full\`
inline: Apply CSS-classes <b>{value}</b> to the label
types: Dynamic value ; string
ifunset: Do not apply extra CSS-classes to the label
suggestions: return [{if: "value=bg-white rounded px-2", then: "Draw on a white background"}]`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},css:{description:`question: What CSS should be applied to the entire marker?
You can set the css-properties here, e.g. \`background: red; font-size: 12px; \`
This will be applied to the _container_ containing both the marker and the label
inline: Apply CSS-style <b>{value}</b> to the _entire marker_
types: Dynamic value ; string
ifunset: Do not apply extra CSS element to the entire marker
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},cssClasses:{description:`question: Which CSS-classes should be applied to the entire marker?
This will be applied to the _container_ containing both the marker and the label

The classes should be separated by a space (\` \`)
You can use most Tailwind-css classes, see https://tailwindcss.com/ for more information
For example: \`center bg-gray-500 mx-2 my-1 rounded-full\`
inline: Apply CSS-classes <b>{value}</b> to the entire container
ifunset: Do not apply extra CSS-classes to the label
types: Dynamic value ; string
ifunset: Do not apply extra CSS-classes to the entire marker
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},pitchAlignment:{description:`question: If the map is pitched, should the icon stay parallel to the screen or to the groundplane?
suggestions: return [{if: "value=canvas", then: "The icon will stay upward and not be transformed as if it sticks to the screen"}, {if: "value=map", then: "The icon will be transformed as if it were painted onto the ground. (Automatically sets rotationAlignment)"}]
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{enum:["canvas","map"],type:"string"}]},rotationAlignment:{description:`question: Should the icon be rotated if the map is rotated?
ifunset: Do not rotate or tilt icons. Always keep the icons straight
suggestions: return [{if: "value=canvas", then: "Never rotate the icon"}, {if: "value=map", then: "If the map is rotated, rotate the icon as well. This gives the impression of an icon that floats perpendicular above the ground."}]
group: expert`,anyOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{enum:["canvas","map"],type:"string"}]}},required:["location"],additionalProperties:!1},default_5:{description:`The LineRenderingConfig gives all details onto how to render a single line of a feature.

This can be used if:

- The feature is a line
- The feature is an area`,type:"object",properties:{color:{description:`question: What color should lines be drawn in?

For an area, this will be the colour of the outside line.
If the value starts with "--", the style of the body element will be queried for the corresponding variable instead

types: dynamic value ; string
title: Line Colour
inline: The line colour always is <b>{value}</b>
type: color`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]},width:{description:`question: How wide should the line be?
The stroke-width for way-elements

types: dynamic value ; string
title: Line width
inline: The line width is <b>{value} pixels</b>
type: pnat
ifunset: Use the default-linewidth of 7 pixels`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:["string","number"]}]},dashArray:{description:`question: Should a dasharray be used to render the lines?
The dasharray defines 'pixels of line, pixels of gap, pixels of line, pixels of gap, ...'. For example, \`5 6\` will be 5 pixels of line followed by a 6 pixel gap.
Cannot be a dynamic property due to a MapLibre limitation (see https://github.com/maplibre/maplibre-gl-js/issues/1235)
ifunset: Ways are rendered with a full line`,type:"string"},lineCap:{description:`question: What form should the line-ending have?
suggestions: return [{if:"value=round",then:"Round endings"}, {if: "value=square", then: "square endings"}, {if: "value=butt", then: "no ending (square ending at the end, without padding)"}]
types: dynamic value ; string
title: Line Cap
ifunset: Use the default value (round ending)`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]},fillColor:{description:`question: What colour should be used as fill colour for polygons?
ifunset: The polygon fill colour will be a more transparent version of the stroke colour
suggestions: return [{if: "value=#00000000", then: "Use a transparent fill (only render the outline)"}]
inline: The fill colour is <b>{value}</b>
types: dynamic value ; string
type: color`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"string"}]},offset:{description:`question: Should the lines be moved (offsetted) with a number of pixels against the geographical lines?
The number of pixels this line should be moved.
Use a positive number to move to the right in the drawing direction or a negative to move to the left (left/right as defined by the drawing direction of the line).

IMPORTANT: MapComplete will already normalize 'key:both:property' and 'key:both' into the corresponding 'key:left' and 'key:right' tagging (same for 'sidewalk=left/right/both' which is rewritten to 'sidewalk:left' and 'sidewalk:right')
This simplifies programming. Refer to the CalculatedTags.md-documentation for more details
ifunset: don't offset lines on the map
inline: Pixel offset by <b>{value}</b> pixels
types: dynamic value ; number
type: int`,anyOf:[{$ref:"#/definitions/MinimalTagRenderingConfigJson"},{type:"number"}]},imageAlongWay:{description:`question: What PNG-image should be shown along the way?

ifunset: no image is shown along the way
suggestions: [{if: "./assets/png/oneway.png", then: "Show a oneway error"}]
type: image`,anyOf:[{type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`},then:{type:"string"}},required:["if","then"]}},{type:"string"}]}},additionalProperties:!1},QuestionableTagRenderingConfigJson:{description:`A QuestionableTagRenderingConfigJson is a single piece of code which converts one ore more tags into a HTML-snippet.
If the desired tags are missing and a question is defined, a question will be shown instead.`,type:"object",properties:{id:{type:"string"},mappings:{description:`Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes

question: What are common options?`,type:"array",items:{$ref:"#/definitions/MappingConfigJson"}},multiAnswer:{description:`If true, use checkboxes instead of radio buttons when asking the question

question: Should a contributor be allowed to select multiple mappings?

iftrue: allow to select multiple mappings
iffalse: only allow to select a single mapping
ifunset: only allow to select a single mapping`,type:"boolean"},freeform:{description:"Allow freeform text input from the user",type:"object",properties:{key:{description:`question: What is the name of the attribute that should be written to?
This is the OpenStreetMap-key that that value will be written to
ifunset: do not offer a freeform textfield as answer option`,type:"string"},type:{description:`question: What is the input type?
The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values
ifunset: use an unconstrained <b>string</b> as input (default)
suggestions: return validators.AllValidators.filter(type => !type.isMeta).map((type) => ({if: "value="+type.name, then: "<b>"+type.name+"</b> "+type.explanation.split("\\n")[0]}))`,type:"string"},placeholder:{description:`question: What placeholder text should be shown in the input-element if there is no input?
A (translated) text that is shown (as gray text) within the textfield
type: translation
group: expert
ifunset: No specific placeholder is set, show the type of the textfield`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},helperArgs:{description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'
group: expert`,type:"array",items:{}},addExtraTags:{description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'
group: expert`,type:"array",items:{type:"string"}},inline:{description:`question: Show the freeform as box within the question?
Instead of showing a full-width text field, the text field will be shown within the rendering of the question.

This combines badly with special input elements, as it'll distort the layout.
ifunset: show the freeform input field full-width
iftrue: show the freeform input field as a small field within the question
group: expert`,type:"boolean"},default:{description:`question: What value should be entered in the text field if no value is set?
This can help people to quickly enter the most common option
ifunset: do not prefill the textfield
group: expert`,type:"string"},invalidValues:{description:`question: What values of the freeform key should be interpreted as 'unknown'?
For example, if a feature has \`shop=yes\`, the question 'what type of shop is this?' should still asked
ifunset: The question will be considered answered if any value is set for the key
group: expert`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]}}},question:{description:`question: What question should be shown to the contributor?

A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well.

ifunset: This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},questionHint:{description:`question: Should some extra information be shown to the contributor, alongside the question?
This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like
ifunset: No extra hint is given`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},editButtonAriaLabel:{description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},labels:{description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer",type:"array",items:{type:"string"}},render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},required:["id"],additionalProperties:!1},"Partial<QuestionableTagRenderingConfigJson>":{type:"object",properties:{id:{type:"string"},mappings:{description:`Allows fixed-tag inputs, shown either as radiobuttons or as checkboxes

question: What are common options?`,type:"array",items:{$ref:"#/definitions/MappingConfigJson"}},multiAnswer:{description:`If true, use checkboxes instead of radio buttons when asking the question

question: Should a contributor be allowed to select multiple mappings?

iftrue: allow to select multiple mappings
iffalse: only allow to select a single mapping
ifunset: only allow to select a single mapping`,type:"boolean"},freeform:{description:"Allow freeform text input from the user",type:"object",properties:{key:{description:`question: What is the name of the attribute that should be written to?
This is the OpenStreetMap-key that that value will be written to
ifunset: do not offer a freeform textfield as answer option`,type:"string"},type:{description:`question: What is the input type?
The type of the text-field, e.g. 'string', 'nat', 'float', 'date',...
See Docs/SpecialInputElements.md and UI/Input/ValidatedTextField.ts for supported values
ifunset: use an unconstrained <b>string</b> as input (default)
suggestions: return validators.AllValidators.filter(type => !type.isMeta).map((type) => ({if: "value="+type.name, then: "<b>"+type.name+"</b> "+type.explanation.split("\\n")[0]}))`,type:"string"},placeholder:{description:`question: What placeholder text should be shown in the input-element if there is no input?
A (translated) text that is shown (as gray text) within the textfield
type: translation
group: expert
ifunset: No specific placeholder is set, show the type of the textfield`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},helperArgs:{description:`Extra parameters to initialize the input helper arguments.
For semantics, see the 'SpecialInputElements.md'
group: expert`,type:"array",items:{}},addExtraTags:{description:`If a value is added with the textfield, these extra tag is addded.
Useful to add a 'fixme=freeform textfield used - to be checked'
group: expert`,type:"array",items:{type:"string"}},inline:{description:`question: Show the freeform as box within the question?
Instead of showing a full-width text field, the text field will be shown within the rendering of the question.

This combines badly with special input elements, as it'll distort the layout.
ifunset: show the freeform input field full-width
iftrue: show the freeform input field as a small field within the question
group: expert`,type:"boolean"},default:{description:`question: What value should be entered in the text field if no value is set?
This can help people to quickly enter the most common option
ifunset: do not prefill the textfield
group: expert`,type:"string"},invalidValues:{description:`question: What values of the freeform key should be interpreted as 'unknown'?
For example, if a feature has \`shop=yes\`, the question 'what type of shop is this?' should still asked
ifunset: The question will be considered answered if any value is set for the key
group: expert`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]}}},question:{description:`question: What question should be shown to the contributor?

A question is presented ot the user if no mapping matches and the 'freeform' key is not set as well.

ifunset: This tagrendering will be shown if it is known, but cannot be edited by the contributor, effectively resutling in a read-only rendering`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},questionHint:{description:`question: Should some extra information be shown to the contributor, alongside the question?
This hint is shown in subtle text under the question.
This can give some extra information on what the answer should ook like
ifunset: No extra hint is given`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},editButtonAriaLabel:{description:`When using a screenreader and selecting the 'edit' button, the current rendered value is read aloud in normal circumstances.
In some rare cases, this is not desirable. For example, if the rendered value is a link to a website, this link can be selected (and will be read aloud).
If the user presses _tab_ again, they'll select the button and have the link read aloud a second time.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},labels:{description:"A list of labels. These are strings that are used for various purposes, e.g. to only include a subset of the tagRenderings when reusing a layer",type:"array",items:{type:"string"}},render:{description:`question: What text should be rendered?

This piece of text will be shown in the infobox.
In this text, values within braces (such as {braced(key)}) are replaced by the corresponding \`value\` in the object.
For example, if the object contains tags \`amenity=school; name=Windy Hill School\`, the render string \`This school is named {name}\` will be shown to the user as \`This school is named Windy Hill School\`

This text will be shown if:
- there is no mapping which matches (or there are no matches)
- no question, no mappings and no 'freeform' is set

Note that this is a HTML-interpreted value, so you can add links as e.g. '&lt;a href='{website}'>{website}&lt;/a>' or include images such as \`This is of type A &lt;br>&lt;img src='typeA-icon.svg' />\`
type: rendered
ifunset: No text is shown if no predefined options match.`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"object",properties:{special:{allOf:[{$ref:"#/definitions/Record<string,string|Record<string,string>>"},{type:"object",properties:{type:{type:"string"}},required:["type"]}]}},required:["special"]},{type:"string"}]},icon:{description:`question: what icon should be shown next to the 'render' value?
An icon shown next to the rendering; typically shown pretty small
This is only shown next to the "render" value
Type: icon
ifunset: No additional icon is shown next to the always shown text`,anyOf:[{type:"object",properties:{path:{description:`The path to the icon
Type: icon`,type:"string"},class:{description:`A hint to mapcomplete on how to render this icon within the mapping.
This is translated to 'mapping-icon-<classtype>', so defining your own in combination with a custom CSS is possible (but discouraged)`,type:"string"}},required:["path"]},{type:"string"}]},condition:{description:`question: When should this item be shown?
type: tag
ifunset: No specific condition set; always show this tagRendering or show this question if unknown

Only show this tagrendering (or ask the question) if the selected object also matches the tags specified as \`condition\`.

This is useful to ask a follow-up question.
For example, within toilets, asking _where_ the diaper changing table is is only useful _if_ there is one.
This can be done by adding \`"condition": "changing_table=yes"\`

A full example would be:
\`\`\`json
    {
      "question": "Where is the changing table located?",
      "render": "The changing table is located at {changing_table:location}",
      "condition": "changing_table=yes",
      "freeform": {
        "key": "changing_table:location",
        "inline": true
      },
      "mappings": [
        {
          "then": "The changing table is in the toilet for women.",
          "if": "changing_table:location=female_toilet"
        },
        {
          "then": "The changing table is in the toilet for men.",
          "if": "changing_table:location=male_toilet"
        },
        {
          "if": "changing_table:location=wheelchair_toilet",
          "then": "The changing table is in the toilet for wheelchair users.",
        },
        {
          "if": "changing_table:location=dedicated_room",
          "then": "The changing table is in a dedicated room. ",
        }
      ],
      "id": "toilet-changing_table:location"
    },
\`\`\``,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},metacondition:{description:`question: When should this item be shown (including special conditions)?
type: tag
ifunset: No specific metacondition set which is evaluated against the <i>usersettings/application state</i>; always show this tagRendering or show this question if unknown

If set, this tag will be evaluated against the _usersettings/application state_ table.
Enable 'show debug info' in user settings to see available options (at the settings-tab).
Note that values with an underscore depicts _application state_ (including metainfo about the user) whereas values without an underscore depict _user settings_`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},description:{description:`A human-readable text explaining what this tagRendering does.
Mostly used for the shared tagrenderings`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},classes:{description:`question: What css-classes should be applied to showing this attribute?

A list of css-classes to apply to the entire tagRendering.
These classes are applied in 'answer'-mode, not in question mode
This is only for advanced users.

Values are split on \` \`  (space)`,type:"string"}},additionalProperties:!1},"default<(string|QuestionableTagRenderingConfigJson|{builtin:string;override:Partial<QuestionableTagRenderingConfigJson>;})[]>":{description:`Rewrites and multiplies the given renderings of type T.

This can be used for introducing many similar questions automatically,
which also makes translations easier.

(Note that the key does _not_ need to be wrapped in {}.
However, we recommend to use them if the key is used in a translation, as missing keys will be picked up and warned for by the translation scripts)

For example:

\`\`\`
{
    rewrite: {
        sourceString: ["key", "a|b|c"],
        into: [
            ["X", 0]
            ["Y", 1],
            ["Z", 2]
        ],
        renderings: [{
            "key":"a|b|c"
        }]
    }
}
\`\`\`
will result in _three_ copies (as the values to rewrite into have three values, namely:

[
  {
  # The first pair: key --> X, a|b|c --> 0
      "X": 0
  },
  {
      "Y": 1
  },
  {
      "Z": 2
  }

]`,type:"object",properties:{rewrite:{type:"object",properties:{sourceString:{type:"array",items:{type:"string"}},into:{type:"array",items:{type:"array",items:{}}}},required:["into","sourceString"]},subexpand:{$ref:"#/definitions/Record<string,string[]>"},renderings:{anyOf:[{type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{type:"string"}]}},{type:"array",items:{type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{builtin:{type:"string"},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{type:"string"}]}}}]}},required:["renderings","rewrite"],additionalProperties:!1},default_1:{type:"object",properties:{id:{description:"An id/name for this filter, used to set the URL parameters",type:"string"},options:{description:`The options for a filter
If there are multiple options these will be a list of radio buttons
If there is only one option this will be a checkbox
Filtering is done based on the given osmTags that are compared to the objects in that layer.

An example which searches by name:

\`\`\`
{
      "id": "shop-name",
      "options": [
        {
          "fields": [
            {
              "name": "search",
              "type": "string"
            }
          ],
          "osmTags": "name~i~.*{search}.*",
          "question": {
            "en": "Only show shops with name {search}",
          }
        }
      ]
    }
    \`\`\``,type:"array",items:{type:"object",properties:{question:{},osmTags:{description:`The main representation of Tags.
See https://github.com/pietervdvn/MapComplete/blob/develop/Docs/Tags_format.md for more documentation

type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},default:{type:"boolean"},fields:{type:"array",items:{type:"object",properties:{name:{description:'If name is `search`, use  "_first_comment~.*{search}.*" as osmTags',type:"string"},type:{type:"string"}},required:["name"]}}},required:["question"]}},"#":{description:'Used for comments or to disable a check\n\n"ignore-possible-duplicate": disables a check in `DetectDuplicateFilters` which complains that a filter can be replaced by a filter from the `filters`-library-layer',type:"string"}},required:["id","options"],additionalProperties:!1},DeleteConfigJson:{type:"object",properties:{neededChangesets:{description:`*
By default, the contributor needs 20 previous changesets to delete points edited by others.
For some small features (e.g. bicycle racks) this is too much and this requirement can be lowered or dropped, which can be done here.

type: nat
question: How many changesets must a contributor have before being allowed to delete a point?`,type:"number"},extraDeleteReasons:{description:`*
By default, three reasons to delete a point are shown:

- The point does not exist anymore
- The point was a testing point
- THe point could not be found

However, for some layers, there might be different or more specific reasons for deletion which can be user friendly to set, e.g.:

- the shop has closed
- the climbing route has been closed of for nature conservation reasons
- ...

These reasons can be stated here and will be shown in the list of options the user can choose from`,type:"array",items:{type:"object",properties:{explanation:{description:`The text that will be shown to the user as option for why this point does not exist anymore.
Note that the most common reasons (test point, does not exist anymore, cannot be found) are already offered by default

question: For what extra reason might this feature be removed in real-life?`},changesetMessage:{description:`The text that will be uploaded into the changeset or will be used in the fixme in case of a soft deletion
Should be a few words, in english

question: What should be added to the changeset as delete reason?`,type:"string"}},required:["changesetMessage","explanation"]}},nonDeleteMappings:{description:`In some cases, a (starting) contributor might wish to delete a feature even though deletion is not appropriate.
(The most relevant case are small paths running over private property. These should be marked as 'private' instead of deleted, as the community might trace the path again from aerial imagery, gettting us back to the original situation).

By adding a 'nonDeleteMapping', an option can be added into the list which will retag the feature.
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!`,type:"array",items:{type:"object",properties:{if:{$ref:"#/definitions/TagConfigJson",description:`The tags that will be given to the object.
This must remove tags so that the 'source/osmTags' won't match anymore

question: What tags should be applied to the object?`},then:{description:`The human explanation for the options

question: What text should be shown to the contributor for this reason?`}},required:["if","then"]}},softDeletionTags:{description:`In some cases, the contributor is not allowed to delete the current feature (e.g. because it isn't a point, the point is referenced by a relation or the user isn't experienced enough).
To still offer the user a 'delete'-option, the feature is retagged with these tags. This is a soft deletion, as the point isn't actually removed from OSM but rather marked as 'disused'
It is important that the feature will be retagged in such a way that it won't be picked up by the layer anymore!

Example (note that "amenity=" erases the 'amenity'-key alltogether):

\`\`\`
{
    "and": ["disussed:amenity=public_bookcase", "amenity="]
}
\`\`\`

or (notice the use of the ':='-tag to copy the old value of 'shop=*' into 'disused:shop='):

\`\`\`
{
    "and": ["disused:shop:={shop}", "shop="]
}
\`\`\`

question: If a hard delete is not possible, what tags should be applied to mark this feature as deleted?
type: tag`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},omitDefaultDeleteReasons:{description:`Set this flag if the default delete reasons should be omitted from the dialog.
This requires at least one extraDeleteReason or nonDeleteMapping

question: Should the default delete reasons be hidden?
iftrue: Hide the default delete reasons
iffalse: Show the default delete reasons
ifunset: Show the default delete reasons (default behaviour)`,anyOf:[{type:"array",items:{type:"string"}},{type:"boolean"}]}},additionalProperties:!1},default_3:{type:"object",properties:{enableImproveAccuracy:{description:`question: Should moving this type of point to improve the accuracy be allowed?
iftrue: This point can be moved to improve the accuracy
ifunset: (default) This point can be moved to improve the accuracy
iffalse: This point cannot be moved to improve the accuracy`,type:"boolean"},enableRelocation:{description:"question: Should moving this type of point due to a relocation be allowed?\n\nThis will erase the attributes `addr:street`, `addr:housenumber`, `addr:city` and `addr:postcode`\n\niftrue: This type of point can be moved due to a relocation (and will remove address information when this is done)\nifunset: (default) This type of point can be moved due to a relocation (and will remove address information when this is done)\niffalse: This type of point cannot be moved due to a relocation",type:"boolean"}},additionalProperties:!1},default_2:{description:`In some cases, a value is represented in a certain unit (such as meters for heigt/distance/..., km/h for speed, ...)

Sometimes, multiple denominations are possible (e.g. km/h vs mile/h; megawatt vs kilowatt vs gigawatt for power generators, ...)

This brings in some troubles, as there are multiple ways to write it (no denomitation, 'm' vs 'meter' 'metre', ...)

Not only do we want to write consistent data to OSM, we also want to present this consistently to the user.
This is handled by defining units.

# Rendering

To render a value with long (human) denomination, use {canonical(key)}

# Usage

First of all, you define which keys have units applied, for example:

\`\`\`
units: [
 appliesTo: ["maxspeed", "maxspeed:hgv", "maxspeed:bus"]
 applicableUnits: [
     ...
 ]
]
\`\`\`

ApplicableUnits defines which is the canonical extension, how it is presented to the user, ...:

\`\`\`
applicableUnits: [
{
    canonicalDenomination: "km/h",
    alternativeDenomination: ["km/u", "kmh", "kph"]
    default: true,
    human: {
        en: "kilometer/hour",
        nl: "kilometer/uur"
    },
    humanShort: {
        en: "km/h",
        nl: "km/u"
    }
},
{
    canoncialDenomination: "mph",
    ... similar for miles an hour ...
}
]
\`\`\`


If this is defined, then every key which the denominations apply to (\`maxspeed\`, \`maxspeed:hgv\` and \`maxspeed:bus\`) will be rewritten at the metatagging stage:
every value will be parsed and the canonical extension will be added add presented to the other parts of the code.

Also, if a freeform text field is used, an extra dropdown with applicable denominations will be given`,type:"object",properties:{quantity:{description:"What is quantified? E.g. 'speed', 'length' (including width, diameter, ...), 'electric tension', 'electric current', 'duration'",type:"string"},appliesToKey:{description:"Every key from this list will be normalized.\n\nTo render the value properly (with a human readable denomination), use `{canonical(<key>)}`",type:"array",items:{type:"string"}},eraseInvalidValues:{description:`If set, invalid values will be erased in the MC application (but not in OSM of course!)
Be careful with setting this`,type:"boolean"},applicableUnits:{description:`The possible denominations for this unit.
For length, denominations could be "meter", "kilometer", "miles", "foot"`,type:"array",items:{$ref:"#/definitions/DenominationConfigJson"}},defaultInput:{description:`In some cases, the default denomination is not the most user friendly to input.
E.g., when measuring kerb heights, it is illogical to ask contributors to input an amount in meters.

When a default input method should be used, this can be specified by setting the canonical denomination here, e.g.
\`defaultInput: "cm"\`. This must be a denomination which appears in the applicableUnits`,type:"string"}},required:["applicableUnits"],additionalProperties:!1},"Record<string,string|{quantity:string;denominations:string[];canonical?:string|undefined;inverted?:boolean|undefined;}>":{type:"object",additionalProperties:!1},default:{type:"object",properties:{icon:{description:`question: What icon should be shown in the link button?
ifunset: do not show an icon
type: icon`,type:"string"},text:{description:`question: What text should be shown in the link icon?

Note that {lat},{lon},{zoom}, {language} and {theme} will be replaced

ifunset: do not show a text`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},href:{description:`question: if clicked, what webpage should open?
Note that {lat},{lon},{zoom}, {language} and {theme} will be replaced

type: url`,type:"string"},newTab:{description:`question: Should the link open in a new tab?
iftrue: Open in a new tab
iffalse: do not open in a new tab
ifunset: do not open in a new tab`,type:"boolean"},requirements:{description:`question: When should the extra button be shown?
suggestions: return [{if: "value=iframe", then: "When shown in an iframe"}, {if: "value=no-iframe", then: "When shown as stand-alone webpage"}, {if: "value=welcome-message", then: "When the welcome messages are enabled"}, {if: "value=iframe", then: "When the welcome messages are disabled"}]`,type:"array",items:{enum:["iframe","no-iframe","no-welcome-message","welcome-message"],type:"string"}}},required:["href"],additionalProperties:!1},LayerConfigJson:{description:"Configuration for a single layer",type:"object",properties:{id:{description:`question: What is the identifier of this layer?

This should be a simple, lowercase, human readable string that is used to identify the layer.
 A good ID is:
 - a noun
 - written in singular
 - describes the object
 - in english
 - only has lowercase letters, numbers or underscores. Do not use a space or a dash

type: id
group: Basic`,type:"string"},name:{description:`Used in the layer control panel to toggle a layer on and of.

ifunset: This will hide the layer in the layer control, making it not filterable and not toggleable

group: Basic
question: What is the name of this layer?`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},description:{description:`A description for the features shown in this layer.
This often resembles the introduction of the wiki.osm.org-page for this feature.

group: Basic
question: How would you describe the features that are shown on this layer?`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},source:{description:`Question: Where should the data be fetched from?
title: Data Source

This determines where the data for the layer is fetched: from OSM or from an external geojson dataset.

If no 'geojson' is defined, data will be fetched from overpass and the OSM-API.

Every source _must_ define which tags _must_ be present in order to be picked up.

Note: a source must always be defined. 'special' is only allowed if this is a builtin-layer

types: Load data with specific tags from OpenStreetMap ; Load data from an external geojson source ;
typesdefault: 0
group: Basic`,anyOf:[{type:"object",properties:{osmTags:{$ref:"#/definitions/TagConfigJson",description:`question: Which tags must be present on the feature to show it in this layer?
Every source must set which tags have to be present in order to load the given layer.`}},required:["osmTags"]},{type:"object",properties:{geoJson:{description:`The actual source of the data to load, if loaded via geojson.

# A single geojson-file
source: {geoJson: "https://my.source.net/some-geo-data.geojson"}
 fetches a geojson from a third party source

# A tiled geojson source
source: {geoJson: "https://my.source.net/some-tile-geojson-{layer}-{z}-{x}-{y}.geojson", geoJsonZoomLevel: 14}
 to use a tiled geojson source. The web server must offer multiple geojsons. {z}, {x} and {y} are substituted by the location; {layer} is substituted with the id of the loaded layer

Some API's use a BBOX instead of a tile, this can be used by specifying {y_min}, {y_max}, {x_min} and {x_max}

question: What is the URL of the geojson?
type: url`,type:"string"},geoJsonZoomLevel:{description:`To load a tiled geojson layer, set the zoomlevel of the tiles

question: If using a tiled geojson, what is the zoomlevel of the tiles?
ifunset: This is not a tiled geojson`,type:"number"},mercatorCrs:{description:`Some API's use a mercator-projection (EPSG:900913) instead of WGS84. Set the flag \`mercatorCrs: true\`  in the source for this

question: Does this geojson use  EPSG:900913 instead of WGS84 as projection?
iftrue: This geojson uses EPSG:900913 instead of WGS84
ifunset: This geojson uses WGS84 just like most geojson (default)`,type:"boolean"},idKey:{description:`Some API's have an id-field, but give it a different name.
Setting this key will rename this field into 'id'

ifunset: An id with key \`id\` will be assigned automatically if no attribute \`id\` is set
inline: This geojson uses <b>{value}</b> as attribute to set the id
question: What is the name of the attribute containing the ID of the object?`,type:"string"}},required:["geoJson"]},{enum:["special","special:library"],type:"string"}]},calculatedTags:{description:`A list of extra tags to calculate, specified as "keyToAssignTo=javascript-expression".
There are a few extra functions available. Refer to <a>Docs/CalculatedTags.md</a> for more information
The functions will be run in order, e.g.
[
 "_max_overlap_m2=Math.max(...feat.overlapsWith("someOtherLayer").map(o => o.overlap))
 "_max_overlap_ratio=Number(feat._max_overlap_m2)/feat.area
]

The specified tags are evaluated lazily. E.g. if a calculated tag is only used in the popup (e.g. the number of nearby features),
the expensive calculation will only be performed then for that feature. This avoids clogging up the contributors PC when all features are loaded.

If a tag has to be evaluated strictly, use ':=' instead:

[
"_some_key:=some_javascript_expression"
]

See the full documentation on [https://github.com/pietervdvn/MapComplete/blob/master/Docs/CalculatedTags.md]

group: expert
question: What extra attributes should be calculated with javascript?`,type:"array",items:{type:"string"}},isShown:{description:`If set, only features matching this extra tag will be shown.
This is useful to hide certain features from view based on a calculated tag or if the features are provided by a different layer.

question: What other tags should features match for being shown?
group: advanced
ifunset: all features which match the 'source'-specification are shown.`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},isCounted:{description:`question: should this layer be included in the summary counts?

The layer server can give summary counts for a tile.
This should however be disabled for some layers, e.g. because there are too many features (walls_and_buildings) or because the count is irrelevant.

ifunset: Do count
iffalse: Do not include the counts
iftrue: Do include the count`,type:"boolean"},minzoom:{description:`The minimum needed zoomlevel required to start loading and displaying the data.
This can be used to only show common features (e.g. a bicycle parking) only when the map is zoomed in very much (17).
This prevents cluttering the map with thousands of parkings if one is looking to an entire city.

Default: 0
group: Basic
type: nat
question: At what zoom level should features of the layer be shown?
ifunset: Always load this layer, even if the entire world is in view.`,type:"number"},shownByDefault:{description:`Indicates if this layer is shown by default;
can be used to hide a layer from start, or to load the layer but only to show it when appropriate (e.g. for advanced users)

question: Should this layer be enabled when opening the map for the first time?
iftrue: the layer is enabled when opening the map
iffalse: the layer is hidden until the contributor enables it. (If the filter-popup is disabled, this might never get enabled nor loaded)
default: true
group: advanced`,type:"boolean"},minzoomVisible:{description:`The zoom level at which point the data is hidden again
Default: 100 (thus: always visible

group: expert`,type:"number"},title:{description:`question: Edit the popup title
The title shown in a popup for elements of this layer.

group: title
types: use a fixed translation ; Use a dynamic tagRendering ; hidden
typesdefault: 1
type: translation
inline: {translated{value}}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},popupInFloatover:{description:`Question: Should the information for this layer be shown in the sidebar or in a splash screen?

If set, open the selectedElementView in a floatOver instead of on the right.

iftrue: show the infobox in the splashscreen floating over the entire UI; hide the title bar
iffalse: show the infobox in a sidebar on the right
suggestions: return [{if: "value=title", then: "Show in a floatover and show the title bar"}]
group: advanced
default: sidebar`,type:["string","boolean"]},titleIcons:{description:`Small icons shown next to the title.
If not specified, the OsmLink and wikipedia links will be used by default.
Use an empty array to hide them.
Note that "defaults" will insert all the default titleIcons (which are added automatically)

Use \`auto:<tagrenderingId>\` to automatically create an icon based on a tagRendering which has icons

Type: icon[]
group: infobox`,anyOf:[{type:"array",items:{anyOf:[{allOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"}}}]},{type:"string"}]}},{type:"array",items:[{type:"string",enum:["defaults"]}],minItems:1,maxItems:1}]},pointRendering:{description:`Creates points to render on the map.
This can render points for point-objects, lineobjects or areaobjects; use 'location' to indicate where it should be rendered

group: pointrendering`,type:"array",items:{$ref:"#/definitions/default_4"}},lineRendering:{description:`Creates lines and areas to render on the map
group: linerendering`,type:"array",items:{$ref:"#/definitions/default_5"}},passAllFeatures:{description:`If set, this layer will pass all the features it receives onto the next layer.
This is ideal for decoration, e.g. directions on cameras
iftrue: Make the features from this layer also available to the other layer; might result in this object being rendered by multiple layers
iffalse: normal behaviour: don't pass features allong
question: should this layer pass features to the next layers?
group: expert`,type:"boolean"},doNotDownload:{description:`If set, this layer will not query overpass; but it'll still match the tags above which are by chance returned by other layers.
Works well together with 'passAllFeatures', to add decoration
The opposite of \`forceLoad\`

iftrue: Do not attempt to query the data for this layer from overpass/the OSM API
iffalse: download the data as usual
group: expert
question: Should this layer be downloaded or is the data provided by a different layer (which has 'passAllFeatures'-set)?
default: false`,type:"boolean"},forceLoad:{description:`Advanced option - might be set by the theme compiler

If true, this data will _always_ be loaded, even if the theme is disabled by a filter or hidden.
The opposite of \`doNotDownload\`

question: Should this layer be forcibly loaded?
ifftrue: always download this layer, even if it is disabled
iffalse: only download data for this layer when needed (default)
default: false
group: expert`,type:"boolean"},presets:{description:`<div class='flex'>
    <div>
Presets for this layer.

A preset consists of one or more attributes (tags), a title and optionally a description and optionally example images.

When the contributor wishes to add a point to OpenStreetMap, they'll:

1. Press the 'add new point'-button
2. Choose a preset from the list of all presets
3. Confirm the choice. In this step, the \`description\` (if set) and \`exampleImages\` (if given) will be shown
4. Confirm the location
5. A new point will be created with the attributes that were defined in the preset

If no presets are defined, the button which invites to add a new preset will not be shown.
</div>
<video controls autoplay muted src='./Docs/Screenshots/AddNewItemScreencast.webm' class='w-64'/>
</div>

group: presets`,type:"array",items:{type:"object",properties:{title:{description:`The title - shown on the 'add-new'-button.

This should include the article of the noun, e.g. 'a hydrant', 'a bicycle pump'.
This text will be inserted into \`Add {category} here\`, becoming \`Add a hydrant here\`.

Do _not_ indicate 'new': 'add a new shop here' is incorrect, as the shop might have existed forever, it could just be unmapped!

question: What is the word to describe this object?
inline: Add {translated(value)::font-bold} here`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},tags:{description:`A single tag (encoded as <code>key=value</code>) out of all the tags to add onto the newly created point.
Note that the icon in the UI will be chosen automatically based on the tags provided here.

question: What tag should be added to the new object?
type: simple_tag
typeHelper: uploadableOnly`,type:"array",items:{type:"string"}},description:{description:`An extra explanation of what the feature is, if it is not immediately clear from the title alone.

The _first sentence_ of the description is shown on the button of the \`add\` menu.
The full description is shown in the confirmation dialog.

(The first sentence is until the first '.'-character in the description)

question: How would you describe this feature?
ifunset: No extra description is given. This can be used to further explain the preset`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},exampleImages:{description:`The URL of an example image which shows a real-life example of what such a feature might look like.

Type: image
question: What is the URL of an image showing such a feature?`,type:"array",items:{type:"string"}},snapToLayer:{description:`question: Should the created point be snapped to a line layer?

If specified, these layers will be shown in the precise location picker  and the new point will be snapped towards it.
For example, this can be used to snap against \`walls_and_buildings\` (e.g. to attach a defibrillator, an entrance, an artwork, ... to the wall)
or to snap an obstacle (such as a bollard) to the \`cycleways_and_roads\`.

suggestions: return Array.from(layers.keys()).map(key => ({if: "value="+key, then: key+" - "+layers.get(key).description}))`,type:"array",items:{type:"string"}},maxSnapDistance:{description:`question: What is the maximum distance in the location-input that a point can be moved to be snapped to a way?

inline: a point is snapped if the location input is at most <b>{value}m</b> away from an object

If specified, a new point will only be snapped if it is within this range.
If further away, it'll be placed in the center of the location input
Distance in meter

ifunset: Do not snap to a layer`,type:"number"}},required:["tags","title"]}},tagRenderings:{description:`question: Edit this way this attributed is displayed or queried

A tag rendering is a block that either shows the known value or asks a question.

Refer to the class \`TagRenderingConfigJson\` to see the possibilities.

Note that we can also use a string here - where the string refers to a tag rendering defined in \`assets/questions/questions.json\`,
where a few very general questions are defined e.g. website, phone number, ...
Furthermore, _all_ the questions of another layer can be reused with \`otherlayer.*\`
If you need only a single of the tagRenderings, use \`otherlayer.tagrenderingId\`
If one or more questions have a 'group' or 'label' set, select all the entries with the corresponding group or label with \`otherlayer.*group\`
Remark: if a tagRendering is 'lent' from another layer, the 'source'-tags are copied and added as condition.
If they are not wanted, remove them with an override

A special value is 'questions', which indicates the location of the questions box. If not specified, it'll be appended to the bottom of the featureInfobox.

At last, one can define a group of renderings where parts of all strings will be replaced by multiple other strings.
This is mainly create questions for a 'left' and a 'right' side of the road.
These will be grouped and questions will be asked together

type: tagrendering[]
group: tagrenderings`,type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"},builtin:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{allOf:[{$ref:"#/definitions/default<(string|QuestionableTagRenderingConfigJson|{builtin:string;override:Partial<QuestionableTagRenderingConfigJson>;})[]>"},{type:"object",properties:{id:{type:"string"}},required:["id"]}]},{type:"string"}]}},filter:{description:`All the extra questions for filtering.
If a string is given, mapComplete will search in
1. The tagrenderings for a match on ID and use the mappings as options
2. search 'filters.json' for the appropriate filter or
3. will try to parse it as \`layername.filterid\` and us that one.


group: filters`,anyOf:[{type:"array",items:{anyOf:[{$ref:"#/definitions/default_1"},{type:"string"}]}},{type:"object",properties:{sameAs:{type:"string"}},required:["sameAs"]}]},deletion:{description:`This block defines under what circumstances the delete dialog is shown for objects of this layer.
If set, a dialog is shown to the user to (soft) delete the point.
The dialog is built to be user friendly and to prevent mistakes.
If deletion is not possible, the dialog will hide itself and show the reason of non-deletability instead.

To configure, the following values are possible:

- false: never ever show the delete button
- true: show the default delete button
- undefined: use the mapcomplete default to show deletion or not. Currently, this is the same as 'false' but this will change in the future
- or: a hash with options (see below)

### The delete dialog



#### Hard deletion if enough experience

A feature can only be deleted from OpenStreetMap by mapcomplete if:

- It is a node
- No ways or relations use the node
- The logged-in user has enough experience OR the user is the only one to have edited the point previously
- The logged-in user has no unread messages (or has a ton of experience)
- The user did not select one of the 'non-delete-options' (see below)

In all other cases, a 'soft deletion' is used.

#### Soft deletion

A 'soft deletion' is when the point isn't deleted fromOSM but retagged so that it'll won't how up in the mapcomplete theme anymore.
This makes it look like it was deleted, without doing damage. A fixme will be added to the point.

Note that a soft deletion is _only_ possible if these tags are provided by the theme creator, as they'll be different for every theme

##### No-delete options

In some cases, the contributor might want to delete something for the wrong reason (e.g. someone who wants to have a path removed "because the path is on their private property").
However, the path exists in reality and should thus be on OSM - otherwise the next contributor will pass by and notice "hey, there is a path missing here! Let me redraw it in OSM!)

The correct approach is to retag the feature in such a way that it is semantically correct *and* that it doesn't show up on the theme anymore.
A no-delete option is offered as 'reason to delete it', but secretly retags.

group: editing
types: Use an advanced delete configuration ; boolean
iftrue: Allow deletion
iffalse: Do not allow deletion
ifunset: Do not allow deletion`,anyOf:[{$ref:"#/definitions/DeleteConfigJson"},{type:"boolean"}]},allowMove:{description:`Indicates if a point can be moved and why.

A feature can be moved by MapComplete if:

- It is a point
- The point is _not_ part of a way or a a relation.

types: use an advanced move configuration ; boolean
group: editing
question: Is deleting a point allowed?
iftrue: Allow contributors to move a point (for accuracy or a relocation)
iffalse: Don't allow contributors to move points
ifunset: Don't allow contributors to move points (default)`,anyOf:[{$ref:"#/definitions/default_3"},{type:"boolean"}]},allowSplit:{description:`If set, a 'split this way' button is shown on objects rendered as LineStrings, e.g. highways.

If the way is part of a relation, MapComplete will attempt to update this relation as well
question: Should the contributor be able to split ways using this layer?
iftrue: enable the 'split-roads'-component
iffalse: don't enable the split-roads component
ifunset: don't enable the split-roads component
group: editing`,type:"boolean"},units:{description:'Either a list with [{"key": "unitname", "key2": {"quantity": "unitname", "denominations": ["denom", "denom"]}}]\n\nUse `"inverted": true` if the amount should be _divided_ by the denomination, e.g. for charge over time (`5/day`)',type:"array",items:{anyOf:[{$ref:"#/definitions/default_2"},{$ref:"#/definitions/Record<string,string|{quantity:string;denominations:string[];canonical?:string|undefined;inverted?:boolean|undefined;}>"}]}},syncSelection:{description:`If set, synchronizes whether or not this layer is enabled.

group: advanced
question: Should enabling/disabling the layer be saved (locally or in the cloud)?
suggestions: return [{if: "value=no", then: "Don't save, always revert to the default"}, {if: "value=local", then: "Save selection in local storage"}, {if: "value=theme-only", then: "Save the state in the OSM-usersettings, but apply on this theme only (default)"}, {if: "value=global", then: "Save in OSM-usersettings and toggle on _all_ themes using this layer"}]`,enum:["global","local","no","theme-only"],type:"string"},"#":{description:`Used for comments and/or to disable some checks

no-question-hint-check: disables a check in MiscTagRenderingChecks which complains about 'div', 'span' or 'class=subtle'-HTML elements in the tagRendering

group: hidden`,type:"string"},fullNodeDatabase:{description:`_Set automatically by MapComplete, please ignore_

group: hidden`,type:"boolean"}},required:["id","pointRendering","source"],additionalProperties:!1},"Partial<LayerConfigJson>":{type:"object",properties:{id:{description:`question: What is the identifier of this layer?

This should be a simple, lowercase, human readable string that is used to identify the layer.
 A good ID is:
 - a noun
 - written in singular
 - describes the object
 - in english
 - only has lowercase letters, numbers or underscores. Do not use a space or a dash

type: id
group: Basic`,type:"string"},name:{description:`Used in the layer control panel to toggle a layer on and of.

ifunset: This will hide the layer in the layer control, making it not filterable and not toggleable

group: Basic
question: What is the name of this layer?`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},description:{description:`A description for the features shown in this layer.
This often resembles the introduction of the wiki.osm.org-page for this feature.

group: Basic
question: How would you describe the features that are shown on this layer?`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},source:{description:`Question: Where should the data be fetched from?
title: Data Source

This determines where the data for the layer is fetched: from OSM or from an external geojson dataset.

If no 'geojson' is defined, data will be fetched from overpass and the OSM-API.

Every source _must_ define which tags _must_ be present in order to be picked up.

Note: a source must always be defined. 'special' is only allowed if this is a builtin-layer

types: Load data with specific tags from OpenStreetMap ; Load data from an external geojson source ;
typesdefault: 0
group: Basic`,anyOf:[{type:"object",properties:{osmTags:{$ref:"#/definitions/TagConfigJson",description:`question: Which tags must be present on the feature to show it in this layer?
Every source must set which tags have to be present in order to load the given layer.`}},required:["osmTags"]},{type:"object",properties:{geoJson:{description:`The actual source of the data to load, if loaded via geojson.

# A single geojson-file
source: {geoJson: "https://my.source.net/some-geo-data.geojson"}
 fetches a geojson from a third party source

# A tiled geojson source
source: {geoJson: "https://my.source.net/some-tile-geojson-{layer}-{z}-{x}-{y}.geojson", geoJsonZoomLevel: 14}
 to use a tiled geojson source. The web server must offer multiple geojsons. {z}, {x} and {y} are substituted by the location; {layer} is substituted with the id of the loaded layer

Some API's use a BBOX instead of a tile, this can be used by specifying {y_min}, {y_max}, {x_min} and {x_max}

question: What is the URL of the geojson?
type: url`,type:"string"},geoJsonZoomLevel:{description:`To load a tiled geojson layer, set the zoomlevel of the tiles

question: If using a tiled geojson, what is the zoomlevel of the tiles?
ifunset: This is not a tiled geojson`,type:"number"},mercatorCrs:{description:`Some API's use a mercator-projection (EPSG:900913) instead of WGS84. Set the flag \`mercatorCrs: true\`  in the source for this

question: Does this geojson use  EPSG:900913 instead of WGS84 as projection?
iftrue: This geojson uses EPSG:900913 instead of WGS84
ifunset: This geojson uses WGS84 just like most geojson (default)`,type:"boolean"},idKey:{description:`Some API's have an id-field, but give it a different name.
Setting this key will rename this field into 'id'

ifunset: An id with key \`id\` will be assigned automatically if no attribute \`id\` is set
inline: This geojson uses <b>{value}</b> as attribute to set the id
question: What is the name of the attribute containing the ID of the object?`,type:"string"}},required:["geoJson"]},{enum:["special","special:library"],type:"string"}]},calculatedTags:{description:`A list of extra tags to calculate, specified as "keyToAssignTo=javascript-expression".
There are a few extra functions available. Refer to <a>Docs/CalculatedTags.md</a> for more information
The functions will be run in order, e.g.
[
 "_max_overlap_m2=Math.max(...feat.overlapsWith("someOtherLayer").map(o => o.overlap))
 "_max_overlap_ratio=Number(feat._max_overlap_m2)/feat.area
]

The specified tags are evaluated lazily. E.g. if a calculated tag is only used in the popup (e.g. the number of nearby features),
the expensive calculation will only be performed then for that feature. This avoids clogging up the contributors PC when all features are loaded.

If a tag has to be evaluated strictly, use ':=' instead:

[
"_some_key:=some_javascript_expression"
]

See the full documentation on [https://github.com/pietervdvn/MapComplete/blob/master/Docs/CalculatedTags.md]

group: expert
question: What extra attributes should be calculated with javascript?`,type:"array",items:{type:"string"}},isShown:{description:`If set, only features matching this extra tag will be shown.
This is useful to hide certain features from view based on a calculated tag or if the features are provided by a different layer.

question: What other tags should features match for being shown?
group: advanced
ifunset: all features which match the 'source'-specification are shown.`,anyOf:[{$ref:"#/definitions/{and:TagConfigJson[];}"},{$ref:"#/definitions/{or:TagConfigJson[];}"},{type:"string"}]},isCounted:{description:`question: should this layer be included in the summary counts?

The layer server can give summary counts for a tile.
This should however be disabled for some layers, e.g. because there are too many features (walls_and_buildings) or because the count is irrelevant.

ifunset: Do count
iffalse: Do not include the counts
iftrue: Do include the count`,type:"boolean"},minzoom:{description:`The minimum needed zoomlevel required to start loading and displaying the data.
This can be used to only show common features (e.g. a bicycle parking) only when the map is zoomed in very much (17).
This prevents cluttering the map with thousands of parkings if one is looking to an entire city.

Default: 0
group: Basic
type: nat
question: At what zoom level should features of the layer be shown?
ifunset: Always load this layer, even if the entire world is in view.`,type:"number"},shownByDefault:{description:`Indicates if this layer is shown by default;
can be used to hide a layer from start, or to load the layer but only to show it when appropriate (e.g. for advanced users)

question: Should this layer be enabled when opening the map for the first time?
iftrue: the layer is enabled when opening the map
iffalse: the layer is hidden until the contributor enables it. (If the filter-popup is disabled, this might never get enabled nor loaded)
default: true
group: advanced`,type:"boolean"},minzoomVisible:{description:`The zoom level at which point the data is hidden again
Default: 100 (thus: always visible

group: expert`,type:"number"},title:{description:`question: Edit the popup title
The title shown in a popup for elements of this layer.

group: title
types: use a fixed translation ; Use a dynamic tagRendering ; hidden
typesdefault: 1
type: translation
inline: {translated{value}}`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{$ref:"#/definitions/TagRenderingConfigJson"},{type:"string"}]},popupInFloatover:{description:`Question: Should the information for this layer be shown in the sidebar or in a splash screen?

If set, open the selectedElementView in a floatOver instead of on the right.

iftrue: show the infobox in the splashscreen floating over the entire UI; hide the title bar
iffalse: show the infobox in a sidebar on the right
suggestions: return [{if: "value=title", then: "Show in a floatover and show the title bar"}]
group: advanced
default: sidebar`,type:["string","boolean"]},titleIcons:{description:`Small icons shown next to the title.
If not specified, the OsmLink and wikipedia links will be used by default.
Use an empty array to hide them.
Note that "defaults" will insert all the default titleIcons (which are added automatically)

Use \`auto:<tagrenderingId>\` to automatically create an icon based on a tagRendering which has icons

Type: icon[]
group: infobox`,anyOf:[{type:"array",items:{anyOf:[{allOf:[{$ref:"#/definitions/TagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"}}}]},{type:"string"}]}},{type:"array",items:[{type:"string",enum:["defaults"]}],minItems:1,maxItems:1}]},pointRendering:{description:`Creates points to render on the map.
This can render points for point-objects, lineobjects or areaobjects; use 'location' to indicate where it should be rendered

group: pointrendering`,type:"array",items:{$ref:"#/definitions/default_4"}},lineRendering:{description:`Creates lines and areas to render on the map
group: linerendering`,type:"array",items:{$ref:"#/definitions/default_5"}},passAllFeatures:{description:`If set, this layer will pass all the features it receives onto the next layer.
This is ideal for decoration, e.g. directions on cameras
iftrue: Make the features from this layer also available to the other layer; might result in this object being rendered by multiple layers
iffalse: normal behaviour: don't pass features allong
question: should this layer pass features to the next layers?
group: expert`,type:"boolean"},doNotDownload:{description:`If set, this layer will not query overpass; but it'll still match the tags above which are by chance returned by other layers.
Works well together with 'passAllFeatures', to add decoration
The opposite of \`forceLoad\`

iftrue: Do not attempt to query the data for this layer from overpass/the OSM API
iffalse: download the data as usual
group: expert
question: Should this layer be downloaded or is the data provided by a different layer (which has 'passAllFeatures'-set)?
default: false`,type:"boolean"},forceLoad:{description:`Advanced option - might be set by the theme compiler

If true, this data will _always_ be loaded, even if the theme is disabled by a filter or hidden.
The opposite of \`doNotDownload\`

question: Should this layer be forcibly loaded?
ifftrue: always download this layer, even if it is disabled
iffalse: only download data for this layer when needed (default)
default: false
group: expert`,type:"boolean"},presets:{description:`<div class='flex'>
    <div>
Presets for this layer.

A preset consists of one or more attributes (tags), a title and optionally a description and optionally example images.

When the contributor wishes to add a point to OpenStreetMap, they'll:

1. Press the 'add new point'-button
2. Choose a preset from the list of all presets
3. Confirm the choice. In this step, the \`description\` (if set) and \`exampleImages\` (if given) will be shown
4. Confirm the location
5. A new point will be created with the attributes that were defined in the preset

If no presets are defined, the button which invites to add a new preset will not be shown.
</div>
<video controls autoplay muted src='./Docs/Screenshots/AddNewItemScreencast.webm' class='w-64'/>
</div>

group: presets`,type:"array",items:{type:"object",properties:{title:{description:`The title - shown on the 'add-new'-button.

This should include the article of the noun, e.g. 'a hydrant', 'a bicycle pump'.
This text will be inserted into \`Add {category} here\`, becoming \`Add a hydrant here\`.

Do _not_ indicate 'new': 'add a new shop here' is incorrect, as the shop might have existed forever, it could just be unmapped!

question: What is the word to describe this object?
inline: Add {translated(value)::font-bold} here`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},tags:{description:`A single tag (encoded as <code>key=value</code>) out of all the tags to add onto the newly created point.
Note that the icon in the UI will be chosen automatically based on the tags provided here.

question: What tag should be added to the new object?
type: simple_tag
typeHelper: uploadableOnly`,type:"array",items:{type:"string"}},description:{description:`An extra explanation of what the feature is, if it is not immediately clear from the title alone.

The _first sentence_ of the description is shown on the button of the \`add\` menu.
The full description is shown in the confirmation dialog.

(The first sentence is until the first '.'-character in the description)

question: How would you describe this feature?
ifunset: No extra description is given. This can be used to further explain the preset`,anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},exampleImages:{description:`The URL of an example image which shows a real-life example of what such a feature might look like.

Type: image
question: What is the URL of an image showing such a feature?`,type:"array",items:{type:"string"}},snapToLayer:{description:`question: Should the created point be snapped to a line layer?

If specified, these layers will be shown in the precise location picker  and the new point will be snapped towards it.
For example, this can be used to snap against \`walls_and_buildings\` (e.g. to attach a defibrillator, an entrance, an artwork, ... to the wall)
or to snap an obstacle (such as a bollard) to the \`cycleways_and_roads\`.

suggestions: return Array.from(layers.keys()).map(key => ({if: "value="+key, then: key+" - "+layers.get(key).description}))`,type:"array",items:{type:"string"}},maxSnapDistance:{description:`question: What is the maximum distance in the location-input that a point can be moved to be snapped to a way?

inline: a point is snapped if the location input is at most <b>{value}m</b> away from an object

If specified, a new point will only be snapped if it is within this range.
If further away, it'll be placed in the center of the location input
Distance in meter

ifunset: Do not snap to a layer`,type:"number"}},required:["tags","title"]}},tagRenderings:{description:`question: Edit this way this attributed is displayed or queried

A tag rendering is a block that either shows the known value or asks a question.

Refer to the class \`TagRenderingConfigJson\` to see the possibilities.

Note that we can also use a string here - where the string refers to a tag rendering defined in \`assets/questions/questions.json\`,
where a few very general questions are defined e.g. website, phone number, ...
Furthermore, _all_ the questions of another layer can be reused with \`otherlayer.*\`
If you need only a single of the tagRenderings, use \`otherlayer.tagrenderingId\`
If one or more questions have a 'group' or 'label' set, select all the entries with the corresponding group or label with \`otherlayer.*group\`
Remark: if a tagRendering is 'lent' from another layer, the 'source'-tags are copied and added as condition.
If they are not wanted, remove them with an override

A special value is 'questions', which indicates the location of the questions box. If not specified, it'll be appended to the bottom of the featureInfobox.

At last, one can define a group of renderings where parts of all strings will be replaced by multiple other strings.
This is mainly create questions for a 'left' and a 'right' side of the road.
These will be grouped and questions will be asked together

type: tagrendering[]
group: tagrenderings`,type:"array",items:{anyOf:[{$ref:"#/definitions/QuestionableTagRenderingConfigJson"},{type:"object",properties:{id:{type:"string"},builtin:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},override:{$ref:"#/definitions/Partial<QuestionableTagRenderingConfigJson>"}},required:["builtin","override"]},{allOf:[{$ref:"#/definitions/default<(string|QuestionableTagRenderingConfigJson|{builtin:string;override:Partial<QuestionableTagRenderingConfigJson>;})[]>"},{type:"object",properties:{id:{type:"string"}},required:["id"]}]},{type:"string"}]}},filter:{description:`All the extra questions for filtering.
If a string is given, mapComplete will search in
1. The tagrenderings for a match on ID and use the mappings as options
2. search 'filters.json' for the appropriate filter or
3. will try to parse it as \`layername.filterid\` and us that one.


group: filters`,anyOf:[{type:"array",items:{anyOf:[{$ref:"#/definitions/default_1"},{type:"string"}]}},{type:"object",properties:{sameAs:{type:"string"}},required:["sameAs"]}]},deletion:{description:`This block defines under what circumstances the delete dialog is shown for objects of this layer.
If set, a dialog is shown to the user to (soft) delete the point.
The dialog is built to be user friendly and to prevent mistakes.
If deletion is not possible, the dialog will hide itself and show the reason of non-deletability instead.

To configure, the following values are possible:

- false: never ever show the delete button
- true: show the default delete button
- undefined: use the mapcomplete default to show deletion or not. Currently, this is the same as 'false' but this will change in the future
- or: a hash with options (see below)

### The delete dialog



#### Hard deletion if enough experience

A feature can only be deleted from OpenStreetMap by mapcomplete if:

- It is a node
- No ways or relations use the node
- The logged-in user has enough experience OR the user is the only one to have edited the point previously
- The logged-in user has no unread messages (or has a ton of experience)
- The user did not select one of the 'non-delete-options' (see below)

In all other cases, a 'soft deletion' is used.

#### Soft deletion

A 'soft deletion' is when the point isn't deleted fromOSM but retagged so that it'll won't how up in the mapcomplete theme anymore.
This makes it look like it was deleted, without doing damage. A fixme will be added to the point.

Note that a soft deletion is _only_ possible if these tags are provided by the theme creator, as they'll be different for every theme

##### No-delete options

In some cases, the contributor might want to delete something for the wrong reason (e.g. someone who wants to have a path removed "because the path is on their private property").
However, the path exists in reality and should thus be on OSM - otherwise the next contributor will pass by and notice "hey, there is a path missing here! Let me redraw it in OSM!)

The correct approach is to retag the feature in such a way that it is semantically correct *and* that it doesn't show up on the theme anymore.
A no-delete option is offered as 'reason to delete it', but secretly retags.

group: editing
types: Use an advanced delete configuration ; boolean
iftrue: Allow deletion
iffalse: Do not allow deletion
ifunset: Do not allow deletion`,anyOf:[{$ref:"#/definitions/DeleteConfigJson"},{type:"boolean"}]},allowMove:{description:`Indicates if a point can be moved and why.

A feature can be moved by MapComplete if:

- It is a point
- The point is _not_ part of a way or a a relation.

types: use an advanced move configuration ; boolean
group: editing
question: Is deleting a point allowed?
iftrue: Allow contributors to move a point (for accuracy or a relocation)
iffalse: Don't allow contributors to move points
ifunset: Don't allow contributors to move points (default)`,anyOf:[{$ref:"#/definitions/default_3"},{type:"boolean"}]},allowSplit:{description:`If set, a 'split this way' button is shown on objects rendered as LineStrings, e.g. highways.

If the way is part of a relation, MapComplete will attempt to update this relation as well
question: Should the contributor be able to split ways using this layer?
iftrue: enable the 'split-roads'-component
iffalse: don't enable the split-roads component
ifunset: don't enable the split-roads component
group: editing`,type:"boolean"},units:{description:'Either a list with [{"key": "unitname", "key2": {"quantity": "unitname", "denominations": ["denom", "denom"]}}]\n\nUse `"inverted": true` if the amount should be _divided_ by the denomination, e.g. for charge over time (`5/day`)',type:"array",items:{anyOf:[{$ref:"#/definitions/default_2"},{$ref:"#/definitions/Record<string,string|{quantity:string;denominations:string[];canonical?:string|undefined;inverted?:boolean|undefined;}>"}]}},syncSelection:{description:`If set, synchronizes whether or not this layer is enabled.

group: advanced
question: Should enabling/disabling the layer be saved (locally or in the cloud)?
suggestions: return [{if: "value=no", then: "Don't save, always revert to the default"}, {if: "value=local", then: "Save selection in local storage"}, {if: "value=theme-only", then: "Save the state in the OSM-usersettings, but apply on this theme only (default)"}, {if: "value=global", then: "Save in OSM-usersettings and toggle on _all_ themes using this layer"}]`,enum:["global","local","no","theme-only"],type:"string"},"#":{description:`Used for comments and/or to disable some checks

no-question-hint-check: disables a check in MiscTagRenderingChecks which complains about 'div', 'span' or 'class=subtle'-HTML elements in the tagRendering

group: hidden`,type:"string"},fullNodeDatabase:{description:`_Set automatically by MapComplete, please ignore_

group: hidden`,type:"boolean"}},additionalProperties:!1},"Partial<any>":{type:"object",additionalProperties:!1},RasterLayerProperties:{description:"This class has grown beyond the point of only containing Raster Layers",type:"object",properties:{name:{description:"The name of the imagery source",anyOf:[{$ref:"#/definitions/Record<string,string>"},{type:"string"}]},isOverlay:{type:"boolean"},id:{type:"string"},url:{type:"string"},category:{type:"string"},type:{type:"string"},style:{type:"string"},attribution:{type:"object",properties:{url:{type:"string"},text:{type:"string"},html:{type:"string"},required:{type:"boolean"}}},min_zoom:{type:"number"},max_zoom:{type:"number"},best:{type:"boolean"}},required:["id","name","url"],additionalProperties:!1}},Va="http://json-schema.org/draft-07/schema#",Qa=!1,Ga={description:Pa,type:Ha,properties:Ba,required:Ua,definitions:za,$schema:Va,additionalProperties:Qa};function Ya(o){let e;return{c(){e=v("div"),_(e,"class","h-full w-full")},m(t,n){b(t,e,n),o[2](e)},p:z,i:z,o:z,d(t){t&&y(e),o[2](null)}}}function Ka(o,e,t){let{state:n}=e,i,a,s,l;function r(){try{const d=JSON.parse(s.getValue());n.configuration.setData(d)}catch(d){console.error(d)}}lt(()=>{const d=p=>{p.key==="s"&&(p.ctrlKey||p.metaKey)&&(p.preventDefault(),r())};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)}),lt(async()=>{const d=await Yi(()=>import("./editor.main-83bd7095.js").then(w=>w.e),["./editor.main-83bd7095.js","./preload-helper-92f2d0bc.js","./index-b912cb3e.js","./UIEventSource-bbce5861.js","./LanguagePicker-14b19501.js","./tw-merge-61f8e831.js","./LocalStorageSource-da1dc476.js","./Dropdown-66fd9746.js","./Add-eee93d68.js","./FixImages-a81f407c.js","./Constants-e88b1152.js","./placeholder-31692285.js","./Loading-e16400d6.js","./Checkbox-bf25d2fb.js","./BackButton-ef323e92.js","./ToSvelte-cbfa2f46.js","./Login-464f7b06.js","./Add-89c0a556.css","./preload-helper-68c4280c.css","./editor-a89423dd.css"],import.meta.url);_n.config({monaco:d.default}),a=await _n.init();let p;n instanceof Vn?p="https://mapcomplete.org/schemas/layerconfig.json":p="https://mapcomplete.org/schemas/layoutconfig.json",a.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:p,fileMatch:["file.json"],schema:p==="https://mapcomplete.org/schemas/layerconfig.json"?Ea:Ga}]});let c=a.Uri.parse("inmemory://inmemory/file.json");l=a.editor.createModel(JSON.stringify(n.configuration.data,null,"  "),"json",c),s=a.editor.create(i,{model:l,automaticLayout:!0});let f;s.onDidChangeModelContent(()=>{clearTimeout(f),f=setTimeout(()=>{r()},500)})}),Xe(()=>{s&&s.dispose(),l&&l.dispose()});function h(d){Si[d?"unshift":"push"](()=>{i=d,t(0,i)})}return o.$$set=d=>{"state"in d&&t(1,n=d.state)},[i,n,h]}class ii extends ae{constructor(e){super(),re(this,e,Ka,Ya,le,{state:1})}}function Za(o){let e,t,n,i,a;return t=new De({props:{$$slots:{default:[er]},$$scope:{ctx:o}}}),t.$on("click",o[6]),i=new qe({props:{clss:"primary",$$slots:{default:[tr]},$$scope:{ctx:o}}}),i.$on("click",o[7]),{c(){e=v("div"),$(t.$$.fragment),n=A(),$(i.$$.fragment),_(e,"class","flex")},m(s,l){b(s,e,l),x(t,e,null),g(e,n),x(i,e,null),a=!0},p(s,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:s}),t.$set(r);const h={};l&257&&(h.$$scope={dirty:l,ctx:s}),i.$set(h)},i(s){a||(u(t.$$.fragment,s),u(i.$$.fragment,s),a=!0)},o(s){m(t.$$.fragment,s),m(i.$$.fragment,s),a=!1},d(s){s&&y(e),C(t),C(i)}}}function Xa(o){let e,t,n,i,a,s,l;return t=new On({props:{class:"h-6 w-6"}}),{c(){e=v("button"),$(t.$$.fragment),n=O(`
      Delete this  `),i=O(o[0]),_(e,"class","small")},m(r,h){b(r,e,h),x(t,e,null),g(e,n),g(e,i),a=!0,s||(l=K(e,"click",o[5]),s=!0)},p(r,h){(!a||h&1)&&Z(i,r[0])},i(r){a||(u(t.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),a=!1},d(r){r&&y(e),C(t),s=!1,l()}}}function er(o){let e;return{c(){e=O("Don't delete")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function tr(o){let e,t,n,i,a;return t=new On({props:{class:"h-6 w-6"}}),{c(){e=v("div"),$(t.$$.fragment),n=O(`
          Do delete this `),i=O(o[0]),_(e,"class","alert flex p-2")},m(s,l){b(s,e,l),x(t,e,null),g(e,n),g(e,i),a=!0},p(s,l){(!a||l&1)&&Z(i,s[0])},i(s){a||(u(t.$$.fragment,s),a=!0)},o(s){m(t.$$.fragment,s),a=!1},d(s){s&&y(e),C(t)}}}function nr(o){let e,t,n,i;const a=[Xa,Za],s=[];function l(r,h){return r[1]==="init"?0:r[1]==="confirm"?1:-1}return~(t=l(o))&&(n=s[t]=a[t](o)),{c(){e=v("div"),n&&n.c(),_(e,"class","mt-12")},m(r,h){b(r,e,h),~t&&s[t].m(e,null),i=!0},p(r,[h]){let d=t;t=l(r),t===d?~t&&s[t].p(r,h):(n&&(G(),m(s[d],1,1,()=>{s[d]=null}),Y()),~t?(n=s[t],n?n.p(r,h):(n=s[t]=a[t](r),n.c()),u(n,1),n.m(e,null)):n=null)},i(r){i||(u(n),i=!0)},o(r){m(n),i=!1},d(r){r&&y(e),~t&&s[t].d()}}}function ir(o,e,t){let n="init",{backToStudio:i}=e,{state:a}=e,{objectType:s}=e;function l(){a.delete(),i()}const r=()=>{t(1,n="confirm")},h=()=>{t(1,n="init")},d=()=>l();return o.$$set=p=>{"backToStudio"in p&&t(3,i=p.backToStudio),"state"in p&&t(4,a=p.state),"objectType"in p&&t(0,s=p.objectType)},[s,n,l,i,a,r,h,d]}class oi extends ae{constructor(e){super(),re(this,e,ir,nr,le,{backToStudio:3,state:4,objectType:0})}}class si{constructor(e,t,n){t.mapD(i=>{dt.hash.setData(e+"/"+n.data+"/"+i)},[n])}}function Tn(o,e,t){const n=o.slice();return n[24]=e[t],n}function or(o){let e,t,n;return{c(){e=v("h3"),t=O("Editing layer "),n=O(o[3])},m(i,a){b(i,e,a),g(e,t),g(e,n)},p(i,a){a&8&&Z(n,i[3])},d(i){i&&y(e)}}}function sr(o){let e;return{c(){e=v("h3"),e.textContent="Creating a new layer"},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function ar(o){let e,t,n,i,a,s,l,r,h,d,p,c;return a=new ht({props:{class:"h-6 w-6 shrink-0"}}),d=new ht({props:{class:"h-6 w-6 shrink-0"}}),{c(){e=v("div"),t=v("a"),n=v("div"),n.innerHTML=`<b>Test in safe mode</b> 
            <div>No changes are recoded to OSM</div>`,i=A(),$(a.$$.fragment),l=A(),r=v("a"),h=O(`Try it out
          `),$(d.$$.fragment),_(n,"class","flex flex-col"),_(t,"class","button small"),_(t,"href",s=o[11]+o[0].server.layerUrl(o[10].data)+"&test=true"),_(t,"target","_blank"),_(t,"rel","noopener"),_(r,"class","primary button"),_(r,"href",p=o[11]+o[0].server.layerUrl(o[10].data)),_(r,"target","_blank"),_(r,"rel","noopener"),_(e,"class","flex")},m(f,w){b(f,e,w),g(e,t),g(t,n),g(t,i),x(a,t,null),g(e,l),g(e,r),g(r,h),x(d,r,null),c=!0},p(f,w){(!c||w&1&&s!==(s=f[11]+f[0].server.layerUrl(f[10].data)+"&test=true"))&&_(t,"href",s),(!c||w&1&&p!==(p=f[11]+f[0].server.layerUrl(f[10].data)))&&_(r,"href",p)},i(f){c||(u(a.$$.fragment,f),u(d.$$.fragment,f),c=!0)},o(f){m(a.$$.fragment,f),m(d.$$.fragment,f),c=!1},d(f){f&&y(e),C(a),C(d)}}}function rr(o){let e,t,n;return{c(){e=v("div"),t=O(o[5]),n=O(" errors detected"),_(e,"class","alert")},m(i,a){b(i,e,a),g(e,t),g(e,n)},p(i,a){a&32&&Z(t,i[5])},i:z,o:z,d(i){i&&y(e)}}}function lr(o){let e;return{c(){e=v("div"),_(e,"class","w-16")},m(t,n){b(t,e,n)},p:z,i:z,o:z,d(t){t&&y(e)}}}function hr(o){let e,t,n,i,a;t=new Hn({props:{tab:o[0].selectedTab,$$slots:{content5:[Tr],title5:[_r],content4:[vr],title4:[wr],content3:[yr],title3:[br],content2:[mr],title2:[gr],content1:[ur],title1:[fr],content0:[cr],title0:[pr]},$$scope:{ctx:o}}});let s=o[7]!==void 0&&qn(o);return{c(){e=v("div"),$(t.$$.fragment),n=A(),s&&s.c(),i=ne(),_(e,"class","m4 h-full overflow-y-auto")},m(l,r){b(l,e,r),x(t,e,null),b(l,n,r),s&&s.m(l,r),b(l,i,r),a=!0},p(l,r){const h={};r&1&&(h.tab=l[0].selectedTab),r&524359&&(h.$$scope={dirty:r,ctx:l}),t.$set(h),l[7]!==void 0?s?(s.p(l,r),r&128&&u(s,1)):(s=qn(l),s.c(),u(s,1),s.m(i.parentNode,i)):s&&(G(),m(s,1,1,()=>{s=null}),Y())},i(l){a||(u(t.$$.fragment,l),u(s),a=!0)},o(l){m(t.$$.fragment,l),m(s),a=!1},d(l){l&&y(e),C(t),l&&y(n),s&&s.d(l),l&&y(i)}}}function dr(o){let e,t,n=o[14],i=[];for(let s=0;s<n.length;s+=1)i[s]=kn(Tn(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=ne()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);b(s,e,l),t=!0},p(s,l){if(l&24577){n=s[14];let r;for(r=0;r<n.length;r+=1){const h=Tn(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=kn(h),i[r].c(),u(i[r],1),i[r].m(e.parentNode,e))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){fe(i,s),s&&y(e)}}}function pr(o){let e,t,n,i;return n=new ze({props:{firstPaths:o[12]("Basic"),state:o[0]}}),{c(){e=v("div"),t=O(`General properties
          `),$(n.$$.fragment),_(e,"slot","title0"),_(e,"class","flex")},m(a,s){b(a,e,s),g(e,t),x(n,e,null),i=!0},p(a,s){const l={};s&1&&(l.state=a[0]),n.$set(l)},i(a){i||(u(n.$$.fragment,a),i=!0)},o(a){m(n.$$.fragment,a),i=!1},d(a){a&&y(e),C(n)}}}function cr(o){let e,t,n,i,a;return t=new me({props:{state:o[0],configs:o[2].Basic}}),i=new oi({props:{state:o[0],backToStudio:o[1],objectType:"layer"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),$(i.$$.fragment),_(e,"class","flex flex-col mb-8"),_(e,"slot","content0")},m(s,l){b(s,e,l),x(t,e,null),g(e,n),x(i,e,null),a=!0},p(s,l){const r={};l&1&&(r.state=s[0]),l&4&&(r.configs=s[2].Basic),t.$set(r);const h={};l&1&&(h.state=s[0]),l&2&&(h.backToStudio=s[1]),i.$set(h)},i(s){a||(u(t.$$.fragment,s),u(i.$$.fragment,s),a=!0)},o(s){m(t.$$.fragment,s),m(i.$$.fragment,s),a=!1},d(s){s&&y(e),C(t),C(i)}}}function fr(o){let e,t,n,i;return n=new ze({props:{firstPaths:o[12]("title","tagrenderings","editing"),state:o[0]}}),{c(){e=v("div"),t=O(`Information panel (questions and answers)
          `),$(n.$$.fragment),_(e,"slot","title1"),_(e,"class","flex")},m(a,s){b(a,e,s),g(e,t),x(n,e,null),i=!0},p(a,s){const l={};s&1&&(l.state=a[0]),n.$set(l)},i(a){i||(u(n.$$.fragment,a),i=!0)},o(a){m(n.$$.fragment,a),i=!1},d(a){a&&y(e),C(n)}}}function ur(o){let e,t,n,i,a,s,l;return t=new Gn({props:{path:["title"],state:o[0],schema:o[2].title[0]}}),i=new me({props:{configs:o[2].tagrenderings,state:o[0],title:"Popup contents"}}),s=new me({props:{configs:o[2].editing,state:o[0],title:"Other editing elements"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),$(i.$$.fragment),a=A(),$(s.$$.fragment),_(e,"slot","content1")},m(r,h){b(r,e,h),x(t,e,null),g(e,n),x(i,e,null),g(e,a),x(s,e,null),l=!0},p(r,h){const d={};h&1&&(d.state=r[0]),h&4&&(d.schema=r[2].title[0]),t.$set(d);const p={};h&4&&(p.configs=r[2].tagrenderings),h&1&&(p.state=r[0]),i.$set(p);const c={};h&4&&(c.configs=r[2].editing),h&1&&(c.state=r[0]),s.$set(c)},i(r){l||(u(t.$$.fragment,r),u(i.$$.fragment,r),u(s.$$.fragment,r),l=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),m(s.$$.fragment,r),l=!1},d(r){r&&y(e),C(t),C(i),C(s)}}}function gr(o){let e,t,n,i;return n=new ze({props:{firstPaths:o[12]("presets"),state:o[0]}}),{c(){e=v("div"),t=O(`Creating a new point
          `),$(n.$$.fragment),_(e,"slot","title2")},m(a,s){b(a,e,s),g(e,t),x(n,e,null),i=!0},p(a,s){const l={};s&1&&(l.state=a[0]),n.$set(l)},i(a){i||(u(n.$$.fragment,a),i=!0)},o(a){m(n.$$.fragment,a),i=!1},d(a){a&&y(e),C(n)}}}function mr(o){let e,t,n;return t=new me({props:{state:o[0],configs:o[2].presets}}),{c(){e=v("div"),$(t.$$.fragment),_(e,"slot","content2")},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,a){const s={};a&1&&(s.state=i[0]),a&4&&(s.configs=i[2].presets),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function br(o){let e,t,n,i;return n=new ze({props:{firstPaths:o[12]("linerendering","pointrendering"),state:o[0]}}),{c(){e=v("div"),t=O(`Rendering on the map
          `),$(n.$$.fragment),_(e,"slot","title3"),_(e,"class","flex")},m(a,s){b(a,e,s),g(e,t),x(n,e,null),i=!0},p(a,s){const l={};s&1&&(l.state=a[0]),n.$set(l)},i(a){i||(u(n.$$.fragment,a),i=!0)},o(a){m(n.$$.fragment,a),i=!1},d(a){a&&y(e),C(n)}}}function yr(o){let e,t,n,i,a;return t=new me({props:{configs:o[2].linerendering,state:o[0]}}),i=new me({props:{configs:o[2].pointrendering,state:o[0]}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),$(i.$$.fragment),_(e,"slot","content3")},m(s,l){b(s,e,l),x(t,e,null),g(e,n),x(i,e,null),a=!0},p(s,l){const r={};l&4&&(r.configs=s[2].linerendering),l&1&&(r.state=s[0]),t.$set(r);const h={};l&4&&(h.configs=s[2].pointrendering),l&1&&(h.state=s[0]),i.$set(h)},i(s){a||(u(t.$$.fragment,s),u(i.$$.fragment,s),a=!0)},o(s){m(t.$$.fragment,s),m(i.$$.fragment,s),a=!1},d(s){s&&y(e),C(t),C(i)}}}function wr(o){let e,t,n,i;return n=new ze({props:{firstPaths:o[12]("advanced"),state:o[0]}}),{c(){e=v("div"),t=O(`Advanced functionality
          `),$(n.$$.fragment),_(e,"slot","title4"),_(e,"class","flex")},m(a,s){b(a,e,s),g(e,t),x(n,e,null),i=!0},p(a,s){const l={};s&1&&(l.state=a[0]),n.$set(l)},i(a){i||(u(n.$$.fragment,a),i=!0)},o(a){m(n.$$.fragment,a),i=!1},d(a){a&&y(e),C(n)}}}function vr(o){let e,t,n,i,a;return t=new me({props:{configs:o[2].advanced,state:o[0]}}),i=new me({props:{configs:o[2].expert,state:o[0]}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),$(i.$$.fragment),_(e,"slot","content4")},m(s,l){b(s,e,l),x(t,e,null),g(e,n),x(i,e,null),a=!0},p(s,l){const r={};l&4&&(r.configs=s[2].advanced),l&1&&(r.state=s[0]),t.$set(r);const h={};l&4&&(h.configs=s[2].expert),l&1&&(h.state=s[0]),i.$set(h)},i(s){a||(u(t.$$.fragment,s),u(i.$$.fragment,s),a=!0)},o(s){m(t.$$.fragment,s),m(i.$$.fragment,s),a=!1},d(s){s&&y(e),C(t),C(i)}}}function _r(o){let e;return{c(){e=v("div"),e.textContent="Configuration file",_(e,"slot","title5")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function Tr(o){let e,t,n,i,a,s,l,r,h,d,p,c,f;return a=new ii({props:{state:o[0]}}),l=new Zn({props:{messages:o[6]}}),c=new Ji({props:{tags:o[0].testTags}}),{c(){e=v("div"),t=v("div"),t.textContent="Below, you'll find the raw configuration file in `.json`-format. This is mostly for\n            debugging purposes, but you can also edit the file directly if you want.",n=A(),i=v("div"),$(a.$$.fragment),s=A(),$(l.$$.fragment),r=A(),h=v("div"),d=v("div"),d.textContent=`The testobject (which is used to render the questions in the 'information panel'
              item has the following tags:`,p=A(),$(c.$$.fragment),_(i,"class","literal-code overflow-y-auto h-full"),Mn(i,"min-height","75%"),_(h,"class","flex w-full flex-col"),_(e,"slot","content5"),_(e,"class","flex h-full flex-col")},m(w,I){b(w,e,I),g(e,t),g(e,n),g(e,i),x(a,i,null),g(e,s),x(l,e,null),g(e,r),g(e,h),g(h,d),g(h,p),x(c,h,null),f=!0},p(w,I){const T={};I&1&&(T.state=w[0]),a.$set(T);const F={};I&64&&(F.messages=w[6]),l.$set(F);const L={};I&1&&(L.tags=w[0].testTags),c.$set(L)},i(w){f||(u(a.$$.fragment,w),u(l.$$.fragment,w),u(c.$$.fragment,w),f=!0)},o(w){m(a.$$.fragment,w),m(l.$$.fragment,w),m(c.$$.fragment,w),f=!1},d(w){w&&y(e),C(a),C(l),C(c)}}}function qn(o){let e,t;return e=new Bn({props:{$$slots:{default:[qr]},$$scope:{ctx:o}}}),e.$on("close",o[18]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&524417&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function qr(o){let e,t,n;return t=new Us({props:{path:o[7].path,state:o[0]}}),{c(){e=v("div"),$(t.$$.fragment)},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,a){const s={};a&128&&(s.path=i[7].path),a&1&&(s.state=i[0]),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function kn(o){let e,t;return e=new Ue({props:{state:o[0],schema:o[13](o[24]),path:[o[24]]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.state=n[0]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function kr(o){let e,t,n,i,a,s,l,r,h,d;const p=o[17].default,c=be(p,o,o[19],null);function f(q,R){return q[3]===void 0?sr:or}let w=f(o),I=w(o);const T=[lr,rr,ar],F=[];function L(q,R){return q[4].length>0?0:q[5]>0?1:2}a=L(o),s=F[a]=T[a](o);const D=[dr,hr],j=[];function S(q,R){return q[4].length>0?0:1}return r=S(o),h=j[r]=D[r](o),{c(){e=v("div"),t=v("div"),c&&c.c(),n=A(),I.c(),i=A(),s.c(),l=A(),h.c(),_(t,"class","my-2 flex w-full justify-between"),_(e,"class","flex h-screen flex-col")},m(q,R){b(q,e,R),g(e,t),c&&c.m(t,null),g(t,n),I.m(t,null),g(t,i),F[a].m(t,null),g(e,l),j[r].m(e,null),d=!0},p(q,[R]){c&&c.p&&(!d||R&524288)&&ye(c,p,q,q[19],d?ve(p,q[19],R,null):we(q[19]),null),w===(w=f(q))&&I?I.p(q,R):(I.d(1),I=w(q),I&&(I.c(),I.m(t,i)));let N=a;a=L(q),a===N?F[a].p(q,R):(G(),m(F[N],1,1,()=>{F[N]=null}),Y(),s=F[a],s?s.p(q,R):(s=F[a]=T[a](q),s.c()),u(s,1),s.m(t,null));let J=r;r=S(q),r===J?j[r].p(q,R):(G(),m(j[J],1,1,()=>{j[J]=null}),Y(),h=j[r],h?h.p(q,R):(h=j[r]=D[r](q),h.c()),u(h,1),h.m(e,null))},i(q){d||(u(c,q),u(s),u(h),d=!0)},o(q){m(c,q),m(s),m(h),d=!1},d(q){q&&y(e),c&&c.d(q),I.d(),F[a].d(),j[r].d()}}}function $r(o,e,t){let n,i,a,s,l,{$$slots:r={},$$scope:h}=e;const d=Qn;let{state:p}=e,{backToStudio:c}=e;new si("layer",p.selectedTab,p.getStoreFor(["id"]));let f=p.messages;te(o,f,W=>t(6,s=W));let w=f.mapD(W=>W.filter(k=>k.level==="error").length);te(o,w,W=>t(5,a=W));const I=p.configuration,T=Te.Dedup(d.map(W=>W.hints.group)),F={};for(const W of T)F[W]=d.filter(k=>k.hints.group===W);let L=p.getStoreFor(["id"]);te(o,L,W=>t(3,n=W));const D=window.location,j=D.protocol+"//"+D.host+"/theme.html?userlayout=";function S(...W){const k=new Set;for(const M of W){const X=F[M];for(const B of X)k.add(B.path[0])}return k}function q(W){let k=d.find(M=>M.path.length===1&&M.path[0]===W);return k=Te.Clone(k),k.required=!0,k.hints.ifunset=void 0,k}let R=["id","name","description","source"],N=I.map(W=>{if(!W)return[];const k=[];for(const M of R)W[M]||k.push(M);return k});te(o,N,W=>t(4,i=W));let J=p.highlightedItem;te(o,J,W=>t(7,l=W));const P=()=>J.setData(void 0);return o.$$set=W=>{"state"in W&&t(0,p=W.state),"backToStudio"in W&&t(1,c=W.backToStudio),"$$scope"in W&&t(19,h=W.$$scope)},[p,c,F,n,i,a,s,l,f,w,L,j,S,q,R,N,J,r,P,h]}class xr extends ae{constructor(e){super(),re(this,e,$r,kr,le,{state:0,backToStudio:1})}}class Cr{constructor(e,t){pe(this,"url");pe(this,"_userId");pe(this,"overview");this.url=e,this._userId=t,this.overview=ue.FromPromiseWithErr(this.fetchOverviewRaw())}fetchOverview(){return this.overview}async fetchOverviewRaw(){const{allFiles:e}=await Te.downloadJson(this.url+"/overview"),t=[];for(let n of e){const i=n.split("/");let a=Number(i[0]);isNaN(a)?a=void 0:(i.splice(0,1),n=n.substring(n.indexOf("/")+1));const s=i[0],l=n.substring(n.lastIndexOf("/")+1,n.length-5);zi.priviliged_layers.indexOf(l)>0||t.push({id:l,owner:a,category:s})}return t}async fetch(e,t,n){try{return await Te.downloadJson(this.urlFor(e,t,n))}catch{return}}async delete(e,t){var i;if(e===void 0||e==="")return;await fetch(this.urlFor(e,t),{method:"DELETE"});const n=(i=this.overview.data)==null?void 0:i.success;if(n){const a=n.findIndex(s=>s.id===e&&s.category===t&&s.owner===this._userId.data);a>=0&&(n.splice(a,1),this.overview.ping())}}async update(e,t,n){e===void 0||e===""||await fetch(this.urlFor(e,n),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:t})}layerUrl(e){return this.urlFor(e,"layers")}urlFor(e,t,n){n??(n=this._userId.data);const i=n!==void 0?"/"+n:"";return`${this.url}${i}/${t}/${e}/${e}.json`}}function $n(o,e,t){const n=o.slice();return n[1]=e[t],n}function xn(o){let e,t,n=o[0],i=[];for(let s=0;s<n.length;s+=1)i[s]=Cn($n(o,n,s));const a=s=>m(i[s],1,1,()=>{i[s]=null});return{c(){e=v("div");for(let s=0;s<i.length;s+=1)i[s].c();_(e,"class","relative h-full w-full")},m(s,l){b(s,e,l);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null);t=!0},p(s,l){if(l&1){n=s[0];let r;for(r=0;r<n.length;r+=1){const h=$n(s,n,r);i[r]?(i[r].p(h,l),u(i[r],1)):(i[r]=Cn(h),i[r].c(),u(i[r],1),i[r].m(e,null))}for(G(),r=n.length;r<i.length;r+=1)a(r);Y()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)u(i[l]);t=!0}},o(s){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)m(i[l]);t=!1},d(s){s&&y(e),fe(i,s)}}}function Cn(o){let e,t,n,i;return t=new Di({props:{icon:o[1].icon,color:o[1].color}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),_(e,"class","absolute top-0 left-0 h-full w-full")},m(a,s){b(a,e,s),x(t,e,null),g(e,n),i=!0},p(a,s){const l={};s&1&&(l.icon=a[1].icon),s&1&&(l.color=a[1].color),t.$set(l)},i(a){i||(u(t.$$.fragment,a),i=!0)},o(a){m(t.$$.fragment,a),i=!1},d(a){a&&y(e),C(t)}}}function Rr(o){let e,t,n=o[0]!==void 0&&o[0].length>0&&xn(o);return{c(){n&&n.c(),e=ne()},m(i,a){n&&n.m(i,a),b(i,e,a),t=!0},p(i,[a]){i[0]!==void 0&&i[0].length>0?n?(n.p(i,a),a&1&&u(n,1)):(n=xn(i),n.c(),u(n,1),n.m(e.parentNode,e)):n&&(G(),m(n,1,1,()=>{n=null}),Y())},i(i){t||(u(n),t=!0)},o(i){m(n),t=!1},d(i){n&&n.d(i),i&&y(e)}}}function Ar(o,e,t){let{icons:n}=e;return o.$$set=i=>{"icons"in i&&t(0,n=i.icons)},[n]}class Sr extends ae{constructor(e){super(),re(this,e,Ar,Rr,le,{icons:0})}}function Rn(o){let e;function t(a,s){return a[2]?jr:Ir}let n=t(o),i=n(o);return{c(){i.c(),e=ne()},m(a,s){i.m(a,s),b(a,e,s)},p(a,s){n===(n=t(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){i.d(a),a&&y(e)}}}function Ir(o){let e,t=o[0].owner+"",n,i;return{c(){e=O("("),n=O(t),i=O(")")},m(a,s){b(a,e,s),b(a,n,s),b(a,i,s)},p(a,s){s&1&&t!==(t=a[0].owner+"")&&Z(n,t)},d(a){a&&y(e),a&&y(n),a&&y(i)}}}function jr(o){let e,t,n,i=window.location.host.startsWith("127.0.0.1"),a,s=i&&Jr(o);return{c(){e=O("(made by "),t=O(o[2]),n=A(),s&&s.c(),a=O(`
      )`)},m(l,r){b(l,e,r),b(l,t,r),b(l,n,r),s&&s.m(l,r),b(l,a,r)},p(l,r){r&4&&Z(t,l[2]),i&&s.p(l,r)},d(l){l&&y(e),l&&y(t),l&&y(n),s&&s.d(l),l&&y(a)}}}function Jr(o){let e,t=o[0].owner+"",n;return{c(){e=O("- "),n=O(t)},m(i,a){b(i,e,a),b(i,n,a)},p(i,a){a&1&&t!==(t=i[0].owner+"")&&Z(n,t)},d(i){i&&y(e),i&&y(n)}}}function Wr(o){let e,t,n,i,a=o[0].id+"",s,l,r,h;t=new Sr({props:{icons:o[6](o[0].id)}});let d=o[0].owner&&o[0].owner!==o[1]&&Rn(o);return{c(){e=v("div"),$(t.$$.fragment),n=A(),i=v("b"),s=O(a),l=A(),d&&d.c(),r=ne(),_(e,"class","mr-1 h-4 w-4"),_(i,"class","px-1")},m(p,c){b(p,e,c),x(t,e,null),b(p,n,c),b(p,i,c),g(i,s),b(p,l,c),d&&d.m(p,c),b(p,r,c),h=!0},p(p,c){const f={};c&1&&(f.icons=p[6](p[0].id)),t.$set(f),(!h||c&1)&&a!==(a=p[0].id+"")&&Z(s,a),p[0].owner&&p[0].owner!==p[1]?d?d.p(p,c):(d=Rn(p),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null)},i(p){h||(u(t.$$.fragment,p),h=!0)},o(p){m(t.$$.fragment,p),h=!1},d(p){p&&y(e),C(t),p&&y(n),p&&y(i),p&&y(l),d&&d.d(p),p&&y(r)}}}function Mr(o){let e,t;return e=new qe({props:{clss:"small",$$slots:{default:[Wr]},$$scope:{ctx:o}}}),e.$on("click",o[9]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,[i]){const a={};i&1031&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Or(o,e,t){let n,i,{info:a}=e,{category:s}=e,{osmConnection:l}=e;const r=pt();let h=ue.FromPromise(l.getInformationAboutUser(a.owner)).mapD(f=>f.display_name);te(o,h,f=>t(2,i=f));let d=l.userDetails.mapD(f=>f.uid);te(o,d,f=>t(1,n=f));function p(f){var w;return s==="themes"?Pi.allKnownLayouts.get(f).icon:(w=gt.getSharedLayersConfigs().get(f))==null?void 0:w._layerIcon}const c=()=>r("layerSelected",a);return o.$$set=f=>{"info"in f&&t(0,a=f.info),"category"in f&&t(7,s=f.category),"osmConnection"in f&&t(8,l=f.osmConnection)},[a,n,i,r,h,d,p,s,l,c]}class Dr extends ae{constructor(e){super(),re(this,e,Or,Mr,le,{info:0,category:7,osmConnection:8})}}function An(o,e,t){const n=o.slice();return n[6]=e[t],n}const Nr=o=>({}),Sn=o=>({});function In(o){let e,t,n;const i=o[4].title,a=be(i,o,o[3],Sn);let s=Array.from(o[0]),l=[];for(let h=0;h<s.length;h+=1)l[h]=jn(An(o,s,h));const r=h=>m(l[h],1,1,()=>{l[h]=null});return{c(){a&&a.c(),e=A(),t=v("div");for(let h=0;h<l.length;h+=1)l[h].c();_(t,"class","flex flex-wrap")},m(h,d){a&&a.m(h,d),b(h,e,d),b(h,t,d);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(t,null);n=!0},p(h,d){if(a&&a.p&&(!n||d&8)&&ye(a,i,h,h[3],n?ve(i,h[3],d,Nr):we(h[3]),Sn),d&7){s=Array.from(h[0]);let p;for(p=0;p<s.length;p+=1){const c=An(h,s,p);l[p]?(l[p].p(c,d),u(l[p],1)):(l[p]=jn(c),l[p].c(),u(l[p],1),l[p].m(t,null))}for(G(),p=s.length;p<l.length;p+=1)r(p);Y()}},i(h){if(!n){u(a,h);for(let d=0;d<s.length;d+=1)u(l[d]);n=!0}},o(h){m(a,h),l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)m(l[d]);n=!1},d(h){a&&a.d(h),h&&y(e),h&&y(t),fe(l,h)}}}function jn(o){let e,t;return e=new Dr({props:{info:o[6],category:o[1],osmConnection:o[2]}}),e.$on("layerSelected",o[5]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&1&&(a.info=n[6]),i&2&&(a.category=n[1]),i&4&&(a.osmConnection=n[2]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Fr(o){let e,t,n=o[0].length>0&&In(o);return{c(){n&&n.c(),e=ne()},m(i,a){n&&n.m(i,a),b(i,e,a),t=!0},p(i,[a]){i[0].length>0?n?(n.p(i,a),a&1&&u(n,1)):(n=In(i),n.c(),u(n,1),n.m(e.parentNode,e)):n&&(G(),m(n,1,1,()=>{n=null}),Y())},i(i){t||(u(n),t=!0)},o(i){m(n),t=!1},d(i){n&&n.d(i),i&&y(e)}}}function Lr(o,e,t){let{$$slots:n={},$$scope:i}=e,{layerIds:a}=e,{category:s="layers"}=e,{osmConnection:l}=e;function r(h){de.call(this,o,h)}return o.$$set=h=>{"layerIds"in h&&t(0,a=h.layerIds),"category"in h&&t(1,s=h.category),"osmConnection"in h&&t(2,l=h.osmConnection),"$$scope"in h&&t(3,i=h.$$scope)},[a,s,l,i,n,r]}class Oe extends ae{constructor(e){super(),re(this,e,Lr,Fr,le,{layerIds:0,category:1,osmConnection:2})}}function Jn(o){let e,t,n=o[2]+1+"",i,a,s;return{c(){e=v("div"),t=v("div"),i=O(n),a=O("/"),s=O(o[3]),_(t,"class","subtle"),_(e,"class","flex justify-end")},m(l,r){b(l,e,r),g(e,t),g(t,i),g(t,a),g(t,s)},p(l,r){r&4&&n!==(n=l[2]+1+"")&&Z(i,n),r&8&&Z(s,l[3])},d(l){l&&y(e)}}}function Er(o){let e;return{c(){e=v("div"),_(e,"class","w-full")},m(t,n){b(t,e,n)},p:z,i:z,o:z,d(t){t&&y(e)}}}function Pr(o){let e,t;return e=new De({props:{clss:"w-full",$$slots:{default:[Hr]},$$scope:{ctx:o}}}),e.$on("click",o[6]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&256&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Hr(o){let e;return{c(){e=O("Back")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Br(o){let e;return{c(){e=O("Next")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Ur(o){let e;return{c(){e=O("Finish")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function zr(o){let e;function t(a,s){return a[0]?Ur:Br}let n=t(o),i=n(o);return{c(){i.c(),e=ne()},m(a,s){i.m(a,s),b(a,e,s)},p(a,s){n!==(n=t(a))&&(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){i.d(a),a&&y(e)}}}function Vr(o){let e,t,n,i,a,s,l,r,h,d,p;const c=o[5].default,f=be(c,o,o[8],null);let w=o[2]!==void 0&&o[3]!==void 0&&Jn(o);const I=[Pr,Er],T=[];function F(L,D){return L[1]?1:0}return l=F(o),r=T[l]=I[l](o),d=new qe({props:{clss:"primary w-full",$$slots:{default:[zr]},$$scope:{ctx:o}}}),d.$on("click",o[7]),{c(){e=v("div"),t=v("div"),f&&f.c(),n=A(),i=v("div"),w&&w.c(),a=A(),s=v("div"),r.c(),h=A(),$(d.$$.fragment),_(t,"class","overflow-y-auto h-full"),_(s,"class","flex w-full"),_(i,"class","flex flex-col"),_(e,"class","link-underline flex h-full w-full flex-col justify-between")},m(L,D){b(L,e,D),g(e,t),f&&f.m(t,null),g(e,n),g(e,i),w&&w.m(i,null),g(i,a),g(i,s),T[l].m(s,null),g(s,h),x(d,s,null),p=!0},p(L,[D]){f&&f.p&&(!p||D&256)&&ye(f,c,L,L[8],p?ve(c,L[8],D,null):we(L[8]),null),L[2]!==void 0&&L[3]!==void 0?w?w.p(L,D):(w=Jn(L),w.c(),w.m(i,a)):w&&(w.d(1),w=null);let j=l;l=F(L),l===j?T[l].p(L,D):(G(),m(T[j],1,1,()=>{T[j]=null}),Y(),r=T[l],r?r.p(L,D):(r=T[l]=I[l](L),r.c()),u(r,1),r.m(s,h));const S={};D&257&&(S.$$scope={dirty:D,ctx:L}),d.$set(S)},i(L){p||(u(f,L),u(r),u(d.$$.fragment,L),p=!0)},o(L){m(f,L),m(r),m(d.$$.fragment,L),p=!1},d(L){L&&y(e),f&&f.d(L),w&&w.d(),T[l].d(),C(d)}}}function Qr(o,e,t){let{$$slots:n={},$$scope:i}=e;const a=pt();let{islast:s=!1}=e,{isFirst:l=!1}=e,{pageNumber:r=void 0}=e,{totalPages:h=void 0}=e;const d=()=>a("back"),p=()=>a("next");return o.$$set=c=>{"islast"in c&&t(0,s=c.islast),"isFirst"in c&&t(1,l=c.isFirst),"pageNumber"in c&&t(2,r=c.pageNumber),"totalPages"in c&&t(3,h=c.totalPages),"$$scope"in c&&t(8,i=c.$$scope)},[s,l,r,h,a,n,d,p,i]}class Gr extends ae{constructor(e){super(),re(this,e,Qr,Vr,le,{islast:0,isFirst:1,pageNumber:2,totalPages:3})}}function Yr(o){let e,t;return e=new ct({props:{src:o[0][o[1]]}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i&3&&(a.src=n[0][n[1]]),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Kr(o){let e,t;return e=new Gr({props:{isFirst:o[1]===0,islast:o[1]+1===o[0].length,totalPages:o[0].length,pageNumber:o[1],$$slots:{default:[Yr]},$$scope:{ctx:o}}}),e.$on("back",o[3]),e.$on("next",o[4]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,[i]){const a={};i&2&&(a.isFirst=n[1]===0),i&3&&(a.islast=n[1]+1===n[0].length),i&1&&(a.totalPages=n[0].length),i&2&&(a.pageNumber=n[1]),i&67&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Zr(o,e,t){let{pages:n}=e,i=0;const a=pt();function s(h){if(h>0&&i+1===n.length){a("done"),t(1,i=0);return}t(1,i=Math.min(Math.max(0,i+h),n.length))}const l=()=>s(-1),r=()=>s(1);return o.$$set=h=>{"pages"in h&&t(0,n=h.pages)},[n,i,s,l,r]}class Xr extends ae{constructor(e){super(),re(this,e,Zr,Kr,le,{pages:0})}}const ai=[`# Welcome to MapComplete Studio

Hi!

Welcome to MapComplete Studio.

These slides will walk you through the most important concepts to use MapComplete Studio effectively
`,`# What is OpenStreetMap?

[OpenStreetMap](https://openstreetmap.org) is a worldwide, collaborative project where we map the world together.

People worldwide do add data about features around the world, such as streets, shops, toilets, infrastructure, ...

All type of objects are welcome to be added into OpenStreetMap, as long as:

1. *The object can be verified on the ground and is present*
2. *The object is permanent*

<img src="./assets/svg/osm-logo.svg" class="h-48"/>

The following items are thus *not* welcome:

- Do not add events such as a festival
- Do not add measurements of e.g. air quality, traffic counts, ... [Sensor.Community](https://sensor.community/) is the right place for this
- Do not add points that are only interesting to you (e.g. the route of your next trip). [UMap](https://umap.openstreetmap.fr) is the right tool for this 
- Do not add privacy-sensitive information, e.g. the names of persons living in a house
- Do not add data about now demolished items, such as 'there was a battle here 100 years ago' or 'there was a school here, before it was completely demolished and rebuild'. This can be added to [OpenHistoricalMap](https://www.openhistoricalmap.org/) instead.
`,`# How can OpenStreetMap data be reused?

OpenStreetMap data can be reused freely, including for commercial purposes. However, you have to:

1. Give attribution
2. Keep the data open - changes to data based on OpenStreetMap must be published under the same license.

See the [full copyright notice](https://osm.org/copyright) for details

This also means that we are *not* allowed to copy data from other maps. Do not enter data based on Google Maps!
`,`# How does OpenStreetMap organise the data?

In OpenStreetMap, the geodata can be one of three types:

- **Points** which have a geocoordinate
- **Lines** which are a _list_ of points. Closed lines are used to represent polygons
- **Relations** which are a _list_ of points, lines and/or other relations.

All of those objects have a set of **attributes**. These are pairs of a **key** and a **value** which tell us what a point or line does represent. For example, \`amenity=bench\` represents a sitting bench. 

You can find the meaning of all those keys and values on the [OpenStreetMap-wiki](https://wiki.openstreetmap.org/)


<img src="./assets/docs/NodesAndLines.svg" class="mt-8">
`,`# OpenStreetMap does **not** have layers

Many traditional GIS-applications organise the data into layers.

OpenStreetMap does not do this. Consider this place:

<div class="flex">
<img class="w-1/2 pr-4" src="./assets/docs/SpelOpDeWagen.jpg">

<div>

This place has three functions:

- It is a shop, selling boardgames
- It is a caf, where one can drink a tea (while testing one of the board games)
- It is a social inclusion project for people with a mental disability

In a traditional system with layers, one would either have to choose the most fitting layer (e.g. the layer \`pub\`, \`shops\` or \`social facility\`? ) losing the multi-facetted aspect of the place. 
Another approach could be to add it to all three layers, duplicating the data. However, this makes maintaining the data harder.
</div>
</div>
`,`# What is MapComplete?

MapComplete is a map viewer and editor. A contributor is presented a *thematic map* with features that are relevant to this topic.

These features are based on OpenStreetMap. If some data is not known, the user will be asked some **questions** and is invited to answer them. These answers are sent back to OpenStreetMap, updating it there.

<img src="./assets/docs/UIExample.png" class="w-1/2"/>

Data can also be loaded and visualised from external sources. No changes can be made to this externally loaded data in that case.


`,`# MapComplete _does_ have layers

A layer in mapcomplete describes a single type of object, e.g. _shops_, _toilets_, _benches_, _public bookcases_.

A layer tells us:

- What features to load from OpenStreetMap - thus what attributes the displayed data should have
  - (Or where to find the data if we are using an external datasource)
- How these should be displayed on the map
- What should be shown in the popup...
- ... and what questions should be asked
- How to create a _new point_ onto the map
`,`# MapComplete does have themes

A _theme_ is a **collection of layers**, with a title and a description.

For example, [cyclofix](https://mapcomplete.org/cyclofix) has many bicycle-related layers (of which items are shown on the map) and an introduction.

<div class="flex mt-8">
<img src="./assets/docs/CyclofixMap.png">
<img src="./assets/docs/CyclofixIntro.png">
<img src="./assets/docs/CyclofixLayers.png">
</div>

`,`# Studio

In MapComplete Studio, you can create and edit layers and themes to tweak it for your needs. 

As a reminder:

- [OpenStreetMap](https://openstreetmap.org) is an open, geographical database which can be reused under [a permissive license](https://openstreetmap.org/copyright)
- MapComplete visualises data (mostly) from OpenStreetMap and can add new points and attributes to OpenStreetMap
- MapComplete works with layers; which can be bundled into a theme

Have fun creating your custom MapComplete-map!
`],el={sections:ai},nt=Object.freeze(Object.defineProperty({__proto__:null,default:el,sections:ai},Symbol.toStringTag,{value:"Module"})),ri=[`# How to work with TagRenderings

The information box shows various attributes of the selected feature in a human friendly way.

This is done by a **tagRendering** which converts attributes into text.

This can be done by using **predefined options** (mappings) or with a **render**-string
`,'# Predefined options\n\nA predefined option states that, `if` a certain tag is present, `then` a certain text should be shown.\n\nFor example, a playground may be lit or not.\nIn OpenStreetMap, this is encoded with the tag `lit=yes` or `lit=no`. We might want to show `This playground is lit at night` and `This playground is not lit at night` to users of MapComplete.\n\nThis is what this will look like in the interface:\n\n<img class="w-1/2" src="./assets/docs/PredefinedOption.png"/>\n',`# Substituting attributes

If none of the predefined options match, the string given in the \`render\`-field is used (under the question _"What text should be rendered?"_).

A special property about all shown texts is that, **if the name of a key appears between braces, this will be replaced by the corresponding value**.

For example, if the object has tags \`min_age=3\` and the text to display is \`Accessible to kids older than {min_age} years\`, then this will be displayed to the user as **Accessible to kids older than 3 years**

Note that this also works withing predifined options
`,"# Special values\n\nSpecial components can be summoned by calling them. For example, the relevant wikipedia will be displayed by entering the text `{wikipedia()}`. A table with opening hours is displayed with `{opening_hours()}`. For a full reference, [see the documentation](https://github.com/pietervdvn/MapComplete/blob/master/Docs/SpecialRenderings.md).\n",`# Requesting data with predefined options

These renderings can be turned into a way to contribute data easily. If a **question** is provided, then these renderings will be asked if unknown or gain the pencil to make changes. 

A predefined option will show up as an option that can be picked.
<img class="w-1/2" src="./assets/docs/QuestionPredefinedOptions.png"/>
`,`# Requesting data with an input field

It is also possible to have a text field. For this, the **key** to write into must be given (_What is the name of the attribute that should be written to?_), in this case \`max_age\`.
<img class="w-1/2" src="./assets/docs/QuestionTextField.png"/>
`,`# Combining predefined options and freeform text

A text field and predefined options can be combined. The contributor can then choose between a predefined option or filling out something.
<img class="w-1/2"  src="./assets/docs/QuestionCombined.png"/>
`,`# Selecting multiple values

One can set a question to allow multiple answers. This works with predefined options or a freeform text field.

<img  class="w-1/2" src="./assets/docs/QuestionMulti.png"/>

Note that these will be rendered as a list:

<img class="w-1/2" src="./assets/docs/RenderMulti.png"/>
`],tl={sections:ri},it=Object.freeze(Object.defineProperty({__proto__:null,default:tl,sections:ri},Symbol.toStringTag,{value:"Module"}));function nl(o){let e,t,n,i,a;return n=new ht({props:{class:"h-6 w-6 shrink-0"}}),{c(){e=v("a"),t=O(`Try it out
        `),$(n.$$.fragment),_(e,"class","primary button"),_(e,"href",i=o[9]+o[0].server.urlFor(o[3],"themes")),_(e,"target","_blank"),_(e,"rel","noopener")},m(s,l){b(s,e,l),g(e,t),x(n,e,null),a=!0},p(s,l){(!a||l&9&&i!==(i=s[9]+s[0].server.urlFor(s[3],"themes")))&&_(e,"href",i)},i(s){a||(u(n.$$.fragment,s),a=!0)},o(s){m(n.$$.fragment,s),a=!1},d(s){s&&y(e),C(n)}}}function il(o){let e,t,n;return{c(){e=v("div"),t=O(o[4]),n=O(" errors detected"),_(e,"class","alert")},m(i,a){b(i,e,a),g(e,t),g(e,n)},p(i,a){a&16&&Z(t,i[4])},i:z,o:z,d(i){i&&y(e)}}}function ol(o){let e;return{c(){e=v("div"),e.textContent="Basic properties",_(e,"slot","title0")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function sl(o){let e,t,n,i,a,s,l;return t=new me({props:{configs:o[2].basic,path:[],state:o[0],title:"Basic properties"}}),i=new me({props:{configs:o[2].start_location,path:[],state:o[0],title:"Start location"}}),s=new oi({props:{state:o[0],backToStudio:o[1],objectType:"theme"}}),{c(){e=v("div"),$(t.$$.fragment),n=A(),$(i.$$.fragment),a=A(),$(s.$$.fragment),_(e,"slot","content0"),_(e,"class","mb-8")},m(r,h){b(r,e,h),x(t,e,null),g(e,n),x(i,e,null),g(e,a),x(s,e,null),l=!0},p(r,h){const d={};h&4&&(d.configs=r[2].basic),h&1&&(d.state=r[0]),t.$set(d);const p={};h&4&&(p.configs=r[2].start_location),h&1&&(p.state=r[0]),i.$set(p);const c={};h&1&&(c.state=r[0]),h&2&&(c.backToStudio=r[1]),s.$set(c)},i(r){l||(u(t.$$.fragment,r),u(i.$$.fragment,r),u(s.$$.fragment,r),l=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),m(s.$$.fragment,r),l=!1},d(r){r&&y(e),C(t),C(i),C(s)}}}function al(o){let e;return{c(){e=v("div"),e.textContent="Layers",_(e,"slot","title1")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function rl(o){let e,t,n;return t=new me({props:{configs:o[2].layers,path:[],state:o[0]}}),{c(){e=v("div"),$(t.$$.fragment),_(e,"slot","content1")},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,a){const s={};a&4&&(s.configs=i[2].layers),a&1&&(s.state=i[0]),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function ll(o){let e;return{c(){e=v("div"),e.textContent="Feature switches",_(e,"slot","title2")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function hl(o){let e,t,n;return t=new me({props:{configs:o[2].feature_switches,path:[],state:o[0]}}),{c(){e=v("div"),$(t.$$.fragment),_(e,"slot","content2")},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,a){const s={};a&4&&(s.configs=i[2].feature_switches),a&1&&(s.state=i[0]),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function dl(o){let e;return{c(){e=v("div"),e.textContent="Advanced options",_(e,"slot","title3")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function pl(o){let e,t,n;return t=new me({props:{configs:o[2].advanced,path:[],state:o[0]}}),{c(){e=v("div"),$(t.$$.fragment),_(e,"slot","content3")},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,a){const s={};a&4&&(s.configs=i[2].advanced),a&1&&(s.state=i[0]),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function cl(o){let e;return{c(){e=v("div"),e.textContent="Configuration file",_(e,"slot","title4")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function fl(o){let e,t,n,i,a,s,l,r;return a=new ii({props:{state:o[0]}}),l=new Zn({props:{messages:o[5]}}),{c(){e=v("div"),t=v("div"),t.textContent="Below, you'll find the raw configuration file in `.json`-format. This is mostly for\n          debugging purposes, but you can also edit the file directly if you want.",n=A(),i=v("div"),$(a.$$.fragment),s=A(),$(l.$$.fragment),_(i,"class","literal-code overflow-y-auto h-full"),Mn(i,"min-height","75%"),_(e,"slot","content4"),_(e,"class","flex h-full flex-col")},m(h,d){b(h,e,d),g(e,t),g(e,n),g(e,i),x(a,i,null),g(e,s),x(l,e,null),r=!0},p(h,d){const p={};d&1&&(p.state=h[0]),a.$set(p);const c={};d&32&&(c.messages=h[5]),l.$set(c)},i(h){r||(u(a.$$.fragment,h),u(l.$$.fragment,h),r=!0)},o(h){m(a.$$.fragment,h),m(l.$$.fragment,h),r=!1},d(h){h&&y(e),C(a),C(l)}}}function ul(o){let e,t,n,i,a,s,l,r,h,d,p,c,f;const w=o[13].default,I=be(w,o,o[14],null),T=[il,nl],F=[];function L(D,j){return D[4]>0?0:1}return r=L(o),h=F[r]=T[r](o),c=new Hn({props:{tab:o[0].selectedTab,$$slots:{content4:[fl],title4:[cl],content3:[pl],title3:[dl],content2:[hl],title2:[ll],content1:[rl],title1:[al],content0:[sl],title0:[ol]},$$scope:{ctx:o}}}),{c(){e=v("div"),t=v("div"),I&&I.c(),n=A(),i=v("h3"),a=O("Editing theme "),s=O(o[3]),l=A(),h.c(),d=A(),p=v("div"),$(c.$$.fragment),_(t,"class","my-2 flex w-full justify-between"),_(p,"class","m4 h-full overflow-y-auto"),_(e,"class","flex h-screen flex-col")},m(D,j){b(D,e,j),g(e,t),I&&I.m(t,null),g(t,n),g(t,i),g(i,a),g(i,s),g(t,l),F[r].m(t,null),g(e,d),g(e,p),x(c,p,null),f=!0},p(D,[j]){I&&I.p&&(!f||j&16384)&&ye(I,w,D,D[14],f?ve(w,D[14],j,null):we(D[14]),null),(!f||j&8)&&Z(s,D[3]);let S=r;r=L(D),r===S?F[r].p(D,j):(G(),m(F[S],1,1,()=>{F[S]=null}),Y(),h=F[r],h?h.p(D,j):(h=F[r]=T[r](D),h.c()),u(h,1),h.m(t,null));const q={};j&1&&(q.tab=D[0].selectedTab),j&16423&&(q.$$scope={dirty:j,ctx:D}),c.$set(q)},i(D){f||(u(I,D),u(h),u(c.$$.fragment,D),f=!0)},o(D){m(I,D),m(h),m(c.$$.fragment,D),f=!1},d(D){D&&y(e),I&&I.d(D),F[r].d(),C(c)}}}function gl(o,e,t){let n,i,a,{$$slots:s={},$$scope:l}=e,{state:r}=e,{osmConnection:h}=e,{backToStudio:d}=e,p=r.schema.filter(j=>j.path.length>0);new si("theme",r.selectedTab,r.getStoreFor(["id"]));let{selfLayers:c}=e,{otherLayers:f}=e;{const S=p.find(q=>q.path.join(".")==="layers").hints.suggestions;S.unshift(...c.map(q=>({if:`value=https://studio.mapcomplete.org/${q.owner}/layers/${q.id}/${q.id}.json`,then:`<b>${q.id}</b> (made by you)`})));for(let q=0;q<f.length;q++){const R=f[q],N={if:`value=https://studio.mapcomplete.org/${R.owner}/layers/${R.id}/${R.id}.json`,then:`<b>${R.id}</b> (made by ${R.owner})`};h.getInformationAboutUser(R.owner).then(J=>{N.then=`<b>${R.id}</b> (made by ${J.display_name})`}),S.push(N)}}let w=r.messages;te(o,w,j=>t(5,a=j));let I=w.map(j=>j.filter(S=>S.level==="error").length);te(o,I,j=>t(4,i=j));let T=r.getStoreFor(["id"]);te(o,T,j=>t(3,n=j));const F=window.location,L=F.protocol+"//"+F.host+"/theme.html?userlayout=",D={};for(const j of p){if(j.path.length>1&&j.path[0]==="layers")continue;const S=j.hints.group??"no-group";(D[S]??(D[S]=[])).push(j)}return console.log({perRegion:D,schema:p}),o.$$set=j=>{"state"in j&&t(0,r=j.state),"osmConnection"in j&&t(10,h=j.osmConnection),"backToStudio"in j&&t(1,d=j.backToStudio),"selfLayers"in j&&t(11,c=j.selfLayers),"otherLayers"in j&&t(12,f=j.otherLayers),"$$scope"in j&&t(14,l=j.$$scope)},[r,d,D,n,i,a,w,I,T,L,h,c,f,s,l]}class ml extends ae{constructor(e){super(),re(this,e,gl,ul,le,{state:0,osmConnection:10,backToStudio:1,selfLayers:11,otherLayers:12})}}function bl(o){let e,t,n,i=o[16].error+"",a,s,l;return{c(){e=v("div"),t=v("div"),n=O("Something went wrong while contacting the MapComplete Studio Server: "),a=O(i),s=O(`
    The server might be offline. Please:
    `),l=v("ul"),l.innerHTML=`<li>Try again in a few minutes</li> 
      <li>Contact <a href="https://app.element.io/#/room/#MapComplete:matrix.org">the MapComplete community via the chat.</a>
        Someone might be able to help you</li> 
      <li>File <a href="https://github.com/pietervdvn/MapComplete/issues">an issue</a></li> 
      <li>Contact the devs via <a href="mailto:info@posteo.net">email</a></li>`,_(t,"class","alert")},m(r,h){b(r,e,h),g(e,t),g(t,n),g(t,a),g(e,s),g(e,l)},p(r,h){h[0]&65536&&i!==(i=r[16].error+"")&&Z(a,i)},d(r){r&&y(e)}}}function yl(o){let e,t;return e=new ml({props:{state:o[22],selfLayers:o[9],otherLayers:o[10],osmConnection:o[17],backToStudio:o[27],$$slots:{default:[$l]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&512&&(a.selfLayers=n[9]),i[0]&1024&&(a.otherLayers=n[10]),i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function wl(o){let e,t;return e=new xr({props:{state:o[20],backToStudio:o[27],$$slots:{default:[Cl]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function vl(o){let e,t,n;return t=new Ki({}),{c(){e=v("div"),$(t.$$.fragment),_(e,"class","h-8 w-8")},m(i,a){b(i,e,a),x(t,e,null),n=!0},p:z,i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function _l(o){let e,t,n,i,a,s,l,r,h,d,p,c,f,w,I,T,F,L,D,j,S,q,R;return t=new De({props:{clss:"small p-1",imageClass:"w-8 h-8",$$slots:{default:[Rl]},$$scope:{ctx:o}}}),t.$on("click",o[37]),r=new Un({props:{"aria-hidden":"true",class:"h-8 w-8"}}),c=new Oe({props:{osmConnection:o[17],layerIds:o[12],$$slots:{title:[Al]},$$scope:{ctx:o}}}),c.$on("layerSelected",o[25]),T=new Oe({props:{osmConnection:o[17],layerIds:o[13]}}),T.$on("layerSelected",o[25]),j=new Oe({props:{osmConnection:o[17],layerIds:o[14]}}),j.$on("layerSelected",o[25]),{c(){e=v("div"),$(t.$$.fragment),n=A(),i=v("h2"),i.textContent="Choose a theme to edit",a=A(),s=v("form"),l=v("label"),$(r.$$.fragment),h=A(),d=v("input"),p=A(),$(c.$$.fragment),f=A(),w=v("h3"),w.textContent="Themes by other contributors",I=A(),$(T.$$.fragment),F=A(),L=v("h3"),L.textContent="Official themes by MapComplete",D=A(),$(j.$$.fragment),_(d,"class","mr-4 w-full outline-none"),_(d,"id","theme-search"),_(d,"type","search"),_(d,"placeholder","Filter themes by name"),_(l,"class","neutral-label my-2 flex w-full items-center rounded-full border-2 border-black sm:w-1/2"),_(s,"class","flex justify-center"),_(e,"class","m-4 flex flex-col")},m(N,J){b(N,e,J),x(t,e,null),g(e,n),g(e,i),g(e,a),g(e,s),g(s,l),x(r,l,null),g(l,h),g(l,d),et(d,o[1]),g(e,p),x(c,e,null),g(e,f),g(e,w),g(e,I),x(T,e,null),g(e,F),g(e,L),g(e,D),x(j,e,null),S=!0,q||(R=K(d,"input",o[38]),q=!0)},p(N,J){const P={};J[1]&4194304&&(P.$$scope={dirty:J,ctx:N}),t.$set(P),J[0]&2&&d.value!==N[1]&&et(d,N[1]);const W={};J[0]&4096&&(W.layerIds=N[12]),J[1]&4194304&&(W.$$scope={dirty:J,ctx:N}),c.$set(W);const k={};J[0]&8192&&(k.layerIds=N[13]),T.$set(k);const M={};J[0]&16384&&(M.layerIds=N[14]),j.$set(M)},i(N){S||(u(t.$$.fragment,N),u(r.$$.fragment,N),u(c.$$.fragment,N),u(T.$$.fragment,N),u(j.$$.fragment,N),S=!0)},o(N){m(t.$$.fragment,N),m(r.$$.fragment,N),m(c.$$.fragment,N),m(T.$$.fragment,N),m(j.$$.fragment,N),S=!1},d(N){N&&y(e),C(t),C(r),C(c),C(T),C(j),q=!1,R()}}}function Tl(o){let e,t,n,i,a,s,l,r,h,d,p,c,f,w,I,T,F,L,D,j,S,q,R,N,J,P,W;return t=new De({props:{clss:"small p-1",imageClass:"w-8 h-8",$$slots:{default:[Sl]},$$scope:{ctx:o}}}),t.$on("click",o[35]),r=new Un({props:{"aria-hidden":"true",class:"h-8 w-8"}}),c=new Oe({props:{osmConnection:o[17],layerIds:o[9],$$slots:{title:[Il]},$$scope:{ctx:o}}}),c.$on("layerSelected",o[24]),L=new Oe({props:{osmConnection:o[17],layerIds:o[10]}}),L.$on("layerSelected",o[24]),N=new Oe({props:{osmConnection:o[17],layerIds:o[11]}}),N.$on("layerSelected",o[24]),{c(){e=v("div"),$(t.$$.fragment),n=A(),i=v("h2"),i.textContent="Choose a layer to edit",a=A(),s=v("form"),l=v("label"),$(r.$$.fragment),h=A(),d=v("input"),p=A(),$(c.$$.fragment),f=A(),w=v("h3"),w.textContent="Layers by other contributors",I=A(),T=v("div"),T.textContent=`Selecting a layer will create a copy in your account that you edit. You will not change
          the version of the other contributor`,F=A(),$(L.$$.fragment),D=A(),j=v("h3"),j.textContent="Official layers by MapComplete",S=A(),q=v("div"),q.textContent=`Selecting a layer will create a copy in your account. You will not change the version that
          is in MapComplete`,R=A(),$(N.$$.fragment),_(d,"class","mr-4 w-full outline-none"),_(d,"id","layer-search"),_(d,"type","search"),_(d,"placeholder","Filter layers by name"),_(l,"class","neutral-label my-2 flex w-full items-center rounded-full border-2 border-black sm:w-1/2"),_(s,"class","flex justify-center"),_(e,"class","m-4 flex flex-col")},m(k,M){b(k,e,M),x(t,e,null),g(e,n),g(e,i),g(e,a),g(e,s),g(s,l),x(r,l,null),g(l,h),g(l,d),et(d,o[0]),g(e,p),x(c,e,null),g(e,f),g(e,w),g(e,I),g(e,T),g(e,F),x(L,e,null),g(e,D),g(e,j),g(e,S),g(e,q),g(e,R),x(N,e,null),J=!0,P||(W=K(d,"input",o[36]),P=!0)},p(k,M){const X={};M[1]&4194304&&(X.$$scope={dirty:M,ctx:k}),t.$set(X),M[0]&1&&d.value!==k[0]&&et(d,k[0]);const B={};M[0]&512&&(B.layerIds=k[9]),M[1]&4194304&&(B.$$scope={dirty:M,ctx:k}),c.$set(B);const E={};M[0]&1024&&(E.layerIds=k[10]),L.$set(E);const he={};M[0]&2048&&(he.layerIds=k[11]),N.$set(he)},i(k){J||(u(t.$$.fragment,k),u(r.$$.fragment,k),u(c.$$.fragment,k),u(L.$$.fragment,k),u(N.$$.fragment,k),J=!0)},o(k){m(t.$$.fragment,k),m(r.$$.fragment,k),m(c.$$.fragment,k),m(L.$$.fragment,k),m(N.$$.fragment,k),J=!1},d(k){k&&y(e),C(t),C(r),C(c),C(L),C(N),P=!1,W()}}}function ql(o){let e,t,n,i,a,s,l,r,h,d,p,c,f,w,I,T,F,L,D,j,S,q,R,N,J,P,W,k;return a=new qe({props:{$$slots:{default:[jl]},$$scope:{ctx:o}}}),a.$on("click",o[30]),l=new qe({props:{$$slots:{default:[Jl]},$$scope:{ctx:o}}}),l.$on("click",o[31]),h=new qe({props:{$$slots:{default:[Wl]},$$scope:{ctx:o}}}),h.$on("click",o[32]),p=new qe({props:{$$slots:{default:[Ml]},$$scope:{ctx:o}}}),p.$on("click",o[33]),w=new lo({props:{class:"h-6 w-6"}}),L=new Wi({props:{class:"h-6 w-6"}}),j=new Bi({props:{t:Ui.t.general.backToIndex}}),R=new Gi({props:{selected:o[18],$$slots:{default:[Ol]},$$scope:{ctx:o}}}),{c(){e=v("div"),t=v("div"),n=v("h1"),n.textContent="MapComplete Studio",i=A(),$(a.$$.fragment),s=A(),$(l.$$.fragment),r=A(),$(h.$$.fragment),d=A(),$(p.$$.fragment),c=A(),f=v("button"),$(w.$$.fragment),I=O(`
            Show the introduction again`),T=A(),F=v("a"),$(L.$$.fragment),D=A(),$(j.$$.fragment),S=A(),q=v("div"),$(R.$$.fragment),N=A(),J=v("span"),J.textContent=`MapComplete version ${o[23]}`,_(f,"class","small"),_(F,"class","button flex"),_(F,"href",Te.HomepageLink()),_(t,"class","flex w-full flex-col"),_(J,"class","subtle"),_(e,"class","flex h-full flex-col justify-between p-4")},m(M,X){b(M,e,X),g(e,t),g(t,n),g(t,i),x(a,t,null),g(t,s),x(l,t,null),g(t,r),x(h,t,null),g(t,d),x(p,t,null),g(t,c),g(t,f),x(w,f,null),g(f,I),g(t,T),g(t,F),x(L,F,null),g(F,D),x(j,F,null),g(e,S),g(e,q),x(R,q,null),g(q,N),g(q,J),P=!0,W||(k=K(f,"click",o[34]),W=!0)},p(M,X){const B={};X[1]&4194304&&(B.$$scope={dirty:X,ctx:M}),a.$set(B);const E={};X[1]&4194304&&(E.$$scope={dirty:X,ctx:M}),l.$set(E);const he={};X[1]&4194304&&(he.$$scope={dirty:X,ctx:M}),h.$set(he);const Q={};X[1]&4194304&&(Q.$$scope={dirty:X,ctx:M}),p.$set(Q);const se={};X[1]&4194304&&(se.$$scope={dirty:X,ctx:M}),R.$set(se)},i(M){P||(u(a.$$.fragment,M),u(l.$$.fragment,M),u(h.$$.fragment,M),u(p.$$.fragment,M),u(w.$$.fragment,M),u(L.$$.fragment,M),u(j.$$.fragment,M),u(R.$$.fragment,M),P=!0)},o(M){m(a.$$.fragment,M),m(l.$$.fragment,M),m(h.$$.fragment,M),m(p.$$.fragment,M),m(w.$$.fragment,M),m(L.$$.fragment,M),m(j.$$.fragment,M),m(R.$$.fragment,M),P=!1},d(M){M&&y(e),C(a),C(l),C(h),C(p),C(w),C(L),C(j),C(R),W=!1,k()}}}function kl(o){let e;return{c(){e=O("MapComplete Studio")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function $l(o){let e,t;return e=new De({props:{clss:"small p-1",imageClass:"w-8 h-8",$$slots:{default:[kl]},$$scope:{ctx:o}}}),e.$on("click",o[40]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function xl(o){let e;return{c(){e=O("MapComplete Studio")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Cl(o){let e,t;return e=new De({props:{clss:"small p-1",imageClass:"w-8 h-8",$$slots:{default:[xl]},$$scope:{ctx:o}}}),e.$on("click",o[39]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Rl(o){let e;return{c(){e=O("MapComplete Studio")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Al(o){let e;return{c(){e=v("h3"),e.textContent="Your themes",_(e,"slot","title")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function Sl(o){let e;return{c(){e=O("MapComplete Studio")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Il(o){let e;return{c(){e=v("h3"),e.textContent="Your layers",_(e,"slot","title")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function jl(o){let e;return{c(){e=v("div"),e.innerHTML=`<div>Edit an existing layer</div> 
              <div class="font-normal">Edit layers you created, others created or from the official MapComplete</div>`,_(e,"class","flex flex-col items-start")},m(t,n){b(t,e,n)},p:z,d(t){t&&y(e)}}}function Jl(o){let e;return{c(){e=O("Create a new layer")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Wl(o){let e;return{c(){e=O("Edit a theme")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Ml(o){let e;return{c(){e=O("Create a new theme")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Ol(o){let e;return{c(){e=O("Enable more options (expert mode)")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Wn(o){let e,t;return e=new Bn({props:{$$slots:{default:[Dl]},$$scope:{ctx:o}}}),e.$on("close",o[42]),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&32768|i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Dl(o){var i;let e,t,n;return t=new Xr({props:{pages:(i={intro:nt,tagrenderings:it}[o[15]])==null?void 0:i.sections}}),t.$on("done",o[41]),{c(){e=v("div"),$(t.$$.fragment),_(e,"class","flex h-full p-4 pr-12")},m(a,s){b(a,e,s),x(t,e,null),n=!0},p(a,s){var r;const l={};s[0]&32768&&(l.pages=(r={intro:nt,tagrenderings:it}[a[15]])==null?void 0:r.sections),t.$set(l)},i(a){n||(u(t.$$.fragment,a),n=!0)},o(a){m(t.$$.fragment,a),n=!1},d(a){a&&y(e),C(t)}}}function Nl(o){var d;let e,t,n,i,a;const s=[ql,Tl,_l,vl,wl,yl],l=[];function r(p,c){return p[2]===void 0?0:p[2]==="edit_layer"?1:p[2]==="edit_theme"?2:p[2]==="loading"?3:p[2]==="editing_layer"?4:p[2]==="editing_theme"?5:-1}~(e=r(o))&&(t=l[e]=s[e](o));let h=((d={intro:nt,tagrenderings:it}[o[15]])==null?void 0:d.sections)&&Wn(o);return{c(){t&&t.c(),n=A(),h&&h.c(),i=ne()},m(p,c){~e&&l[e].m(p,c),b(p,n,c),h&&h.m(p,c),b(p,i,c),a=!0},p(p,c){var w;let f=e;e=r(p),e===f?~e&&l[e].p(p,c):(t&&(G(),m(l[f],1,1,()=>{l[f]=null}),Y()),~e?(t=l[e],t?t.p(p,c):(t=l[e]=s[e](p),t.c()),u(t,1),t.m(n.parentNode,n)):t=null),(w={intro:nt,tagrenderings:it}[p[15]])!=null&&w.sections?h?(h.p(p,c),c[0]&32768&&u(h,1)):(h=Wn(p),h.c(),u(h,1),h.m(i.parentNode,i)):h&&(G(),m(h,1,1,()=>{h=null}),Y())},i(p){a||(u(t),u(h),a=!0)},o(p){m(t),m(h),a=!1},d(p){~e&&l[e].d(p),p&&y(n),h&&h.d(p),p&&y(i)}}}function Fl(o){let e;return{c(){e=O("Please log in to use MapComplete Studio")},m(t,n){b(t,e,n)},d(t){t&&y(e)}}}function Ll(o){let e,t,n;return t=new qe({props:{clss:"primary",$$slots:{default:[Fl]},$$scope:{ctx:o}}}),t.$on("click",o[29]),{c(){e=v("div"),$(t.$$.fragment),_(e,"slot","not-logged-in")},m(i,a){b(i,e,a),x(t,e,null),n=!0},p(i,a){const s={};a[1]&4194304&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){n||(u(t.$$.fragment,i),n=!0)},o(i){m(t.$$.fragment,i),n=!1},d(i){i&&y(e),C(t)}}}function El(o){let e,t;return e=new Zi({props:{ignoreLoading:!0,slot:"else",state:{osmConnection:o[17]},$$slots:{"not-logged-in":[Ll],default:[Nl]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&65031|i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Pl(o){let e,t;return e=new Qi({props:{condition:o[19].map(o[43]),$$slots:{else:[El],default:[bl]},$$scope:{ctx:o}}}),{c(){$(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const a={};i[0]&130567|i[1]&4194304&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){t||(u(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Hl(o,e,t){let n,i,a,s,l,r,h,d=z,p=()=>(d(),d=Me(n,U=>t(9,h=U)),n),c,f=z,w=()=>(f(),f=Me(i,U=>t(10,c=U)),i),I,T=z,F=()=>(T(),T=Me(a,U=>t(11,I=U)),a),L,D=z,j=()=>(D(),D=Me(s,U=>t(12,L=U)),s),S,q=z,R=()=>(q(),q=Me(l,U=>t(13,S=U)),l),N,J=z,P=()=>(J(),J=Me(r,U=>t(14,N=U)),r),W,k;o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>f()),o.$$.on_destroy.push(()=>T()),o.$$.on_destroy.push(()=>D()),o.$$.on_destroy.push(()=>q()),o.$$.on_destroy.push(()=>J());let{studioUrl:M=window.location.hostname==="127.0.0.2"?"http://127.0.0.1:1235":"https://studio.mapcomplete.org"}=e;const X=Hi.GetQueryParameter("oauth_token",void 0,"Used to complete the login");let B=new Xi({oauth_token:X,checkOnlineRegularly:!0});const E=ue.asBoolean(B.GetPreference("studio-expert-mode","false",{documentation:"Indicates if more options are shown in mapcomplete studio"}));E.addCallbackAndRunD(U=>console.log("Expert mode is",U));const he=B.userDetails.data.name,Q=B.userDetails.map(U=>U==null?void 0:U.uid),se=new Cr(M,Q);let ie=se.fetchOverview();te(o,ie,U=>t(16,k=U));let Re="",Je=ie.mapD(U=>{var ee;return(ee=U.success)==null?void 0:ee.filter(je=>je.category==="layers")}),H="",V=ie.mapD(U=>{var ee;return(ee=U.success)==null?void 0:ee.filter(je=>je.category==="themes")}),oe;const We=Qn;let _e=new Vn(We,se,B,{expertMode:E}),Ae=_e.showIntro;te(o,Ae,U=>t(15,W=U));const Qe=Ni;let ce=new bo(Qe,se,{expertMode:E});const Ge=Vi;async function bt(U){const ee=U.detail;return t(2,oe="loading"),_e.startSavingUpdates(!1),_e.configuration.setData(await se.fetch(ee.id,"layers",ee.owner)),_e.startSavingUpdates(),t(2,oe="editing_layer"),_e}async function yt(U){const ee=U.detail;t(2,oe="loading"),ce.startSavingUpdates(!1);const je=await se.fetch(ee.id,"themes",ee.owner);return ce.configuration.setData(je),ce.startSavingUpdates(),t(2,oe="editing_theme"),ce}async function wt(){t(2,oe="loading");const U={credits:he,minzoom:15,pointRendering:[{location:["point","centroid"],marker:[{icon:"circle",color:"white"}]}],tagRenderings:["images"],lineRendering:[{width:1,color:"blue"}]};_e.configuration.setData(U),_e.startSavingUpdates(),t(2,oe="editing_layer")}async function li(){const U=dt.hash.data;if(!U)return;console.log("Selecting state based on ",U);const[ee,je,ki]=U.split("/"),vt={detail:{id:je,owner:Q.data}};(await(ee==="layer"?bt(vt):yt(vt))).selectedTab.setData(Number(ki))}li();function Ne(){console.log("Back to studio"),t(2,oe=void 0),dt.hash.setData(void 0)}const hi=()=>B.AttemptLogin(),di=()=>t(2,oe="edit_layer"),pi=()=>wt(),ci=()=>t(2,oe="edit_theme"),fi=()=>{ce.configuration.setData({}),ce.startSavingUpdates(),t(2,oe="editing_theme")},ui=()=>{Ae.setData("intro")},gi=()=>Ne();function mi(){Re=this.value,t(0,Re)}const bi=()=>Ne();function yi(){H=this.value,t(1,H)}const wi=()=>Ne(),vi=()=>Ne(),_i=()=>{Ae.setData("no")},Ti=()=>{Ae.setData("no")},qi=U=>(U==null?void 0:U.error)!==void 0;return o.$$set=U=>{"studioUrl"in U&&t(28,M=U.studioUrl)},o.$$.update=()=>{o.$$.dirty[0]&1&&p(t(8,n=Je.mapD(U=>U.filter(ee=>ee.owner===Q.data&&ee.id.toLowerCase().includes(Re.toLowerCase())),[Q]))),o.$$.dirty[0]&1&&w(t(7,i=Je.mapD(U=>U.filter(ee=>ee.owner!==void 0&&ee.owner!==Q.data&&ee.id.toLowerCase().includes(Re.toLowerCase())),[Q]))),o.$$.dirty[0]&1&&F(t(6,a=Je.mapD(U=>U.filter(ee=>ee.owner===void 0&&ee.id.toLowerCase().includes(Re.toLowerCase())),[Q]))),o.$$.dirty[0]&2&&j(t(5,s=V.mapD(U=>U.filter(ee=>ee.owner===Q.data&&ee.id.toLowerCase().includes(H.toLowerCase())),[Q]))),o.$$.dirty[0]&2&&R(t(4,l=V.mapD(U=>U.filter(ee=>ee.owner!==void 0&&ee.owner!==Q.data&&ee.id.toLowerCase().includes(H.toLowerCase())),[Q]))),o.$$.dirty[0]&2&&P(t(3,r=V.mapD(U=>U.filter(ee=>ee.owner===void 0&&ee.id.toLowerCase().includes(H.toLowerCase())),[Q])))},[Re,H,oe,r,l,s,a,i,n,h,c,I,L,S,N,W,k,B,E,ie,_e,Ae,ce,Ge,bt,yt,wt,Ne,M,hi,di,pi,ci,fi,ui,gi,mi,bi,yi,wi,vi,_i,Ti,qi]}class Bl extends ae{constructor(e){super(),re(this,e,Hl,Pl,le,{studioUrl:28},null,[-1,-1])}}class Ul{setup(){new Ii(Bl,{}).SetClass("h-full").AttachTo("main")}}new Ul().setup();
//# sourceMappingURL=studio-314e299c.js.map
