{"version":3,"file":"LanguagePicker-6c85c104.js","sources":["../../node_modules/@babeard/svelte-heroicons/solid/Language/Language.svelte","../../src/UI/InputElement/LanguagePicker.svelte"],"sourcesContent":["<!-- svelte-ignore a11y-mouse-events-have-key-events --><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" {...$$restProps} on:click on:mouseover on:mouseenter on:mouseleave on:keydown><slot />\n  <path fill-rule=\"evenodd\" d=\"M9 2.25a.75.75 0 01.75.75v1.506a49.38 49.38 0 015.343.371.75.75 0 11-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 01-2.969 6.323c.317.384.65.753.998 1.107a.75.75 0 11-1.07 1.052A18.902 18.902 0 019 13.687a18.823 18.823 0 01-5.656 4.482.75.75 0 11-.688-1.333 17.323 17.323 0 005.396-4.353A18.72 18.72 0 015.89 8.598a.75.75 0 011.388-.568A17.21 17.21 0 009 11.224a17.17 17.17 0 002.391-5.165 48.038 48.038 0 00-8.298.307.75.75 0 01-.186-1.489 49.159 49.159 0 015.343-.371V3A.75.75 0 019 2.25zM15.75 9a.75.75 0 01.68.433l5.25 11.25a.75.75 0 01-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 01-1.36-.634l5.25-11.25A.75.75 0 0115.75 9zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726z\" clip-rule=\"evenodd\"/>\n</svg>","<script lang=\"ts\">\n  // Languages in the language itself\n  import native from \"../../assets/language_native.json\";\n  // Translated languages\n  import language_translations from \"../../assets/language_translations.json\";\n\n  import { UIEventSource } from \"../../Logic/UIEventSource\";\n  import Locale from \"../i18n/Locale\";\n  import { LanguageIcon } from \"@babeard/svelte-heroicons/solid\";\n  import Dropdown from \"../Base/Dropdown.svelte\";\n\n  /**\n   * Languages one can choose from\n   * Defaults to _all_ languages known by MapComplete\n   */\n  export let availableLanguages: string[] = Object.keys(native);\n  /**\n   * EventStore to assign to, defaults to 'Locale.langauge'\n   */\n  export let assignTo: UIEventSource<string> = Locale.language;\n  export let preferredLanguages: UIEventSource<string[]> = undefined;\n  let preferredFiltered: string[] = undefined;\n  preferredLanguages?.addCallbackAndRunD(preferredLanguages => {\n    let lng = navigator.language;\n    if (lng === \"en-US\") {\n      lng = \"en\";\n    }\n    if (preferredLanguages?.indexOf(lng) < 0) {\n      preferredLanguages?.push(lng);\n    }\n    preferredFiltered = preferredLanguages?.filter(l => availableLanguages.indexOf(l) >= 0);\n  });\n\n  let current = Locale.language;\n\n</script>\n\n{#if availableLanguages?.length > 1}\n  <form class=\"flex items-center\">\n\n    <LanguageIcon class=\"h-4 w-4 mr-1\" />\n    <Dropdown value={assignTo}>\n      {#if preferredFiltered}\n        {#each preferredFiltered as language}\n          <option value={language} class=\"font-bold\">\n            {native[language] ?? \"\"}\n            {#if language !== $current}\n              ({language_translations[language]?.[$current] ?? language})\n            {/if}\n          </option>\n        {/each}\n        <option disabled></option>\n      {/if}\n\n      {#each availableLanguages as language}\n        <option value={language} class=\"font-bold\">\n          {native[language] ?? \"\"}\n          {#if language !== $current}\n            ({(language_translations[language]?.[$current] + \" - \" + language) ?? language})\n          {/if}\n        </option>\n      {/each}\n    </Dropdown>\n  </form>\n\n{/if}\n"],"names":["ctx","insert","target","svg","anchor","append","path","form","i","option","t1_value","_a","language_translations","dirty","set_data","t1","native","if_block","create_if_block_3","t0","t0_value","create_if_block_1","create_if_block_2","create_if_block","availableLanguages","$$props","assignTo","Locale","preferredLanguages","preferredFiltered","lng","$$invalidate","l","current"],"mappings":"yjBAA+JA,EAAW,CAAA,81BAAlHC,EAEnDC,EAAAC,EAAAC,CAAA,iBADHC,EAAquBF,EAAAG,CAAA,sUADxkBN,EAAW,CAAA,o60KCyCrJA,EAAQ,CAAA,8IAH3BC,EAyBMC,EAAAK,EAAAH,CAAA,uEAtBaJ,EAAQ,CAAA,0MAEdA,EAAiB,CAAA,uBAAtB,OAAIQ,GAAA,mMAQNP,EAAyBC,EAAAO,EAAAL,CAAA,qBARlBJ,EAAiB,CAAA,oBAAtB,OAAIQ,GAAA,EAAA,yHAAJ,iEAIME,KAAAC,EAAAC,EAAsBZ,EAAY,CAAA,CAAA,IAAlC,YAAAW,EAAkCX,QAAaA,EAAQ,CAAA,GAAA,sBADjC,GACvB,aAAyD,GAC5D,mDADIa,EAAA,IAAAH,KAAAA,KAAAC,EAAAC,EAAsBZ,EAAY,CAAA,CAAA,IAAlC,YAAAW,EAAkCX,QAAaA,EAAQ,CAAA,GAAA,KAAAc,EAAAC,EAAAL,CAAA,yDAF1DM,EAAOhB,EAAQ,CAAA,CAAA,GAAK,IAAE,SAClBiB,EAAAjB,OAAaA,EAAQ,CAAA,GAAAkB,EAAAlB,CAAA,6DAFbA,EAAQ,CAAA,qDAAvBC,EAKQC,EAAAO,EAAAL,CAAA,oDAJLY,EAAOhB,EAAQ,CAAA,CAAA,GAAK,IAAE,KAAAc,EAAAK,EAAAC,CAAA,EAClBpB,OAAaA,EAAQ,CAAA,uEAFbA,EAAQ,CAAA,2FAclBW,EAAAC,EAAsBZ,EAAY,CAAA,CAAA,IAAlC,YAAAW,EAAkCX,OAAY,MAAQA,EAAQ,CAAA,qBADzC,GACvB,aAA8E,GACjF,iEADKW,EAAAC,EAAsBZ,EAAY,CAAA,CAAA,IAAlC,YAAAW,EAAkCX,OAAY,MAAQA,EAAQ,CAAA,IAAac,EAAAC,EAAAL,CAAA,yDAF/EM,EAAOhB,EAAQ,CAAA,CAAA,GAAK,IAAE,WAClBiB,EAAAjB,OAAaA,EAAQ,CAAA,GAAAqB,EAAArB,CAAA,mEAFbA,EAAQ,CAAA,qDAAvBC,EAKQC,EAAAO,EAAAL,CAAA,2DAJLY,EAAOhB,EAAQ,CAAA,CAAA,GAAK,IAAE,KAAAc,EAAAK,EAAAC,CAAA,EAClBpB,OAAaA,EAAQ,CAAA,oEAFbA,EAAQ,CAAA,sFAbpBA,EAAiB,CAAA,GAAAsB,EAAAtB,CAAA,IAYfA,EAAkB,CAAA,uBAAvB,OAAIQ,GAAA,uLAZDR,EAAiB,CAAA,0EAYfA,EAAkB,CAAA,oBAAvB,OAAIQ,GAAA,EAAA,yHAAJ,kFAjBHG,EAAAX,EAAkB,CAAA,IAAlB,YAAAW,EAAoB,QAAS,GAACY,EAAAvB,CAAA,gFAA9BW,EAAAX,EAAkB,CAAA,IAAlB,YAAAW,EAAoB,QAAS,kMAtBrB,CAAA,mBAAAa,EAA+B,OAAO,KAAKR,CAAM,CAAA,EAAAS,GAIjD,SAAAC,EAAkCC,EAAO,QAAA,EAAAF,EACzC,CAAA,mBAAAG,QAA8C,EAAAH,EACrDI,EACJD,GAAA,MAAAA,EAAoB,mBAAmBA,GAAAA,KACjCE,EAAM,UAAU,SAChBA,IAAQ,UACVA,EAAM,OAEJF,GAAAA,YAAAA,EAAoB,QAAQE,IAAO,IACrCF,GAAAA,MAAAA,EAAoB,KAAKE,IAE3BC,EAAA,EAAAF,EAAoBD,GAAAA,YAAAA,EAAoB,OAAOI,GAAKR,EAAmB,QAAQQ,CAAC,GAAK,EAAC,QAGpFC,EAAUN,EAAO"}