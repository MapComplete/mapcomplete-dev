var cv=Object.defineProperty;var fv=(r,e,t)=>e in r?cv(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var _e=(r,e,t)=>(fv(r,typeof e!="symbol"?e+"":e,t),t);import{S as Wl,i as Jl,s as Xl,G as fa,l as ol,o as pd,b as Cn,q as gd,d as Yo,f as Yl,r as Os,I as la,J as ha,K as da,u as lv,t as mt,g as Qt,h as jo,v as hv,w as md,x as dv,y as Ds,z as _c,A as bc,C as wc,D as Nf,e as jl,c as Vu,a as Yp,m as Ku,j as Wu,H as vd,L as pv,a1 as gv,E as mv,n as Pf}from"./tw-merge-ef1cf9a3.js";import{U as aa,I as Vs,S as vv}from"./LocalStorageSource-4f66d5e4.js";import{c as uo,a as lu,g as jp,C as yd}from"./Constants-9284aba5.js";import{_ as $p,g as yv,I as _v}from"./FixImages-53ba46aa.js";import{U as Mi}from"./Utils-498bb79d.js";import{L as eo,Q as _d,j as bd,a as bv,T as wv}from"./Tr-6c6c6287.js";import{L as Ev}from"./Loading-bad0ad13.js";import"./store.legacy-2a4e8a1c.js";import{I as xv}from"./Img-26b2d376.js";function Sv(r){let e,t,n,i,o;const a=r[2].default,s=fa(a,r,r[1],null);let u=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},r[0]],c={};for(let f=0;f<u.length;f+=1)c=ol(c,u[f]);return{c(){e=pd("svg"),s&&s.c(),t=pd("path"),Cn(t,"fill-rule","evenodd"),Cn(t,"d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"),Cn(t,"clip-rule","evenodd"),gd(e,c)},m(f,h){Yo(f,e,h),s&&s.m(e,null),Yl(e,t),n=!0,i||(o=[Os(e,"click",r[3]),Os(e,"mouseover",r[4]),Os(e,"mouseenter",r[5]),Os(e,"mouseleave",r[6]),Os(e,"keydown",r[7])],i=!0)},p(f,[h]){s&&s.p&&(!n||h&2)&&la(s,a,f,f[1],n?da(a,f[1],h,null):ha(f[1]),null),gd(e,c=lv(u,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},h&1&&f[0]]))},i(f){n||(mt(s,f),n=!0)},o(f){Qt(s,f),n=!1},d(f){f&&jo(e),s&&s.d(f),i=!1,hv(o)}}}function Cv(r,e,t){const n=[];let i=md(e,n),{$$slots:o={},$$scope:a}=e;function s(p){Ds.call(this,r,p)}function u(p){Ds.call(this,r,p)}function c(p){Ds.call(this,r,p)}function f(p){Ds.call(this,r,p)}function h(p){Ds.call(this,r,p)}return r.$$set=p=>{e=ol(ol({},e),dv(p)),t(0,i=md(e,n)),"$$scope"in p&&t(1,a=p.$$scope)},[i,a,o,s,u,c,f,h]}class $S extends Wl{constructor(e){super(),Jl(this,e,Cv,Sv,Xl,{})}}var _r=63710088e-1,$l={centimeters:_r*100,centimetres:_r*100,degrees:_r/111325,feet:_r*3.28084,inches:_r*39.37,kilometers:_r/1e3,kilometres:_r/1e3,meters:_r,metres:_r,miles:_r/1609.344,millimeters:_r*1e3,millimetres:_r*1e3,nauticalmiles:_r/1852,radians:1,yards:_r*1.0936},Iv={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/_r,yards:1.0936133},al={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function cn(r,e,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}function Av(r,e,t){switch(r){case"Point":return jt(e).geometry;case"LineString":return Br(e).geometry;case"Polygon":return _s(e).geometry;case"MultiPoint":return Qp(e).geometry;case"MultiLineString":return Zp(e).geometry;case"MultiPolygon":return Ec(e).geometry;default:throw new Error(r+" is invalid")}}function jt(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Js(r[0])||!Js(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return cn(n,e,t)}function Mv(r,e,t){return t===void 0&&(t={}),Fr(r.map(function(n){return jt(n,e)}),t)}function _s(r,e,t){t===void 0&&(t={});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:r};return cn(s,e,t)}function Nv(r,e,t){return t===void 0&&(t={}),Fr(r.map(function(n){return _s(n,e)}),t)}function Br(r,e,t){if(t===void 0&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return cn(n,e,t)}function Pv(r,e,t){return t===void 0&&(t={}),Fr(r.map(function(n){return Br(n,e)}),t)}function Fr(r,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function Zp(r,e,t){t===void 0&&(t={});var n={type:"MultiLineString",coordinates:r};return cn(n,e,t)}function Qp(r,e,t){t===void 0&&(t={});var n={type:"MultiPoint",coordinates:r};return cn(n,e,t)}function Ec(r,e,t){t===void 0&&(t={});var n={type:"MultiPolygon",coordinates:r};return cn(n,e,t)}function Lv(r,e,t){t===void 0&&(t={});var n={type:"GeometryCollection",geometries:r};return cn(n,e,t)}function Rv(r,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function xc(r,e){e===void 0&&(e="kilometers");var t=$l[e];if(!t)throw new Error(e+" units is invalid");return r*t}function hu(r,e){e===void 0&&(e="kilometers");var t=$l[e];if(!t)throw new Error(e+" units is invalid");return r/t}function Tv(r,e){return Ws(hu(r,e))}function Ov(r){var e=r%360;return e<0&&(e+=360),e}function Ws(r){var e=r%(2*Math.PI);return e*180/Math.PI}function Ln(r){var e=r%360;return e*Math.PI/180}function Dv(r,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return xc(hu(r,e),t)}function kv(r,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=al[e];if(!n)throw new Error("invalid original units");var i=al[t];if(!i)throw new Error("invalid final units");return r/n*i}function Js(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function Zl(r){return!!r&&r.constructor===Object}function Bv(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(e){if(!Js(e))throw new Error("bbox must only contain numbers")})}function Fv(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}const zv=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:al,bearingToAzimuth:Ov,convertArea:kv,convertLength:Dv,degreesToRadians:Ln,earthRadius:_r,factors:$l,feature:cn,featureCollection:Fr,geometry:Av,geometryCollection:Lv,isNumber:Js,isObject:Zl,lengthToDegrees:Tv,lengthToRadians:hu,lineString:Br,lineStrings:Pv,multiLineString:Zp,multiPoint:Qp,multiPolygon:Ec,point:jt,points:Mv,polygon:_s,polygons:Nv,radiansToDegrees:Ws,radiansToLength:xc,round:Rv,unitsFactors:Iv,validateBBox:Bv,validateId:Fv},Symbol.toStringTag,{value:"Module"}));function wo(r,e,t){if(r!==null)for(var n,i,o,a,s,u,c,f=0,h=0,p,b=r.type,_=b==="FeatureCollection",S=b==="Feature",R=_?r.features.length:1,D=0;D<R;D++){c=_?r.features[D].geometry:S?r.geometry:r,p=c?c.type==="GeometryCollection":!1,s=p?c.geometries.length:1;for(var v=0;v<s;v++){var E=0,M=0;if(a=p?c.geometries[v]:c,a!==null){u=a.coordinates;var O=a.type;switch(f=t&&(O==="Polygon"||O==="MultiPolygon")?1:0,O){case null:break;case"Point":if(e(u,h,D,E,M)===!1)return!1;h++,E++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(e(u[n],h,D,E,M)===!1)return!1;h++,O==="MultiPoint"&&E++}O==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-f;i++){if(e(u[n][i],h,D,E,M)===!1)return!1;h++}O==="MultiLineString"&&E++,O==="Polygon"&&M++}O==="Polygon"&&E++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(M=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-f;o++){if(e(u[n][i][o],h,D,E,M)===!1)return!1;h++}M++}E++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(wo(a.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Uv(r,e,t,n){var i=t;return wo(r,function(o,a,s,u,c){a===0&&t===void 0?i=o:i=e(i,o,a,s,u,c)},n),i}function eg(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}function qv(r,e,t){var n=t;return eg(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function Do(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function tg(r,e,t){var n=t;return Do(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function Hv(r){var e=[];return wo(r,function(t){e.push(t)}),e}function du(r,e){var t,n,i,o,a,s,u,c,f,h,p=0,b=r.type==="FeatureCollection",_=r.type==="Feature",S=b?r.features.length:1;for(t=0;t<S;t++){for(s=b?r.features[t].geometry:_?r.geometry:r,c=b?r.features[t].properties:_?r.properties:{},f=b?r.features[t].bbox:_?r.bbox:void 0,h=b?r.features[t].id:_?r.id:void 0,u=s?s.type==="GeometryCollection":!1,a=u?s.geometries.length:1,i=0;i<a;i++){if(o=u?s.geometries[i]:s,o===null){if(e(null,p,c,f,h)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,p,c,f,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],p,c,f,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function rg(r,e,t){var n=t;return du(r,function(i,o,a,s,u){o===0&&t===void 0?n=i:n=e(n,i,o,a,s,u)}),n}function Na(r,e){du(r,function(t,n,i,o,a){var s=t===null?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(cn(t,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var u;switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var f=t.coordinates[c],h={type:u,coordinates:f};if(e(cn(h,i),n,c)===!1)return!1}})}function Gv(r,e,t){var n=t;return Na(r,function(i,o,a){o===0&&a===0&&t===void 0?n=i:n=e(n,i,o,a)}),n}function ng(r,e){Na(r,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var s,u=0,c=0,f=0;if(wo(t,function(h,p,b,_,S){if(s===void 0||n>u||_>c||S>f){s=h,u=n,c=_,f=S,o=0;return}var R=Br([s,h],t.properties);if(e(R,n,i,S,o)===!1)return!1;o++,s=h})===!1)return!1}}})}function ig(r,e,t){var n=t,i=!1;return ng(r,function(o,a,s,u,c){i===!1&&t===void 0?n=o:n=e(n,o,a,s,u,c),i=!0}),n}function og(r,e){if(!r)throw new Error("geojson is required");Na(r,function(t,n,i){if(t.geometry!==null){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(e(t,n,i,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(e(Br(a[s],t.properties),n,i,s)===!1)return!1;break}}})}function Vv(r,e,t){var n=t;return og(r,function(i,o,a,s){o===0&&t===void 0?n=i:n=e(n,i,o,a,s)}),n}function Kv(r,e){if(e=e||{},!Zl(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,a=e.properties,s;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,s=r.features[t].geometry;break;case"Feature":a=a||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var u=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),Br([u[o],u[o+1]],a,e);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),Br([u[i][o],u[i][o+1]],a,e);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o-1),Br([u[n][o],u[n][o+1]],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o-1),Br([u[n][i][o],u[n][i][o+1]],a,e)}throw new Error("geojson is invalid")}function Wv(r,e){if(e=e||{},!Zl(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,a=e.properties,s;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,s=r.features[t].geometry;break;case"Feature":a=a||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var u=s.coordinates;switch(s.type){case"Point":return jt(u,a,e);case"MultiPoint":return n<0&&(n=u.length+n),jt(u[n],a,e);case"LineString":return o<0&&(o=u.length+o),jt(u[o],a,e);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),jt(u[i][o],a,e);case"MultiLineString":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),jt(u[n][o],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),o<0&&(o=u[n][i].length-o),jt(u[n][i][o],a,e)}throw new Error("geojson is invalid")}const Jv=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Hv,coordEach:wo,coordReduce:Uv,featureEach:Do,featureReduce:tg,findPoint:Wv,findSegment:Kv,flattenEach:Na,flattenReduce:Gv,geomEach:du,geomReduce:rg,lineEach:og,lineReduce:Vv,propEach:eg,propReduce:qv,segmentEach:ng,segmentReduce:ig},Symbol.toStringTag,{value:"Module"}));function ai(r){var e=[1/0,1/0,-1/0,-1/0];return wo(r,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}ai.default=ai;const Xv=Object.freeze(Object.defineProperty({__proto__:null,default:ai},Symbol.toStringTag,{value:"Module"}));function Oi(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ni(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ko(r){return r.type==="Feature"?r.geometry:r}function sl(r,e){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}var Ql={exports:{}},ag={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(uo,function(){function t(v,E,M,O,k){(function F(z,U,W,C,l){for(;C>W;){if(C-W>600){var g=C-W+1,w=U-W+1,x=Math.log(g),N=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*N*(g-N)/g)*(w-g/2<0?-1:1),B=Math.max(W,Math.floor(U-w*N/g+T)),P=Math.min(C,Math.floor(U+(g-w)*N/g+T));F(z,U,B,P,l)}var d=z[U],I=W,K=C;for(n(z,W,U),l(z[C],d)>0&&n(z,W,C);I<K;){for(n(z,I,K),I++,K--;l(z[I],d)<0;)I++;for(;l(z[K],d)>0;)K--}l(z[W],d)===0?n(z,W,K):n(z,++K,C),K<=U&&(W=K+1),U<=K&&(C=K-1)}})(v,E,M||0,O||v.length-1,k||i)}function n(v,E,M){var O=v[E];v[E]=v[M],v[M]=O}function i(v,E){return v<E?-1:v>E?1:0}var o=function(v){v===void 0&&(v=9),this._maxEntries=Math.max(4,v),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(v,E,M){if(!M)return E.indexOf(v);for(var O=0;O<E.length;O++)if(M(v,E[O]))return O;return-1}function s(v,E){u(v,0,v.children.length,E,v)}function u(v,E,M,O,k){k||(k=R(null)),k.minX=1/0,k.minY=1/0,k.maxX=-1/0,k.maxY=-1/0;for(var F=E;F<M;F++){var z=v.children[F];c(k,v.leaf?O(z):z)}return k}function c(v,E){return v.minX=Math.min(v.minX,E.minX),v.minY=Math.min(v.minY,E.minY),v.maxX=Math.max(v.maxX,E.maxX),v.maxY=Math.max(v.maxY,E.maxY),v}function f(v,E){return v.minX-E.minX}function h(v,E){return v.minY-E.minY}function p(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function b(v){return v.maxX-v.minX+(v.maxY-v.minY)}function _(v,E){return v.minX<=E.minX&&v.minY<=E.minY&&E.maxX<=v.maxX&&E.maxY<=v.maxY}function S(v,E){return E.minX<=v.maxX&&E.minY<=v.maxY&&E.maxX>=v.minX&&E.maxY>=v.minY}function R(v){return{children:v,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(v,E,M,O,k){for(var F=[E,M];F.length;)if(!((M=F.pop())-(E=F.pop())<=O)){var z=E+Math.ceil((M-E)/O/2)*O;t(v,z,E,M,k),F.push(E,z,z,M)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(v){var E=this.data,M=[];if(!S(v,E))return M;for(var O=this.toBBox,k=[];E;){for(var F=0;F<E.children.length;F++){var z=E.children[F],U=E.leaf?O(z):z;S(v,U)&&(E.leaf?M.push(z):_(v,U)?this._all(z,M):k.push(z))}E=k.pop()}return M},o.prototype.collides=function(v){var E=this.data;if(!S(v,E))return!1;for(var M=[];E;){for(var O=0;O<E.children.length;O++){var k=E.children[O],F=E.leaf?this.toBBox(k):k;if(S(v,F)){if(E.leaf||_(v,F))return!0;M.push(k)}}E=M.pop()}return!1},o.prototype.load=function(v){if(!v||!v.length)return this;if(v.length<this._minEntries){for(var E=0;E<v.length;E++)this.insert(v[E]);return this}var M=this._build(v.slice(),0,v.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var O=this.data;this.data=M,M=O}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this},o.prototype.insert=function(v){return v&&this._insert(v,this.data.height-1),this},o.prototype.clear=function(){return this.data=R([]),this},o.prototype.remove=function(v,E){if(!v)return this;for(var M,O,k,F=this.data,z=this.toBBox(v),U=[],W=[];F||U.length;){if(F||(F=U.pop(),O=U[U.length-1],M=W.pop(),k=!0),F.leaf){var C=a(v,F.children,E);if(C!==-1)return F.children.splice(C,1),U.push(F),this._condense(U),this}k||F.leaf||!_(F,z)?O?(M++,F=O.children[M],k=!1):F=null:(U.push(F),W.push(M),M=0,O=F,F=F.children[0])}return this},o.prototype.toBBox=function(v){return v},o.prototype.compareMinX=function(v,E){return v.minX-E.minX},o.prototype.compareMinY=function(v,E){return v.minY-E.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(v){return this.data=v,this},o.prototype._all=function(v,E){for(var M=[];v;)v.leaf?E.push.apply(E,v.children):M.push.apply(M,v.children),v=M.pop();return E},o.prototype._build=function(v,E,M,O){var k,F=M-E+1,z=this._maxEntries;if(F<=z)return s(k=R(v.slice(E,M+1)),this.toBBox),k;O||(O=Math.ceil(Math.log(F)/Math.log(z)),z=Math.ceil(F/Math.pow(z,O-1))),(k=R([])).leaf=!1,k.height=O;var U=Math.ceil(F/z),W=U*Math.ceil(Math.sqrt(z));D(v,E,M,W,this.compareMinX);for(var C=E;C<=M;C+=W){var l=Math.min(C+W-1,M);D(v,C,l,U,this.compareMinY);for(var g=C;g<=l;g+=U){var w=Math.min(g+U-1,l);k.children.push(this._build(v,g,w,O-1))}}return s(k,this.toBBox),k},o.prototype._chooseSubtree=function(v,E,M,O){for(;O.push(E),!E.leaf&&O.length-1!==M;){for(var k=1/0,F=1/0,z=void 0,U=0;U<E.children.length;U++){var W=E.children[U],C=p(W),l=(g=v,w=W,(Math.max(w.maxX,g.maxX)-Math.min(w.minX,g.minX))*(Math.max(w.maxY,g.maxY)-Math.min(w.minY,g.minY))-C);l<F?(F=l,k=C<k?C:k,z=W):l===F&&C<k&&(k=C,z=W)}E=z||E.children[0]}var g,w;return E},o.prototype._insert=function(v,E,M){var O=M?v:this.toBBox(v),k=[],F=this._chooseSubtree(O,this.data,E,k);for(F.children.push(v),c(F,O);E>=0&&k[E].children.length>this._maxEntries;)this._split(k,E),E--;this._adjustParentBBoxes(O,k,E)},o.prototype._split=function(v,E){var M=v[E],O=M.children.length,k=this._minEntries;this._chooseSplitAxis(M,k,O);var F=this._chooseSplitIndex(M,k,O),z=R(M.children.splice(F,M.children.length-F));z.height=M.height,z.leaf=M.leaf,s(M,this.toBBox),s(z,this.toBBox),E?v[E-1].children.push(z):this._splitRoot(M,z)},o.prototype._splitRoot=function(v,E){this.data=R([v,E]),this.data.height=v.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(v,E,M){for(var O,k,F,z,U,W,C,l=1/0,g=1/0,w=E;w<=M-E;w++){var x=u(v,0,w,this.toBBox),N=u(v,w,M,this.toBBox),T=(k=x,F=N,z=void 0,U=void 0,W=void 0,C=void 0,z=Math.max(k.minX,F.minX),U=Math.max(k.minY,F.minY),W=Math.min(k.maxX,F.maxX),C=Math.min(k.maxY,F.maxY),Math.max(0,W-z)*Math.max(0,C-U)),B=p(x)+p(N);T<l?(l=T,O=w,g=B<g?B:g):T===l&&B<g&&(g=B,O=w)}return O||M-E},o.prototype._chooseSplitAxis=function(v,E,M){var O=v.leaf?this.compareMinX:f,k=v.leaf?this.compareMinY:h;this._allDistMargin(v,E,M,O)<this._allDistMargin(v,E,M,k)&&v.children.sort(O)},o.prototype._allDistMargin=function(v,E,M,O){v.children.sort(O);for(var k=this.toBBox,F=u(v,0,E,k),z=u(v,M-E,M,k),U=b(F)+b(z),W=E;W<M-E;W++){var C=v.children[W];c(F,v.leaf?k(C):C),U+=b(F)}for(var l=M-E-1;l>=E;l--){var g=v.children[l];c(z,v.leaf?k(g):g),U+=b(z)}return U},o.prototype._adjustParentBBoxes=function(v,E,M){for(var O=M;O>=0;O--)c(E[O],v)},o.prototype._condense=function(v){for(var E=v.length-1,M=void 0;E>=0;E--)v[E].children.length===0?E>0?(M=v[E-1].children).splice(M.indexOf(v[E]),1):this.clear():s(v[E],this.toBBox)},o})})(ag);var Yv=ag.exports;class jv{constructor(e=[],t=$v){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(n(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1,s=t[a];const u=a+1;if(u<this.length&&n(t[u],s)<0&&(a=u,s=t[u]),n(s,o)>=0)break;t[e]=s,e=a}t[e]=o}}function $v(r,e){return r<e?-1:r>e?1:0}const Zv=Object.freeze(Object.defineProperty({__proto__:null,default:jv},Symbol.toStringTag,{value:"Module"})),Qv=lu(Zv);var Sc={exports:{}},ey=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,c=0,f=u-1;c<u;f=c++){var h=t[n+c*2+0],p=t[n+c*2+1],b=t[n+f*2+0],_=t[n+f*2+1],S=p>a!=_>a&&o<(b-h)*(a-p)/(_-p)+h;S&&(s=!s)}return s},ty=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,c=0,f=u-1;c<u;f=c++){var h=t[c+n][0],p=t[c+n][1],b=t[f+n][0],_=t[f+n][1],S=p>a!=_>a&&o<(b-h)*(a-p)/(_-p)+h;S&&(s=!s)}return s},sg=ey,ug=ty;Sc.exports=function(e,t,n,i){return t.length>0&&Array.isArray(t[0])?ug(e,t,n,i):sg(e,t,n,i)};Sc.exports.nested=ug;Sc.exports.flat=sg;var ry=Sc.exports,ul={exports:{}};(function(r,e){(function(t,n){n(e)})(uo,function(t){const i=33306690738754706e-32;function o(S,R,D,v,E){let M,O,k,F,z=R[0],U=v[0],W=0,C=0;U>z==U>-z?(M=z,z=R[++W]):(M=U,U=v[++C]);let l=0;if(W<S&&C<D)for(U>z==U>-z?(k=M-((O=z+M)-z),z=R[++W]):(k=M-((O=U+M)-U),U=v[++C]),M=O,k!==0&&(E[l++]=k);W<S&&C<D;)U>z==U>-z?(k=M-((O=M+z)-(F=O-M))+(z-F),z=R[++W]):(k=M-((O=M+U)-(F=O-M))+(U-F),U=v[++C]),M=O,k!==0&&(E[l++]=k);for(;W<S;)k=M-((O=M+z)-(F=O-M))+(z-F),z=R[++W],M=O,k!==0&&(E[l++]=k);for(;C<D;)k=M-((O=M+U)-(F=O-M))+(U-F),U=v[++C],M=O,k!==0&&(E[l++]=k);return M===0&&l!==0||(E[l++]=M),l}function a(S){return new Float64Array(S)}const s=33306690738754716e-32,u=22204460492503146e-32,c=11093356479670487e-47,f=a(4),h=a(8),p=a(12),b=a(16),_=a(4);t.orient2d=function(S,R,D,v,E,M){const O=(R-M)*(D-E),k=(S-E)*(v-M),F=O-k;if(O===0||k===0||O>0!=k>0)return F;const z=Math.abs(O+k);return Math.abs(F)>=s*z?F:-function(U,W,C,l,g,w,x){let N,T,B,P,d,I,K,Q,Z,te,ne,le,$e,pe,xe,nr,Re,ge;const ir=U-g,Te=C-g,A=W-w,m=l-w;d=(xe=(Q=ir-(K=(I=134217729*ir)-(I-ir)))*(te=m-(Z=(I=134217729*m)-(I-m)))-((pe=ir*m)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=A-(K=(I=134217729*A)-(I-A)))*(te=Te-(Z=(I=134217729*Te)-(I-Te)))-((nr=A*Te)-K*Z-Q*Z-K*te))),f[0]=xe-(ne+d)+(d-Re),d=($e=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=$e-nr),f[1]=$e-(ne+d)+(d-nr),d=(ge=le+ne)-le,f[2]=le-(ge-d)+(ne-d),f[3]=ge;let y=function(Se,ce){let de=ce[0];for(let at=1;at<Se;at++)de+=ce[at];return de}(4,f),L=u*x;if(y>=L||-y>=L||(N=U-(ir+(d=U-ir))+(d-g),B=C-(Te+(d=C-Te))+(d-g),T=W-(A+(d=W-A))+(d-w),P=l-(m+(d=l-m))+(d-w),N===0&&T===0&&B===0&&P===0)||(L=c*x+i*Math.abs(y),(y+=ir*P+m*N-(A*B+Te*T))>=L||-y>=L))return y;d=(xe=(Q=N-(K=(I=134217729*N)-(I-N)))*(te=m-(Z=(I=134217729*m)-(I-m)))-((pe=N*m)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=T-(K=(I=134217729*T)-(I-T)))*(te=Te-(Z=(I=134217729*Te)-(I-Te)))-((nr=T*Te)-K*Z-Q*Z-K*te))),_[0]=xe-(ne+d)+(d-Re),d=($e=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=$e-nr),_[1]=$e-(ne+d)+(d-nr),d=(ge=le+ne)-le,_[2]=le-(ge-d)+(ne-d),_[3]=ge;const G=o(4,f,4,_,h);d=(xe=(Q=ir-(K=(I=134217729*ir)-(I-ir)))*(te=P-(Z=(I=134217729*P)-(I-P)))-((pe=ir*P)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=A-(K=(I=134217729*A)-(I-A)))*(te=B-(Z=(I=134217729*B)-(I-B)))-((nr=A*B)-K*Z-Q*Z-K*te))),_[0]=xe-(ne+d)+(d-Re),d=($e=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=$e-nr),_[1]=$e-(ne+d)+(d-nr),d=(ge=le+ne)-le,_[2]=le-(ge-d)+(ne-d),_[3]=ge;const J=o(G,h,4,_,p);d=(xe=(Q=N-(K=(I=134217729*N)-(I-N)))*(te=P-(Z=(I=134217729*P)-(I-P)))-((pe=N*P)-K*Z-Q*Z-K*te))-(ne=xe-(Re=(Q=T-(K=(I=134217729*T)-(I-T)))*(te=B-(Z=(I=134217729*B)-(I-B)))-((nr=T*B)-K*Z-Q*Z-K*te))),_[0]=xe-(ne+d)+(d-Re),d=($e=pe-((le=pe+ne)-(d=le-pe))+(ne-d))-(ne=$e-nr),_[1]=$e-(ne+d)+(d-nr),d=(ge=le+ne)-le,_[2]=le-(ge-d)+(ne-d),_[3]=ge;const Y=o(J,p,4,_,b);return b[Y-1]}(S,R,D,v,E,M,z)},t.orient2dfast=function(S,R,D,v,E,M){return(R-M)*(D-E)-(S-E)*(v-M)},Object.defineProperty(t,"__esModule",{value:!0})})})(ul,ul.exports);var ny=ul.exports,wd=Yv,Du=Qv,iy=ry,oy=ny.orient2d;Du.default&&(Du=Du.default);Ql.exports=cg;Ql.exports.default=cg;function cg(r,e,t){e=Math.max(0,e===void 0?2:e),t=t||0;var n=fy(r),i=new wd(16);i.toBBox=function(v){return{minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]}},i.compareMinX=function(v,E){return v[0]-E[0]},i.compareMinY=function(v,E){return v[1]-E[1]},i.load(r);for(var o=[],a=0,s;a<n.length;a++){var u=n[a];i.remove(u),s=Sd(u,s),o.push(s)}var c=new wd(16);for(a=0;a<o.length;a++)c.insert(Lf(o[a]));for(var f=e*e,h=t*t;o.length;){var p=o.shift(),b=p.p,_=p.next.p,S=Rf(b,_);if(!(S<h)){var R=S/f;u=ay(i,p.prev.p,b,_,p.next.next.p,R,c),u&&Math.min(Rf(u,b),Rf(u,_))<=R&&(o.push(p),o.push(Sd(u,p)),i.remove(u),c.remove(p),c.insert(Lf(p)),c.insert(Lf(p.next)))}}p=s;var D=[];do D.push(p.p),p=p.next;while(p!==s);return D.push(p.p),D}function ay(r,e,t,n,i,o,a){for(var s=new Du([],sy),u=r.data;u;){for(var c=0;c<u.children.length;c++){var f=u.children[c],h=u.leaf?Tf(f,t,n):uy(t,n,f);h>o||s.push({node:f,dist:h})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),b=p.node,_=Tf(b,e,t),S=Tf(b,n,i);if(p.dist<_&&p.dist<S&&xd(t,b,a)&&xd(n,b,a))return b}u=s.pop(),u&&(u=u.node)}return null}function sy(r,e){return r.dist-e.dist}function uy(r,e,t){if(Ed(r,t)||Ed(e,t))return 0;var n=Au(r[0],r[1],e[0],e[1],t.minX,t.minY,t.maxX,t.minY);if(n===0)return 0;var i=Au(r[0],r[1],e[0],e[1],t.minX,t.minY,t.minX,t.maxY);if(i===0)return 0;var o=Au(r[0],r[1],e[0],e[1],t.maxX,t.minY,t.maxX,t.maxY);if(o===0)return 0;var a=Au(r[0],r[1],e[0],e[1],t.minX,t.maxY,t.maxX,t.maxY);return a===0?0:Math.min(n,i,o,a)}function Ed(r,e){return r[0]>=e.minX&&r[0]<=e.maxX&&r[1]>=e.minY&&r[1]<=e.maxY}function xd(r,e,t){for(var n=Math.min(r[0],e[0]),i=Math.min(r[1],e[1]),o=Math.max(r[0],e[0]),a=Math.max(r[1],e[1]),s=t.search({minX:n,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(cy(s[u].p,s[u].next.p,r,e))return!1;return!0}function Fa(r,e,t){return oy(r[0],r[1],e[0],e[1],t[0],t[1])}function cy(r,e,t,n){return r!==n&&e!==t&&Fa(r,e,t)>0!=Fa(r,e,n)>0&&Fa(t,n,r)>0!=Fa(t,n,e)>0}function Lf(r){var e=r.p,t=r.next.p;return r.minX=Math.min(e[0],t[0]),r.minY=Math.min(e[1],t[1]),r.maxX=Math.max(e[0],t[0]),r.maxY=Math.max(e[1],t[1]),r}function fy(r){for(var e=r[0],t=r[0],n=r[0],i=r[0],o=0;o<r.length;o++){var a=r[o];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<t[1]&&(t=a),a[1]>i[1]&&(i=a)}var s=[e,t,n,i],u=s.slice();for(o=0;o<r.length;o++)iy(r[o],s)||u.push(r[o]);return hy(u)}function Sd(r,e){var t={p:r,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(t.next=e.next,t.prev=e,e.next.prev=t,e.next=t):(t.prev=t,t.next=t),t}function Rf(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function Tf(r,e,t){var n=e[0],i=e[1],o=t[0]-n,a=t[1]-i;if(o!==0||a!==0){var s=((r[0]-n)*o+(r[1]-i)*a)/(o*o+a*a);s>1?(n=t[0],i=t[1]):s>0&&(n+=o*s,i+=a*s)}return o=r[0]-n,a=r[1]-i,o*o+a*a}function Au(r,e,t,n,i,o,a,s){var u=t-r,c=n-e,f=a-i,h=s-o,p=r-i,b=e-o,_=u*u+c*c,S=u*f+c*h,R=f*f+h*h,D=u*p+c*b,v=f*p+h*b,E=_*R-S*S,M,O,k,F,z=E,U=E;E===0?(O=0,z=1,F=v,U=R):(O=S*v-R*D,F=_*v-S*D,O<0?(O=0,F=v,U=R):O>z&&(O=z,F=v+S,U=R)),F<0?(F=0,-D<0?O=0:-D>_?O=z:(O=-D,z=_)):F>U&&(F=U,-D+S<0?O=0:-D+S>_?O=z:(O=-D+S,z=_)),M=O===0?0:O/z,k=F===0?0:F/U;var W=(1-M)*r+M*t,C=(1-M)*e+M*n,l=(1-k)*i+k*a,g=(1-k)*o+k*s,w=l-W,x=g-C;return w*w+x*x}function ly(r,e){return r[0]===e[0]?r[1]-e[1]:r[0]-e[0]}function hy(r){r.sort(ly);for(var e=[],t=0;t<r.length;t++){for(;e.length>=2&&Fa(e[e.length-2],e[e.length-1],r[t])<=0;)e.pop();e.push(r[t])}for(var n=[],i=r.length-1;i>=0;i--){for(;n.length>=2&&Fa(n[n.length-2],n[n.length-1],r[i])<=0;)n.pop();n.push(r[i])}return n.pop(),e.pop(),e.concat(n)}var dy=Ql.exports;const py=jp(dy);function gy(r,e){e===void 0&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(wo(r,function(i){t.push([i[0],i[1]])}),!t.length)return null;var n=py(t,e.concavity);return n.length>3?_s([n]):null}function sa(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=Oi(r),i=ko(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&my(n,a)===!1)return!1;o==="Polygon"&&(s=[s]);for(var u=!1,c=0;c<s.length&&!u;c++)if(Cd(n,s[c][0],t.ignoreBoundary)){for(var f=!1,h=1;h<s[c].length&&!f;)Cd(n,s[c][h],!t.ignoreBoundary)&&(f=!0),h++;f||(u=!0)}return u}function Cd(r,e,t){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1],f=r[1]*(a-u)+s*(u-r[0])+c*(r[0]-a)===0&&(a-r[0])*(u-r[0])<=0&&(s-r[1])*(c-r[1])<=0;if(f)return!t;var h=s>r[1]!=c>r[1]&&r[0]<(u-a)*(r[1]-s)/(c-s)+a;h&&(n=!n)}return n}function my(r,e){return e[0]<=r[0]&&e[1]<=r[1]&&e[2]>=r[0]&&e[3]>=r[1]}function Ni(r,e,t){t===void 0&&(t={});var n=Oi(r),i=Oi(e),o=Ln(i[1]-n[1]),a=Ln(i[0]-n[0]),s=Ln(n[1]),u=Ln(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return xc(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),t.units)}function vy(r){if(!r)throw new Error("geojson is required");switch(r.type){case"Feature":return fg(r);case"FeatureCollection":return yy(r);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return eh(r);default:throw new Error("unknown GeoJSON type")}}function fg(r){var e={type:"Feature"};return Object.keys(r).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:e[t]=r[t]}}),e.properties=lg(r.properties),e.geometry=eh(r.geometry),e}function lg(r){var e={};return r&&Object.keys(r).forEach(function(t){var n=r[t];typeof n=="object"?n===null?e[t]=null:Array.isArray(n)?e[t]=n.map(function(i){return i}):e[t]=lg(n):e[t]=n}),e}function yy(r){var e={type:"FeatureCollection"};return Object.keys(r).forEach(function(t){switch(t){case"type":case"features":return;default:e[t]=r[t]}}),e.features=r.features.map(function(t){return fg(t)}),e}function eh(r){var e={type:r.type};return r.bbox&&(e.bbox=r.bbox),r.type==="GeometryCollection"?(e.geometries=r.geometries.map(function(t){return eh(t)}),e):(e.coordinates=hg(r.coordinates),e)}function hg(r){var e=r;return typeof e[0]!="object"?e.slice():e.map(function(t){return hg(t)})}function _y(r){var e=r[0],t=r[1],n=r[2],i=r[3],o=Ni(r.slice(0,2),[n,t]),a=Ni(r.slice(0,2),[e,i]);if(o>=a){var s=(t+i)/2;return[e,s-(n-e)/2,n,s+(n-e)/2]}else{var u=(e+n)/2;return[u-(i-t)/2,t,u+(i-t)/2,i]}}function cl(r,e,t,n){n===void 0&&(n={});var i=Oi(r),o=Ln(i[0]),a=Ln(i[1]),s=Ln(t),u=hu(e,n.units),c=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s)),f=o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(c)),h=Ws(f),p=Ws(c);return jt([h,p],n.properties)}function No(r,e,t){if(t===void 0&&(t={}),t.final===!0)return by(r,e);var n=Oi(r),i=Oi(e),o=Ln(n[0]),a=Ln(i[0]),s=Ln(n[1]),u=Ln(i[1]),c=Math.sin(a-o)*Math.cos(u),f=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return Ws(Math.atan2(c,f))}function by(r,e){var t=No(e,r);return t=(t+180)%360,t}function fl(r,e){e===void 0&&(e={});var t=ai(r),n=(t[0]+t[2])/2,i=(t[1]+t[3])/2;return jt([n,i],e.properties,e)}function ll(r){if(!r)throw new Error("geojson is required");var e=[];return Na(r,function(t){wy(t,e)}),Fr(e)}function wy(r,e){var t=[],n=r.geometry;if(n!==null){switch(n.type){case"Polygon":t=ni(n);break;case"LineString":t=[ni(n)]}t.forEach(function(i){var o=Ey(i,r.properties);o.forEach(function(a){a.id=e.length,e.push(a)})})}}function Ey(r,e){var t=[];return r.reduce(function(n,i){var o=Br([n,i],e);return o.bbox=xy(n,i),t.push(o),i}),t}function xy(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],a=t<i?t:i,s=n<o?n:o,u=t>i?t:i,c=n>o?n:o;return[a,s,u,c]}var th={exports:{}},dg={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(uo,function(){function t(v,E,M,O,k){(function F(z,U,W,C,l){for(;C>W;){if(C-W>600){var g=C-W+1,w=U-W+1,x=Math.log(g),N=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*N*(g-N)/g)*(w-g/2<0?-1:1),B=Math.max(W,Math.floor(U-w*N/g+T)),P=Math.min(C,Math.floor(U+(g-w)*N/g+T));F(z,U,B,P,l)}var d=z[U],I=W,K=C;for(n(z,W,U),l(z[C],d)>0&&n(z,W,C);I<K;){for(n(z,I,K),I++,K--;l(z[I],d)<0;)I++;for(;l(z[K],d)>0;)K--}l(z[W],d)===0?n(z,W,K):n(z,++K,C),K<=U&&(W=K+1),U<=K&&(C=K-1)}})(v,E,M||0,O||v.length-1,k||i)}function n(v,E,M){var O=v[E];v[E]=v[M],v[M]=O}function i(v,E){return v<E?-1:v>E?1:0}var o=function(v){v===void 0&&(v=9),this._maxEntries=Math.max(4,v),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(v,E,M){if(!M)return E.indexOf(v);for(var O=0;O<E.length;O++)if(M(v,E[O]))return O;return-1}function s(v,E){u(v,0,v.children.length,E,v)}function u(v,E,M,O,k){k||(k=R(null)),k.minX=1/0,k.minY=1/0,k.maxX=-1/0,k.maxY=-1/0;for(var F=E;F<M;F++){var z=v.children[F];c(k,v.leaf?O(z):z)}return k}function c(v,E){return v.minX=Math.min(v.minX,E.minX),v.minY=Math.min(v.minY,E.minY),v.maxX=Math.max(v.maxX,E.maxX),v.maxY=Math.max(v.maxY,E.maxY),v}function f(v,E){return v.minX-E.minX}function h(v,E){return v.minY-E.minY}function p(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function b(v){return v.maxX-v.minX+(v.maxY-v.minY)}function _(v,E){return v.minX<=E.minX&&v.minY<=E.minY&&E.maxX<=v.maxX&&E.maxY<=v.maxY}function S(v,E){return E.minX<=v.maxX&&E.minY<=v.maxY&&E.maxX>=v.minX&&E.maxY>=v.minY}function R(v){return{children:v,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(v,E,M,O,k){for(var F=[E,M];F.length;)if(!((M=F.pop())-(E=F.pop())<=O)){var z=E+Math.ceil((M-E)/O/2)*O;t(v,z,E,M,k),F.push(E,z,z,M)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(v){var E=this.data,M=[];if(!S(v,E))return M;for(var O=this.toBBox,k=[];E;){for(var F=0;F<E.children.length;F++){var z=E.children[F],U=E.leaf?O(z):z;S(v,U)&&(E.leaf?M.push(z):_(v,U)?this._all(z,M):k.push(z))}E=k.pop()}return M},o.prototype.collides=function(v){var E=this.data;if(!S(v,E))return!1;for(var M=[];E;){for(var O=0;O<E.children.length;O++){var k=E.children[O],F=E.leaf?this.toBBox(k):k;if(S(v,F)){if(E.leaf||_(v,F))return!0;M.push(k)}}E=M.pop()}return!1},o.prototype.load=function(v){if(!v||!v.length)return this;if(v.length<this._minEntries){for(var E=0;E<v.length;E++)this.insert(v[E]);return this}var M=this._build(v.slice(),0,v.length-1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var O=this.data;this.data=M,M=O}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this},o.prototype.insert=function(v){return v&&this._insert(v,this.data.height-1),this},o.prototype.clear=function(){return this.data=R([]),this},o.prototype.remove=function(v,E){if(!v)return this;for(var M,O,k,F=this.data,z=this.toBBox(v),U=[],W=[];F||U.length;){if(F||(F=U.pop(),O=U[U.length-1],M=W.pop(),k=!0),F.leaf){var C=a(v,F.children,E);if(C!==-1)return F.children.splice(C,1),U.push(F),this._condense(U),this}k||F.leaf||!_(F,z)?O?(M++,F=O.children[M],k=!1):F=null:(U.push(F),W.push(M),M=0,O=F,F=F.children[0])}return this},o.prototype.toBBox=function(v){return v},o.prototype.compareMinX=function(v,E){return v.minX-E.minX},o.prototype.compareMinY=function(v,E){return v.minY-E.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(v){return this.data=v,this},o.prototype._all=function(v,E){for(var M=[];v;)v.leaf?E.push.apply(E,v.children):M.push.apply(M,v.children),v=M.pop();return E},o.prototype._build=function(v,E,M,O){var k,F=M-E+1,z=this._maxEntries;if(F<=z)return s(k=R(v.slice(E,M+1)),this.toBBox),k;O||(O=Math.ceil(Math.log(F)/Math.log(z)),z=Math.ceil(F/Math.pow(z,O-1))),(k=R([])).leaf=!1,k.height=O;var U=Math.ceil(F/z),W=U*Math.ceil(Math.sqrt(z));D(v,E,M,W,this.compareMinX);for(var C=E;C<=M;C+=W){var l=Math.min(C+W-1,M);D(v,C,l,U,this.compareMinY);for(var g=C;g<=l;g+=U){var w=Math.min(g+U-1,l);k.children.push(this._build(v,g,w,O-1))}}return s(k,this.toBBox),k},o.prototype._chooseSubtree=function(v,E,M,O){for(;O.push(E),!E.leaf&&O.length-1!==M;){for(var k=1/0,F=1/0,z=void 0,U=0;U<E.children.length;U++){var W=E.children[U],C=p(W),l=(g=v,w=W,(Math.max(w.maxX,g.maxX)-Math.min(w.minX,g.minX))*(Math.max(w.maxY,g.maxY)-Math.min(w.minY,g.minY))-C);l<F?(F=l,k=C<k?C:k,z=W):l===F&&C<k&&(k=C,z=W)}E=z||E.children[0]}var g,w;return E},o.prototype._insert=function(v,E,M){var O=M?v:this.toBBox(v),k=[],F=this._chooseSubtree(O,this.data,E,k);for(F.children.push(v),c(F,O);E>=0&&k[E].children.length>this._maxEntries;)this._split(k,E),E--;this._adjustParentBBoxes(O,k,E)},o.prototype._split=function(v,E){var M=v[E],O=M.children.length,k=this._minEntries;this._chooseSplitAxis(M,k,O);var F=this._chooseSplitIndex(M,k,O),z=R(M.children.splice(F,M.children.length-F));z.height=M.height,z.leaf=M.leaf,s(M,this.toBBox),s(z,this.toBBox),E?v[E-1].children.push(z):this._splitRoot(M,z)},o.prototype._splitRoot=function(v,E){this.data=R([v,E]),this.data.height=v.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(v,E,M){for(var O,k,F,z,U,W,C,l=1/0,g=1/0,w=E;w<=M-E;w++){var x=u(v,0,w,this.toBBox),N=u(v,w,M,this.toBBox),T=(k=x,F=N,z=void 0,U=void 0,W=void 0,C=void 0,z=Math.max(k.minX,F.minX),U=Math.max(k.minY,F.minY),W=Math.min(k.maxX,F.maxX),C=Math.min(k.maxY,F.maxY),Math.max(0,W-z)*Math.max(0,C-U)),B=p(x)+p(N);T<l?(l=T,O=w,g=B<g?B:g):T===l&&B<g&&(g=B,O=w)}return O||M-E},o.prototype._chooseSplitAxis=function(v,E,M){var O=v.leaf?this.compareMinX:f,k=v.leaf?this.compareMinY:h;this._allDistMargin(v,E,M,O)<this._allDistMargin(v,E,M,k)&&v.children.sort(O)},o.prototype._allDistMargin=function(v,E,M,O){v.children.sort(O);for(var k=this.toBBox,F=u(v,0,E,k),z=u(v,M-E,M,k),U=b(F)+b(z),W=E;W<M-E;W++){var C=v.children[W];c(F,v.leaf?k(C):C),U+=b(F)}for(var l=M-E-1;l>=E;l--){var g=v.children[l];c(z,v.leaf?k(g):g),U+=b(z)}return U},o.prototype._adjustParentBBoxes=function(v,E,M){for(var O=M;O>=0;O--)c(E[O],v)},o.prototype._condense=function(v){for(var E=v.length-1,M=void 0;E>=0;E--)v[E].children.length===0?E>0?(M=v[E-1].children).splice(M.indexOf(v[E]),1):this.clear():s(v[E],this.toBBox)},o})})(dg);var Sy=dg.exports;const Cy=lu(zv),Iy=lu(Jv),Ay=lu(Xv);var wi=Sy,pg=Cy,gg=Iy,ka=Ay.default,My=gg.featureEach;gg.coordEach;pg.polygon;var Id=pg.featureCollection;function mg(r){var e=new wi(r);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:ka(t),wi.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:ka(i),n.push(i)}):My(t,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:ka(i),n.push(i)}),wi.prototype.load.call(this,n)},e.remove=function(t,n){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:ka(t),wi.prototype.remove.call(this,t,n)},e.clear=function(){return wi.prototype.clear.call(this)},e.search=function(t){var n=wi.prototype.search.call(this,this.toBBox(t));return Id(n)},e.collides=function(t){return wi.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=wi.prototype.all.call(this);return Id(t)},e.toJSON=function(){return wi.prototype.toJSON.call(this)},e.fromJSON=function(t){return wi.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var n;if(t.bbox)n=t.bbox;else if(Array.isArray(t)&&t.length===4)n=t;else if(Array.isArray(t)&&t.length===6)n=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")n=ka(t);else if(t.type==="FeatureCollection")n=ka(t);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},e}th.exports=mg;th.exports.default=mg;var Ny=th.exports;const rh=jp(Ny);function Ju(r,e){var t={},n=[];if(r.type==="LineString"&&(r=cn(r)),e.type==="LineString"&&(e=cn(e)),r.type==="Feature"&&e.type==="Feature"&&r.geometry!==null&&e.geometry!==null&&r.geometry.type==="LineString"&&e.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=Ad(r,e);return i&&n.push(i),Fr(n)}var o=rh();return o.load(ll(e)),Do(ll(r),function(a){Do(o.search(a),function(s){var u=Ad(a,s);if(u){var c=ni(u).join(",");t[c]||(t[c]=!0,n.push(u))}})}),Fr(n)}function Ad(r,e){var t=ni(r),n=ni(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=t[0][0],o=t[0][1],a=t[1][0],s=t[1][1],u=n[0][0],c=n[0][1],f=n[1][0],h=n[1][1],p=(h-c)*(a-i)-(f-u)*(s-o),b=(f-u)*(o-c)-(h-c)*(i-u),_=(a-i)*(o-c)-(s-o)*(i-u);if(p===0)return null;var S=b/p,R=_/p;if(S>=0&&S<=1&&R>=0&&R<=1){var D=i+S*(a-i),v=o+S*(s-o);return jt([D,v])}return null}function Xu(r,e,t){t===void 0&&(t={});var n=jt([1/0,1/0],{dist:1/0}),i=0;return Na(r,function(o){for(var a=ni(o),s=0;s<a.length-1;s++){var u=jt(a[s]);u.properties.dist=Ni(e,u,t);var c=jt(a[s+1]);c.properties.dist=Ni(e,c,t);var f=Ni(u,c,t),h=Math.max(u.properties.dist,c.properties.dist),p=No(u,c),b=cl(e,h,p+90,t),_=cl(e,h,p-90,t),S=Ju(Br([b.geometry.coordinates,_.geometry.coordinates]),Br([u.geometry.coordinates,c.geometry.coordinates])),R=null;S.features.length>0&&(R=S.features[0],R.properties.dist=Ni(e,R,t),R.properties.location=i+Ni(u,R,t)),u.properties.dist<n.properties.dist&&(n=u,n.properties.index=s,n.properties.location=i),c.properties.dist<n.properties.dist&&(n=c,n.properties.index=s+1,n.properties.location=i+f),R&&R.properties.dist<n.properties.dist&&(n=R,n.properties.index=s),i+=f}}),n}var Md=6378137;function Of(r){return rg(r,function(e,t){return e+Py(t)},0)}function Py(r){var e=0,t;switch(r.type){case"Polygon":return Nd(r.coordinates);case"MultiPolygon":for(t=0;t<r.coordinates.length;t++)e+=Nd(r.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Nd(r){var e=0;if(r&&r.length>0){e+=Math.abs(Pd(r[0]));for(var t=1;t<r.length;t++)e-=Math.abs(Pd(r[t]))}return e}function Pd(r){var e,t,n,i,o,a,s,u=0,c=r.length;if(c>2){for(s=0;s<c;s++)s===c-2?(i=c-2,o=c-1,a=0):s===c-1?(i=c-1,o=0,a=1):(i=s,o=s+1,a=s+2),e=r[i],t=r[o],n=r[a],u+=(Df(n[0])-Df(e[0]))*Math.sin(Df(t[1]));u=u*Md*Md/2}return u}function Df(r){return r*Math.PI/180}function Ly(r,e,t){t===void 0&&(t={});for(var n=ko(r),i=n.coordinates,o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++)if(o>=e){var s=e-o;if(s){var u=No(i[a],i[a-1])-180,c=cl(i[a],s,u,t);return c}else return jt(i[a])}else o+=Ni(i[a],i[a+1],t);return jt(i[i.length-1])}function Ld(r,e){return e===void 0&&(e={}),ig(r,function(t,n){var i=n.geometry.coordinates;return t+Ni(i[0],i[1],e)},0)}function Ry(r,e,t){var n=ni(t);if(sl(t)!=="LineString")throw new Error("line must be a LineString");var i=Xu(t,r),o=Xu(t,e),a;i.properties.index<=o.properties.index?a=[i,o]:a=[o,i];for(var s=[a[0].geometry.coordinates],u=a[0].properties.index+1;u<a[1].properties.index+1;u++)s.push(n[u]);return s.push(a[1].geometry.coordinates),Br(s,t.properties)}function Yu(r,e,t){t===void 0&&(t={});for(var n=Oi(r),i=ni(e),o=0;o<i.length-1;o++){var a=!1;if(t.ignoreEndVertices&&(o===0&&(a="start"),o===i.length-2&&(a="end"),o===0&&o+1===i.length-1&&(a="both")),Ty(i[o],i[o+1],n,a,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}function Ty(r,e,t,n,i){var o=t[0],a=t[1],s=r[0],u=r[1],c=e[0],f=e[1],h=t[0]-s,p=t[1]-u,b=c-s,_=f-u,S=h*_-p*b;if(i!==null){if(Math.abs(S)>i)return!1}else if(S!==0)return!1;if(n){if(n==="start")return Math.abs(b)>=Math.abs(_)?b>0?s<o&&o<=c:c<=o&&o<s:_>0?u<a&&a<=f:f<=a&&a<u;if(n==="end")return Math.abs(b)>=Math.abs(_)?b>0?s<=o&&o<c:c<o&&o<=s:_>0?u<=a&&a<f:f<a&&a<=u;if(n==="both")return Math.abs(b)>=Math.abs(_)?b>0?s<o&&o<c:c<o&&o<s:_>0?u<a&&a<f:f<a&&a<u}else return Math.abs(b)>=Math.abs(_)?b>0?s<=o&&o<=c:c<=o&&o<=s:_>0?u<=a&&a<=f:f<=a&&a<=u;return!1}function Oy(r,e){var t=ko(r),n=ko(e),i=t.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return Dy(t,n);case"LineString":return Yu(t,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return sa(t,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return ky(t,n);case"LineString":return By(t,n);case"Polygon":case"MultiPolygon":return Fy(t,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return zy(t,n);case"Polygon":case"MultiPolygon":return Uy(t,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return qy(t,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Dy(r,e){var t,n=!1;for(t=0;t<e.coordinates.length;t++)if(yg(e.coordinates[t],r.coordinates)){n=!0;break}return n}function ky(r,e){for(var t=0;t<r.coordinates.length;t++){for(var n=!1,i=0;i<e.coordinates.length;i++)yg(r.coordinates[t],e.coordinates[i])&&(n=!0);if(!n)return!1}return!0}function By(r,e){for(var t=!1,n=0;n<r.coordinates.length;n++){if(!Yu(r.coordinates[n],e))return!1;t||(t=Yu(r.coordinates[n],e,{ignoreEndVertices:!0}))}return t}function Fy(r,e){for(var t=!0,n=!1,i=0;i<r.coordinates.length;i++){if(n=sa(r.coordinates[1],e),!n){t=!1;break}n=sa(r.coordinates[1],e,{ignoreBoundary:!0})}return t&&n}function zy(r,e){for(var t=0;t<r.coordinates.length;t++)if(!Yu(r.coordinates[t],e))return!1;return!0}function Uy(r,e){var t=ai(e),n=ai(r);if(!vg(t,n))return!1;for(var i=!1,o=0;o<r.coordinates.length-1;o++){if(!sa(r.coordinates[o],e))return!1;if(i||(i=sa(r.coordinates[o],e,{ignoreBoundary:!0})),!i){var a=Hy(r.coordinates[o],r.coordinates[o+1]);i=sa(a,e,{ignoreBoundary:!0})}}return i}function qy(r,e){var t=ai(r),n=ai(e);if(!vg(n,t))return!1;for(var i=0;i<r.coordinates[0].length;i++)if(!sa(r.coordinates[0][i],e))return!1;return!0}function vg(r,e){return!(r[0]>e[0]||r[2]<e[2]||r[1]>e[1]||r[3]<e[3])}function yg(r,e){return r[0]===e[0]&&r[1]===e[1]}function Hy(r,e){return[(r[0]+e[0])/2,(r[1]+e[1])/2]}function hl(r,e){e===void 0&&(e={});var t=e.precision,n=e.coordinates,i=e.mutate;if(t=t==null||isNaN(t)?6:t,n=n==null||isNaN(n)?3:n,!r)throw new Error("<geojson> is required");if(typeof t!="number")throw new Error("<precision> must be a number");if(typeof n!="number")throw new Error("<coordinates> must be a number");(i===!1||i===void 0)&&(r=JSON.parse(JSON.stringify(r)));var o=Math.pow(10,t);return wo(r,function(a){Gy(a,o,n)}),r}function Gy(r,e,t){r.length>t&&r.splice(t,r.length);for(var n=0;n<r.length;n++)r[n]=Math.round(r[n]*e)/e;return r}function Vy(r,e){if(!r)throw new Error("line is required");if(!e)throw new Error("splitter is required");var t=sl(r),n=sl(e);if(t!=="LineString")throw new Error("line must be LineString");if(n==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(n==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=hl(e,{precision:7});switch(n){case"Point":return dl(r,i);case"MultiPoint":return Rd(r,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Rd(r,Ju(r,i))}}function Rd(r,e){var t=[],n=rh();return Na(e,function(i){if(t.forEach(function(s,u){s.id=u}),!t.length)t=dl(r,i).features,t.forEach(function(s){s.bbox||(s.bbox=_y(ai(s)))}),n.load(Fr(t));else{var o=n.search(i);if(o.features.length){var a=_g(i,o);t=t.filter(function(s){return s.id!==a.id}),n.remove(a),Do(dl(a,i),function(s){t.push(s),n.insert(s)})}}}),Fr(t)}function dl(r,e){var t=[],n=ni(r)[0],i=ni(r)[r.geometry.coordinates.length-1];if(kf(n,Oi(e))||kf(i,Oi(e)))return Fr([r]);var o=rh(),a=ll(r);o.load(a);var s=o.search(e);if(!s.features.length)return Fr([r]);var u=_g(e,s),c=[n],f=tg(a,function(h,p,b){var _=ni(p)[1],S=Oi(e);return b===u.id?(h.push(S),t.push(Br(h)),kf(S,_)?[S]:[S,_]):(h.push(_),h)},c);return f.length>1&&t.push(Br(f)),Fr(t)}function _g(r,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var t,n=1/0;return Do(e,function(i){var o=Xu(i,r),a=o.properties.dist;a<n&&(t=i,n=a)}),t}function kf(r,e){return r[0]===e[0]&&r[1]===e[1]}function Ky(r,e){return e===void 0&&(e={}),Wy(r,"wgs84",e)}function Wy(r,e,t){t===void 0&&(t={}),t=t||{};var n=t.mutate;if(!r)throw new Error("geojson is required");return Array.isArray(r)&&Js(r[0])?r=e==="mercator"?Td(r):Od(r):(n!==!0&&(r=vy(r)),wo(r,function(i){var o=e==="mercator"?Td(i):Od(i);i[0]=o[0],i[1]=o[1]})),r}function Td(r){var e=Math.PI/180,t=6378137,n=20037508342789244e-9,i=Math.abs(r[0])<=180?r[0]:r[0]-Jy(r[0])*360,o=[t*i*e,t*Math.log(Math.tan(Math.PI*.25+.5*r[1]*e))];return o[0]>n&&(o[0]=n),o[0]<-n&&(o[0]=-n),o[1]>n&&(o[1]=n),o[1]<-n&&(o[1]=-n),o}function Od(r){var e=180/Math.PI,t=6378137;return[r[0]*e/t,(Math.PI*.5-2*Math.atan(Math.exp(-r[1]/t)))*e]}function Jy(r){return r<0?-1:r>0?1:0}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Xy(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(f){return u([c,f])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){t.label=c[1];break}if(c[0]===6&&t.label<o[1]){t.label=o[1],o=c;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(c);break}o[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(f){c=[6,f],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Bo=function(){function r(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return r}();function Yy(r,e){return r>e?1:r<e?-1:0}function Po(r,e,t){for(var n=new Bo(null,null),i=n,o=n;;){var a=t(r,e.key);if(a<0){if(e.left===null)break;if(t(r,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,e.left===null)break}o.left=e,o=e,e=e.left}else if(a>0){if(e.right===null)break;if(t(r,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,o.left=e.right,e.left=n.right,e.right=n.left,e}function Bf(r,e,t,n){var i=new Bo(r,e);if(t===null)return i.left=i.right=null,i;t=Po(r,t,n);var o=n(r,t.key);return o<0?(i.left=t.left,i.right=t,t.left=null):o>=0&&(i.right=t.right,i.left=t,t.right=null),i}function Dd(r,e,t){var n=null,i=null;if(e){e=Po(r,e,t);var o=t(e.key,r);o===0?(n=e.left,i=e.right):o<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function jy(r,e,t){return e===null?r:(r===null||(e=Po(r.key,e,t),e.left=r),e)}function pl(r,e,t,n,i){if(r){n(""+e+(t?"└── ":"├── ")+i(r)+`
`);var o=e+(t?"    ":"│   ");r.left&&pl(r.left,o,!1,n,i),r.right&&pl(r.right,o,!0,n,i)}}var nh=function(){function r(e){e===void 0&&(e=Yy),this._root=null,this._size=0,this._comparator=e}return r.prototype.insert=function(e,t){return this._size++,this._root=Bf(e,t,this._root,this._comparator)},r.prototype.add=function(e,t){var n=new Bo(e,t);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,o=Po(e,this._root,i),a=i(e,o.key);return a===0?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},r.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},r.prototype._remove=function(e,t,n){var i;if(t===null)return null;t=Po(e,t,n);var o=n(e,t.key);return o===0?(t.left===null?i=t.right:(i=Po(e,t.left,n),i.right=t.right),this._size--,i):t},r.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Po(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},r.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(i===0)return t;i<0?t=t.left:t=t.right}return null},r.prototype.find=function(e){return this._root&&(this._root=Po(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},r.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var i=n(e,t.key);if(i===0)return!0;i<0?t=t.left:t=t.right}return!1},r.prototype.forEach=function(e,t){for(var n=this._root,i=[],o=!1;!o;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),e.call(t,n),n=n.right):o=!0;return this},r.prototype.range=function(e,t,n,i){for(var o=[],a=this._comparator,s=this._root,u;o.length!==0||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),u=a(s.key,t),u>0)break;if(a(s.key,e)>=0&&n.call(i,s))return this;s=s.right}return this},r.prototype.keys=function(){var e=[];return this.forEach(function(t){var n=t.key;return e.push(n)}),e},r.prototype.values=function(){var e=[];return this.forEach(function(t){var n=t.data;return e.push(n)}),e},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},r.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},r.prototype.at=function(e){for(var t=this._root,n=!1,i=0,o=[];!n;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),i===e)return t;i++,t=t.right}else n=!0;return null},r.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var i=this._comparator;t;){var o=i(e.key,t.key);if(o===0)break;o<0?(n=t,t=t.left):t=t.right}return n},r.prototype.prev=function(e){var t=this._root,n=null;if(e.left!==null){for(n=e.left;n.right;)n=n.right;return n}for(var i=this._comparator;t;){var o=i(e.key,t.key);if(o===0)break;o<0?t=t.left:(n=t,t=t.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return Zy(this._root)},r.prototype.load=function(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!1);var i=e.length,o=this._comparator;if(n&&vl(e,t,0,i-1,o),this._root===null)this._root=gl(e,t,0,i),this._size=i;else{var a=Qy(this.toList(),$y(e,t),o);i=this._size+i,this._root=ml({head:a},0,i)}return this},r.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(e){e===void 0&&(e=function(n){return String(n.key)});var t=[];return pl(this._root,"",!0,function(n){return t.push(n)},e),t.join("")},r.prototype.update=function(e,t,n){var i=this._comparator,o=Dd(e,this._root,i),a=o.left,s=o.right;i(e,t)<0?s=Bf(t,n,s,i):a=Bf(t,n,a,i),this._root=jy(a,s,i)},r.prototype.split=function(e){return Dd(e,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var e;return Xy(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},r}();function gl(r,e,t,n){var i=n-t;if(i>0){var o=t+Math.floor(i/2),a=r[o],s=e[o],u=new Bo(a,s);return u.left=gl(r,e,t,o),u.right=gl(r,e,o+1,n),u}return null}function $y(r,e){for(var t=new Bo(null,null),n=t,i=0;i<r.length;i++)n=n.next=new Bo(r[i],e[i]);return n.next=null,t.next}function Zy(r){for(var e=r,t=[],n=!1,i=new Bo(null,null),o=i;!n;)e?(t.push(e),e=e.left):t.length>0?(e=o=o.next=t.pop(),e=e.right):n=!0;return o.next=null,i.next}function ml(r,e,t){var n=t-e;if(n>0){var i=e+Math.floor(n/2),o=ml(r,e,i),a=r.head;return a.left=o,r.head=r.head.next,a.right=ml(r,i+1,t),a}return null}function Qy(r,e,t){for(var n=new Bo(null,null),i=n,o=r,a=e;o!==null&&a!==null;)t(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return o!==null?i.next=o:a!==null&&(i.next=a),n.next}function vl(r,e,t,n,i){if(!(t>=n)){for(var o=r[t+n>>1],a=t-1,s=n+1;;){do a++;while(i(r[a],o)<0);do s--;while(i(r[s],o)>0);if(a>=s)break;var u=r[a];r[a]=r[s],r[s]=u,u=e[a],e[a]=e[s],e[s]=u}vl(r,e,t,s,i),vl(r,e,s+1,n,i)}}function Xn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function kd(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ur(r,e,t){return e&&kd(r.prototype,e),t&&kd(r,t),r}var ks=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},yl=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,i=e.ur.x<t.ur.x?e.ur.x:t.ur.x,o=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:a}}},Lo=Number.EPSILON;Lo===void 0&&(Lo=Math.pow(2,-52));var e_=Lo*Lo,_l=function(e,t){if(-Lo<e&&e<Lo&&-Lo<t&&t<Lo)return 0;var n=e-t;return n*n<e_*e*t?0:e<t?-1:1},t_=function(){function r(){Xn(this,r),this.reset()}return Ur(r,[{key:"reset",value:function(){this.xRounder=new Bd,this.yRounder=new Bd}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),r}(),Bd=function(){function r(){Xn(this,r),this.tree=new nh,this.round(0)}return Ur(r,[{key:"round",value:function(t){var n=this.tree.add(t),i=this.tree.prev(n);if(i!==null&&_l(n.key,i.key)===0)return this.tree.remove(t),i.key;var o=this.tree.next(n);return o!==null&&_l(n.key,o.key)===0?(this.tree.remove(t),o.key):t}}]),r}(),Xs=new t_,Ks=function(e,t){return e.x*t.y-e.y*t.x},bg=function(e,t){return e.x*t.x+e.y*t.y},Fd=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y},a=Ks(i,o);return _l(a,0)},ju=function(e){return Math.sqrt(bg(e,e))},r_=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return Ks(o,i)/ju(o)/ju(i)},n_=function(e,t,n){var i={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return bg(o,i)/ju(o)/ju(i)},zd=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},Ud=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},i_=function(e,t,n,i){if(t.x===0)return Ud(n,i,e.x);if(i.x===0)return Ud(e,t,n.x);if(t.y===0)return zd(n,i,e.y);if(i.y===0)return zd(e,t,n.y);var o=Ks(t,i);if(o==0)return null;var a={x:n.x-e.x,y:n.y-e.y},s=Ks(a,t)/o,u=Ks(a,i)/o,c=e.x+u*t.x,f=n.x+s*i.x,h=e.y+u*t.y,p=n.y+s*i.y,b=(c+f)/2,_=(h+p)/2;return{x:b,y:_}},Ii=function(){Ur(r,null,[{key:"compare",value:function(t,n){var i=r.comparePoints(t.point,n.point);return i!==0?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:$u.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function r(e,t){Xn(this,r),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return Ur(r,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,i=0,o=n.length;i<o;i++){var a=n[i];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var o=n+1;o<t;o++){var a=this.point.events[o];a.consumedBy===void 0&&i.otherSE.point.events===a.otherSE.point.events&&i.segment.consume(a.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,i=this.point.events.length;n<i;n++){var o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&t.push(o)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,i=new Map,o=function(s){var u=s.otherSE;i.set(s,{sine:r_(n.point,t.point,u.point),cosine:n_(n.point,t.point,u.point)})};return function(a,s){i.has(a)||o(a),i.has(s)||o(s);var u=i.get(a),c=u.sine,f=u.cosine,h=i.get(s),p=h.sine,b=h.cosine;return c>=0&&p>=0?f<b?1:f>b?-1:0:c<0&&p<0?f<b?-1:f>b?1:0:p<c?-1:p>c?1:0}}}]),r}(),o_=0,$u=function(){Ur(r,null,[{key:"compare",value:function(t,n){var i=t.leftSE.point.x,o=n.leftSE.point.x,a=t.rightSE.point.x,s=n.rightSE.point.x;if(s<i)return 1;if(a<o)return-1;var u=t.leftSE.point.y,c=n.leftSE.point.y,f=t.rightSE.point.y,h=n.rightSE.point.y;if(i<o){if(c<u&&c<f)return 1;if(c>u&&c>f)return-1;var p=t.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;var b=n.comparePoint(t.rightSE.point);return b!==0?b:-1}if(i>o){if(u<c&&u<h)return-1;if(u>c&&u>h)return 1;var _=n.comparePoint(t.leftSE.point);if(_!==0)return _;var S=t.comparePoint(n.rightSE.point);return S<0?1:S>0?-1:1}if(u<c)return-1;if(u>c)return 1;if(a<s){var R=n.comparePoint(t.rightSE.point);if(R!==0)return R}if(a>s){var D=t.comparePoint(n.rightSE.point);if(D<0)return 1;if(D>0)return-1}if(a!==s){var v=f-u,E=a-i,M=h-c,O=s-o;if(v>E&&M<O)return 1;if(v<E&&M>O)return-1}return a>s?1:a<s||f<h?-1:f>h?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function r(e,t,n,i){Xn(this,r),this.id=++o_,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=i}return Ur(r,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,i=this.rightSE.point,o=this.vector();if(n.x===i.x)return t.x===n.x?0:t.x<n.x?1:-1;var a=(t.y-n.y)/o.y,s=n.x+a*o.x;if(t.x===s)return 0;var u=(t.x-n.x)/o.x,c=n.y+u*o.y;return t.y===c?0:t.y<c?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),i=t.bbox(),o=yl(n,i);if(o===null)return null;var a=this.leftSE.point,s=this.rightSE.point,u=t.leftSE.point,c=t.rightSE.point,f=ks(n,u)&&this.comparePoint(u)===0,h=ks(i,a)&&t.comparePoint(a)===0,p=ks(n,c)&&this.comparePoint(c)===0,b=ks(i,s)&&t.comparePoint(s)===0;if(h&&f)return b&&!p?s:!b&&p?c:null;if(h)return p&&a.x===c.x&&a.y===c.y?null:a;if(f)return b&&s.x===u.x&&s.y===u.y?null:u;if(b&&p)return null;if(b)return s;if(p)return c;var _=i_(a,this.vector(),u,t.vector());return _===null||!ks(o,_)?null:Xs.round(_.x,_.y)}},{key:"split",value:function(t){var n=[],i=t.events!==void 0,o=new Ii(t,!0),a=new Ii(t,!1),s=this.rightSE;this.replaceRightSE(a),n.push(a),n.push(o);var u=new r(o,s,this.rings.slice(),this.windings.slice());return Ii.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),Ii.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),a.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,i=t;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var o=r.compare(n,i);if(o!==0){if(o>0){var a=n;n=i,i=a}if(n.prev===i){var s=n;n=i,i=s}for(var u=0,c=i.rings.length;u<c;u++){var f=i.rings[u],h=i.windings[u],p=n.rings.indexOf(f);p===-1?(n.rings.push(f),n.windings.push(h)):n.windings[p]+=h}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys,a=0,s=this.rings.length;a<s;a++){var u=this.rings[a],c=this.windings[a],f=n.indexOf(u);f===-1?(n.push(u),i.push(c)):i[f]+=c}for(var h=[],p=[],b=0,_=n.length;b<_;b++)if(i[b]!==0){var S=n[b],R=S.poly;if(p.indexOf(R)===-1)if(S.isExterior)h.push(R);else{p.indexOf(R)===-1&&p.push(R);var D=h.indexOf(S.poly);D!==-1&&h.splice(D,1)}}for(var v=0,E=h.length;v<E;v++){var M=h[v].multiPoly;o.indexOf(M)===-1&&o.push(M)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ri.type){case"union":{var i=t.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{var a,s;t.length<n.length?(a=t.length,s=n.length):(a=n.length,s=t.length),this._isInResult=s===ri.numMultiPolys&&a<s;break}case"xor":{var u=Math.abs(t.length-n.length);this._isInResult=u%2===1;break}case"difference":{var c=function(h){return h.length===1&&h[0].isSubject};this._isInResult=c(t)!==c(n);break}default:throw new Error("Unrecognized operation type found ".concat(ri.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,i){var o,a,s,u=Ii.comparePoints(t,n);if(u<0)o=t,a=n,s=1;else if(u>0)o=n,a=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var c=new Ii(o,!0),f=new Ii(a,!1);return new r(c,f,[i],[s])}}]),r}(),qd=function(){function r(e,t,n){if(Xn(this,r),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Xs.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=e.length;a<s;a++){if(typeof e[a][0]!="number"||typeof e[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Xs.round(e[a][0],e[a][1]);u.x===o.x&&u.y===o.y||(this.segments.push($u.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push($u.fromRing(o,i,this))}return Ur(r,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,i=this.segments.length;n<i;n++){var o=this.segments[n];t.push(o.leftSE),t.push(o.rightSE)}return t}}]),r}(),a_=function(){function r(e,t){if(Xn(this,r),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new qd(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=e.length;n<i;n++){var o=new qd(e[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=t}return Ur(r,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var o=this.interiorRings[n].getSweepEvents(),a=0,s=o.length;a<s;a++)t.push(o[a]);return t}}]),r}(),Hd=function(){function r(e,t){if(Xn(this,r),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=e.length;n<i;n++){var o=new a_(e[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=t}return Ur(r,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,i=this.polys.length;n<i;n++)for(var o=this.polys[n].getSweepEvents(),a=0,s=o.length;a<s;a++)t.push(o[a]);return t}}]),r}(),s_=function(){Ur(r,null,[{key:"factory",value:function(t){for(var n=[],i=0,o=t.length;i<o;i++){var a=t[i];if(!(!a.isInResult()||a.ringOut)){for(var s=null,u=a.leftSE,c=a.rightSE,f=[u],h=u.point,p=[];s=u,u=c,f.push(u),u.point!==h;)for(;;){var b=u.getAvailableLinkedEvents();if(b.length===0){var _=f[0].point,S=f[f.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_.x,",")+" ".concat(_.y,"]. Last matching segment found ends at")+" [".concat(S.x,", ").concat(S.y,"]."))}if(b.length===1){c=b[0].otherSE;break}for(var R=null,D=0,v=p.length;D<v;D++)if(p[D].point===u.point){R=D;break}if(R!==null){var E=p.splice(R)[0],M=f.splice(E.index);M.unshift(M[0].otherSE),n.push(new r(M.reverse()));continue}p.push({index:f.length,point:u.point});var O=u.getLeftmostComparator(s);c=b.sort(O)[0].otherSE;break}n.push(new r(f))}}return n}}]);function r(e){Xn(this,r),this.events=e;for(var t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}return Ur(r,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],i=1,o=this.events.length-1;i<o;i++){var a=this.events[i].point,s=this.events[i+1].point;Fd(a,t,s)!==0&&(n.push(a),t=a)}if(n.length===1)return null;var u=n[0],c=n[1];Fd(u,t,c)===0&&n.shift(),n.push(n[0]);for(var f=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:n.length-1,p=this.isExteriorRing()?n.length:-1,b=[],_=h;_!=p;_+=f)b.push([n[_].x,n[_].y]);return b}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,i=this.events.length;n<i;n++){var o=this.events[n];Ii.compare(t,o)>0&&(t=o)}for(var a=t.segment.prevInResult(),s=a?a.prevInResult():null;;){if(!a)return null;if(!s)return a.ringOut;if(s.ringOut!==a.ringOut)return s.ringOut.enclosingRing()!==a.ringOut?a.ringOut:a.ringOut.enclosingRing();a=s.prevInResult(),s=a?a.prevInResult():null}}}]),r}(),Gd=function(){function r(e){Xn(this,r),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Ur(r,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var o=this.interiorRings[n].getGeom();o!==null&&t.push(o)}return t}}]),r}(),u_=function(){function r(e){Xn(this,r),this.rings=e,this.polys=this._composePolys(e)}return Ur(r,[{key:"getGeom",value:function(){for(var t=[],n=0,i=this.polys.length;n<i;n++){var o=this.polys[n].getGeom();o!==null&&t.push(o)}return t}},{key:"_composePolys",value:function(t){for(var n=[],i=0,o=t.length;i<o;i++){var a=t[i];if(!a.poly)if(a.isExteriorRing())n.push(new Gd(a));else{var s=a.enclosingRing();s.poly||n.push(new Gd(s)),s.poly.addInterior(a)}}return n}}]),r}(),c_=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$u.compare;Xn(this,r),this.queue=e,this.tree=new nh(t),this.segments=[]}return Ur(r,[{key:"process",value:function(t){var n=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),i;var o=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!o)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var a=o,s=o,u=void 0,c=void 0;u===void 0;)a=this.tree.prev(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);for(;c===void 0;)s=this.tree.next(s),s===null?c=null:s.key.consumedBy===void 0&&(c=s.key);if(t.isLeft){var f=null;if(u){var h=u.getIntersection(n);if(h!==null&&(n.isAnEndpoint(h)||(f=h),!u.isAnEndpoint(h)))for(var p=this._splitSafely(u,h),b=0,_=p.length;b<_;b++)i.push(p[b])}var S=null;if(c){var R=c.getIntersection(n);if(R!==null&&(n.isAnEndpoint(R)||(S=R),!c.isAnEndpoint(R)))for(var D=this._splitSafely(c,R),v=0,E=D.length;v<E;v++)i.push(D[v])}if(f!==null||S!==null){var M=null;if(f===null)M=S;else if(S===null)M=f;else{var O=Ii.comparePoints(f,S);M=O<=0?f:S}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var k=n.split(M),F=0,z=k.length;F<z;F++)i.push(k[F])}i.length>0?(this.tree.remove(n),i.push(t)):(this.segments.push(n),n.prev=u)}else{if(u&&c){var U=u.getIntersection(c);if(U!==null){if(!u.isAnEndpoint(U))for(var W=this._splitSafely(u,U),C=0,l=W.length;C<l;C++)i.push(W[C]);if(!c.isAnEndpoint(U))for(var g=this._splitSafely(c,U),w=0,x=g.length;w<x;w++)i.push(g[w])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var o=t.split(n);return o.push(i),t.consumedBy===void 0&&this.tree.insert(t),o}}]),r}(),Vd=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,f_=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,l_=function(){function r(){Xn(this,r)}return Ur(r,[{key:"run",value:function(t,n,i){ri.type=t,Xs.reset();for(var o=[new Hd(n,!0)],a=0,s=i.length;a<s;a++)o.push(new Hd(i[a],!1));if(ri.numMultiPolys=o.length,ri.type==="difference")for(var u=o[0],c=1;c<o.length;)yl(o[c].bbox,u.bbox)!==null?c++:o.splice(c,1);if(ri.type==="intersection"){for(var f=0,h=o.length;f<h;f++)for(var p=o[f],b=f+1,_=o.length;b<_;b++)if(yl(p.bbox,o[b].bbox)===null)return[]}for(var S=new nh(Ii.compare),R=0,D=o.length;R<D;R++)for(var v=o[R].getSweepEvents(),E=0,M=v.length;E<M;E++)if(S.insert(v[E]),S.size>Vd)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var O=new c_(S),k=S.size,F=S.pop();F;){var z=F.key;if(S.size===k){var U=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(U.id," ")+"[".concat(U.leftSE.point.x,", ").concat(U.leftSE.point.y,"] -> ")+"[".concat(U.rightSE.point.x,", ").concat(U.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(S.size>Vd)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(O.segments.length>f_)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var W=O.process(z),C=0,l=W.length;C<l;C++){var g=W[C];g.consumedBy===void 0&&S.insert(g)}k=S.size,F=S.pop()}Xs.reset();var w=s_.factory(O.segments),x=new u_(w);return x.getGeom()}}]),r}(),ri=new l_,h_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ri.run("union",e,n)},d_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ri.run("intersection",e,n)},p_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ri.run("xor",e,n)},g_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ri.run("difference",e,n)},m_={union:h_,intersection:d_,xor:p_,difference:g_};const wg=m_;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(o=o<0?Math.max(n+arguments[2],0):Math.min(o,n);i<o;)t[i]=e,++i;return t},writable:!0});Number.isFinite=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)};Number.isInteger=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(r){return r!==r};Math.trunc=Math.trunc||function(r){return r<0?Math.ceil(r):Math.floor(r)};var pa=function(){};pa.prototype.interfaces_=function(){return[]};pa.prototype.getClass=function(){return pa};pa.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var He=function(r){function e(t){r.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=new r().stack}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Error),ue=function(){},Eg={MAX_VALUE:{configurable:!0}};ue.isNaN=function(e){return Number.isNaN(e)};ue.doubleToLongBits=function(e){return e};ue.longBitsToDouble=function(e){return e};ue.isInfinite=function(e){return!Number.isFinite(e)};Eg.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(ue,Eg);var nn=function(){},Cc=function(){},Va=function(){};function on(){}var q=function r(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=r.NULL_ORDINATE;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=r.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Pa={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};q.prototype.setOrdinate=function(e,t){switch(e){case q.X:this.x=t;break;case q.Y:this.y=t;break;case q.Z:this.z=t;break;default:throw new He("Invalid ordinate index: "+e)}};q.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!pa.equalsWithTolerance(this.x,t.x,n)||!pa.equalsWithTolerance(this.y,t.y,n))}};q.prototype.getOrdinate=function(e){switch(e){case q.X:return this.x;case q.Y:return this.y;case q.Z:return this.z}throw new He("Invalid ordinate index: "+e)};q.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||ue.isNaN(this.z))&&ue.isNaN(e.z)};q.prototype.equals=function(e){return e instanceof q?this.equals2D(e):!1};q.prototype.equalInZ=function(e,t){return pa.equalsWithTolerance(this.z,e.z,t)};q.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};q.prototype.clone=function(){};q.prototype.copy=function(){return new q(this)};q.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};q.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return Math.sqrt(t*t+n*n+i*i)};q.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};q.prototype.hashCode=function(){var e=17;return e=37*e+q.hashCode(this.x),e=37*e+q.hashCode(this.y),e};q.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};q.prototype.interfaces_=function(){return[nn,Cc,on]};q.prototype.getClass=function(){return q};q.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=ue.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};Pa.DimensionalComparator.get=function(){return no};Pa.serialVersionUID.get=function(){return 6683108902428367e3};Pa.NULL_ORDINATE.get=function(){return ue.NaN};Pa.X.get=function(){return 0};Pa.Y.get=function(){return 1};Pa.Z.get=function(){return 2};Object.defineProperties(q,Pa);var no=function(e){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new He("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}};no.prototype.compare=function(e,t){var n=e,i=t,o=no.compare(n.x,i.x);if(o!==0)return o;var a=no.compare(n.y,i.y);if(a!==0)return a;if(this._dimensionsToTest<=2)return 0;var s=no.compare(n.z,i.z);return s};no.prototype.interfaces_=function(){return[Va]};no.prototype.getClass=function(){return no};no.compare=function(e,t){return e<t?-1:e>t?1:ue.isNaN(e)?ue.isNaN(t)?0:-1:ue.isNaN(t)?1:0};var Ka=function(){};Ka.prototype.create=function(){};Ka.prototype.interfaces_=function(){return[]};Ka.prototype.getClass=function(){return Ka};var H=function(){},pu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};H.prototype.interfaces_=function(){return[]};H.prototype.getClass=function(){return H};H.toLocationSymbol=function(e){switch(e){case H.EXTERIOR:return"e";case H.BOUNDARY:return"b";case H.INTERIOR:return"i";case H.NONE:return"-"}throw new He("Unknown location value: "+e)};pu.INTERIOR.get=function(){return 0};pu.BOUNDARY.get=function(){return 1};pu.EXTERIOR.get=function(){return 2};pu.NONE.get=function(){return-1};Object.defineProperties(H,pu);var ae=function(r,e){return r.interfaces_&&r.interfaces_().indexOf(e)>-1},qr=function(){},xg={LOG_10:{configurable:!0}};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};qr.log10=function(e){var t=Math.log(e);return ue.isInfinite(t)||ue.isNaN(t)?t:t/qr.LOG_10};qr.min=function(e,t,n,i){var o=e;return t<o&&(o=t),n<o&&(o=n),i<o&&(o=i),o};qr.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],a=arguments[2];return i<o?o:i>a?a:i}};qr.wrap=function(e,t){return e<0?t- -e%t:e%t};qr.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],i=e;return t>i&&(i=t),n>i&&(i=n),i}else if(arguments.length===4){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3],c=o;return a>c&&(c=a),s>c&&(c=s),u>c&&(c=u),c}};qr.average=function(e,t){return(e+t)/2};xg.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(qr,xg);var Yn=function(e){this.str=e};Yn.prototype.append=function(e){this.str+=e};Yn.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};Yn.prototype.toString=function(e){return this.str};var Dn=function(e){this.value=e};Dn.prototype.intValue=function(){return this.value};Dn.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};Dn.isNaN=function(e){return Number.isNaN(e)};var Ys=function(){};Ys.isWhitespace=function(e){return e<=32&&e>=0||e===127};Ys.toUpperCase=function(e){return e.toUpperCase()};var V=function r(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof r){var t=arguments[0];this.init(t)}else if(typeof arguments[0]=="string"){var n=arguments[0];r.call(this,r.parse(n))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},vn={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};V.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};V.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),i=V.magnitude(n._hi),o=V.TEN.pow(i);n=n.divide(o),n.gt(V.TEN)?(n=n.divide(V.TEN),i+=1):n.lt(V.ONE)&&(n=n.multiply(V.TEN),i-=1);for(var a=i+1,s=new Yn,u=V.MAX_PRINT_DIGITS-1,c=0;c<=u;c++){e&&c===a&&s.append(".");var f=Math.trunc(n._hi);if(f<0)break;var h=!1,p=0;f>9?(h=!0,p="9"):p="0"+f,s.append(p),n=n.subtract(V.valueOf(f)).multiply(V.TEN),h&&n.selfAdd(V.TEN);var b=!0,_=V.magnitude(n._hi);if(_<0&&Math.abs(_)>=u-c&&(b=!1),!b)break}return t[0]=i,s.toString()};V.prototype.sqr=function(){return this.multiply(this)};V.prototype.doubleValue=function(){return this._hi+this._lo};V.prototype.subtract=function(){if(arguments[0]instanceof V){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};V.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};V.prototype.isZero=function(){return this._hi===0&&this._lo===0};V.prototype.selfSubtract=function(){if(arguments[0]instanceof V){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};V.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};V.prototype.min=function(e){return this.le(e)?this:e};V.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof V){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,a=null,s=null,u=null,c=null,f=null,h=null,p=null;return c=this._hi/n,f=V.SPLIT*c,o=f-c,p=V.SPLIT*n,o=f-o,a=c-o,s=p-n,h=c*n,s=p-s,u=n-s,p=o*s-h+o*u+a*s+a*u,f=(this._hi-h-p+this._lo-c*i)/n,p=c+f,this._hi=p,this._lo=c-p+f,this}};V.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};V.prototype.divide=function(){if(arguments[0]instanceof V){var e=arguments[0],t=null,n=null,i=null,o=null,a=null,s=null,u=null,c=null;a=this._hi/e._hi,s=V.SPLIT*a,t=s-a,c=V.SPLIT*e._hi,t=s-t,n=a-t,i=c-e._hi,u=a*e._hi,i=c-i,o=e._hi-i,c=t*i-u+t*o+n*i+n*o,s=(this._hi-u-c+this._lo-a*e._lo)/e._hi,c=a+s;var f=c,h=a-c+s;return new V(f,h)}else if(typeof arguments[0]=="number"){var p=arguments[0];return ue.isNaN(p)?V.createNaN():V.copy(this).selfDivide(p,0)}};V.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};V.prototype.pow=function(e){if(e===0)return V.valueOf(1);var t=new V(this),n=V.valueOf(1),i=Math.abs(e);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(t),i/=2,i>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};V.prototype.ceil=function(){if(this.isNaN())return V.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new V(e,t)};V.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};V.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};V.prototype.setValue=function(){if(arguments[0]instanceof V){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};V.prototype.max=function(e){return this.ge(e)?this:e};V.prototype.sqrt=function(){if(this.isZero())return V.valueOf(0);if(this.isNegative())return V.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=V.valueOf(t),i=this.subtract(n.sqr()),o=i._hi*(e*.5);return n.add(o)};V.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof V){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,i=null,o=null,a=null,s=null,u=null;return o=this._hi+t,s=o-this._hi,a=o-s,a=t-s+(this._hi-a),u=a+this._lo,n=o+u,i=u+(o-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(arguments.length===2){var c=arguments[0],f=arguments[1],h=null,p=null,b=null,_=null,S=null,R=null,D=null,v=null;S=this._hi+c,b=this._lo+f,D=S-this._hi,v=b-this._lo,R=S-D,_=b-v,R=c-D+(this._hi-R),_=f-v+(this._lo-_),D=R+b,h=S+D,p=D+(S-h),D=_+p;var E=h+D,M=D+(h-E);return this._hi=E,this._lo=M,this}};V.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof V){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=null,a=null,s=null,u=null,c=null,f=null;c=V.SPLIT*this._hi,o=c-this._hi,f=V.SPLIT*n,o=c-o,a=this._hi-o,s=f-n,c=this._hi*n,s=f-s,u=n-s,f=o*s-c+o*u+a*s+a*u+(this._hi*i+this._lo*n);var h=c+f;o=c-h;var p=f+o;return this._hi=h,this._lo=p,this}};V.prototype.selfSqr=function(){return this.selfMultiply(this)};V.prototype.floor=function(){if(this.isNaN())return V.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new V(e,t)};V.prototype.negate=function(){return this.isNaN()?this:new V(-this._hi,-this._lo)};V.prototype.clone=function(){};V.prototype.multiply=function(){if(arguments[0]instanceof V){var e=arguments[0];return e.isNaN()?V.createNaN():V.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return ue.isNaN(t)?V.createNaN():V.copy(this).selfMultiply(t,0)}};V.prototype.isNaN=function(){return ue.isNaN(this._hi)};V.prototype.intValue=function(){return Math.trunc(this._hi)};V.prototype.toString=function(){var e=V.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};V.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),i=t[0]+1,o=n;if(n.charAt(0)===".")o="0"+n;else if(i<0)o="0."+V.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var a=i-n.length,s=V.stringOfChar("0",a);o=n+s+".0"}return this.isNegative()?"-"+o:o};V.prototype.reciprocal=function(){var e=null,t=null,n=null,i=null,o=null,a=null,s=null,u=null;o=1/this._hi,a=V.SPLIT*o,e=a-o,u=V.SPLIT*this._hi,e=a-e,t=o-e,n=u-this._hi,s=o*this._hi,n=u-n,i=this._hi-n,u=e*n-s+e*i+t*n+t*i,a=(1-s-u-o*this._lo)/this._hi;var c=o+a,f=o-c+a;return new V(c,f)};V.prototype.toSciNotation=function(){if(this.isZero())return V.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),i=V.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var o="";n.length>1&&(o=n.substring(1));var a=n.charAt(0)+"."+o;return this.isNegative()?"-"+a+i:a+i};V.prototype.abs=function(){return this.isNaN()?V.NaN:this.isNegative()?this.negate():new V(this)};V.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};V.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};V.prototype.add=function(){if(arguments[0]instanceof V){var e=arguments[0];return V.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return V.copy(this).selfAdd(t)}};V.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof V){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}};V.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};V.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};V.prototype.trunc=function(){return this.isNaN()?V.NaN:this.isPositive()?this.floor():this.ceil()};V.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};V.prototype.interfaces_=function(){return[on,nn,Cc]};V.prototype.getClass=function(){return V};V.sqr=function(e){return V.valueOf(e).selfMultiply(e)};V.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return V.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new V(t)}};V.sqrt=function(e){return V.valueOf(e).sqrt()};V.parse=function(e){for(var t=0,n=e.length;Ys.isWhitespace(e.charAt(t));)t++;var i=!1;if(t<n){var o=e.charAt(t);(o==="-"||o==="+")&&(t++,o==="-"&&(i=!0))}for(var a=new V,s=0,u=0,c=0;!(t>=n);){var f=e.charAt(t);if(t++,Ys.isDigit(f)){var h=f-"0";a.selfMultiply(V.TEN),a.selfAdd(h),s++;continue}if(f==="."){u=s;continue}if(f==="e"||f==="E"){var p=e.substring(t);try{c=Dn.parseInt(p)}catch(D){throw D instanceof Error?new Error("Invalid exponent "+p+" in string "+e):D}finally{}break}throw new Error("Unexpected character '"+f+"' at position "+t+" in string "+e)}var b=a,_=s-u-c;if(_===0)b=a;else if(_>0){var S=V.TEN.pow(_);b=a.divide(S)}else if(_<0){var R=V.TEN.pow(-_);b=a.multiply(R)}return i?b.negate():b};V.createNaN=function(){return new V(ue.NaN,ue.NaN)};V.copy=function(e){return new V(e)};V.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),i=Math.trunc(Math.floor(n)),o=Math.pow(10,i);return o*10<=t&&(i+=1),i};V.stringOfChar=function(e,t){for(var n=new Yn,i=0;i<t;i++)n.append(e);return n.toString()};vn.PI.get=function(){return new V(3.141592653589793,12246467991473532e-32)};vn.TWO_PI.get=function(){return new V(6.283185307179586,24492935982947064e-32)};vn.PI_2.get=function(){return new V(1.5707963267948966,6123233995736766e-32)};vn.E.get=function(){return new V(2.718281828459045,14456468917292502e-32)};vn.NaN.get=function(){return new V(ue.NaN,ue.NaN)};vn.EPS.get=function(){return 123259516440783e-46};vn.SPLIT.get=function(){return 134217729};vn.MAX_PRINT_DIGITS.get=function(){return 32};vn.TEN.get=function(){return V.valueOf(10)};vn.ONE.get=function(){return V.valueOf(1)};vn.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};vn.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(V,vn);var Er=function(){},Sg={DP_SAFE_EPSILON:{configurable:!0}};Er.prototype.interfaces_=function(){return[]};Er.prototype.getClass=function(){return Er};Er.orientationIndex=function(e,t,n){var i=Er.orientationIndexFilter(e,t,n);if(i<=1)return i;var o=V.valueOf(t.x).selfAdd(-e.x),a=V.valueOf(t.y).selfAdd(-e.y),s=V.valueOf(n.x).selfAdd(-t.x),u=V.valueOf(n.y).selfAdd(-t.y);return o.selfMultiply(u).selfSubtract(a.selfMultiply(s)).signum()};Er.signOfDet2x2=function(e,t,n,i){var o=e.multiply(i).selfSubtract(t.multiply(n));return o.signum()};Er.intersection=function(e,t,n,i){var o=V.valueOf(i.y).selfSubtract(n.y).selfMultiply(V.valueOf(t.x).selfSubtract(e.x)),a=V.valueOf(i.x).selfSubtract(n.x).selfMultiply(V.valueOf(t.y).selfSubtract(e.y)),s=o.subtract(a),u=V.valueOf(i.x).selfSubtract(n.x).selfMultiply(V.valueOf(e.y).selfSubtract(n.y)),c=V.valueOf(i.y).selfSubtract(n.y).selfMultiply(V.valueOf(e.x).selfSubtract(n.x)),f=u.subtract(c),h=f.selfDivide(s).doubleValue(),p=V.valueOf(e.x).selfAdd(V.valueOf(t.x).selfSubtract(e.x).selfMultiply(h)).doubleValue(),b=V.valueOf(t.x).selfSubtract(e.x).selfMultiply(V.valueOf(e.y).selfSubtract(n.y)),_=V.valueOf(t.y).selfSubtract(e.y).selfMultiply(V.valueOf(e.x).selfSubtract(n.x)),S=b.subtract(_),R=S.selfDivide(s).doubleValue(),D=V.valueOf(n.y).selfAdd(V.valueOf(i.y).selfSubtract(n.y).selfMultiply(R)).doubleValue();return new q(p,D)};Er.orientationIndexFilter=function(e,t,n){var i=null,o=(e.x-n.x)*(t.y-n.y),a=(e.y-n.y)*(t.x-n.x),s=o-a;if(o>0){if(a<=0)return Er.signum(s);i=o+a}else if(o<0){if(a>=0)return Er.signum(s);i=-o-a}else return Er.signum(s);var u=Er.DP_SAFE_EPSILON*i;return s>=u||-s>=u?Er.signum(s):2};Er.signum=function(e){return e>0?1:e<0?-1:0};Sg.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Er,Sg);var Ee=function(){},gu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};gu.X.get=function(){return 0};gu.Y.get=function(){return 1};gu.Z.get=function(){return 2};gu.M.get=function(){return 3};Ee.prototype.setOrdinate=function(e,t,n){};Ee.prototype.size=function(){};Ee.prototype.getOrdinate=function(e,t){};Ee.prototype.getCoordinate=function(){};Ee.prototype.getCoordinateCopy=function(e){};Ee.prototype.getDimension=function(){};Ee.prototype.getX=function(e){};Ee.prototype.clone=function(){};Ee.prototype.expandEnvelope=function(e){};Ee.prototype.copy=function(){};Ee.prototype.getY=function(e){};Ee.prototype.toCoordinateArray=function(){};Ee.prototype.interfaces_=function(){return[Cc]};Ee.prototype.getClass=function(){return Ee};Object.defineProperties(Ee,gu);var Cg=function(){},bs=function(r){function e(){r.call(this,"Projective point not representable on the Cartesian plane.")}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cg),Kt=function(){};Kt.arraycopy=function(e,t,n,i,o){for(var a=0,s=t;s<t+o;s++)n[i+a]=e[s],a++};Kt.getProperty=function(e){return{"line.separator":`
`}[e]};var sn=function r(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];this.x=t,this.y=n,this.w=1}else if(arguments[0]instanceof r&&arguments[1]instanceof r){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof q&&arguments[1]instanceof q){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(arguments.length===3){var u=arguments[0],c=arguments[1],f=arguments[2];this.x=u,this.y=c,this.w=f}else if(arguments.length===4){var h=arguments[0],p=arguments[1],b=arguments[2],_=arguments[3],S=h.y-p.y,R=p.x-h.x,D=h.x*p.y-p.x*h.y,v=b.y-_.y,E=_.x-b.x,M=b.x*_.y-_.x*b.y;this.x=R*M-E*D,this.y=v*D-S*M,this.w=S*E-v*R}};sn.prototype.getY=function(){var e=this.y/this.w;if(ue.isNaN(e)||ue.isInfinite(e))throw new bs;return e};sn.prototype.getX=function(){var e=this.x/this.w;if(ue.isNaN(e)||ue.isInfinite(e))throw new bs;return e};sn.prototype.getCoordinate=function(){var e=new q;return e.x=this.getX(),e.y=this.getY(),e};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};sn.intersection=function(e,t,n,i){var o=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,u=n.y-i.y,c=i.x-n.x,f=n.x*i.y-i.x*n.y,h=a*f-c*s,p=u*s-o*f,b=o*c-u*a,_=h/b,S=p/b;if(ue.isNaN(_)||ue.isInfinite(_)||ue.isNaN(S)||ue.isInfinite(S))throw new bs;return new q(_,S)};var re=function r(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof r){var t=arguments[0];this.init(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Ig={serialVersionUID:{configurable:!0}};re.prototype.getArea=function(){return this.getWidth()*this.getHeight()};re.prototype.equals=function(e){if(!(e instanceof re))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};re.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new re;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,i=this._maxx<e._maxx?this._maxx:e._maxx,o=this._maxy<e._maxy?this._maxy:e._maxy;return new re(t,i,n,o)};re.prototype.isNull=function(){return this._maxx<this._minx};re.prototype.getMaxX=function(){return this._maxx};re.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof re){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}};re.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof re){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof q){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}};re.prototype.getMinY=function(){return this._miny};re.prototype.getMinX=function(){return this._minx};re.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof re){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};re.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};re.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};re.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};re.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};re.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};re.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};re.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};re.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};re.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};re.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof re){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof q){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.covers(n,i)}};re.prototype.centre=function(){return this.isNull()?null:new q((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};re.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof re){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(arguments.length===4){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];o<a?(this._minx=o,this._maxx=a):(this._minx=a,this._maxx=o),s<u?(this._miny=s,this._maxy=u):(this._miny=u,this._maxy=s)}};re.prototype.getMaxY=function(){return this._maxy};re.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};re.prototype.hashCode=function(){var e=17;return e=37*e+q.hashCode(this._minx),e=37*e+q.hashCode(this._maxx),e=37*e+q.hashCode(this._miny),e=37*e+q.hashCode(this._maxy),e};re.prototype.interfaces_=function(){return[nn,on]};re.prototype.getClass=function(){return re};re.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=Math.min(a.x,s.x),c=Math.max(a.x,s.x),f=Math.min(i.x,o.x),h=Math.max(i.x,o.x);return!(f>c||h<u||(u=Math.min(a.y,s.y),c=Math.max(a.y,s.y),f=Math.min(i.y,o.y),h=Math.max(i.y,o.y),f>c)||h<u)}};Ig.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(re,Ig);var En={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ic=function(e){this.geometryFactory=e||new me};Ic.prototype.read=function(e){var t,n,i;e=e.replace(/[\n\r]/g," ");var o=En.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(o=En.emptyTypeStr.exec(e),o[2]=void 0),o&&(n=o[1].toLowerCase(),i=o[2],za[n]&&(t=za[n].apply(this,[i]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};Ic.prototype.write=function(e){return this.extractGeometry(e)};Ic.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!Si[t])return null;var n=t.toUpperCase(),i;return e.isEmpty()?i=n+" EMPTY":i=n+"("+Si[t].apply(this,[e])+")",i};var Si={coordinate:function(e){return e.x+" "+e.y},point:function(e){return Si.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push("("+Si.point.apply(t,[e._geometries[i]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],i=0,o=e._points._coordinates.length;i<o;++i)n.push(Si.coordinate.apply(t,[e._points._coordinates[i]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],i=0,o=e._points._coordinates.length;i<o;++i)n.push(Si.coordinate.apply(t,[e._points._coordinates[i]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push("("+Si.linestring.apply(t,[e._geometries[i]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+Si.linestring.apply(this,[e._shell])+")");for(var i=0,o=e._holes.length;i<o;++i)n.push("("+Si.linestring.apply(t,[e._holes[i]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push("("+Si.polygon.apply(t,[e._geometries[i]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],i=0,o=e._geometries.length;i<o;++i)n.push(t.extractGeometry(e._geometries[i]));return n.join(",")}},za={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(En.spaces);return this.geometryFactory.createPoint(new q(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,i=e.trim().split(","),o=[],a=0,s=i.length;a<s;++a)n=i[a].replace(En.trimParens,"$1"),o.push(za.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(o)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],i,o=0,a=t.length;o<a;++o)i=t[o].trim().split(En.spaces),n.push(new q(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],i,o=0,a=t.length;o<a;++o)i=t[o].trim().split(En.spaces),n.push(new q(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,i=e.trim().split(En.parenComma),o=[],a=0,s=i.length;a<s;++a)n=i[a].replace(En.trimParens,"$1"),o.push(za.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(o)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,i,o,a=e.trim().split(En.parenComma),s,u=[],c=0,f=a.length;c<f;++c)n=a[c].replace(En.trimParens,"$1"),i=za.linestring.apply(t,[n]),o=t.geometryFactory.createLinearRing(i._points),c===0?s=o:u.push(o);return this.geometryFactory.createPolygon(s,u)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,i=e.trim().split(En.doubleParenComma),o=[],a=0,s=i.length;a<s;++a)n=i[a].replace(En.trimParens,"$1"),o.push(za.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),i=[],o=0,a=n.length;o<a;++o)i.push(t.read(n[o]));return this.geometryFactory.createGeometryCollection(i)}},fn=function(e){this.parser=new Ic(e)};fn.prototype.write=function(e){return this.parser.write(e)};fn.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var zi=function(r){function e(t){r.call(this,t),this.name="RuntimeException",this.message=t,this.stack=new r().stack}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Error),Zu=function(r){function e(){if(r.call(this),arguments.length===0)r.call(this);else if(arguments.length===1){var t=arguments[0];r.call(this,t)}}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zi),he=function(){};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.shouldNeverReachHere=function(){if(arguments.length===0)he.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new Zu("Should never reach here"+(e!==null?": "+e:""))}};he.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],he.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new Zu:new Zu(t)};he.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],he.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new Zu("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var Ke=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new q,this._intPt[1]=new q,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},La={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ke.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};Ke.prototype.getTopologySummary=function(){var e=new Yn;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};Ke.prototype.computeIntersection=function(e,t,n,i){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(e,t,n,i)};Ke.prototype.getIntersectionNum=function(){return this._result};Ke.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};Ke.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};Ke.prototype.setPrecisionModel=function(e){this._precisionModel=e};Ke.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};Ke.prototype.getIntersection=function(e){return this._intPt[e]};Ke.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};Ke.prototype.hasIntersection=function(){return this._result!==Ke.NO_INTERSECTION};Ke.prototype.getEdgeDistance=function(e,t){var n=Ke.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};Ke.prototype.isCollinear=function(){return this._result===Ke.COLLINEAR_INTERSECTION};Ke.prototype.toString=function(){return fn.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+fn.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};Ke.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};Ke.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};Ke.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};Ke.prototype.interfaces_=function(){return[]};Ke.prototype.getClass=function(){return Ke};Ke.computeEdgeDistance=function(e,t,n){var i=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y),a=-1;if(e.equals(t))a=0;else if(e.equals(n))i>o?a=i:a=o;else{var s=Math.abs(e.x-t.x),u=Math.abs(e.y-t.y);i>o?a=s:a=u,a===0&&!e.equals(t)&&(a=Math.max(s,u))}return he.isTrue(!(a===0&&!e.equals(t)),"Bad distance calculation"),a};Ke.nonRobustComputeEdgeDistance=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o);return he.isTrue(!(a===0&&!e.equals(t)),"Invalid distance calculation"),a};La.DONT_INTERSECT.get=function(){return 0};La.DO_INTERSECT.get=function(){return 1};La.COLLINEAR.get=function(){return 2};La.NO_INTERSECTION.get=function(){return 0};La.POINT_INTERSECTION.get=function(){return 1};La.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(Ke,La);var $o=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(n){var i=new re(this._inputLines[0][0],this._inputLines[0][1]),o=new re(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(n)&&o.contains(n)},e.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,re.intersects(i,o,n)&&ee.orientationIndex(i,o,n)===0&&ee.orientationIndex(o,i,n)===0)return this._isProper=!0,(n.equals(i)||n.equals(o))&&(this._isProper=!1),this._result=r.POINT_INTERSECTION,null;this._result=r.NO_INTERSECTION}else return r.prototype.computeIntersection.apply(this,arguments)},e.prototype.normalizeToMinimum=function(n,i,o,a,s){s.x=this.smallestInAbsValue(n.x,i.x,o.x,a.x),s.y=this.smallestInAbsValue(n.y,i.y,o.y,a.y),n.x-=s.x,n.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y,a.x-=s.x,a.y-=s.y},e.prototype.safeHCoordinateIntersection=function(n,i,o,a){var s=null;try{s=sn.intersection(n,i,o,a)}catch(u){if(u instanceof bs)s=e.nearestEndpoint(n,i,o,a);else throw u}finally{}return s},e.prototype.intersection=function(n,i,o,a){var s=this.intersectionWithNormalization(n,i,o,a);return this.isInSegmentEnvelopes(s)||(s=new q(e.nearestEndpoint(n,i,o,a))),this._precisionModel!==null&&this._precisionModel.makePrecise(s),s},e.prototype.smallestInAbsValue=function(n,i,o,a){var s=n,u=Math.abs(s);return Math.abs(i)<u&&(s=i,u=Math.abs(i)),Math.abs(o)<u&&(s=o,u=Math.abs(o)),Math.abs(a)<u&&(s=a),s},e.prototype.checkDD=function(n,i,o,a,s){var u=Er.intersection(n,i,o,a),c=this.isInSegmentEnvelopes(u);Kt.out.println("DD in env = "+c+"  --------------------- "+u),s.distance(u)>1e-4&&Kt.out.println("Distance = "+s.distance(u))},e.prototype.intersectionWithNormalization=function(n,i,o,a){var s=new q(n),u=new q(i),c=new q(o),f=new q(a),h=new q;this.normalizeToEnvCentre(s,u,c,f,h);var p=this.safeHCoordinateIntersection(s,u,c,f);return p.x+=h.x,p.y+=h.y,p},e.prototype.computeCollinearIntersection=function(n,i,o,a){var s=re.intersects(n,i,o),u=re.intersects(n,i,a),c=re.intersects(o,a,n),f=re.intersects(o,a,i);return s&&u?(this._intPt[0]=o,this._intPt[1]=a,r.COLLINEAR_INTERSECTION):c&&f?(this._intPt[0]=n,this._intPt[1]=i,r.COLLINEAR_INTERSECTION):s&&c?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!u&&!f?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):s&&f?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!u&&!c?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):u&&c?(this._intPt[0]=a,this._intPt[1]=n,a.equals(n)&&!s&&!f?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):u&&f?(this._intPt[0]=a,this._intPt[1]=i,a.equals(i)&&!s&&!c?r.POINT_INTERSECTION:r.COLLINEAR_INTERSECTION):r.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(n,i,o,a,s){var u=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,f=n.x>i.x?n.x:i.x,h=n.y>i.y?n.y:i.y,p=o.x<a.x?o.x:a.x,b=o.y<a.y?o.y:a.y,_=o.x>a.x?o.x:a.x,S=o.y>a.y?o.y:a.y,R=u>p?u:p,D=f<_?f:_,v=c>b?c:b,E=h<S?h:S,M=(R+D)/2,O=(v+E)/2;s.x=M,s.y=O,n.x-=s.x,n.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y,a.x-=s.x,a.y-=s.y},e.prototype.computeIntersect=function(n,i,o,a){if(this._isProper=!1,!re.intersects(n,i,o,a))return r.NO_INTERSECTION;var s=ee.orientationIndex(n,i,o),u=ee.orientationIndex(n,i,a);if(s>0&&u>0||s<0&&u<0)return r.NO_INTERSECTION;var c=ee.orientationIndex(o,a,n),f=ee.orientationIndex(o,a,i);if(c>0&&f>0||c<0&&f<0)return r.NO_INTERSECTION;var h=s===0&&u===0&&c===0&&f===0;return h?this.computeCollinearIntersection(n,i,o,a):(s===0||u===0||c===0||f===0?(this._isProper=!1,n.equals2D(o)||n.equals2D(a)?this._intPt[0]=n:i.equals2D(o)||i.equals2D(a)?this._intPt[0]=i:s===0?this._intPt[0]=new q(o):u===0?this._intPt[0]=new q(a):c===0?this._intPt[0]=new q(n):f===0&&(this._intPt[0]=new q(i))):(this._isProper=!0,this._intPt[0]=this.intersection(n,i,o,a)),r.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(n,i,o,a){var s=n,u=ee.distancePointLine(n,o,a),c=ee.distancePointLine(i,o,a);return c<u&&(u=c,s=i),c=ee.distancePointLine(o,n,i),c<u&&(u=c,s=o),c=ee.distancePointLine(a,n,i),c<u&&(u=c,s=a),s},e}(Ke),ga=function(){};ga.prototype.interfaces_=function(){return[]};ga.prototype.getClass=function(){return ga};ga.orientationIndex=function(e,t,n){var i=t.x-e.x,o=t.y-e.y,a=n.x-t.x,s=n.y-t.y;return ga.signOfDet2x2(i,o,a,s)};ga.signOfDet2x2=function(e,t,n,i){var o=null,a=null,s=null;if(o=1,e===0||i===0)return t===0||n===0?0:t>0?n>0?-o:o:n>0?o:-o;if(t===0||n===0)return i>0?e>0?o:-o:e>0?-o:o;if(t>0?i>0?t<=i||(o=-o,a=e,e=n,n=a,a=t,t=i,i=a):t<=-i?(o=-o,n=-n,i=-i):(a=e,e=-n,n=a,a=t,t=-i,i=a):i>0?-t<=i?(o=-o,e=-e,t=-t):(a=-e,e=n,n=a,a=-t,t=i,i=a):t>=i?(e=-e,t=-t,n=-n,i=-i):(o=-o,a=-e,e=-n,n=a,a=-t,t=-i,i=a),e>0)if(n>0){if(!(e<=n))return o}else return o;else{if(n>0)return-o;if(e>=n)o=-o,e=-e,n=-n;else return-o}for(;;){if(s=Math.floor(n/e),n=n-s*e,i=i-s*t,i<0)return-o;if(i>t)return o;if(e>n+n){if(t<i+i)return o}else{if(t>i+i)return-o;n=e-n,i=t-i,o=-o}if(i===0)return n===0?0:-o;if(n===0||(s=Math.floor(e/n),e=e-s*n,t=t-s*i,t<0))return o;if(t>i)return-o;if(n>e+e){if(i<t+t)return-o}else{if(i>t+t)return o;e=n-e,t=i-t,o=-o}if(t===0)return e===0?0:o;if(e===0)return-o}};var Rn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Rn.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,i=t.x;return n>i&&(n=t.x,i=e.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var o=e.x-this._p.x,a=e.y-this._p.y,s=t.x-this._p.x,u=t.y-this._p.y,c=ga.signOfDet2x2(o,a,s,u);if(c===0)return this._isPointOnSegment=!0,null;u<a&&(c=-c),c>0&&this._crossingCount++}};Rn.prototype.isPointInPolygon=function(){return this.getLocation()!==H.EXTERIOR};Rn.prototype.getLocation=function(){return this._isPointOnSegment?H.BOUNDARY:this._crossingCount%2===1?H.INTERIOR:H.EXTERIOR};Rn.prototype.isOnSegment=function(){return this._isPointOnSegment};Rn.prototype.interfaces_=function(){return[]};Rn.prototype.getClass=function(){return Rn};Rn.locatePointInRing=function(){if(arguments[0]instanceof q&&ae(arguments[1],Ee)){for(var e=arguments[0],t=arguments[1],n=new Rn(e),i=new q,o=new q,a=1;a<t.size();a++)if(t.getCoordinate(a,i),t.getCoordinate(a-1,o),n.countSegment(i,o),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof q&&arguments[1]instanceof Array){for(var s=arguments[0],u=arguments[1],c=new Rn(s),f=1;f<u.length;f++){var h=u[f],p=u[f-1];if(c.countSegment(h,p),c.isOnSegment())return c.getLocation()}return c.getLocation()}};var ee=function(){},Ra={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ee.prototype.interfaces_=function(){return[]};ee.prototype.getClass=function(){return ee};ee.orientationIndex=function(e,t,n){return Er.orientationIndex(e,t,n)};ee.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,i=1;i<e.length-1;i++){var o=e[i].x-n,a=e[i+1].y,s=e[i-1].y;t+=o*(s-a)}return t/2}else if(ae(arguments[0],Ee)){var u=arguments[0],c=u.size();if(c<3)return 0;var f=new q,h=new q,p=new q;u.getCoordinate(0,h),u.getCoordinate(1,p);var b=h.x;p.x-=b;for(var _=0,S=1;S<c-1;S++)f.y=h.y,h.x=p.x,h.y=p.y,u.getCoordinate(S+1,p),p.x-=b,_+=h.x*(f.y-p.y);return _/2}};ee.distanceLineLine=function(e,t,n,i){if(e.equals(t))return ee.distancePointLine(e,n,i);if(n.equals(i))return ee.distancePointLine(i,e,t);var o=!1;if(!re.intersects(e,t,n,i))o=!0;else{var a=(t.x-e.x)*(i.y-n.y)-(t.y-e.y)*(i.x-n.x);if(a===0)o=!0;else{var s=(e.y-n.y)*(i.x-n.x)-(e.x-n.x)*(i.y-n.y),u=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),c=u/a,f=s/a;(f<0||f>1||c<0||c>1)&&(o=!0)}}return o?qr.min(ee.distancePointLine(e,n,i),ee.distancePointLine(t,n,i),ee.distancePointLine(n,e,t),ee.distancePointLine(i,e,t)):0};ee.isPointInRing=function(e,t){return ee.locatePointInRing(e,t)!==H.EXTERIOR};ee.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,i=new q;e.getCoordinate(0,i);for(var o=i.x,a=i.y,s=1;s<t;s++){e.getCoordinate(s,i);var u=i.x,c=i.y,f=u-o,h=c-a;n+=Math.sqrt(f*f+h*h),o=u,a=c}return n};ee.isCCW=function(e){var t=e.length-1;if(t<3)throw new He("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],i=0,o=1;o<=t;o++){var a=e[o];a.y>n.y&&(n=a,i=o)}var s=i;do s=s-1,s<0&&(s=t);while(e[s].equals2D(n)&&s!==i);var u=i;do u=(u+1)%t;while(e[u].equals2D(n)&&u!==i);var c=e[s],f=e[u];if(c.equals2D(n)||f.equals2D(n)||c.equals2D(f))return!1;var h=ee.computeOrientation(c,n,f),p=!1;return h===0?p=c.x>f.x:p=h>0,p};ee.locatePointInRing=function(e,t){return Rn.locatePointInRing(e,t)};ee.distancePointLinePerpendicular=function(e,t,n){var i=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/i;return Math.abs(o)*Math.sqrt(i)};ee.computeOrientation=function(e,t,n){return ee.orientationIndex(e,t,n)};ee.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new He("Line array must contain at least one vertex");for(var n=e.distance(t[0]),i=0;i<t.length-1;i++){var o=ee.distancePointLine(e,t[i],t[i+1]);o<n&&(n=o)}return n}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2];if(s.x===u.x&&s.y===u.y)return a.distance(s);var c=(u.x-s.x)*(u.x-s.x)+(u.y-s.y)*(u.y-s.y),f=((a.x-s.x)*(u.x-s.x)+(a.y-s.y)*(u.y-s.y))/c;if(f<=0)return a.distance(s);if(f>=1)return a.distance(u);var h=((s.y-a.y)*(u.x-s.x)-(s.x-a.x)*(u.y-s.y))/c;return Math.abs(h)*Math.sqrt(c)}};ee.isOnLine=function(e,t){for(var n=new $o,i=1;i<t.length;i++){var o=t[i-1],a=t[i];if(n.computeIntersection(e,o,a),n.hasIntersection())return!0}return!1};Ra.CLOCKWISE.get=function(){return-1};Ra.RIGHT.get=function(){return ee.CLOCKWISE};Ra.COUNTERCLOCKWISE.get=function(){return 1};Ra.LEFT.get=function(){return ee.COUNTERCLOCKWISE};Ra.COLLINEAR.get=function(){return 0};Ra.STRAIGHT.get=function(){return ee.COLLINEAR};Object.defineProperties(ee,Ra);var Ui=function(){};Ui.prototype.filter=function(e){};Ui.prototype.interfaces_=function(){return[]};Ui.prototype.getClass=function(){return Ui};var oe=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},vi={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};oe.prototype.isGeometryCollection=function(){return this.getSortIndex()===oe.SORTINDEX_GEOMETRYCOLLECTION};oe.prototype.getFactory=function(){return this._factory};oe.prototype.getGeometryN=function(e){return this};oe.prototype.getArea=function(){return 0};oe.prototype.isRectangle=function(){return!1};oe.prototype.equals=function(){if(arguments[0]instanceof oe){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof oe))return!1;var n=t;return this.equalsExact(n)}};oe.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};oe.prototype.geometryChanged=function(){this.apply(oe.geometryChangedFilter)};oe.prototype.geometryChangedAction=function(){this._envelope=null};oe.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};oe.prototype.getLength=function(){return 0};oe.prototype.getNumGeometries=function(){return 1};oe.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}};oe.prototype.getUserData=function(){return this._userData};oe.prototype.getSRID=function(){return this._SRID};oe.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};oe.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===oe.SORTINDEX_GEOMETRYCOLLECTION)throw new He("This method does not support GeometryCollection arguments")};oe.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};oe.prototype.norm=function(){var e=this.copy();return e.normalize(),e};oe.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};oe.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new re(this._envelope)};oe.prototype.setSRID=function(e){this._SRID=e};oe.prototype.setUserData=function(e){this._userData=e};oe.prototype.compare=function(e,t){for(var n=e.iterator(),i=t.iterator();n.hasNext()&&i.hasNext();){var o=n.next(),a=i.next(),s=o.compareTo(a);if(s!==0)return s}return n.hasNext()?1:i.hasNext()?-1:0};oe.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};oe.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===oe.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===oe.SORTINDEX_MULTIPOINT||this.getSortIndex()===oe.SORTINDEX_MULTILINESTRING||this.getSortIndex()===oe.SORTINDEX_MULTIPOLYGON};oe.prototype.interfaces_=function(){return[Cc,nn,on]};oe.prototype.getClass=function(){return oe};oe.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};oe.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};vi.serialVersionUID.get=function(){return 8763622679187377e3};vi.SORTINDEX_POINT.get=function(){return 0};vi.SORTINDEX_MULTIPOINT.get=function(){return 1};vi.SORTINDEX_LINESTRING.get=function(){return 2};vi.SORTINDEX_LINEARRING.get=function(){return 3};vi.SORTINDEX_MULTILINESTRING.get=function(){return 4};vi.SORTINDEX_POLYGON.get=function(){return 5};vi.SORTINDEX_MULTIPOLYGON.get=function(){return 6};vi.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};vi.geometryChangedFilter.get=function(){return ih};Object.defineProperties(oe,vi);var ih=function(){};ih.interfaces_=function(){return[Ui]};ih.filter=function(e){e.geometryChangedAction()};var si=function(){};si.prototype.filter=function(e){};si.prototype.interfaces_=function(){return[]};si.prototype.getClass=function(){return si};var $r=function(){},Xi={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$r.prototype.isInBoundary=function(e){};$r.prototype.interfaces_=function(){return[]};$r.prototype.getClass=function(){return $r};Xi.Mod2BoundaryNodeRule.get=function(){return Wa};Xi.EndPointBoundaryNodeRule.get=function(){return Ja};Xi.MultiValentEndPointBoundaryNodeRule.get=function(){return Xa};Xi.MonoValentEndPointBoundaryNodeRule.get=function(){return Ya};Xi.MOD2_BOUNDARY_RULE.get=function(){return new Wa};Xi.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ja};Xi.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Xa};Xi.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ya};Xi.OGC_SFS_BOUNDARY_RULE.get=function(){return $r.MOD2_BOUNDARY_RULE};Object.defineProperties($r,Xi);var Wa=function(){};Wa.prototype.isInBoundary=function(e){return e%2===1};Wa.prototype.interfaces_=function(){return[$r]};Wa.prototype.getClass=function(){return Wa};var Ja=function(){};Ja.prototype.isInBoundary=function(e){return e>0};Ja.prototype.interfaces_=function(){return[$r]};Ja.prototype.getClass=function(){return Ja};var Xa=function(){};Xa.prototype.isInBoundary=function(e){return e>1};Xa.prototype.interfaces_=function(){return[$r]};Xa.prototype.getClass=function(){return Xa};var Ya=function(){};Ya.prototype.isInBoundary=function(e){return e===1};Ya.prototype.interfaces_=function(){return[$r]};Ya.prototype.getClass=function(){return Ya};var ut=function(){};ut.prototype.add=function(){};ut.prototype.addAll=function(){};ut.prototype.isEmpty=function(){};ut.prototype.iterator=function(){};ut.prototype.size=function(){};ut.prototype.toArray=function(){};ut.prototype.remove=function(){};function oh(r){this.message=r||""}oh.prototype=new Error;oh.prototype.name="IndexOutOfBoundsException";var ws=function(){};ws.prototype.hasNext=function(){};ws.prototype.next=function(){};ws.prototype.remove=function(){};var un=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(ut);function Es(r){this.message=r||""}Es.prototype=new Error;Es.prototype.name="NoSuchElementException";var $=function(r){function e(){r.call(this),this.array_=[],arguments[0]instanceof ut&&this.addAll(arguments[0])}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[r,ut]},e.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},e.prototype.set=function(n,i){var o=this.array_[n];return this.array_[n]=i,o},e.prototype.iterator=function(){return new v_(this)},e.prototype.get=function(n){if(n<0||n>=this.size())throw new oh;return this.array_[n]},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var n=this,i=[],o=0,a=this.array_.length;o<a;o++)i.push(n.array_[o]);return i},e.prototype.remove=function(n){for(var i=this,o=!1,a=0,s=this.array_.length;a<s;a++)if(i.array_[a]===n){i.array_.splice(a,1),o=!0;break}return o},e}(un),v_=function(r){function e(t){r.call(this),this.arrayList_=t,this.position_=0}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Es;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(ws),mu=function(r){function e(){if(r.call(this),arguments.length!==0){if(arguments.length===1){var n=arguments[0];this.ensureCapacity(n.length),this.add(n,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={coordArrayType:{configurable:!0}};return t.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(i){return this.get(i)},e.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],a=arguments[1],s=!1,u=o.iterator();u.hasNext();)i.add(u.next(),a),s=!0;return s}else return r.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var i=this,o=r.prototype.clone.call(this),a=0;a<this.size();a++)o.add(a,i.get(a).copy());return o},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];r.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var a=arguments[0],s=arguments[1];return this.add(a,s,!0),!0}else if(arguments[0]instanceof q&&typeof arguments[1]=="boolean"){var u=arguments[0],c=arguments[1];if(!c&&this.size()>=1){var f=this.get(this.size()-1);if(f.equals2D(u))return null}r.prototype.add.call(this,u)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var h=arguments[0],p=arguments[1];return this.add(h,p),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var b=arguments[0],_=arguments[1],S=arguments[2];if(S)for(var R=0;R<b.length;R++)i.add(b[R],_);else for(var D=b.length-1;D>=0;D--)i.add(b[D],_);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof q){var v=arguments[0],E=arguments[1],M=arguments[2];if(!M){var O=this.size();if(O>0){if(v>0){var k=this.get(v-1);if(k.equals2D(E))return null}if(v<O){var F=this.get(v);if(F.equals2D(E))return null}}}r.prototype.add.call(this,v,E)}}else if(arguments.length===4){var z=arguments[0],U=arguments[1],W=arguments[2],C=arguments[3],l=1;W>C&&(l=-1);for(var g=W;g!==C;g+=l)i.add(z[g],U);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new q(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,t),e}($),ve=function(){},Ac={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ac.ForwardComparator.get=function(){return js};Ac.BidirectionalComparator.get=function(){return ja};Ac.coordArrayType.get=function(){return new Array(0).fill(null)};ve.prototype.interfaces_=function(){return[]};ve.prototype.getClass=function(){return ve};ve.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};ve.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(ve.indexOf(i,t)<0)return i}return null};ve.scroll=function(e,t){var n=ve.indexOf(t,e);if(n<0)return null;var i=new Array(e.length).fill(null);Kt.arraycopy(e,n,i,0,e.length-n),Kt.arraycopy(e,0,i,e.length-n,n),Kt.arraycopy(i,0,e,0,e.length)};ve.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(a.compare(i[s],o[s])!==0)return!1;return!0}};ve.intersection=function(e,t){for(var n=new mu,i=0;i<e.length;i++)t.intersects(e[i])&&n.add(e[i],!0);return n.toCoordinateArray()};ve.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};ve.removeRepeatedPoints=function(e){if(!ve.hasRepeatedPoints(e))return e;var t=new mu(e,!1);return t.toCoordinateArray()};ve.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),i=0;i<=n;i++){var o=e[i];e[i]=e[t-i],e[t-i]=o}};ve.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var i=new Array(t).fill(null);if(t===0)return i;for(var o=0,a=0;a<e.length;a++)e[a]!==null&&(i[o++]=e[a]);return i};ve.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new q(e[n]);return t}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=0;c<u;c++)a[s+c]=new q(i[o+c])};ve.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=t[e.length-n-1];if(i.compareTo(o)!==0)return!1}return!0};ve.envelope=function(e){for(var t=new re,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};ve.toCoordinateArray=function(e){return e.toArray(ve.coordArrayType)};ve.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};ve.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};ve.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,i=e[t].compareTo(e[n]);if(i!==0)return i}return 1};ve.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var i=e[n].compareTo(t[n]);if(i!==0)return i;n++}return n<t.length?-1:n<e.length?1:0};ve.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};ve.extract=function(e,t,n){t=qr.clamp(t,0,e.length),n=qr.clamp(n,-1,e.length);var i=n-t+1;n<0&&(i=0),t>=e.length&&(i=0),n<t&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var a=0,s=t;s<=n;s++)o[a++]=e[s];return o};Object.defineProperties(ve,Ac);var js=function(){};js.prototype.compare=function(e,t){var n=e,i=t;return ve.compare(n,i)};js.prototype.interfaces_=function(){return[Va]};js.prototype.getClass=function(){return js};var ja=function(){};ja.prototype.compare=function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;var o=ve.compare(n,i),a=ve.isEqualReversed(n,i);return a?0:o};ja.prototype.OLDcompare=function(e,t){var n=e,i=t;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(n.length===0)return 0;for(var o=ve.increasingDirection(n),a=ve.increasingDirection(i),s=o>0?0:n.length-1,u=a>0?0:n.length-1,c=0;c<n.length;c++){var f=n[s].compareTo(i[u]);if(f!==0)return f;s+=o,u+=a}return 0};ja.prototype.interfaces_=function(){return[Va]};ja.prototype.getClass=function(){return ja};var Ta=function(){};Ta.prototype.get=function(){};Ta.prototype.put=function(){};Ta.prototype.size=function(){};Ta.prototype.values=function(){};Ta.prototype.entrySet=function(){};var y_=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e}(Ta);function vu(r){this.message=r||""}vu.prototype=new Error;vu.prototype.name="OperationNotSupported";function Mc(){}Mc.prototype=new ut;Mc.prototype.contains=function(){};var ah=function(r){function e(){r.call(this),this.array_=[],arguments[0]instanceof ut&&this.addAll(arguments[0])}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.contains=function(n){for(var i=this,o=0,a=this.array_.length;o<a;o++){var s=i.array_[o];if(s===n)return!0}return!1},e.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},e.prototype.addAll=function(n){for(var i=this,o=n.iterator();o.hasNext();)i.add(o.next());return!0},e.prototype.remove=function(n){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return this.array_.length===0},e.prototype.toArray=function(){for(var n=this,i=[],o=0,a=this.array_.length;o<a;o++)i.push(n.array_[o]);return i},e.prototype.iterator=function(){return new __(this)},e}(Mc),__=function(r){function e(t){r.call(this),this.hashSet_=t,this.position_=0}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Es;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new vu},e}(ws),Ai=0,Eo=1;function Kd(r){return r===null?Ai:r.color}function Fe(r){return r===null?null:r.parent}function Ei(r,e){r!==null&&(r.color=e)}function Ff(r){return r===null?null:r.left}function Wd(r){return r===null?null:r.right}function er(){this.root_=null,this.size_=0}er.prototype=new y_;er.prototype.get=function(r){for(var e=this.root_;e!==null;){var t=r.compareTo(e.key);if(t<0)e=e.left;else if(t>0)e=e.right;else return e.value}return null};er.prototype.put=function(r,e){if(this.root_===null)return this.root_={key:r,value:e,left:null,right:null,parent:null,color:Ai,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var t=this.root_,n,i;do if(n=t,i=r.compareTo(t.key),i<0)t=t.left;else if(i>0)t=t.right;else{var o=t.value;return t.value=e,o}while(t!==null);var a={key:r,left:null,right:null,value:e,parent:n,color:Ai,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null};er.prototype.fixAfterInsertion=function(r){var e=this;for(r.color=Eo;r!=null&&r!==this.root_&&r.parent.color===Eo;)if(Fe(r)===Ff(Fe(Fe(r)))){var t=Wd(Fe(Fe(r)));Kd(t)===Eo?(Ei(Fe(r),Ai),Ei(t,Ai),Ei(Fe(Fe(r)),Eo),r=Fe(Fe(r))):(r===Wd(Fe(r))&&(r=Fe(r),e.rotateLeft(r)),Ei(Fe(r),Ai),Ei(Fe(Fe(r)),Eo),e.rotateRight(Fe(Fe(r))))}else{var n=Ff(Fe(Fe(r)));Kd(n)===Eo?(Ei(Fe(r),Ai),Ei(n,Ai),Ei(Fe(Fe(r)),Eo),r=Fe(Fe(r))):(r===Ff(Fe(r))&&(r=Fe(r),e.rotateRight(r)),Ei(Fe(r),Ai),Ei(Fe(Fe(r)),Eo),e.rotateLeft(Fe(Fe(r))))}this.root_.color=Ai};er.prototype.values=function(){var r=new $,e=this.getFirstEntry();if(e!==null)for(r.add(e.value);(e=er.successor(e))!==null;)r.add(e.value);return r};er.prototype.entrySet=function(){var r=new ah,e=this.getFirstEntry();if(e!==null)for(r.add(e);(e=er.successor(e))!==null;)r.add(e);return r};er.prototype.rotateLeft=function(r){if(r!=null){var e=r.right;r.right=e.left,e.left!=null&&(e.left.parent=r),e.parent=r.parent,r.parent===null?this.root_=e:r.parent.left===r?r.parent.left=e:r.parent.right=e,e.left=r,r.parent=e}};er.prototype.rotateRight=function(r){if(r!=null){var e=r.left;r.left=e.right,e.right!=null&&(e.right.parent=r),e.parent=r.parent,r.parent===null?this.root_=e:r.parent.right===r?r.parent.right=e:r.parent.left=e,e.right=r,r.parent=e}};er.prototype.getFirstEntry=function(){var r=this.root_;if(r!=null)for(;r.left!=null;)r=r.left;return r};er.successor=function(r){if(r===null)return null;if(r.right!==null){for(var e=r.right;e.left!==null;)e=e.left;return e}else{for(var t=r.parent,n=r;t!==null&&n===t.right;)n=t,t=t.parent;return t}};er.prototype.size=function(){return this.size_};var $s=function(){};$s.prototype.interfaces_=function(){return[]};$s.prototype.getClass=function(){return $s};function Ag(){}Ag.prototype=new Mc;function kn(){this.array_=[],arguments[0]instanceof ut&&this.addAll(arguments[0])}kn.prototype=new Ag;kn.prototype.contains=function(r){for(var e=this,t=0,n=this.array_.length;t<n;t++){var i=e.array_[t];if(i.compareTo(r)===0)return!0}return!1};kn.prototype.add=function(r){var e=this;if(this.contains(r))return!1;for(var t=0,n=this.array_.length;t<n;t++){var i=e.array_[t];if(i.compareTo(r)===1)return e.array_.splice(t,0,r),!0}return this.array_.push(r),!0};kn.prototype.addAll=function(r){for(var e=this,t=r.iterator();t.hasNext();)e.add(t.next());return!0};kn.prototype.remove=function(r){throw new vu};kn.prototype.size=function(){return this.array_.length};kn.prototype.isEmpty=function(){return this.array_.length===0};kn.prototype.toArray=function(){for(var r=this,e=[],t=0,n=this.array_.length;t<n;t++)e.push(r.array_[t]);return e};kn.prototype.iterator=function(){return new Nc(this)};var Nc=function(r){this.treeSet_=r,this.position_=0};Nc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Es;return this.treeSet_.array_[this.position_++]};Nc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Nc.prototype.remove=function(){throw new vu};var To=function(){};To.sort=function(){var e=arguments[0],t,n,i,o;if(arguments.length===1)o=function(s,u){return s.compareTo(u)},e.sort(o);else if(arguments.length===2)i=arguments[1],o=function(s,u){return i.compare(s,u)},e.sort(o);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var a=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<a.length;t++)e.push(a[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),i=arguments[3],o=function(s,u){return i.compare(s,u)},n.sort(o),a=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<a.length;t++)e.push(a[t])};To.asList=function(e){for(var t=new $,n=0,i=e.length;n<i;n++)t.add(e[n]);return t};var Ce=function(){},yn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};yn.P.get=function(){return 0};yn.L.get=function(){return 1};yn.A.get=function(){return 2};yn.FALSE.get=function(){return-1};yn.TRUE.get=function(){return-2};yn.DONTCARE.get=function(){return-3};yn.SYM_FALSE.get=function(){return"F"};yn.SYM_TRUE.get=function(){return"T"};yn.SYM_DONTCARE.get=function(){return"*"};yn.SYM_P.get=function(){return"0"};yn.SYM_L.get=function(){return"1"};yn.SYM_A.get=function(){return"2"};Ce.prototype.interfaces_=function(){return[]};Ce.prototype.getClass=function(){return Ce};Ce.toDimensionSymbol=function(e){switch(e){case Ce.FALSE:return Ce.SYM_FALSE;case Ce.TRUE:return Ce.SYM_TRUE;case Ce.DONTCARE:return Ce.SYM_DONTCARE;case Ce.P:return Ce.SYM_P;case Ce.L:return Ce.SYM_L;case Ce.A:return Ce.SYM_A}throw new He("Unknown dimension value: "+e)};Ce.toDimensionValue=function(e){switch(Ys.toUpperCase(e)){case Ce.SYM_FALSE:return Ce.FALSE;case Ce.SYM_TRUE:return Ce.TRUE;case Ce.SYM_DONTCARE:return Ce.DONTCARE;case Ce.SYM_P:return Ce.P;case Ce.SYM_L:return Ce.L;case Ce.SYM_A:return Ce.A}throw new He("Unknown dimension symbol: "+e)};Object.defineProperties(Ce,yn);var Bn=function(){};Bn.prototype.filter=function(e){};Bn.prototype.interfaces_=function(){return[]};Bn.prototype.getClass=function(){return Bn};var ln=function(){};ln.prototype.filter=function(e,t){};ln.prototype.isDone=function(){};ln.prototype.isGeometryChanged=function(){};ln.prototype.interfaces_=function(){return[]};ln.prototype.getClass=function(){return ln};var dr=function(r){function e(n,i){if(r.call(this,i),this._geometries=n||[],r.hasNullElements(this._geometries))throw new He("geometries must not contain null elements")}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new re,a=0;a<this._geometries.length;a++)o.expandToInclude(i._geometries[a].getEnvelopeInternal());return o},e.prototype.getGeometryN=function(i){return this._geometries[i]},e.prototype.getSortIndex=function(){return r.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),a=-1,s=0;s<this._geometries.length;s++)for(var u=i._geometries[s].getCoordinates(),c=0;c<u.length;c++)a++,o[a]=u[c];return o},e.prototype.getArea=function(){for(var i=this,o=0,a=0;a<this._geometries.length;a++)o+=i._geometries[a].getArea();return o},e.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],a=arguments[1];if(!this.isEquivalentClass(o))return!1;var s=o;if(this._geometries.length!==s._geometries.length)return!1;for(var u=0;u<this._geometries.length;u++)if(!i._geometries[u].equalsExact(s._geometries[u],a))return!1;return!0}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();To.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var i=this,o=Ce.FALSE,a=0;a<this._geometries.length;a++)o=Math.max(o,i._geometries[a].getBoundaryDimension());return o},e.prototype.getDimension=function(){for(var i=this,o=Ce.FALSE,a=0;a<this._geometries.length;a++)o=Math.max(o,i._geometries[a].getDimension());return o},e.prototype.getLength=function(){for(var i=this,o=0,a=0;a<this._geometries.length;a++)o+=i._geometries[a].getLength();return o},e.prototype.getNumPoints=function(){for(var i=this,o=0,a=0;a<this._geometries.length;a++)o+=i._geometries[a].getNumPoints();return o},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var i=this,o=this._geometries.length,a=new Array(o).fill(null),s=0;s<this._geometries.length;s++)a[s]=i._geometries[s].reverse();return this.getFactory().createGeometryCollection(a)},e.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],a=new kn(To.asList(this._geometries)),s=new kn(To.asList(o._geometries));return this.compare(a,s)}else if(arguments.length===2){for(var u=arguments[0],c=arguments[1],f=u,h=this.getNumGeometries(),p=f.getNumGeometries(),b=0;b<h&&b<p;){var _=i.getGeometryN(b),S=f.getGeometryN(b),R=_.compareToSameClass(S,c);if(R!==0)return R;b++}return b<h?1:b<p?-1:0}},e.prototype.apply=function(){var i=this;if(ae(arguments[0],si))for(var o=arguments[0],a=0;a<this._geometries.length;a++)i._geometries[a].apply(o);else if(ae(arguments[0],ln)){var s=arguments[0];if(this._geometries.length===0)return null;for(var u=0;u<this._geometries.length&&(i._geometries[u].apply(s),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else if(ae(arguments[0],Bn)){var c=arguments[0];c.filter(this);for(var f=0;f<this._geometries.length;f++)i._geometries[f].apply(c)}else if(ae(arguments[0],Ui)){var h=arguments[0];h.filter(this);for(var p=0;p<this._geometries.length;p++)i._geometries[p].apply(h)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),he.shouldNeverReachHere(),null},e.prototype.clone=function(){var i=this,o=r.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var a=0;a<this._geometries.length;a++)o._geometries[a]=i._geometries[a].clone();return o},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(e,t),e}(oe),Fo=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?r.prototype.equalsExact.call(this,i,o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ce.FALSE:0},e.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var i=this,o=this._geometries.length,a=new Array(o).fill(null),s=0;s<this._geometries.length;s++)a[o-1-s]=i._geometries[s].reverse();return this.getFactory().createMultiLineString(a)},e.prototype.getBoundary=function(){return new Xr(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.interfaces_=function(){return[$s]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(e,t),e}(dr),Xr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=$r.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Xr.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};Xr.prototype.getBoundary=function(){return this._geom instanceof Xe?this.boundaryLineString(this._geom):this._geom instanceof Fo?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};Xr.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};Xr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};Xr.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new $;this._endpointMap=new er;for(var i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getNumPoints()!==0&&(t.addEndpoint(o.getCoordinateN(0)),t.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var a=this._endpointMap.entrySet().iterator();a.hasNext();){var s=a.next(),u=s.getValue(),c=u.count;t._bnRule.isInBoundary(c)&&n.add(s.getKey())}return ve.toCoordinateArray(n)};Xr.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new Qu,this._endpointMap.put(e,t)),t.count++};Xr.prototype.interfaces_=function(){return[]};Xr.prototype.getClass=function(){return Xr};Xr.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new Xr(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new Xr(n,i);return o.getBoundary()}};var Qu=function(){this.count=null};Qu.prototype.interfaces_=function(){return[]};Qu.prototype.getClass=function(){return Qu};function b_(){}function w_(){}var E_=function(){};function x_(){}function S_(){}function C_(){}var Yr=function(){},sh={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yr.prototype.interfaces_=function(){return[]};Yr.prototype.getClass=function(){return Yr};Yr.chars=function(e,t){for(var n=new Array(t).fill(null),i=0;i<t;i++)n[i]=e;return String(n)};Yr.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new x_,n=new b_;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],a="";new w_(Yr.getStackTrace(i));for(var s=new C_,u=0;u<o;u++)try{a+=s.readLine()+Yr.NEWLINE}catch(c){if(c instanceof S_)he.shouldNeverReachHere();else throw c}finally{}return a}};Yr.split=function(e,t){for(var n=t.length,i=new $,o=""+e,a=o.indexOf(t);a>=0;){var s=o.substring(0,a);i.add(s),o=o.substring(a+n),a=o.indexOf(t)}o.length>0&&i.add(o);for(var u=new Array(i.size()).fill(null),c=0;c<u.length;c++)u[c]=i.get(c);return u};Yr.toString=function(){if(arguments.length===1){var e=arguments[0];return Yr.SIMPLE_ORDINATE_FORMAT.format(e)}};Yr.spaces=function(e){return Yr.chars(" ",e)};sh.NEWLINE.get=function(){return Kt.getProperty("line.separator")};sh.SIMPLE_ORDINATE_FORMAT.get=function(){return new E_};Object.defineProperties(Yr,sh);var tt=function(){};tt.prototype.interfaces_=function(){return[]};tt.prototype.getClass=function(){return tt};tt.copyCoord=function(e,t,n,i){for(var o=Math.min(e.getDimension(),n.getDimension()),a=0;a<o;a++)n.setOrdinate(i,a,e.getOrdinate(t,a))};tt.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,Ee.X)===e.getOrdinate(t-1,Ee.X)&&e.getOrdinate(0,Ee.Y)===e.getOrdinate(t-1,Ee.Y)};tt.isEqual=function(e,t){var n=e.size(),i=t.size();if(n!==i)return!1;for(var o=Math.min(e.getDimension(),t.getDimension()),a=0;a<n;a++)for(var s=0;s<o;s++){var u=e.getOrdinate(a,s),c=t.getOrdinate(a,s);if(e.getOrdinate(a,s)!==t.getOrdinate(a,s)&&!(ue.isNaN(u)&&ue.isNaN(c)))return!1}return!0};tt.extend=function(e,t,n){var i=e.create(n,t.getDimension()),o=t.size();if(tt.copy(t,0,i,0,o),o>0)for(var a=o;a<n;a++)tt.copy(t,o-1,i,a,1);return i};tt.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),i=0;i<=n;i++)tt.swap(e,i,t-i)};tt.swap=function(e,t,n){if(t===n)return null;for(var i=0;i<e.getDimension();i++){var o=e.getOrdinate(t,i);e.setOrdinate(t,i,e.getOrdinate(n,i)),e.setOrdinate(n,i,o)}};tt.copy=function(e,t,n,i,o){for(var a=0;a<o;a++)tt.copyCoord(e,t+a,n,i+a)};tt.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),i=new Yn;i.append("(");for(var o=0;o<t;o++){o>0&&i.append(" ");for(var a=0;a<n;a++)a>0&&i.append(","),i.append(Yr.toString(e.getOrdinate(o,a)))}return i.append(")"),i.toString()}};tt.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return tt.createClosedRing(e,t,4);var i=t.getOrdinate(0,Ee.X)===t.getOrdinate(n-1,Ee.X)&&t.getOrdinate(0,Ee.Y)===t.getOrdinate(n-1,Ee.Y);return i?t:tt.createClosedRing(e,t,n+1)};tt.createClosedRing=function(e,t,n){var i=e.create(n,t.getDimension()),o=t.size();tt.copy(t,0,i,0,o);for(var a=o;a<n;a++)tt.copy(t,0,i,a,1);return i};var Xe=function(r){function e(n,i){r.call(this,i),this._points=null,this.init(n)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new re:this._points.expandEnvelope(new re)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return r.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],a=arguments[1];if(!this.isEquivalentClass(o))return!1;var s=o;if(this._points.size()!==s._points.size())return!1;for(var u=0;u<this._points.size();u++)if(!i.equal(i._points.getCoordinate(u),s._points.getCoordinate(u),a))return!1;return!0}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var a=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(a)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(a))>0&&tt.reverse(i._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ce.FALSE:0},e.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ee.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var i=this._points.copy();tt.reverse(i);var o=this.getFactory().createLineString(i);return o},e.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],a=o,s=0,u=0;s<this._points.size()&&u<a._points.size();){var c=i._points.getCoordinate(s).compareTo(a._points.getCoordinate(u));if(c!==0)return c;s++,u++}return s<this._points.size()?1:u<a._points.size()?-1:0}else if(arguments.length===2){var f=arguments[0],h=arguments[1],p=f;return h.compare(this._points,p._points)}},e.prototype.apply=function(){var i=this;if(ae(arguments[0],si))for(var o=arguments[0],a=0;a<this._points.size();a++)o.filter(i._points.getCoordinate(a));else if(ae(arguments[0],ln)){var s=arguments[0];if(this._points.size()===0)return null;for(var u=0;u<this._points.size()&&(s.filter(i._points,u),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else if(ae(arguments[0],Bn)){var c=arguments[0];c.filter(this)}else if(ae(arguments[0],Ui)){var f=arguments[0];f.filter(this)}},e.prototype.getBoundary=function(){return new Xr(this).getBoundary()},e.prototype.isEquivalentClass=function(i){return i instanceof e},e.prototype.clone=function(){var i=r.prototype.clone.call(this);return i._points=this._points.clone(),i},e.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return this._points.size()===0},e.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new He("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},e.prototype.isCoordinate=function(i){for(var o=this,a=0;a<this._points.size();a++)if(o._points.getCoordinate(a).equals(i))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},e.prototype.interfaces_=function(){return[$s]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(oe),Zs=function(){};Zs.prototype.interfaces_=function(){return[]};Zs.prototype.getClass=function(){return Zs};var Pr=function(r){function e(n,i){r.call(this,i),this._coordinates=n||null,this.init(this._coordinates)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new re;var i=new re;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},e.prototype.getSortIndex=function(){return r.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ce.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var a=arguments[0],s=arguments[1],u=a;return s.compare(this._coordinates,u._coordinates)}},e.prototype.apply=function(){if(ae(arguments[0],si)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(ae(arguments[0],ln)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(ae(arguments[0],Bn)){var a=arguments[0];a.filter(this)}else if(ae(arguments[0],Ui)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var i=r.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return this._coordinates.size()===0},e.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),he.isTrue(i.size()<=1),this._coordinates=i},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zs]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(e,t),e}(oe),co=function(){};co.prototype.interfaces_=function(){return[]};co.prototype.getClass=function(){return co};var ht=function(r){function e(n,i,o){if(r.call(this,o),this._shell=null,this._holes=null,n===null&&(n=this.getFactory().createLinearRing()),i===null&&(i=[]),r.hasNullElements(i))throw new He("holes must not contain null elements");if(n.isEmpty()&&r.hasNonEmptyElements(i))throw new He("shell is empty but holes are not");this._shell=n,this._holes=i}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return r.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),a=-1,s=this._shell.getCoordinates(),u=0;u<s.length;u++)a++,o[a]=s[u];for(var c=0;c<this._holes.length;c++)for(var f=i._holes[c].getCoordinates(),h=0;h<f.length;h++)a++,o[a]=f[h];return o},e.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(ee.signedArea(this._shell.getCoordinateSequence()));for(var a=0;a<this._holes.length;a++)o-=Math.abs(ee.signedArea(i._holes[a].getCoordinateSequence()));return o},e.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),a=0;a<5;a++){var s=i.getX(a);if(!(s===o.getMinX()||s===o.getMaxX()))return!1;var u=i.getY(a);if(!(u===o.getMinY()||u===o.getMaxY()))return!1}for(var c=i.getX(0),f=i.getY(0),h=1;h<=4;h++){var p=i.getX(h),b=i.getY(h),_=p!==c,S=b!==f;if(_===S)return!1;c=p,f=b}return!0},e.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],a=arguments[1];if(!this.isEquivalentClass(o))return!1;var s=o,u=this._shell,c=s._shell;if(!u.equalsExact(c,a)||this._holes.length!==s._holes.length)return!1;for(var f=0;f<this._holes.length;f++)if(!i._holes[f].equalsExact(s._holes[f],a))return!1;return!0}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);To.sort(this._holes)}else if(arguments.length===2){var a=arguments[0],s=arguments[1];if(a.isEmpty())return null;var u=new Array(a.getCoordinates().length-1).fill(null);Kt.arraycopy(a.getCoordinates(),0,u,0,u.length);var c=ve.minCoordinate(a.getCoordinates());ve.scroll(u,c),Kt.arraycopy(u,0,a.getCoordinates(),0,u.length),a.getCoordinates()[u.length]=u[0],ee.isCCW(a.getCoordinates())===s&&ve.reverse(a.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var a=0;a<this._holes.length;a++)o+=i._holes[a].getLength();return o},e.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),a=0;a<this._holes.length;a++)o+=i._holes[a].getNumPoints();return o},e.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var a=0;a<this._holes.length;a++)o._holes[a]=i._holes[a].copy().reverse();return o},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],a=this._shell,s=o._shell;return a.compareToSameClass(s)}else if(arguments.length===2){var u=arguments[0],c=arguments[1],f=u,h=this._shell,p=f._shell,b=h.compareToSameClass(p,c);if(b!==0)return b;for(var _=this.getNumInteriorRing(),S=f.getNumInteriorRing(),R=0;R<_&&R<S;){var D=i.getInteriorRingN(R),v=f.getInteriorRingN(R),E=D.compareToSameClass(v,c);if(E!==0)return E;R++}return R<_?1:R<S?-1:0}},e.prototype.apply=function(i){var o=this;if(ae(i,si)){this._shell.apply(i);for(var a=0;a<this._holes.length;a++)o._holes[a].apply(i)}else if(ae(i,ln)){if(this._shell.apply(i),!i.isDone())for(var s=0;s<this._holes.length&&(o._holes[s].apply(i),!i.isDone());s++);i.isGeometryChanged()&&this.geometryChanged()}else if(ae(i,Bn))i.filter(this);else if(ae(i,Ui)){i.filter(this),this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}},e.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var a=0;a<this._holes.length;a++)o[a+1]=i._holes[a];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},e.prototype.clone=function(){var i=this,o=r.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var a=0;a<this._holes.length;a++)o._holes[a]=i._holes[a].clone();return o},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var i=this,o=this._shell.copy(),a=new Array(this._holes.length).fill(null),s=0;s<a.length;s++)a[s]=i._holes[s].copy();return new e(o,a,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(i){return this._holes[i]},e.prototype.interfaces_=function(){return[co]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,t),e}(oe),$a=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?r.prototype.equalsExact.call(this,i,o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return r.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ce.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.interfaces_=function(){return[Zs]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(e,t),e}(dr),ui=function(r){function e(n,i){n instanceof q&&i instanceof me&&(n=i.getCoordinateSequenceFactory().create(n)),r.call(this,n,i),this.validateConstruction()}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ce.FALSE},e.prototype.isClosed=function(){return this.isEmpty()?!0:r.prototype.isClosed.call(this)},e.prototype.reverse=function(){var i=this._points.copy();tt.reverse(i);var o=this.getFactory().createLinearRing(i);return o},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!r.prototype.isClosed.call(this))throw new He("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new He("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.MINIMUM_VALID_SIZE.get=function(){return 4},t.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,t),e}(Xe),ii=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oe.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?r.prototype.equalsExact.call(this,i,o):!1}else return r.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var i=this,o=this._geometries.length,a=new Array(o).fill(null),s=0;s<this._geometries.length;s++)a[s]=i._geometries[s].reverse();return this.getFactory().createMultiPolygon(a)},e.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new $,a=0;a<this._geometries.length;a++)for(var s=i._geometries[a],u=s.getBoundary(),c=0;c<u.getNumGeometries();c++)o.add(u.getGeometryN(c));var f=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(f))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),a=0;a<o.length;a++)o[a]=i._geometries[a].copy();return new e(o,this._factory)},e.prototype.interfaces_=function(){return[co]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,t),e}(dr),Zr=function(e){this._factory=e||null,this._isUserDataCopied=!1},Pc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Zr.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};Zr.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};Zr.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof dr?this.editGeometryCollection(e,t):e instanceof ht?this.editPolygon(e,t):e instanceof Pr?t.edit(e,this._factory):e instanceof Xe?t.edit(e,this._factory):(he.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};Zr.prototype.editGeometryCollection=function(e,t){for(var n=this,i=t.edit(e,this._factory),o=new $,a=0;a<i.getNumGeometries();a++){var s=n.edit(i.getGeometryN(a),t);s===null||s.isEmpty()||o.add(s)}return i.getClass()===$a?this._factory.createMultiPoint(o.toArray([])):i.getClass()===Fo?this._factory.createMultiLineString(o.toArray([])):i.getClass()===ii?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};Zr.prototype.editPolygon=function(e,t){var n=this,i=t.edit(e,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),t);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var a=new $,s=0;s<i.getNumInteriorRing();s++){var u=n.edit(i.getInteriorRingN(s),t);u===null||u.isEmpty()||a.add(u)}return this._factory.createPolygon(o,a.toArray([]))};Zr.prototype.interfaces_=function(){return[]};Zr.prototype.getClass=function(){return Zr};Zr.GeometryEditorOperation=function(){};Pc.NoOpGeometryOperation.get=function(){return Qs};Pc.CoordinateOperation.get=function(){return eu};Pc.CoordinateSequenceOperation.get=function(){return tu};Object.defineProperties(Zr,Pc);var Qs=function(){};Qs.prototype.edit=function(e,t){return e};Qs.prototype.interfaces_=function(){return[Zr.GeometryEditorOperation]};Qs.prototype.getClass=function(){return Qs};var eu=function(){};eu.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof ui?t.createLinearRing(n):e instanceof Xe?t.createLineString(n):e instanceof Pr?n.length>0?t.createPoint(n[0]):t.createPoint():e};eu.prototype.interfaces_=function(){return[Zr.GeometryEditorOperation]};eu.prototype.getClass=function(){return eu};var tu=function(){};tu.prototype.edit=function(e,t){return e instanceof ui?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Xe?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof Pr?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};tu.prototype.interfaces_=function(){return[Zr.GeometryEditorOperation]};tu.prototype.getClass=function(){return tu};var Qe=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new q}else if(ae(arguments[0],Ee)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)e._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=a,this._dimension=s,a===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],c=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=c;for(var f=0;f<u;f++)e._coordinates[f]=new q}}},Mg={serialVersionUID:{configurable:!0}};Qe.prototype.setOrdinate=function(e,t,n){switch(t){case Ee.X:this._coordinates[e].x=n;break;case Ee.Y:this._coordinates[e].y=n;break;case Ee.Z:this._coordinates[e].z=n;break;default:throw new He("invalid ordinateIndex")}};Qe.prototype.size=function(){return this._coordinates.length};Qe.prototype.getOrdinate=function(e,t){switch(t){case Ee.X:return this._coordinates[e].x;case Ee.Y:return this._coordinates[e].y;case Ee.Z:return this._coordinates[e].z}return ue.NaN};Qe.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};Qe.prototype.getCoordinateCopy=function(e){return new q(this._coordinates[e])};Qe.prototype.getDimension=function(){return this._dimension};Qe.prototype.getX=function(e){return this._coordinates[e].x};Qe.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new Qe(t,this._dimension)};Qe.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};Qe.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new Qe(t,this._dimension)};Qe.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new Yn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};Qe.prototype.getY=function(e){return this._coordinates[e].y};Qe.prototype.toCoordinateArray=function(){return this._coordinates};Qe.prototype.interfaces_=function(){return[Ee,on]};Qe.prototype.getClass=function(){return Qe};Mg.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Qe,Mg);var ci=function(){},uh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ci.prototype.readResolve=function(){return ci.instance()};ci.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Qe(e)}else if(ae(arguments[0],Ee)){var t=arguments[0];return new Qe(t)}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Qe(n):new Qe(n,i)}};ci.prototype.interfaces_=function(){return[Ka,on]};ci.prototype.getClass=function(){return ci};ci.instance=function(){return ci.instanceObject};uh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};uh.instanceObject.get=function(){return new ci};Object.defineProperties(ci,uh);var Ng=function(r){function e(){r.call(this),this.map_=new Map}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.get=function(n){return this.map_.get(n)||null},e.prototype.put=function(n,i){return this.map_.set(n,i),i},e.prototype.values=function(){for(var n=new $,i=this.map_.values(),o=i.next();!o.done;)n.add(o.value),o=i.next();return n},e.prototype.entrySet=function(){var n=new ah;return this.map_.entries().forEach(function(i){return n.add(i)}),n},e.prototype.size=function(){return this.map_.size()},e}(Ta),Me=function r(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=r.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Fn){var e=arguments[0];this._modelType=e,e===r.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var t=arguments[0];this._modelType=r.FIXED,this.setScale(t)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},ch={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Me.prototype.equals=function(e){if(!(e instanceof Me))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};Me.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),i=t.getMaximumSignificantDigits();return new Dn(n).compareTo(new Dn(i))};Me.prototype.getScale=function(){return this._scale};Me.prototype.isFloating=function(){return this._modelType===Me.FLOATING||this._modelType===Me.FLOATING_SINGLE};Me.prototype.getType=function(){return this._modelType};Me.prototype.toString=function(){var e="UNKNOWN";return this._modelType===Me.FLOATING?e="Floating":this._modelType===Me.FLOATING_SINGLE?e="Floating-Single":this._modelType===Me.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};Me.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(ue.isNaN(e))return e;if(this._modelType===Me.FLOATING_SINGLE){var t=e;return t}return this._modelType===Me.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof q){var n=arguments[0];if(this._modelType===Me.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};Me.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===Me.FLOATING?e=16:this._modelType===Me.FLOATING_SINGLE?e=6:this._modelType===Me.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};Me.prototype.setScale=function(e){this._scale=Math.abs(e)};Me.prototype.interfaces_=function(){return[on,nn]};Me.prototype.getClass=function(){return Me};Me.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};ch.serialVersionUID.get=function(){return 7777263578777804e3};ch.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Me,ch);var Fn=function r(e){this._name=e||null,r.nameToTypeMap.put(e,this)},fh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Fn.prototype.readResolve=function(){return Fn.nameToTypeMap.get(this._name)};Fn.prototype.toString=function(){return this._name};Fn.prototype.interfaces_=function(){return[on]};Fn.prototype.getClass=function(){return Fn};fh.serialVersionUID.get=function(){return-552860263173159e4};fh.nameToTypeMap.get=function(){return new Ng};Object.defineProperties(Fn,fh);Me.Type=Fn;Me.FIXED=new Fn("FIXED");Me.FLOATING=new Fn("FLOATING");Me.FLOATING_SINGLE=new Fn("FLOATING SINGLE");var me=function r(){this._precisionModel=new Me,this._SRID=0,this._coordinateSequenceFactory=r.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?ae(arguments[0],Ka)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Me&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Pg={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new q(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new q(e.getMinX(),e.getMinY()),new q(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new q(e.getMinX(),e.getMinY()),new q(e.getMinX(),e.getMaxY()),new q(e.getMaxX(),e.getMaxY()),new q(e.getMaxX(),e.getMinY()),new q(e.getMinX(),e.getMinY())]),null)};me.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new Xe(this.getCoordinateSequenceFactory().create(e),this);if(ae(e,Ee))return new Xe(e,this)}else return new Xe(this.getCoordinateSequenceFactory().create([]),this)};me.prototype.createMultiLineString=function(){if(arguments.length===0)return new Fo(null,this);if(arguments.length===1){var e=arguments[0];return new Fo(e,this)}};me.prototype.buildGeometry=function(e){for(var t=null,n=!1,i=!1,o=e.iterator();o.hasNext();){var a=o.next(),s=a.getClass();t===null&&(t=s),s!==t&&(n=!0),a.isGeometryCollectionOrDerived()&&(i=!0)}if(t===null)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(me.toGeometryArray(e));var u=e.iterator().next(),c=e.size()>1;if(c){if(u instanceof ht)return this.createMultiPolygon(me.toPolygonArray(e));if(u instanceof Xe)return this.createMultiLineString(me.toLineStringArray(e));if(u instanceof Pr)return this.createMultiPoint(me.toPointArray(e));he.shouldNeverReachHere("Unhandled class: "+u.getClass().getName())}return u};me.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};me.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof q){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(ae(arguments[0],Ee)){var t=arguments[0];return new Pr(t,this)}}};me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};me.prototype.createPolygon=function(){if(arguments.length===0)return new ht(null,null,this);if(arguments.length===1){if(ae(arguments[0],Ee)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof ui){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new ht(i,o,this)}};me.prototype.getSRID=function(){return this._SRID};me.prototype.createGeometryCollection=function(){if(arguments.length===0)return new dr(null,this);if(arguments.length===1){var e=arguments[0];return new dr(e,this)}};me.prototype.createGeometry=function(e){var t=new Zr(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};me.prototype.getPrecisionModel=function(){return this._precisionModel};me.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(ae(arguments[0],Ee)){var t=arguments[0];return new ui(t,this)}}};me.prototype.createMultiPolygon=function(){if(arguments.length===0)return new ii(null,this);if(arguments.length===1){var e=arguments[0];return new ii(e,this)}};me.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new $a(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new $a(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(ae(arguments[0],Ee)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),a=0;a<i.size();a++){var s=e.getCoordinateSequenceFactory().create(1,i.getDimension());tt.copy(i,a,s,0,1),o[a]=e.createPoint(s)}return this.createMultiPoint(o)}}};me.prototype.interfaces_=function(){return[on]};me.prototype.getClass=function(){return me};me.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};me.getDefaultCoordinateSequenceFactory=function(){return ci.instance()};me.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};me.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};Pg.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(me,Pg);var I_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Lc=function(e){this.geometryFactory=e||new me};Lc.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!In[n])throw new Error("Unknown GeoJSON type: "+t.type);return I_.indexOf(n)!==-1?In[n].apply(this,[t.coordinates]):n==="GeometryCollection"?In[n].apply(this,[t.geometries]):In[n].apply(this,[t])};Lc.prototype.write=function(e){var t=e.getGeometryType();if(!Ci[t])throw new Error("Geometry is not supported");return Ci[t].apply(this,[e])};var In={Feature:function(r){var e={};for(var t in r)e[t]=r[t];if(r.geometry){var n=r.geometry.type;if(!In[n])throw new Error("Unknown GeoJSON type: "+r.type);e.geometry=this.read(r.geometry)}return r.bbox&&(e.bbox=In.bbox.apply(this,[r.bbox])),e},FeatureCollection:function(r){var e=this,t={};if(r.features){t.features=[];for(var n=0;n<r.features.length;++n)t.features.push(e.read(r.features[n]))}return r.bbox&&(t.bbox=this.parse.bbox.apply(this,[r.bbox])),t},coordinates:function(r){for(var e=[],t=0;t<r.length;++t){var n=r[t];e.push(new q(n[0],n[1]))}return e},bbox:function(r){return this.geometryFactory.createLinearRing([new q(r[0],r[1]),new q(r[2],r[1]),new q(r[2],r[3]),new q(r[0],r[3]),new q(r[0],r[1])])},Point:function(r){var e=new q(r[0],r[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(r){for(var e=this,t=[],n=0;n<r.length;++n)t.push(In.Point.apply(e,[r[n]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(r){var e=In.coordinates.apply(this,[r]);return this.geometryFactory.createLineString(e)},MultiLineString:function(r){for(var e=this,t=[],n=0;n<r.length;++n)t.push(In.LineString.apply(e,[r[n]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(r){for(var e=this,t=In.coordinates.apply(this,[r[0]]),n=this.geometryFactory.createLinearRing(t),i=[],o=1;o<r.length;++o){var a=r[o],s=In.coordinates.apply(e,[a]),u=e.geometryFactory.createLinearRing(s);i.push(u)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(r){for(var e=this,t=[],n=0;n<r.length;++n){var i=r[n];t.push(In.Polygon.apply(e,[i]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(r){for(var e=this,t=[],n=0;n<r.length;++n){var i=r[n];t.push(e.read(i))}return this.geometryFactory.createGeometryCollection(t)}},Ci={coordinate:function(r){return[r.x,r.y]},Point:function(r){var e=Ci.coordinate.apply(this,[r.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=Ci.Point.apply(e,[i]);t.push(o.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(r){for(var e=this,t=[],n=r.getCoordinates(),i=0;i<n.length;++i){var o=n[i];t.push(Ci.coordinate.apply(e,[o]))}return{type:"LineString",coordinates:t}},MultiLineString:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=Ci.LineString.apply(e,[i]);t.push(o.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(r){var e=this,t=[],n=Ci.LineString.apply(this,[r._shell]);t.push(n.coordinates);for(var i=0;i<r._holes.length;++i){var o=r._holes[i],a=Ci.LineString.apply(e,[o]);t.push(a.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=Ci.Polygon.apply(e,[i]);t.push(o.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(r){for(var e=this,t=[],n=0;n<r._geometries.length;++n){var i=r._geometries[n],o=i.getGeometryType();t.push(Ci[o].apply(e,[i]))}return{type:"GeometryCollection",geometries:t}}},lh=function(e){this.geometryFactory=e||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Lc(this.geometryFactory)};lh.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===Me.FIXED&&this.reducePrecision(t),t};lh.prototype.reducePrecision=function(e){var t=this,n,i;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,i=e.points.length;n<i;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,i=e.geometries.length;n<i;n++)t.reducePrecision(e.geometries[n])};var Lg=function(){this.parser=new Lc(this.geometryFactory)};Lg.prototype.write=function(e){return this.parser.write(e)};var j=function(){},Rc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};j.prototype.interfaces_=function(){return[]};j.prototype.getClass=function(){return j};j.opposite=function(e){return e===j.LEFT?j.RIGHT:e===j.RIGHT?j.LEFT:e};Rc.ON.get=function(){return 0};Rc.LEFT.get=function(){return 1};Rc.RIGHT.get=function(){return 2};Object.defineProperties(j,Rc);function Tc(r){this.message=r||""}Tc.prototype=new Error;Tc.prototype.name="EmptyStackException";function jn(){this.array_=[]}jn.prototype=new un;jn.prototype.add=function(r){return this.array_.push(r),!0};jn.prototype.get=function(r){if(r<0||r>=this.size())throw new Error;return this.array_[r]};jn.prototype.push=function(r){return this.array_.push(r),r};jn.prototype.pop=function(r){if(this.array_.length===0)throw new Tc;return this.array_.pop()};jn.prototype.peek=function(){if(this.array_.length===0)throw new Tc;return this.array_[this.array_.length-1]};jn.prototype.empty=function(){return this.array_.length===0};jn.prototype.isEmpty=function(){return this.empty()};jn.prototype.search=function(r){return this.array_.indexOf(r)};jn.prototype.size=function(){return this.array_.length};jn.prototype.toArray=function(){for(var r=this,e=[],t=0,n=this.array_.length;t<n;t++)e.push(r.array_[t]);return e};var zn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};zn.prototype.getCoordinate=function(){return this._minCoord};zn.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};zn.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();he.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],i=ee.computeOrientation(this._minCoord,n,t),o=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&i===ee.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&i===ee.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};zn.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),i=n.getCoordinates();if(t<0||t+1>=i.length||i[t].y===i[t+1].y)return-1;var o=j.LEFT;return i[t].y<i[t+1].y&&(o=j.RIGHT),o};zn.prototype.getEdge=function(){return this._orientedDe};zn.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(t._minCoord===null||n[i].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=i,t._minCoord=n[i])};zn.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};zn.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next();i.isForward()&&t.checkForRightmostCoordinate(i)}he.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===j.LEFT&&(this._orientedDe=this._minDe.getSym())};zn.prototype.interfaces_=function(){return[]};zn.prototype.getClass=function(){return zn};var qi=function(r){function e(t,n){r.call(this,e.msgWithCoord(t,n)),this.pt=n?new q(n):null,this.name="TopologyException"}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(n,i){return i?n:n+" [ "+i+" ]"},e}(zi),Oc=function(){this.array_=[]};Oc.prototype.addLast=function(e){this.array_.push(e)};Oc.prototype.removeFirst=function(){return this.array_.shift()};Oc.prototype.isEmpty=function(){return this.array_.length===0};var pr=function(){this._finder=null,this._dirEdgeList=new $,this._nodes=new $,this._rightMostCoord=null,this._env=null,this._finder=new zn};pr.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};pr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};pr.prototype.computeNodeDepth=function(e){for(var t=this,n=null,i=e.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){n=o;break}}if(n===null)throw new qi("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var a=e.getEdges().iterator();a.hasNext();){var s=a.next();s.setVisited(!0),t.copySymDepths(s)}};pr.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(j.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};pr.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};pr.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(j.RIGHT)>=1&&t.getDepth(j.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};pr.prototype.computeDepths=function(e){var t=this,n=new ah,i=new Oc,o=e.getNode();for(i.addLast(o),n.add(o),e.setVisited(!0);!i.isEmpty();){var a=i.removeFirst();n.add(a),t.computeNodeDepth(a);for(var s=a.getEdges().iterator();s.hasNext();){var u=s.next(),c=u.getSym();if(!c.isVisited()){var f=c.getNode();n.contains(f)||(i.addLast(f),n.add(f))}}}};pr.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};pr.prototype.getEnvelope=function(){if(this._env===null){for(var e=new re,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),i=n.getEdge().getCoordinates(),o=0;o<i.length-1;o++)e.expandToInclude(i[o]);this._env=e}return this._env};pr.prototype.addReachable=function(e){var t=this,n=new jn;for(n.add(e);!n.empty();){var i=n.pop();t.add(i,n)}};pr.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(j.LEFT,e.getDepth(j.RIGHT)),t.setDepth(j.RIGHT,e.getDepth(j.LEFT))};pr.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();n._dirEdgeList.add(o);var a=o.getSym(),s=a.getNode();s.isVisited()||t.push(s)}};pr.prototype.getNodes=function(){return this._nodes};pr.prototype.getDirectedEdges=function(){return this._dirEdgeList};pr.prototype.interfaces_=function(){return[nn]};pr.prototype.getClass=function(){return pr};var ze=function r(){var e=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[j.ON]=n}else if(arguments[0]instanceof r){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2];this.init(3),this.location[j.ON]=a,this.location[j.LEFT]=s,this.location[j.RIGHT]=u}};ze.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};ze.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==H.NONE)return!1;return!0};ze.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===H.NONE&&(t.location[n]=e)};ze.prototype.isLine=function(){return this.location.length===1};ze.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[j.ON]=this.location[j.ON],n[j.LEFT]=H.NONE,n[j.RIGHT]=H.NONE,this.location=n}for(var i=0;i<this.location.length;i++)t.location[i]===H.NONE&&i<e.location.length&&(t.location[i]=e.location[i])};ze.prototype.getLocations=function(){return this.location};ze.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[j.LEFT];this.location[j.LEFT]=this.location[j.RIGHT],this.location[j.RIGHT]=e};ze.prototype.toString=function(){var e=new Yn;return this.location.length>1&&e.append(H.toLocationSymbol(this.location[j.LEFT])),e.append(H.toLocationSymbol(this.location[j.ON])),this.location.length>1&&e.append(H.toLocationSymbol(this.location[j.RIGHT])),e.toString()};ze.prototype.setLocations=function(e,t,n){this.location[j.ON]=e,this.location[j.LEFT]=t,this.location[j.RIGHT]=n};ze.prototype.get=function(e){return e<this.location.length?this.location[e]:H.NONE};ze.prototype.isArea=function(){return this.location.length>1};ze.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===H.NONE)return!0;return!1};ze.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(j.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};ze.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(H.NONE)};ze.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};ze.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};ze.prototype.interfaces_=function(){return[]};ze.prototype.getClass=function(){return ze};var Le=function r(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new ze(e),this.elt[1]=new ze(e)}else if(arguments[0]instanceof r){var t=arguments[0];this.elt[0]=new ze(t.elt[0]),this.elt[1]=new ze(t.elt[1])}}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.elt[0]=new ze(H.NONE),this.elt[1]=new ze(H.NONE),this.elt[n].setLocation(i)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new ze(o,a,s),this.elt[1]=new ze(o,a,s)}else if(arguments.length===4){var u=arguments[0],c=arguments[1],f=arguments[2],h=arguments[3];this.elt[0]=new ze(H.NONE,H.NONE,H.NONE),this.elt[1]=new ze(H.NONE,H.NONE,H.NONE),this.elt[u].setLocations(c,f,h)}};Le.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};Le.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};Le.prototype.isNull=function(e){return this.elt[e].isNull()};Le.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};Le.prototype.isLine=function(e){return this.elt[e].isLine()};Le.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new ze(e.elt[n]):t.elt[n].merge(e.elt[n])};Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Le.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(j.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};Le.prototype.toString=function(){var e=new Yn;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};Le.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};Le.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};Le.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(j.ON,t)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this.elt[n].setLocation(i,o)}};Le.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};Le.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};Le.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new ze(this.elt[e].location[0]))};Le.prototype.interfaces_=function(){return[]};Le.prototype.getClass=function(){return Le};Le.toLineLabel=function(e){for(var t=new Le(H.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var ot=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new $,this._pts=new $,this._label=new Le(H.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new $,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};ot.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ee.isCCW(this._ring.getCoordinates())};ot.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};ot.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,i=!0;do{if(n===null)throw new qi("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new qi("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var o=n.getLabel();he.isTrue(o.isArea()),t.mergeLabel(o),t.addPoints(n.getEdge(),n.isForward(),i),i=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};ot.prototype.getLinearRing=function(){return this._ring};ot.prototype.getCoordinate=function(e){return this._pts.get(e)};ot.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),i=n.getEdges().getOutgoingDegree(e);i>e._maxNodeDegree&&(e._maxNodeDegree=i),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};ot.prototype.addPoints=function(e,t,n){var i=this,o=e.getCoordinates();if(t){var a=1;n&&(a=0);for(var s=a;s<o.length;s++)i._pts.add(o[s])}else{var u=o.length-2;n&&(u=o.length-1);for(var c=u;c>=0;c--)i._pts.add(o[c])}};ot.prototype.isHole=function(){return this._isHole};ot.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};ot.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!ee.isPointInRing(e,t.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(e))return!1}return!0};ot.prototype.addHole=function(e){this._holes.add(e)};ot.prototype.isShell=function(){return this._shell===null};ot.prototype.getLabel=function(){return this._label};ot.prototype.getEdges=function(){return this._edges};ot.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};ot.prototype.getShell=function(){return this._shell};ot.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=t.getLocation(n,j.RIGHT);if(i===H.NONE)return null;if(this._label.getLocation(n)===H.NONE)return this._label.setLocation(n,i),null}};ot.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};ot.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)n[i]=t._holes.get(i).getLinearRing();var o=e.createPolygon(this.getLinearRing(),n);return o};ot.prototype.interfaces_=function(){return[]};ot.prototype.getClass=function(){return ot};var A_=function(r){function e(){var t=arguments[0],n=arguments[1];r.call(this,t,n)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(n,i){n.setMinEdgeRing(i)},e.prototype.getNext=function(n){return n.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ot),M_=function(r){function e(){var t=arguments[0],n=arguments[1];r.call(this,t,n)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var n=this,i=new $,o=this._startDe;do{if(o.getMinEdgeRing()===null){var a=new A_(o,n._geometryFactory);i.add(a)}o=o.getNext()}while(o!==this._startDe);return i},e.prototype.setEdgeRing=function(n,i){n.setEdgeRing(i)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(n),i=i.getNext()}while(i!==this._startDe)},e.prototype.getNext=function(n){return n.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ot),Hr=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._label=e}}};Hr.prototype.setVisited=function(e){this._isVisited=e};Hr.prototype.setInResult=function(e){this._isInResult=e};Hr.prototype.isCovered=function(){return this._isCovered};Hr.prototype.isCoveredSet=function(){return this._isCoveredSet};Hr.prototype.setLabel=function(e){this._label=e};Hr.prototype.getLabel=function(){return this._label};Hr.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};Hr.prototype.updateIM=function(e){he.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};Hr.prototype.isInResult=function(){return this._isInResult};Hr.prototype.isVisited=function(){return this._isVisited};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};var Dc=function(r){function e(){r.call(this),this._coord=null,this._edges=null;var t=arguments[0],n=arguments[1];this._coord=t,this._edges=n,this._label=new Le(0,H.NONE)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(n){},e.prototype.computeMergedLocation=function(n,i){var o=H.NONE;if(o=this._label.getLocation(i),!n.isNull(i)){var a=n.getLocation(i);o!==H.BOUNDARY&&(o=a)}return o},e.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];this._label===null?this._label=new Le(n,i):this._label.setLocation(n,i)}else return r.prototype.setLabel.apply(this,arguments)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof e){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof Le)for(var o=arguments[0],a=0;a<2;a++){var s=n.computeMergedLocation(o,a),u=n._label.getLocation(a);u===H.NONE&&n._label.setLocation(a,s)}},e.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},e.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var i=H.NONE;this._label!==null&&(i=this._label.getLocation(n));var o=null;switch(i){case H.BOUNDARY:o=H.INTERIOR;break;case H.INTERIOR:o=H.BOUNDARY;break;default:o=H.BOUNDARY;break}this._label.setLocation(n,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),Un=function(){this.nodeMap=new er,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Un.prototype.find=function(e){return this.nodeMap.get(e)};Un.prototype.addNode=function(){if(arguments[0]instanceof q){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof Dc){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return i===null?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}};Un.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Un.prototype.iterator=function(){return this.nodeMap.values().iterator()};Un.prototype.values=function(){return this.nodeMap.values()};Un.prototype.getBoundaryNodes=function(e){for(var t=new $,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(e)===H.BOUNDARY&&t.add(i)}return t};Un.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Un.prototype.interfaces_=function(){return[]};Un.prototype.getClass=function(){return Un};var De=function(){},yu={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};De.prototype.interfaces_=function(){return[]};De.prototype.getClass=function(){return De};De.isNorthern=function(e){return e===De.NE||e===De.NW};De.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};De.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var i=e<t?e:t,o=e>t?e:t;return i===0&&o===3?3:i};De.isInHalfPlane=function(e,t){return t===De.SE?e===De.SE||e===De.SW:e===t||e===t+1};De.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new He("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?De.NE:De.SE:t>=0?De.NW:De.SW}else if(arguments[0]instanceof q&&arguments[1]instanceof q){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new He("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?De.NE:De.SE:i.y>=n.y?De.NW:De.SW}};yu.NE.get=function(){return 0};yu.NW.get=function(){return 1};yu.SW.get=function(){return 2};yu.SE.get=function(){return 3};Object.defineProperties(De,yu);var tr=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2],o=null;this._edge=t,this.init(n,i),this._label=o}else if(arguments.length===4){var a=arguments[0],s=arguments[1],u=arguments[2],c=arguments[3];this._edge=a,this.init(s,u),this._label=c}};tr.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:ee.computeOrientation(e._p0,e._p1,this._p1)};tr.prototype.getDy=function(){return this._dy};tr.prototype.getCoordinate=function(){return this._p0};tr.prototype.setNode=function(e){this._node=e};tr.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),o=n.substring(i+1);e.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};tr.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};tr.prototype.getDirectedCoordinate=function(){return this._p1};tr.prototype.getDx=function(){return this._dx};tr.prototype.getLabel=function(){return this._label};tr.prototype.getEdge=function(){return this._edge};tr.prototype.getQuadrant=function(){return this._quadrant};tr.prototype.getNode=function(){return this._node};tr.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),i=t.substring(n+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};tr.prototype.computeLabel=function(e){};tr.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=De.quadrant(this._dx,this._dy),he.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};tr.prototype.interfaces_=function(){return[nn]};tr.prototype.getClass=function(){return tr};var bl=function(r){function e(){var t=arguments[0],n=arguments[1];if(r.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var i=t.getNumPoints()-1;this.init(t.getCoordinate(i),t.getCoordinate(i-1))}this.computeDirectedLabel()}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(n){return this._depth[n]},e.prototype.setVisited=function(n){this._isVisited=n},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(n,i){if(this._depth[n]!==-999&&this._depth[n]!==i)throw new qi("assigned depths do not match",this.getCoordinate());this._depth[n]=i},e.prototype.isInteriorAreaEdge=function(){for(var n=this,i=!0,o=0;o<2;o++)n._label.isArea(o)&&n._label.getLocation(o,j.LEFT)===H.INTERIOR&&n._label.getLocation(o,j.RIGHT)===H.INTERIOR||(i=!1);return i},e.prototype.setNextMin=function(n){this._nextMin=n},e.prototype.print=function(n){r.prototype.print.call(this,n),n.print(" "+this._depth[j.LEFT]+"/"+this._depth[j.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},e.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},e.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,H.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,H.EXTERIOR);return n&&i&&o},e.prototype.setEdgeRing=function(n){this._edgeRing=n},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},e.prototype.setInResult=function(n){this._isInResult=n},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},e.prototype.setSym=function(n){this._sym=n},e.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},e.prototype.setEdgeDepths=function(n,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var a=1;n===j.LEFT&&(a=-1);var s=j.opposite(n),u=o*a,c=i+u;this.setDepth(n,i),this.setDepth(s,c)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(n){this._next=n},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(n,i){return n===H.EXTERIOR&&i===H.INTERIOR?1:n===H.INTERIOR&&i===H.EXTERIOR?-1:0},e}(tr),Za=function(){};Za.prototype.createNode=function(e){return new Dc(e,null)};Za.prototype.interfaces_=function(){return[]};Za.prototype.getClass=function(){return Za};var We=function(){if(this._edges=new $,this._nodes=null,this._edgeEndList=new $,arguments.length===0)this._nodes=new Un(new Za);else if(arguments.length===1){var e=arguments[0];this._nodes=new Un(e)}};We.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var i=t._edges.get(n);i.print(e),i.eiList.print(e)}};We.prototype.find=function(e){return this._nodes.find(e)};We.prototype.addNode=function(){if(arguments[0]instanceof Dc){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof q){var t=arguments[0];return this._nodes.addNode(t)}};We.prototype.getNodeIterator=function(){return this._nodes.iterator()};We.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};We.prototype.debugPrintln=function(e){Kt.out.println(e)};We.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var i=n.getLabel();return i!==null&&i.getLocation(e)===H.BOUNDARY};We.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};We.prototype.matchInSameDirection=function(e,t,n,i){return e.equals(n)?ee.computeOrientation(e,t,i)===ee.COLLINEAR&&De.quadrant(e,t)===De.quadrant(n,i):!1};We.prototype.getEdgeEnds=function(){return this._edgeEndList};We.prototype.debugPrint=function(e){Kt.out.print(e)};We.prototype.getEdgeIterator=function(){return this._edges.iterator()};We.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),a=o.getCoordinates();if(n.matchInSameDirection(e,t,a[0],a[1])||n.matchInSameDirection(e,t,a[a.length-1],a[a.length-2]))return o}return null};We.prototype.insertEdge=function(e){this._edges.add(e)};We.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};We.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next();t._edges.add(i);var o=new bl(i,!0),a=new bl(i,!1);o.setSym(a),a.setSym(o),t.add(o),t.add(a)}};We.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};We.prototype.getNodes=function(){return this._nodes.values()};We.prototype.findEdge=function(e,t){for(var n=this,i=0;i<this._edges.size();i++){var o=n._edges.get(i),a=o.getCoordinates();if(e.equals(a[0])&&t.equals(a[1]))return o}return null};We.prototype.interfaces_=function(){return[]};We.prototype.getClass=function(){return We};We.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var Lr=function(){this._geometryFactory=null,this._shellList=new $;var e=arguments[0];this._geometryFactory=e};Lr.prototype.sortShellsAndHoles=function(e,t,n){for(var i=e.iterator();i.hasNext();){var o=i.next();o.isHole()?n.add(o):t.add(o)}};Lr.prototype.computePolygons=function(e){for(var t=this,n=new $,i=e.iterator();i.hasNext();){var o=i.next(),a=o.toPolygon(t._geometryFactory);n.add(a)}return n};Lr.prototype.placeFreeHoles=function(e,t){for(var n=this,i=t.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var a=n.findEdgeRingContaining(o,e);if(a===null)throw new qi("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(a)}}};Lr.prototype.buildMinimalEdgeRings=function(e,t,n){for(var i=this,o=new $,a=e.iterator();a.hasNext();){var s=a.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var u=s.buildMinimalRings(),c=i.findShell(u);c!==null?(i.placePolygonHoles(c,u),t.add(c)):n.addAll(u)}else o.add(s)}return o};Lr.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};Lr.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new $,i=e.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var a=new M_(o,t._geometryFactory);n.add(a),a.setInResult()}}return n};Lr.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(e)}};Lr.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};Lr.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),i=n.getEnvelopeInternal(),o=n.getCoordinateN(0),a=null,s=null,u=t.iterator();u.hasNext();){var c=u.next(),f=c.getLinearRing(),h=f.getEnvelopeInternal();a!==null&&(s=a.getLinearRing().getEnvelopeInternal());var p=!1;h.contains(i)&&ee.isPointInRing(o,f.getCoordinates())&&(p=!0),p&&(a===null||s.contains(h))&&(a=c)}return a};Lr.prototype.findShell=function(e){for(var t=0,n=null,i=e.iterator();i.hasNext();){var o=i.next();o.isHole()||(n=o,t++)}return he.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};Lr.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];We.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(t),o=new $,a=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(a,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};Lr.prototype.interfaces_=function(){return[]};Lr.prototype.getClass=function(){return Lr};var Qa=function(){};Qa.prototype.getBounds=function(){};Qa.prototype.interfaces_=function(){return[]};Qa.prototype.getClass=function(){return Qa};var hn=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};hn.prototype.getItem=function(){return this._item};hn.prototype.getBounds=function(){return this._bounds};hn.prototype.interfaces_=function(){return[Qa,on]};hn.prototype.getClass=function(){return hn};var Hi=function(){this._size=null,this._items=null,this._size=0,this._items=new $,this._items.add(null)};Hi.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};Hi.prototype.size=function(){return this._size};Hi.prototype.reorder=function(e){for(var t=this,n=null,i=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(i)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,i)};Hi.prototype.clear=function(){this._size=0,this._items.clear()};Hi.prototype.isEmpty=function(){return this._size===0};Hi.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};Hi.prototype.interfaces_=function(){return[]};Hi.prototype.getClass=function(){return Hi};var fo=function(){};fo.prototype.visitItem=function(e){};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};var ma=function(){};ma.prototype.insert=function(e,t){};ma.prototype.remove=function(e,t){};ma.prototype.query=function(){};ma.prototype.interfaces_=function(){return[]};ma.prototype.getClass=function(){return ma};var lt=function(){if(this._childBoundables=new $,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this._level=e}}},Rg={serialVersionUID:{configurable:!0}};lt.prototype.getLevel=function(){return this._level};lt.prototype.size=function(){return this._childBoundables.size()};lt.prototype.getChildBoundables=function(){return this._childBoundables};lt.prototype.addChildBoundable=function(e){he.isTrue(this._bounds===null),this._childBoundables.add(e)};lt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};lt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};lt.prototype.interfaces_=function(){return[Qa,on]};lt.prototype.getClass=function(){return lt};Rg.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(lt,Rg);var dn=function(){};dn.reverseOrder=function(){return{compare:function(t,n){return n.compareTo(t)}}};dn.min=function(e){return dn.sort(e),e.get(0)};dn.sort=function(e,t){var n=e.toArray();t?To.sort(n,t):To.sort(n);for(var i=e.iterator(),o=0,a=n.length;o<a;o++)i.next(),i.set(n[o])};dn.singletonList=function(e){var t=new $;return t.add(e),t};var nt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};nt.prototype.expandToQueue=function(e,t){var n=nt.isComposite(this._boundable1),i=nt.isComposite(this._boundable2);if(n&&i)return nt.area(this._boundable1)>nt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(i)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new He("neither boundable is composite")};nt.prototype.isLeaves=function(){return!(nt.isComposite(this._boundable1)||nt.isComposite(this._boundable2))};nt.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};nt.prototype.expand=function(e,t,n,i){for(var o=this,a=e.getChildBoundables(),s=a.iterator();s.hasNext();){var u=s.next(),c=new nt(u,t,o._itemDistance);c.getDistance()<i&&n.add(c)}};nt.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};nt.prototype.getDistance=function(){return this._distance};nt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};nt.prototype.interfaces_=function(){return[nn]};nt.prototype.getClass=function(){return nt};nt.area=function(e){return e.getBounds().getArea()};nt.isComposite=function(e){return e instanceof lt};var vt=function r(){if(this._root=null,this._built=!1,this._itemBoundables=new $,this._nodeCapacity=null,arguments.length===0){var e=r.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(arguments.length===1){var t=arguments[0];he.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}},kc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};vt.prototype.getNodeCapacity=function(){return this._nodeCapacity};vt.prototype.lastNode=function(e){return e.get(e.size()-1)};vt.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof lt?n+=e.size(o):o instanceof hn&&(n+=1)}return n}};vt.prototype.removeItem=function(e,t){for(var n=null,i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof hn&&o.getItem()===t&&(n=o)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};vt.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new $:t}else if(arguments.length===1){for(var n=arguments[0],i=new $,o=n.getChildBoundables().iterator();o.hasNext();){var a=o.next();if(a instanceof lt){var s=e.itemsTree(a);s!==null&&i.add(s)}else a instanceof hn?i.add(a.getItem()):he.shouldNeverReachHere()}return i.size()<=0?null:i}};vt.prototype.insert=function(e,t){he.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new hn(e,t))};vt.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new $;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];if(he.isTrue(i>-2),o.getLevel()===i)return a.add(o),null;for(var s=o.getChildBoundables().iterator();s.hasNext();){var u=s.next();u instanceof lt?e.boundablesAtLevel(i,u,a):(he.isTrue(u instanceof hn),i===-1&&a.add(u))}return null}};vt.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new $;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(ae(arguments[2],fo)&&arguments[0]instanceof Object&&arguments[1]instanceof lt)for(var a=arguments[0],s=arguments[1],u=arguments[2],c=s.getChildBoundables(),f=0;f<c.size();f++){var h=c.get(f);e.getIntersectsOp().intersects(h.getBounds(),a)&&(h instanceof lt?e.query(a,h,u):h instanceof hn?u.visitItem(h.getItem()):he.shouldNeverReachHere())}else if(ae(arguments[2],un)&&arguments[0]instanceof Object&&arguments[1]instanceof lt)for(var p=arguments[0],b=arguments[1],_=arguments[2],S=b.getChildBoundables(),R=0;R<S.size();R++){var D=S.get(R);e.getIntersectsOp().intersects(D.getBounds(),p)&&(D instanceof lt?e.query(p,D,_):D instanceof hn?_.add(D.getItem()):he.shouldNeverReachHere())}}};vt.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};vt.prototype.getRoot=function(){return this.build(),this._root};vt.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2],s=this.removeItem(o,a);if(s)return!0;for(var u=null,c=o.getChildBoundables().iterator();c.hasNext();){var f=c.next();if(e.getIntersectsOp().intersects(f.getBounds(),i)&&f instanceof lt&&(s=e.remove(i,f,a),s)){u=f;break}}return u!==null&&u.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(u),s}};vt.prototype.createHigherLevels=function(e,t){he.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};vt.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof lt){var a=e.depth(o);a>n&&(n=a)}}return n+1}};vt.prototype.createParentBoundables=function(e,t){var n=this;he.isTrue(!e.isEmpty());var i=new $;i.add(this.createNode(t));var o=new $(e);dn.sort(o,this.getComparator());for(var a=o.iterator();a.hasNext();){var s=a.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(t)),n.lastNode(i).addChildBoundable(s)}return i};vt.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};vt.prototype.interfaces_=function(){return[on]};vt.prototype.getClass=function(){return vt};vt.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};kc.IntersectsOp.get=function(){return N_};kc.serialVersionUID.get=function(){return-3886435814360241e3};kc.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(vt,kc);var N_=function(){},es=function(){};es.prototype.distance=function(e,t){};es.prototype.interfaces_=function(){return[]};es.prototype.getClass=function(){return es};var Tg=function(r){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,r.call(this,n)}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var a=this;he.isTrue(i.length>0);for(var s=new $,u=0;u<i.length;u++)s.addAll(a.createParentBoundablesFromVerticalSlice(i[u],o));return s},e.prototype.createNode=function(i){return new Jd(i)},e.prototype.size=function(){return arguments.length===0?r.prototype.size.call(this):r.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;r.prototype.insert.call(this,i,o)}else return r.prototype.insert.apply(this,arguments)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(i,o){for(var a=Math.trunc(Math.ceil(i.size()/o)),s=new Array(o).fill(null),u=i.iterator(),c=0;c<o;c++){s[c]=new $;for(var f=0;u.hasNext()&&f<a;){var h=u.next();s[c].add(h),f++}}return s},e.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return r.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],a=arguments[1];r.prototype.query.call(this,o,a)}else if(arguments.length===3){if(ae(arguments[2],fo)&&arguments[0]instanceof Object&&arguments[1]instanceof lt){var s=arguments[0],u=arguments[1],c=arguments[2];r.prototype.query.call(this,s,u,c)}else if(ae(arguments[2],un)&&arguments[0]instanceof Object&&arguments[1]instanceof lt){var f=arguments[0],h=arguments[1],p=arguments[2];r.prototype.query.call(this,f,h,p)}}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return r.prototype.createParentBoundables.call(this,i,o)},e.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return r.prototype.remove.call(this,i,o)}else return r.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return arguments.length===0?r.prototype.depth.call(this):r.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(i,o){he.isTrue(!i.isEmpty());var a=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),s=new $(i);dn.sort(s,e.xComparator);var u=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(a))));return this.createParentBoundablesFromVerticalSlices(u,o)},e.prototype.nearestNeighbour=function(){if(arguments.length===1){if(ae(arguments[0],es)){var i=arguments[0],o=new nt(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof nt){var a=arguments[0];return this.nearestNeighbour(a,ue.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof e&&ae(arguments[1],es)){var s=arguments[0],u=arguments[1],c=new nt(this.getRoot(),s.getRoot(),u);return this.nearestNeighbour(c)}else if(arguments[0]instanceof nt&&typeof arguments[1]=="number"){var f=arguments[0],h=arguments[1],p=h,b=null,_=new Hi;for(_.add(f);!_.isEmpty()&&p>0;){var S=_.poll(),R=S.getDistance();if(R>=p)break;S.isLeaves()?(p=R,b=S):S.expandToQueue(_,p)}return[b.getBoundable(0).getItem(),b.getBoundable(1).getItem()]}}else if(arguments.length===3){var D=arguments[0],v=arguments[1],E=arguments[2],M=new hn(D,v),O=new nt(this.getRoot(),M,E);return this.nearestNeighbour(O)[0]}},e.prototype.interfaces_=function(){return[ma,on]},e.prototype.getClass=function(){return e},e.centreX=function(i){return e.avg(i.getMinX(),i.getMaxX())},e.avg=function(i,o){return(i+o)/2},e.centreY=function(i){return e.avg(i.getMinY(),i.getMaxY())},t.STRtreeNode.get=function(){return Jd},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[Va]},compare:function(n,i){return r.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[Va]},compare:function(n,i){return r.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[r.IntersectsOp]},intersects:function(n,i){return n.intersects(i)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,t),e}(vt),Jd=function(r){function e(){var t=arguments[0];r.call(this,t)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var n=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();n===null?n=new re(o.getBounds()):n.expandToInclude(o.getBounds())}return n},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lt),wr=function(){};wr.prototype.interfaces_=function(){return[]};wr.prototype.getClass=function(){return wr};wr.relativeSign=function(e,t){return e<t?-1:e>t?1:0};wr.compare=function(e,t,n){if(t.equals2D(n))return 0;var i=wr.relativeSign(t.x,n.x),o=wr.relativeSign(t.y,n.y);switch(e){case 0:return wr.compareValue(i,o);case 1:return wr.compareValue(o,i);case 2:return wr.compareValue(o,-i);case 3:return wr.compareValue(-i,o);case 4:return wr.compareValue(-i,-o);case 5:return wr.compareValue(-o,-i);case 6:return wr.compareValue(-o,i);case 7:return wr.compareValue(i,-o)}return he.shouldNeverReachHere("invalid octant value"),0};wr.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var lo=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._segString=e,this.coord=new q(t),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!t.equals2D(e.getCoordinate(n))};lo.prototype.getCoordinate=function(){return this.coord};lo.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};lo.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:wr.compare(this._segmentOctant,this.coord,t.coord)};lo.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};lo.prototype.isInterior=function(){return this._isInterior};lo.prototype.interfaces_=function(){return[nn]};lo.prototype.getClass=function(){return lo};var gr=function(){this._nodeMap=new er,this._edge=null;var e=arguments[0];this._edge=e};gr.prototype.getSplitCoordinates=function(){var e=this,t=new mu;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next();e.addEdgeCoordinates(i,o,t),i=o}return t.toCoordinateArray()};gr.prototype.addCollapsedNodes=function(){var e=this,t=new $;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var i=n.next().intValue();e.add(e._edge.getCoordinate(i),i)}};gr.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};gr.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var i=t._edge.getCoordinate(n),o=t._edge.getCoordinate(n+2);i.equals2D(o)&&e.add(new Dn(n+1))}};gr.prototype.addEdgeCoordinates=function(e,t,n){var i=this,o=this._edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(o);n.add(new q(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(i._edge.getCoordinate(s));a&&n.add(new q(t.coord))};gr.prototype.iterator=function(){return this._nodeMap.values().iterator()};gr.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),a=t.createSplitEdge(i,o);e.add(a),i=o}};gr.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var i=t.segmentIndex-e.segmentIndex;return t.isInterior()||i--,i===1?(n[0]=e.segmentIndex+1,!0):!1};gr.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var a=i.next(),s=t.findCollapseIndex(o,a,n);s&&e.add(new Dn(n[0])),o=a}};gr.prototype.getEdge=function(){return this._edge};gr.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};gr.prototype.createSplitEdge=function(e,t){var n=this,i=t.segmentIndex-e.segmentIndex+2,o=this._edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(o);a||i--;var s=new Array(i).fill(null),u=0;s[u++]=new q(e.coord);for(var c=e.segmentIndex+1;c<=t.segmentIndex;c++)s[u++]=n._edge.getCoordinate(c);return a&&(s[u]=new q(t.coord)),new rt(s,this._edge.getData())};gr.prototype.add=function(e,t){var n=new lo(this._edge,e,t,this._edge.getSegmentOctant(t)),i=this._nodeMap.get(n);return i!==null?(he.isTrue(i.coord.equals2D(e),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)};gr.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),i=n.getCoordinate(0);if(!i.equals2D(t[0]))throw new zi("bad split edge start point at "+i);var o=e.get(e.size()-1),a=o.getCoordinates(),s=a[a.length-1];if(!s.equals2D(t[t.length-1]))throw new zi("bad split edge end point at "+s)};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};var va=function(){};va.prototype.interfaces_=function(){return[]};va.prototype.getClass=function(){return va};va.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new He("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),i=Math.abs(t);return e>=0?t>=0?n>=i?0:1:n>=i?7:6:t>=0?n>=i?3:2:n>=i?4:5}else if(arguments[0]instanceof q&&arguments[1]instanceof q){var o=arguments[0],a=arguments[1],s=a.x-o.x,u=a.y-o.y;if(s===0&&u===0)throw new He("Cannot compute the octant for two identical points "+o);return va.octant(s,u)}};var fi=function(){};fi.prototype.getCoordinates=function(){};fi.prototype.size=function(){};fi.prototype.getCoordinate=function(e){};fi.prototype.isClosed=function(){};fi.prototype.setData=function(e){};fi.prototype.getData=function(){};fi.prototype.interfaces_=function(){return[]};fi.prototype.getClass=function(){return fi};var ru=function(){};ru.prototype.addIntersection=function(e,t){};ru.prototype.interfaces_=function(){return[fi]};ru.prototype.getClass=function(){return ru};var rt=function(){this._nodeList=new gr(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};rt.prototype.getCoordinates=function(){return this._pts};rt.prototype.size=function(){return this._pts.length};rt.prototype.getCoordinate=function(e){return this._pts[e]};rt.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};rt.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};rt.prototype.setData=function(e){this._data=e};rt.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:va.octant(e,t)};rt.prototype.getData=function(){return this._data};rt.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[3],a=new q(n.getIntersection(o));this.addIntersection(a,i)}};rt.prototype.toString=function(){return fn.toLineString(new Qe(this._pts))};rt.prototype.getNodeList=function(){return this._nodeList};rt.prototype.addIntersectionNode=function(e,t){var n=t,i=n+1;if(i<this._pts.length){var o=this._pts[i];e.equals2D(o)&&(n=i)}var a=this._nodeList.add(e,n);return a};rt.prototype.addIntersections=function(e,t,n){for(var i=this,o=0;o<e.getIntersectionNum();o++)i.addIntersection(e,t,n,o)};rt.prototype.interfaces_=function(){return[ru]};rt.prototype.getClass=function(){return rt};rt.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new $;return rt.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],i=arguments[1],o=n.iterator();o.hasNext();){var a=o.next();a.getNodeList().addSplitEdges(i)}};var ie=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new q,this.p1=new q;else if(arguments.length===1){var e=arguments[0];this.p0=new q(e.p0),this.p1=new q(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this.p0=new q(t,n),this.p1=new q(i,o)}},Og={serialVersionUID:{configurable:!0}};ie.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};ie.prototype.orientationIndex=function(){if(arguments[0]instanceof ie){var e=arguments[0],t=ee.orientationIndex(this.p0,this.p1,e.p0),n=ee.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof q){var i=arguments[0];return ee.orientationIndex(this.p0,this.p1,i)}};ie.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};ie.prototype.isVertical=function(){return this.p0.x===this.p1.x};ie.prototype.equals=function(e){if(!(e instanceof ie))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};ie.prototype.intersection=function(e){var t=new $o;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};ie.prototype.project=function(){if(arguments[0]instanceof q){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new q(e);var t=this.projectionFactor(e),n=new q;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof ie){var i=arguments[0],o=this.projectionFactor(i.p0),a=this.projectionFactor(i.p1);if(o>=1&&a>=1||o<=0&&a<=0)return null;var s=this.project(i.p0);o<0&&(s=this.p0),o>1&&(s=this.p1);var u=this.project(i.p1);return a<0&&(u=this.p0),a>1&&(u=this.p1),new ie(s,u)}};ie.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};ie.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};ie.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};ie.prototype.distancePerpendicular=function(e){return ee.distancePointLinePerpendicular(e,this.p0,this.p1)};ie.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};ie.prototype.midPoint=function(){return ie.midPoint(this.p0,this.p1)};ie.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=t*t+n*n;if(i<=0)return ue.NaN;var o=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/i;return o};ie.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),i=ue.MAX_VALUE,o=null,a=this.closestPoint(e.p0);i=a.distance(e.p0),n[0]=a,n[1]=e.p0;var s=this.closestPoint(e.p1);o=s.distance(e.p1),o<i&&(i=o,n[0]=s,n[1]=e.p1);var u=e.closestPoint(this.p0);o=u.distance(this.p0),o<i&&(i=o,n[0]=this.p0,n[1]=u);var c=e.closestPoint(this.p1);return o=c.distance(this.p1),o<i&&(i=o,n[0]=this.p1,n[1]=c),n};ie.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),i=this.p1.distance(e);return n<i?this.p0:this.p1};ie.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};ie.prototype.getLength=function(){return this.p0.distance(this.p1)};ie.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};ie.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};ie.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};ie.prototype.lineIntersection=function(e){try{var t=sn.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof bs))throw n}finally{}return null};ie.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};ie.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),i=this.p0.y+e*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,s=Math.sqrt(o*o+a*a),u=0,c=0;if(t!==0){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");u=t*o/s,c=t*a/s}var f=n-c,h=i+u,p=new q(f,h);return p};ie.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};ie.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||ue.isNaN(t))&&(t=1),t};ie.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};ie.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};ie.prototype.distance=function(){if(arguments[0]instanceof ie){var e=arguments[0];return ee.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof q){var t=arguments[0];return ee.distancePointLine(t,this.p0,this.p1)}};ie.prototype.pointAlong=function(e){var t=new q;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};ie.prototype.hashCode=function(){var e=ue.doubleToLongBits(this.p0.x);e^=ue.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=ue.doubleToLongBits(this.p1.x);n^=ue.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(n)^Math.trunc(n>>32);return t^i};ie.prototype.interfaces_=function(){return[nn,on]};ie.prototype.getClass=function(){return ie};ie.midPoint=function(e,t){return new q((e.x+t.x)/2,(e.y+t.y)/2)};Og.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(ie,Og);var nu=function(){this.tempEnv1=new re,this.tempEnv2=new re,this._overlapSeg1=new ie,this._overlapSeg2=new ie};nu.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};nu.prototype.interfaces_=function(){return[]};nu.prototype.getClass=function(){return nu};var Rr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=i};Rr.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};Rr.prototype.computeSelect=function(e,t,n,i){var o=this._pts[t],a=this._pts[n];if(i.tempEnv1.init(o,a),n-t===1)return i.select(this,t),null;if(!e.intersects(i.tempEnv1))return null;var s=Math.trunc((t+n)/2);t<s&&this.computeSelect(e,t,s,i),s<n&&this.computeSelect(e,s,n,i)};Rr.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,i=this._start;i<=this._end;i++)t[n++]=e._pts[i];return t};Rr.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};Rr.prototype.setId=function(e){this._id=e};Rr.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};Rr.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new re(e,t)}return this._env};Rr.prototype.getEndIndex=function(){return this._end};Rr.prototype.getStartIndex=function(){return this._start};Rr.prototype.getContext=function(){return this._context};Rr.prototype.getId=function(){return this._id};Rr.prototype.computeOverlapsInternal=function(e,t,n,i,o,a){var s=this._pts[e],u=this._pts[t],c=n._pts[i],f=n._pts[o];if(t-e===1&&o-i===1)return a.overlap(this,e,n,i),null;if(a.tempEnv1.init(s,u),a.tempEnv2.init(c,f),!a.tempEnv1.intersects(a.tempEnv2))return null;var h=Math.trunc((e+t)/2),p=Math.trunc((i+o)/2);e<h&&(i<p&&this.computeOverlapsInternal(e,h,n,i,p,a),p<o&&this.computeOverlapsInternal(e,h,n,p,o,a)),h<t&&(i<p&&this.computeOverlapsInternal(h,t,n,i,p,a),p<o&&this.computeOverlapsInternal(h,t,n,p,o,a))};Rr.prototype.interfaces_=function(){return[]};Rr.prototype.getClass=function(){return Rr};var Tn=function(){};Tn.prototype.interfaces_=function(){return[]};Tn.prototype.getClass=function(){return Tn};Tn.getChainStartIndices=function(e){var t=0,n=new $;n.add(new Dn(t));do{var i=Tn.findChainEnd(e,t);n.add(new Dn(i)),t=i}while(t<e.length-1);var o=Tn.toIntArray(n);return o};Tn.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var i=De.quadrant(e[n],e[n+1]),o=t+1;o<e.length;){if(!e[o-1].equals2D(e[o])){var a=De.quadrant(e[o-1],e[o]);if(a!==i)break}o++}return o-1};Tn.getChains=function(){if(arguments.length===1){var e=arguments[0];return Tn.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],i=new $,o=Tn.getChainStartIndices(t),a=0;a<o.length-1;a++){var s=new Rr(t,o[a],o[a+1],n);i.add(s)}return i}};Tn.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var zo=function(){};zo.prototype.computeNodes=function(e){};zo.prototype.getNodedSubstrings=function(){};zo.prototype.interfaces_=function(){return[]};zo.prototype.getClass=function(){return zo};var iu=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}}};iu.prototype.setSegmentIntersector=function(e){this._segInt=e};iu.prototype.interfaces_=function(){return[zo]};iu.prototype.getClass=function(){return iu};var hh=function(r){function e(n){n?r.call(this,n):r.call(this),this._monoChains=new $,this._index=new Tg,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return rt.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(i){for(var o=this,a=Tn.getChains(i.getCoordinates(),i),s=a.iterator();s.hasNext();){var u=s.next();u.setId(o._idCounter++),o._index.insert(u.getEnvelope(),u),o._monoChains.add(u)}},e.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var a=i.iterator();a.hasNext();)o.add(a.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var i=this,o=new Xd(this._segInt),a=this._monoChains.iterator();a.hasNext();)for(var s=a.next(),u=i._index.query(s.getEnvelope()),c=u.iterator();c.hasNext();){var f=c.next();if(f.getId()>s.getId()&&(s.computeOverlaps(f,o),i._nOverlaps++),i._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},t.SegmentOverlapAction.get=function(){return Xd},Object.defineProperties(e,t),e}(iu),Xd=function(r){function e(){r.call(this),this._si=null;var t=arguments[0];this._si=t}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=n.getContext(),u=o.getContext();this._si.processIntersections(s,i,u,a)}else return r.prototype.overlap.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nu),Ae=function r(){if(this._quadrantSegments=r.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=r.CAP_ROUND,this._joinStyle=r.JOIN_ROUND,this._mitreLimit=r.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=r.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(n)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}}},Yi={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ae.prototype.getEndCapStyle=function(){return this._endCapStyle};Ae.prototype.isSingleSided=function(){return this._isSingleSided};Ae.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=Ae.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ae.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==Ae.JOIN_ROUND&&(this._quadrantSegments=Ae.DEFAULT_QUADRANT_SEGMENTS)};Ae.prototype.getJoinStyle=function(){return this._joinStyle};Ae.prototype.setJoinStyle=function(e){this._joinStyle=e};Ae.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};Ae.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Ae.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Ae.prototype.setEndCapStyle=function(e){this._endCapStyle=e};Ae.prototype.getMitreLimit=function(){return this._mitreLimit};Ae.prototype.setMitreLimit=function(e){this._mitreLimit=e};Ae.prototype.setSingleSided=function(e){this._isSingleSided=e};Ae.prototype.interfaces_=function(){return[]};Ae.prototype.getClass=function(){return Ae};Ae.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};Yi.CAP_ROUND.get=function(){return 1};Yi.CAP_FLAT.get=function(){return 2};Yi.CAP_SQUARE.get=function(){return 3};Yi.JOIN_ROUND.get=function(){return 1};Yi.JOIN_MITRE.get=function(){return 2};Yi.JOIN_BEVEL.get=function(){return 3};Yi.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};Yi.DEFAULT_MITRE_LIMIT.get=function(){return 5};Yi.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Ae,Yi);var Ye=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ee.COUNTERCLOCKWISE,this._inputLine=e||null},_u={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ye.prototype.isDeletable=function(e,t,n,i){var o=this._inputLine[e],a=this._inputLine[t],s=this._inputLine[n];return!this.isConcave(o,a,s)||!this.isShallow(o,a,s,i)?!1:this.isShallowSampled(o,a,e,n,i)};Ye.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),o=!1;i<this._inputLine.length;){var a=!1;e.isDeletable(t,n,i,e._distanceTol)&&(e._isDeleted[n]=Ye.DELETE,a=!0,o=!0),a?t=i:t=n,n=e.findNextNonDeletedIndex(t),i=e.findNextNonDeletedIndex(n)}return o};Ye.prototype.isShallowConcavity=function(e,t,n,i){var o=ee.computeOrientation(e,t,n),a=o===this._angleOrientation;if(!a)return!1;var s=ee.distancePointLine(t,e,n);return s<i};Ye.prototype.isShallowSampled=function(e,t,n,i,o){var a=this,s=Math.trunc((i-n)/Ye.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var u=n;u<i;u+=s)if(!a.isShallow(e,t,a._inputLine[u],o))return!1;return!0};Ye.prototype.isConcave=function(e,t,n){var i=ee.computeOrientation(e,t,n),o=i===this._angleOrientation;return o};Ye.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=ee.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};Ye.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Ye.DELETE;)t++;return t};Ye.prototype.isShallow=function(e,t,n,i){var o=ee.distancePointLine(t,e,n);return o<i};Ye.prototype.collapseLine=function(){for(var e=this,t=new mu,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==Ye.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};Ye.prototype.interfaces_=function(){return[]};Ye.prototype.getClass=function(){return Ye};Ye.simplify=function(e,t){var n=new Ye(e);return n.simplify(t)};_u.INIT.get=function(){return 0};_u.DELETE.get=function(){return 1};_u.KEEP.get=function(){return 1};_u.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(Ye,_u);var Gr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new $},Dg={COORDINATE_ARRAY_TYPE:{configurable:!0}};Gr.prototype.getCoordinates=function(){var e=this._ptList.toArray(Gr.COORDINATE_ARRAY_TYPE);return e};Gr.prototype.setPrecisionModel=function(e){this._precisionModel=e};Gr.prototype.addPt=function(e){var t=new q(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};Gr.prototype.revere=function(){};Gr.prototype.addPts=function(e,t){var n=this;if(t)for(var i=0;i<e.length;i++)n.addPt(e[i]);else for(var o=e.length-1;o>=0;o--)n.addPt(e[o])};Gr.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};Gr.prototype.toString=function(){var e=new me,t=e.createLineString(this.getCoordinates());return t.toString()};Gr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new q(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};Gr.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};Gr.prototype.interfaces_=function(){return[]};Gr.prototype.getClass=function(){return Gr};Dg.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(Gr,Dg);var be=function(){},Oa={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};be.prototype.interfaces_=function(){return[]};be.prototype.getClass=function(){return be};be.toDegrees=function(e){return e*180/Math.PI};be.normalize=function(e){for(;e>Math.PI;)e-=be.PI_TIMES_2;for(;e<=-Math.PI;)e+=be.PI_TIMES_2;return e};be.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=n.x-t.x,o=n.y-t.y;return Math.atan2(o,i)}};be.isAcute=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=i*a+o*s;return u>0};be.isObtuse=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=i*a+o*s;return u<0};be.interiorAngle=function(e,t,n){var i=be.angle(t,e),o=be.angle(t,n);return Math.abs(o-i)};be.normalizePositive=function(e){if(e<0){for(;e<0;)e+=be.PI_TIMES_2;e>=be.PI_TIMES_2&&(e=0)}else{for(;e>=be.PI_TIMES_2;)e-=be.PI_TIMES_2;e<0&&(e=0)}return e};be.angleBetween=function(e,t,n){var i=be.angle(t,e),o=be.angle(t,n);return be.diff(i,o)};be.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};be.toRadians=function(e){return e*Math.PI/180};be.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?be.COUNTERCLOCKWISE:n<0?be.CLOCKWISE:be.NONE};be.angleBetweenOriented=function(e,t,n){var i=be.angle(t,e),o=be.angle(t,n),a=o-i;return a<=-Math.PI?a+be.PI_TIMES_2:a>Math.PI?a-be.PI_TIMES_2:a};Oa.PI_TIMES_2.get=function(){return 2*Math.PI};Oa.PI_OVER_2.get=function(){return Math.PI/2};Oa.PI_OVER_4.get=function(){return Math.PI/4};Oa.COUNTERCLOCKWISE.get=function(){return ee.COUNTERCLOCKWISE};Oa.CLOCKWISE.get=function(){return ee.CLOCKWISE};Oa.NONE.get=function(){return ee.COLLINEAR};Object.defineProperties(be,Oa);var qe=function r(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ie,this._seg1=new ie,this._offset0=new ie,this._offset1=new ie,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new $o,this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),t.getQuadrantSegments()>=8&&t.getJoinStyle()===Ae.JOIN_ROUND&&(this._closingSegLengthFactor=r.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},bu={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};qe.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ee.computeOrientation(this._s0,this._s1,this._s2),i=n===ee.CLOCKWISE&&this._side===j.LEFT||n===ee.COUNTERCLOCKWISE&&this._side===j.RIGHT;n===0?this.addCollinear(t):i?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};qe.prototype.addLineEndCap=function(e,t){var n=new ie(e,t),i=new ie;this.computeOffsetSegment(n,j.LEFT,this._distance,i);var o=new ie;this.computeOffsetSegment(n,j.RIGHT,this._distance,o);var a=t.x-e.x,s=t.y-e.y,u=Math.atan2(s,a);switch(this._bufParams.getEndCapStyle()){case Ae.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(t,u+Math.PI/2,u-Math.PI/2,ee.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Ae.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Ae.CAP_SQUARE:var c=new q;c.x=Math.abs(this._distance)*Math.cos(u),c.y=Math.abs(this._distance)*Math.sin(u);var f=new q(i.p1.x+c.x,i.p1.y+c.y),h=new q(o.p1.x+c.x,o.p1.y+c.y);this._segList.addPt(f),this._segList.addPt(h);break}};qe.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};qe.prototype.addMitreJoin=function(e,t,n,i){var o=!0,a=null;try{a=sn.intersection(t.p0,t.p1,n.p0,n.p1);var s=i<=0?1:a.distance(e)/Math.abs(i);s>this._bufParams.getMitreLimit()&&(o=!1)}catch(u){if(u instanceof bs)a=new q(0,0),o=!1;else throw u}finally{}o?this._segList.addPt(a):this.addLimitedMitreJoin(t,n,i,this._bufParams.getMitreLimit())};qe.prototype.addFilletCorner=function(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,u=Math.atan2(s,a),c=n.x-e.x,f=n.y-e.y,h=Math.atan2(f,c);i===ee.CLOCKWISE?u<=h&&(u+=2*Math.PI):u>=h&&(u-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,u,h,i,o),this._segList.addPt(n)};qe.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*qe.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ae.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ae.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};qe.prototype.createSquare=function(e){this._segList.addPt(new q(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new q(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new q(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new q(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};qe.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};qe.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};qe.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};qe.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};qe.prototype.addLimitedMitreJoin=function(e,t,n,i){var o=this._seg0.p1,a=be.angle(o,this._seg0.p0),s=be.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),u=s/2,c=be.normalize(a+u),f=be.normalize(c+Math.PI),h=i*n,p=h*Math.abs(Math.sin(u)),b=n-p,_=o.x+h*Math.cos(f),S=o.y+h*Math.sin(f),R=new q(_,S),D=new ie(o,R),v=D.pointAlongOffset(1,b),E=D.pointAlongOffset(1,-b);this._side===j.LEFT?(this._segList.addPt(v),this._segList.addPt(E)):(this._segList.addPt(E),this._segList.addPt(v))};qe.prototype.computeOffsetSegment=function(e,t,n,i){var o=t===j.LEFT?1:-1,a=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,u=Math.sqrt(a*a+s*s),c=o*n*a/u,f=o*n*s/u;i.p0.x=e.p0.x-f,i.p0.y=e.p0.y+c,i.p1.x=e.p1.x-f,i.p1.y=e.p1.y+c};qe.prototype.addFilletArc=function(e,t,n,i,o){var a=this,s=i===ee.CLOCKWISE?-1:1,u=Math.abs(t-n),c=Math.trunc(u/this._filletAngleQuantum+.5);if(c<1)return null;for(var f=0,h=u/c,p=f,b=new q;p<u;){var _=t+s*p;b.x=e.x+o*Math.cos(_),b.y=e.y+o*Math.sin(_),a._segList.addPt(b),p+=h}};qe.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*qe.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new q((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new q((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};qe.prototype.createCircle=function(e){var t=new q(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};qe.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};qe.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Gr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*qe.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};qe.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===Ae.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ae.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ee.CLOCKWISE,this._distance))};qe.prototype.closeRing=function(){this._segList.closeRing()};qe.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};qe.prototype.interfaces_=function(){return[]};qe.prototype.getClass=function(){return qe};bu.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};bu.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};bu.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};bu.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(qe,bu);var xr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};xr.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,i=Math.abs(t),o=this.getSegGen(i);e.length<=1?this.computePointCurve(e[0],o):this.computeOffsetCurve(e,n,o);var a=o.getCoordinates();return n&&ve.reverse(a),a};xr.prototype.computeSingleSidedBufferCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var o=Ye.simplify(e,-i),a=o.length-1;n.initSideSegments(o[a],o[a-1],j.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{n.addSegments(e,!1);var u=Ye.simplify(e,i),c=u.length-1;n.initSideSegments(u[0],u[1],j.LEFT),n.addFirstSegment();for(var f=2;f<=c;f++)n.addNextSegment(u[f],!0)}n.addLastSegment(),n.closeRing()};xr.prototype.computeRingBufferCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);t===j.RIGHT&&(i=-i);var o=Ye.simplify(e,i),a=o.length-1;n.initSideSegments(o[a-1],o[0],t);for(var s=1;s<=a;s++){var u=s!==1;n.addNextSegment(o[s],u)}n.closeRing()};xr.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),i=Ye.simplify(e,n),o=i.length-1;t.initSideSegments(i[0],i[1],j.LEFT);for(var a=2;a<=o;a++)t.addNextSegment(i[a],!0);t.addLastSegment(),t.addLineEndCap(i[o-1],i[o]);var s=Ye.simplify(e,-n),u=s.length-1;t.initSideSegments(s[u],s[u-1],j.LEFT);for(var c=u-2;c>=0;c--)t.addNextSegment(s[c],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()};xr.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case Ae.CAP_ROUND:t.createCircle(e);break;case Ae.CAP_SQUARE:t.createSquare(e);break}};xr.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),i=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],i);else if(this._bufParams.isSingleSided()){var o=t<0;this.computeSingleSidedBufferCurve(e,o,i)}else this.computeLineBufferCurve(e,i);var a=i.getCoordinates();return a};xr.prototype.getBufferParameters=function(){return this._bufParams};xr.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};xr.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return xr.copyCoordinates(e);var i=this.getSegGen(n);return this.computeRingBufferCurve(e,t,i),i.getCoordinates()};xr.prototype.computeOffsetCurve=function(e,t,n){var i=this.simplifyTolerance(this._distance);if(t){var o=Ye.simplify(e,-i),a=o.length-1;n.initSideSegments(o[a],o[a-1],j.LEFT),n.addFirstSegment();for(var s=a-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{var u=Ye.simplify(e,i),c=u.length-1;n.initSideSegments(u[0],u[1],j.LEFT),n.addFirstSegment();for(var f=2;f<=c;f++)n.addNextSegment(u[f],!0)}n.addLastSegment()};xr.prototype.getSegGen=function(e){return new qe(this._precisionModel,this._bufParams,e)};xr.prototype.interfaces_=function(){return[]};xr.prototype.getClass=function(){return xr};xr.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new q(e[n]);return t};var ya=function(){this._subgraphs=null,this._seg=new ie,this._cga=new ee;var e=arguments[0];this._subgraphs=e},kg={DepthSegment:{configurable:!0}};ya.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new $,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),a=o.getEnvelope();t.y<a.getMinY()||t.y>a.getMaxY()||e.findStabbedSegments(t,o.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(ae(arguments[2],un)&&arguments[0]instanceof q&&arguments[1]instanceof bl)for(var s=arguments[0],u=arguments[1],c=arguments[2],f=u.getEdge().getCoordinates(),h=0;h<f.length-1;h++){e._seg.p0=f[h],e._seg.p1=f[h+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var p=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(p<s.x)&&!e._seg.isHorizontal()&&!(s.y<e._seg.p0.y||s.y>e._seg.p1.y)&&ee.computeOrientation(e._seg.p0,e._seg.p1,s)!==ee.RIGHT){var b=u.getDepth(j.LEFT);e._seg.p0.equals(f[h])||(b=u.getDepth(j.RIGHT));var _=new Uo(e._seg,b);c.add(_)}}else if(ae(arguments[2],un)&&arguments[0]instanceof q&&ae(arguments[1],un))for(var S=arguments[0],R=arguments[1],D=arguments[2],v=R.iterator();v.hasNext();){var E=v.next();E.isForward()&&e.findStabbedSegments(S,E,D)}}};ya.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=dn.min(t);return n._leftDepth};ya.prototype.interfaces_=function(){return[]};ya.prototype.getClass=function(){return ya};kg.DepthSegment.get=function(){return Uo};Object.defineProperties(ya,kg);var Uo=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new ie(e),this._leftDepth=t};Uo.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};Uo.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};Uo.prototype.toString=function(){return this._upwardSeg.toString()};Uo.prototype.interfaces_=function(){return[nn]};Uo.prototype.getClass=function(){return Uo};var Ne=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};Ne.prototype.area=function(){return Ne.area(this.p0,this.p1,this.p2)};Ne.prototype.signedArea=function(){return Ne.signedArea(this.p0,this.p1,this.p2)};Ne.prototype.interpolateZ=function(e){if(e===null)throw new He("Supplied point is null.");return Ne.interpolateZ(e,this.p0,this.p1,this.p2)};Ne.prototype.longestSideLength=function(){return Ne.longestSideLength(this.p0,this.p1,this.p2)};Ne.prototype.isAcute=function(){return Ne.isAcute(this.p0,this.p1,this.p2)};Ne.prototype.circumcentre=function(){return Ne.circumcentre(this.p0,this.p1,this.p2)};Ne.prototype.area3D=function(){return Ne.area3D(this.p0,this.p1,this.p2)};Ne.prototype.centroid=function(){return Ne.centroid(this.p0,this.p1,this.p2)};Ne.prototype.inCentre=function(){return Ne.inCentre(this.p0,this.p1,this.p2)};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};Ne.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};Ne.det=function(e,t,n,i){return e*i-t*n};Ne.interpolateZ=function(e,t,n,i){var o=t.x,a=t.y,s=n.x-o,u=i.x-o,c=n.y-a,f=i.y-a,h=s*f-u*c,p=e.x-o,b=e.y-a,_=(f*p-u*b)/h,S=(-c*p+s*b)/h,R=t.z+_*(n.z-t.z)+S*(i.z-t.z);return R};Ne.longestSideLength=function(e,t,n){var i=e.distance(t),o=t.distance(n),a=n.distance(e),s=i;return o>s&&(s=o),a>s&&(s=a),s};Ne.isAcute=function(e,t,n){return!(!be.isAcute(e,t,n)||!be.isAcute(t,n,e)||!be.isAcute(n,e,t))};Ne.circumcentre=function(e,t,n){var i=n.x,o=n.y,a=e.x-i,s=e.y-o,u=t.x-i,c=t.y-o,f=2*Ne.det(a,s,u,c),h=Ne.det(s,a*a+s*s,c,u*u+c*c),p=Ne.det(a,a*a+s*s,u,u*u+c*c),b=i-h/f,_=o+p/f;return new q(b,_)};Ne.perpendicularBisector=function(e,t){var n=t.x-e.x,i=t.y-e.y,o=new sn(e.x+n/2,e.y+i/2,1),a=new sn(e.x-i+n/2,e.y+n+i/2,1);return new sn(o,a)};Ne.angleBisector=function(e,t,n){var i=t.distance(e),o=t.distance(n),a=i/(i+o),s=n.x-e.x,u=n.y-e.y,c=new q(e.x+a*s,e.y+a*u);return c};Ne.area3D=function(e,t,n){var i=t.x-e.x,o=t.y-e.y,a=t.z-e.z,s=n.x-e.x,u=n.y-e.y,c=n.z-e.z,f=o*c-a*u,h=a*s-i*c,p=i*u-o*s,b=f*f+h*h+p*p,_=Math.sqrt(b)/2;return _};Ne.centroid=function(e,t,n){var i=(e.x+t.x+n.x)/3,o=(e.y+t.y+n.y)/3;return new q(i,o)};Ne.inCentre=function(e,t,n){var i=t.distance(n),o=e.distance(n),a=e.distance(t),s=i+o+a,u=(i*e.x+o*t.x+a*n.x)/s,c=(i*e.y+o*t.y+a*n.y)/s;return new q(u,c)};var Qr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new $;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};Qr.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)};Qr.prototype.addPolygon=function(e){var t=this,n=this._distance,i=j.LEFT;this._distance<0&&(n=-this._distance,i=j.RIGHT);var o=e.getExteriorRing(),a=ve.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&a.length<3)return null;this.addPolygonRing(a,n,i,H.EXTERIOR,H.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var u=e.getInteriorRingN(s),c=ve.removeRepeatedPoints(u.getCoordinates());t._distance>0&&t.isErodedCompletely(u,-t._distance)||t.addPolygonRing(c,n,j.opposite(i),H.INTERIOR,H.EXTERIOR)}};Qr.prototype.isTriangleErodedCompletely=function(e,t){var n=new Ne(e[0],e[1],e[2]),i=n.inCentre(),o=ee.distancePointLine(i,n.p0,n.p1);return o<Math.abs(t)};Qr.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=ve.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)};Qr.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var i=new rt(e,new Le(0,H.BOUNDARY,t,n));this._curveList.add(i)};Qr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};Qr.prototype.addPolygonRing=function(e,t,n,i,o){if(t===0&&e.length<ui.MINIMUM_VALID_SIZE)return null;var a=i,s=o;e.length>=ui.MINIMUM_VALID_SIZE&&ee.isCCW(e)&&(a=o,s=i,n=j.opposite(n));var u=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(u,a,s)};Qr.prototype.add=function(e){if(e.isEmpty())return null;e instanceof ht?this.addPolygon(e):e instanceof Xe?this.addLineString(e):e instanceof Pr?this.addPoint(e):e instanceof $a?this.addCollection(e):e instanceof Fo?this.addCollection(e):e instanceof ii?this.addCollection(e):e instanceof dr&&this.addCollection(e)};Qr.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var i=e.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return t<0&&2*Math.abs(t)>o};Qr.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);t.add(i)}};Qr.prototype.interfaces_=function(){return[]};Qr.prototype.getClass=function(){return Qr};var ts=function(){};ts.prototype.locate=function(e){};ts.prototype.interfaces_=function(){return[]};ts.prototype.getClass=function(){return ts};var oi=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};oi.prototype.next=function(){if(this._atStart)return this._atStart=!1,oi.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Es;var e=this._parent.getGeometryN(this._index++);return e instanceof dr?(this._subcollectionIterator=new oi(e),this._subcollectionIterator.next()):e};oi.prototype.remove=function(){throw new Error(this.getClass().getName())};oi.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};oi.prototype.interfaces_=function(){return[ws]};oi.prototype.getClass=function(){return oi};oi.isAtomic=function(e){return!(e instanceof dr)};var zr=function(){this._geom=null;var e=arguments[0];this._geom=e};zr.prototype.locate=function(e){return zr.locate(e,this._geom)};zr.prototype.interfaces_=function(){return[ts]};zr.prototype.getClass=function(){return zr};zr.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?ee.isPointInRing(e,t.getCoordinates()):!1};zr.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!zr.isPointInRing(e,n))return!1;for(var i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i);if(zr.isPointInRing(e,o))return!1}return!0};zr.containsPoint=function(e,t){if(t instanceof ht)return zr.containsPointInPolygon(e,t);if(t instanceof dr)for(var n=new oi(t);n.hasNext();){var i=n.next();if(i!==t&&zr.containsPoint(e,i))return!0}return!1};zr.locate=function(e,t){return t.isEmpty()?H.EXTERIOR:zr.containsPoint(e,t)?H.INTERIOR:H.EXTERIOR};var rr=function(){this._edgeMap=new er,this._edgeList=null,this._ptInAreaLocation=[H.NONE,H.NONE]};rr.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};rr.prototype.propagateSideLabels=function(e){for(var t=H.NONE,n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.isArea(e)&&o.getLocation(e,j.LEFT)!==H.NONE&&(t=o.getLocation(e,j.LEFT))}if(t===H.NONE)return null;for(var a=t,s=this.iterator();s.hasNext();){var u=s.next(),c=u.getLabel();if(c.getLocation(e,j.ON)===H.NONE&&c.setLocation(e,j.ON,a),c.isArea(e)){var f=c.getLocation(e,j.LEFT),h=c.getLocation(e,j.RIGHT);if(h!==H.NONE){if(h!==a)throw new qi("side location conflict",u.getCoordinate());f===H.NONE&&he.shouldNeverReachHere("found single null side (at "+u.getCoordinate()+")"),a=f}else he.isTrue(c.getLocation(e,j.LEFT)===H.NONE,"found single null side"),c.setLocation(e,j.RIGHT,a),c.setLocation(e,j.LEFT,a)}}};rr.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};rr.prototype.print=function(e){Kt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};rr.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};rr.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,i=t.get(n).getLabel(),o=i.getLocation(e,j.LEFT);he.isTrue(o!==H.NONE,"Found unlabelled area edge");for(var a=o,s=this.iterator();s.hasNext();){var u=s.next(),c=u.getLabel();he.isTrue(c.isArea(e),"Found non-area edge");var f=c.getLocation(e,j.LEFT),h=c.getLocation(e,j.RIGHT);if(f===h||h!==a)return!1;a=f}return!0};rr.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var i=t._edgeList.get(n);if(i===e)return n}return-1};rr.prototype.iterator=function(){return this.getEdges().iterator()};rr.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new $(this._edgeMap.values())),this._edgeList};rr.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===H.NONE&&(this._ptInAreaLocation[e]=zr.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};rr.prototype.toString=function(){var e=new Yn;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};rr.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};rr.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),a=o.getLabel(),s=0;s<2;s++)a.isLine(s)&&a.getLocation(s)===H.BOUNDARY&&(n[s]=!0);for(var u=this.iterator();u.hasNext();)for(var c=u.next(),f=c.getLabel(),h=0;h<2;h++)if(f.isAnyNull(h)){var p=H.NONE;if(n[h])p=H.EXTERIOR;else{var b=c.getCoordinate();p=t.getLocation(h,b,e)}f.setAllLocationsIfNull(h,p)}};rr.prototype.getDegree=function(){return this._edgeMap.size()};rr.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};var P_=function(r){function e(){r.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var i=null,o=null,a=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var u=n._resultAreaEdgeList.get(s),c=u.getSym();if(u.getLabel().isArea())switch(i===null&&u.isInResult()&&(i=u),a){case n._SCANNING_FOR_INCOMING:if(!c.isInResult())continue;o=c,a=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!u.isInResult())continue;o.setNext(u),a=n._SCANNING_FOR_INCOMING;break}}if(a===this._LINKING_TO_OUTGOING){if(i===null)throw new qi("no outgoing dirEdge found",this.getCoordinate());he.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},e.prototype.insert=function(n){var i=n;this.insertEdgeEnd(i,i)},e.prototype.getRightmostEdge=function(){var n=this.getEdges(),i=n.size();if(i<1)return null;var o=n.get(0);if(i===1)return o;var a=n.get(i-1),s=o.getQuadrant(),u=a.getQuadrant();return De.isNorthern(s)&&De.isNorthern(u)?o:!De.isNorthern(s)&&!De.isNorthern(u)?a:o.getDy()!==0?o:a.getDy()!==0?a:(he.shouldNeverReachHere("found two horizontal edges incident on node"),null)},e.prototype.print=function(n){Kt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();n.print("out "),o.print(n),n.println(),n.print("in "),o.getSym().print(n),n.println()}},e.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new $;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&n._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(n){for(var i=this.iterator();i.hasNext();){var o=i.next(),a=o.getLabel();a.setAllLocationsIfNull(0,n.getLocation(0)),a.setAllLocationsIfNull(1,n.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var i=null,o=null,a=this._edgeList.size()-1;a>=0;a--){var s=n._edgeList.get(a),u=s.getSym();o===null&&(o=u),i!==null&&u.setNext(i),i=s}o.setNext(i)},e.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),a=i.getDepth(j.LEFT),s=i.getDepth(j.RIGHT),u=this.computeDepths(o+1,this._edgeList.size(),a),c=this.computeDepths(0,o,u);if(c!==s)throw new qi("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var f=arguments[0],h=arguments[1],p=arguments[2],b=p,_=f;_<h;_++){var S=n._edgeList.get(_);S.setEdgeDepths(j.RIGHT,b),b=S.getDepth(j.LEFT)}return b}},e.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(n){for(var i=this,o=null,a=null,s=this._SCANNING_FOR_INCOMING,u=this._resultAreaEdgeList.size()-1;u>=0;u--){var c=i._resultAreaEdgeList.get(u),f=c.getSym();switch(o===null&&c.getEdgeRing()===n&&(o=c),s){case i._SCANNING_FOR_INCOMING:if(f.getEdgeRing()!==n)continue;a=f,s=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(c.getEdgeRing()!==n)continue;a.setNextMin(c),s=i._SCANNING_FOR_INCOMING;break}}s===this._LINKING_TO_OUTGOING&&(he.isTrue(o!==null,"found null for first outgoing dirEdge"),he.isTrue(o.getEdgeRing()===n,"unable to link last incoming dirEdge"),a.setNextMin(o))},e.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&n++}return n}else if(arguments.length===1){for(var a=arguments[0],s=0,u=this.iterator();u.hasNext();){var c=u.next();c.getEdgeRing()===a&&s++}return s}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var n=H.NONE,i=this.iterator();i.hasNext();){var o=i.next(),a=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){n=H.INTERIOR;break}if(a.isInResult()){n=H.EXTERIOR;break}}}if(n===H.NONE)return null;for(var s=n,u=this.iterator();u.hasNext();){var c=u.next(),f=c.getSym();c.isLineEdge()?c.getEdge().setCovered(s===H.INTERIOR):(c.isInResult()&&(s=H.EXTERIOR),f.isInResult()&&(s=H.INTERIOR))}},e.prototype.computeLabelling=function(n){var i=this;r.prototype.computeLabelling.call(this,n),this._label=new Le(H.NONE);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getEdge(),u=s.getLabel(),c=0;c<2;c++){var f=u.getLocation(c);(f===H.INTERIOR||f===H.BOUNDARY)&&i._label.setLocation(c,H.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rr),Bg=function(r){function e(){r.apply(this,arguments)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.createNode=function(n){return new Dc(n,new P_)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Za),ho=function r(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=r.orientation(e)};ho.prototype.compareTo=function(e){var t=e,n=ho.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};ho.prototype.interfaces_=function(){return[nn]};ho.prototype.getClass=function(){return ho};ho.orientation=function(e){return ve.increasingDirection(e)===1};ho.compareOriented=function(e,t,n,i){for(var o=t?1:-1,a=i?1:-1,s=t?e.length:-1,u=i?n.length:-1,c=t?0:e.length-1,f=i?0:n.length-1;;){var h=e[c].compareTo(n[f]);if(h!==0)return h;c+=o,f+=a;var p=c===s,b=f===u;if(p&&!b)return-1;if(!p&&b)return 1;if(p&&b)return 0}};var pn=function(){this._edges=new $,this._ocaMap=new er};pn.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var i=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var o=i.getCoordinates(),a=0;a<o.length;a++)a>0&&e.print(","),e.print(o[a].x+" "+o[a].y);e.println(")")}e.print(")  ")};pn.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};pn.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};pn.prototype.iterator=function(){return this._edges.iterator()};pn.prototype.getEdges=function(){return this._edges};pn.prototype.get=function(e){return this._edges.get(e)};pn.prototype.findEqualEdge=function(e){var t=new ho(e.getCoordinates()),n=this._ocaMap.get(t);return n};pn.prototype.add=function(e){this._edges.add(e);var t=new ho(e.getCoordinates());this._ocaMap.put(t,e)};pn.prototype.interfaces_=function(){return[]};pn.prototype.getClass=function(){return pn};var qo=function(){};qo.prototype.processIntersections=function(e,t,n,i){};qo.prototype.isDone=function(){};qo.prototype.interfaces_=function(){return[]};qo.prototype.getClass=function(){return qo};var Vr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};Vr.prototype.isTrivialIntersection=function(e,t,n,i){if(e===n&&this._li.getIntersectionNum()===1){if(Vr.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var o=e.size()-1;if(t===0&&i===o||i===0&&t===o)return!0}}return!1};Vr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Vr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Vr.prototype.getLineIntersector=function(){return this._li};Vr.prototype.hasProperIntersection=function(){return this._hasProper};Vr.prototype.processIntersections=function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var o=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,a,s,u),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};Vr.prototype.hasIntersection=function(){return this._hasIntersection};Vr.prototype.isDone=function(){return!1};Vr.prototype.hasInteriorIntersection=function(){return this._hasInterior};Vr.prototype.interfaces_=function(){return[qo]};Vr.prototype.getClass=function(){return Vr};Vr.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var qn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new q(e),this.segmentIndex=t,this.dist=n};qn.prototype.getSegmentIndex=function(){return this.segmentIndex};qn.prototype.getCoordinate=function(){return this.coord};qn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};qn.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};qn.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};qn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};qn.prototype.getDistance=function(){return this.dist};qn.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};qn.prototype.interfaces_=function(){return[nn]};qn.prototype.getClass=function(){return qn};var li=function(){this._nodeMap=new er,this.edge=null;var e=arguments[0];this.edge=e};li.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};li.prototype.iterator=function(){return this._nodeMap.values().iterator()};li.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),i=n.next();n.hasNext();){var o=n.next(),a=t.createSplitEdge(i,o);e.add(a),i=o}};li.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};li.prototype.createSplitEdge=function(e,t){var n=this,i=t.segmentIndex-e.segmentIndex+2,o=this.edge.pts[t.segmentIndex],a=t.dist>0||!t.coord.equals2D(o);a||i--;var s=new Array(i).fill(null),u=0;s[u++]=new q(e.coord);for(var c=e.segmentIndex+1;c<=t.segmentIndex;c++)s[u++]=n.edge.pts[c];return a&&(s[u]=t.coord),new ec(s,new Le(this.edge._label))};li.prototype.add=function(e,t,n){var i=new qn(e,t,n),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};li.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};li.prototype.interfaces_=function(){return[]};li.prototype.getClass=function(){return li};var Ho=function(){};Ho.prototype.getChainStartIndices=function(e){var t=this,n=0,i=new $;i.add(new Dn(n));do{var o=t.findChainEnd(e,n);i.add(new Dn(o)),n=o}while(n<e.length-1);var a=Ho.toIntArray(i);return a};Ho.prototype.findChainEnd=function(e,t){for(var n=De.quadrant(e[t],e[t+1]),i=t+1;i<e.length;){var o=De.quadrant(e[i-1],e[i]);if(o!==n)break;i++}return i-1};Ho.prototype.interfaces_=function(){return[]};Ho.prototype.getClass=function(){return Ho};Ho.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Gi=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new re,this.env2=new re;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new Ho;this.startIndex=t.getChainStartIndices(this.pts)};Gi.prototype.getCoordinates=function(){return this.pts};Gi.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};Gi.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};Gi.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],i)}else if(arguments.length===6){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3],c=arguments[4],f=arguments[5],h=this.pts[o],p=this.pts[a],b=s.pts[u],_=s.pts[c];if(a-o===1&&c-u===1)return f.addIntersections(this.e,o,s.e,u),null;if(this.env1.init(h,p),this.env2.init(b,_),!this.env1.intersects(this.env2))return null;var S=Math.trunc((o+a)/2),R=Math.trunc((u+c)/2);o<S&&(u<R&&this.computeIntersectsForChain(o,S,s,u,R,f),R<c&&this.computeIntersectsForChain(o,S,s,R,c,f)),S<a&&(u<R&&this.computeIntersectsForChain(S,a,s,u,R,f),R<c&&this.computeIntersectsForChain(S,a,s,R,c,f))}};Gi.prototype.getStartIndexes=function(){return this.startIndex};Gi.prototype.computeIntersects=function(e,t){for(var n=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<e.startIndex.length-1;o++)n.computeIntersectsForChain(i,e,o,t)};Gi.prototype.interfaces_=function(){return[]};Gi.prototype.getClass=function(){return Gi};var Vt=function r(){var e=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var n=0;n<3;n++)e._depth[t][n]=r.NULL_VALUE},Fg={NULL_VALUE:{configurable:!0}};Vt.prototype.getDepth=function(e,t){return this._depth[e][t]};Vt.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};Vt.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==Vt.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===Vt.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],a=arguments[1];return this._depth[o][a]===Vt.NULL_VALUE}};Vt.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var i=1;i<3;i++){var o=0;e._depth[t][i]>n&&(o=1),e._depth[t][i]=o}}};Vt.prototype.getDelta=function(e){return this._depth[e][j.RIGHT]-this._depth[e][j.LEFT]};Vt.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?H.EXTERIOR:H.INTERIOR};Vt.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Vt.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var o=t.getLocation(n,i);(o===H.EXTERIOR||o===H.INTERIOR)&&(e.isNull(n,i)?e._depth[n][i]=Vt.depthAtLocation(o):e._depth[n][i]+=Vt.depthAtLocation(o))}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2];u===H.INTERIOR&&this._depth[a][s]++}};Vt.prototype.interfaces_=function(){return[]};Vt.prototype.getClass=function(){return Vt};Vt.depthAtLocation=function(e){return e===H.EXTERIOR?0:e===H.INTERIOR?1:Vt.NULL_VALUE};Fg.NULL_VALUE.get=function(){return-1};Object.defineProperties(Vt,Fg);var ec=function(r){function e(){if(r.call(this),this.pts=null,this._env=null,this.eiList=new li(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Vt,this._depthDelta=0,arguments.length===1){var t=arguments[0];e.call(this,t,null)}else if(arguments.length===2){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var i=new e(n,Le.toLineLabel(this._label));return i},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(n){this._isIsolated=n},e.prototype.setName=function(n){this._name=n},e.prototype.equals=function(n){var i=this;if(!(n instanceof e))return!1;var o=n;if(this.pts.length!==o.pts.length)return!1;for(var a=!0,s=!0,u=this.pts.length,c=0;c<this.pts.length;c++)if(i.pts[c].equals2D(o.pts[c])||(a=!1),i.pts[c].equals2D(o.pts[--u])||(s=!1),!a&&!s)return!1;return!0},e.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},e.prototype.print=function(n){var i=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&n.print(","),n.print(i.pts[o].x+" "+i.pts[o].y);n.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(n){e.updateIM(this._label,n)},e.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(n){var i=this;n.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)n.print(i.pts[o]+" ");n.println("")},e.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Gi(this)),this._mce},e.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new re;for(var i=0;i<this.pts.length;i++)n._env.expandToInclude(n.pts[i])}return this._env},e.prototype.addIntersection=function(n,i,o,a){var s=new q(n.getIntersection(a)),u=i,c=n.getEdgeDistance(o,a),f=u+1;if(f<this.pts.length){var h=this.pts[f];s.equals2D(h)&&(u=f,c=0)}this.eiList.add(s,u,c)},e.prototype.toString=function(){var n=this,i=new Yn;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(n.pts[o].x+" "+n.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},e.prototype.isPointwiseEqual=function(n){var i=this;if(this.pts.length!==n.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(n.pts[o]))return!1;return!0},e.prototype.setDepthDelta=function(n){this._depthDelta=n},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(n,i,o){for(var a=this,s=0;s<n.getIntersectionNum();s++)a.addIntersection(n,i,o,s)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];i.setAtLeastIfValid(n.getLocation(0,j.ON),n.getLocation(1,j.ON),1),n.isArea()&&(i.setAtLeastIfValid(n.getLocation(0,j.LEFT),n.getLocation(1,j.LEFT),2),i.setAtLeastIfValid(n.getLocation(0,j.RIGHT),n.getLocation(1,j.RIGHT),2))}else return r.prototype.updateIM.apply(this,arguments)},e}(Hr),fr=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new pn,this._bufParams=e||null};fr.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};fr.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),i=e.getLabel();t.isPointwiseEqual(e)||(i=new Le(e.getLabel()),i.flip()),n.merge(i);var o=fr.depthDelta(i),a=t.getDepthDelta(),s=a+o;t.setDepthDelta(s)}else this._edgeList.add(e),e.setDepthDelta(fr.depthDelta(e.getLabel()))};fr.prototype.buildSubgraphs=function(e,t){for(var n=new $,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getRightmostCoordinate(),s=new ya(n),u=s.getDepth(a);o.computeDepth(u),o.findResultEdges(),n.add(o),t.add(o.getDirectedEdges(),o.getNodes())}};fr.prototype.createSubgraphs=function(e){for(var t=new $,n=e.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var o=new pr;o.create(i),t.add(o)}}return dn.sort(t,dn.reverseOrder()),t};fr.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};fr.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new hh,n=new $o;return n.setPrecisionModel(e),t.setSegmentIntersector(new Vr(n)),t};fr.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var i=new xr(n,this._bufParams),o=new Qr(e,t,i),a=o.getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this._graph=new We(new Bg),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),u=new Lr(this._geomFact);this.buildSubgraphs(s,u);var c=u.getPolygons();if(c.size()<=0)return this.createEmptyResultGeometry();var f=this._geomFact.buildGeometry(c);return f};fr.prototype.computeNodedEdges=function(e,t){var n=this,i=this.getNoder(t);i.computeNodes(e);for(var o=i.getNodedSubstrings(),a=o.iterator();a.hasNext();){var s=a.next(),u=s.getCoordinates();if(!(u.length===2&&u[0].equals2D(u[1]))){var c=s.getData(),f=new ec(s.getCoordinates(),new Le(c));n.insertUniqueEdge(f)}}};fr.prototype.setNoder=function(e){this._workingNoder=e};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};fr.depthDelta=function(e){var t=e.getLocation(0,j.LEFT),n=e.getLocation(0,j.RIGHT);return t===H.INTERIOR&&n===H.EXTERIOR?1:t===H.EXTERIOR&&n===H.INTERIOR?-1:0};fr.convertSegStrings=function(e){for(var t=new me,n=new $;e.hasNext();){var i=e.next(),o=t.createLineString(i.getCoordinates());n.add(o)}return t.buildGeometry(n)};var po=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=o,this._offsetY=a,this._isScaled=!this.isIntegerPrecision()}};po.prototype.rescale=function(){var e=this;if(ae(arguments[0],ut))for(var t=arguments[0],n=t.iterator();n.hasNext();){var i=n.next();e.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],a=0;a<o.length;a++)o[a].x=o[a].x/e._scaleFactor+e._offsetX,o[a].y=o[a].y/e._scaleFactor+e._offsetY;o.length===2&&o[0].equals2D(o[1])&&Kt.out.println(o)}};po.prototype.scale=function(){var e=this;if(ae(arguments[0],ut)){for(var t=arguments[0],n=new $,i=t.iterator();i.hasNext();){var o=i.next();n.add(new rt(e.scale(o.getCoordinates()),o.getData()))}return n}else if(arguments[0]instanceof Array){for(var a=arguments[0],s=new Array(a.length).fill(null),u=0;u<a.length;u++)s[u]=new q(Math.round((a[u].x-e._offsetX)*e._scaleFactor),Math.round((a[u].y-e._offsetY)*e._scaleFactor),a[u].z);var c=ve.removeRepeatedPoints(s);return c}};po.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};po.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};po.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};po.prototype.interfaces_=function(){return[zo]};po.prototype.getClass=function(){return po};var Hn=function(){this._li=new $o,this._segStrings=null;var e=arguments[0];this._segStrings=e},zg={fact:{configurable:!0}};Hn.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),i=n.getCoordinates();e.checkEndPtVertexIntersections(i[0],e._segStrings),e.checkEndPtVertexIntersections(i[i.length-1],e._segStrings)}else if(arguments.length===2){for(var o=arguments[0],a=arguments[1],s=a.iterator();s.hasNext();)for(var u=s.next(),c=u.getCoordinates(),f=1;f<c.length-1;f++)if(c[f].equals(o))throw new zi("found endpt/interior pt intersection at index "+f+" :pt "+o)}};Hn.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();e.checkInteriorIntersections(n,o)}else if(arguments.length===2)for(var a=arguments[0],s=arguments[1],u=a.getCoordinates(),c=s.getCoordinates(),f=0;f<u.length-1;f++)for(var h=0;h<c.length-1;h++)e.checkInteriorIntersections(a,f,s,h);else if(arguments.length===4){var p=arguments[0],b=arguments[1],_=arguments[2],S=arguments[3];if(p===_&&b===S)return null;var R=p.getCoordinates()[b],D=p.getCoordinates()[b+1],v=_.getCoordinates()[S],E=_.getCoordinates()[S+1];if(this._li.computeIntersection(R,D,v,E),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,R,D)||this.hasInteriorIntersection(this._li,v,E)))throw new zi("found non-noded intersection at "+R+"-"+D+" and "+v+"-"+E)}};Hn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Hn.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length-2;a++)e.checkCollapse(o[a],o[a+1],o[a+2])};Hn.prototype.hasInteriorIntersection=function(e,t,n){for(var i=0;i<e.getIntersectionNum();i++){var o=e.getIntersection(i);if(!(o.equals(t)||o.equals(n)))return!0}return!1};Hn.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new zi("found non-noded collapse at "+Hn.fact.createLineString([e,t,n]))};Hn.prototype.interfaces_=function(){return[]};Hn.prototype.getClass=function(){return Hn};zg.fact.get=function(){return new me};Object.defineProperties(Hn,zg);var Sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new He("Scale factor must be non-zero");t!==1&&(this._pt=new q(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new q,this._p1Scaled=new q),this.initCorners(this._pt)},Ug={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Sr.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),i=Math.max(e.x,t.x),o=Math.min(e.y,t.y),a=Math.max(e.y,t.y),s=this._maxx<n||this._minx>i||this._maxy<o||this._miny>a;if(s)return!1;var u=this.intersectsToleranceSquare(e,t);return he.isTrue(!(s&&u),"Found bad envelope test"),u};Sr.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new q(this._maxx,this._maxy),this._corner[1]=new q(this._minx,this._maxy),this._corner[2]=new q(this._minx,this._miny),this._corner[3]=new q(this._maxx,this._miny)};Sr.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Sr.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};Sr.prototype.getCoordinate=function(){return this._originalPt};Sr.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};Sr.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=Sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new re(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};Sr.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Sr.prototype.intersectsToleranceSquare=function(e,t){var n=!1,i=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&i||e.equals(this._pt)||t.equals(this._pt))};Sr.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),i=e.getCoordinate(t+1);return this.intersects(n,i)?(e.addIntersection(this.getCoordinate(),t),!0):!1};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Ug.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Sr,Ug);var ou=function(){this.tempEnv1=new re,this.selectedSegment=new ie};ou.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}};ou.prototype.interfaces_=function(){return[]};ou.prototype.getClass=function(){return ou};var rs=function(){this._index=null;var e=arguments[0];this._index=e},qg={HotPixelSnapAction:{configurable:!0}};rs.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2],o=t.getSafeEnvelope(),a=new Hg(t,n,i);return this._index.query(o,{interfaces_:function(){return[fo]},visitItem:function(s){var u=s;u.select(o,a)}}),a.isNodeAdded()}};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};qg.HotPixelSnapAction.get=function(){return Hg};Object.defineProperties(rs,qg);var Hg=function(r){function e(){r.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=t,this._parentEdge=n,this._hotPixelVertexIndex=i}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1],o=n.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return r.prototype.select.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ou),_a=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new $};_a.prototype.processIntersections=function(e,t,n,i){var o=this;if(e===n&&t===i)return null;var a=e.getCoordinates()[t],s=e.getCoordinates()[t+1],u=n.getCoordinates()[i],c=n.getCoordinates()[i+1];if(this._li.computeIntersection(a,s,u,c),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var f=0;f<this._li.getIntersectionNum();f++)o._interiorIntersections.add(o._li.getIntersection(f));e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)}};_a.prototype.isDone=function(){return!1};_a.prototype.getInteriorIntersections=function(){return this._interiorIntersections};_a.prototype.interfaces_=function(){return[qo]};_a.prototype.getClass=function(){return _a};var hi=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new $o,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};hi.prototype.checkCorrectness=function(e){var t=rt.getNodedSubstrings(e),n=new Hn(t);try{n.checkValid()}catch(i){if(i instanceof Cg)i.printStackTrace();else throw i}finally{}};hi.prototype.getNodedSubstrings=function(){return rt.getNodedSubstrings(this._nodedSegStrings)};hi.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};hi.prototype.findInteriorIntersections=function(e,t){var n=new _a(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};hi.prototype.computeVertexSnaps=function(){var e=this;if(ae(arguments[0],ut))for(var t=arguments[0],n=t.iterator();n.hasNext();){var i=n.next();e.computeVertexSnaps(i)}else if(arguments[0]instanceof rt)for(var o=arguments[0],a=o.getCoordinates(),s=0;s<a.length;s++){var u=new Sr(a[s],e._scaleFactor,e._li),c=e._pointSnapper.snap(u,o,s);c&&o.addIntersection(a[s],s)}};hi.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new hh,this._pointSnapper=new rs(this._noder.getIndex()),this.snapRound(e,this._li)};hi.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next(),o=new Sr(i,t._scaleFactor,t._li);t._pointSnapper.snap(o)}};hi.prototype.interfaces_=function(){return[zo]};hi.prototype.getClass=function(){return hi};var Gt=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ae,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},xs={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Gt.prototype.bufferFixedPrecision=function(e){var t=new po(new hi(new Me(1)),e.getScale()),n=new fr(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};Gt.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=Gt.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(a){if(a instanceof qi)e._saveException=a;else throw a}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],i=Gt.precisionScaleFactor(this._argGeom,this._distance,n),o=new Me(i);this.bufferFixedPrecision(o)}};Gt.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Me.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};Gt.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};Gt.prototype.bufferOriginalPrecision=function(){try{var e=new fr(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof zi)this._saveException=t;else throw t}finally{}};Gt.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};Gt.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};Gt.prototype.interfaces_=function(){return[]};Gt.prototype.getClass=function(){return Gt};Gt.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Gt(e),i=n.getResultGeometry(t);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof oe&&typeof arguments[1]=="number"){var o=arguments[0],a=arguments[1],s=arguments[2],u=new Gt(o);u.setQuadrantSegments(s);var c=u.getResultGeometry(a);return c}else if(arguments[2]instanceof Ae&&arguments[0]instanceof oe&&typeof arguments[1]=="number"){var f=arguments[0],h=arguments[1],p=arguments[2],b=new Gt(f,p),_=b.getResultGeometry(h);return _}}else if(arguments.length===4){var S=arguments[0],R=arguments[1],D=arguments[2],v=arguments[3],E=new Gt(S);E.setQuadrantSegments(D),E.setEndCapStyle(v);var M=E.getResultGeometry(R);return M}};Gt.precisionScaleFactor=function(e,t,n){var i=e.getEnvelopeInternal(),o=qr.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),a=t>0?t:0,s=o+2*a,u=Math.trunc(Math.log(s)/Math.log(10)+1),c=n-u,f=Math.pow(10,c);return f};xs.CAP_ROUND.get=function(){return Ae.CAP_ROUND};xs.CAP_BUTT.get=function(){return Ae.CAP_FLAT};xs.CAP_FLAT.get=function(){return Ae.CAP_FLAT};xs.CAP_SQUARE.get=function(){return Ae.CAP_SQUARE};xs.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Gt,xs);var sr=function(){this._pt=[new q,new q],this._distance=ue.NaN,this._isNull=!0};sr.prototype.getCoordinates=function(){return this._pt};sr.prototype.getCoordinate=function(e){return this._pt[e]};sr.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i<this._distance&&this.initialize(t,n,i)}};sr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};sr.prototype.getDistance=function(){return this._distance};sr.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i>this._distance&&this.initialize(t,n,i)}};sr.prototype.interfaces_=function(){return[]};sr.prototype.getClass=function(){return sr};var ti=function(){};ti.prototype.interfaces_=function(){return[]};ti.prototype.getClass=function(){return ti};ti.computeDistance=function(){if(arguments[2]instanceof sr&&arguments[0]instanceof Xe&&arguments[1]instanceof q)for(var e=arguments[0],t=arguments[1],n=arguments[2],i=e.getCoordinates(),o=new ie,a=0;a<i.length-1;a++){o.setCoordinates(i[a],i[a+1]);var s=o.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof sr&&arguments[0]instanceof ht&&arguments[1]instanceof q){var u=arguments[0],c=arguments[1],f=arguments[2];ti.computeDistance(u.getExteriorRing(),c,f);for(var h=0;h<u.getNumInteriorRing();h++)ti.computeDistance(u.getInteriorRingN(h),c,f)}else if(arguments[2]instanceof sr&&arguments[0]instanceof oe&&arguments[1]instanceof q){var p=arguments[0],b=arguments[1],_=arguments[2];if(p instanceof Xe)ti.computeDistance(p,b,_);else if(p instanceof ht)ti.computeDistance(p,b,_);else if(p instanceof dr)for(var S=p,R=0;R<S.getNumGeometries();R++){var D=S.getGeometryN(R);ti.computeDistance(D,b,_)}else _.setMinimum(p.getCoordinate(),b)}else if(arguments[2]instanceof sr&&arguments[0]instanceof ie&&arguments[1]instanceof q){var v=arguments[0],E=arguments[1],M=arguments[2],O=v.closestPoint(E);M.setMinimum(O,E)}};var Go=function(e){this._maxPtDist=new sr,this._inputGeom=e||null},dh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Go.prototype.computeMaxMidpointDistance=function(e){var t=new go(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Go.prototype.computeMaxVertexDistance=function(e){var t=new ba(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Go.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Go.prototype.getDistancePoints=function(){return this._maxPtDist};Go.prototype.interfaces_=function(){return[]};Go.prototype.getClass=function(){return Go};dh.MaxPointDistanceFilter.get=function(){return ba};dh.MaxMidpointDistanceFilter.get=function(){return go};Object.defineProperties(Go,dh);var ba=function(e){this._maxPtDist=new sr,this._minPtDist=new sr,this._geom=e||null};ba.prototype.filter=function(e){this._minPtDist.initialize(),ti.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ba.prototype.getMaxPointDistance=function(){return this._maxPtDist};ba.prototype.interfaces_=function(){return[si]};ba.prototype.getClass=function(){return ba};var go=function(e){this._maxPtDist=new sr,this._minPtDist=new sr,this._geom=e||null};go.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),i=e.getCoordinate(t),o=new q((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),ti.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};go.prototype.isDone=function(){return!1};go.prototype.isGeometryChanged=function(){return!1};go.prototype.getMaxPointDistance=function(){return this._maxPtDist};go.prototype.interfaces_=function(){return[ln]};go.prototype.getClass=function(){return go};var Di=function(e){this._comps=e||null};Di.prototype.filter=function(e){e instanceof ht&&this._comps.add(e)};Di.prototype.interfaces_=function(){return[Bn]};Di.prototype.getClass=function(){return Di};Di.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return Di.getPolygons(e,new $)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof ht?n.add(t):t instanceof dr&&t.apply(new Di(n)),n}};var qt=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};qt.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof ui){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Xe&&this._lines.add(e)};qt.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};qt.prototype.interfaces_=function(){return[Ui]};qt.prototype.getClass=function(){return qt};qt.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(qt.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(qt.getLines(t,n))}};qt.getLines=function(){if(arguments.length===1){var e=arguments[0];return qt.getLines(e,!1)}else if(arguments.length===2){if(ae(arguments[0],ut)&&ae(arguments[1],ut)){for(var t=arguments[0],n=arguments[1],i=t.iterator();i.hasNext();){var o=i.next();qt.getLines(o,n)}return n}else if(arguments[0]instanceof oe&&typeof arguments[1]=="boolean"){var a=arguments[0],s=arguments[1],u=new $;return a.apply(new qt(u,s)),u}else if(arguments[0]instanceof oe&&ae(arguments[1],ut)){var c=arguments[0],f=arguments[1];return c instanceof Xe?f.add(c):c.apply(new qt(f)),f}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&ae(arguments[0],ut)&&ae(arguments[1],ut)){for(var h=arguments[0],p=arguments[1],b=arguments[2],_=h.iterator();_.hasNext();){var S=_.next();qt.getLines(S,p,b)}return p}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof oe&&ae(arguments[1],ut)){var R=arguments[0],D=arguments[1],v=arguments[2];return R.apply(new qt(D,v)),D}}};var gn=function(){if(this._boundaryRule=$r.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var e=arguments[0];if(e===null)throw new He("Rule must be non-null");this._boundaryRule=e}}};gn.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof q&&arguments[1]instanceof ht){var t=arguments[0],n=arguments[1];if(n.isEmpty())return H.EXTERIOR;var i=n.getExteriorRing(),o=this.locateInPolygonRing(t,i);if(o===H.EXTERIOR)return H.EXTERIOR;if(o===H.BOUNDARY)return H.BOUNDARY;for(var a=0;a<n.getNumInteriorRing();a++){var s=n.getInteriorRingN(a),u=e.locateInPolygonRing(t,s);if(u===H.INTERIOR)return H.EXTERIOR;if(u===H.BOUNDARY)return H.BOUNDARY}return H.INTERIOR}else if(arguments[0]instanceof q&&arguments[1]instanceof Xe){var c=arguments[0],f=arguments[1];if(!f.getEnvelopeInternal().intersects(c))return H.EXTERIOR;var h=f.getCoordinates();return!f.isClosed()&&(c.equals(h[0])||c.equals(h[h.length-1]))?H.BOUNDARY:ee.isOnLine(c,h)?H.INTERIOR:H.EXTERIOR}else if(arguments[0]instanceof q&&arguments[1]instanceof Pr){var p=arguments[0],b=arguments[1],_=b.getCoordinate();return _.equals2D(p)?H.INTERIOR:H.EXTERIOR}};gn.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?ee.locatePointInRing(e,t.getCoordinates()):H.EXTERIOR};gn.prototype.intersects=function(e,t){return this.locate(e,t)!==H.EXTERIOR};gn.prototype.updateLocationInfo=function(e){e===H.INTERIOR&&(this._isIn=!0),e===H.BOUNDARY&&this._numBoundaries++};gn.prototype.computeLocation=function(e,t){var n=this;if(t instanceof Pr&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Xe)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof ht)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Fo)for(var i=t,o=0;o<i.getNumGeometries();o++){var a=i.getGeometryN(o);n.updateLocationInfo(n.locateInternal(e,a))}else if(t instanceof ii)for(var s=t,u=0;u<s.getNumGeometries();u++){var c=s.getGeometryN(u);n.updateLocationInfo(n.locateInternal(e,c))}else if(t instanceof dr)for(var f=new oi(t);f.hasNext();){var h=f.next();h!==t&&n.computeLocation(e,h)}};gn.prototype.locate=function(e,t){return t.isEmpty()?H.EXTERIOR:t instanceof Xe?this.locateInternal(e,t):t instanceof ht?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?H.BOUNDARY:this._numBoundaries>0||this._isIn?H.INTERIOR:H.EXTERIOR)};gn.prototype.interfaces_=function(){return[]};gn.prototype.getClass=function(){return gn};var ur=function r(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var e=arguments[0],t=arguments[1];r.call(this,e,r.INSIDE_AREA,t)}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Gg={INSIDE_AREA:{configurable:!0}};ur.prototype.isInsideArea=function(){return this._segIndex===ur.INSIDE_AREA};ur.prototype.getCoordinate=function(){return this._pt};ur.prototype.getGeometryComponent=function(){return this._component};ur.prototype.getSegmentIndex=function(){return this._segIndex};ur.prototype.interfaces_=function(){return[]};ur.prototype.getClass=function(){return ur};Gg.INSIDE_AREA.get=function(){return-1};Object.defineProperties(ur,Gg);var oo=function(e){this._pts=e||null};oo.prototype.filter=function(e){e instanceof Pr&&this._pts.add(e)};oo.prototype.interfaces_=function(){return[Bn]};oo.prototype.getClass=function(){return oo};oo.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof Pr?dn.singletonList(e):oo.getPoints(e,new $)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Pr?n.add(t):t instanceof dr&&t.apply(new oo(n)),n}};var wa=function(){this._locations=null;var e=arguments[0];this._locations=e};wa.prototype.filter=function(e){(e instanceof Pr||e instanceof Xe||e instanceof ht)&&this._locations.add(new ur(e,0,e.getCoordinate()))};wa.prototype.interfaces_=function(){return[Bn]};wa.prototype.getClass=function(){return wa};wa.getLocations=function(e){var t=new $;return e.apply(new wa(t)),t};var Wt=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new gn,this._minDistanceLocation=null,this._minDistance=ue.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=o}};Wt.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=1-n,a=Di.getPolygons(this._geom[n]);if(a.size()>0){var s=wa.getLocations(this._geom[o]);if(this.computeContainmentDistance(s,a,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&ae(arguments[0],un)&&ae(arguments[1],un)){for(var u=arguments[0],c=arguments[1],f=arguments[2],h=0;h<u.size();h++)for(var p=u.get(h),b=0;b<c.size();b++)if(e.computeContainmentDistance(p,c.get(b),f),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ur&&arguments[1]instanceof ht){var _=arguments[0],S=arguments[1],R=arguments[2],D=_.getCoordinate();if(H.EXTERIOR!==this._ptLocator.locate(D,S))return this._minDistance=0,R[0]=_,R[1]=new ur(S,D),null}}};Wt.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var i=this,o=0;o<e.size();o++)for(var a=e.get(o),s=0;s<t.size();s++){var u=t.get(s);if(i.computeMinDistance(a,u,n),i._minDistance<=i._terminateDistance)return null}};Wt.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=qt.getLines(this._geom[0]),n=qt.getLines(this._geom[1]),i=oo.getPoints(this._geom[0]),o=oo.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,o,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,i,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(i,o,e),this.updateMinDistance(e,!1)};Wt.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Wt.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};Wt.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};Wt.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Xe&&arguments[1]instanceof Pr){var t=arguments[0],n=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var o=t.getCoordinates(),a=n.getCoordinate(),s=0;s<o.length-1;s++){var u=ee.distancePointLine(a,o[s],o[s+1]);if(u<e._minDistance){e._minDistance=u;var c=new ie(o[s],o[s+1]),f=c.closestPoint(a);i[0]=new ur(t,s,f),i[1]=new ur(n,0,a)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Xe&&arguments[1]instanceof Xe){var h=arguments[0],p=arguments[1],b=arguments[2];if(h.getEnvelopeInternal().distance(p.getEnvelopeInternal())>this._minDistance)return null;for(var _=h.getCoordinates(),S=p.getCoordinates(),R=0;R<_.length-1;R++)for(var D=0;D<S.length-1;D++){var v=ee.distanceLineLine(_[R],_[R+1],S[D],S[D+1]);if(v<e._minDistance){e._minDistance=v;var E=new ie(_[R],_[R+1]),M=new ie(S[D],S[D+1]),O=E.closestPoints(M);b[0]=new ur(h,R,O[0]),b[1]=new ur(p,D,O[1])}if(e._minDistance<=e._terminateDistance)return null}}}};Wt.prototype.computeMinDistancePoints=function(e,t,n){for(var i=this,o=0;o<e.size();o++)for(var a=e.get(o),s=0;s<t.size();s++){var u=t.get(s),c=a.getCoordinate().distance(u.getCoordinate());if(c<i._minDistance&&(i._minDistance=c,n[0]=new ur(a,0,a.getCoordinate()),n[1]=new ur(u,0,u.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};Wt.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new He("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Wt.prototype.computeMinDistanceLines=function(e,t,n){for(var i=this,o=0;o<e.size();o++)for(var a=e.get(o),s=0;s<t.size();s++){var u=t.get(s);if(i.computeMinDistance(a,u,n),i._minDistance<=i._terminateDistance)return null}};Wt.prototype.interfaces_=function(){return[]};Wt.prototype.getClass=function(){return Wt};Wt.distance=function(e,t){var n=new Wt(e,t);return n.distance()};Wt.isWithinDistance=function(e,t,n){var i=new Wt(e,t,n);return i.distance()<=n};Wt.nearestPoints=function(e,t){var n=new Wt(e,t);return n.nearestPoints()};var Zt=function(){this._pt=[new q,new q],this._distance=ue.NaN,this._isNull=!0};Zt.prototype.getCoordinates=function(){return this._pt};Zt.prototype.getCoordinate=function(e){return this._pt[e]};Zt.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i<this._distance&&this.initialize(t,n,i)}};Zt.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};Zt.prototype.toString=function(){return fn.toLineString(this._pt[0],this._pt[1])};Zt.prototype.getDistance=function(){return this._distance};Zt.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var i=t.distance(n);i>this._distance&&this.initialize(t,n,i)}};Zt.prototype.interfaces_=function(){return[]};Zt.prototype.getClass=function(){return Zt};var Mn=function(){};Mn.prototype.interfaces_=function(){return[]};Mn.prototype.getClass=function(){return Mn};Mn.computeDistance=function(){if(arguments[2]instanceof Zt&&arguments[0]instanceof Xe&&arguments[1]instanceof q)for(var e=arguments[0],t=arguments[1],n=arguments[2],i=new ie,o=e.getCoordinates(),a=0;a<o.length-1;a++){i.setCoordinates(o[a],o[a+1]);var s=i.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof Zt&&arguments[0]instanceof ht&&arguments[1]instanceof q){var u=arguments[0],c=arguments[1],f=arguments[2];Mn.computeDistance(u.getExteriorRing(),c,f);for(var h=0;h<u.getNumInteriorRing();h++)Mn.computeDistance(u.getInteriorRingN(h),c,f)}else if(arguments[2]instanceof Zt&&arguments[0]instanceof oe&&arguments[1]instanceof q){var p=arguments[0],b=arguments[1],_=arguments[2];if(p instanceof Xe)Mn.computeDistance(p,b,_);else if(p instanceof ht)Mn.computeDistance(p,b,_);else if(p instanceof dr)for(var S=p,R=0;R<S.getNumGeometries();R++){var D=S.getGeometryN(R);Mn.computeDistance(D,b,_)}else _.setMinimum(p.getCoordinate(),b)}else if(arguments[2]instanceof Zt&&arguments[0]instanceof ie&&arguments[1]instanceof q){var v=arguments[0],E=arguments[1],M=arguments[2],O=v.closestPoint(E);M.setMinimum(O,E)}};var jr=function(){this._g0=null,this._g1=null,this._ptDist=new Zt,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},ph={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};jr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};jr.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new He("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};jr.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};jr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};jr.prototype.computeOrientedDistance=function(e,t,n){var i=new Ea(t);if(e.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new mo(t,this._densifyFrac);e.apply(o),n.setMaximum(o.getMaxPointDistance())}};jr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};jr.prototype.interfaces_=function(){return[]};jr.prototype.getClass=function(){return jr};jr.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new jr(e,t);return n.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2],s=new jr(i,o);return s.setDensifyFraction(a),s.distance()}};ph.MaxPointDistanceFilter.get=function(){return Ea};ph.MaxDensifiedByFractionDistanceFilter.get=function(){return mo};Object.defineProperties(jr,ph);var Ea=function(){this._maxPtDist=new Zt,this._minPtDist=new Zt,this._euclideanDist=new Mn,this._geom=null;var e=arguments[0];this._geom=e};Ea.prototype.filter=function(e){this._minPtDist.initialize(),Mn.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Ea.prototype.getMaxPointDistance=function(){return this._maxPtDist};Ea.prototype.interfaces_=function(){return[si]};Ea.prototype.getClass=function(){return Ea};var mo=function(){this._maxPtDist=new Zt,this._minPtDist=new Zt,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};mo.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var i=e.getCoordinate(t-1),o=e.getCoordinate(t),a=(o.x-i.x)/this._numSubSegs,s=(o.y-i.y)/this._numSubSegs,u=0;u<this._numSubSegs;u++){var c=i.x+u*a,f=i.y+u*s,h=new q(c,f);n._minPtDist.initialize(),Mn.computeDistance(n._geom,h,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};mo.prototype.isDone=function(){return!1};mo.prototype.isGeometryChanged=function(){return!1};mo.prototype.getMaxPointDistance=function(){return this._maxPtDist};mo.prototype.interfaces_=function(){return[ln]};mo.prototype.getClass=function(){return mo};var Mr=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},gh={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Mr.prototype.checkMaximumDistance=function(e,t,n){var i=new jr(t,e);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=e.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+fn.toLineString(o[0],o[1])+")"}};Mr.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Mr.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Mr.VERBOSE&&Kt.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Mr.prototype.checkNegativeValid=function(){if(!(this._input instanceof ht||this._input instanceof ii||this._input instanceof dr))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};Mr.prototype.getErrorIndicator=function(){return this._errorIndicator};Mr.prototype.checkMinimumDistance=function(e,t,n){var i=new Wt(e,t,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+fn.toLineString(o[0],o[1])+" )"}};Mr.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};Mr.prototype.getErrorLocation=function(){return this._errorLocation};Mr.prototype.getPolygonLines=function(e){for(var t=new $,n=new qt(t),i=Di.getPolygons(e),o=i.iterator();o.hasNext();){var a=o.next();a.apply(n)}return e.getFactory().buildGeometry(t)};Mr.prototype.getErrorMessage=function(){return this._errMsg};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};gh.VERBOSE.get=function(){return!1};gh.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Mr,gh);var Jt=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},mh={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Jt.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Jt.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*Jt.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new re(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new re(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};Jt.prototype.checkDistance=function(){var e=new Mr(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};Jt.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Jt.prototype.checkPolygonal=function(){this._result instanceof ht||this._result instanceof ii||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Jt.prototype.getErrorIndicator=function(){return this._errorIndicator};Jt.prototype.getErrorLocation=function(){return this._errorLocation};Jt.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Jt.prototype.report=function(e){if(!Jt.VERBOSE)return null;Kt.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};Jt.prototype.getErrorMessage=function(){return this._errorMsg};Jt.prototype.interfaces_=function(){return[]};Jt.prototype.getClass=function(){return Jt};Jt.isValidMsg=function(e,t,n){var i=new Jt(e,t,n);return i.isValid()?null:i.getErrorMessage()};Jt.isValid=function(e,t,n){var i=new Jt(e,t,n);return!!i.isValid()};mh.VERBOSE.get=function(){return!1};mh.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Jt,mh);var Gn=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Gn.prototype.getCoordinates=function(){return this._pts};Gn.prototype.size=function(){return this._pts.length};Gn.prototype.getCoordinate=function(e){return this._pts[e]};Gn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Gn.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:va.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Gn.prototype.setData=function(e){this._data=e};Gn.prototype.getData=function(){return this._data};Gn.prototype.toString=function(){return fn.toLineString(new Qe(this._pts))};Gn.prototype.interfaces_=function(){return[fi]};Gn.prototype.getClass=function(){return Gn};var yt=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new $,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};yt.prototype.getInteriorIntersection=function(){return this._interiorIntersection};yt.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};yt.prototype.getIntersectionSegments=function(){return this._intSegments};yt.prototype.count=function(){return this._intersectionCount};yt.prototype.getIntersections=function(){return this._intersections};yt.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};yt.prototype.setKeepIntersections=function(e){this._keepIntersections=e};yt.prototype.processIntersections=function(e,t,n,i){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(e,t)||this.isEndSegment(n,i);if(!o)return null}var a=e.getCoordinates()[t],s=e.getCoordinates()[t+1],u=n.getCoordinates()[i],c=n.getCoordinates()[i+1];this._li.computeIntersection(a,s,u,c),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=a,this._intSegments[1]=s,this._intSegments[2]=u,this._intSegments[3]=c,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};yt.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};yt.prototype.hasIntersection=function(){return this._interiorIntersection!==null};yt.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};yt.prototype.interfaces_=function(){return[qo]};yt.prototype.getClass=function(){return yt};yt.createAllIntersectionsFinder=function(e){var t=new yt(e);return t.setFindAllIntersections(!0),t};yt.createAnyIntersectionFinder=function(e){return new yt(e)};yt.createIntersectionCounter=function(e){var t=new yt(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var mn=function(){this._li=new $o,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};mn.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};mn.prototype.getIntersections=function(){return this._segInt.getIntersections()};mn.prototype.isValid=function(){return this.execute(),this._isValid};mn.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};mn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new yt(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new hh;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};mn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new qi(this.getErrorMessage(),this._segInt.getInteriorIntersection())};mn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+fn.toLineString(e[0],e[1])+" and "+fn.toLineString(e[2],e[3])};mn.prototype.interfaces_=function(){return[]};mn.prototype.getClass=function(){return mn};mn.computeIntersections=function(e){var t=new mn(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Vo=function r(){this._nv=null;var e=arguments[0];this._nv=new mn(r.toSegmentStrings(e))};Vo.prototype.checkValid=function(){this._nv.checkValid()};Vo.prototype.interfaces_=function(){return[]};Vo.prototype.getClass=function(){return Vo};Vo.toSegmentStrings=function(e){for(var t=new $,n=e.iterator();n.hasNext();){var i=n.next();t.add(new Gn(i.getCoordinates(),i))}return t};Vo.checkValid=function(e){var t=new Vo(e);t.checkValid()};var xa=function(e){this._mapOp=e};xa.prototype.map=function(e){for(var t=this,n=new $,i=0;i<e.getNumGeometries();i++){var o=t._mapOp.map(e.getGeometryN(i));o.isEmpty()||n.add(o)}return e.getFactory().createGeometryCollection(me.toGeometryArray(n))};xa.prototype.interfaces_=function(){return[]};xa.prototype.getClass=function(){return xa};xa.map=function(e,t){var n=new xa(t);return n.map(e)};var Vn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new $,this._resultLineList=new $;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Vn.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();t.collectLineEdge(i,e,t._lineEdgesList),t.collectBoundaryTouchEdge(i,e,t._lineEdgesList)}};Vn.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};Vn.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};Vn.prototype.collectLineEdge=function(e,t,n){var i=e.getLabel(),o=e.getEdge();e.isLineEdge()&&!e.isVisited()&&fe.isResultOfOp(i,t)&&!o.isCovered()&&(n.add(o),e.setVisitedEdge(!0))};Vn.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),a=o.getEdge();if(o.isLineEdge()&&!a.isCoveredSet()){var s=e._op.isCoveredByA(o.getCoordinate());a.setCovered(s)}}};Vn.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var i=n.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?t.labelIsolatedLine(i,0):t.labelIsolatedLine(i,1))}};Vn.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var i=n.next(),o=t._geometryFactory.createLineString(i.getCoordinates());t._resultLineList.add(o),i.setInResult(!0)}};Vn.prototype.collectBoundaryTouchEdge=function(e,t,n){var i=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;he.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),fe.isResultOfOp(i,t)&&t===fe.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};Vn.prototype.interfaces_=function(){return[]};Vn.prototype.getClass=function(){return Vn};var Sa=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new $;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Sa.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Sa.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||e===fe.INTERSECTION)){var o=i.getLabel();fe.isResultOfOp(o,e)&&t.filterCoveredNodeToPoint(i)}}};Sa.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Sa.prototype.interfaces_=function(){return[]};Sa.prototype.getClass=function(){return Sa};var Cr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Cr.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};Cr.prototype.transformPolygon=function(e,t){var n=this,i=!0,o=this.transformLinearRing(e.getExteriorRing(),e);(o===null||!(o instanceof ui)||o.isEmpty())&&(i=!1);for(var a=new $,s=0;s<e.getNumInteriorRing();s++){var u=n.transformLinearRing(e.getInteriorRingN(s),e);u===null||u.isEmpty()||(u instanceof ui||(i=!1),a.add(u))}if(i)return this._factory.createPolygon(o,a.toArray([]));var c=new $;return o!==null&&c.add(o),c.addAll(a),this._factory.buildGeometry(c)};Cr.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};Cr.prototype.getInputGeometry=function(){return this._inputGeom};Cr.prototype.transformMultiLineString=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transformLineString(e.getGeometryN(o),e);a!==null&&(a.isEmpty()||i.add(a))}return this._factory.buildGeometry(i)};Cr.prototype.transformCoordinates=function(e,t){return this.copy(e)};Cr.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};Cr.prototype.transformMultiPoint=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transformPoint(e.getGeometryN(o),e);a!==null&&(a.isEmpty()||i.add(a))}return this._factory.buildGeometry(i)};Cr.prototype.transformMultiPolygon=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transformPolygon(e.getGeometryN(o),e);a!==null&&(a.isEmpty()||i.add(a))}return this._factory.buildGeometry(i)};Cr.prototype.copy=function(e){return e.copy()};Cr.prototype.transformGeometryCollection=function(e,t){for(var n=this,i=new $,o=0;o<e.getNumGeometries();o++){var a=n.transform(e.getGeometryN(o));a!==null&&(n._pruneEmptyGeometry&&a.isEmpty()||i.add(a))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(i)):this._factory.buildGeometry(i)};Cr.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof Pr)return this.transformPoint(e,null);if(e instanceof $a)return this.transformMultiPoint(e,null);if(e instanceof ui)return this.transformLinearRing(e,null);if(e instanceof Xe)return this.transformLineString(e,null);if(e instanceof Fo)return this.transformMultiLineString(e,null);if(e instanceof ht)return this.transformPolygon(e,null);if(e instanceof ii)return this.transformMultiPolygon(e,null);if(e instanceof dr)return this.transformGeometryCollection(e,null);throw new He("Unknown Geometry subtype: "+e.getClass().getName())};Cr.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};Cr.prototype.interfaces_=function(){return[]};Cr.prototype.getClass=function(){return Cr};var di=function r(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ie,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Xe&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];r.call(this,e.getCoordinates(),t)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=r.isClosed(n),this._snapTolerance=i}};di.prototype.snapVertices=function(e,t){for(var n=this,i=this._isClosed?e.size()-1:e.size(),o=0;o<i;o++){var a=e.get(o),s=n.findSnapForVertex(a,t);s!==null&&(e.set(o,new q(s)),o===0&&n._isClosed&&e.set(e.size()-1,new q(s)))}};di.prototype.findSnapForVertex=function(e,t){for(var n=this,i=0;i<t.length;i++){if(e.equals2D(t[i]))return null;if(e.distance(t[i])<n._snapTolerance)return t[i]}return null};di.prototype.snapTo=function(e){var t=new mu(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};di.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var i=t.length;t[0].equals2D(t[t.length-1])&&(i=t.length-1);for(var o=0;o<i;o++){var a=t[o],s=n.findSegmentIndexToSnap(a,e);s>=0&&e.add(s+1,new q(a),!1)}};di.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,i=ue.MAX_VALUE,o=-1,a=0;a<t.size()-1;a++){if(n._seg.p0=t.get(a),n._seg.p1=t.get(a+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(e);s<n._snapTolerance&&s<i&&(i=s,o=a)}return o};di.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};di.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var et=function(e){this._srcGeom=e||null},Vg={SNAP_PRECISION_FACTOR:{configurable:!0}};et.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),i=new Kg(t,n);return i.transform(this._srcGeom)};et.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),i=new Kg(e,n,!0),o=i.transform(this._srcGeom),a=o;return t&&ae(a,co)&&(a=o.buffer(0)),a};et.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};et.prototype.extractTargetCoordinates=function(e){for(var t=new kn,n=e.getCoordinates(),i=0;i<n.length;i++)t.add(n[i]);return t.toArray(new Array(0).fill(null))};et.prototype.computeMinimumSegmentLength=function(e){for(var t=ue.MAX_VALUE,n=0;n<e.length-1;n++){var i=e[n].distance(e[n+1]);i<t&&(t=i)}return t};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.snap=function(e,t,n){var i=new Array(2).fill(null),o=new et(e);i[0]=o.snapTo(t,n);var a=new et(t);return i[1]=a.snapTo(i[0],n),i};et.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=et.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===Me.FIXED){var i=1/n.getScale()*2/1.415;i>t&&(t=i)}return t}else if(arguments.length===2){var o=arguments[0],a=arguments[1];return Math.min(et.computeOverlaySnapTolerance(o),et.computeOverlaySnapTolerance(a))}};et.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),i=n*et.SNAP_PRECISION_FACTOR;return i};et.snapToSelf=function(e,t,n){var i=new et(e);return i.snapToSelf(t,n)};Vg.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(et,Vg);var Kg=function(r){function e(t,n,i){r.call(this),this._snapTolerance=t||null,this._snapPts=n||null,this._isSelfSnap=i!==void 0?i:!1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(n,i){var o=new di(n,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},e.prototype.transformCoordinates=function(n,i){var o=n.toCoordinateArray(),a=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(a)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cr),ar=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ar.prototype.getCommon=function(){return ue.longBitsToDouble(this._commonBits)};ar.prototype.add=function(e){var t=ue.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=ar.signExpBits(this._commonBits),this._isFirst=!1,null;var n=ar.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=ar.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=ar.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};ar.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=ue.longBitsToDouble(e),n=ue.toBinaryString(e),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),a=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+t+" ]";return a}};ar.prototype.interfaces_=function(){return[]};ar.prototype.getClass=function(){return ar};ar.getBit=function(e,t){var n=1<<t;return e&n?1:0};ar.signExpBits=function(e){return e>>52};ar.zeroLowerBits=function(e,t){var n=(1<<t)-1,i=~n,o=e&i;return o};ar.numCommonMostSigMantissaBits=function(e,t){for(var n=0,i=52;i>=0;i--){if(ar.getBit(e,i)!==ar.getBit(t,i))return n;n++}return 52};var vo=function(){this._commonCoord=null,this._ccFilter=new Ca},vh={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};vo.prototype.addCommonBits=function(e){var t=new yo(this._commonCoord);e.apply(t),e.geometryChanged()};vo.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new q(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new yo(t);return e.apply(n),e.geometryChanged(),e};vo.prototype.getCommonCoordinate=function(){return this._commonCoord};vo.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};vo.prototype.interfaces_=function(){return[]};vo.prototype.getClass=function(){return vo};vh.CommonCoordinateFilter.get=function(){return Ca};vh.Translater.get=function(){return yo};Object.defineProperties(vo,vh);var Ca=function(){this._commonBitsX=new ar,this._commonBitsY=new ar};Ca.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};Ca.prototype.getCommonCoordinate=function(){return new q(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Ca.prototype.interfaces_=function(){return[si]};Ca.prototype.getClass=function(){return Ca};var yo=function(){this.trans=null;var e=arguments[0];this.trans=e};yo.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,i=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,i)};yo.prototype.isDone=function(){return!1};yo.prototype.isGeometryChanged=function(){return!0};yo.prototype.interfaces_=function(){return[ln]};yo.prototype.getClass=function(){return yo};var _t=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};_t.prototype.selfSnap=function(e){var t=new et(e),n=t.snapTo(e,this._snapTolerance);return n};_t.prototype.removeCommonBits=function(e){this._cbr=new vo,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};_t.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};_t.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=fe.overlayOp(t[0],t[1],e);return this.prepareResult(n)};_t.prototype.checkValid=function(e){e.isValid()||Kt.out.println("Snapped geometry is invalid")};_t.prototype.computeSnapTolerance=function(){this._snapTolerance=et.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};_t.prototype.snap=function(e){var t=this.removeCommonBits(e),n=et.snap(t[0],t[1],this._snapTolerance);return n};_t.prototype.interfaces_=function(){return[]};_t.prototype.getClass=function(){return _t};_t.overlayOp=function(e,t,n){var i=new _t(e,t);return i.getResultGeometry(n)};_t.union=function(e,t){return _t.overlayOp(e,t,fe.UNION)};_t.intersection=function(e,t){return _t.overlayOp(e,t,fe.INTERSECTION)};_t.symDifference=function(e,t){return _t.overlayOp(e,t,fe.SYMDIFFERENCE)};_t.difference=function(e,t){return _t.overlayOp(e,t,fe.DIFFERENCE)};var mr=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};mr.prototype.getResultGeometry=function(e){var t=null,n=!1,i=null;try{t=fe.overlayOp(this._geom[0],this._geom[1],e);var o=!0;o&&(n=!0)}catch(a){if(a instanceof zi)i=a;else throw a}finally{}if(!n)try{t=_t.overlayOp(this._geom[0],this._geom[1],e)}catch(a){throw a instanceof zi?i:a}finally{}return t};mr.prototype.interfaces_=function(){return[]};mr.prototype.getClass=function(){return mr};mr.overlayOp=function(e,t,n){var i=new mr(e,t);return i.getResultGeometry(n)};mr.union=function(e,t){return mr.overlayOp(e,t,fe.UNION)};mr.intersection=function(e,t){return mr.overlayOp(e,t,fe.INTERSECTION)};mr.symDifference=function(e,t){return mr.overlayOp(e,t,fe.SYMDIFFERENCE)};mr.difference=function(e,t){return mr.overlayOp(e,t,fe.DIFFERENCE)};var au=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};au.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};au.prototype.interfaces_=function(){return[]};au.prototype.getClass=function(){return au};var Tr=function r(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var e=arguments[0],t=arguments[1];this._eventType=r.DELETE,this._xValue=e,this._insertEvent=t}else if(arguments.length===3){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=r.INSERT,this._label=n,this._xValue=i,this._obj=o}},yh={INSERT:{configurable:!0},DELETE:{configurable:!0}};Tr.prototype.isDelete=function(){return this._eventType===Tr.DELETE};Tr.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};Tr.prototype.getObject=function(){return this._obj};Tr.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};Tr.prototype.getInsertEvent=function(){return this._insertEvent};Tr.prototype.isInsert=function(){return this._eventType===Tr.INSERT};Tr.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};Tr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Tr.prototype.interfaces_=function(){return[nn]};Tr.prototype.getClass=function(){return Tr};yh.INSERT.get=function(){return 1};yh.DELETE.get=function(){return 2};Object.defineProperties(Tr,yh);var tc=function(){};tc.prototype.interfaces_=function(){return[]};tc.prototype.getClass=function(){return tc};var Xt=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};Xt.prototype.isTrivialIntersection=function(e,t,n,i){if(e===n&&this._li.getIntersectionNum()===1){if(Xt.isAdjacentSegments(t,i))return!0;if(e.isClosed()){var o=e.getNumPoints()-1;if(t===0&&i===o||i===0&&t===o)return!0}}return!1};Xt.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};Xt.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};Xt.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};Xt.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var i=n.next(),o=i.getCoordinate();if(e.isIntersection(o))return!0}return!1};Xt.prototype.hasProperIntersection=function(){return this._hasProper};Xt.prototype.hasIntersection=function(){return this._hasIntersection};Xt.prototype.isDone=function(){return this._isDone};Xt.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};Xt.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};Xt.prototype.addIntersections=function(e,t,n,i){if(e===n&&t===i)return null;this.numTests++;var o=e.getCoordinates()[t],a=e.getCoordinates()[t+1],s=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this._li.computeIntersection(o,a,s,u),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};Xt.prototype.interfaces_=function(){return[]};Xt.prototype.getClass=function(){return Xt};Xt.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var L_=function(r){function e(){r.call(this),this.events=new $,this.nOverlaps=null}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){var n=this;dn.sort(this.events);for(var i=0;i<this.events.size();i++){var o=n.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},e.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var a=n.events.get(o);if(a.isInsert()&&n.processOverlaps(o,a.getDeleteEventIndex(),a,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Xt&&ae(arguments[0],un)&&ae(arguments[1],un)){var s=arguments[0],u=arguments[1],c=arguments[2];this.addEdges(s,s),this.addEdges(u,u),this.computeIntersections(c)}else if(typeof arguments[2]=="boolean"&&ae(arguments[0],un)&&arguments[1]instanceof Xt){var f=arguments[0],h=arguments[1],p=arguments[2];p?this.addEdges(f,null):this.addEdges(f),this.computeIntersections(h)}}},e.prototype.addEdge=function(n,i){for(var o=this,a=n.getMonotoneChainEdge(),s=a.getStartIndexes(),u=0;u<s.length-1;u++){var c=new au(a,u),f=new Tr(i,a.getMinX(u),c);o.events.add(f),o.events.add(new Tr(a.getMaxX(u),f))}},e.prototype.processOverlaps=function(n,i,o,a){for(var s=this,u=o.getObject(),c=n;c<i;c++){var f=s.events.get(c);if(f.isInsert()){var h=f.getObject();o.isSameLabel(f)||(u.computeIntersections(h,a),s.nOverlaps++)}}},e.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var a=o.next();n.addEdge(a,a)}else if(arguments.length===2)for(var s=arguments[0],u=arguments[1],c=s.iterator();c.hasNext();){var f=c.next();n.addEdge(f,u)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tc),pi=function(){this._min=ue.POSITIVE_INFINITY,this._max=ue.NEGATIVE_INFINITY},Wg={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min};pi.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};pi.prototype.getMax=function(){return this._max};pi.prototype.toString=function(){return fn.toLineString(new q(this._min,0),new q(this._max,0))};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};Wg.NodeComparator.get=function(){return su};Object.defineProperties(pi,Wg);var su=function(){};su.prototype.compare=function(e,t){var n=e,i=t,o=(n._min+n._max)/2,a=(i._min+i._max)/2;return o<a?-1:o>a?1:0};su.prototype.interfaces_=function(){return[Va]};su.prototype.getClass=function(){return su};var R_=function(r){function e(){r.call(this),this._item=null;var t=arguments[0],n=arguments[1],i=arguments[2];this._min=t,this._max=n,this._item=i}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;o.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),T_=function(r){function e(){r.call(this),this._node1=null,this._node2=null;var t=arguments[0],n=arguments[1];this._node1=t,this._node2=n,this.buildExtent(this._node1,this._node2)}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(n,i){this._min=Math.min(n._min,i._min),this._max=Math.max(n._max,i._max)},e.prototype.query=function(n,i,o){if(!this.intersects(n,i))return null;this._node1!==null&&this._node1.query(n,i,o),this._node2!==null&&this._node2.query(n,i,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),gi=function(){this._leaves=new $,this._root=null,this._level=0};gi.prototype.buildTree=function(){var e=this;dn.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,n=null,i=new $;;){if(e.buildLevel(t,i),i.size()===1)return i.get(0);n=t,t=i,i=n}};gi.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new R_(e,t,n))};gi.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};gi.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};gi.prototype.printNode=function(e){Kt.out.println(fn.toLineString(new q(e._min,this._level),new q(e._max,this._level)))};gi.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};gi.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var i=e.get(n),o=n+1<e.size()?e.get(n):null;if(o===null)t.add(i);else{var a=new T_(e.get(n),e.get(n+1));t.add(a)}}};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};var ns=function(){this._items=new $};ns.prototype.visitItem=function(e){this._items.add(e)};ns.prototype.getItems=function(){return this._items};ns.prototype.interfaces_=function(){return[fo]};ns.prototype.getClass=function(){return ns};var is=function(){this._index=null;var e=arguments[0];if(!ae(e,co))throw new He("Argument must be Polygonal");this._index=new Ko(e)},_h={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};is.prototype.locate=function(e){var t=new Rn(e),n=new os(t);return this._index.query(e.y,e.y,n),t.getLocation()};is.prototype.interfaces_=function(){return[ts]};is.prototype.getClass=function(){return is};_h.SegmentVisitor.get=function(){return os};_h.IntervalIndexedGeometry.get=function(){return Ko};Object.defineProperties(is,_h);var os=function(){this._counter=null;var e=arguments[0];this._counter=e};os.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};os.prototype.interfaces_=function(){return[fo]};os.prototype.getClass=function(){return os};var Ko=function(){this._index=new gi;var e=arguments[0];this.init(e)};Ko.prototype.init=function(e){for(var t=this,n=qt.getLines(e),i=n.iterator();i.hasNext();){var o=i.next(),a=o.getCoordinates();t.addLine(a)}};Ko.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var i=new ie(e[n-1],e[n]),o=Math.min(i.p0.y,i.p1.y),a=Math.max(i.p0.y,i.p1.y);t._index.insert(o,a,i)}};Ko.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new ns;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];this._index.query(i,o,a)}};Ko.prototype.interfaces_=function(){return[]};Ko.prototype.getClass=function(){return Ko};var Bs=function(r){function e(){if(r.call(this),this._parentGeom=null,this._lineEdgeMap=new Ng,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new gn,arguments.length===2){var t=arguments[0],n=arguments[1],i=$r.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=n,this._boundaryNodeRule=i,n!==null&&this.add(n)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2];this._argIndex=o,this._parentGeom=a,this._boundaryNodeRule=s,a!==null&&this.add(a)}}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(n,i){var o=this._nodes.addNode(i),a=o.getLabel(),s=1,u=H.NONE;u=a.getLocation(n,j.ON),u===H.BOUNDARY&&s++;var c=e.determineBoundary(this._boundaryNodeRule,s);a.setLocation(n,c)},e.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],i=arguments[1];return this.computeSelfNodes(n,i,!1)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2],u=new Xt(o,!0,!1);u.setIsDoneIfProperInt(s);var c=this.createEdgeSetIntersector(),f=this._parentGeom instanceof ui||this._parentGeom instanceof ht||this._parentGeom instanceof ii,h=a||!f;return c.computeIntersections(this._edges,u,h),this.addSelfIntersectionNodes(this._argIndex),u}},e.prototype.computeSplitEdges=function(n){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(n)}},e.prototype.computeEdgeIntersections=function(n,i,o){var a=new Xt(i,o,!0);a.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this._edges,n._edges,a),a},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Pr){var n=arguments[0],i=n.getCoordinate();this.insertPoint(this._argIndex,i,H.INTERIOR)}else if(arguments[0]instanceof q){var o=arguments[0];this.insertPoint(this._argIndex,o,H.INTERIOR)}},e.prototype.addPolygon=function(n){var i=this;this.addPolygonRing(n.getExteriorRing(),H.EXTERIOR,H.INTERIOR);for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o);i.addPolygonRing(a,H.INTERIOR,H.EXTERIOR)}},e.prototype.addEdge=function(n){this.insertEdge(n);var i=n.getCoordinates();this.insertPoint(this._argIndex,i[0],H.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],H.BOUNDARY)},e.prototype.addLineString=function(n){var i=ve.removeRepeatedPoints(n.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new ec(i,new Le(this._argIndex,H.INTERIOR));this._lineEdgeMap.put(n,o),this.insertEdge(o),he.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),i=new Array(n.size()).fill(null),o=0,a=n.iterator();a.hasNext();){var s=a.next();i[o++]=s.getCoordinate().copy()}return i},e.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(n,i,o){if(this.isBoundaryNode(n,i))return null;o===H.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,i):this.insertPoint(n,i,o)},e.prototype.addPolygonRing=function(n,i,o){if(n.isEmpty())return null;var a=ve.removeRepeatedPoints(n.getCoordinates());if(a.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=a[0],null;var s=i,u=o;ee.isCCW(a)&&(s=o,u=i);var c=new ec(a,new Le(this._argIndex,H.BOUNDARY,s,u));this._lineEdgeMap.put(n,c),this.insertEdge(c),this.insertPoint(this._argIndex,a[0],H.BOUNDARY)},e.prototype.insertPoint=function(n,i,o){var a=this._nodes.addNode(i),s=a.getLabel();s===null?a._label=new Le(n,o):s.setLocation(n,o)},e.prototype.createEdgeSetIntersector=function(){return new L_},e.prototype.addSelfIntersectionNodes=function(n){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel().getLocation(n),u=a.eiList.iterator();u.hasNext();){var c=u.next();i.addSelfIntersectionNode(n,c.coord,s)}},e.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof ii&&(this._useBoundaryDeterminationRule=!1),n instanceof ht)this.addPolygon(n);else if(n instanceof Xe)this.addLineString(n);else if(n instanceof Pr)this.addPoint(n);else if(n instanceof $a)this.addCollection(n);else if(n instanceof Fo)this.addCollection(n);else if(n instanceof ii)this.addCollection(n);else if(n instanceof dr)this.addCollection(n);else throw new Error(n.getClass().getName())}else return r.prototype.add.apply(this,arguments)},e.prototype.addCollection=function(n){for(var i=this,o=0;o<n.getNumGeometries();o++){var a=n.getGeometryN(o);i.add(a)}},e.prototype.locate=function(n){return ae(this._parentGeom,co)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new is(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},e.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return r.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(n,i){return n.isInBoundary(i)?H.BOUNDARY:H.INTERIOR},e}(We),as=function(){if(this._li=new $o,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Bs(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],i=$r.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Bs(0,t,i),this._arg[1]=new Bs(1,n,i)}else if(arguments.length===3){var o=arguments[0],a=arguments[1],s=arguments[2];o.getPrecisionModel().compareTo(a.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(a.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Bs(0,o,s),this._arg[1]=new Bs(1,a,s)}};as.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};as.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};as.prototype.interfaces_=function(){return[]};as.prototype.getClass=function(){return as};var Oo=function(){};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};Oo.map=function(){if(arguments[0]instanceof oe&&ae(arguments[1],Oo.MapOp)){for(var e=arguments[0],t=arguments[1],n=new $,i=0;i<e.getNumGeometries();i++){var o=t.map(e.getGeometryN(i));o!==null&&n.add(o)}return e.getFactory().buildGeometry(n)}else if(ae(arguments[0],ut)&&ae(arguments[1],Oo.MapOp)){for(var a=arguments[0],s=arguments[1],u=new $,c=a.iterator();c.hasNext();){var f=c.next(),h=s.map(f);h!==null&&u.add(h)}return u}};Oo.MapOp=function(){};var fe=function(r){function e(){var t=arguments[0],n=arguments[1];r.call(this,t,n),this._ptLocator=new gn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new pn,this._resultPolyList=new $,this._resultLineList=new $,this._resultPointList=new $,this._graph=new We(new Bg),this._geomFact=t.getFactory()}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(n){var i=this._edgeList.findEqualEdge(n);if(i!==null){var o=i.getLabel(),a=n.getLabel();i.isPointwiseEqual(n)||(a=new Le(n.getLabel()),a.flip());var s=i.getDepth();s.isNull()&&s.add(o),s.add(a),o.merge(a)}else this._edgeList.add(n)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},e.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},e.prototype.computeGeometry=function(n,i,o,a){var s=new $;return s.addAll(n),s.addAll(i),s.addAll(o),s.isEmpty()?e.createEmptyResult(a,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},e.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next();i.getEdges().mergeSymLabels()}},e.prototype.isCovered=function(n,i){for(var o=this,a=i.iterator();a.hasNext();){var s=a.next(),u=o._ptLocator.locate(n,s);if(u!==H.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var n=new $,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),n.add(o.getCollapsedEdge()))}this._edgeList.addAll(n)},e.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},e.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},e.prototype.insertUniqueEdges=function(n){for(var i=this,o=n.iterator();o.hasNext();){var a=o.next();i.insertUniqueEdge(a)}},e.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new $;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vo.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var o=new Lr(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var a=new Vn(this,this._geomFact,this._ptLocator);this._resultLineList=a.build(n);var s=new Sa(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},e.prototype.labelIncompleteNode=function(n,i){var o=this._ptLocator.locate(n.getCoordinate(),this._arg[i].getGeometry());n.getLabel().setLocation(i,o)},e.prototype.copyPoints=function(n){for(var i=this,o=this._arg[n].getNodeIterator();o.hasNext();){var a=o.next(),s=i._graph.addNode(a.getCoordinate());s.setLabel(n,a.getLabel().getLocation(n))}},e.prototype.findResultAreaEdges=function(n){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),a=o.getLabel();a.isArea()&&!o.isInteriorAreaEdge()&&e.isResultOfOp(a.getLocation(0,j.RIGHT),a.getLocation(1,j.RIGHT),n)&&o.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var i=n.next(),o=i.getLabel(),a=i.getDepth();if(!a.isNull()){a.normalize();for(var s=0;s<2;s++)!o.isNull(s)&&o.isArea()&&!a.isNull(s)&&(a.getDelta(s)===0?o.toLine(s):(he.isTrue(!a.isNull(s,j.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(s,j.LEFT,a.getLocation(s,j.LEFT)),he.isTrue(!a.isNull(s,j.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(s,j.RIGHT,a.getLocation(s,j.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var n=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),a=o.getLabel();o.isIsolated()&&(a.isNull(0)?n.labelIncompleteNode(o,0):n.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(a)}},e.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(as);fe.overlayOp=function(r,e,t){var n=new fe(r,e),i=n.getResultGeometry(t);return i};fe.intersection=function(r,e){if(r.isEmpty()||e.isEmpty())return fe.createEmptyResult(fe.INTERSECTION,r,e,r.getFactory());if(r.isGeometryCollection()){var t=e;return xa.map(r,{interfaces_:function(){return[Oo.MapOp]},map:function(n){return n.intersection(t)}})}return r.checkNotGeometryCollection(r),r.checkNotGeometryCollection(e),mr.overlayOp(r,e,fe.INTERSECTION)};fe.symDifference=function(r,e){if(r.isEmpty()||e.isEmpty()){if(r.isEmpty()&&e.isEmpty())return fe.createEmptyResult(fe.SYMDIFFERENCE,r,e,r.getFactory());if(r.isEmpty())return e.copy();if(e.isEmpty())return r.copy()}return r.checkNotGeometryCollection(r),r.checkNotGeometryCollection(e),mr.overlayOp(r,e,fe.SYMDIFFERENCE)};fe.resultDimension=function(r,e,t){var n=e.getDimension(),i=t.getDimension(),o=-1;switch(r){case fe.INTERSECTION:o=Math.min(n,i);break;case fe.UNION:o=Math.max(n,i);break;case fe.DIFFERENCE:o=n;break;case fe.SYMDIFFERENCE:o=Math.max(n,i);break}return o};fe.createEmptyResult=function(r,e,t,n){var i=null;switch(fe.resultDimension(r,e,t)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon();break}return i};fe.difference=function(r,e){return r.isEmpty()?fe.createEmptyResult(fe.DIFFERENCE,r,e,r.getFactory()):e.isEmpty()?r.copy():(r.checkNotGeometryCollection(r),r.checkNotGeometryCollection(e),mr.overlayOp(r,e,fe.DIFFERENCE))};fe.isResultOfOp=function(){if(arguments.length===2){var r=arguments[0],e=arguments[1],t=r.getLocation(0),n=r.getLocation(1);return fe.isResultOfOp(t,n,e)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===H.BOUNDARY&&(i=H.INTERIOR),o===H.BOUNDARY&&(o=H.INTERIOR),a){case fe.INTERSECTION:return i===H.INTERIOR&&o===H.INTERIOR;case fe.UNION:return i===H.INTERIOR||o===H.INTERIOR;case fe.DIFFERENCE:return i===H.INTERIOR&&o!==H.INTERIOR;case fe.SYMDIFFERENCE:return i===H.INTERIOR&&o!==H.INTERIOR||i!==H.INTERIOR&&o===H.INTERIOR}return!1}};fe.INTERSECTION=1;fe.UNION=2;fe.DIFFERENCE=3;fe.SYMDIFFERENCE=4;var ao=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new gn,this._seg=new ie;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};ao.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=t._linework.getGeometryN(n),o=i.getCoordinateSequence(),a=0;a<o.size()-1;a++){o.getCoordinate(a,t._seg.p0),o.getCoordinate(a+1,t._seg.p1);var s=t._seg.distance(e);if(s<=t._boundaryDistanceTolerance)return!0}return!1};ao.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?H.BOUNDARY:this._ptLocator.locate(e,this._g)};ao.prototype.extractLinework=function(e){var t=new ss;e.apply(t);var n=t.getLinework(),i=me.toLineStringArray(n);return e.getFactory().createMultiLineString(i)};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};var ss=function(){this._linework=null,this._linework=new $};ss.prototype.getLinework=function(){return this._linework};ss.prototype.filter=function(e){var t=this;if(e instanceof ht){var n=e;this._linework.add(n.getExteriorRing());for(var i=0;i<n.getNumInteriorRing();i++)t._linework.add(n.getInteriorRingN(i))}};ss.prototype.interfaces_=function(){return[Bn]};ss.prototype.getClass=function(){return ss};var Wo=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Wo.prototype.extractPoints=function(e,t,n){for(var i=this,o=e.getCoordinates(),a=0;a<o.length-1;a++)i.computeOffsetPoints(o[a],o[a+1],t,n)};Wo.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Wo.prototype.getPoints=function(e){for(var t=this,n=new $,i=qt.getLines(this._g),o=i.iterator();o.hasNext();){var a=o.next();t.extractPoints(a,e,n)}return n};Wo.prototype.computeOffsetPoints=function(e,t,n,i){var o=t.x-e.x,a=t.y-e.y,s=Math.sqrt(o*o+a*a),u=n*o/s,c=n*a/s,f=(t.x+e.x)/2,h=(t.y+e.y)/2;if(this._doLeft){var p=new q(f-c,h+u);i.add(p)}if(this._doRight){var b=new q(f+c,h-u);i.add(b)}};Wo.prototype.interfaces_=function(){return[]};Wo.prototype.getClass=function(){return Wo};var Kr=function r(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=r.TOLERANCE,this._testCoords=new $;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=r.computeBoundaryDistanceTolerance(e,t),this._geom=[e,t,n],this._locFinder=[new ao(this._geom[0],this._boundaryDistanceTolerance),new ao(this._geom[1],this._boundaryDistanceTolerance),new ao(this._geom[2],this._boundaryDistanceTolerance)]},Jg={TOLERANCE:{configurable:!0}};Kr.prototype.reportResult=function(e,t,n){Kt.out.println("Overlay result invalid - A:"+H.toLocationSymbol(t[0])+" B:"+H.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+H.toLocationSymbol(t[2]))};Kr.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};Kr.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var i=e._testCoords.get(n);if(!e.checkValid(t,i))return e._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],a=arguments[1];return this._location[0]=this._locFinder[0].getLocation(a),this._location[1]=this._locFinder[1].getLocation(a),this._location[2]=this._locFinder[2].getLocation(a),Kr.hasLocation(this._location,H.BOUNDARY)?!0:this.isValidResult(o,this._location)}};Kr.prototype.addTestPts=function(e){var t=new Wo(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};Kr.prototype.isValidResult=function(e,t){var n=fe.isResultOfOp(t[0],t[1],e),i=t[2]===H.INTERIOR,o=!(n^i);return o||this.reportResult(e,t,n),o};Kr.prototype.getInvalidLocation=function(){return this._invalidLocation};Kr.prototype.interfaces_=function(){return[]};Kr.prototype.getClass=function(){return Kr};Kr.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};Kr.computeBoundaryDistanceTolerance=function(e,t){return Math.min(et.computeSizeBasedSnapTolerance(e),et.computeSizeBasedSnapTolerance(t))};Kr.isValid=function(e,t,n,i){var o=new Kr(e,t,i);return o.isValid(n)};Jg.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(Kr,Jg);var kr=function r(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=r.extractFactory(e),this._inputGeoms=e};kr.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);n._skipEmpty&&o.isEmpty()||t.add(o)}};kr.prototype.combine=function(){for(var e=this,t=new $,n=this._inputGeoms.iterator();n.hasNext();){var i=n.next();e.extractElements(i,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};kr.prototype.interfaces_=function(){return[]};kr.prototype.getClass=function(){return kr};kr.combine=function(){if(arguments.length===1){var e=arguments[0],t=new kr(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],i=arguments[1],o=new kr(kr.createList(n,i));return o.combine()}else if(arguments.length===3){var a=arguments[0],s=arguments[1],u=arguments[2],c=new kr(kr.createList(a,s,u));return c.combine()}};kr.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};kr.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new $;return n.add(e),n.add(t),n}else if(arguments.length===3){var i=arguments[0],o=arguments[1],a=arguments[2],s=new $;return s.add(i),s.add(o),s.add(a),s}};var it=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new $)},Xg={STRTREE_NODE_CAPACITY:{configurable:!0}};it.prototype.reduceToGeometries=function(e){for(var t=this,n=new $,i=e.iterator();i.hasNext();){var o=i.next(),a=null;ae(o,un)?a=t.unionTree(o):o instanceof oe&&(a=o),n.add(a)}return n};it.prototype.extractByEnvelope=function(e,t,n){for(var i=new $,o=0;o<t.getNumGeometries();o++){var a=t.getGeometryN(o);a.getEnvelopeInternal().intersects(e)?i.add(a):n.add(a)}return this._geomFactory.buildGeometry(i)};it.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),i=t.getEnvelopeInternal();if(!n.intersects(i)){var o=kr.combine(e,t);return o}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var a=n.intersection(i);return this.unionUsingEnvelopeIntersection(e,t,a)};it.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Tg(it.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=e.itemsTree(),o=this.unionTree(i);return o};it.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var o=it.getGeometry(t,n);return this.unionSafe(o,null)}else{if(i-n===2)return this.unionSafe(it.getGeometry(t,n),it.getGeometry(t,n+1));var a=Math.trunc((i+n)/2),s=this.binaryUnion(t,n,a),u=this.binaryUnion(t,a,i);return this.unionSafe(s,u)}}};it.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var i=n.next();t===null?t=i.copy():t=t.union(i)}return t};it.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};it.prototype.unionActual=function(e,t){return it.restrictToPolygons(e.union(t))};it.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};it.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var i=new $,o=this.extractByEnvelope(n,e,i),a=this.extractByEnvelope(n,t,i),s=this.unionActual(o,a);i.add(s);var u=kr.combine(i);return u};it.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),i=n.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],a=arguments[1],s=o.getFactory(),u=s.createGeometryCollection([o,a]),c=u.buffer(0);return c}};it.prototype.interfaces_=function(){return[]};it.prototype.getClass=function(){return it};it.restrictToPolygons=function(e){if(ae(e,co))return e;var t=Di.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(me.toPolygonArray(t))};it.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};it.union=function(e){var t=new it(e);return t.union()};Xg.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(it,Xg);var rc=function(){};rc.prototype.interfaces_=function(){return[]};rc.prototype.getClass=function(){return rc};rc.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return fe.createEmptyResult(fe.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),mr.overlayOp(e,t,fe.UNION)};function Zo(){return new nc}function nc(){this.reset()}nc.prototype={constructor:nc,reset:function(){this.s=this.t=0},add:function(r){Yd(Mu,r,this.t),Yd(this,Mu.s,this.s),this.s?this.t+=Mu.t:this.s=Mu.t},valueOf:function(){return this.s}};var Mu=new nc;function Yd(r,e,t){var n=r.s=e+t,i=n-e,o=n-i;r.t=e-o+(t-i)}var Je=1e-6,Be=Math.PI,Ri=Be/2,jd=Be/4,Vi=Be*2,xo=180/Be,xn=Be/180,cr=Math.abs,O_=Math.atan,us=Math.atan2,ct=Math.cos,ft=Math.sin,Ss=Math.sqrt;function Yg(r){return r>1?0:r<-1?Be:Math.acos(r)}function Ia(r){return r>1?Ri:r<-1?-Ri:Math.asin(r)}function Hs(){}function ic(r,e){r&&Zd.hasOwnProperty(r.type)&&Zd[r.type](r,e)}var $d={Feature:function(r,e){ic(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,n=-1,i=t.length;++n<i;)ic(t[n].geometry,e)}},Zd={Sphere:function(r,e){e.sphere()},Point:function(r,e){r=r.coordinates,e.point(r[0],r[1],r[2])},MultiPoint:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)r=t[n],e.point(r[0],r[1],r[2])},LineString:function(r,e){wl(r.coordinates,e,0)},MultiLineString:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)wl(t[n],e,0)},Polygon:function(r,e){Qd(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)Qd(t[n],e)},GeometryCollection:function(r,e){for(var t=r.geometries,n=-1,i=t.length;++n<i;)ic(t[n],e)}};function wl(r,e,t){var n=-1,i=r.length-t,o;for(e.lineStart();++n<i;)o=r[n],e.point(o[0],o[1],o[2]);e.lineEnd()}function Qd(r,e){var t=-1,n=r.length;for(e.polygonStart();++t<n;)wl(r[t],e,1);e.polygonEnd()}function D_(r,e){r&&$d.hasOwnProperty(r.type)?$d[r.type](r,e):ic(r,e)}Zo();Zo();function El(r){return[us(r[1],r[0]),Ia(r[2])]}function cs(r){var e=r[0],t=r[1],n=ct(t);return[n*ct(e),n*ft(e),ft(t)]}function Nu(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function oc(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function zf(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function Pu(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function xl(r){var e=Ss(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=e,r[1]/=e,r[2]/=e}Zo();function jg(r,e){function t(n,i){return n=r(n,i),e(n[0],n[1])}return r.invert&&e.invert&&(t.invert=function(n,i){return n=e.invert(n,i),n&&r.invert(n[0],n[1])}),t}function Sl(r,e){return[r>Be?r-Vi:r<-Be?r+Vi:r,e]}Sl.invert=Sl;function k_(r,e,t){return(r%=Vi)?e||t?jg(tp(r),rp(e,t)):tp(r):e||t?rp(e,t):Sl}function ep(r){return function(e,t){return e+=r,[e>Be?e-Vi:e<-Be?e+Vi:e,t]}}function tp(r){var e=ep(r);return e.invert=ep(-r),e}function rp(r,e){var t=ct(r),n=ft(r),i=ct(e),o=ft(e);function a(s,u){var c=ct(u),f=ct(s)*c,h=ft(s)*c,p=ft(u),b=p*t+f*n;return[us(h*i-b*o,f*t-p*n),Ia(b*i+h*o)]}return a.invert=function(s,u){var c=ct(u),f=ct(s)*c,h=ft(s)*c,p=ft(u),b=p*i-h*o;return[us(h*i+p*o,f*t+b*n),Ia(b*t-f*n)]},a}function B_(r,e,t,n,i,o){if(t){var a=ct(e),s=ft(e),u=n*t;i==null?(i=e+n*Vi,o=e-u/2):(i=np(a,i),o=np(a,o),(n>0?i<o:i>o)&&(i+=n*Vi));for(var c,f=i;n>0?f>o:f<o;f-=u)c=El([a,-s*ct(f),-s*ft(f)]),r.point(c[0],c[1])}}function np(r,e){e=cs(e),e[0]-=r,xl(e);var t=Yg(-e[1]);return((-e[2]<0?-t:t)+Vi-Je)%Vi}function $g(){var r=[],e;return{point:function(t,n){e.push([t,n])},lineStart:function(){r.push(e=[])},lineEnd:Hs,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var t=r;return r=[],e=null,t}}}function F_(r,e,t,n,i,o){var a=r[0],s=r[1],u=e[0],c=e[1],f=0,h=1,p=u-a,b=c-s,_;if(_=t-a,!(!p&&_>0)){if(_/=p,p<0){if(_<f)return;_<h&&(h=_)}else if(p>0){if(_>h)return;_>f&&(f=_)}if(_=i-a,!(!p&&_<0)){if(_/=p,p<0){if(_>h)return;_>f&&(f=_)}else if(p>0){if(_<f)return;_<h&&(h=_)}if(_=n-s,!(!b&&_>0)){if(_/=b,b<0){if(_<f)return;_<h&&(h=_)}else if(b>0){if(_>h)return;_>f&&(f=_)}if(_=o-s,!(!b&&_<0)){if(_/=b,b<0){if(_>h)return;_>f&&(f=_)}else if(b>0){if(_<f)return;_<h&&(h=_)}return f>0&&(r[0]=a+f*p,r[1]=s+f*b),h<1&&(e[0]=a+h*p,e[1]=s+h*b),!0}}}}}function ku(r,e){return cr(r[0]-e[0])<Je&&cr(r[1]-e[1])<Je}function Lu(r,e,t,n){this.x=r,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function Zg(r,e,t,n,i){var o=[],a=[],s,u;if(r.forEach(function(_){if(!((S=_.length-1)<=0)){var S,R=_[0],D=_[S],v;if(ku(R,D)){for(i.lineStart(),s=0;s<S;++s)i.point((R=_[s])[0],R[1]);i.lineEnd();return}o.push(v=new Lu(R,_,null,!0)),a.push(v.o=new Lu(R,null,v,!1)),o.push(v=new Lu(D,_,null,!1)),a.push(v.o=new Lu(D,null,v,!0))}}),!!o.length){for(a.sort(e),ip(o),ip(a),s=0,u=a.length;s<u;++s)a[s].e=t=!t;for(var c=o[0],f,h;;){for(var p=c,b=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(b)for(s=0,u=f.length;s<u;++s)i.point((h=f[s])[0],h[1]);else n(p.x,p.n.x,1,i);p=p.n}else{if(b)for(f=p.p.z,s=f.length-1;s>=0;--s)i.point((h=f[s])[0],h[1]);else n(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,b=!b}while(!p.v);i.lineEnd()}}}function ip(r){if(e=r.length){for(var e,t=0,n=r[0],i;++t<e;)n.n=i=r[t],i.p=n,n=i;n.n=i=r[0],i.p=n}}function Qg(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function z_(r){return r.length===1&&(r=U_(r)),{left:function(e,t,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;r(e[o],t)<0?n=o+1:i=o}return n},right:function(e,t,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var o=n+i>>>1;r(e[o],t)>0?i=o:n=o+1}return n}}}function U_(r){return function(e,t){return Qg(r(e),t)}}z_(Qg);function e0(r){for(var e=r.length,t,n=-1,i=0,o,a;++n<e;)i+=r[n].length;for(o=new Array(i);--e>=0;)for(a=r[e],t=a.length;--t>=0;)o[--i]=a[t];return o}var Gs=1e9,Ru=-Gs;function q_(r,e,t,n){function i(c,f){return r<=c&&c<=t&&e<=f&&f<=n}function o(c,f,h,p){var b=0,_=0;if(c==null||(b=a(c,h))!==(_=a(f,h))||u(c,f)<0^h>0)do p.point(b===0||b===3?r:t,b>1?n:e);while((b=(b+h+4)%4)!==_);else p.point(f[0],f[1])}function a(c,f){return cr(c[0]-r)<Je?f>0?0:3:cr(c[0]-t)<Je?f>0?2:1:cr(c[1]-e)<Je?f>0?1:0:f>0?3:2}function s(c,f){return u(c.x,f.x)}function u(c,f){var h=a(c,1),p=a(f,1);return h!==p?h-p:h===0?f[1]-c[1]:h===1?c[0]-f[0]:h===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,h=$g(),p,b,_,S,R,D,v,E,M,O,k,F={point:z,lineStart:l,lineEnd:g,polygonStart:W,polygonEnd:C};function z(x,N){i(x,N)&&f.point(x,N)}function U(){for(var x=0,N=0,T=b.length;N<T;++N)for(var B=b[N],P=1,d=B.length,I=B[0],K,Q,Z=I[0],te=I[1];P<d;++P)K=Z,Q=te,I=B[P],Z=I[0],te=I[1],Q<=n?te>n&&(Z-K)*(n-Q)>(te-Q)*(r-K)&&++x:te<=n&&(Z-K)*(n-Q)<(te-Q)*(r-K)&&--x;return x}function W(){f=h,p=[],b=[],k=!0}function C(){var x=U(),N=k&&x,T=(p=e0(p)).length;(N||T)&&(c.polygonStart(),N&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),T&&Zg(p,s,x,o,c),c.polygonEnd()),f=c,p=b=_=null}function l(){F.point=w,b&&b.push(_=[]),O=!0,M=!1,v=E=NaN}function g(){p&&(w(S,R),D&&M&&h.rejoin(),p.push(h.result())),F.point=z,M&&f.lineEnd()}function w(x,N){var T=i(x,N);if(b&&_.push([x,N]),O)S=x,R=N,D=T,O=!1,T&&(f.lineStart(),f.point(x,N));else if(T&&M)f.point(x,N);else{var B=[v=Math.max(Ru,Math.min(Gs,v)),E=Math.max(Ru,Math.min(Gs,E))],P=[x=Math.max(Ru,Math.min(Gs,x)),N=Math.max(Ru,Math.min(Gs,N))];F_(B,P,r,e,t,n)?(M||(f.lineStart(),f.point(B[0],B[1])),f.point(P[0],P[1]),T||f.lineEnd(),k=!1):T&&(f.lineStart(),f.point(x,N),k=!1)}v=x,E=N,M=T}return F}}var Uf=Zo();function H_(r,e){var t=e[0],n=e[1],i=[ft(t),-ct(t),0],o=0,a=0;Uf.reset();for(var s=0,u=r.length;s<u;++s)if(f=(c=r[s]).length)for(var c,f,h=c[f-1],p=h[0],b=h[1]/2+jd,_=ft(b),S=ct(b),R=0;R<f;++R,p=v,_=M,S=O,h=D){var D=c[R],v=D[0],E=D[1]/2+jd,M=ft(E),O=ct(E),k=v-p,F=k>=0?1:-1,z=F*k,U=z>Be,W=_*M;if(Uf.add(us(W*F*ft(z),S*O+W*ct(z))),o+=U?k+F*Vi:k,U^p>=t^v>=t){var C=oc(cs(h),cs(D));xl(C);var l=oc(i,C);xl(l);var g=(U^k>=0?-1:1)*Ia(l[2]);(n>g||n===g&&(C[0]||C[1]))&&(a+=U^k>=0?1:-1)}}return(o<-Je||o<Je&&Uf<-Je)^a&1}Zo();function op(r){return r}Zo();Zo();var fs=1/0,ac=fs,uu=-fs,sc=uu,ap={point:G_,lineStart:Hs,lineEnd:Hs,polygonStart:Hs,polygonEnd:Hs,result:function(){var r=[[fs,ac],[uu,sc]];return uu=sc=-(ac=fs=1/0),r}};function G_(r,e){r<fs&&(fs=r),r>uu&&(uu=r),e<ac&&(ac=e),e>sc&&(sc=e)}Zo();function t0(r,e,t,n){return function(i,o){var a=e(o),s=i.invert(n[0],n[1]),u=$g(),c=e(u),f=!1,h,p,b,_={point:S,lineStart:D,lineEnd:v,polygonStart:function(){_.point=E,_.lineStart=M,_.lineEnd=O,p=[],h=[]},polygonEnd:function(){_.point=S,_.lineStart=D,_.lineEnd=v,p=e0(p);var k=H_(h,s);p.length?(f||(o.polygonStart(),f=!0),Zg(p,K_,k,t,o)):k&&(f||(o.polygonStart(),f=!0),o.lineStart(),t(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),p=h=null},sphere:function(){o.polygonStart(),o.lineStart(),t(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function S(k,F){var z=i(k,F);r(k=z[0],F=z[1])&&o.point(k,F)}function R(k,F){var z=i(k,F);a.point(z[0],z[1])}function D(){_.point=R,a.lineStart()}function v(){_.point=S,a.lineEnd()}function E(k,F){b.push([k,F]);var z=i(k,F);c.point(z[0],z[1])}function M(){c.lineStart(),b=[]}function O(){E(b[0][0],b[0][1]),c.lineEnd();var k=c.clean(),F=u.result(),z,U=F.length,W,C,l;if(b.pop(),h.push(b),b=null,!!U){if(k&1){if(C=F[0],(W=C.length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),z=0;z<W;++z)o.point((l=C[z])[0],l[1]);o.lineEnd()}return}U>1&&k&2&&F.push(F.pop().concat(F.shift())),p.push(F.filter(V_))}}return _}}function V_(r){return r.length>1}function K_(r,e){return((r=r.x)[0]<0?r[1]-Ri-Je:Ri-r[1])-((e=e.x)[0]<0?e[1]-Ri-Je:Ri-e[1])}const sp=t0(function(){return!0},W_,X_,[-Be,-Ri]);function W_(r){var e=NaN,t=NaN,n=NaN,i;return{lineStart:function(){r.lineStart(),i=1},point:function(o,a){var s=o>0?Be:-Be,u=cr(o-e);cr(u-Be)<Je?(r.point(e,t=(t+a)/2>0?Ri:-Ri),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(s,t),r.point(o,t),i=0):n!==s&&u>=Be&&(cr(e-n)<Je&&(e-=n*Je),cr(o-s)<Je&&(o-=s*Je),t=J_(e,t,o,a),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(s,t),i=0),r.point(e=o,t=a),n=s},lineEnd:function(){r.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function J_(r,e,t,n){var i,o,a=ft(r-t);return cr(a)>Je?O_((ft(e)*(o=ct(n))*ft(t)-ft(n)*(i=ct(e))*ft(r))/(i*o*a)):(e+n)/2}function X_(r,e,t,n){var i;if(r==null)i=t*Ri,n.point(-Be,i),n.point(0,i),n.point(Be,i),n.point(Be,0),n.point(Be,-i),n.point(0,-i),n.point(-Be,-i),n.point(-Be,0),n.point(-Be,i);else if(cr(r[0]-e[0])>Je){var o=r[0]<e[0]?Be:-Be;i=t*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])}function Y_(r,e){var t=ct(r),n=t>0,i=cr(t)>Je;function o(f,h,p,b){B_(b,r,e,p,f,h)}function a(f,h){return ct(f)*ct(h)>t}function s(f){var h,p,b,_,S;return{lineStart:function(){_=b=!1,S=1},point:function(R,D){var v=[R,D],E,M=a(R,D),O=n?M?0:c(R,D):M?c(R+(R<0?Be:-Be),D):0;if(!h&&(_=b=M)&&f.lineStart(),M!==b&&(E=u(h,v),(!E||ku(h,E)||ku(v,E))&&(v[0]+=Je,v[1]+=Je,M=a(v[0],v[1]))),M!==b)S=0,M?(f.lineStart(),E=u(v,h),f.point(E[0],E[1])):(E=u(h,v),f.point(E[0],E[1]),f.lineEnd()),h=E;else if(i&&h&&n^M){var k;!(O&p)&&(k=u(v,h,!0))&&(S=0,n?(f.lineStart(),f.point(k[0][0],k[0][1]),f.point(k[1][0],k[1][1]),f.lineEnd()):(f.point(k[1][0],k[1][1]),f.lineEnd(),f.lineStart(),f.point(k[0][0],k[0][1])))}M&&(!h||!ku(h,v))&&f.point(v[0],v[1]),h=v,b=M,p=O},lineEnd:function(){b&&f.lineEnd(),h=null},clean:function(){return S|(_&&b)<<1}}}function u(f,h,p){var b=cs(f),_=cs(h),S=[1,0,0],R=oc(b,_),D=Nu(R,R),v=R[0],E=D-v*v;if(!E)return!p&&f;var M=t*D/E,O=-t*v/E,k=oc(S,R),F=Pu(S,M),z=Pu(R,O);zf(F,z);var U=k,W=Nu(F,U),C=Nu(U,U),l=W*W-C*(Nu(F,F)-1);if(!(l<0)){var g=Ss(l),w=Pu(U,(-W-g)/C);if(zf(w,F),w=El(w),!p)return w;var x=f[0],N=h[0],T=f[1],B=h[1],P;N<x&&(P=x,x=N,N=P);var d=N-x,I=cr(d-Be)<Je,K=I||d<Je;if(!I&&B<T&&(P=T,T=B,B=P),K?I?T+B>0^w[1]<(cr(w[0]-x)<Je?T:B):T<=w[1]&&w[1]<=B:d>Be^(x<=w[0]&&w[0]<=N)){var Q=Pu(U,(-W+g)/C);return zf(Q,F),[w,El(Q)]}}}function c(f,h){var p=n?r:Be-r,b=0;return f<-p?b|=1:f>p&&(b|=2),h<-p?b|=4:h>p&&(b|=8),b}return t0(a,s,o,n?[0,-r]:[-Be,r-Be])}function r0(r){return function(e){var t=new Cl;for(var n in r)t[n]=r[n];return t.stream=e,t}}function Cl(){}Cl.prototype={constructor:Cl,point:function(r,e){this.stream.point(r,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function n0(r,e,t){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),o!=null&&r.clipExtent(null),D_(t,r.stream(ap));var a=ap.result(),s=Math.min(n/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(n-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return o!=null&&r.clipExtent(o),r.scale(s*150).translate([u,c])}function j_(r,e,t){return n0(r,[[0,0],e],t)}var up=16,$_=ct(30*xn);function cp(r,e){return+e?Q_(r,e):Z_(r)}function Z_(r){return r0({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}})}function Q_(r,e){function t(n,i,o,a,s,u,c,f,h,p,b,_,S,R){var D=c-n,v=f-i,E=D*D+v*v;if(E>4*e&&S--){var M=a+p,O=s+b,k=u+_,F=Ss(M*M+O*O+k*k),z=Ia(k/=F),U=cr(cr(k)-1)<Je||cr(o-h)<Je?(o+h)/2:us(O,M),W=r(U,z),C=W[0],l=W[1],g=C-n,w=l-i,x=v*g-D*w;(x*x/E>e||cr((D*g+v*w)/E-.5)>.3||a*p+s*b+u*_<$_)&&(t(n,i,o,a,s,u,C,l,U,M/=F,O/=F,k,S,R),R.point(C,l),t(C,l,U,M,O,k,c,f,h,p,b,_,S,R))}}return function(n){var i,o,a,s,u,c,f,h,p,b,_,S,R={point:D,lineStart:v,lineEnd:M,polygonStart:function(){n.polygonStart(),R.lineStart=O},polygonEnd:function(){n.polygonEnd(),R.lineStart=v}};function D(z,U){z=r(z,U),n.point(z[0],z[1])}function v(){h=NaN,R.point=E,n.lineStart()}function E(z,U){var W=cs([z,U]),C=r(z,U);t(h,p,f,b,_,S,h=C[0],p=C[1],f=z,b=W[0],_=W[1],S=W[2],up,n),n.point(h,p)}function M(){R.point=D,n.lineEnd()}function O(){v(),R.point=k,R.lineEnd=F}function k(z,U){E(i=z,U),o=h,a=p,s=b,u=_,c=S,R.point=E}function F(){t(h,p,f,b,_,S,o,a,i,s,u,c,up,n),R.lineEnd=M,M()}return R}}var e1=r0({point:function(r,e){this.stream.point(r*xn,e*xn)}});function t1(r){return r1(function(){return r})()}function r1(r){var e,t=150,n=480,i=250,o,a,s=0,u=0,c=0,f=0,h=0,p,b,_=null,S=sp,R=null,D,v,E,M=op,O=.5,k=cp(C,O),F,z;function U(w){return w=b(w[0]*xn,w[1]*xn),[w[0]*t+o,a-w[1]*t]}function W(w){return w=b.invert((w[0]-o)/t,(a-w[1])/t),w&&[w[0]*xo,w[1]*xo]}function C(w,x){return w=e(w,x),[w[0]*t+o,a-w[1]*t]}U.stream=function(w){return F&&z===w?F:F=e1(S(p,k(M(z=w))))},U.clipAngle=function(w){return arguments.length?(S=+w?Y_(_=w*xn,6*xn):(_=null,sp),g()):_*xo},U.clipExtent=function(w){return arguments.length?(M=w==null?(R=D=v=E=null,op):q_(R=+w[0][0],D=+w[0][1],v=+w[1][0],E=+w[1][1]),g()):R==null?null:[[R,D],[v,E]]},U.scale=function(w){return arguments.length?(t=+w,l()):t},U.translate=function(w){return arguments.length?(n=+w[0],i=+w[1],l()):[n,i]},U.center=function(w){return arguments.length?(s=w[0]%360*xn,u=w[1]%360*xn,l()):[s*xo,u*xo]},U.rotate=function(w){return arguments.length?(c=w[0]%360*xn,f=w[1]%360*xn,h=w.length>2?w[2]%360*xn:0,l()):[c*xo,f*xo,h*xo]},U.precision=function(w){return arguments.length?(k=cp(C,O=w*w),g()):Ss(O)},U.fitExtent=function(w,x){return n0(U,w,x)},U.fitSize=function(w,x){return j_(U,w,x)};function l(){b=jg(p=k_(c,f,h),e);var w=e(s,u);return o=n-w[0]*t,a=i+w[1]*t,g()}function g(){return F=z=null,U}return function(){return e=r.apply(this,arguments),U.invert=e.invert&&W,l()}}function i0(r){return function(e,t){var n=ct(e),i=ct(t),o=r(n*i);return[o*i*ft(e),o*ft(t)]}}function o0(r){return function(e,t){var n=Ss(e*e+t*t),i=r(n),o=ft(i),a=ct(i);return[us(e*o,n*a),Ia(n&&t*o/n)]}}var n1=i0(function(r){return Ss(2/(1+r))});n1.invert=o0(function(r){return 2*Ia(r/2)});var a0=i0(function(r){return(r=Yg(r))&&r/ft(r)});a0.invert=o0(function(r){return r});function i1(){return t1(a0).scale(79.4188).clipAngle(180-.001)}function fp(r,e){return[r,e]}fp.invert=fp;function o1(r,e,t){t=t||{};var n=t.units||"kilometers",i=t.steps||8;if(!r)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(r.type){case"GeometryCollection":return du(r,function(a){var s=Bu(a,e,n,i);s&&o.push(s)}),Fr(o);case"FeatureCollection":return Do(r,function(a){var s=Bu(a,e,n,i);s&&Do(s,function(u){u&&o.push(u)})}),Fr(o)}return Bu(r,e,n,i)}function Bu(r,e,t,n){var i=r.properties||{},o=r.type==="Feature"?r.geometry:r;if(o.type==="GeometryCollection"){var a=[];return du(r,function(S){var R=Bu(S,e,t,n);R&&a.push(R)}),Fr(a)}var s=a1(o),u={type:o.type,coordinates:u0(o.coordinates,s)},c=new lh,f=c.read(u),h=xc(hu(e,t),"meters"),p=Gt.bufferOp(f,h,n),b=new Lg;if(p=b.write(p),!s0(p.coordinates)){var _={type:p.type,coordinates:c0(p.coordinates,s)};return cn(_,i)}}function s0(r){return Array.isArray(r[0])?s0(r[0]):isNaN(r[0])}function u0(r,e){return typeof r[0]!="object"?e(r):r.map(function(t){return u0(t,e)})}function c0(r,e){return typeof r[0]!="object"?e.invert(r):r.map(function(t){return c0(t,e)})}function a1(r){var e=fl(r).geometry.coordinates,t=[-e[0],-e[1]];return i1().rotate(t).scale(_r)}function s1(r,e,t){t===void 0&&(t={});var n=ko(r),i=ko(e),o=wg.union(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?_s(o[0],t.properties):Ec(o,t.properties)}function Tu(r,e,t){t===void 0&&(t={});var n=ko(r),i=ko(e),o=wg.intersection(n.coordinates,i.coordinates);return o.length===0?null:o.length===1?_s(o[0],t.properties):Ec(o,t.properties)}class Ue{static MapRange(e,t){const n=[];if(e.total>1e5)throw`Tilerange too big (z is ${e.zoomlevel}, total tiles needed: ${e.total})`;for(let o=e.xstart;o<=e.xend;o++)for(let a=e.ystart;a<=e.yend;a++){const s=t(o,a);n.push(s)}return n}static tile_bounds(e,t,n){return[[Ue.tile2lat(n,e),Ue.tile2long(t,e)],[Ue.tile2lat(n+1,e),Ue.tile2long(t+1,e)]]}static tile_bounds_lon_lat(e,t,n){return[[Ue.tile2long(t,e),Ue.tile2lat(n,e)],[Ue.tile2long(t+1,e),Ue.tile2lat(n+1,e)]]}static centerPointOf(e,t,n){return[(Ue.tile2long(t,e)+Ue.tile2long(t+1,e))/2,(Ue.tile2lat(n,e)+Ue.tile2lat(n+1,e))/2]}static tile_index(e,t,n){return(t*(2<<e)+n)*100+e}static tile_from_index(e){const t=e%100,n=2<<t;e=Math.floor(e/100);const i=Math.floor(e/n);return[t,i,e%n]}static embedded_tile(e,t,n){return{x:Ue.lon2tile(t,n),y:Ue.lat2tile(e,n),z:n}}static tileRangeFrom(e,t){return Ue.TileRangeBetween(t,e.getNorth(),e.getWest(),e.getSouth(),e.getEast())}static TileRangeBetween(e,t,n,i,o){const a=Ue.embedded_tile(t,n,e),s=Ue.embedded_tile(i,o,e),u=Math.min(a.x,s.x),c=Math.max(a.x,s.x),f=Math.min(a.y,s.y),h=Math.max(a.y,s.y),p=(1+c-u)*(1+h-f);return{xstart:u,xend:c,ystart:f,yend:h,total:p,zoomlevel:e}}static tile2long(e,t){return e/Math.pow(2,t)*360-180}static tile2lat(e,t){const n=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}static lon2tile(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}static lat2tile(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}}const Dr=class Dr{constructor(e){_e(this,"maxLat");_e(this,"maxLon");_e(this,"minLat");_e(this,"minLon");this.maxLat=-90,this.maxLon=-180,this.minLat=90,this.minLon=180;for(const t of e)this.maxLon=Math.max(this.maxLon,t[0]),this.maxLat=Math.max(this.maxLat,t[1]),this.minLon=Math.min(this.minLon,t[0]),this.minLat=Math.min(this.minLat,t[1]);this.maxLon=Math.min(this.maxLon,180),this.maxLat=Math.min(this.maxLat,90),this.minLon=Math.max(this.minLon,-180),this.minLat=Math.max(this.minLat,-90),this.check()}static fromLeafletBounds(e){return new Dr([[e.getWest(),e.getNorth()],[e.getEast(),e.getSouth()]])}static get(e){var t;if(((t=e.bbox)==null?void 0:t.overlapsWith)===void 0){const n=ai(e);e.bbox=new Dr([[n[0],n[1]],[n[2],n[3]]])}return e.bbox}static bboxAroundAll(e){let t=-90,n=-180,i=80,o=180;for(const a of e)t=Math.max(t,a.maxLat),n=Math.max(n,a.maxLon),i=Math.min(i,a.minLat),o=Math.min(o,a.minLon);return new Dr([[n,t],[o,i]])}static fromTile(e,t,n){return new Dr(Ue.tile_bounds_lon_lat(e,t,n))}static fromTileIndex(e){return e===0?Dr.global:Dr.fromTile(...Ue.tile_from_index(e))}unionWith(e){return new Dr([[Math.max(this.maxLon,e.maxLon),Math.max(this.maxLat,e.maxLat)],[Math.min(this.minLon,e.minLon),Math.min(this.minLat,e.minLat)]])}containingTileRange(e){return Ue.TileRangeBetween(e,this.minLat,this.minLon,this.maxLat,this.maxLon)}overlapsWith(e){return this.maxLon<e.minLon||this.maxLat<e.minLat||this.minLon>e.maxLon?!1:this.minLat<=e.maxLat}isContainedIn(e){return!(this.maxLon>e.maxLon||this.maxLat>e.maxLat||this.minLon<e.minLon||this.minLat<e.minLat)}squarify(){const e=this.maxLon-this.minLon,t=this.maxLat-this.minLat,n=Math.sqrt(e*t),i=(this.maxLon+this.minLon)/2,o=(this.maxLat+this.minLat)/2;return new Dr([[i-n/2,o-n/2],[i+n/2,o+n/2]])}isNearby(e,t){if(this.contains(e))return!0;const[n,i]=e;return this.minLat<=i&&this.maxLat>=i&&An.distanceBetween(e,[n,this.minLat])<=t||An.distanceBetween(e,[n,this.maxLat])<=t?this.minLon<=n&&this.maxLon>=n&&An.distanceBetween(e,[this.minLon,i])<=t||An.distanceBetween(e,[this.maxLon,i])<=t:!1}getEast(){return this.maxLon}getNorth(){return this.maxLat}getWest(){return this.minLon}getSouth(){return this.minLat}contains(e){return this.minLat<=e[1]&&e[1]<=this.maxLat&&this.minLon<=e[0]&&e[0]<=this.maxLon}pad(e,t=2){const n=Math.min(t/2,Math.abs(this.maxLat-this.minLat)*e),i=Math.min(t/2,Math.abs(this.maxLon-this.minLon)*e);return new Dr([[this.minLon-i,this.minLat-n],[this.maxLon+i,this.maxLat+n]])}padAbsolute(e){return new Dr([[this.minLon-e,this.minLat-e],[this.maxLon+e,this.maxLat+e]])}toLngLat(){return[[this.minLon,this.minLat],[this.maxLon,this.maxLat]]}asGeojsonCached(){return this.geojsonCache===void 0&&(this.geojsonCache=this.asGeoJson({})),this.geojsonCache}asGeoJson(e){return{type:"Feature",properties:e,geometry:this.asGeometry()}}asGeometry(){return{type:"Polygon",coordinates:[[[this.minLon,this.minLat],[this.maxLon,this.minLat],[this.maxLon,this.maxLat],[this.minLon,this.maxLat],[this.minLon,this.minLat]]]}}expandToTileBounds(e){if(e===void 0)return this;const t=Ue.embedded_tile(this.minLat,this.minLon,e),n=Ue.embedded_tile(this.maxLat,this.maxLon,e),i=Ue.tile_bounds_lon_lat(t.z,t.x,t.y),o=Ue.tile_bounds_lon_lat(n.z,n.x,n.y);return new Dr([].concat(i,o))}toMercator(){const[e,t]=An.ConvertWgs84To900913([this.minLon,this.minLat]),[n,i]=An.ConvertWgs84To900913([this.maxLon,this.maxLat]);return{minLon:e,maxLon:n,minLat:t,maxLat:i}}check(){if(isNaN(this.maxLon)||isNaN(this.maxLat)||isNaN(this.minLon)||isNaN(this.minLat))throw console.trace("BBox with NaN detected:",this),"BBOX has NAN"}overlapsWithFeature(e){return An.calculateOverlap(this.asGeoJson({}),[e]).length>0}};_e(Dr,"global",new Dr([[-180,-90],[180,90]]));let ia=Dr;const ke=class ke{static union(e,t){return s1(e,t)}static intersect(e,t){return Tu(e,t)}static surfaceAreaInSqMeters(e){return Of(e)}static centerpoint(e){const t=fl(e);return t.properties=e.properties,t.id=e.id,t}static centerpointCoordinates(e){return fl(e).geometry.coordinates}static distanceBetween(e,t){return Ni(e,t,{units:"meters"})}static convexHull(e,t){return gy(e,t)}static calculateOverlap(e,t){const n=ia.get(e),i=[];if(e.geometry.type==="Point"){const o=e.geometry.coordinates;for(const a of t)if(!(e.properties.id!==void 0&&e.properties.id===a.properties.id)){if(a.geometry===void 0)throw console.error("No geometry for feature ",e),"List of other features contains a feature without geometry an undefined";ke.inside(o,a)&&i.push({feat:a,overlap:void 0})}return i}if(e.geometry.type==="LineString"){for(const o of t){if(e.properties.id!==void 0&&e.properties.id===o.properties.id)continue;const a=ke.calculateIntersection(e,o,n);a!==null&&i.push({feat:o,overlap:a})}return i}if(e.geometry.type==="Polygon"||e.geometry.type==="MultiPolygon"){for(const o of t){if(e.properties.id!==void 0&&e.properties.id===o.properties.id)continue;if(o.geometry.type==="Point"){this.inside(o,e)&&i.push({feat:o,overlap:void 0});continue}const a=this.calculateIntersection(e,o,n);a!==null&&i.push({feat:o,overlap:a})}return i}return console.error("Could not correctly calculate the overlap of ",e,": unsupported type"),i}static inside(e,t){if(t.geometry.type==="Point")return!1;e.geometry!==void 0&&(e=e.geometry.coordinates);const n=e[0],i=e[1];if(t.geometry.type==="MultiPolygon"){const o=t.geometry.coordinates;for(const a of o)if(ke.pointInPolygonCoordinates(n,i,a))return!0;return!1}if(t.geometry.type==="Polygon")return ke.pointInPolygonCoordinates(n,i,t.geometry.coordinates);throw"GeoOperations.inside: unsupported geometry type "+t.geometry.type}static lengthInMeters(e){return Ld(e)*1e3}static buffer(e,t){return o1(e,t/1e3,{units:"kilometers"})}static bbox(e){const[t,n,i,o]=ai(e);return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[t,n],[i,n],[i,o],[t,o],[t,n]]}}}static nearestPoint(e,t){return Xu(e,t,{units:"kilometers"})}static forceLineString(e){return e.geometry.type==="Polygon"?(e={...e},e.geometry={...e.geometry},e.geometry.type="LineString",e.geometry.coordinates=e.geometry.coordinates[0]):e.geometry.type==="MultiPolygon"&&(e={...e},e.geometry={...e.geometry},e.geometry.type="MultiLineString",e.geometry.coordinates=e.geometry.coordinates[0]),e}static toCSV(e){const t=new Set,n=[];function i(s){t.has(s)||(t.add(s),n.push(s))}i("_lat"),i("_lon");const o=[];let a;Array.isArray(e)?a=e:a=e.features;for(const s of a){const u=s.properties;for(const c in u)u.hasOwnProperty(c)&&i(c)}n.sort();for(const s of a){const u=s.properties;let c="";for(const f of n){const h=u[f];h===void 0?c+=",":c+=JSON.stringify(h)+","}o.push(c)}return n.map(s=>JSON.stringify(s)).join(",")+`
`+o.join(`
`)}static ConvertWgs84To900913(e){const t=e[0],n=e[1],i=t*ke._originShift/180;let o=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return o=o*ke._originShift/180,[i,o]}static Convert900913ToWgs84(e){const t=e[0],n=e[1],i=180*t/ke._originShift;let o=180*n/ke._originShift;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),[i,o]}static GeoJsonToWGS84(e){return Ky(e)}static SimplifyCoordinates(e){const t=[];for(let n=1;n<e.length-1;n++){const i=e[n],o=e[n-1],a=e[n+1],s=No(o,i,{final:!0}),u=No(i,a);Math.abs(u-s)<2||t.push(i)}return t}static LineIntersections(e,t){return Ju(e,t).features.map(n=>n.geometry.coordinates)}static spreadIntoBboxes(e,t){const n=new Map;for(const i of e){const a=ia.get(i).expandToTileBounds(t).containingTileRange(t);Ue.MapRange(a,(s,u)=>{const c=Ue.tile_index(t,s,u);let f=n.get(c);f===void 0&&(f=[],n.set(c,f)),f.push(i)})}return n}static toGpx(e,t){t=t==null?void 0:t.trim(),(t===void 0||t==="")&&(t="Uploaded with MapComplete"),t=Mi.EncodeXmlValue(t);const n=[];let i;Array.isArray(e)?i=e:i=e.geometry.coordinates.map(a=>({type:"Feature",properties:{},geometry:{type:"Point",coordinates:a}}));for(const a of i){let s=`    <trkpt lat="${a.geometry.coordinates[1]}" lon="${a.geometry.coordinates[0]}">`;a.properties.date&&(s+=`        <time>${a.properties.date}</time>`),a.properties.altitude&&(s+=`        <ele>${a.properties.altitude}</ele>`),s+="    </trkpt>",n.push(s)}return'<gpx version="1.1" creator="mapcomplete.org" xmlns="http://www.topografix.com/GPX/1/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">'+`
<name>`+t+`</name>
<trk><trkseg>
`+n.join(`
`)+`
</trkseg></trk></gpx>`}static toGpxPoints(e,t){t=t==null?void 0:t.trim(),(t===void 0||t==="")&&(t="Created with MapComplete"),t=Mi.EncodeXmlValue(t);const n=[];for(const o of e){let a=`    <wpt lat="${o.geometry.coordinates[1]}" lon="${o.geometry.coordinates[0]}">`;for(const s in o.properties){const u=s.replaceAll(":","__");a+=`        <${u}>${o.properties[s]}</${u}>
`,s==="website"&&(a+=`        <link>${o.properties[s]}</link>
`)}a+=`    </wpt>
`,n.push(a)}return'<gpx version="1.1" creator="mapcomplete.org" xmlns="http://www.topografix.com/GPX/1/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">'+`
<name>`+t+`</name>
<trk><trkseg>
`+n.join(`
`)+`
</trkseg></trk></gpx>`}static removeOvernoding(e){if(e.geometry.type!=="LineString"&&e.geometry.type!=="Polygon")throw"Overnode removal is only supported on linestrings and polygons";const t={...e,geometry:{...e.geometry}};let n;e.geometry.type==="LineString"?(n=[...e.geometry.coordinates],t.geometry.coordinates=n):(n=[...e.geometry.coordinates[0]],t.geometry.coordinates[0]=n);for(let i=n.length-2;i>=1;i--){const o=n[i],a=n[i+1],s=n[i-1];if(ke.distanceBetween(o,s)<.1){n.splice(i,1);continue}if(i==n.length-2&&ke.distanceBetween(o,a)<.1){n.splice(i,1);continue}const c=No(o,a),f=No(s,o),h=Math.abs(c-f);(h<4||360-h<4)&&n.splice(i,1)}return t}static bearing(e,t){return No(e,t)}static along(e,t,n){return Ly({type:"Feature",geometry:{type:"LineString",coordinates:[e,t]}},n,{units:"meters"}).geometry.coordinates}static completelyWithin(e,t){return Oy(e,t)}static clipWith(e,t){if(e.geometry.type==="Point"){const n=e;return ke.inside(n.geometry.coordinates,t)?[n]:[]}if(e.geometry.type==="LineString"){const n=Vy(e,t),i=[];for(const o of n.features)ke.inside(ke.centerpointCoordinates(o),t)&&(o.properties={...e.properties},i.push(o));return i}if(e.geometry.type==="Polygon"||e.geometry.type=="MultiPolygon"){const n=Tu(e,t);return n.properties={...e.properties},[n]}throw"Invalid geometry type with GeoOperations.clipWith: "+e.geometry.type}static featureToCoordinateWithRenderingType(e,t){switch(t){case"point":return e.geometry.type==="Point"?e.geometry.coordinates:void 0;case"centroid":return e.geometry.type==="Point"?void 0:ke.centerpointCoordinates(e);case"projected_centerpoint":if(e.geometry.type==="LineString"||e.geometry.type==="MultiLineString"){const n=ke.centerpointCoordinates(e);return ke.nearestPoint(e,n).geometry.coordinates}return;case"start":return e.geometry.type==="LineString"?e.geometry.coordinates[0]:void 0;case"end":return e.geometry.type==="LineString"?e.geometry.coordinates.at(-1):void 0;default:throw"Unkown location type: "+t}}static slice(e,t){const n=new Map;for(const i of t){const o=ia.get(i);Ue.MapRange(Ue.tileRangeFrom(o,e),(a,s)=>{const u=Ue.tile_index(e,a,s);let c=n.get(u);c===void 0&&(c=[],n.set(u,c)),c.push(i)})}return n}static outerRing(e){return e.geometry.type!=="Polygon"?e:{type:"Feature",properties:e.properties,geometry:{type:"LineString",coordinates:e.geometry.coordinates[0]}}}static centerpointCoordinatesObj(e){const[t,n]=ke.centerpointCoordinates(e);return{lon:t,lat:n}}static SplitSelfIntersectingWays(e){const t=[];for(const n of e)if(n.geometry.type==="LineString"){let i=n.geometry.coordinates;for(let o=i.length-1;o>=0;o--){const a=i[o];for(let s=o+1;s<i.length;s++){const u=i[s];if(Math.abs(a[0]-u[0])<=1e-6&&Math.abs(a[1]-u[1])<=1e-7){console.debug("SPlitting way",n.properties.id),t.push({...n,geometry:{...n.geometry,coordinates:i.slice(o+1)}}),i=i.slice(0,o+1);break}}}t.push({...n,geometry:{...n.geometry,coordinates:i}})}return t}static distanceToHuman(e){if(e===void 0)return"";if(e=Math.round(e),e<1e3)return e+"m";if(e>=1e4)return Math.round(e/1e3)+"km";e=Math.round(e/100);const t=""+e;return t.substring(0,t.length-1)+"."+t.substring(t.length-1)+"km"}static parseBearing(e){let t;if(typeof e=="string"?(e=e.trim(),e.endsWith("°")&&(e=e.substring(0,e.length-1).trim()),t=Number(e)):t=e,!isNaN(t)){for(;t<0;)t+=360;return t%360}return ke.reverseBearing[e]}static bearingToHuman(e){for(;e<0;)e+=360;e%=360,e+=22.5;const t=Math.floor(e/45)%ke.directions.length;return ke.directions[t]}static bearingToHumanRelative(e){for(;e<0;)e+=360;e%=360,e+=22.5;const t=Math.floor(e/45)%ke.directionsRelative.length;return ke.directionsRelative[t]}static pointInPolygonCoordinates(e,t,n){if(!ke.pointWithinRing(e,t,n[0]))return!1;for(let o=1;o<n.length;o++)if(ke.pointWithinRing(e,t,n[o]))return!1;return!0}static pointWithinRing(e,t,n){let i=!1;for(let o=0,a=n.length-1;o<n.length;a=o++){const s=n[o],u=n[a],c=s[0],f=s[1],h=u[0],p=u[1];f>t!=p>t&&e<(h-c)*(t-f)/(p-f)+c&&(i=!i)}return i}static calculateIntersection(e,t,n,i){if(e.geometry.type==="LineString"){if(i=i??ia.get(t),!n.overlapsWith(i))return null;let a=Ju(e,t);if(a.features.length==0){const h=e.geometry.coordinates[0];return this.inside(h,t)?this.lengthInMeters(e):null}let s=a.features.map(f=>f.geometry.coordinates);if(t.geometry.type==="LineString")return s.length>0?0:null;if(s.length==1){const f=e.geometry.coordinates,h=f[0];this.inside(h,t)?s.push(h):s.push(f[f.length-1])}let u=Ry(jt(s[0]),jt(s[1]),e);return u==null?null:Ld(u)*1e3}if(e.geometry.type==="Polygon"||e.geometry.type==="MultiPolygon"){const o=ia.get(t);if(!n.overlapsWith(o))return null;if(t.geometry.type==="LineString")return this.calculateIntersection(t,e,o,n);try{const s=Tu(e,t);return s==null?null:Of(s)}catch(s){if(s.message==="Each LinearRing of a Polygon must have 4 or more Positions.")return null;if(s.message.indexOf("SweepLine tree")>=0){console.log("Applying fallback intersection...");const u=Tu(hl(e),hl(t));return u==null?null:Of(u)}throw s}}throw"CalculateIntersection fallthrough: can not calculate an intersection between features"}};_e(ke,"_earthRadius",6378137),_e(ke,"_originShift",2*Math.PI*ke._earthRadius/2),_e(ke,"directions",["N","NE","E","SE","S","SW","W","NW"]),_e(ke,"directionsRelative",["straight","slight_right","right","sharp_right","behind","sharp_left","left","slight_left"]),_e(ke,"reverseBearing",{N:0,NNE:22.5,NE:45,ENE:67.5,E:90,ESE:112.5,SE:135,SSE:157.5,S:180,SSW:202.5,SW:225,WSW:247.5,W:270,WNW:292.5,NW:315,NNW:337.5});let An=ke;var Pi={},Bc={},Qo={},bh={exports:{}};bh.exports;(function(r){(function(e,t){function n(C,l){if(!C)throw new Error(l||"Assertion failed")}function i(C,l){C.super_=l;var g=function(){};g.prototype=l.prototype,C.prototype=new g,C.prototype.constructor=C}function o(C,l,g){if(o.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((l==="le"||l==="be")&&(g=l,l=10),this._init(C||0,l||10,g||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=$p.Buffer}catch{}o.isBN=function(l){return l instanceof o?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===o.wordSize&&Array.isArray(l.words)},o.max=function(l,g){return l.cmp(g)>0?l:g},o.min=function(l,g){return l.cmp(g)<0?l:g},o.prototype._init=function(l,g,w){if(typeof l=="number")return this._initNumber(l,g,w);if(typeof l=="object")return this._initArray(l,g,w);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),l=l.toString().replace(/\s+/g,"");var x=0;l[0]==="-"&&(x++,this.negative=1),x<l.length&&(g===16?this._parseHex(l,x,w):(this._parseBase(l,g,x),w==="le"&&this._initArray(this.toArray(),g,w)))},o.prototype._initNumber=function(l,g,w){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(n(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),g,w)},o.prototype._initArray=function(l,g,w){if(n(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var N,T,B=0;if(w==="be")for(x=l.length-1,N=0;x>=0;x-=3)T=l[x]|l[x-1]<<8|l[x-2]<<16,this.words[N]|=T<<B&67108863,this.words[N+1]=T>>>26-B&67108863,B+=24,B>=26&&(B-=26,N++);else if(w==="le")for(x=0,N=0;x<l.length;x+=3)T=l[x]|l[x+1]<<8|l[x+2]<<16,this.words[N]|=T<<B&67108863,this.words[N+1]=T>>>26-B&67108863,B+=24,B>=26&&(B-=26,N++);return this.strip()};function s(C,l){var g=C.charCodeAt(l);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function u(C,l,g){var w=s(C,g);return g-1>=l&&(w|=s(C,g-1)<<4),w}o.prototype._parseHex=function(l,g,w){this.length=Math.ceil((l.length-g)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var N=0,T=0,B;if(w==="be")for(x=l.length-1;x>=g;x-=2)B=u(l,g,x)<<N,this.words[T]|=B&67108863,N>=18?(N-=18,T+=1,this.words[T]|=B>>>26):N+=8;else{var P=l.length-g;for(x=P%2===0?g+1:g;x<l.length;x+=2)B=u(l,g,x)<<N,this.words[T]|=B&67108863,N>=18?(N-=18,T+=1,this.words[T]|=B>>>26):N+=8}this.strip()};function c(C,l,g,w){for(var x=0,N=Math.min(C.length,g),T=l;T<N;T++){var B=C.charCodeAt(T)-48;x*=w,B>=49?x+=B-49+10:B>=17?x+=B-17+10:x+=B}return x}o.prototype._parseBase=function(l,g,w){this.words=[0],this.length=1;for(var x=0,N=1;N<=67108863;N*=g)x++;x--,N=N/g|0;for(var T=l.length-w,B=T%x,P=Math.min(T,T-B)+w,d=0,I=w;I<P;I+=x)d=c(l,I,I+x,g),this.imuln(N),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(B!==0){var K=1;for(d=c(l,I,l.length,g),I=0;I<B;I++)K*=g;this.imuln(K),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},o.prototype.copy=function(l){l.words=new Array(this.length);for(var g=0;g<this.length;g++)l.words[g]=this.words[g];l.length=this.length,l.negative=this.negative,l.red=this.red},o.prototype.clone=function(){var l=new o(null);return this.copy(l),l},o.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(l,g){l=l||10,g=g|0||1;var w;if(l===16||l==="hex"){w="";for(var x=0,N=0,T=0;T<this.length;T++){var B=this.words[T],P=((B<<x|N)&16777215).toString(16);N=B>>>24-x&16777215,N!==0||T!==this.length-1?w=f[6-P.length]+P+w:w=P+w,x+=2,x>=26&&(x-=26,T--)}for(N!==0&&(w=N.toString(16)+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(l===(l|0)&&l>=2&&l<=36){var d=h[l],I=p[l];w="";var K=this.clone();for(K.negative=0;!K.isZero();){var Q=K.modn(I).toString(l);K=K.idivn(I),K.isZero()?w=Q+w:w=f[d-Q.length]+Q+w}for(this.isZero()&&(w="0"+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(l,g){return n(typeof a<"u"),this.toArrayLike(a,l,g)},o.prototype.toArray=function(l,g){return this.toArrayLike(Array,l,g)},o.prototype.toArrayLike=function(l,g,w){var x=this.byteLength(),N=w||Math.max(1,x);n(x<=N,"byte array longer than desired length"),n(N>0,"Requested array length <= 0"),this.strip();var T=g==="le",B=new l(N),P,d,I=this.clone();if(T){for(d=0;!I.isZero();d++)P=I.andln(255),I.iushrn(8),B[d]=P;for(;d<N;d++)B[d]=0}else{for(d=0;d<N-x;d++)B[d]=0;for(d=0;!I.isZero();d++)P=I.andln(255),I.iushrn(8),B[N-d-1]=P}return B},Math.clz32?o.prototype._countBits=function(l){return 32-Math.clz32(l)}:o.prototype._countBits=function(l){var g=l,w=0;return g>=4096&&(w+=13,g>>>=13),g>=64&&(w+=7,g>>>=7),g>=8&&(w+=4,g>>>=4),g>=2&&(w+=2,g>>>=2),w+g},o.prototype._zeroBits=function(l){if(l===0)return 26;var g=l,w=0;return g&8191||(w+=13,g>>>=13),g&127||(w+=7,g>>>=7),g&15||(w+=4,g>>>=4),g&3||(w+=2,g>>>=2),g&1||w++,w},o.prototype.bitLength=function(){var l=this.words[this.length-1],g=this._countBits(l);return(this.length-1)*26+g};function b(C){for(var l=new Array(C.bitLength()),g=0;g<l.length;g++){var w=g/26|0,x=g%26;l[g]=(C.words[w]&1<<x)>>>x}return l}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,g=0;g<this.length;g++){var w=this._zeroBits(this.words[g]);if(l+=w,w!==26)break}return l},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},o.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]|l.words[g];return this.strip()},o.prototype.ior=function(l){return n((this.negative|l.negative)===0),this.iuor(l)},o.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},o.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},o.prototype.iuand=function(l){var g;this.length>l.length?g=l:g=this;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]&l.words[w];return this.length=g.length,this.strip()},o.prototype.iand=function(l){return n((this.negative|l.negative)===0),this.iuand(l)},o.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},o.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},o.prototype.iuxor=function(l){var g,w;this.length>l.length?(g=this,w=l):(g=l,w=this);for(var x=0;x<w.length;x++)this.words[x]=g.words[x]^w.words[x];if(this!==g)for(;x<g.length;x++)this.words[x]=g.words[x];return this.length=g.length,this.strip()},o.prototype.ixor=function(l){return n((this.negative|l.negative)===0),this.iuxor(l)},o.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},o.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},o.prototype.inotn=function(l){n(typeof l=="number"&&l>=0);var g=Math.ceil(l/26)|0,w=l%26;this._expand(g),w>0&&g--;for(var x=0;x<g;x++)this.words[x]=~this.words[x]&67108863;return w>0&&(this.words[x]=~this.words[x]&67108863>>26-w),this.strip()},o.prototype.notn=function(l){return this.clone().inotn(l)},o.prototype.setn=function(l,g){n(typeof l=="number"&&l>=0);var w=l/26|0,x=l%26;return this._expand(w+1),g?this.words[w]=this.words[w]|1<<x:this.words[w]=this.words[w]&~(1<<x),this.strip()},o.prototype.iadd=function(l){var g;if(this.negative!==0&&l.negative===0)return this.negative=0,g=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,g=this.isub(l),l.negative=1,g._normSign();var w,x;this.length>l.length?(w=this,x=l):(w=l,x=this);for(var N=0,T=0;T<x.length;T++)g=(w.words[T]|0)+(x.words[T]|0)+N,this.words[T]=g&67108863,N=g>>>26;for(;N!==0&&T<w.length;T++)g=(w.words[T]|0)+N,this.words[T]=g&67108863,N=g>>>26;if(this.length=w.length,N!==0)this.words[this.length]=N,this.length++;else if(w!==this)for(;T<w.length;T++)this.words[T]=w.words[T];return this},o.prototype.add=function(l){var g;return l.negative!==0&&this.negative===0?(l.negative=0,g=this.sub(l),l.negative^=1,g):l.negative===0&&this.negative!==0?(this.negative=0,g=l.sub(this),this.negative=1,g):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},o.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var g=this.iadd(l);return l.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var w=this.cmp(l);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,N;w>0?(x=this,N=l):(x=l,N=this);for(var T=0,B=0;B<N.length;B++)g=(x.words[B]|0)-(N.words[B]|0)+T,T=g>>26,this.words[B]=g&67108863;for(;T!==0&&B<x.length;B++)g=(x.words[B]|0)+T,T=g>>26,this.words[B]=g&67108863;if(T===0&&B<x.length&&x!==this)for(;B<x.length;B++)this.words[B]=x.words[B];return this.length=Math.max(this.length,B),x!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(l){return this.clone().isub(l)};function _(C,l,g){g.negative=l.negative^C.negative;var w=C.length+l.length|0;g.length=w,w=w-1|0;var x=C.words[0]|0,N=l.words[0]|0,T=x*N,B=T&67108863,P=T/67108864|0;g.words[0]=B;for(var d=1;d<w;d++){for(var I=P>>>26,K=P&67108863,Q=Math.min(d,l.length-1),Z=Math.max(0,d-C.length+1);Z<=Q;Z++){var te=d-Z|0;x=C.words[te]|0,N=l.words[Z]|0,T=x*N+K,I+=T/67108864|0,K=T&67108863}g.words[d]=K|0,P=I|0}return P!==0?g.words[d]=P|0:g.length--,g.strip()}var S=function(l,g,w){var x=l.words,N=g.words,T=w.words,B=0,P,d,I,K=x[0]|0,Q=K&8191,Z=K>>>13,te=x[1]|0,ne=te&8191,le=te>>>13,$e=x[2]|0,pe=$e&8191,xe=$e>>>13,nr=x[3]|0,Re=nr&8191,ge=nr>>>13,ir=x[4]|0,Te=ir&8191,A=ir>>>13,m=x[5]|0,y=m&8191,L=m>>>13,G=x[6]|0,J=G&8191,Y=G>>>13,Se=x[7]|0,ce=Se&8191,de=Se>>>13,at=x[8]|0,ye=at&8191,Ze=at>>>13,Ts=x[9]|0,st=Ts&8191,bt=Ts>>>13,id=N[0]|0,wt=id&8191,Et=id>>>13,od=N[1]|0,xt=od&8191,St=od>>>13,ad=N[2]|0,Ct=ad&8191,It=ad>>>13,sd=N[3]|0,At=sd&8191,Mt=sd>>>13,ud=N[4]|0,Nt=ud&8191,Pt=ud>>>13,cd=N[5]|0,Lt=cd&8191,Rt=cd>>>13,fd=N[6]|0,Tt=fd&8191,Ot=fd>>>13,ld=N[7]|0,Dt=ld&8191,kt=ld>>>13,hd=N[8]|0,Bt=hd&8191,Ft=hd>>>13,dd=N[9]|0,zt=dd&8191,Ut=dd>>>13;w.negative=l.negative^g.negative,w.length=19,P=Math.imul(Q,wt),d=Math.imul(Q,Et),d=d+Math.imul(Z,wt)|0,I=Math.imul(Z,Et);var ff=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(ff>>>26)|0,ff&=67108863,P=Math.imul(ne,wt),d=Math.imul(ne,Et),d=d+Math.imul(le,wt)|0,I=Math.imul(le,Et),P=P+Math.imul(Q,xt)|0,d=d+Math.imul(Q,St)|0,d=d+Math.imul(Z,xt)|0,I=I+Math.imul(Z,St)|0;var lf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(lf>>>26)|0,lf&=67108863,P=Math.imul(pe,wt),d=Math.imul(pe,Et),d=d+Math.imul(xe,wt)|0,I=Math.imul(xe,Et),P=P+Math.imul(ne,xt)|0,d=d+Math.imul(ne,St)|0,d=d+Math.imul(le,xt)|0,I=I+Math.imul(le,St)|0,P=P+Math.imul(Q,Ct)|0,d=d+Math.imul(Q,It)|0,d=d+Math.imul(Z,Ct)|0,I=I+Math.imul(Z,It)|0;var hf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(hf>>>26)|0,hf&=67108863,P=Math.imul(Re,wt),d=Math.imul(Re,Et),d=d+Math.imul(ge,wt)|0,I=Math.imul(ge,Et),P=P+Math.imul(pe,xt)|0,d=d+Math.imul(pe,St)|0,d=d+Math.imul(xe,xt)|0,I=I+Math.imul(xe,St)|0,P=P+Math.imul(ne,Ct)|0,d=d+Math.imul(ne,It)|0,d=d+Math.imul(le,Ct)|0,I=I+Math.imul(le,It)|0,P=P+Math.imul(Q,At)|0,d=d+Math.imul(Q,Mt)|0,d=d+Math.imul(Z,At)|0,I=I+Math.imul(Z,Mt)|0;var df=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(df>>>26)|0,df&=67108863,P=Math.imul(Te,wt),d=Math.imul(Te,Et),d=d+Math.imul(A,wt)|0,I=Math.imul(A,Et),P=P+Math.imul(Re,xt)|0,d=d+Math.imul(Re,St)|0,d=d+Math.imul(ge,xt)|0,I=I+Math.imul(ge,St)|0,P=P+Math.imul(pe,Ct)|0,d=d+Math.imul(pe,It)|0,d=d+Math.imul(xe,Ct)|0,I=I+Math.imul(xe,It)|0,P=P+Math.imul(ne,At)|0,d=d+Math.imul(ne,Mt)|0,d=d+Math.imul(le,At)|0,I=I+Math.imul(le,Mt)|0,P=P+Math.imul(Q,Nt)|0,d=d+Math.imul(Q,Pt)|0,d=d+Math.imul(Z,Nt)|0,I=I+Math.imul(Z,Pt)|0;var pf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(pf>>>26)|0,pf&=67108863,P=Math.imul(y,wt),d=Math.imul(y,Et),d=d+Math.imul(L,wt)|0,I=Math.imul(L,Et),P=P+Math.imul(Te,xt)|0,d=d+Math.imul(Te,St)|0,d=d+Math.imul(A,xt)|0,I=I+Math.imul(A,St)|0,P=P+Math.imul(Re,Ct)|0,d=d+Math.imul(Re,It)|0,d=d+Math.imul(ge,Ct)|0,I=I+Math.imul(ge,It)|0,P=P+Math.imul(pe,At)|0,d=d+Math.imul(pe,Mt)|0,d=d+Math.imul(xe,At)|0,I=I+Math.imul(xe,Mt)|0,P=P+Math.imul(ne,Nt)|0,d=d+Math.imul(ne,Pt)|0,d=d+Math.imul(le,Nt)|0,I=I+Math.imul(le,Pt)|0,P=P+Math.imul(Q,Lt)|0,d=d+Math.imul(Q,Rt)|0,d=d+Math.imul(Z,Lt)|0,I=I+Math.imul(Z,Rt)|0;var gf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(gf>>>26)|0,gf&=67108863,P=Math.imul(J,wt),d=Math.imul(J,Et),d=d+Math.imul(Y,wt)|0,I=Math.imul(Y,Et),P=P+Math.imul(y,xt)|0,d=d+Math.imul(y,St)|0,d=d+Math.imul(L,xt)|0,I=I+Math.imul(L,St)|0,P=P+Math.imul(Te,Ct)|0,d=d+Math.imul(Te,It)|0,d=d+Math.imul(A,Ct)|0,I=I+Math.imul(A,It)|0,P=P+Math.imul(Re,At)|0,d=d+Math.imul(Re,Mt)|0,d=d+Math.imul(ge,At)|0,I=I+Math.imul(ge,Mt)|0,P=P+Math.imul(pe,Nt)|0,d=d+Math.imul(pe,Pt)|0,d=d+Math.imul(xe,Nt)|0,I=I+Math.imul(xe,Pt)|0,P=P+Math.imul(ne,Lt)|0,d=d+Math.imul(ne,Rt)|0,d=d+Math.imul(le,Lt)|0,I=I+Math.imul(le,Rt)|0,P=P+Math.imul(Q,Tt)|0,d=d+Math.imul(Q,Ot)|0,d=d+Math.imul(Z,Tt)|0,I=I+Math.imul(Z,Ot)|0;var mf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(mf>>>26)|0,mf&=67108863,P=Math.imul(ce,wt),d=Math.imul(ce,Et),d=d+Math.imul(de,wt)|0,I=Math.imul(de,Et),P=P+Math.imul(J,xt)|0,d=d+Math.imul(J,St)|0,d=d+Math.imul(Y,xt)|0,I=I+Math.imul(Y,St)|0,P=P+Math.imul(y,Ct)|0,d=d+Math.imul(y,It)|0,d=d+Math.imul(L,Ct)|0,I=I+Math.imul(L,It)|0,P=P+Math.imul(Te,At)|0,d=d+Math.imul(Te,Mt)|0,d=d+Math.imul(A,At)|0,I=I+Math.imul(A,Mt)|0,P=P+Math.imul(Re,Nt)|0,d=d+Math.imul(Re,Pt)|0,d=d+Math.imul(ge,Nt)|0,I=I+Math.imul(ge,Pt)|0,P=P+Math.imul(pe,Lt)|0,d=d+Math.imul(pe,Rt)|0,d=d+Math.imul(xe,Lt)|0,I=I+Math.imul(xe,Rt)|0,P=P+Math.imul(ne,Tt)|0,d=d+Math.imul(ne,Ot)|0,d=d+Math.imul(le,Tt)|0,I=I+Math.imul(le,Ot)|0,P=P+Math.imul(Q,Dt)|0,d=d+Math.imul(Q,kt)|0,d=d+Math.imul(Z,Dt)|0,I=I+Math.imul(Z,kt)|0;var vf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(vf>>>26)|0,vf&=67108863,P=Math.imul(ye,wt),d=Math.imul(ye,Et),d=d+Math.imul(Ze,wt)|0,I=Math.imul(Ze,Et),P=P+Math.imul(ce,xt)|0,d=d+Math.imul(ce,St)|0,d=d+Math.imul(de,xt)|0,I=I+Math.imul(de,St)|0,P=P+Math.imul(J,Ct)|0,d=d+Math.imul(J,It)|0,d=d+Math.imul(Y,Ct)|0,I=I+Math.imul(Y,It)|0,P=P+Math.imul(y,At)|0,d=d+Math.imul(y,Mt)|0,d=d+Math.imul(L,At)|0,I=I+Math.imul(L,Mt)|0,P=P+Math.imul(Te,Nt)|0,d=d+Math.imul(Te,Pt)|0,d=d+Math.imul(A,Nt)|0,I=I+Math.imul(A,Pt)|0,P=P+Math.imul(Re,Lt)|0,d=d+Math.imul(Re,Rt)|0,d=d+Math.imul(ge,Lt)|0,I=I+Math.imul(ge,Rt)|0,P=P+Math.imul(pe,Tt)|0,d=d+Math.imul(pe,Ot)|0,d=d+Math.imul(xe,Tt)|0,I=I+Math.imul(xe,Ot)|0,P=P+Math.imul(ne,Dt)|0,d=d+Math.imul(ne,kt)|0,d=d+Math.imul(le,Dt)|0,I=I+Math.imul(le,kt)|0,P=P+Math.imul(Q,Bt)|0,d=d+Math.imul(Q,Ft)|0,d=d+Math.imul(Z,Bt)|0,I=I+Math.imul(Z,Ft)|0;var yf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(yf>>>26)|0,yf&=67108863,P=Math.imul(st,wt),d=Math.imul(st,Et),d=d+Math.imul(bt,wt)|0,I=Math.imul(bt,Et),P=P+Math.imul(ye,xt)|0,d=d+Math.imul(ye,St)|0,d=d+Math.imul(Ze,xt)|0,I=I+Math.imul(Ze,St)|0,P=P+Math.imul(ce,Ct)|0,d=d+Math.imul(ce,It)|0,d=d+Math.imul(de,Ct)|0,I=I+Math.imul(de,It)|0,P=P+Math.imul(J,At)|0,d=d+Math.imul(J,Mt)|0,d=d+Math.imul(Y,At)|0,I=I+Math.imul(Y,Mt)|0,P=P+Math.imul(y,Nt)|0,d=d+Math.imul(y,Pt)|0,d=d+Math.imul(L,Nt)|0,I=I+Math.imul(L,Pt)|0,P=P+Math.imul(Te,Lt)|0,d=d+Math.imul(Te,Rt)|0,d=d+Math.imul(A,Lt)|0,I=I+Math.imul(A,Rt)|0,P=P+Math.imul(Re,Tt)|0,d=d+Math.imul(Re,Ot)|0,d=d+Math.imul(ge,Tt)|0,I=I+Math.imul(ge,Ot)|0,P=P+Math.imul(pe,Dt)|0,d=d+Math.imul(pe,kt)|0,d=d+Math.imul(xe,Dt)|0,I=I+Math.imul(xe,kt)|0,P=P+Math.imul(ne,Bt)|0,d=d+Math.imul(ne,Ft)|0,d=d+Math.imul(le,Bt)|0,I=I+Math.imul(le,Ft)|0,P=P+Math.imul(Q,zt)|0,d=d+Math.imul(Q,Ut)|0,d=d+Math.imul(Z,zt)|0,I=I+Math.imul(Z,Ut)|0;var _f=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(_f>>>26)|0,_f&=67108863,P=Math.imul(st,xt),d=Math.imul(st,St),d=d+Math.imul(bt,xt)|0,I=Math.imul(bt,St),P=P+Math.imul(ye,Ct)|0,d=d+Math.imul(ye,It)|0,d=d+Math.imul(Ze,Ct)|0,I=I+Math.imul(Ze,It)|0,P=P+Math.imul(ce,At)|0,d=d+Math.imul(ce,Mt)|0,d=d+Math.imul(de,At)|0,I=I+Math.imul(de,Mt)|0,P=P+Math.imul(J,Nt)|0,d=d+Math.imul(J,Pt)|0,d=d+Math.imul(Y,Nt)|0,I=I+Math.imul(Y,Pt)|0,P=P+Math.imul(y,Lt)|0,d=d+Math.imul(y,Rt)|0,d=d+Math.imul(L,Lt)|0,I=I+Math.imul(L,Rt)|0,P=P+Math.imul(Te,Tt)|0,d=d+Math.imul(Te,Ot)|0,d=d+Math.imul(A,Tt)|0,I=I+Math.imul(A,Ot)|0,P=P+Math.imul(Re,Dt)|0,d=d+Math.imul(Re,kt)|0,d=d+Math.imul(ge,Dt)|0,I=I+Math.imul(ge,kt)|0,P=P+Math.imul(pe,Bt)|0,d=d+Math.imul(pe,Ft)|0,d=d+Math.imul(xe,Bt)|0,I=I+Math.imul(xe,Ft)|0,P=P+Math.imul(ne,zt)|0,d=d+Math.imul(ne,Ut)|0,d=d+Math.imul(le,zt)|0,I=I+Math.imul(le,Ut)|0;var bf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(bf>>>26)|0,bf&=67108863,P=Math.imul(st,Ct),d=Math.imul(st,It),d=d+Math.imul(bt,Ct)|0,I=Math.imul(bt,It),P=P+Math.imul(ye,At)|0,d=d+Math.imul(ye,Mt)|0,d=d+Math.imul(Ze,At)|0,I=I+Math.imul(Ze,Mt)|0,P=P+Math.imul(ce,Nt)|0,d=d+Math.imul(ce,Pt)|0,d=d+Math.imul(de,Nt)|0,I=I+Math.imul(de,Pt)|0,P=P+Math.imul(J,Lt)|0,d=d+Math.imul(J,Rt)|0,d=d+Math.imul(Y,Lt)|0,I=I+Math.imul(Y,Rt)|0,P=P+Math.imul(y,Tt)|0,d=d+Math.imul(y,Ot)|0,d=d+Math.imul(L,Tt)|0,I=I+Math.imul(L,Ot)|0,P=P+Math.imul(Te,Dt)|0,d=d+Math.imul(Te,kt)|0,d=d+Math.imul(A,Dt)|0,I=I+Math.imul(A,kt)|0,P=P+Math.imul(Re,Bt)|0,d=d+Math.imul(Re,Ft)|0,d=d+Math.imul(ge,Bt)|0,I=I+Math.imul(ge,Ft)|0,P=P+Math.imul(pe,zt)|0,d=d+Math.imul(pe,Ut)|0,d=d+Math.imul(xe,zt)|0,I=I+Math.imul(xe,Ut)|0;var wf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(wf>>>26)|0,wf&=67108863,P=Math.imul(st,At),d=Math.imul(st,Mt),d=d+Math.imul(bt,At)|0,I=Math.imul(bt,Mt),P=P+Math.imul(ye,Nt)|0,d=d+Math.imul(ye,Pt)|0,d=d+Math.imul(Ze,Nt)|0,I=I+Math.imul(Ze,Pt)|0,P=P+Math.imul(ce,Lt)|0,d=d+Math.imul(ce,Rt)|0,d=d+Math.imul(de,Lt)|0,I=I+Math.imul(de,Rt)|0,P=P+Math.imul(J,Tt)|0,d=d+Math.imul(J,Ot)|0,d=d+Math.imul(Y,Tt)|0,I=I+Math.imul(Y,Ot)|0,P=P+Math.imul(y,Dt)|0,d=d+Math.imul(y,kt)|0,d=d+Math.imul(L,Dt)|0,I=I+Math.imul(L,kt)|0,P=P+Math.imul(Te,Bt)|0,d=d+Math.imul(Te,Ft)|0,d=d+Math.imul(A,Bt)|0,I=I+Math.imul(A,Ft)|0,P=P+Math.imul(Re,zt)|0,d=d+Math.imul(Re,Ut)|0,d=d+Math.imul(ge,zt)|0,I=I+Math.imul(ge,Ut)|0;var Ef=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(Ef>>>26)|0,Ef&=67108863,P=Math.imul(st,Nt),d=Math.imul(st,Pt),d=d+Math.imul(bt,Nt)|0,I=Math.imul(bt,Pt),P=P+Math.imul(ye,Lt)|0,d=d+Math.imul(ye,Rt)|0,d=d+Math.imul(Ze,Lt)|0,I=I+Math.imul(Ze,Rt)|0,P=P+Math.imul(ce,Tt)|0,d=d+Math.imul(ce,Ot)|0,d=d+Math.imul(de,Tt)|0,I=I+Math.imul(de,Ot)|0,P=P+Math.imul(J,Dt)|0,d=d+Math.imul(J,kt)|0,d=d+Math.imul(Y,Dt)|0,I=I+Math.imul(Y,kt)|0,P=P+Math.imul(y,Bt)|0,d=d+Math.imul(y,Ft)|0,d=d+Math.imul(L,Bt)|0,I=I+Math.imul(L,Ft)|0,P=P+Math.imul(Te,zt)|0,d=d+Math.imul(Te,Ut)|0,d=d+Math.imul(A,zt)|0,I=I+Math.imul(A,Ut)|0;var xf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(xf>>>26)|0,xf&=67108863,P=Math.imul(st,Lt),d=Math.imul(st,Rt),d=d+Math.imul(bt,Lt)|0,I=Math.imul(bt,Rt),P=P+Math.imul(ye,Tt)|0,d=d+Math.imul(ye,Ot)|0,d=d+Math.imul(Ze,Tt)|0,I=I+Math.imul(Ze,Ot)|0,P=P+Math.imul(ce,Dt)|0,d=d+Math.imul(ce,kt)|0,d=d+Math.imul(de,Dt)|0,I=I+Math.imul(de,kt)|0,P=P+Math.imul(J,Bt)|0,d=d+Math.imul(J,Ft)|0,d=d+Math.imul(Y,Bt)|0,I=I+Math.imul(Y,Ft)|0,P=P+Math.imul(y,zt)|0,d=d+Math.imul(y,Ut)|0,d=d+Math.imul(L,zt)|0,I=I+Math.imul(L,Ut)|0;var Sf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(Sf>>>26)|0,Sf&=67108863,P=Math.imul(st,Tt),d=Math.imul(st,Ot),d=d+Math.imul(bt,Tt)|0,I=Math.imul(bt,Ot),P=P+Math.imul(ye,Dt)|0,d=d+Math.imul(ye,kt)|0,d=d+Math.imul(Ze,Dt)|0,I=I+Math.imul(Ze,kt)|0,P=P+Math.imul(ce,Bt)|0,d=d+Math.imul(ce,Ft)|0,d=d+Math.imul(de,Bt)|0,I=I+Math.imul(de,Ft)|0,P=P+Math.imul(J,zt)|0,d=d+Math.imul(J,Ut)|0,d=d+Math.imul(Y,zt)|0,I=I+Math.imul(Y,Ut)|0;var Cf=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(Cf>>>26)|0,Cf&=67108863,P=Math.imul(st,Dt),d=Math.imul(st,kt),d=d+Math.imul(bt,Dt)|0,I=Math.imul(bt,kt),P=P+Math.imul(ye,Bt)|0,d=d+Math.imul(ye,Ft)|0,d=d+Math.imul(Ze,Bt)|0,I=I+Math.imul(Ze,Ft)|0,P=P+Math.imul(ce,zt)|0,d=d+Math.imul(ce,Ut)|0,d=d+Math.imul(de,zt)|0,I=I+Math.imul(de,Ut)|0;var If=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(If>>>26)|0,If&=67108863,P=Math.imul(st,Bt),d=Math.imul(st,Ft),d=d+Math.imul(bt,Bt)|0,I=Math.imul(bt,Ft),P=P+Math.imul(ye,zt)|0,d=d+Math.imul(ye,Ut)|0,d=d+Math.imul(Ze,zt)|0,I=I+Math.imul(Ze,Ut)|0;var Af=(B+P|0)+((d&8191)<<13)|0;B=(I+(d>>>13)|0)+(Af>>>26)|0,Af&=67108863,P=Math.imul(st,zt),d=Math.imul(st,Ut),d=d+Math.imul(bt,zt)|0,I=Math.imul(bt,Ut);var Mf=(B+P|0)+((d&8191)<<13)|0;return B=(I+(d>>>13)|0)+(Mf>>>26)|0,Mf&=67108863,T[0]=ff,T[1]=lf,T[2]=hf,T[3]=df,T[4]=pf,T[5]=gf,T[6]=mf,T[7]=vf,T[8]=yf,T[9]=_f,T[10]=bf,T[11]=wf,T[12]=Ef,T[13]=xf,T[14]=Sf,T[15]=Cf,T[16]=If,T[17]=Af,T[18]=Mf,B!==0&&(T[19]=B,w.length++),w};Math.imul||(S=_);function R(C,l,g){g.negative=l.negative^C.negative,g.length=C.length+l.length;for(var w=0,x=0,N=0;N<g.length-1;N++){var T=x;x=0;for(var B=w&67108863,P=Math.min(N,l.length-1),d=Math.max(0,N-C.length+1);d<=P;d++){var I=N-d,K=C.words[I]|0,Q=l.words[d]|0,Z=K*Q,te=Z&67108863;T=T+(Z/67108864|0)|0,te=te+B|0,B=te&67108863,T=T+(te>>>26)|0,x+=T>>>26,T&=67108863}g.words[N]=B,w=T,T=x}return w!==0?g.words[N]=w:g.length--,g.strip()}function D(C,l,g){var w=new v;return w.mulp(C,l,g)}o.prototype.mulTo=function(l,g){var w,x=this.length+l.length;return this.length===10&&l.length===10?w=S(this,l,g):x<63?w=_(this,l,g):x<1024?w=R(this,l,g):w=D(this,l,g),w};function v(C,l){this.x=C,this.y=l}v.prototype.makeRBT=function(l){for(var g=new Array(l),w=o.prototype._countBits(l)-1,x=0;x<l;x++)g[x]=this.revBin(x,w,l);return g},v.prototype.revBin=function(l,g,w){if(l===0||l===w-1)return l;for(var x=0,N=0;N<g;N++)x|=(l&1)<<g-N-1,l>>=1;return x},v.prototype.permute=function(l,g,w,x,N,T){for(var B=0;B<T;B++)x[B]=g[l[B]],N[B]=w[l[B]]},v.prototype.transform=function(l,g,w,x,N,T){this.permute(T,l,g,w,x,N);for(var B=1;B<N;B<<=1)for(var P=B<<1,d=Math.cos(2*Math.PI/P),I=Math.sin(2*Math.PI/P),K=0;K<N;K+=P)for(var Q=d,Z=I,te=0;te<B;te++){var ne=w[K+te],le=x[K+te],$e=w[K+te+B],pe=x[K+te+B],xe=Q*$e-Z*pe;pe=Q*pe+Z*$e,$e=xe,w[K+te]=ne+$e,x[K+te]=le+pe,w[K+te+B]=ne-$e,x[K+te+B]=le-pe,te!==P&&(xe=d*Q-I*Z,Z=d*Z+I*Q,Q=xe)}},v.prototype.guessLen13b=function(l,g){var w=Math.max(g,l)|1,x=w&1,N=0;for(w=w/2|0;w;w=w>>>1)N++;return 1<<N+1+x},v.prototype.conjugate=function(l,g,w){if(!(w<=1))for(var x=0;x<w/2;x++){var N=l[x];l[x]=l[w-x-1],l[w-x-1]=N,N=g[x],g[x]=-g[w-x-1],g[w-x-1]=-N}},v.prototype.normalize13b=function(l,g){for(var w=0,x=0;x<g/2;x++){var N=Math.round(l[2*x+1]/g)*8192+Math.round(l[2*x]/g)+w;l[x]=N&67108863,N<67108864?w=0:w=N/67108864|0}return l},v.prototype.convert13b=function(l,g,w,x){for(var N=0,T=0;T<g;T++)N=N+(l[T]|0),w[2*T]=N&8191,N=N>>>13,w[2*T+1]=N&8191,N=N>>>13;for(T=2*g;T<x;++T)w[T]=0;n(N===0),n((N&-8192)===0)},v.prototype.stub=function(l){for(var g=new Array(l),w=0;w<l;w++)g[w]=0;return g},v.prototype.mulp=function(l,g,w){var x=2*this.guessLen13b(l.length,g.length),N=this.makeRBT(x),T=this.stub(x),B=new Array(x),P=new Array(x),d=new Array(x),I=new Array(x),K=new Array(x),Q=new Array(x),Z=w.words;Z.length=x,this.convert13b(l.words,l.length,B,x),this.convert13b(g.words,g.length,I,x),this.transform(B,T,P,d,x,N),this.transform(I,T,K,Q,x,N);for(var te=0;te<x;te++){var ne=P[te]*K[te]-d[te]*Q[te];d[te]=P[te]*Q[te]+d[te]*K[te],P[te]=ne}return this.conjugate(P,d,x),this.transform(P,d,Z,T,x,N),this.conjugate(Z,T,x),this.normalize13b(Z,x),w.negative=l.negative^g.negative,w.length=l.length+g.length,w.strip()},o.prototype.mul=function(l){var g=new o(null);return g.words=new Array(this.length+l.length),this.mulTo(l,g)},o.prototype.mulf=function(l){var g=new o(null);return g.words=new Array(this.length+l.length),D(this,l,g)},o.prototype.imul=function(l){return this.clone().mulTo(l,this)},o.prototype.imuln=function(l){n(typeof l=="number"),n(l<67108864);for(var g=0,w=0;w<this.length;w++){var x=(this.words[w]|0)*l,N=(x&67108863)+(g&67108863);g>>=26,g+=x/67108864|0,g+=N>>>26,this.words[w]=N&67108863}return g!==0&&(this.words[w]=g,this.length++),this},o.prototype.muln=function(l){return this.clone().imuln(l)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(l){var g=b(l);if(g.length===0)return new o(1);for(var w=this,x=0;x<g.length&&g[x]===0;x++,w=w.sqr());if(++x<g.length)for(var N=w.sqr();x<g.length;x++,N=N.sqr())g[x]!==0&&(w=w.mul(N));return w},o.prototype.iushln=function(l){n(typeof l=="number"&&l>=0);var g=l%26,w=(l-g)/26,x=67108863>>>26-g<<26-g,N;if(g!==0){var T=0;for(N=0;N<this.length;N++){var B=this.words[N]&x,P=(this.words[N]|0)-B<<g;this.words[N]=P|T,T=B>>>26-g}T&&(this.words[N]=T,this.length++)}if(w!==0){for(N=this.length-1;N>=0;N--)this.words[N+w]=this.words[N];for(N=0;N<w;N++)this.words[N]=0;this.length+=w}return this.strip()},o.prototype.ishln=function(l){return n(this.negative===0),this.iushln(l)},o.prototype.iushrn=function(l,g,w){n(typeof l=="number"&&l>=0);var x;g?x=(g-g%26)/26:x=0;var N=l%26,T=Math.min((l-N)/26,this.length),B=67108863^67108863>>>N<<N,P=w;if(x-=T,x=Math.max(0,x),P){for(var d=0;d<T;d++)P.words[d]=this.words[d];P.length=T}if(T!==0)if(this.length>T)for(this.length-=T,d=0;d<this.length;d++)this.words[d]=this.words[d+T];else this.words[0]=0,this.length=1;var I=0;for(d=this.length-1;d>=0&&(I!==0||d>=x);d--){var K=this.words[d]|0;this.words[d]=I<<26-N|K>>>N,I=K&B}return P&&I!==0&&(P.words[P.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(l,g,w){return n(this.negative===0),this.iushrn(l,g,w)},o.prototype.shln=function(l){return this.clone().ishln(l)},o.prototype.ushln=function(l){return this.clone().iushln(l)},o.prototype.shrn=function(l){return this.clone().ishrn(l)},o.prototype.ushrn=function(l){return this.clone().iushrn(l)},o.prototype.testn=function(l){n(typeof l=="number"&&l>=0);var g=l%26,w=(l-g)/26,x=1<<g;if(this.length<=w)return!1;var N=this.words[w];return!!(N&x)},o.prototype.imaskn=function(l){n(typeof l=="number"&&l>=0);var g=l%26,w=(l-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(g!==0&&w++,this.length=Math.min(w,this.length),g!==0){var x=67108863^67108863>>>g<<g;this.words[this.length-1]&=x}return this.strip()},o.prototype.maskn=function(l){return this.clone().imaskn(l)},o.prototype.iaddn=function(l){return n(typeof l=="number"),n(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},o.prototype._iaddn=function(l){this.words[0]+=l;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},o.prototype.isubn=function(l){if(n(typeof l=="number"),n(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},o.prototype.addn=function(l){return this.clone().iaddn(l)},o.prototype.subn=function(l){return this.clone().isubn(l)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(l,g,w){var x=l.length+w,N;this._expand(x);var T,B=0;for(N=0;N<l.length;N++){T=(this.words[N+w]|0)+B;var P=(l.words[N]|0)*g;T-=P&67108863,B=(T>>26)-(P/67108864|0),this.words[N+w]=T&67108863}for(;N<this.length-w;N++)T=(this.words[N+w]|0)+B,B=T>>26,this.words[N+w]=T&67108863;if(B===0)return this.strip();for(n(B===-1),B=0,N=0;N<this.length;N++)T=-(this.words[N]|0)+B,B=T>>26,this.words[N]=T&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(l,g){var w=this.length-l.length,x=this.clone(),N=l,T=N.words[N.length-1]|0,B=this._countBits(T);w=26-B,w!==0&&(N=N.ushln(w),x.iushln(w),T=N.words[N.length-1]|0);var P=x.length-N.length,d;if(g!=="mod"){d=new o(null),d.length=P+1,d.words=new Array(d.length);for(var I=0;I<d.length;I++)d.words[I]=0}var K=x.clone()._ishlnsubmul(N,1,P);K.negative===0&&(x=K,d&&(d.words[P]=1));for(var Q=P-1;Q>=0;Q--){var Z=(x.words[N.length+Q]|0)*67108864+(x.words[N.length+Q-1]|0);for(Z=Math.min(Z/T|0,67108863),x._ishlnsubmul(N,Z,Q);x.negative!==0;)Z--,x.negative=0,x._ishlnsubmul(N,1,Q),x.isZero()||(x.negative^=1);d&&(d.words[Q]=Z)}return d&&d.strip(),x.strip(),g!=="div"&&w!==0&&x.iushrn(w),{div:d||null,mod:x}},o.prototype.divmod=function(l,g,w){if(n(!l.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var x,N,T;return this.negative!==0&&l.negative===0?(T=this.neg().divmod(l,g),g!=="mod"&&(x=T.div.neg()),g!=="div"&&(N=T.mod.neg(),w&&N.negative!==0&&N.iadd(l)),{div:x,mod:N}):this.negative===0&&l.negative!==0?(T=this.divmod(l.neg(),g),g!=="mod"&&(x=T.div.neg()),{div:x,mod:T.mod}):this.negative&l.negative?(T=this.neg().divmod(l.neg(),g),g!=="div"&&(N=T.mod.neg(),w&&N.negative!==0&&N.isub(l)),{div:T.div,mod:N}):l.length>this.length||this.cmp(l)<0?{div:new o(0),mod:this}:l.length===1?g==="div"?{div:this.divn(l.words[0]),mod:null}:g==="mod"?{div:null,mod:new o(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new o(this.modn(l.words[0]))}:this._wordDiv(l,g)},o.prototype.div=function(l){return this.divmod(l,"div",!1).div},o.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},o.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},o.prototype.divRound=function(l){var g=this.divmod(l);if(g.mod.isZero())return g.div;var w=g.div.negative!==0?g.mod.isub(l):g.mod,x=l.ushrn(1),N=l.andln(1),T=w.cmp(x);return T<0||N===1&&T===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},o.prototype.modn=function(l){n(l<=67108863);for(var g=(1<<26)%l,w=0,x=this.length-1;x>=0;x--)w=(g*w+(this.words[x]|0))%l;return w},o.prototype.idivn=function(l){n(l<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var x=(this.words[w]|0)+g*67108864;this.words[w]=x/l|0,g=x%l}return this.strip()},o.prototype.divn=function(l){return this.clone().idivn(l)},o.prototype.egcd=function(l){n(l.negative===0),n(!l.isZero());var g=this,w=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var x=new o(1),N=new o(0),T=new o(0),B=new o(1),P=0;g.isEven()&&w.isEven();)g.iushrn(1),w.iushrn(1),++P;for(var d=w.clone(),I=g.clone();!g.isZero();){for(var K=0,Q=1;!(g.words[0]&Q)&&K<26;++K,Q<<=1);if(K>0)for(g.iushrn(K);K-- >0;)(x.isOdd()||N.isOdd())&&(x.iadd(d),N.isub(I)),x.iushrn(1),N.iushrn(1);for(var Z=0,te=1;!(w.words[0]&te)&&Z<26;++Z,te<<=1);if(Z>0)for(w.iushrn(Z);Z-- >0;)(T.isOdd()||B.isOdd())&&(T.iadd(d),B.isub(I)),T.iushrn(1),B.iushrn(1);g.cmp(w)>=0?(g.isub(w),x.isub(T),N.isub(B)):(w.isub(g),T.isub(x),B.isub(N))}return{a:T,b:B,gcd:w.iushln(P)}},o.prototype._invmp=function(l){n(l.negative===0),n(!l.isZero());var g=this,w=l.clone();g.negative!==0?g=g.umod(l):g=g.clone();for(var x=new o(1),N=new o(0),T=w.clone();g.cmpn(1)>0&&w.cmpn(1)>0;){for(var B=0,P=1;!(g.words[0]&P)&&B<26;++B,P<<=1);if(B>0)for(g.iushrn(B);B-- >0;)x.isOdd()&&x.iadd(T),x.iushrn(1);for(var d=0,I=1;!(w.words[0]&I)&&d<26;++d,I<<=1);if(d>0)for(w.iushrn(d);d-- >0;)N.isOdd()&&N.iadd(T),N.iushrn(1);g.cmp(w)>=0?(g.isub(w),x.isub(N)):(w.isub(g),N.isub(x))}var K;return g.cmpn(1)===0?K=x:K=N,K.cmpn(0)<0&&K.iadd(l),K},o.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var g=this.clone(),w=l.clone();g.negative=0,w.negative=0;for(var x=0;g.isEven()&&w.isEven();x++)g.iushrn(1),w.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;w.isEven();)w.iushrn(1);var N=g.cmp(w);if(N<0){var T=g;g=w,w=T}else if(N===0||w.cmpn(1)===0)break;g.isub(w)}while(!0);return w.iushln(x)},o.prototype.invm=function(l){return this.egcd(l).a.umod(l)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(l){return this.words[0]&l},o.prototype.bincn=function(l){n(typeof l=="number");var g=l%26,w=(l-g)/26,x=1<<g;if(this.length<=w)return this._expand(w+1),this.words[w]|=x,this;for(var N=x,T=w;N!==0&&T<this.length;T++){var B=this.words[T]|0;B+=N,N=B>>>26,B&=67108863,this.words[T]=B}return N!==0&&(this.words[T]=N,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(l){var g=l<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var w;if(this.length>1)w=1;else{g&&(l=-l),n(l<=67108863,"Number is too big");var x=this.words[0]|0;w=x===l?0:x<l?-1:1}return this.negative!==0?-w|0:w},o.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var g=this.ucmp(l);return this.negative!==0?-g|0:g},o.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var g=0,w=this.length-1;w>=0;w--){var x=this.words[w]|0,N=l.words[w]|0;if(x!==N){x<N?g=-1:x>N&&(g=1);break}}return g},o.prototype.gtn=function(l){return this.cmpn(l)===1},o.prototype.gt=function(l){return this.cmp(l)===1},o.prototype.gten=function(l){return this.cmpn(l)>=0},o.prototype.gte=function(l){return this.cmp(l)>=0},o.prototype.ltn=function(l){return this.cmpn(l)===-1},o.prototype.lt=function(l){return this.cmp(l)===-1},o.prototype.lten=function(l){return this.cmpn(l)<=0},o.prototype.lte=function(l){return this.cmp(l)<=0},o.prototype.eqn=function(l){return this.cmpn(l)===0},o.prototype.eq=function(l){return this.cmp(l)===0},o.red=function(l){return new U(l)},o.prototype.toRed=function(l){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(l){return this.red=l,this},o.prototype.forceRed=function(l){return n(!this.red,"Already a number in reduction context"),this._forceRed(l)},o.prototype.redAdd=function(l){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},o.prototype.redIAdd=function(l){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},o.prototype.redSub=function(l){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},o.prototype.redISub=function(l){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},o.prototype.redShl=function(l){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},o.prototype.redMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},o.prototype.redIMul=function(l){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(l){return n(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var E={k256:null,p224:null,p192:null,p25519:null};function M(C,l){this.name=C,this.p=new o(l,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}M.prototype._tmp=function(){var l=new o(null);return l.words=new Array(Math.ceil(this.n/13)),l},M.prototype.ireduce=function(l){var g=l,w;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),w=g.bitLength();while(w>this.n);var x=w<this.n?-1:g.ucmp(this.p);return x===0?(g.words[0]=0,g.length=1):x>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},M.prototype.split=function(l,g){l.iushrn(this.n,0,g)},M.prototype.imulK=function(l){return l.imul(this.k)};function O(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,M),O.prototype.split=function(l,g){for(var w=4194303,x=Math.min(l.length,9),N=0;N<x;N++)g.words[N]=l.words[N];if(g.length=x,l.length<=9){l.words[0]=0,l.length=1;return}var T=l.words[9];for(g.words[g.length++]=T&w,N=10;N<l.length;N++){var B=l.words[N]|0;l.words[N-10]=(B&w)<<4|T>>>22,T=B}T>>>=22,l.words[N-10]=T,T===0&&l.length>10?l.length-=10:l.length-=9},O.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var g=0,w=0;w<l.length;w++){var x=l.words[w]|0;g+=x*977,l.words[w]=g&67108863,g=x*64+(g/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function k(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(k,M);function F(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(F,M);function z(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,M),z.prototype.imulK=function(l){for(var g=0,w=0;w<l.length;w++){var x=(l.words[w]|0)*19+g,N=x&67108863;x>>>=26,l.words[w]=N,g=x}return g!==0&&(l.words[l.length++]=g),l},o._prime=function(l){if(E[l])return E[l];var g;if(l==="k256")g=new O;else if(l==="p224")g=new k;else if(l==="p192")g=new F;else if(l==="p25519")g=new z;else throw new Error("Unknown prime "+l);return E[l]=g,g};function U(C){if(typeof C=="string"){var l=o._prime(C);this.m=l.p,this.prime=l}else n(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}U.prototype._verify1=function(l){n(l.negative===0,"red works only with positives"),n(l.red,"red works only with red numbers")},U.prototype._verify2=function(l,g){n((l.negative|g.negative)===0,"red works only with positives"),n(l.red&&l.red===g.red,"red works only with red numbers")},U.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},U.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},U.prototype.add=function(l,g){this._verify2(l,g);var w=l.add(g);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},U.prototype.iadd=function(l,g){this._verify2(l,g);var w=l.iadd(g);return w.cmp(this.m)>=0&&w.isub(this.m),w},U.prototype.sub=function(l,g){this._verify2(l,g);var w=l.sub(g);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},U.prototype.isub=function(l,g){this._verify2(l,g);var w=l.isub(g);return w.cmpn(0)<0&&w.iadd(this.m),w},U.prototype.shl=function(l,g){return this._verify1(l),this.imod(l.ushln(g))},U.prototype.imul=function(l,g){return this._verify2(l,g),this.imod(l.imul(g))},U.prototype.mul=function(l,g){return this._verify2(l,g),this.imod(l.mul(g))},U.prototype.isqr=function(l){return this.imul(l,l.clone())},U.prototype.sqr=function(l){return this.mul(l,l)},U.prototype.sqrt=function(l){if(l.isZero())return l.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var w=this.m.add(new o(1)).iushrn(2);return this.pow(l,w)}for(var x=this.m.subn(1),N=0;!x.isZero()&&x.andln(1)===0;)N++,x.iushrn(1);n(!x.isZero());var T=new o(1).toRed(this),B=T.redNeg(),P=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new o(2*d*d).toRed(this);this.pow(d,P).cmp(B)!==0;)d.redIAdd(B);for(var I=this.pow(d,x),K=this.pow(l,x.addn(1).iushrn(1)),Q=this.pow(l,x),Z=N;Q.cmp(T)!==0;){for(var te=Q,ne=0;te.cmp(T)!==0;ne++)te=te.redSqr();n(ne<Z);var le=this.pow(I,new o(1).iushln(Z-ne-1));K=K.redMul(le),I=le.redSqr(),Q=Q.redMul(I),Z=ne}return K},U.prototype.invm=function(l){var g=l._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},U.prototype.pow=function(l,g){if(g.isZero())return new o(1).toRed(this);if(g.cmpn(1)===0)return l.clone();var w=4,x=new Array(1<<w);x[0]=new o(1).toRed(this),x[1]=l;for(var N=2;N<x.length;N++)x[N]=this.mul(x[N-1],l);var T=x[0],B=0,P=0,d=g.bitLength()%26;for(d===0&&(d=26),N=g.length-1;N>=0;N--){for(var I=g.words[N],K=d-1;K>=0;K--){var Q=I>>K&1;if(T!==x[0]&&(T=this.sqr(T)),Q===0&&B===0){P=0;continue}B<<=1,B|=Q,P++,!(P!==w&&(N!==0||K!==0))&&(T=this.mul(T,x[B]),P=0,B=0)}d=26}return T},U.prototype.convertTo=function(l){var g=l.umod(this.m);return g===l?g.clone():g},U.prototype.convertFrom=function(l){var g=l.clone();return g.red=null,g},o.mont=function(l){return new W(l)};function W(C){U.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(W,U),W.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},W.prototype.convertFrom=function(l){var g=this.imod(l.mul(this.rinv));return g.red=null,g},W.prototype.imul=function(l,g){if(l.isZero()||g.isZero())return l.words[0]=0,l.length=1,l;var w=l.imul(g),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=w.isub(x).iushrn(this.shift),T=N;return N.cmp(this.m)>=0?T=N.isub(this.m):N.cmpn(0)<0&&(T=N.iadd(this.m)),T._forceRed(this)},W.prototype.mul=function(l,g){if(l.isZero()||g.isZero())return new o(0)._forceRed(this);var w=l.mul(g),x=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=w.isub(x).iushrn(this.shift),T=N;return N.cmp(this.m)>=0?T=N.isub(this.m):N.cmpn(0)<0&&(T=N.iadd(this.m)),T._forceRed(this)},W.prototype.invm=function(l){var g=this.imod(l._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(r,uo)})(bh);var yi=bh.exports,f0={},wh={},Il={exports:{}};typeof Object.create=="function"?Il.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Il.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var _i=Il.exports,Eh={},Fc={};Fc.byteLength=f1;Fc.toByteArray=h1;Fc.fromByteArray=g1;var Li=[],Sn=[],u1=typeof Uint8Array<"u"?Uint8Array:Array,qf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ba=0,c1=qf.length;Ba<c1;++Ba)Li[Ba]=qf[Ba],Sn[qf.charCodeAt(Ba)]=Ba;Sn["-".charCodeAt(0)]=62;Sn["_".charCodeAt(0)]=63;function l0(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function f1(r){var e=l0(r),t=e[0],n=e[1];return(t+n)*3/4-n}function l1(r,e,t){return(e+t)*3/4-t}function h1(r){var e,t=l0(r),n=t[0],i=t[1],o=new u1(l1(r,n,i)),a=0,s=i>0?n-4:n,u;for(u=0;u<s;u+=4)e=Sn[r.charCodeAt(u)]<<18|Sn[r.charCodeAt(u+1)]<<12|Sn[r.charCodeAt(u+2)]<<6|Sn[r.charCodeAt(u+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return i===2&&(e=Sn[r.charCodeAt(u)]<<2|Sn[r.charCodeAt(u+1)]>>4,o[a++]=e&255),i===1&&(e=Sn[r.charCodeAt(u)]<<10|Sn[r.charCodeAt(u+1)]<<4|Sn[r.charCodeAt(u+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function d1(r){return Li[r>>18&63]+Li[r>>12&63]+Li[r>>6&63]+Li[r&63]}function p1(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(d1(n));return i.join("")}function g1(r){for(var e,t=r.length,n=t%3,i=[],o=16383,a=0,s=t-n;a<s;a+=o)i.push(p1(r,a,a+o>s?s:a+o));return n===1?(e=r[t-1],i.push(Li[e>>2]+Li[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Li[e>>10]+Li[e>>4&63]+Li[e<<2&63]+"=")),i.join("")}var xh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xh.read=function(r,e,t,n,i){var o,a,s=i*8-n-1,u=(1<<s)-1,c=u>>1,f=-7,h=t?i-1:0,p=t?-1:1,b=r[e+h];for(h+=p,o=b&(1<<-f)-1,b>>=-f,f+=s;f>0;o=o*256+r[e+h],h+=p,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=a*256+r[e+h],h+=p,f-=8);if(o===0)o=1-c;else{if(o===u)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-c}return(b?-1:1)*a*Math.pow(2,o-n)};xh.write=function(r,e,t,n,i,o){var a,s,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,_=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+h>=1?e+=p/u:e+=p*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=f?(s=0,a=f):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a=a+h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;r[t+b]=s&255,b+=_,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;r[t+b]=a&255,b+=_,a/=256,c-=8);r[t+b-_]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){var e=Fc,t=xh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var A=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(A,m),A.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(A){if(A>i)throw new RangeError('The value "'+A+'" is invalid for option "size"');var m=new Uint8Array(A);return Object.setPrototypeOf(m,s.prototype),m}function s(A,m,y){if(typeof A=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(A)}return u(A,m,y)}s.poolSize=8192;function u(A,m,y){if(typeof A=="string")return p(A,m);if(ArrayBuffer.isView(A))return _(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(ge(A,ArrayBuffer)||A&&ge(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(A,SharedArrayBuffer)||A&&ge(A.buffer,SharedArrayBuffer)))return S(A,m,y);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var L=A.valueOf&&A.valueOf();if(L!=null&&L!==A)return s.from(L,m,y);var G=R(A);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return s.from(A[Symbol.toPrimitive]("string"),m,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}s.from=function(A,m,y){return u(A,m,y)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function f(A,m,y){return c(A),A<=0?a(A):m!==void 0?typeof y=="string"?a(A).fill(m,y):a(A).fill(m):a(A)}s.alloc=function(A,m,y){return f(A,m,y)};function h(A){return c(A),a(A<0?0:D(A)|0)}s.allocUnsafe=function(A){return h(A)},s.allocUnsafeSlow=function(A){return h(A)};function p(A,m){if((typeof m!="string"||m==="")&&(m="utf8"),!s.isEncoding(m))throw new TypeError("Unknown encoding: "+m);var y=E(A,m)|0,L=a(y),G=L.write(A,m);return G!==y&&(L=L.slice(0,G)),L}function b(A){for(var m=A.length<0?0:D(A.length)|0,y=a(m),L=0;L<m;L+=1)y[L]=A[L]&255;return y}function _(A){if(ge(A,Uint8Array)){var m=new Uint8Array(A);return S(m.buffer,m.byteOffset,m.byteLength)}return b(A)}function S(A,m,y){if(m<0||A.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<m+(y||0))throw new RangeError('"length" is outside of buffer bounds');var L;return m===void 0&&y===void 0?L=new Uint8Array(A):y===void 0?L=new Uint8Array(A,m):L=new Uint8Array(A,m,y),Object.setPrototypeOf(L,s.prototype),L}function R(A){if(s.isBuffer(A)){var m=D(A.length)|0,y=a(m);return y.length===0||A.copy(y,0,0,m),y}if(A.length!==void 0)return typeof A.length!="number"||ir(A.length)?a(0):b(A);if(A.type==="Buffer"&&Array.isArray(A.data))return b(A.data)}function D(A){if(A>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return A|0}function v(A){return+A!=A&&(A=0),s.alloc(+A)}s.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==s.prototype},s.compare=function(m,y){if(ge(m,Uint8Array)&&(m=s.from(m,m.offset,m.byteLength)),ge(y,Uint8Array)&&(y=s.from(y,y.offset,y.byteLength)),!s.isBuffer(m)||!s.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===y)return 0;for(var L=m.length,G=y.length,J=0,Y=Math.min(L,G);J<Y;++J)if(m[J]!==y[J]){L=m[J],G=y[J];break}return L<G?-1:G<L?1:0},s.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(m,y){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return s.alloc(0);var L;if(y===void 0)for(y=0,L=0;L<m.length;++L)y+=m[L].length;var G=s.allocUnsafe(y),J=0;for(L=0;L<m.length;++L){var Y=m[L];if(ge(Y,Uint8Array))J+Y.length>G.length?s.from(Y).copy(G,J):Uint8Array.prototype.set.call(G,Y,J);else if(s.isBuffer(Y))Y.copy(G,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=Y.length}return G};function E(A,m){if(s.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||ge(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);var y=A.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&y===0)return 0;for(var G=!1;;)switch(m){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return $e(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return nr(A).length;default:if(G)return L?-1:$e(A).length;m=(""+m).toLowerCase(),G=!0}}s.byteLength=E;function M(A,m,y){var L=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,m>>>=0,y<=m))return"";for(A||(A="utf8");;)switch(A){case"hex":return P(this,m,y);case"utf8":case"utf-8":return w(this,m,y);case"ascii":return T(this,m,y);case"latin1":case"binary":return B(this,m,y);case"base64":return g(this,m,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,m,y);default:if(L)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),L=!0}}s.prototype._isBuffer=!0;function O(A,m,y){var L=A[m];A[m]=A[y],A[y]=L}s.prototype.swap16=function(){var m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<m;y+=2)O(this,y,y+1);return this},s.prototype.swap32=function(){var m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<m;y+=4)O(this,y,y+3),O(this,y+1,y+2);return this},s.prototype.swap64=function(){var m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<m;y+=8)O(this,y,y+7),O(this,y+1,y+6),O(this,y+2,y+5),O(this,y+3,y+4);return this},s.prototype.toString=function(){var m=this.length;return m===0?"":arguments.length===0?w(this,0,m):M.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(m){if(!s.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:s.compare(this,m)===0},s.prototype.inspect=function(){var m="",y=r.INSPECT_MAX_BYTES;return m=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(m+=" ... "),"<Buffer "+m+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(m,y,L,G,J){if(ge(m,Uint8Array)&&(m=s.from(m,m.offset,m.byteLength)),!s.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(y===void 0&&(y=0),L===void 0&&(L=m?m.length:0),G===void 0&&(G=0),J===void 0&&(J=this.length),y<0||L>m.length||G<0||J>this.length)throw new RangeError("out of range index");if(G>=J&&y>=L)return 0;if(G>=J)return-1;if(y>=L)return 1;if(y>>>=0,L>>>=0,G>>>=0,J>>>=0,this===m)return 0;for(var Y=J-G,Se=L-y,ce=Math.min(Y,Se),de=this.slice(G,J),at=m.slice(y,L),ye=0;ye<ce;++ye)if(de[ye]!==at[ye]){Y=de[ye],Se=at[ye];break}return Y<Se?-1:Se<Y?1:0};function k(A,m,y,L,G){if(A.length===0)return-1;if(typeof y=="string"?(L=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ir(y)&&(y=G?0:A.length-1),y<0&&(y=A.length+y),y>=A.length){if(G)return-1;y=A.length-1}else if(y<0)if(G)y=0;else return-1;if(typeof m=="string"&&(m=s.from(m,L)),s.isBuffer(m))return m.length===0?-1:F(A,m,y,L,G);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(A,m,y):Uint8Array.prototype.lastIndexOf.call(A,m,y):F(A,[m],y,L,G);throw new TypeError("val must be string, number or Buffer")}function F(A,m,y,L,G){var J=1,Y=A.length,Se=m.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(A.length<2||m.length<2)return-1;J=2,Y/=2,Se/=2,y/=2}function ce(Ts,st){return J===1?Ts[st]:Ts.readUInt16BE(st*J)}var de;if(G){var at=-1;for(de=y;de<Y;de++)if(ce(A,de)===ce(m,at===-1?0:de-at)){if(at===-1&&(at=de),de-at+1===Se)return at*J}else at!==-1&&(de-=de-at),at=-1}else for(y+Se>Y&&(y=Y-Se),de=y;de>=0;de--){for(var ye=!0,Ze=0;Ze<Se;Ze++)if(ce(A,de+Ze)!==ce(m,Ze)){ye=!1;break}if(ye)return de}return-1}s.prototype.includes=function(m,y,L){return this.indexOf(m,y,L)!==-1},s.prototype.indexOf=function(m,y,L){return k(this,m,y,L,!0)},s.prototype.lastIndexOf=function(m,y,L){return k(this,m,y,L,!1)};function z(A,m,y,L){y=Number(y)||0;var G=A.length-y;L?(L=Number(L),L>G&&(L=G)):L=G;var J=m.length;L>J/2&&(L=J/2);for(var Y=0;Y<L;++Y){var Se=parseInt(m.substr(Y*2,2),16);if(ir(Se))return Y;A[y+Y]=Se}return Y}function U(A,m,y,L){return Re($e(m,A.length-y),A,y,L)}function W(A,m,y,L){return Re(pe(m),A,y,L)}function C(A,m,y,L){return Re(nr(m),A,y,L)}function l(A,m,y,L){return Re(xe(m,A.length-y),A,y,L)}s.prototype.write=function(m,y,L,G){if(y===void 0)G="utf8",L=this.length,y=0;else if(L===void 0&&typeof y=="string")G=y,L=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(L)?(L=L>>>0,G===void 0&&(G="utf8")):(G=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-y;if((L===void 0||L>J)&&(L=J),m.length>0&&(L<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");for(var Y=!1;;)switch(G){case"hex":return z(this,m,y,L);case"utf8":case"utf-8":return U(this,m,y,L);case"ascii":case"latin1":case"binary":return W(this,m,y,L);case"base64":return C(this,m,y,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,m,y,L);default:if(Y)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),Y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(A,m,y){return m===0&&y===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(m,y))}function w(A,m,y){y=Math.min(A.length,y);for(var L=[],G=m;G<y;){var J=A[G],Y=null,Se=J>239?4:J>223?3:J>191?2:1;if(G+Se<=y){var ce,de,at,ye;switch(Se){case 1:J<128&&(Y=J);break;case 2:ce=A[G+1],(ce&192)===128&&(ye=(J&31)<<6|ce&63,ye>127&&(Y=ye));break;case 3:ce=A[G+1],de=A[G+2],(ce&192)===128&&(de&192)===128&&(ye=(J&15)<<12|(ce&63)<<6|de&63,ye>2047&&(ye<55296||ye>57343)&&(Y=ye));break;case 4:ce=A[G+1],de=A[G+2],at=A[G+3],(ce&192)===128&&(de&192)===128&&(at&192)===128&&(ye=(J&15)<<18|(ce&63)<<12|(de&63)<<6|at&63,ye>65535&&ye<1114112&&(Y=ye))}}Y===null?(Y=65533,Se=1):Y>65535&&(Y-=65536,L.push(Y>>>10&1023|55296),Y=56320|Y&1023),L.push(Y),G+=Se}return N(L)}var x=4096;function N(A){var m=A.length;if(m<=x)return String.fromCharCode.apply(String,A);for(var y="",L=0;L<m;)y+=String.fromCharCode.apply(String,A.slice(L,L+=x));return y}function T(A,m,y){var L="";y=Math.min(A.length,y);for(var G=m;G<y;++G)L+=String.fromCharCode(A[G]&127);return L}function B(A,m,y){var L="";y=Math.min(A.length,y);for(var G=m;G<y;++G)L+=String.fromCharCode(A[G]);return L}function P(A,m,y){var L=A.length;(!m||m<0)&&(m=0),(!y||y<0||y>L)&&(y=L);for(var G="",J=m;J<y;++J)G+=Te[A[J]];return G}function d(A,m,y){for(var L=A.slice(m,y),G="",J=0;J<L.length-1;J+=2)G+=String.fromCharCode(L[J]+L[J+1]*256);return G}s.prototype.slice=function(m,y){var L=this.length;m=~~m,y=y===void 0?L:~~y,m<0?(m+=L,m<0&&(m=0)):m>L&&(m=L),y<0?(y+=L,y<0&&(y=0)):y>L&&(y=L),y<m&&(y=m);var G=this.subarray(m,y);return Object.setPrototypeOf(G,s.prototype),G};function I(A,m,y){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+m>y)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(m,y,L){m=m>>>0,y=y>>>0,L||I(m,y,this.length);for(var G=this[m],J=1,Y=0;++Y<y&&(J*=256);)G+=this[m+Y]*J;return G},s.prototype.readUintBE=s.prototype.readUIntBE=function(m,y,L){m=m>>>0,y=y>>>0,L||I(m,y,this.length);for(var G=this[m+--y],J=1;y>0&&(J*=256);)G+=this[m+--y]*J;return G},s.prototype.readUint8=s.prototype.readUInt8=function(m,y){return m=m>>>0,y||I(m,1,this.length),this[m]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(m,y){return m=m>>>0,y||I(m,2,this.length),this[m]|this[m+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(m,y){return m=m>>>0,y||I(m,2,this.length),this[m]<<8|this[m+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(m,y){return m=m>>>0,y||I(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(m,y){return m=m>>>0,y||I(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},s.prototype.readIntLE=function(m,y,L){m=m>>>0,y=y>>>0,L||I(m,y,this.length);for(var G=this[m],J=1,Y=0;++Y<y&&(J*=256);)G+=this[m+Y]*J;return J*=128,G>=J&&(G-=Math.pow(2,8*y)),G},s.prototype.readIntBE=function(m,y,L){m=m>>>0,y=y>>>0,L||I(m,y,this.length);for(var G=y,J=1,Y=this[m+--G];G>0&&(J*=256);)Y+=this[m+--G]*J;return J*=128,Y>=J&&(Y-=Math.pow(2,8*y)),Y},s.prototype.readInt8=function(m,y){return m=m>>>0,y||I(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},s.prototype.readInt16LE=function(m,y){m=m>>>0,y||I(m,2,this.length);var L=this[m]|this[m+1]<<8;return L&32768?L|4294901760:L},s.prototype.readInt16BE=function(m,y){m=m>>>0,y||I(m,2,this.length);var L=this[m+1]|this[m]<<8;return L&32768?L|4294901760:L},s.prototype.readInt32LE=function(m,y){return m=m>>>0,y||I(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},s.prototype.readInt32BE=function(m,y){return m=m>>>0,y||I(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},s.prototype.readFloatLE=function(m,y){return m=m>>>0,y||I(m,4,this.length),t.read(this,m,!0,23,4)},s.prototype.readFloatBE=function(m,y){return m=m>>>0,y||I(m,4,this.length),t.read(this,m,!1,23,4)},s.prototype.readDoubleLE=function(m,y){return m=m>>>0,y||I(m,8,this.length),t.read(this,m,!0,52,8)},s.prototype.readDoubleBE=function(m,y){return m=m>>>0,y||I(m,8,this.length),t.read(this,m,!1,52,8)};function K(A,m,y,L,G,J){if(!s.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>G||m<J)throw new RangeError('"value" argument is out of bounds');if(y+L>A.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(m,y,L,G){if(m=+m,y=y>>>0,L=L>>>0,!G){var J=Math.pow(2,8*L)-1;K(this,m,y,L,J,0)}var Y=1,Se=0;for(this[y]=m&255;++Se<L&&(Y*=256);)this[y+Se]=m/Y&255;return y+L},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(m,y,L,G){if(m=+m,y=y>>>0,L=L>>>0,!G){var J=Math.pow(2,8*L)-1;K(this,m,y,L,J,0)}var Y=L-1,Se=1;for(this[y+Y]=m&255;--Y>=0&&(Se*=256);)this[y+Y]=m/Se&255;return y+L},s.prototype.writeUint8=s.prototype.writeUInt8=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,1,255,0),this[y]=m&255,y+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,2,65535,0),this[y]=m&255,this[y+1]=m>>>8,y+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,2,65535,0),this[y]=m>>>8,this[y+1]=m&255,y+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,4,4294967295,0),this[y+3]=m>>>24,this[y+2]=m>>>16,this[y+1]=m>>>8,this[y]=m&255,y+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,4,4294967295,0),this[y]=m>>>24,this[y+1]=m>>>16,this[y+2]=m>>>8,this[y+3]=m&255,y+4},s.prototype.writeIntLE=function(m,y,L,G){if(m=+m,y=y>>>0,!G){var J=Math.pow(2,8*L-1);K(this,m,y,L,J-1,-J)}var Y=0,Se=1,ce=0;for(this[y]=m&255;++Y<L&&(Se*=256);)m<0&&ce===0&&this[y+Y-1]!==0&&(ce=1),this[y+Y]=(m/Se>>0)-ce&255;return y+L},s.prototype.writeIntBE=function(m,y,L,G){if(m=+m,y=y>>>0,!G){var J=Math.pow(2,8*L-1);K(this,m,y,L,J-1,-J)}var Y=L-1,Se=1,ce=0;for(this[y+Y]=m&255;--Y>=0&&(Se*=256);)m<0&&ce===0&&this[y+Y+1]!==0&&(ce=1),this[y+Y]=(m/Se>>0)-ce&255;return y+L},s.prototype.writeInt8=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,1,127,-128),m<0&&(m=255+m+1),this[y]=m&255,y+1},s.prototype.writeInt16LE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,2,32767,-32768),this[y]=m&255,this[y+1]=m>>>8,y+2},s.prototype.writeInt16BE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,2,32767,-32768),this[y]=m>>>8,this[y+1]=m&255,y+2},s.prototype.writeInt32LE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,4,2147483647,-2147483648),this[y]=m&255,this[y+1]=m>>>8,this[y+2]=m>>>16,this[y+3]=m>>>24,y+4},s.prototype.writeInt32BE=function(m,y,L){return m=+m,y=y>>>0,L||K(this,m,y,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[y]=m>>>24,this[y+1]=m>>>16,this[y+2]=m>>>8,this[y+3]=m&255,y+4};function Q(A,m,y,L,G,J){if(y+L>A.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function Z(A,m,y,L,G){return m=+m,y=y>>>0,G||Q(A,m,y,4),t.write(A,m,y,L,23,4),y+4}s.prototype.writeFloatLE=function(m,y,L){return Z(this,m,y,!0,L)},s.prototype.writeFloatBE=function(m,y,L){return Z(this,m,y,!1,L)};function te(A,m,y,L,G){return m=+m,y=y>>>0,G||Q(A,m,y,8),t.write(A,m,y,L,52,8),y+8}s.prototype.writeDoubleLE=function(m,y,L){return te(this,m,y,!0,L)},s.prototype.writeDoubleBE=function(m,y,L){return te(this,m,y,!1,L)},s.prototype.copy=function(m,y,L,G){if(!s.isBuffer(m))throw new TypeError("argument should be a Buffer");if(L||(L=0),!G&&G!==0&&(G=this.length),y>=m.length&&(y=m.length),y||(y=0),G>0&&G<L&&(G=L),G===L||m.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),m.length-y<G-L&&(G=m.length-y+L);var J=G-L;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,L,G):Uint8Array.prototype.set.call(m,this.subarray(L,G),y),J},s.prototype.fill=function(m,y,L,G){if(typeof m=="string"){if(typeof y=="string"?(G=y,y=0,L=this.length):typeof L=="string"&&(G=L,L=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!s.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(m.length===1){var J=m.charCodeAt(0);(G==="utf8"&&J<128||G==="latin1")&&(m=J)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(y<0||this.length<y||this.length<L)throw new RangeError("Out of range index");if(L<=y)return this;y=y>>>0,L=L===void 0?this.length:L>>>0,m||(m=0);var Y;if(typeof m=="number")for(Y=y;Y<L;++Y)this[Y]=m;else{var Se=s.isBuffer(m)?m:s.from(m,G),ce=Se.length;if(ce===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(Y=0;Y<L-y;++Y)this[Y+y]=Se[Y%ce]}return this};var ne=/[^+/0-9A-Za-z-_]/g;function le(A){if(A=A.split("=")[0],A=A.trim().replace(ne,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function $e(A,m){m=m||1/0;for(var y,L=A.length,G=null,J=[],Y=0;Y<L;++Y){if(y=A.charCodeAt(Y),y>55295&&y<57344){if(!G){if(y>56319){(m-=3)>-1&&J.push(239,191,189);continue}else if(Y+1===L){(m-=3)>-1&&J.push(239,191,189);continue}G=y;continue}if(y<56320){(m-=3)>-1&&J.push(239,191,189),G=y;continue}y=(G-55296<<10|y-56320)+65536}else G&&(m-=3)>-1&&J.push(239,191,189);if(G=null,y<128){if((m-=1)<0)break;J.push(y)}else if(y<2048){if((m-=2)<0)break;J.push(y>>6|192,y&63|128)}else if(y<65536){if((m-=3)<0)break;J.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((m-=4)<0)break;J.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return J}function pe(A){for(var m=[],y=0;y<A.length;++y)m.push(A.charCodeAt(y)&255);return m}function xe(A,m){for(var y,L,G,J=[],Y=0;Y<A.length&&!((m-=2)<0);++Y)y=A.charCodeAt(Y),L=y>>8,G=y%256,J.push(G),J.push(L);return J}function nr(A){return e.toByteArray(le(A))}function Re(A,m,y,L){for(var G=0;G<L&&!(G+y>=m.length||G>=A.length);++G)m[G+y]=A[G];return G}function ge(A,m){return A instanceof m||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===m.name}function ir(A){return A!==A}var Te=function(){for(var A="0123456789abcdef",m=new Array(256),y=0;y<16;++y)for(var L=y*16,G=0;G<16;++G)m[L+G]=A[y]+A[G];return m}()})(Eh);var Fu=Eh,Ha=Fu.Buffer,Nn={},Pn;for(Pn in Fu)Fu.hasOwnProperty(Pn)&&(Pn==="SlowBuffer"||Pn==="Buffer"||(Nn[Pn]=Fu[Pn]));var Ga=Nn.Buffer={};for(Pn in Ha)Ha.hasOwnProperty(Pn)&&(Pn==="allocUnsafe"||Pn==="allocUnsafeSlow"||(Ga[Pn]=Ha[Pn]));Nn.Buffer.prototype=Ha.prototype;(!Ga.from||Ga.from===Uint8Array.from)&&(Ga.from=function(r,e,t){if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof r);if(r&&typeof r.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);return Ha(r,e,t)});Ga.alloc||(Ga.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof r);if(r<0||r>=2*(1<<30))throw new RangeError('The value "'+r+'" is invalid for option "size"');var n=Ha(r);return!e||e.length===0?n.fill(0):typeof t=="string"?n.fill(e,t):n.fill(e),n});if(!Nn.kStringMaxLength)try{Nn.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}Nn.constants||(Nn.constants={MAX_LENGTH:Nn.kMaxLength},Nn.kStringMaxLength&&(Nn.constants.MAX_STRING_LENGTH=Nn.kStringMaxLength));var Sh=Nn,zc={};const m1=_i;function $n(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}zc.Reporter=$n;$n.prototype.isError=function(e){return e instanceof ls};$n.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};$n.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};$n.prototype.enterKey=function(e){return this._reporterState.path.push(e)};$n.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)};$n.prototype.leaveKey=function(e,t,n){const i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[t]=n)};$n.prototype.path=function(){return this._reporterState.path.join("/")};$n.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t};$n.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n};$n.prototype.error=function(e){let t;const n=this._reporterState,i=e instanceof ls;if(i?t=e:t=new ls(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t};$n.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function ls(r,e){this.path=r,this.rethrow(e)}m1(ls,Error);ls.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ls),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this};var Aa={};const v1=_i,Uc=zc.Reporter,hs=Sh.Buffer;function Kn(r,e){if(Uc.call(this,e),!hs.isBuffer(r)){this.error("Input not Buffer");return}this.base=r,this.offset=0,this.length=r.length}v1(Kn,Uc);Aa.DecoderBuffer=Kn;Kn.isDecoderBuffer=function(e){return e instanceof Kn?!0:typeof e=="object"&&hs.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};Kn.prototype.save=function(){return{offset:this.offset,reporter:Uc.prototype.save.call(this)}};Kn.prototype.restore=function(e){const t=new Kn(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Uc.prototype.restore.call(this,e.reporter),t};Kn.prototype.isEmpty=function(){return this.offset===this.length};Kn.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};Kn.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new Kn(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};Kn.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function ds(r,e){if(Array.isArray(r))this.length=0,this.value=r.map(function(t){return ds.isEncoderBuffer(t)||(t=new ds(t,e)),this.length+=t.length,t},this);else if(typeof r=="number"){if(!(0<=r&&r<=255))return e.error("non-byte EncoderBuffer value");this.value=r,this.length=1}else if(typeof r=="string")this.value=r,this.length=hs.byteLength(r);else if(hs.isBuffer(r))this.value=r,this.length=r.length;else return e.error("Unsupported type: "+typeof r)}Aa.EncoderBuffer=ds;ds.isEncoderBuffer=function(e){return e instanceof ds?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};ds.prototype.join=function(e,t){return e||(e=hs.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):hs.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e};var ea=h0;function h0(r,e){if(!r)throw new Error(e||"Assertion failed")}h0.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};const y1=zc.Reporter,_1=Aa.EncoderBuffer,b1=Aa.DecoderBuffer,Wr=ea,d0=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],w1=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(d0),E1=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Ge(r,e,t){const n={};this._baseState=n,n.name=t,n.enc=r,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var Ch=Ge;const x1=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Ge.prototype.clone=function(){const e=this._baseState,t={};x1.forEach(function(i){t[i]=e[i]});const n=new this.constructor(t.parent);return n._baseState=t,n};Ge.prototype._wrap=function(){const e=this._baseState;w1.forEach(function(t){this[t]=function(){const i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}},this)};Ge.prototype._init=function(e){const t=this._baseState;Wr(t.parent===null),e.call(this),t.children=t.children.filter(function(n){return n._baseState.parent===this},this),Wr.equal(t.children.length,1,"Root node can have only one child")};Ge.prototype._useArgs=function(e){const t=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(Wr(t.children===null),t.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(Wr(t.args===null),t.args=e,t.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;const o={};return Object.keys(i).forEach(function(a){a==(a|0)&&(a|=0);const s=i[a];o[s]=a}),o}))};E1.forEach(function(r){Ge.prototype[r]=function(){const t=this._baseState;throw new Error(r+" not implemented for encoding: "+t.enc)}});d0.forEach(function(r){Ge.prototype[r]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return Wr(t.tag===null),t.tag=r,this._useArgs(n),this}});Ge.prototype.use=function(e){Wr(e);const t=this._baseState;return Wr(t.use===null),t.use=e,this};Ge.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};Ge.prototype.def=function(e){const t=this._baseState;return Wr(t.default===null),t.default=e,t.optional=!0,this};Ge.prototype.explicit=function(e){const t=this._baseState;return Wr(t.explicit===null&&t.implicit===null),t.explicit=e,this};Ge.prototype.implicit=function(e){const t=this._baseState;return Wr(t.explicit===null&&t.implicit===null),t.implicit=e,this};Ge.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Ge.prototype.key=function(e){const t=this._baseState;return Wr(t.key===null),t.key=e,this};Ge.prototype.any=function(){const e=this._baseState;return e.any=!0,this};Ge.prototype.choice=function(e){const t=this._baseState;return Wr(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};Ge.prototype.contains=function(e){const t=this._baseState;return Wr(t.use===null),t.contains=e,this};Ge.prototype._decode=function(e,t){const n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,t));let i=n.default,o=!0,a=null;if(n.key!==null&&(a=e.enterKey(n.key)),n.optional){let u=null;if(n.explicit!==null?u=n.explicit:n.implicit!==null?u=n.implicit:n.tag!==null&&(u=n.tag),u===null&&!n.any){const c=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch{o=!1}e.restore(c)}else if(o=this._peekTag(e,u,n.any),e.isError(o))return o}let s;if(n.obj&&o&&(s=e.enterObject()),o){if(n.explicit!==null){const c=this._decodeTag(e,n.explicit);if(e.isError(c))return c;e=c}const u=e.offset;if(n.use===null&&n.choice===null){let c;n.any&&(c=e.save());const f=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(f))return f;n.any?i=e.raw(c):e=f}if(t&&t.track&&n.tag!==null&&t.track(e.path(),u,e.length,"tagged"),t&&t.track&&n.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,t):i=this._decodeChoice(e,t)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(f){f._decode(e,t)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){const c=new b1(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(c,t)}}return n.obj&&o&&(i=e.leaveObject(s)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(a,n.key,i):a!==null&&e.exitKey(a),i};Ge.prototype._decodeGeneric=function(e,t,n){const i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):e==="objid"&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(t,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(t,e,n):e==="null_"?this._decodeNull(t,n):e==="bool"?this._decodeBool(t,n):e==="objDesc"?this._decodeStr(t,e,n):e==="int"||e==="enum"?this._decodeInt(t,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)};Ge.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),Wr(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};Ge.prototype._decodeChoice=function(e,t){const n=this._baseState;let i=null,o=!1;return Object.keys(n.choice).some(function(a){const s=e.save(),u=n.choice[a];try{const c=u._decode(e,t);if(e.isError(c))return!1;i={type:a,value:c},o=!0}catch{return e.restore(s),!1}return!0},this),o?i:e.error("Choice not matched")};Ge.prototype._createEncoderBuffer=function(e){return new _1(e,this.reporter)};Ge.prototype._encode=function(e,t,n){const i=this._baseState;if(i.default!==null&&i.default===e)return;const o=this._encodeValue(e,t,n);if(o!==void 0&&!this._skipDefault(o,t,n))return o};Ge.prototype._encodeValue=function(e,t,n){const i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,t||new y1);let o=null;if(this.reporter=t,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let a=null,s=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)a=this._getUse(i.contains,n)._encode(e,t),s=!0;else if(i.children)a=i.children.map(function(u){if(u._baseState.tag==="null_")return u._encode(null,t,e);if(u._baseState.key===null)return t.error("Child should have a key");const c=t.enterKey(u._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");const f=u._encode(e[u._baseState.key],t,e);return t.leaveKey(c),f},this).filter(function(u){return u}),a=this._createEncoderBuffer(a);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(c){const f=this._baseState;return this._getUse(f.args[0],e)._encode(c,t)},u))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,t):(a=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&i.choice===null){const u=i.implicit!==null?i.implicit:i.tag,c=i.implicit===null?"universal":"context";u===null?i.use===null&&t.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(u,s,c,a))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};Ge.prototype._encodeChoice=function(e,t){const n=this._baseState,i=n.choice[e.type];return i||Wr(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)};Ge.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Ge.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Ge.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var qc={};(function(r){function e(t){const n={};return Object.keys(t).forEach(function(i){(i|0)==i&&(i=i|0);const o=t[i];n[o]=i}),n}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=e(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=e(r.tag)})(qc);const S1=_i,to=Sh.Buffer,p0=Ch,Hf=qc;function g0(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new bi,this.tree._init(r.body)}var m0=g0;g0.prototype.encode=function(e,t){return this.tree._encode(e,t).join()};function bi(r){p0.call(this,"der",r)}S1(bi,p0);bi.prototype._encodeComposite=function(e,t,n,i){const o=C1(e,t,n,this.reporter);if(i.length<128){const u=to.alloc(2);return u[0]=o,u[1]=i.length,this._createEncoderBuffer([u,i])}let a=1;for(let u=i.length;u>=256;u>>=8)a++;const s=to.alloc(1+1+a);s[0]=o,s[1]=128|a;for(let u=1+a,c=i.length;c>0;u--,c>>=8)s[u]=c&255;return this._createEncoderBuffer([s,i])};bi.prototype._encodeStr=function(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){const n=to.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};bi.prototype._encodeObjid=function(e,t,n){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let s=0;s<e.length;s++)e[s]|=0}else if(Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let s=0;s<e.length;s++){let u=e[s];for(i++;u>=128;u>>=7)i++}const o=to.alloc(i);let a=o.length-1;for(let s=e.length-1;s>=0;s--){let u=e[s];for(o[a--]=u&127;(u>>=7)>0;)o[a--]=128|u&127}return this._createEncoderBuffer(o)};function wn(r){return r<10?"0"+r:r}bi.prototype._encodeTime=function(e,t){let n;const i=new Date(e);return t==="gentime"?n=[wn(i.getUTCFullYear()),wn(i.getUTCMonth()+1),wn(i.getUTCDate()),wn(i.getUTCHours()),wn(i.getUTCMinutes()),wn(i.getUTCSeconds()),"Z"].join(""):t==="utctime"?n=[wn(i.getUTCFullYear()%100),wn(i.getUTCMonth()+1),wn(i.getUTCDate()),wn(i.getUTCHours()),wn(i.getUTCMinutes()),wn(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")};bi.prototype._encodeNull=function(){return this._createEncoderBuffer("")};bi.prototype._encodeInt=function(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!to.isBuffer(e)){const o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=to.from(o)}if(to.isBuffer(e)){let o=e.length;e.length===0&&o++;const a=to.alloc(o);return e.copy(a),e.length===0&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;const i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(to.from(i))};bi.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};bi.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};bi.prototype._skipDefault=function(e,t,n){const i=this._baseState;let o;if(i.default===null)return!1;const a=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),a.length!==i.defaultBuffer.length)return!1;for(o=0;o<a.length;o++)if(a[o]!==i.defaultBuffer[o])return!1;return!0};function C1(r,e,t,n){let i;if(r==="seqof"?r="seq":r==="setof"&&(r="set"),Hf.tagByName.hasOwnProperty(r))i=Hf.tagByName[r];else if(typeof r=="number"&&(r|0)===r)i=r;else return n.error("Unknown tag: "+r);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=Hf.tagClassByName[t||"universal"]<<6,i)}const I1=_i,Ih=m0;function Ah(r){Ih.call(this,r),this.enc="pem"}I1(Ah,Ih);var A1=Ah;Ah.prototype.encode=function(e,t){const i=Ih.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+t.label+"-----"];for(let a=0;a<i.length;a+=64)o.push(i.slice(a,a+64));return o.push("-----END "+t.label+"-----"),o.join(`
`)};(function(r){const e=r;e.der=m0,e.pem=A1})(wh);var Mh={};const M1=_i,N1=yi,lp=Aa.DecoderBuffer,v0=Ch,hp=qc;function y0(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new _n,this.tree._init(r.body)}var _0=y0;y0.prototype.decode=function(e,t){return lp.isDecoderBuffer(e)||(e=new lp(e,t)),this.tree._decode(e,t)};function _n(r){v0.call(this,"der",r)}M1(_n,v0);_n.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const i=e.save(),o=Nh(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)};_n.prototype._decodeTag=function(e,t,n){const i=Nh(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let o=b0(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+t+'"');const a=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(o=e.offset-a.offset,e.restore(a),e.skip(o,'Failed to match body of: "'+t+'"'))};_n.prototype._skipUntilEnd=function(e,t){for(;;){const n=Nh(e,t);if(e.isError(n))return n;const i=b0(e,n.primitive,t);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,t),e.isError(o))return o;if(n.tagStr==="end")break}};_n.prototype._decodeList=function(e,t,n,i){const o=[];for(;!e.isEmpty();){const a=this._peekTag(e,"end");if(e.isError(a))return a;const s=n.decode(e,"der",i);if(e.isError(s)&&a)break;o.push(s)}return o};_n.prototype._decodeStr=function(e,t){if(t==="bitstr"){const n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(t==="bmpstr"){const n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(t==="numstr"){const n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){const n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};_n.prototype._decodeObjid=function(e,t,n){let i;const o=[];let a=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),a<<=7,a|=s&127,s&128||(o.push(a),a=0);s&128&&o.push(a);const u=o[0]/40|0,c=o[0]%40;if(n?i=o:i=[u,c].concat(o.slice(1)),t){let f=t[i.join(" ")];f===void 0&&(f=t[i.join(".")]),f!==void 0&&(i=f)}return i};_n.prototype._decodeTime=function(e,t){const n=e.raw().toString();let i,o,a,s,u,c;if(t==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,a=n.slice(6,8)|0,s=n.slice(8,10)|0,u=n.slice(10,12)|0,c=n.slice(12,14)|0;else if(t==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,a=n.slice(4,6)|0,s=n.slice(6,8)|0,u=n.slice(8,10)|0,c=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(i,o-1,a,s,u,c,0)};_n.prototype._decodeNull=function(){return null};_n.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:t!==0};_n.prototype._decodeInt=function(e,t){const n=e.raw();let i=new N1(n);return t&&(i=t[i.toString(10)]||i),i};_n.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function Nh(r,e){let t=r.readUInt8(e);if(r.isError(t))return t;const n=hp.tagClass[t>>6],i=(t&32)===0;if((t&31)===31){let a=t;for(t=0;(a&128)===128;){if(a=r.readUInt8(e),r.isError(a))return a;t<<=7,t|=a&127}}else t&=31;const o=hp.tag[t];return{cls:n,primitive:i,tag:t,tagStr:o}}function b0(r,e,t){let n=r.readUInt8(t);if(r.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;const i=n&127;if(i>4)return r.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;const a=r.readUInt8(t);if(r.isError(a))return a;n|=a}return n}const P1=_i,L1=Sh.Buffer,Ph=_0;function Lh(r){Ph.call(this,r),this.enc="pem"}P1(Lh,Ph);var R1=Lh;Lh.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,s=-1;for(let f=0;f<n.length;f++){const h=n[f].match(o);if(h!==null&&h[2]===i)if(a===-1){if(h[1]!=="BEGIN")break;a=f}else{if(h[1]!=="END")break;s=f;break}}if(a===-1||s===-1)throw new Error("PEM section not found for: "+i);const u=n.slice(a+1,s).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const c=L1.from(u,"base64");return Ph.prototype.decode.call(this,c,t)};(function(r){const e=r;e.der=_0,e.pem=R1})(Mh);(function(r){const e=wh,t=Mh,n=_i,i=r;i.define=function(s,u){return new o(s,u)};function o(a,s){this.name=a,this.body=s,this.decoders={},this.encoders={}}o.prototype._createNamed=function(s){const u=this.name;function c(f){this._initNamed(f,u)}return n(c,s),c.prototype._initNamed=function(h,p){s.call(this,h,p)},new c(this)},o.prototype._getDecoder=function(s){return s=s||"der",this.decoders.hasOwnProperty(s)||(this.decoders[s]=this._createNamed(t[s])),this.decoders[s]},o.prototype.decode=function(s,u,c){return this._getDecoder(u).decode(s,c)},o.prototype._getEncoder=function(s){return s=s||"der",this.encoders.hasOwnProperty(s)||(this.encoders[s]=this._createNamed(e[s])),this.encoders[s]},o.prototype.encode=function(s,u,c){return this._getEncoder(u).encode(s,c)}})(f0);var w0={};(function(r){const e=r;e.Reporter=zc.Reporter,e.DecoderBuffer=Aa.DecoderBuffer,e.EncoderBuffer=Aa.EncoderBuffer,e.Node=Ch})(w0);var E0={};(function(r){const e=r;e._reverse=function(n){const i={};return Object.keys(n).forEach(function(o){(o|0)==o&&(o=o|0);const a=n[o];i[a]=o}),i},e.der=qc})(E0);(function(r){const e=r;e.bignum=yi,e.define=f0.define,e.base=w0,e.constants=E0,e.decoders=Mh,e.encoders=wh})(Qo);var Al={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=Eh,n=t.Buffer;function i(a,s){for(var u in a)s[u]=a[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=o);function o(a,s,u){return n(a,s,u)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,u){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,u)},o.alloc=function(a,s,u){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(Al,Al.exports);var x0=Al.exports,S0={};const T1="elliptic",O1="6.5.4",D1="EC cryptography",k1="lib/elliptic.js",B1=["lib"],F1={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},z1={type:"git",url:"git@github.com:indutny/elliptic"},U1=["EC","Elliptic","curve","Cryptography"],q1="Fedor Indutny <fedor@indutny.com>",H1="MIT",G1={url:"https://github.com/indutny/elliptic/issues"},V1="https://github.com/indutny/elliptic",K1={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},W1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},J1={name:T1,version:O1,description:D1,main:k1,files:B1,scripts:F1,repository:z1,keywords:U1,author:q1,license:H1,bugs:G1,homepage:V1,devDependencies:K1,dependencies:W1};var bn={},Rh={};(function(r){var e=r;function t(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var s=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)s[u]=o[u]|0;return s}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)s.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var c=o.charCodeAt(u),f=c>>8,h=c&255;f?s.push(f,h):s.push(h)}return s}e.toArray=t;function n(o){return o.length===1?"0"+o:o}e.zero2=n;function i(o){for(var a="",s=0;s<o.length;s++)a+=n(o[s].toString(16));return a}e.toHex=i,e.encode=function(a,s){return s==="hex"?i(a):a}})(Rh);(function(r){var e=r,t=yi,n=ea,i=Rh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function o(f,h,p){var b=new Array(Math.max(f.bitLength(),p)+1);b.fill(0);for(var _=1<<h+1,S=f.clone(),R=0;R<b.length;R++){var D,v=S.andln(_-1);S.isOdd()?(v>(_>>1)-1?D=(_>>1)-v:D=v,S.isubn(D)):D=0,b[R]=D,S.iushrn(1)}return b}e.getNAF=o;function a(f,h){var p=[[],[]];f=f.clone(),h=h.clone();for(var b=0,_=0,S;f.cmpn(-b)>0||h.cmpn(-_)>0;){var R=f.andln(3)+b&3,D=h.andln(3)+_&3;R===3&&(R=-1),D===3&&(D=-1);var v;R&1?(S=f.andln(7)+b&7,(S===3||S===5)&&D===2?v=-R:v=R):v=0,p[0].push(v);var E;D&1?(S=h.andln(7)+_&7,(S===3||S===5)&&R===2?E=-D:E=D):E=0,p[1].push(E),2*b===v+1&&(b=1-b),2*_===E+1&&(_=1-_),f.iushrn(1),h.iushrn(1)}return p}e.getJSF=a;function s(f,h,p){var b="_"+h;f.prototype[h]=function(){return this[b]!==void 0?this[b]:this[b]=p.call(this)}}e.cachedProperty=s;function u(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=u;function c(f){return new t(f,"hex","le")}e.intFromLE=c})(bn);var Th={exports:{}},Gf;Th.exports=function(e){return Gf||(Gf=new Ro(null)),Gf.generate(e)};function Ro(r){this.rand=r}Th.exports.Rand=Ro;Ro.prototype.generate=function(e){return this._rand(e)};Ro.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Ro.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Ro.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Ro.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var dp=$p;if(typeof dp.randomBytes!="function")throw new Error("Not supported");Ro.prototype._rand=function(e){return dp.randomBytes(e)}}catch{}var C0=Th.exports,Oh={},ra=yi,wu=bn,uc=wu.getNAF,X1=wu.getJSF,cc=wu.assert;function ta(r,e){this.type=r,this.p=new ra(e.p,16),this.red=e.prime?ra.red(e.prime):ra.mont(this.p),this.zero=new ra(0).toRed(this.red),this.one=new ra(1).toRed(this.red),this.two=new ra(2).toRed(this.red),this.n=e.n&&new ra(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Hc=ta;ta.prototype.point=function(){throw new Error("Not implemented")};ta.prototype.validate=function(){throw new Error("Not implemented")};ta.prototype._fixedNafMul=function(e,t){cc(e.precomputed);var n=e._getDoubles(),i=uc(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var a=[],s,u;for(s=0;s<i.length;s+=n.step){u=0;for(var c=s+n.step-1;c>=s;c--)u=(u<<1)+i[c];a.push(u)}for(var f=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=o;p>0;p--){for(s=0;s<a.length;s++)u=a[s],u===p?h=h.mixedAdd(n.points[s]):u===-p&&(h=h.mixedAdd(n.points[s].neg()));f=f.add(h)}return f.toP()};ta.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,a=uc(t,n,this._bitLength),s=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var c=0;u>=0&&a[u]===0;u--)c++;if(u>=0&&c++,s=s.dblp(c),u<0)break;var f=a[u];cc(f!==0),e.type==="affine"?f>0?s=s.mixedAdd(o[f-1>>1]):s=s.mixedAdd(o[-f-1>>1].neg()):f>0?s=s.add(o[f-1>>1]):s=s.add(o[-f-1>>1].neg())}return e.type==="affine"?s.toP():s};ta.prototype._wnafMulAdd=function(e,t,n,i,o){var a=this._wnafT1,s=this._wnafT2,u=this._wnafT3,c=0,f,h,p;for(f=0;f<i;f++){p=t[f];var b=p._getNAFPoints(e);a[f]=b.wnd,s[f]=b.points}for(f=i-1;f>=1;f-=2){var _=f-1,S=f;if(a[_]!==1||a[S]!==1){u[_]=uc(n[_],a[_],this._bitLength),u[S]=uc(n[S],a[S],this._bitLength),c=Math.max(u[_].length,c),c=Math.max(u[S].length,c);continue}var R=[t[_],null,null,t[S]];t[_].y.cmp(t[S].y)===0?(R[1]=t[_].add(t[S]),R[2]=t[_].toJ().mixedAdd(t[S].neg())):t[_].y.cmp(t[S].y.redNeg())===0?(R[1]=t[_].toJ().mixedAdd(t[S]),R[2]=t[_].add(t[S].neg())):(R[1]=t[_].toJ().mixedAdd(t[S]),R[2]=t[_].toJ().mixedAdd(t[S].neg()));var D=[-3,-1,-5,-7,0,7,5,1,3],v=X1(n[_],n[S]);for(c=Math.max(v[0].length,c),u[_]=new Array(c),u[S]=new Array(c),h=0;h<c;h++){var E=v[0][h]|0,M=v[1][h]|0;u[_][h]=D[(E+1)*3+(M+1)],u[S][h]=0,s[_]=R}}var O=this.jpoint(null,null,null),k=this._wnafT4;for(f=c;f>=0;f--){for(var F=0;f>=0;){var z=!0;for(h=0;h<i;h++)k[h]=u[h][f]|0,k[h]!==0&&(z=!1);if(!z)break;F++,f--}if(f>=0&&F++,O=O.dblp(F),f<0)break;for(h=0;h<i;h++){var U=k[h];U!==0&&(U>0?p=s[h][U-1>>1]:U<0&&(p=s[h][-U-1>>1].neg()),p.type==="affine"?O=O.mixedAdd(p):O=O.add(p))}}for(f=0;f<i;f++)s[f]=null;return o?O:O.toP()};function Zn(r,e){this.curve=r,this.type=e,this.precomputed=null}ta.BasePoint=Zn;Zn.prototype.eq=function(){throw new Error("Not implemented")};Zn.prototype.validate=function(){return this.curve.validate(this)};ta.prototype.decodePoint=function(e,t){e=wu.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?cc(e[e.length-1]%2===0):e[0]===7&&cc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Zn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Zn.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};Zn.prototype.encode=function(e,t){return wu.encode(this._encode(t),e)};Zn.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Zn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Zn.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<t;o+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Zn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(i);return{wnd:e,points:t}};Zn.prototype._getBeta=function(){return null};Zn.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var Y1=bn,pt=yi,Dh=_i,Cs=Hc,j1=Y1.assert;function Qn(r){Cs.call(this,"short",r),this.a=new pt(r.a,16).toRed(this.red),this.b=new pt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Dh(Qn,Cs);var $1=Qn;Qn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new pt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new pt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?n=o[0]:(n=o[1],j1(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(s){return{a:new pt(s.a,16),b:new pt(s.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};Qn.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:pt.mont(e),n=new pt(2).toRed(t).redInvm(),i=n.redNeg(),o=new pt(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(o).fromRed(),s=i.redSub(o).fromRed();return[a,s]};Qn.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new pt(1),a=new pt(0),s=new pt(0),u=new pt(1),c,f,h,p,b,_,S,R=0,D,v;n.cmpn(0)!==0;){var E=i.div(n);D=i.sub(E.mul(n)),v=s.sub(E.mul(o));var M=u.sub(E.mul(a));if(!h&&D.cmp(t)<0)c=S.neg(),f=o,h=D.neg(),p=v;else if(h&&++R===2)break;S=D,i=n,n=D,s=o,o=v,u=a,a=M}b=D.neg(),_=v;var O=h.sqr().add(p.sqr()),k=b.sqr().add(_.sqr());return k.cmp(O)>=0&&(b=c,_=f),h.negative&&(h=h.neg(),p=p.neg()),b.negative&&(b=b.neg(),_=_.neg()),[{a:h,b:p},{a:b,b:_}]};Qn.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],o=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),s=o.mul(n.a),u=a.mul(i.a),c=o.mul(n.b),f=a.mul(i.b),h=e.sub(s).sub(u),p=c.add(f).neg();return{k1:h,k2:p}};Qn.prototype.pointFromX=function(e,t){e=new pt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)};Qn.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Qn.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),u=e[a],c=u._getBeta();s.k1.negative&&(s.k1.ineg(),u=u.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),i[a*2]=u,i[a*2+1]=c,o[a*2]=s.k1,o[a*2+1]=s.k2}for(var f=this._wnafMulAdd(1,i,o,a*2,n),h=0;h<a*2;h++)i[h]=null,o[h]=null;return f};function yr(r,e,t,n){Cs.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new pt(e,16),this.y=new pt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Dh(yr,Cs.BasePoint);Qn.prototype.point=function(e,t,n){return new yr(this,e,t,n)};Qn.prototype.pointFromJSON=function(e,t){return yr.fromJSON(this,e,t)};yr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};yr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};yr.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function o(s){return e.point(s[0],s[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(o))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(o))}},i};yr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};yr.prototype.isInfinity=function(){return this.inf};yr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};yr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=o.redSqr().redISub(this.x.redAdd(this.x)),s=o.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)};yr.prototype.getX=function(){return this.x.fromRed()};yr.prototype.getY=function(){return this.y.fromRed()};yr.prototype.mul=function(e){return e=new pt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};yr.prototype.mulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};yr.prototype.jmulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};yr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};yr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};yr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ar(r,e,t,n){Cs.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new pt(0)):(this.x=new pt(e,16),this.y=new pt(t,16),this.z=new pt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Dh(Ar,Cs.BasePoint);Qn.prototype.jpoint=function(e,t,n){return new Ar(this,e,t,n)};Ar.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Ar.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ar.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),o=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),u=i.redSub(o),c=a.redSub(s);if(u.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=u.redSqr(),h=f.redMul(u),p=i.redMul(f),b=c.redSqr().redIAdd(h).redISub(p).redISub(p),_=c.redMul(p.redISub(b)).redISub(a.redMul(h)),S=this.z.redMul(e.z).redMul(u);return this.curve.jpoint(b,_,S)};Ar.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),o=this.y,a=e.y.redMul(t).redMul(this.z),s=n.redSub(i),u=o.redSub(a);if(s.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),f=c.redMul(s),h=n.redMul(c),p=u.redSqr().redIAdd(f).redISub(h).redISub(h),b=u.redMul(h.redISub(p)).redISub(o.redMul(f)),_=this.z.redMul(s);return this.curve.jpoint(p,b,_)};Ar.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,a=this.x,s=this.y,u=this.z,c=u.redSqr().redSqr(),f=s.redAdd(s);for(t=0;t<e;t++){var h=a.redSqr(),p=f.redSqr(),b=p.redSqr(),_=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(c)),S=a.redMul(p),R=_.redSqr().redISub(S.redAdd(S)),D=S.redISub(R),v=_.redMul(D);v=v.redIAdd(v).redISub(b);var E=f.redMul(u);t+1<e&&(c=c.redMul(b)),a=R,u=E,f=v}return this.curve.jpoint(a,f.redMul(o),u)};Ar.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ar.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i),c=u.redSqr().redISub(s).redISub(s),f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),e=c,t=u.redMul(s.redISub(c)).redISub(f),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),p=this.y.redSqr(),b=p.redSqr(),_=this.x.redAdd(p).redSqr().redISub(h).redISub(b);_=_.redIAdd(_);var S=h.redAdd(h).redIAdd(h),R=S.redSqr(),D=b.redIAdd(b);D=D.redIAdd(D),D=D.redIAdd(D),e=R.redISub(_).redISub(_),t=S.redMul(_.redISub(e)).redISub(D),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Ar.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=u.redSqr().redISub(s).redISub(s);e=c;var f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),t=u.redMul(s.redISub(c)).redISub(f),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),p=this.y.redSqr(),b=this.x.redMul(p),_=this.x.redSub(h).redMul(this.x.redAdd(h));_=_.redAdd(_).redIAdd(_);var S=b.redIAdd(b);S=S.redIAdd(S);var R=S.redAdd(S);e=_.redSqr().redISub(R),n=this.y.redAdd(this.z).redSqr().redISub(p).redISub(h);var D=p.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D),t=_.redMul(S.redISub(e)).redISub(D)}return this.curve.jpoint(e,t,n)};Ar.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),a=t.redSqr(),s=n.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(o)),c=t.redAdd(t);c=c.redIAdd(c);var f=c.redMul(s),h=u.redSqr().redISub(f.redAdd(f)),p=f.redISub(h),b=s.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var _=u.redMul(p).redISub(b),S=n.redAdd(n).redMul(i);return this.curve.jpoint(h,_,S)};Ar.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),o=e.redAdd(e).redIAdd(e),a=o.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(a);var u=s.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var f=o.redIAdd(s).redSqr().redISub(a).redISub(u).redISub(c),h=t.redMul(f);h=h.redIAdd(h),h=h.redIAdd(h);var p=this.x.redMul(u).redISub(h);p=p.redIAdd(p),p=p.redIAdd(p);var b=this.y.redMul(f.redMul(c.redISub(f)).redISub(s.redMul(u)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var _=this.z.redAdd(s).redSqr().redISub(n).redISub(u);return this.curve.jpoint(p,b,_)};Ar.prototype.mul=function(e,t){return e=new pt(e,t),this.curve._wnafMul(this,e)};Ar.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};Ar.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Ar.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ar.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ua=yi,I0=_i,Gc=Hc,Z1=bn;function Is(r){Gc.call(this,"mont",r),this.a=new Ua(r.a,16).toRed(this.red),this.b=new Ua(r.b,16).toRed(this.red),this.i4=new Ua(4).toRed(this.red).redInvm(),this.two=new Ua(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}I0(Is,Gc);var Q1=Is;Is.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),o=i.redSqrt();return o.redSqr().cmp(i)===0};function vr(r,e,t){Gc.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ua(e,16),this.z=new Ua(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}I0(vr,Gc.BasePoint);Is.prototype.decodePoint=function(e,t){return this.point(Z1.toArray(e,t),1)};Is.prototype.point=function(e,t){return new vr(this,e,t)};Is.prototype.pointFromJSON=function(e){return vr.fromJSON(this,e)};vr.prototype.precompute=function(){};vr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};vr.fromJSON=function(e,t){return new vr(e,t[0],t[1]||e.one)};vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};vr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=t.redSub(i),a=t.redMul(i),s=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(a,s)};vr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};vr.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),a=e.x.redSub(e.z),s=a.redMul(n),u=o.redMul(i),c=t.z.redMul(s.redAdd(u).redSqr()),f=t.x.redMul(s.redISub(u).redSqr());return this.curve.point(c,f)};vr.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),o=this,a=[];t.cmpn(0)!==0;t.iushrn(1))a.push(t.andln(1));for(var s=a.length-1;s>=0;s--)a[s]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};vr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};vr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};vr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};vr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};vr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var eb=bn,io=yi,A0=_i,Vc=Hc,tb=eb.assert;function ji(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Vc.call(this,"edwards",r),this.a=new io(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new io(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new io(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),tb(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}A0(ji,Vc);var rb=ji;ji.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};ji.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};ji.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};ji.prototype.pointFromX=function(e,t){e=new io(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(o.redInvm()),s=a.redSqrt();if(s.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var u=s.fromRed().isOdd();return(t&&!u||!t&&u)&&(s=s.redNeg()),this.point(e,s)};ji.prototype.pointFromY=function(e,t){e=new io(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(o.redInvm());if(a.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(s.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)};ji.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(o)===0};function je(r,e,t,n,i){Vc.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new io(e,16),this.y=new io(t,16),this.z=n?new io(n,16):this.curve.one,this.t=i&&new io(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}A0(je,Vc.BasePoint);ji.prototype.pointFromJSON=function(e){return je.fromJSON(this,e)};ji.prototype.point=function(e,t,n,i){return new je(this,e,t,n,i)};je.fromJSON=function(e,t){return new je(e,t[0],t[1],t[2])};je.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};je.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};je.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),s=a.redSub(n),u=i.redSub(t),c=o.redMul(s),f=a.redMul(u),h=o.redMul(u),p=s.redMul(a);return this.curve.point(c,f,p,h)};je.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,o,a,s,u,c;if(this.curve.twisted){s=this.curve._mulA(t);var f=s.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(f.redSub(this.curve.two)),o=f.redMul(s.redSub(n)),a=f.redSqr().redSub(f).redSub(f)):(u=this.z.redSqr(),c=f.redSub(u).redISub(u),i=e.redSub(t).redISub(n).redMul(c),o=f.redMul(s.redSub(n)),a=f.redMul(c))}else s=t.redAdd(n),u=this.curve._mulC(this.z).redSqr(),c=s.redSub(u).redSub(u),i=this.curve._mulC(e.redISub(s)).redMul(c),o=this.curve._mulC(s).redMul(t.redISub(n)),a=s.redMul(c);return this.curve.point(i,o,a)};je.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};je.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),s=o.redSub(i),u=o.redAdd(i),c=n.redAdd(t),f=a.redMul(s),h=u.redMul(c),p=a.redMul(c),b=s.redMul(u);return this.curve.point(f,h,b,p)};je.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(o),s=n.redSub(a),u=n.redAdd(a),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),f=t.redMul(s).redMul(c),h,p;return this.curve.twisted?(h=t.redMul(u).redMul(o.redSub(this.curve._mulA(i))),p=s.redMul(u)):(h=t.redMul(u).redMul(o.redSub(i)),p=this.curve._mulC(s).redMul(u)),this.curve.point(f,h,p)};je.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};je.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};je.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};je.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};je.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};je.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};je.prototype.getX=function(){return this.normalize(),this.x.fromRed()};je.prototype.getY=function(){return this.normalize(),this.y.fromRed()};je.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};je.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};je.prototype.toP=je.prototype.normalize;je.prototype.mixedAdd=je.prototype.add;(function(r){var e=r;e.base=Hc,e.short=$1,e.mont=Q1,e.edwards=rb})(Oh);var Kc={},Wc={},Pe={},nb=ea,ib=_i;Pe.inherits=ib;function ob(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function ab(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var o=r.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):ob(r,i)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}Pe.toArray=ab;function sb(r){for(var e="",t=0;t<r.length;t++)e+=N0(r[t].toString(16));return e}Pe.toHex=sb;function M0(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Pe.htonl=M0;function ub(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=M0(i)),t+=P0(i.toString(16))}return t}Pe.toHex32=ub;function N0(r){return r.length===1?"0"+r:r}Pe.zero2=N0;function P0(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Pe.zero8=P0;function cb(r,e,t,n){var i=t-e;nb(i%4===0);for(var o=new Array(i/4),a=0,s=e;a<o.length;a++,s+=4){var u;n==="big"?u=r[s]<<24|r[s+1]<<16|r[s+2]<<8|r[s+3]:u=r[s+3]<<24|r[s+2]<<16|r[s+1]<<8|r[s],o[a]=u>>>0}return o}Pe.join32=cb;function fb(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var o=r[n];e==="big"?(t[i]=o>>>24,t[i+1]=o>>>16&255,t[i+2]=o>>>8&255,t[i+3]=o&255):(t[i+3]=o>>>24,t[i+2]=o>>>16&255,t[i+1]=o>>>8&255,t[i]=o&255)}return t}Pe.split32=fb;function lb(r,e){return r>>>e|r<<32-e}Pe.rotr32=lb;function hb(r,e){return r<<e|r>>>32-e}Pe.rotl32=hb;function db(r,e){return r+e>>>0}Pe.sum32=db;function pb(r,e,t){return r+e+t>>>0}Pe.sum32_3=pb;function gb(r,e,t,n){return r+e+t+n>>>0}Pe.sum32_4=gb;function mb(r,e,t,n,i){return r+e+t+n+i>>>0}Pe.sum32_5=mb;function vb(r,e,t,n){var i=r[e],o=r[e+1],a=n+o>>>0,s=(a<n?1:0)+t+i;r[e]=s>>>0,r[e+1]=a}Pe.sum64=vb;function yb(r,e,t,n){var i=e+n>>>0,o=(i<e?1:0)+r+t;return o>>>0}Pe.sum64_hi=yb;function _b(r,e,t,n){var i=e+n;return i>>>0}Pe.sum64_lo=_b;function bb(r,e,t,n,i,o,a,s){var u=0,c=e;c=c+n>>>0,u+=c<e?1:0,c=c+o>>>0,u+=c<o?1:0,c=c+s>>>0,u+=c<s?1:0;var f=r+t+i+a+u;return f>>>0}Pe.sum64_4_hi=bb;function wb(r,e,t,n,i,o,a,s){var u=e+n+o+s;return u>>>0}Pe.sum64_4_lo=wb;function Eb(r,e,t,n,i,o,a,s,u,c){var f=0,h=e;h=h+n>>>0,f+=h<e?1:0,h=h+o>>>0,f+=h<o?1:0,h=h+s>>>0,f+=h<s?1:0,h=h+c>>>0,f+=h<c?1:0;var p=r+t+i+a+u+f;return p>>>0}Pe.sum64_5_hi=Eb;function xb(r,e,t,n,i,o,a,s,u,c){var f=e+n+o+s+c;return f>>>0}Pe.sum64_5_lo=xb;function Sb(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}Pe.rotr64_hi=Sb;function Cb(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}Pe.rotr64_lo=Cb;function Ib(r,e,t){return r>>>t}Pe.shr64_hi=Ib;function Ab(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}Pe.shr64_lo=Ab;var As={},pp=Pe,Mb=ea;function Jc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}As.BlockHash=Jc;Jc.prototype.update=function(e,t){if(e=pp.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=pp.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Jc.prototype.digest=function(e){return this.update(this._pad()),Mb(this.pending===null),this._digest(e)};Jc.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,a=8;a<this.padLength;a++)i[o++]=0;return i};var Ms={},$i={},Nb=Pe,ki=Nb.rotr32;function Pb(r,e,t,n){if(r===0)return L0(e,t,n);if(r===1||r===3)return T0(e,t,n);if(r===2)return R0(e,t,n)}$i.ft_1=Pb;function L0(r,e,t){return r&e^~r&t}$i.ch32=L0;function R0(r,e,t){return r&e^r&t^e&t}$i.maj32=R0;function T0(r,e,t){return r^e^t}$i.p32=T0;function Lb(r){return ki(r,2)^ki(r,13)^ki(r,22)}$i.s0_256=Lb;function Rb(r){return ki(r,6)^ki(r,11)^ki(r,25)}$i.s1_256=Rb;function Tb(r){return ki(r,7)^ki(r,18)^r>>>3}$i.g0_256=Tb;function Ob(r){return ki(r,17)^ki(r,19)^r>>>10}$i.g1_256=Ob;var ps=Pe,Db=As,kb=$i,Vf=ps.rotl32,Fs=ps.sum32,Bb=ps.sum32_5,Fb=kb.ft_1,O0=Db.BlockHash,zb=[1518500249,1859775393,2400959708,3395469782];function Ki(){if(!(this instanceof Ki))return new Ki;O0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ps.inherits(Ki,O0);var Ub=Ki;Ki.blockSize=512;Ki.outSize=160;Ki.hmacStrength=80;Ki.padLength=64;Ki.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Vf(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],a=this.h[1],s=this.h[2],u=this.h[3],c=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),h=Bb(Vf(o,5),Fb(f,a,s,u),c,n[i],zb[f]);c=u,u=s,s=Vf(a,30),a=o,o=h}this.h[0]=Fs(this.h[0],o),this.h[1]=Fs(this.h[1],a),this.h[2]=Fs(this.h[2],s),this.h[3]=Fs(this.h[3],u),this.h[4]=Fs(this.h[4],c)};Ki.prototype._digest=function(e){return e==="hex"?ps.toHex32(this.h,"big"):ps.split32(this.h,"big")};var gs=Pe,qb=As,Ns=$i,Hb=ea,ei=gs.sum32,Gb=gs.sum32_4,Vb=gs.sum32_5,Kb=Ns.ch32,Wb=Ns.maj32,Jb=Ns.s0_256,Xb=Ns.s1_256,Yb=Ns.g0_256,jb=Ns.g1_256,D0=qb.BlockHash,$b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Wi(){if(!(this instanceof Wi))return new Wi;D0.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$b,this.W=new Array(64)}gs.inherits(Wi,D0);var k0=Wi;Wi.blockSize=512;Wi.outSize=256;Wi.hmacStrength=192;Wi.padLength=64;Wi.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Gb(jb(n[i-2]),n[i-7],Yb(n[i-15]),n[i-16]);var o=this.h[0],a=this.h[1],s=this.h[2],u=this.h[3],c=this.h[4],f=this.h[5],h=this.h[6],p=this.h[7];for(Hb(this.k.length===n.length),i=0;i<n.length;i++){var b=Vb(p,Xb(c),Kb(c,f,h),this.k[i],n[i]),_=ei(Jb(o),Wb(o,a,s));p=h,h=f,f=c,c=ei(u,b),u=s,s=a,a=o,o=ei(b,_)}this.h[0]=ei(this.h[0],o),this.h[1]=ei(this.h[1],a),this.h[2]=ei(this.h[2],s),this.h[3]=ei(this.h[3],u),this.h[4]=ei(this.h[4],c),this.h[5]=ei(this.h[5],f),this.h[6]=ei(this.h[6],h),this.h[7]=ei(this.h[7],p)};Wi.prototype._digest=function(e){return e==="hex"?gs.toHex32(this.h,"big"):gs.split32(this.h,"big")};var Ml=Pe,B0=k0;function _o(){if(!(this instanceof _o))return new _o;B0.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ml.inherits(_o,B0);var Zb=_o;_o.blockSize=512;_o.outSize=224;_o.hmacStrength=192;_o.padLength=64;_o.prototype._digest=function(e){return e==="hex"?Ml.toHex32(this.h.slice(0,7),"big"):Ml.split32(this.h.slice(0,7),"big")};var en=Pe,Qb=As,ew=ea,Bi=en.rotr64_hi,Fi=en.rotr64_lo,F0=en.shr64_hi,z0=en.shr64_lo,So=en.sum64,Kf=en.sum64_hi,Wf=en.sum64_lo,tw=en.sum64_4_hi,rw=en.sum64_4_lo,nw=en.sum64_5_hi,iw=en.sum64_5_lo,U0=Qb.BlockHash,ow=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function mi(){if(!(this instanceof mi))return new mi;U0.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=ow,this.W=new Array(160)}en.inherits(mi,U0);var q0=mi;mi.blockSize=1024;mi.outSize=512;mi.hmacStrength=192;mi.padLength=128;mi.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var o=mw(n[i-4],n[i-3]),a=vw(n[i-4],n[i-3]),s=n[i-14],u=n[i-13],c=pw(n[i-30],n[i-29]),f=gw(n[i-30],n[i-29]),h=n[i-32],p=n[i-31];n[i]=tw(o,a,s,u,c,f,h,p),n[i+1]=rw(o,a,s,u,c,f,h,p)}};mi.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],h=this.h[7],p=this.h[8],b=this.h[9],_=this.h[10],S=this.h[11],R=this.h[12],D=this.h[13],v=this.h[14],E=this.h[15];ew(this.k.length===n.length);for(var M=0;M<n.length;M+=2){var O=v,k=E,F=hw(p,b),z=dw(p,b),U=aw(p,b,_,S,R),W=sw(p,b,_,S,R,D),C=this.k[M],l=this.k[M+1],g=n[M],w=n[M+1],x=nw(O,k,F,z,U,W,C,l,g,w),N=iw(O,k,F,z,U,W,C,l,g,w);O=fw(i,o),k=lw(i,o),F=uw(i,o,a,s,u),z=cw(i,o,a,s,u,c);var T=Kf(O,k,F,z),B=Wf(O,k,F,z);v=R,E=D,R=_,D=S,_=p,S=b,p=Kf(f,h,x,N),b=Wf(h,h,x,N),f=u,h=c,u=a,c=s,a=i,s=o,i=Kf(x,N,T,B),o=Wf(x,N,T,B)}So(this.h,0,i,o),So(this.h,2,a,s),So(this.h,4,u,c),So(this.h,6,f,h),So(this.h,8,p,b),So(this.h,10,_,S),So(this.h,12,R,D),So(this.h,14,v,E)};mi.prototype._digest=function(e){return e==="hex"?en.toHex32(this.h,"big"):en.split32(this.h,"big")};function aw(r,e,t,n,i){var o=r&t^~r&i;return o<0&&(o+=4294967296),o}function sw(r,e,t,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function uw(r,e,t,n,i){var o=r&t^r&i^t&i;return o<0&&(o+=4294967296),o}function cw(r,e,t,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function fw(r,e){var t=Bi(r,e,28),n=Bi(e,r,2),i=Bi(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function lw(r,e){var t=Fi(r,e,28),n=Fi(e,r,2),i=Fi(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function hw(r,e){var t=Bi(r,e,14),n=Bi(r,e,18),i=Bi(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function dw(r,e){var t=Fi(r,e,14),n=Fi(r,e,18),i=Fi(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function pw(r,e){var t=Bi(r,e,1),n=Bi(r,e,8),i=F0(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function gw(r,e){var t=Fi(r,e,1),n=Fi(r,e,8),i=z0(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function mw(r,e){var t=Bi(r,e,19),n=Bi(e,r,29),i=F0(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}function vw(r,e){var t=Fi(r,e,19),n=Fi(e,r,29),i=z0(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}var Nl=Pe,H0=q0;function bo(){if(!(this instanceof bo))return new bo;H0.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Nl.inherits(bo,H0);var yw=bo;bo.blockSize=1024;bo.outSize=384;bo.hmacStrength=192;bo.padLength=128;bo.prototype._digest=function(e){return e==="hex"?Nl.toHex32(this.h.slice(0,12),"big"):Nl.split32(this.h.slice(0,12),"big")};Ms.sha1=Ub;Ms.sha224=Zb;Ms.sha256=k0;Ms.sha384=yw;Ms.sha512=q0;var G0={},Ma=Pe,_w=As,Ou=Ma.rotl32,gp=Ma.sum32,zs=Ma.sum32_3,mp=Ma.sum32_4,V0=_w.BlockHash;function Ji(){if(!(this instanceof Ji))return new Ji;V0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ma.inherits(Ji,V0);G0.ripemd160=Ji;Ji.blockSize=512;Ji.outSize=160;Ji.hmacStrength=192;Ji.padLength=64;Ji.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],s=this.h[4],u=n,c=i,f=o,h=a,p=s,b=0;b<80;b++){var _=gp(Ou(mp(n,vp(b,i,o,a),e[Ew[b]+t],bw(b)),Sw[b]),s);n=s,s=a,a=Ou(o,10),o=i,i=_,_=gp(Ou(mp(u,vp(79-b,c,f,h),e[xw[b]+t],ww(b)),Cw[b]),p),u=p,p=h,h=Ou(f,10),f=c,c=_}_=zs(this.h[1],o,h),this.h[1]=zs(this.h[2],a,p),this.h[2]=zs(this.h[3],s,u),this.h[3]=zs(this.h[4],n,c),this.h[4]=zs(this.h[0],i,f),this.h[0]=_};Ji.prototype._digest=function(e){return e==="hex"?Ma.toHex32(this.h,"little"):Ma.split32(this.h,"little")};function vp(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function bw(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function ww(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var Ew=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],xw=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Sw=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Cw=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Iw=Pe,Aw=ea;function ms(r,e,t){if(!(this instanceof ms))return new ms(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(Iw.toArray(e,t))}var Mw=ms;ms.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Aw(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};ms.prototype.update=function(e,t){return this.inner.update(e,t),this};ms.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=Pe,e.common=As,e.sha=Ms,e.ripemd=G0,e.hmac=Mw,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Wc);var Jf,yp;function Nw(){return yp||(yp=1,Jf={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Jf}(function(r){var e=r,t=Wc,n=Oh,i=bn,o=i.assert;function a(c){c.type==="short"?this.curve=new n.short(c):c.type==="edwards"?this.curve=new n.edwards(c):this.curve=new n.mont(c),this.g=this.curve.g,this.n=this.curve.n,this.hash=c.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function s(c,f){Object.defineProperty(e,c,{configurable:!0,enumerable:!0,get:function(){var h=new a(f);return Object.defineProperty(e,c,{configurable:!0,enumerable:!0,value:h}),h}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=Nw()}catch{u=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(Kc);var Pw=Wc,ua=Rh,K0=ea;function Jo(r){if(!(this instanceof Jo))return new Jo(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ua.toArray(r.entropy,r.entropyEnc||"hex"),t=ua.toArray(r.nonce,r.nonceEnc||"hex"),n=ua.toArray(r.pers,r.persEnc||"hex");K0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var Lw=Jo;Jo.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Jo.prototype._hmac=function(){return new Pw.hmac(this.hash,this.K)};Jo.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Jo.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=ua.toArray(e,t),n=ua.toArray(n,i),K0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Jo.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=ua.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,ua.encode(a,t)};var Rw=yi,Tw=bn,Pl=Tw.assert;function Nr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Ow=Nr;Nr.fromPublic=function(e,t,n){return t instanceof Nr?t:new Nr(e,{pub:t,pubEnc:n})};Nr.fromPrivate=function(e,t,n){return t instanceof Nr?t:new Nr(e,{priv:t,privEnc:n})};Nr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Nr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Nr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Nr.prototype._importPrivate=function(e,t){this.priv=new Rw(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Nr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Pl(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Pl(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Nr.prototype.derive=function(e){return e.validate()||Pl(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Nr.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Nr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Nr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var fc=yi,kh=bn,Dw=kh.assert;function Xc(r,e){if(r instanceof Xc)return r;this._importDER(r,e)||(Dw(r.r&&r.s,"Signature without r or s"),this.r=new fc(r.r,16),this.s=new fc(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var kw=Xc;function Bw(){this.place=0}function Xf(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function _p(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Xc.prototype._importDER=function(e,t){e=kh.toArray(e,t);var n=new Bw;if(e[n.place++]!==48)return!1;var i=Xf(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=Xf(e,n);if(o===!1)return!1;var a=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var s=Xf(e,n);if(s===!1||e.length!==s+n.place)return!1;var u=e.slice(n.place,s+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new fc(a),this.s=new fc(u),this.recoveryParam=null,!0};function Yf(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Xc.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=_p(t),n=_p(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Yf(i,t.length),i=i.concat(t),i.push(2),Yf(i,n.length);var o=i.concat(n),a=[48];return Yf(a,o.length),a=a.concat(o),kh.encode(a,e)};var ca=yi,W0=Lw,Fw=bn,jf=Kc,zw=C0,J0=Fw.assert,Bh=Ow,Yc=kw;function Wn(r){if(!(this instanceof Wn))return new Wn(r);typeof r=="string"&&(J0(Object.prototype.hasOwnProperty.call(jf,r),"Unknown curve "+r),r=jf[r]),r instanceof jf.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var Uw=Wn;Wn.prototype.keyPair=function(e){return new Bh(this,e)};Wn.prototype.keyFromPrivate=function(e,t){return Bh.fromPrivate(this,e,t)};Wn.prototype.keyFromPublic=function(e,t){return Bh.fromPublic(this,e,t)};Wn.prototype.genKeyPair=function(e){e||(e={});for(var t=new W0({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||zw(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ca(2));;){var o=new ca(t.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Wn.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Wn.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new ca(e,16));for(var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),s=e.toArray("be",o),u=new W0({hash:this.hash,entropy:a,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new ca(1)),f=0;;f++){var h=i.k?i.k(f):new ca(u.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(c)>=0)){var p=this.g.mul(h);if(!p.isInfinity()){var b=p.getX(),_=b.umod(this.n);if(_.cmpn(0)!==0){var S=h.invm(this.n).mul(_.mul(t.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var R=(p.getY().isOdd()?1:0)|(b.cmp(_)!==0?2:0);return i.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),R^=1),new Yc({r:_,s:S,recoveryParam:R})}}}}}};Wn.prototype.verify=function(e,t,n,i){e=this._truncateToN(new ca(e,16)),n=this.keyFromPublic(n,i),t=new Yc(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s=a.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(o).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(u,n.getPublic(),c),f.isInfinity()?!1:f.eqXToP(o)):(f=this.g.mulAdd(u,n.getPublic(),c),f.isInfinity()?!1:f.getX().umod(this.n).cmp(o)===0)};Wn.prototype.recoverPubKey=function(r,e,t,n){J0((3&t)===t,"The recovery param is more than two bits"),e=new Yc(e,n);var i=this.n,o=new ca(r),a=e.r,s=e.s,u=t&1,c=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?a=this.curve.pointFromX(a.add(this.curve.n),u):a=this.curve.pointFromX(a,u);var f=e.r.invm(i),h=i.sub(o).mul(f).umod(i),p=s.mul(f).umod(i);return this.g.mulAdd(h,a,p)};Wn.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Yc(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(r,e,i)}catch{continue}if(o.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var Eu=bn,X0=Eu.assert,bp=Eu.parseBytes,Ps=Eu.cachedProperty;function lr(r,e){this.eddsa=r,this._secret=bp(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=bp(e.pub)}lr.fromPublic=function(e,t){return t instanceof lr?t:new lr(e,{pub:t})};lr.fromSecret=function(e,t){return t instanceof lr?t:new lr(e,{secret:t})};lr.prototype.secret=function(){return this._secret};Ps(lr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ps(lr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ps(lr,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});Ps(lr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ps(lr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ps(lr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});lr.prototype.sign=function(e){return X0(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};lr.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};lr.prototype.getSecret=function(e){return X0(this._secret,"KeyPair is public only"),Eu.encode(this.secret(),e)};lr.prototype.getPublic=function(e){return Eu.encode(this.pubBytes(),e)};var qw=lr,Hw=yi,jc=bn,Gw=jc.assert,$c=jc.cachedProperty,Vw=jc.parseBytes;function Da(r,e){this.eddsa=r,typeof e!="object"&&(e=Vw(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),Gw(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof Hw&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}$c(Da,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});$c(Da,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});$c(Da,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});$c(Da,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Da.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Da.prototype.toHex=function(){return jc.encode(this.toBytes(),"hex").toUpperCase()};var Kw=Da,Ww=Wc,Jw=Kc,vs=bn,Xw=vs.assert,Y0=vs.parseBytes,j0=qw,wp=Kw;function tn(r){if(Xw(r==="ed25519","only tested with ed25519 so far"),!(this instanceof tn))return new tn(r);r=Jw[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=Ww.sha512}var Yw=tn;tn.prototype.sign=function(e,t){e=Y0(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),a=this.encodePoint(o),s=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),u=i.add(s).umod(this.curve.n);return this.makeSignature({R:o,S:u,Rencoded:a})};tn.prototype.verify=function(e,t,n){e=Y0(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S()),s=t.R().add(i.pub().mul(o));return s.eq(a)};tn.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return vs.intFromLE(e.digest()).umod(this.curve.n)};tn.prototype.keyFromPublic=function(e){return j0.fromPublic(this,e)};tn.prototype.keyFromSecret=function(e){return j0.fromSecret(this,e)};tn.prototype.makeSignature=function(e){return e instanceof wp?e:new wp(this,e)};tn.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};tn.prototype.decodePoint=function(e){e=vs.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,o=vs.intFromLE(n);return this.curve.pointFromY(o,i)};tn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};tn.prototype.decodeInt=function(e){return vs.intFromLE(e)};tn.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=J1.version,e.utils=bn,e.rand=C0,e.curve=Oh,e.curves=Kc,e.ec=Uw,e.eddsa=Yw})(S0);var jw=Qo.bignum,$w=x0.Buffer,$0=function(e,t){var n=$w.from(e,"base64"),i=e=new jw(n,10,"be").iabs();return t&&n.fill(0),i},Z0=Qo.define("AlgorithmIdentifer",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),Zw=Z0,Q0=Qo.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Zw),this.key("PublicKey").bitstr())}),Fh=Qo.define("Version",function(){this.int()}),Qw=Z0,e2=Fh,em=Qo.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(e2),this.key("privateKeyAlgorithm").use(Qw),this.key("privateKey").octstr(),this.key("attributes").optional().any())}),tm=Qo,Ep=x0.Buffer,t2=S0.ec,$f=$0,r2=Q0,n2=em,i2=Fh,o2=tm.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),a2=1,s2=tm.define("ECPrivateKey",function(){this.seq().obj(this.key("version").use(i2),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr())}),u2={"P-256":"p256","P-384":"p384","P-521":"p521"},Ll={"P-256":[1,2,840,10045,3,1,7],"P-384":[1,3,132,0,34],"P-521":[1,3,132,0,35]},Rl={},Tl={};Object.keys(Ll).forEach(function(r){Rl[r]=o2.encode({type:"namedCurve",value:Ll[r]},"der"),Tl[r]={algorithm:[1,2,840,10045,2,1],parameters:Rl[r]}});Ll=null;function c2(r,e){if(typeof r.crv!="string")throw new TypeError('Expected "jwk.crv" to be a String');var t=typeof r.d=="string",n=t?["undefined","string"]:["string"];if(n.indexOf(typeof r.x)===-1)throw new TypeError('Expected "jwk.x" to be a String');if(n.indexOf(typeof r.y)===-1)throw new TypeError('Expected "jwk.y" to be a String');if(e.private&&!t)throw new TypeError('Expected "jwk.d" to be a String');var i=u2[r.crv];if(!i)throw new Error('Unsupported curve "'+r.crv+'"');var o=new t2(i),a={},s=r.x&&r.y;s&&(a.pub={x:$f(r.x,!1),y:$f(r.y,!1)}),(e.private||!s)&&(a.priv=$f(r.d,!0)),a=o.keyPair(a);var u=a.validate();if(!u.result)throw new Error('Invalid key for curve: "'+u.reason+'"');var c=f2(r.crv,a,e);return c}function f2(r,e,t){var n=!1,i=e.getPublic(n,"hex");i=Ep.from(i,"hex"),i={unused:0,data:i};var o;if(t.private){var a=e.getPrivate("hex");a=Ep.from(a,"hex"),o=n2.encode({version:0,privateKeyAlgorithm:Tl[r],privateKey:s2.encode({version:a2,privateKey:a,parameters:Rl[r],publicKey:i},"der")},"pem",{label:"PRIVATE KEY"}),a.fill(0)}else o=r2.encode({algorithm:Tl[r],PublicKey:i},"pem",{label:"PUBLIC KEY"});return o.slice(-1)!==`
`&&(o+=`
`),o}var l2=c2,rm=Qo,xi=$0,h2=Q0,d2=em,p2=Fh,g2=rm.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(p2),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),m2=rm.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),xp={algorithm:[1,2,840,113549,1,1,1],parameters:[5,0]};function v2(r,e){if(typeof r.e!="string")throw new TypeError('Expected "jwk.e" to be a String');if(typeof r.n!="string")throw new TypeError('Expected "jwk.n" to be a String');if(e.private){if(typeof r.d!="string")throw new TypeError('Expected "jwk.d" to be a String');if(typeof r.p!="string")throw new TypeError('Expected "jwk.p" to be a String');if(typeof r.q!="string")throw new TypeError('Expected "jwk.q" to be a String');if(typeof r.dp!="string")throw new TypeError('Expected "jwk.dp" to be a String');if(typeof r.dq!="string")throw new TypeError('Expected "jwk.dq" to be a String');if(typeof r.qi!="string")throw new TypeError('Expected "jwk.qi" to be a String')}var t;return e.private?t=d2.encode({version:0,privateKeyAlgorithm:xp,privateKey:g2.encode({version:0,modulus:xi(r.n,!1),publicExponent:xi(r.e,!1),privateExponent:xi(r.d,!0),prime1:xi(r.p,!0),prime2:xi(r.q,!0),exponent1:xi(r.dp,!0),exponent2:xi(r.dq,!0),coefficient:xi(r.qi,!0)},"der")},"pem",{label:"PRIVATE KEY"}):t=h2.encode({algorithm:xp,PublicKey:{unused:0,data:m2.encode({modulus:xi(r.n,!1),publicExponent:xi(r.e,!1)},"der")}},"pem",{label:"PUBLIC KEY"}),t.slice(-1)!==`
`&&(t+=`
`),t}var y2=v2,_2=l2,b2=y2;function w2(r,e){if(typeof r!="object"||r===null)throw new TypeError('Expected "jwk" to be an Object');var t=r.kty;if(typeof t!="string")throw new TypeError('Expected "jwk.kty" to be a String');switch(e=e||{},e.private=e.private===!0,t){case"EC":return _2(r,e);case"RSA":return b2(r,e);default:throw new Error('Unsupported key type "'+t+'"')}}var E2=w2;function nm(r,e){return function(){return r.apply(e,arguments)}}const{toString:x2}=Object.prototype,{getPrototypeOf:zh}=Object,Zc=(r=>e=>{const t=x2.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Zi=r=>(r=r.toLowerCase(),e=>Zc(e)===r),Qc=r=>e=>typeof e===r,{isArray:Ls}=Array,cu=Qc("undefined");function S2(r){return r!==null&&!cu(r)&&r.constructor!==null&&!cu(r.constructor)&&On(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const im=Zi("ArrayBuffer");function C2(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&im(r.buffer),e}const I2=Qc("string"),On=Qc("function"),om=Qc("number"),ef=r=>r!==null&&typeof r=="object",A2=r=>r===!0||r===!1,zu=r=>{if(Zc(r)!=="object")return!1;const e=zh(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},M2=Zi("Date"),N2=Zi("File"),P2=Zi("Blob"),L2=Zi("FileList"),R2=r=>ef(r)&&On(r.pipe),T2=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||On(r.append)&&((e=Zc(r))==="formdata"||e==="object"&&On(r.toString)&&r.toString()==="[object FormData]"))},O2=Zi("URLSearchParams"),D2=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xu(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Ls(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const o=t?Object.getOwnPropertyNames(r):Object.keys(r),a=o.length;let s;for(n=0;n<a;n++)s=o[n],e.call(null,r[s],s,r)}}function am(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const sm=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:uo)(),um=r=>!cu(r)&&r!==sm;function Ol(){const{caseless:r}=um(this)&&this||{},e={},t=(n,i)=>{const o=r&&am(e,i)||i;zu(e[o])&&zu(n)?e[o]=Ol(e[o],n):zu(n)?e[o]=Ol({},n):Ls(n)?e[o]=n.slice():e[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&xu(arguments[n],t);return e}const k2=(r,e,t,{allOwnKeys:n}={})=>(xu(e,(i,o)=>{t&&On(i)?r[o]=nm(i,t):r[o]=i},{allOwnKeys:n}),r),B2=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),F2=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},z2=(r,e,t,n)=>{let i,o,a;const s={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),o=i.length;o-- >0;)a=i[o],(!n||n(a,r,e))&&!s[a]&&(e[a]=r[a],s[a]=!0);r=t!==!1&&zh(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},U2=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},q2=r=>{if(!r)return null;if(Ls(r))return r;let e=r.length;if(!om(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},H2=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&zh(Uint8Array)),G2=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const o=i.value;e.call(r,o[0],o[1])}},V2=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},K2=Zi("HTMLFormElement"),W2=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),Sp=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),J2=Zi("RegExp"),cm=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};xu(t,(i,o)=>{let a;(a=e(i,o,r))!==!1&&(n[o]=a||i)}),Object.defineProperties(r,n)},X2=r=>{cm(r,(e,t)=>{if(On(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(On(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Y2=(r,e)=>{const t={},n=i=>{i.forEach(o=>{t[o]=!0})};return Ls(r)?n(r):n(String(r).split(e)),t},j2=()=>{},$2=(r,e)=>(r=+r,Number.isFinite(r)?r:e),Zf="abcdefghijklmnopqrstuvwxyz",Cp="0123456789",fm={DIGIT:Cp,ALPHA:Zf,ALPHA_DIGIT:Zf+Zf.toUpperCase()+Cp},Z2=(r=16,e=fm.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};function Q2(r){return!!(r&&On(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const eE=r=>{const e=new Array(10),t=(n,i)=>{if(ef(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const o=Ls(n)?[]:{};return xu(n,(a,s)=>{const u=t(a,i+1);!cu(u)&&(o[s]=u)}),e[i]=void 0,o}}return n};return t(r,0)},tE=Zi("AsyncFunction"),rE=r=>r&&(ef(r)||On(r))&&On(r.then)&&On(r.catch);var X={isArray:Ls,isArrayBuffer:im,isBuffer:S2,isFormData:T2,isArrayBufferView:C2,isString:I2,isNumber:om,isBoolean:A2,isObject:ef,isPlainObject:zu,isUndefined:cu,isDate:M2,isFile:N2,isBlob:P2,isRegExp:J2,isFunction:On,isStream:R2,isURLSearchParams:O2,isTypedArray:H2,isFileList:L2,forEach:xu,merge:Ol,extend:k2,trim:D2,stripBOM:B2,inherits:F2,toFlatObject:z2,kindOf:Zc,kindOfTest:Zi,endsWith:U2,toArray:q2,forEachEntry:G2,matchAll:V2,isHTMLForm:K2,hasOwnProperty:Sp,hasOwnProp:Sp,reduceDescriptors:cm,freezeMethods:X2,toObjectSet:Y2,toCamelCase:W2,noop:j2,toFiniteNumber:$2,findKey:am,global:sm,isContextDefined:um,ALPHABET:fm,generateString:Z2,isSpecCompliantForm:Q2,toJSONObject:eE,isAsyncFn:tE,isThenable:rE};function Oe(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i)}X.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const lm=Oe.prototype,hm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{hm[r]={value:r}});Object.defineProperties(Oe,hm);Object.defineProperty(lm,"isAxiosError",{value:!0});Oe.from=(r,e,t,n,i,o)=>{const a=Object.create(lm);return X.toFlatObject(r,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Oe.call(a,r.message,e,t,n,i),a.cause=r,a.name=r.name,o&&Object.assign(a,o),a};var nE=null;function Dl(r){return X.isPlainObject(r)||X.isArray(r)}function dm(r){return X.endsWith(r,"[]")?r.slice(0,-2):r}function Ip(r,e,t){return r?r.concat(e).map(function(i,o){return i=dm(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function iE(r){return X.isArray(r)&&!r.some(Dl)}const oE=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function tf(r,e,t){if(!X.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=X.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,R){return!X.isUndefined(R[S])});const n=t.metaTokens,i=t.visitor||f,o=t.dots,a=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(X.isDate(_))return _.toISOString();if(!u&&X.isBlob(_))throw new Oe("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(_)||X.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function f(_,S,R){let D=_;if(_&&!R&&typeof _=="object"){if(X.endsWith(S,"{}"))S=n?S:S.slice(0,-2),_=JSON.stringify(_);else if(X.isArray(_)&&iE(_)||(X.isFileList(_)||X.endsWith(S,"[]"))&&(D=X.toArray(_)))return S=dm(S),D.forEach(function(E,M){!(X.isUndefined(E)||E===null)&&e.append(a===!0?Ip([S],M,o):a===null?S:S+"[]",c(E))}),!1}return Dl(_)?!0:(e.append(Ip(R,S,o),c(_)),!1)}const h=[],p=Object.assign(oE,{defaultVisitor:f,convertValue:c,isVisitable:Dl});function b(_,S){if(!X.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+S.join("."));h.push(_),X.forEach(_,function(D,v){(!(X.isUndefined(D)||D===null)&&i.call(e,D,X.isString(v)?v.trim():v,S,p))===!0&&b(D,S?S.concat(v):[v])}),h.pop()}}if(!X.isObject(r))throw new TypeError("data must be an object");return b(r),e}function Ap(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Uh(r,e){this._pairs=[],r&&tf(r,this,e)}const pm=Uh.prototype;pm.append=function(e,t){this._pairs.push([e,t])};pm.toString=function(e){const t=e?function(n){return e.call(this,n,Ap)}:Ap;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function aE(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gm(r,e,t){if(!e)return r;const n=t&&t.encode||aE,i=t&&t.serialize;let o;if(i?o=i(e,t):o=X.isURLSearchParams(e)?e.toString():new Uh(e,t).toString(n),o){const a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class sE{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(n){n!==null&&e(n)})}}var Mp=sE,mm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uE=typeof URLSearchParams<"u"?URLSearchParams:Uh,cE=typeof FormData<"u"?FormData:null,fE=typeof Blob<"u"?Blob:null,lE={isBrowser:!0,classes:{URLSearchParams:uE,FormData:cE,Blob:fE},protocols:["http","https","file","blob","url","data"]};const vm=typeof window<"u"&&typeof document<"u",hE=(r=>vm&&["ReactNative","NativeScript","NS"].indexOf(r)<0)(typeof navigator<"u"&&navigator.product),dE=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var pE=Object.freeze({__proto__:null,hasBrowserEnv:vm,hasStandardBrowserWebWorkerEnv:dE,hasStandardBrowserEnv:hE}),Ti={...pE,...lE};function gE(r,e){return tf(r,new Ti.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,o){return Ti.isNode&&X.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function mE(r){return X.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vE(r){const e={},t=Object.keys(r);let n;const i=t.length;let o;for(n=0;n<i;n++)o=t[n],e[o]=r[o];return e}function ym(r){function e(t,n,i,o){let a=t[o++];const s=Number.isFinite(+a),u=o>=t.length;return a=!a&&X.isArray(i)?i.length:a,u?(X.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!X.isObject(i[a]))&&(i[a]=[]),e(t,n,i[a],o)&&X.isArray(i[a])&&(i[a]=vE(i[a])),!s)}if(X.isFormData(r)&&X.isFunction(r.entries)){const t={};return X.forEachEntry(r,(n,i)=>{e(mE(n),i,t,0)}),t}return null}function yE(r,e,t){if(X.isString(r))try{return(e||JSON.parse)(r),X.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const qh={transitional:mm,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,o=X.isObject(e);if(o&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return i&&i?JSON.stringify(ym(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return gE(e,this.formSerializer).toString();if((s=X.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return tf(s?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),yE(e)):e}],transformResponse:[function(e){const t=this.transitional||qh.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&X.isString(e)&&(n&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?Oe.from(s,Oe.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ti.classes.FormData,Blob:Ti.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],r=>{qh.headers[r]={}});var Hh=qh;const _E=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var bE=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!t||e[t]&&_E[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e};const Np=Symbol("internals");function Us(r){return r&&String(r).trim().toLowerCase()}function Uu(r){return r===!1||r==null?r:X.isArray(r)?r.map(Uu):String(r)}function wE(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const EE=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Qf(r,e,t,n,i){if(X.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!X.isString(e)){if(X.isString(n))return e.indexOf(n)!==-1;if(X.isRegExp(n))return n.test(e)}}function xE(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function SE(r,e){const t=X.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,o,a){return this[n].call(this,e,i,o,a)},configurable:!0})})}class rf{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function o(s,u,c){const f=Us(u);if(!f)throw new Error("header name must be a non-empty string");const h=X.findKey(i,f);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||u]=Uu(s))}const a=(s,u)=>X.forEach(s,(c,f)=>o(c,f,u));return X.isPlainObject(e)||e instanceof this.constructor?a(e,t):X.isString(e)&&(e=e.trim())&&!EE(e)?a(bE(e),t):e!=null&&o(t,e,n),this}get(e,t){if(e=Us(e),e){const n=X.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return wE(i);if(X.isFunction(t))return t.call(this,i,n);if(X.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Us(e),e){const n=X.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Qf(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function o(a){if(a=Us(a),a){const s=X.findKey(n,a);s&&(!t||Qf(n,n[s],s,t))&&(delete n[s],i=!0)}}return X.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const o=t[n];(!e||Qf(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,n={};return X.forEach(this,(i,o)=>{const a=X.findKey(n,o);if(a){t[a]=Uu(i),delete t[o];return}const s=e?xE(o):String(o).trim();s!==o&&delete t[o],t[s]=Uu(i),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return X.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&X.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Np]=this[Np]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=Us(a);n[s]||(SE(i,a),n[s]=!0)}return X.isArray(e)?e.forEach(o):o(e),this}}rf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(rf.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});X.freezeMethods(rf);var so=rf;function el(r,e){const t=this||Hh,n=e||t,i=so.from(n.headers);let o=n.data;return X.forEach(r,function(s){o=s.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function _m(r){return!!(r&&r.__CANCEL__)}function Su(r,e,t){Oe.call(this,r??"canceled",Oe.ERR_CANCELED,e,t),this.name="CanceledError"}X.inherits(Su,Oe,{__CANCEL__:!0});function CE(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new Oe("Request failed with status code "+t.status,[Oe.ERR_BAD_REQUEST,Oe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var IE=Ti.hasStandardBrowserEnv?function(){return{write:function(t,n,i,o,a,s){const u=[];u.push(t+"="+encodeURIComponent(n)),X.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),X.isString(o)&&u.push("path="+o),X.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function AE(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function ME(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function bm(r,e){return r&&!AE(e)?ME(r,e):e}var NE=Ti.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(o){let a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){const s=X.isString(a)?i(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function PE(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function LE(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),f=n[o];a||(a=c),t[i]=u,n[i]=c;let h=o,p=0;for(;h!==i;)p+=t[h++],h=h%r;if(i=(i+1)%r,i===o&&(o=(o+1)%r),c-a<e)return;const b=f&&c-f;return b?Math.round(p*1e3/b):void 0}}function Pp(r,e){let t=0;const n=LE(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-t,u=n(s),c=o<=a;t=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i};f[e?"download":"upload"]=!0,r(f)}}const RE=typeof XMLHttpRequest<"u";var TE=RE&&function(r){return new Promise(function(t,n){let i=r.data;const o=so.from(r.headers).normalize(),a=r.responseType;let s;function u(){r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let c;if(X.isFormData(i)){if(Ti.hasStandardBrowserEnv||Ti.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((c=o.getContentType())!==!1){const[_,...S]=c?c.split(";").map(R=>R.trim()).filter(Boolean):[];o.setContentType([_||"multipart/form-data",...S].join("; "))}}let f=new XMLHttpRequest;if(r.auth){const _=r.auth.username||"",S=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";o.set("Authorization","Basic "+btoa(_+":"+S))}const h=bm(r.baseURL,r.url);f.open(r.method.toUpperCase(),gm(h,r.params,r.paramsSerializer),!0),f.timeout=r.timeout;function p(){if(!f)return;const _=so.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:_,config:r,request:f};CE(function(v){t(v),u()},function(v){n(v),u()},R),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(n(new Oe("Request aborted",Oe.ECONNABORTED,r,f)),f=null)},f.onerror=function(){n(new Oe("Network Error",Oe.ERR_NETWORK,r,f)),f=null},f.ontimeout=function(){let S=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const R=r.transitional||mm;r.timeoutErrorMessage&&(S=r.timeoutErrorMessage),n(new Oe(S,R.clarifyTimeoutError?Oe.ETIMEDOUT:Oe.ECONNABORTED,r,f)),f=null},Ti.hasStandardBrowserEnv){const _=NE(h)&&r.xsrfCookieName&&IE.read(r.xsrfCookieName);_&&o.set(r.xsrfHeaderName,_)}i===void 0&&o.setContentType(null),"setRequestHeader"in f&&X.forEach(o.toJSON(),function(S,R){f.setRequestHeader(R,S)}),X.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),a&&a!=="json"&&(f.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&f.addEventListener("progress",Pp(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",Pp(r.onUploadProgress)),(r.cancelToken||r.signal)&&(s=_=>{f&&(n(!_||_.type?new Su(null,r,f):_),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const b=PE(h);if(b&&Ti.protocols.indexOf(b)===-1){n(new Oe("Unsupported protocol "+b+":",Oe.ERR_BAD_REQUEST,r));return}f.send(i||null)})};const kl={http:nE,xhr:TE};X.forEach(kl,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Lp=r=>`- ${r}`,OE=r=>X.isFunction(r)||r===null||r===!1;var wm={getAdapter:r=>{r=X.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let o=0;o<e;o++){t=r[o];let a;if(n=t,!OE(t)&&(n=kl[(a=String(t)).toLowerCase()],n===void 0))throw new Oe(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(Lp).join(`
`):" "+Lp(o[0]):"as no adapter specified";throw new Oe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:kl};function tl(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Su(null,r)}function Rp(r){return tl(r),r.headers=so.from(r.headers),r.data=el.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),wm.getAdapter(r.adapter||Hh.adapter)(r).then(function(n){return tl(r),n.data=el.call(r,r.transformResponse,n),n.headers=so.from(n.headers),n},function(n){return _m(n)||(tl(r),n&&n.response&&(n.response.data=el.call(r,r.transformResponse,n.response),n.response.headers=so.from(n.response.headers))),Promise.reject(n)})}const Tp=r=>r instanceof so?r.toJSON():r;function ys(r,e){e=e||{};const t={};function n(c,f,h){return X.isPlainObject(c)&&X.isPlainObject(f)?X.merge.call({caseless:h},c,f):X.isPlainObject(f)?X.merge({},f):X.isArray(f)?f.slice():f}function i(c,f,h){if(X.isUndefined(f)){if(!X.isUndefined(c))return n(void 0,c,h)}else return n(c,f,h)}function o(c,f){if(!X.isUndefined(f))return n(void 0,f)}function a(c,f){if(X.isUndefined(f)){if(!X.isUndefined(c))return n(void 0,c)}else return n(void 0,f)}function s(c,f,h){if(h in e)return n(c,f);if(h in r)return n(void 0,c)}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(c,f)=>i(Tp(c),Tp(f),!0)};return X.forEach(Object.keys(Object.assign({},r,e)),function(f){const h=u[f]||i,p=h(r[f],e[f],f);X.isUndefined(p)&&h!==s||(t[f]=p)}),t}const Em="1.6.1",Gh={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Gh[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const Op={};Gh.transitional=function(e,t,n){function i(o,a){return"[Axios v"+Em+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(e===!1)throw new Oe(i(a," has been removed"+(t?" in "+t:"")),Oe.ERR_DEPRECATED);return t&&!Op[a]&&(Op[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,s):!0}};function DE(r,e,t){if(typeof r!="object")throw new Oe("options must be an object",Oe.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const o=n[i],a=e[o];if(a){const s=r[o],u=s===void 0||a(s,o,r);if(u!==!0)throw new Oe("option "+o+" must be "+u,Oe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Oe("Unknown option "+o,Oe.ERR_BAD_OPTION)}}var Bl={assertOptions:DE,validators:Gh};const Co=Bl.validators;class lc{constructor(e){this.defaults=e,this.interceptors={request:new Mp,response:new Mp}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ys(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:o}=t;n!==void 0&&Bl.assertOptions(n,{silentJSONParsing:Co.transitional(Co.boolean),forcedJSONParsing:Co.transitional(Co.boolean),clarifyTimeoutError:Co.transitional(Co.boolean)},!1),i!=null&&(X.isFunction(i)?t.paramsSerializer={serialize:i}:Bl.assertOptions(i,{encode:Co.function,serialize:Co.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&X.merge(o.common,o[t.method]);o&&X.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),t.headers=so.concat(a,o);const s=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(u=u&&S.synchronous,s.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let f,h=0,p;if(!u){const _=[Rp.bind(this),void 0];for(_.unshift.apply(_,s),_.push.apply(_,c),p=_.length,f=Promise.resolve(t);h<p;)f=f.then(_[h++],_[h++]);return f}p=s.length;let b=t;for(h=0;h<p;){const _=s[h++],S=s[h++];try{b=_(b)}catch(R){S.call(this,R);break}}try{f=Rp.call(this,b)}catch(_){return Promise.reject(_)}for(h=0,p=c.length;h<p;)f=f.then(c[h++],c[h++]);return f}getUri(e){e=ys(this.defaults,e);const t=bm(e.baseURL,e.url);return gm(t,e.params,e.paramsSerializer)}}X.forEach(["delete","get","head","options"],function(e){lc.prototype[e]=function(t,n){return this.request(ys(n||{},{method:e,url:t,data:(n||{}).data}))}});X.forEach(["post","put","patch"],function(e){function t(n){return function(o,a,s){return this.request(ys(s||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}lc.prototype[e]=t(),lc.prototype[e+"Form"]=t(!0)});var qu=lc;class Vh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},e(function(o,a,s){n.reason||(n.reason=new Su(o,a,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Vh(function(i){e=i}),cancel:e}}}var kE=Vh;function BE(r){return function(t){return r.apply(null,t)}}function FE(r){return X.isObject(r)&&r.isAxiosError===!0}const Fl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fl).forEach(([r,e])=>{Fl[e]=r});var zE=Fl;function xm(r){const e=new qu(r),t=nm(qu.prototype.request,e);return X.extend(t,qu.prototype,e,{allOwnKeys:!0}),X.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return xm(ys(r,i))},t}const Yt=xm(Hh);Yt.Axios=qu;Yt.CanceledError=Su;Yt.CancelToken=kE;Yt.isCancel=_m;Yt.VERSION=Em;Yt.toFormData=tf;Yt.AxiosError=Oe;Yt.Cancel=Yt.CanceledError;Yt.all=function(e){return Promise.all(e)};Yt.spread=BE;Yt.isAxiosError=FE;Yt.mergeConfig=ys;Yt.AxiosHeaders=so;Yt.formToJSON=r=>ym(X.isHTMLForm(r)?new FormData(r):r);Yt.getAdapter=wm.getAdapter;Yt.HttpStatusCode=zE;Yt.default=Yt;var UE=Yt;const we=crypto,rn=r=>r instanceof CryptoKey,Sm=async(r,e)=>{const t=`SHA-${r.slice(-3)}`;return new Uint8Array(await we.subtle.digest(t,e))},gt=new TextEncoder,Jn=new TextDecoder,hc=2**32;function Qi(...r){const e=r.reduce((i,{length:o})=>i+o,0),t=new Uint8Array(e);let n=0;return r.forEach(i=>{t.set(i,n),n+=i.length}),t}function qE(r,e){return Qi(gt.encode(r),new Uint8Array([0]),e)}function zl(r,e,t){if(e<0||e>=hc)throw new RangeError(`value must be >= 0 and <= ${hc-1}. Received ${e}`);r.set([e>>>24,e>>>16,e>>>8,e&255],t)}function Cm(r){const e=Math.floor(r/hc),t=r%hc,n=new Uint8Array(8);return zl(n,e,0),zl(n,t,4),n}function Kh(r){const e=new Uint8Array(4);return zl(e,r),e}function rl(r){return Qi(Kh(r.length),r)}async function HE(r,e,t){const n=Math.ceil((e>>3)/32),i=new Uint8Array(n*32);for(let o=0;o<n;o++){const a=new Uint8Array(4+r.length+t.length);a.set(Kh(o+1)),a.set(r,4),a.set(t,4+r.length),i.set(await Sm("sha256",a),o*32)}return i.slice(0,e>>3)}const Wh=r=>{let e=r;typeof e=="string"&&(e=gt.encode(e));const t=32768,n=[];for(let i=0;i<e.length;i+=t)n.push(String.fromCharCode.apply(null,e.subarray(i,i+t)));return btoa(n.join(""))},Ht=r=>Wh(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Im=r=>{const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},$t=r=>{let e=r;e instanceof Uint8Array&&(e=Jn.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Im(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Ir extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}class an extends Ir{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=n}}class Ul extends Ir{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=n}}class dc extends Ir{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Ie extends Ir{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class fu extends Ir{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class se extends Ir{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class Ve extends Ir{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Jr extends Ir{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class Am extends Ir{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class pc extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class Jh extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class Mm extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class Nm extends Ir{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class Xh extends Ir{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const GE=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:dc,JOSEError:Ir,JOSENotSupported:Ie,JWEDecryptionFailed:fu,JWEInvalid:se,JWKInvalid:Am,JWKSInvalid:pc,JWKSMultipleMatchingKeys:Mm,JWKSNoMatchingKey:Jh,JWKSTimeout:Nm,JWSInvalid:Ve,JWSSignatureVerificationFailed:Xh,JWTClaimValidationFailed:an,JWTExpired:Ul,JWTInvalid:Jr},Symbol.toStringTag,{value:"Module"})),nf=we.getRandomValues.bind(we);function Pm(r){switch(r){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Ie(`Unsupported JWE Algorithm: ${r}`)}}const Lm=r=>nf(new Uint8Array(Pm(r)>>3)),Rm=(r,e)=>{if(e.length<<3!==Pm(r))throw new se("Invalid Initialization Vector length")},gc=(r,e)=>{const t=r.byteLength<<3;if(t!==e)throw new se(`Invalid Content Encryption Key length. Expected ${e} bits, got ${t} bits`)},VE=(r,e)=>{if(!(r instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(r.length!==e.length)throw new TypeError("Input buffers must have the same length");const t=r.length;let n=0,i=-1;for(;++i<t;)n|=r[i]^e[i];return n===0};function Rs(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function or(r,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${r}`)}function ro(r,e){return r.name===e}function Hu(r){return parseInt(r.name.slice(4),10)}function KE(r){switch(r){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Tm(r,e){if(e.length&&!e.some(t=>r.usages.includes(t))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const n=e.pop();t+=`one of ${e.join(", ")}, or ${n}.`}else e.length===2?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}function WE(r,e,...t){switch(e){case"HS256":case"HS384":case"HS512":{if(!ro(r.algorithm,"HMAC"))throw or("HMAC");const n=parseInt(e.slice(2),10);if(Hu(r.algorithm.hash)!==n)throw or(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!ro(r.algorithm,"RSASSA-PKCS1-v1_5"))throw or("RSASSA-PKCS1-v1_5");const n=parseInt(e.slice(2),10);if(Hu(r.algorithm.hash)!==n)throw or(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!ro(r.algorithm,"RSA-PSS"))throw or("RSA-PSS");const n=parseInt(e.slice(2),10);if(Hu(r.algorithm.hash)!==n)throw or(`SHA-${n}`,"algorithm.hash");break}case(Rs()&&"EdDSA"):{if(!ro(r.algorithm,"NODE-ED25519"))throw or("NODE-ED25519");break}case"EdDSA":{if(r.algorithm.name!=="Ed25519"&&r.algorithm.name!=="Ed448")throw or("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!ro(r.algorithm,"ECDSA"))throw or("ECDSA");const n=KE(e);if(r.algorithm.namedCurve!==n)throw or(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Tm(r,t)}function Xo(r,e,...t){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!ro(r.algorithm,"AES-GCM"))throw or("AES-GCM");const n=parseInt(e.slice(1,4),10);if(r.algorithm.length!==n)throw or(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!ro(r.algorithm,"AES-KW"))throw or("AES-KW");const n=parseInt(e.slice(1,4),10);if(r.algorithm.length!==n)throw or(n,"algorithm.length");break}case"ECDH":{switch(r.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw or("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ro(r.algorithm,"PBKDF2"))throw or("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!ro(r.algorithm,"RSA-OAEP"))throw or("RSA-OAEP");const n=parseInt(e.slice(9),10)||1;if(Hu(r.algorithm.hash)!==n)throw or(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Tm(r,t)}function Om(r,e,...t){if(t.length>2){const n=t.pop();r+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of type ${t[0]} or ${t[1]}.`:r+=`of type ${t[0]}.`;return e==null?r+=` Received ${e}`:typeof e=="function"&&e.name?r+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(r+=` Received an instance of ${e.constructor.name}`),r}const Or=(r,...e)=>Om("Key must be ",r,...e);function Dm(r,e,...t){return Om(`Key for the ${r} algorithm must be `,e,...t)}const km=r=>rn(r),dt=["CryptoKey"];async function JE(r,e,t,n,i,o){if(!(e instanceof Uint8Array))throw new TypeError(Or(e,"Uint8Array"));const a=parseInt(r.slice(1,4),10),s=await we.subtle.importKey("raw",e.subarray(a>>3),"AES-CBC",!1,["decrypt"]),u=await we.subtle.importKey("raw",e.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=Qi(o,n,t,Cm(o.length<<3)),f=new Uint8Array((await we.subtle.sign("HMAC",u,c)).slice(0,a>>3));let h;try{h=VE(i,f)}catch{}if(!h)throw new fu;let p;try{p=new Uint8Array(await we.subtle.decrypt({iv:n,name:"AES-CBC"},s,t))}catch{}if(!p)throw new fu;return p}async function XE(r,e,t,n,i,o){let a;e instanceof Uint8Array?a=await we.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(Xo(e,r,"decrypt"),a=e);try{return new Uint8Array(await we.subtle.decrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},a,Qi(t,i)))}catch{throw new fu}}const Bm=async(r,e,t,n,i,o)=>{if(!rn(e)&&!(e instanceof Uint8Array))throw new TypeError(Or(e,...dt,"Uint8Array"));switch(Rm(r,n),r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&gc(e,parseInt(r.slice(-3),10)),JE(r,e,t,n,i,o);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&gc(e,parseInt(r.slice(1,4),10)),XE(r,e,t,n,i,o);default:throw new Ie("Unsupported JWE Content Encryption Algorithm")}},YE=async()=>{throw new Ie('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},jE=async()=>{throw new Ie('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},Cu=(...r)=>{const e=r.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const n of e){const i=Object.keys(n);if(!t||t.size===0){t=new Set(i);continue}for(const o of i){if(t.has(o))return!1;t.add(o)}}return!0};function $E(r){return typeof r=="object"&&r!==null}function hr(r){if(!$E(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}const of=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Fm(r,e){if(r.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function zm(r,e,t){if(rn(r))return Xo(r,e,t),r;if(r instanceof Uint8Array)return we.subtle.importKey("raw",r,"AES-KW",!0,[t]);throw new TypeError(Or(r,...dt,"Uint8Array"))}const ql=async(r,e,t)=>{const n=await zm(e,r,"wrapKey");Fm(n,r);const i=await we.subtle.importKey("raw",t,...of);return new Uint8Array(await we.subtle.wrapKey("raw",i,n,"AES-KW"))},Hl=async(r,e,t)=>{const n=await zm(e,r,"unwrapKey");Fm(n,r);const i=await we.subtle.unwrapKey("raw",t,n,"AES-KW",...of);return new Uint8Array(await we.subtle.exportKey("raw",i))};async function Um(r,e,t,n,i=new Uint8Array(0),o=new Uint8Array(0)){if(!rn(r))throw new TypeError(Or(r,...dt));if(Xo(r,"ECDH"),!rn(e))throw new TypeError(Or(e,...dt));Xo(e,"ECDH","deriveBits");const a=Qi(rl(gt.encode(t)),rl(i),rl(o),Kh(n));let s;r.algorithm.name==="X25519"?s=256:r.algorithm.name==="X448"?s=448:s=Math.ceil(parseInt(r.algorithm.namedCurve.substr(-3),10)/8)<<3;const u=new Uint8Array(await we.subtle.deriveBits({name:r.algorithm.name,public:r},e,s));return HE(u,n,a)}async function ZE(r){if(!rn(r))throw new TypeError(Or(r,...dt));return we.subtle.generateKey(r.algorithm,!0,["deriveBits"])}function qm(r){if(!rn(r))throw new TypeError(Or(r,...dt));return["P-256","P-384","P-521"].includes(r.algorithm.namedCurve)||r.algorithm.name==="X25519"||r.algorithm.name==="X448"}function QE(r){if(!(r instanceof Uint8Array)||r.length<8)throw new se("PBES2 Salt Input must be 8 or more octets")}function ex(r,e){if(r instanceof Uint8Array)return we.subtle.importKey("raw",r,"PBKDF2",!1,["deriveBits"]);if(rn(r))return Xo(r,e,"deriveBits","deriveKey"),r;throw new TypeError(Or(r,...dt,"Uint8Array"))}async function Hm(r,e,t,n){QE(r);const i=qE(e,r),o=parseInt(e.slice(13,16),10),a={hash:`SHA-${e.slice(8,11)}`,iterations:t,name:"PBKDF2",salt:i},s={length:o,name:"AES-KW"},u=await ex(n,e);if(u.usages.includes("deriveBits"))return new Uint8Array(await we.subtle.deriveBits(a,u,o));if(u.usages.includes("deriveKey"))return we.subtle.deriveKey(a,u,s,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const tx=async(r,e,t,n=2048,i=nf(new Uint8Array(16)))=>{const o=await Hm(i,r,n,e);return{encryptedKey:await ql(r.slice(-6),o,t),p2c:n,p2s:Ht(i)}},rx=async(r,e,t,n,i)=>{const o=await Hm(i,r,n,e);return Hl(r.slice(-6),o,t)};function mc(r){switch(r){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Ie(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}const af=(r,e)=>{if(r.startsWith("RS")||r.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${r} requires key modulusLength to be 2048 bits or larger`)}},nx=async(r,e,t)=>{if(!rn(e))throw new TypeError(Or(e,...dt));if(Xo(e,r,"encrypt","wrapKey"),af(r,e),e.usages.includes("encrypt"))return new Uint8Array(await we.subtle.encrypt(mc(r),e,t));if(e.usages.includes("wrapKey")){const n=await we.subtle.importKey("raw",t,...of);return new Uint8Array(await we.subtle.wrapKey("raw",n,e,mc(r)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},ix=async(r,e,t)=>{if(!rn(e))throw new TypeError(Or(e,...dt));if(Xo(e,r,"decrypt","unwrapKey"),af(r,e),e.usages.includes("decrypt"))return new Uint8Array(await we.subtle.decrypt(mc(r),e,t));if(e.usages.includes("unwrapKey")){const n=await we.subtle.unwrapKey("raw",t,e,mc(r),...of);return new Uint8Array(await we.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Yh(r){switch(r){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Ie(`Unsupported JWE Algorithm: ${r}`)}}const oa=r=>nf(new Uint8Array(Yh(r)>>3)),Gm=(r,e)=>{const t=(r.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${e}-----
${t}
-----END ${e}-----`},Vm=async(r,e,t)=>{if(!rn(t))throw new TypeError(Or(t,...dt));if(!t.extractable)throw new TypeError("CryptoKey is not extractable");if(t.type!==r)throw new TypeError(`key is not a ${r} key`);return Gm(Wh(new Uint8Array(await we.subtle.exportKey(e,t))),`${r.toUpperCase()} KEY`)},ox=r=>Vm("public","spki",r),ax=r=>Vm("private","pkcs8",r),Ao=(r,e,t=0)=>{t===0&&(e.unshift(e.length),e.unshift(6));let n=r.indexOf(e[0],t);if(n===-1)return!1;const i=r.subarray(n,n+e.length);return i.length!==e.length?!1:i.every((o,a)=>o===e[a])||Ao(r,e,n+1)},nl=r=>{switch(!0){case Ao(r,[42,134,72,206,61,3,1,7]):return"P-256";case Ao(r,[43,129,4,0,34]):return"P-384";case Ao(r,[43,129,4,0,35]):return"P-521";case Ao(r,[43,101,110]):return"X25519";case Ao(r,[43,101,111]):return"X448";case Ao(r,[43,101,112]):return"Ed25519";case Ao(r,[43,101,113]):return"Ed448";default:throw new Ie("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Km=async(r,e,t,n,i)=>{var o;let a,s;const u=new Uint8Array(atob(t.replace(r,"")).split("").map(f=>f.charCodeAt(0))),c=e==="spki";switch(n){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},s=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},s=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},s=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},s=c?["verify"]:["sign"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},s=c?["verify"]:["sign"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},s=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const f=nl(u);a=f.startsWith("P-")?{name:"ECDH",namedCurve:f}:{name:f},s=c?[]:["deriveBits"];break}case(Rs()&&"EdDSA"):{const f=nl(u).toUpperCase();a={name:`NODE-${f}`,namedCurve:`NODE-${f}`},s=c?["verify"]:["sign"];break}case"EdDSA":a={name:nl(u)},s=c?["verify"]:["sign"];break;default:throw new Ie('Invalid or unsupported "alg" (Algorithm) value')}return we.subtle.importKey(e,u,a,(o=i==null?void 0:i.extractable)!==null&&o!==void 0?o:!1,s)},sx=(r,e,t)=>Km(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",r,e,t),Wm=(r,e,t)=>Km(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",r,e,t);function ux(r){let e,t;switch(r.kty){case"oct":{switch(r.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${r.alg.slice(-3)}`},t=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Ie(`${r.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},t=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},t=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},t=["deriveBits"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(r.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(r.alg.slice(-3),10)||1}`},t=r.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(r.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=r.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=r.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case(Rs()&&"OKP"):if(r.alg!=="EdDSA")throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(r.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},t=r.d?["sign"]:["verify"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":{switch(r.alg){case"EdDSA":e={name:r.crv},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Ie('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const cx=async r=>{var e,t;const{algorithm:n,keyUsages:i}=ux(r),o=[n,(e=r.ext)!==null&&e!==void 0?e:!1,(t=r.key_ops)!==null&&t!==void 0?t:i];if(n.name==="PBKDF2")return we.subtle.importKey("raw",$t(r.k),...o);const a={...r};return delete a.alg,delete a.use,we.subtle.importKey("jwk",a,...o)},Dp=cx;function kp(r){let e=[],t=0;for(;t<r.length;){let n=Jm(r.subarray(t));e.push(n),t+=n.byteLength}return e}function Jm(r){let e=0,t=r[0]&31;if(e++,t===31){for(t=0;r[e]>=128;)t=t*128+r[e]-128,e++;t=t*128+r[e]-128,e++}let n=0;if(r[e]<128)n=r[e],e++;else if(n===128){for(n=0;r[e+n]!==0||r[e+n+1]!==0;){if(n>r.byteLength)throw new TypeError("invalid indefinite form length");n++}const o=e+n+2;return{byteLength:o,contents:r.subarray(e,e+n),raw:r.subarray(0,o)}}else{let o=r[e]&127;e++,n=0;for(let a=0;a<o;a++)n=n*256+r[e],e++}const i=e+n;return{byteLength:i,contents:r.subarray(e,i),raw:r.subarray(0,i)}}function fx(r){const e=kp(kp(Jm(r).contents)[0].contents);return Wh(e[e[0].raw[0]===160?6:5].raw)}function lx(r){const e=r.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),t=Im(e);return Gm(fx(t),"PUBLIC KEY")}async function hx(r,e,t){if(typeof r!="string"||r.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return Wm(r,e,t)}async function dx(r,e,t){if(typeof r!="string"||r.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');let n;try{n=lx(r)}catch(i){throw new TypeError("failed to parse the X.509 certificate",{cause:i})}return Wm(n,e,t)}async function px(r,e,t){if(typeof r!="string"||r.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return sx(r,e,t)}async function sf(r,e,t){var n;if(!hr(r))throw new TypeError("JWK must be an object");if(e||(e=r.alg),typeof e!="string"||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(r.kty){case"oct":if(typeof r.k!="string"||!r.k)throw new TypeError('missing "k" (Key Value) Parameter value');return t??(t=r.ext!==!0),t?Dp({...r,alg:e,ext:(n=r.ext)!==null&&n!==void 0?n:!1}):$t(r.k);case"RSA":if(r.oth!==void 0)throw new Ie('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Dp({...r,alg:e});default:throw new Ie('Unsupported "kty" (Key Type) Parameter value')}}const gx=(r,e)=>{if(!(e instanceof Uint8Array)){if(!km(e))throw new TypeError(Dm(r,e,...dt,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${dt.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},mx=(r,e,t)=>{if(!km(e))throw new TypeError(Dm(r,e,...dt));if(e.type==="secret")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(t==="sign"&&e.type==="public")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(t==="decrypt"&&e.type==="public")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&t==="verify"&&e.type==="private")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&t==="encrypt"&&e.type==="private")throw new TypeError(`${dt.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},uf=(r,e,t)=>{r.startsWith("HS")||r==="dir"||r.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(r)?gx(r,e):mx(r,e,t)};async function vx(r,e,t,n,i){if(!(t instanceof Uint8Array))throw new TypeError(Or(t,"Uint8Array"));const o=parseInt(r.slice(1,4),10),a=await we.subtle.importKey("raw",t.subarray(o>>3),"AES-CBC",!1,["encrypt"]),s=await we.subtle.importKey("raw",t.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),u=new Uint8Array(await we.subtle.encrypt({iv:n,name:"AES-CBC"},a,e)),c=Qi(i,n,u,Cm(i.length<<3)),f=new Uint8Array((await we.subtle.sign("HMAC",s,c)).slice(0,o>>3));return{ciphertext:u,tag:f}}async function yx(r,e,t,n,i){let o;t instanceof Uint8Array?o=await we.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt"]):(Xo(t,r,"encrypt"),o=t);const a=new Uint8Array(await we.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},o,e)),s=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:s}}const Gl=async(r,e,t,n,i)=>{if(!rn(t)&&!(t instanceof Uint8Array))throw new TypeError(Or(t,...dt,"Uint8Array"));switch(Rm(r,n),r){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&gc(t,parseInt(r.slice(-3),10)),vx(r,e,t,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&gc(t,parseInt(r.slice(1,4),10)),yx(r,e,t,n,i);default:throw new Ie("Unsupported JWE Content Encryption Algorithm")}};async function _x(r,e,t,n){const i=r.slice(0,7);n||(n=Lm(i));const{ciphertext:o,tag:a}=await Gl(i,t,e,n,new Uint8Array(0));return{encryptedKey:o,iv:Ht(n),tag:Ht(a)}}async function bx(r,e,t,n,i){const o=r.slice(0,7);return Bm(o,e,t,n,i,new Uint8Array(0))}async function wx(r,e,t,n,i){switch(uf(r,e,"decrypt"),r){case"dir":{if(t!==void 0)throw new se("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(t!==void 0)throw new se("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!hr(n.epk))throw new se('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!qm(e))throw new Ie("ECDH with the provided key is not allowed or not supported by your javascript runtime");const o=await sf(n.epk,r);let a,s;if(n.apu!==void 0){if(typeof n.apu!="string")throw new se('JOSE Header "apu" (Agreement PartyUInfo) invalid');a=$t(n.apu)}if(n.apv!==void 0){if(typeof n.apv!="string")throw new se('JOSE Header "apv" (Agreement PartyVInfo) invalid');s=$t(n.apv)}const u=await Um(o,e,r==="ECDH-ES"?n.enc:r,r==="ECDH-ES"?Yh(n.enc):parseInt(r.slice(-5,-2),10),a,s);if(r==="ECDH-ES")return u;if(t===void 0)throw new se("JWE Encrypted Key missing");return Hl(r.slice(-6),u,t)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(t===void 0)throw new se("JWE Encrypted Key missing");return ix(r,e,t)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(t===void 0)throw new se("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new se('JOSE Header "p2c" (PBES2 Count) missing or invalid');const o=(i==null?void 0:i.maxPBES2Count)||1e4;if(n.p2c>o)throw new se('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new se('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return rx(r,e,t,n.p2c,$t(n.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(t===void 0)throw new se("JWE Encrypted Key missing");return Hl(r,e,t)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(t===void 0)throw new se("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new se('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new se('JOSE Header "tag" (Authentication Tag) missing or invalid');const o=$t(n.iv),a=$t(n.tag);return bx(r,e,t,o,a)}default:throw new Ie('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Iu(r,e,t,n,i){if(i.crit!==void 0&&n.crit===void 0)throw new r('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(a=>typeof a!="string"||a.length===0))throw new r('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;t!==void 0?o=new Map([...Object.entries(t),...e.entries()]):o=e;for(const a of n.crit){if(!o.has(a))throw new Ie(`Extension Header Parameter "${a}" is not recognized`);if(i[a]===void 0)throw new r(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&n[a]===void 0)throw new r(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}const Vl=(r,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(t=>typeof t!="string")))throw new TypeError(`"${r}" option must be an array of strings`);if(e)return new Set(e)};async function jh(r,e,t){var n;if(!hr(r))throw new se("Flattened JWE must be an object");if(r.protected===void 0&&r.header===void 0&&r.unprotected===void 0)throw new se("JOSE Header missing");if(typeof r.iv!="string")throw new se("JWE Initialization Vector missing or incorrect type");if(typeof r.ciphertext!="string")throw new se("JWE Ciphertext missing or incorrect type");if(typeof r.tag!="string")throw new se("JWE Authentication Tag missing or incorrect type");if(r.protected!==void 0&&typeof r.protected!="string")throw new se("JWE Protected Header incorrect type");if(r.encrypted_key!==void 0&&typeof r.encrypted_key!="string")throw new se("JWE Encrypted Key incorrect type");if(r.aad!==void 0&&typeof r.aad!="string")throw new se("JWE AAD incorrect type");if(r.header!==void 0&&!hr(r.header))throw new se("JWE Shared Unprotected Header incorrect type");if(r.unprotected!==void 0&&!hr(r.unprotected))throw new se("JWE Per-Recipient Unprotected Header incorrect type");let i;if(r.protected)try{const E=$t(r.protected);i=JSON.parse(Jn.decode(E))}catch{throw new se("JWE Protected Header is invalid")}if(!Cu(i,r.header,r.unprotected))throw new se("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const o={...i,...r.header,...r.unprotected};if(Iu(se,new Map,t==null?void 0:t.crit,i,o),o.zip!==void 0){if(!i||!i.zip)throw new se('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(o.zip!=="DEF")throw new Ie('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:a,enc:s}=o;if(typeof a!="string"||!a)throw new se("missing JWE Algorithm (alg) in JWE Header");if(typeof s!="string"||!s)throw new se("missing JWE Encryption Algorithm (enc) in JWE Header");const u=t&&Vl("keyManagementAlgorithms",t.keyManagementAlgorithms),c=t&&Vl("contentEncryptionAlgorithms",t.contentEncryptionAlgorithms);if(u&&!u.has(a))throw new dc('"alg" (Algorithm) Header Parameter not allowed');if(c&&!c.has(s))throw new dc('"enc" (Encryption Algorithm) Header Parameter not allowed');let f;r.encrypted_key!==void 0&&(f=$t(r.encrypted_key));let h=!1;typeof e=="function"&&(e=await e(i,r),h=!0);let p;try{p=await wx(a,e,f,o,t)}catch(E){if(E instanceof TypeError||E instanceof se||E instanceof Ie)throw E;p=oa(s)}const b=$t(r.iv),_=$t(r.tag),S=gt.encode((n=r.protected)!==null&&n!==void 0?n:"");let R;r.aad!==void 0?R=Qi(S,gt.encode("."),gt.encode(r.aad)):R=S;let D=await Bm(s,p,$t(r.ciphertext),b,_,R);o.zip==="DEF"&&(D=await((t==null?void 0:t.inflateRaw)||YE)(D));const v={plaintext:D};return r.protected!==void 0&&(v.protectedHeader=i),r.aad!==void 0&&(v.additionalAuthenticatedData=$t(r.aad)),r.unprotected!==void 0&&(v.sharedUnprotectedHeader=r.unprotected),r.header!==void 0&&(v.unprotectedHeader=r.header),h?{...v,key:e}:v}async function Xm(r,e,t){if(r instanceof Uint8Array&&(r=Jn.decode(r)),typeof r!="string")throw new se("Compact JWE must be a string or Uint8Array");const{0:n,1:i,2:o,3:a,4:s,length:u}=r.split(".");if(u!==5)throw new se("Invalid Compact JWE");const c=await jh({ciphertext:a,iv:o||void 0,protected:n||void 0,tag:s||void 0,encrypted_key:i||void 0},e,t),f={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return typeof e=="function"?{...f,key:c.key}:f}async function Ex(r,e,t){if(!hr(r))throw new se("General JWE must be an object");if(!Array.isArray(r.recipients)||!r.recipients.every(hr))throw new se("JWE Recipients missing or incorrect type");if(!r.recipients.length)throw new se("JWE Recipients has no members");for(const n of r.recipients)try{return await jh({aad:r.aad,ciphertext:r.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:r.iv,protected:r.protected,tag:r.tag,unprotected:r.unprotected},e,t)}catch{}throw new fu}const xx=async r=>{if(r instanceof Uint8Array)return{kty:"oct",k:Ht(r)};if(!rn(r))throw new TypeError(Or(r,...dt,"Uint8Array"));if(!r.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:t,alg:n,use:i,...o}=await we.subtle.exportKey("jwk",r);return o},Sx=xx;async function Cx(r){return ox(r)}async function Ix(r){return ax(r)}async function Ym(r){return Sx(r)}async function jm(r,e,t,n,i={}){let o,a,s;switch(uf(r,t,"encrypt"),r){case"dir":{s=t;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!qm(t))throw new Ie("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:u,apv:c}=i;let{epk:f}=i;f||(f=(await ZE(t)).privateKey);const{x:h,y:p,crv:b,kty:_}=await Ym(f),S=await Um(t,f,r==="ECDH-ES"?e:r,r==="ECDH-ES"?Yh(e):parseInt(r.slice(-5,-2),10),u,c);if(a={epk:{x:h,crv:b,kty:_}},_==="EC"&&(a.epk.y=p),u&&(a.apu=Ht(u)),c&&(a.apv=Ht(c)),r==="ECDH-ES"){s=S;break}s=n||oa(e);const R=r.slice(-6);o=await ql(R,S,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{s=n||oa(e),o=await nx(r,t,s);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||oa(e);const{p2c:u,p2s:c}=i;({encryptedKey:o,...a}=await tx(r,t,s,u,c));break}case"A128KW":case"A192KW":case"A256KW":{s=n||oa(e),o=await ql(r,t,s);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||oa(e);const{iv:u}=i;({encryptedKey:o,...a}=await _x(r,t,s,u));break}default:throw new Ie('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:o,parameters:a}}const $m=Symbol();class vc{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new se("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Cu(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new se("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Iu(se,new Map,t==null?void 0:t.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new se('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new Ie('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:i,enc:o}=n;if(typeof i!="string"||!i)throw new se('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof o!="string"||!o)throw new se('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let a;if(i==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(i==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let s;{let _;({cek:s,encryptedKey:a,parameters:_}=await jm(i,o,e,this._cek,this._keyManagementParameters)),_&&(t&&$m in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,..._}:this.setUnprotectedHeader(_):this._protectedHeader?this._protectedHeader={...this._protectedHeader,..._}:this.setProtectedHeader(_))}this._iv||(this._iv=Lm(o));let u,c,f;this._protectedHeader?c=gt.encode(Ht(JSON.stringify(this._protectedHeader))):c=gt.encode(""),this._aad?(f=Ht(this._aad),u=Qi(c,gt.encode("."),gt.encode(f))):u=c;let h,p;if(n.zip==="DEF"){const _=await((t==null?void 0:t.deflateRaw)||jE)(this._plaintext);({ciphertext:h,tag:p}=await Gl(o,_,s,this._iv,u))}else({ciphertext:h,tag:p}=await Gl(o,this._plaintext,s,this._iv,u));const b={ciphertext:Ht(h),iv:Ht(this._iv),tag:Ht(p)};return a&&(b.encrypted_key=Ht(a)),f&&(b.aad=f),this._protectedHeader&&(b.protected=Jn.decode(c)),this._sharedUnprotectedHeader&&(b.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(b.header=this._unprotectedHeader),b}}class Ax{constructor(e,t,n){this.parent=e,this.key=t,this.options=n}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class Mx{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const n=new Ax(this,e,{crit:t==null?void 0:t.crit});return this._recipients.push(n),n}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,n,i;if(!this._recipients.length)throw new se("at least one recipient must be added");if(e={deflateRaw:e==null?void 0:e.deflateRaw},this._recipients.length===1){const[u]=this._recipients,c=await new vc(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).encrypt(u.key,{...u.options,...e});let f={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(f.aad=c.aad),c.protected&&(f.protected=c.protected),c.unprotected&&(f.unprotected=c.unprotected),c.encrypted_key&&(f.recipients[0].encrypted_key=c.encrypted_key),c.header&&(f.recipients[0].header=c.header),f}let o;for(let u=0;u<this._recipients.length;u++){const c=this._recipients[u];if(!Cu(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new se("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const f={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:h}=f;if(typeof h!="string"||!h)throw new se('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(h==="dir"||h==="ECDH-ES")throw new se('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof f.enc!="string"||!f.enc)throw new se('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!o)o=f.enc;else if(o!==f.enc)throw new se('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Iu(se,new Map,c.options.crit,this._protectedHeader,f),f.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new se('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const a=oa(o);let s={ciphertext:"",iv:"",recipients:[],tag:""};for(let u=0;u<this._recipients.length;u++){const c=this._recipients[u],f={};s.recipients.push(f);const p={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+u:void 0;if(u===0){const S=await new vc(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(a).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:p}).encrypt(c.key,{...c.options,...e,[$m]:!0});s.ciphertext=S.ciphertext,s.iv=S.iv,s.tag=S.tag,S.aad&&(s.aad=S.aad),S.protected&&(s.protected=S.protected),S.unprotected&&(s.unprotected=S.unprotected),f.encrypted_key=S.encrypted_key,S.header&&(f.header=S.header);continue}const{encryptedKey:b,parameters:_}=await jm(((t=c.unprotectedHeader)===null||t===void 0?void 0:t.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((i=this._unprotectedHeader)===null||i===void 0?void 0:i.alg),o,c.key,a,{p2c:p});f.encrypted_key=Ht(b),(c.unprotectedHeader||_)&&(f.header={...c.unprotectedHeader,..._})}return s}}function Zm(r,e){const t=`SHA-${r.slice(-3)}`;switch(r){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:r.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case(Rs()&&"EdDSA"):const{namedCurve:n}=e;return{name:n,namedCurve:n};case"EdDSA":return{name:e.name};default:throw new Ie(`alg ${r} is not supported either by JOSE or your javascript runtime`)}}function Qm(r,e,t){if(rn(e))return WE(e,r,t),e;if(e instanceof Uint8Array){if(!r.startsWith("HS"))throw new TypeError(Or(e,...dt));return we.subtle.importKey("raw",e,{hash:`SHA-${r.slice(-3)}`,name:"HMAC"},!1,[t])}throw new TypeError(Or(e,...dt,"Uint8Array"))}const Nx=async(r,e,t,n)=>{const i=await Qm(r,e,"verify");af(r,i);const o=Zm(r,i.algorithm);try{return await we.subtle.verify(o,i,t,n)}catch{return!1}};async function $h(r,e,t){var n;if(!hr(r))throw new Ve("Flattened JWS must be an object");if(r.protected===void 0&&r.header===void 0)throw new Ve('Flattened JWS must have either of the "protected" or "header" members');if(r.protected!==void 0&&typeof r.protected!="string")throw new Ve("JWS Protected Header incorrect type");if(r.payload===void 0)throw new Ve("JWS Payload missing");if(typeof r.signature!="string")throw new Ve("JWS Signature missing or incorrect type");if(r.header!==void 0&&!hr(r.header))throw new Ve("JWS Unprotected Header incorrect type");let i={};if(r.protected)try{const R=$t(r.protected);i=JSON.parse(Jn.decode(R))}catch{throw new Ve("JWS Protected Header is invalid")}if(!Cu(i,r.header))throw new Ve("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...i,...r.header},a=Iu(Ve,new Map([["b64",!0]]),t==null?void 0:t.crit,i,o);let s=!0;if(a.has("b64")&&(s=i.b64,typeof s!="boolean"))throw new Ve('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:u}=o;if(typeof u!="string"||!u)throw new Ve('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=t&&Vl("algorithms",t.algorithms);if(c&&!c.has(u))throw new dc('"alg" (Algorithm) Header Parameter not allowed');if(s){if(typeof r.payload!="string")throw new Ve("JWS Payload must be a string")}else if(typeof r.payload!="string"&&!(r.payload instanceof Uint8Array))throw new Ve("JWS Payload must be a string or an Uint8Array instance");let f=!1;typeof e=="function"&&(e=await e(i,r),f=!0),uf(u,e,"verify");const h=Qi(gt.encode((n=r.protected)!==null&&n!==void 0?n:""),gt.encode("."),typeof r.payload=="string"?gt.encode(r.payload):r.payload),p=$t(r.signature);if(!await Nx(u,e,p,h))throw new Xh;let _;s?_=$t(r.payload):typeof r.payload=="string"?_=gt.encode(r.payload):_=r.payload;const S={payload:_};return r.protected!==void 0&&(S.protectedHeader=i),r.header!==void 0&&(S.unprotectedHeader=r.header),f?{...S,key:e}:S}async function ev(r,e,t){if(r instanceof Uint8Array&&(r=Jn.decode(r)),typeof r!="string")throw new Ve("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:a}=r.split(".");if(a!==3)throw new Ve("Invalid Compact JWS");const s=await $h({payload:i,protected:n,signature:o},e,t),u={payload:s.payload,protectedHeader:s.protectedHeader};return typeof e=="function"?{...u,key:s.key}:u}async function Px(r,e,t){if(!hr(r))throw new Ve("General JWS must be an object");if(!Array.isArray(r.signatures)||!r.signatures.every(hr))throw new Ve("JWS Signatures missing or incorrect type");for(const n of r.signatures)try{return await $h({header:n.header,payload:r.payload,protected:n.protected,signature:n.signature},e,t)}catch{}throw new Xh}const Gu=r=>Math.floor(r.getTime()/1e3),tv=60,rv=tv*60,Zh=rv*24,Lx=Zh*7,Rx=Zh*365.25,Tx=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,yc=r=>{const e=Tx.exec(r);if(!e)throw new TypeError("Invalid time period format");const t=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(t);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(t*tv);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(t*rv);case"day":case"days":case"d":return Math.round(t*Zh);case"week":case"weeks":case"w":return Math.round(t*Lx);default:return Math.round(t*Rx)}},Bp=r=>r.toLowerCase().replace(/^application\//,""),Ox=(r,e)=>typeof r=="string"?e.includes(r):Array.isArray(r)?e.some(Set.prototype.has.bind(new Set(r))):!1,Qh=(r,e,t={})=>{const{typ:n}=t;if(n&&(typeof r.typ!="string"||Bp(r.typ)!==Bp(n)))throw new an('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(Jn.decode(e))}catch{}if(!hr(i))throw new Jr("JWT Claims Set must be a top-level JSON object");const{issuer:o}=t;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new an('unexpected "iss" claim value',"iss","check_failed");const{subject:a}=t;if(a&&i.sub!==a)throw new an('unexpected "sub" claim value',"sub","check_failed");const{audience:s}=t;if(s&&!Ox(i.aud,typeof s=="string"?[s]:s))throw new an('unexpected "aud" claim value',"aud","check_failed");let u;switch(typeof t.clockTolerance){case"string":u=yc(t.clockTolerance);break;case"number":u=t.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:c}=t,f=Gu(c||new Date);if((i.iat!==void 0||t.maxTokenAge)&&typeof i.iat!="number")throw new an('"iat" claim must be a number',"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new an('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>f+u)throw new an('"nbf" claim timestamp check failed',"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new an('"exp" claim must be a number',"exp","invalid");if(i.exp<=f-u)throw new Ul('"exp" claim timestamp check failed',"exp","check_failed")}if(t.maxTokenAge){const h=f-i.iat,p=typeof t.maxTokenAge=="number"?t.maxTokenAge:yc(t.maxTokenAge);if(h-u>p)throw new Ul('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(h<0-u)throw new an('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function Dx(r,e,t){var n;const i=await ev(r,e,t);if(!((n=i.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&i.protectedHeader.b64===!1)throw new Jr("JWTs MUST NOT use unencoded payload");const a={payload:Qh(i.protectedHeader,i.payload,t),protectedHeader:i.protectedHeader};return typeof e=="function"?{...a,key:i.key}:a}async function kx(r,e,t){const n=await Xm(r,e,t),i=Qh(n.protectedHeader,n.plaintext,t),{protectedHeader:o}=n;if(o.iss!==void 0&&o.iss!==i.iss)throw new an('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(o.sub!==void 0&&o.sub!==i.sub)throw new an('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(o.aud!==void 0&&JSON.stringify(o.aud)!==JSON.stringify(i.aud))throw new an('replicated "aud" claim header parameter mismatch',"aud","mismatch");const a={payload:i,protectedHeader:o};return typeof e=="function"?{...a,key:n.key}:a}class nv{constructor(e){this._flattened=new vc(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const n=await this._flattened.encrypt(e,t);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const Bx=async(r,e,t)=>{const n=await Qm(r,e,"sign");af(r,n);const i=await we.subtle.sign(Zm(r,n.algorithm),n,t);return new Uint8Array(i)};class ed{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Ve("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Cu(this._protectedHeader,this._unprotectedHeader))throw new Ve("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},i=Iu(Ve,new Map([["b64",!0]]),t==null?void 0:t.crit,this._protectedHeader,n);let o=!0;if(i.has("b64")&&(o=this._protectedHeader.b64,typeof o!="boolean"))throw new Ve('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=n;if(typeof a!="string"||!a)throw new Ve('JWS "alg" (Algorithm) Header Parameter missing or invalid');uf(a,e,"sign");let s=this._payload;o&&(s=gt.encode(Ht(s)));let u;this._protectedHeader?u=gt.encode(Ht(JSON.stringify(this._protectedHeader))):u=gt.encode("");const c=Qi(u,gt.encode("."),s),f=await Bx(a,e,c),h={signature:Ht(f),payload:""};return o&&(h.payload=Jn.decode(s)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=Jn.decode(u)),h}}class iv{constructor(e){this._flattened=new ed(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const n=await this._flattened.sign(e,t);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class Fx{constructor(e,t,n){this.parent=e,this.key=t,this.options=n}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class zx{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const n=new Fx(this,e,t);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new Ve("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const n=this._signatures[t],i=new ed(this._payload);i.setProtectedHeader(n.protectedHeader),i.setUnprotectedHeader(n.unprotectedHeader);const{payload:o,...a}=await i.sign(n.key,n.options);if(t===0)e.payload=o;else if(e.payload!==o)throw new Ve("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(a)}return e}}class td{constructor(e){if(!hr(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:Gu(new Date)+yc(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:Gu(new Date)+yc(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:Gu(new Date)}:this._payload={...this._payload,iat:e},this}}class Ux extends td{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var n;const i=new iv(gt.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Jr("JWTs MUST NOT use unencoded payload");return i.sign(e,t)}}class qx extends td{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const n=new nv(gt.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(e,t)}}const Io=(r,e)=>{if(typeof r!="string"||!r)throw new Am(`${e} missing or invalid`)};async function ov(r,e){if(!hr(r))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let t;switch(r.kty){case"EC":Io(r.crv,'"crv" (Curve) Parameter'),Io(r.x,'"x" (X Coordinate) Parameter'),Io(r.y,'"y" (Y Coordinate) Parameter'),t={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":Io(r.crv,'"crv" (Subtype of Key Pair) Parameter'),Io(r.x,'"x" (Public Key) Parameter'),t={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":Io(r.e,'"e" (Exponent) Parameter'),Io(r.n,'"n" (Modulus) Parameter'),t={e:r.e,kty:r.kty,n:r.n};break;case"oct":Io(r.k,'"k" (Key Value) Parameter'),t={k:r.k,kty:r.kty};break;default:throw new Ie('"kty" (Key Type) Parameter missing or unsupported')}const n=gt.encode(JSON.stringify(t));return Ht(await Sm(e,n))}async function Hx(r,e){e??(e="sha256");const t=await ov(r,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${t}`}async function Gx(r,e){const t={...r,...e.header};if(!hr(t.jwk))throw new Ve('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await sf({...t.jwk,ext:!0},t.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new Ve('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function Vx(r){switch(typeof r=="string"&&r.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Ie('Unsupported "alg" value for a JSON Web Key Set')}}function av(r){return r&&typeof r=="object"&&Array.isArray(r.keys)&&r.keys.every(Kx)}function Kx(r){return hr(r)}function Wx(r){return typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r))}class Kl{constructor(e){if(this._cached=new WeakMap,!av(e))throw new pc("JSON Web Key Set malformed");this._jwks=Wx(e)}async getKey(e,t){const{alg:n,kid:i}={...e,...t.header},o=Vx(n),a=this._jwks.keys.filter(f=>{let h=o===f.kty;if(h&&typeof i=="string"&&(h=i===f.kid),h&&typeof f.alg=="string"&&(h=n===f.alg),h&&typeof f.use=="string"&&(h=f.use==="sig"),h&&Array.isArray(f.key_ops)&&(h=f.key_ops.includes("verify")),h&&n==="EdDSA"&&(h=f.crv==="Ed25519"||f.crv==="Ed448"),h)switch(n){case"ES256":h=f.crv==="P-256";break;case"ES256K":h=f.crv==="secp256k1";break;case"ES384":h=f.crv==="P-384";break;case"ES512":h=f.crv==="P-521";break}return h}),{0:s,length:u}=a;if(u===0)throw new Jh;if(u!==1)throw new Mm;const c=this._cached.get(s)||this._cached.set(s,{}).get(s);if(c[n]===void 0){const f=await sf({...s,ext:!0},n);if(f instanceof Uint8Array||f.type!=="public")throw new pc("JSON Web Key Set members must be public keys");c[n]=f}return c[n]}}function Jx(r){return Kl.prototype.getKey.bind(new Kl(r))}const Xx=async(r,e,t)=>{let n,i,o=!1;typeof AbortController=="function"&&(n=new AbortController,i=setTimeout(()=>{o=!0,n.abort()},e));const a=await fetch(r.href,{signal:n?n.signal:void 0,redirect:"manual",headers:t.headers}).catch(s=>{throw o?new Nm:s});if(i!==void 0&&clearTimeout(i),a.status!==200)throw new Ir("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new Ir("Failed to parse the JSON Web Key Set HTTP response as JSON")}};class Fp extends Kl{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t==null?void 0:t.agent,headers:t==null?void 0:t.headers},this._timeoutDuration=typeof(t==null?void 0:t.timeoutDuration)=="number"?t==null?void 0:t.timeoutDuration:5e3,this._cooldownDuration=typeof(t==null?void 0:t.cooldownDuration)=="number"?t==null?void 0:t.cooldownDuration:3e4,this._cacheMaxAge=typeof(t==null?void 0:t.cacheMaxAge)=="number"?t==null?void 0:t.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,t){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,t)}catch(n){if(n instanceof Jh&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,t);throw n}}async reload(){if(this._pendingFetch&&Rs())return new Promise(e=>{const t=()=>{this._pendingFetch===void 0?e():setTimeout(t,5)};t()});this._pendingFetch||(this._pendingFetch=Xx(this._url,this._timeoutDuration,this._options).then(e=>{if(!av(e))throw new pc("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function Yx(r,e){return Fp.prototype.getKey.bind(new Fp(r,e))}class jx extends td{encode(){const e=Ht(JSON.stringify({alg:"none"})),t=Ht(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){if(typeof e!="string")throw new Jr("Unsecured JWT must be a string");const{0:n,1:i,2:o,length:a}=e.split(".");if(a!==3||o!=="")throw new Jr("Invalid Unsecured JWT");let s;try{if(s=JSON.parse(Jn.decode($t(n))),s.alg!=="none")throw new Error}catch{throw new Jr("Invalid Unsecured JWT")}return{payload:Qh(s,$t(i),t),header:s}}}const $x=Ht,rd=$t,Zx=Object.freeze(Object.defineProperty({__proto__:null,decode:rd,encode:$x},Symbol.toStringTag,{value:"Module"}));function Qx(r){let e;if(typeof r=="string"){const t=r.split(".");(t.length===3||t.length===5)&&([e]=t)}else if(typeof r=="object"&&r)if("protected"in r)e=r.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const t=JSON.parse(Jn.decode(rd(e)));if(!hr(t))throw new Error;return t}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function eS(r){if(typeof r!="string")throw new Jr("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=r.split(".");if(t===5)throw new Jr("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new Jr("Invalid JWT");if(!e)throw new Jr("JWTs must contain a payload");let n;try{n=rd(e)}catch{throw new Jr("Failed to parse the base64url encoded payload")}let i;try{i=JSON.parse(Jn.decode(n))}catch{throw new Jr("Failed to parse the decoded payload as JSON")}if(!hr(i))throw new Jr("Invalid JWT Claims Set");return i}async function tS(r,e){var t;let n,i,o;switch(r){case"HS256":case"HS384":case"HS512":n=parseInt(r.slice(-3),10),i={name:"HMAC",hash:`SHA-${n}`,length:n},o=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(r.slice(-3),10),nf(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(r.slice(1,4),10),i={name:"AES-KW",length:n},o=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(r.slice(1,4),10),i={name:"AES-GCM",length:n},o=["encrypt","decrypt"];break;default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return we.subtle.generateKey(i,(t=e==null?void 0:e.extractable)!==null&&t!==void 0?t:!1,o)}function il(r){var e;const t=(e=r==null?void 0:r.modulusLength)!==null&&e!==void 0?e:2048;if(typeof t!="number"||t<2048)throw new Ie("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function rS(r,e){var t,n,i;let o,a;switch(r){case"PS256":case"PS384":case"PS512":o={name:"RSA-PSS",hash:`SHA-${r.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:il(e)},a=["sign","verify"];break;case"RS256":case"RS384":case"RS512":o={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:il(e)},a=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o={name:"RSA-OAEP",hash:`SHA-${parseInt(r.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:il(e)},a=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":o={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"];break;case"ES384":o={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"];break;case"ES512":o={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"];break;case(Rs()&&"EdDSA"):switch(e==null?void 0:e.crv){case void 0:case"Ed25519":o={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},a=["sign","verify"];break;default:throw new Ie("Invalid or unsupported crv option provided")}break;case"EdDSA":a=["sign","verify"];const s=(t=e==null?void 0:e.crv)!==null&&t!==void 0?t:"Ed25519";switch(s){case"Ed25519":case"Ed448":o={name:s};break;default:throw new Ie("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{a=["deriveKey","deriveBits"];const u=(n=e==null?void 0:e.crv)!==null&&n!==void 0?n:"P-256";switch(u){case"P-256":case"P-384":case"P-521":{o={name:"ECDH",namedCurve:u};break}case"X25519":case"X448":o={name:u};break;default:throw new Ie("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Ie('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return we.subtle.generateKey(o,(i=e==null?void 0:e.extractable)!==null&&i!==void 0?i:!1,a)}async function nS(r,e){return rS(r,e)}async function iS(r,e){return tS(r,e)}const oS=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:nv,CompactSign:iv,EmbeddedJWK:Gx,EncryptJWT:qx,FlattenedEncrypt:vc,FlattenedSign:ed,GeneralEncrypt:Mx,GeneralSign:zx,SignJWT:Ux,UnsecuredJWT:jx,base64url:Zx,calculateJwkThumbprint:ov,calculateJwkThumbprintUri:Hx,compactDecrypt:Xm,compactVerify:ev,createLocalJWKSet:Jx,createRemoteJWKSet:Yx,decodeJwt:eS,decodeProtectedHeader:Qx,errors:GE,exportJWK:Ym,exportPKCS8:Ix,exportSPKI:Cx,flattenedDecrypt:jh,flattenedVerify:$h,generalDecrypt:Ex,generalVerify:Px,generateKeyPair:nS,generateSecret:iS,importJWK:sf,importPKCS8:px,importSPKI:hx,importX509:dx,jwtDecrypt:kx,jwtVerify:Dx},Symbol.toStringTag,{value:"Module"})),aS=lu(oS);var na=uo&&uo.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(f){try{c(n.next(f))}catch(h){a(h)}}function u(f){try{c(n.throw(f))}catch(h){a(h)}}function c(f){f.done?o(f.value):i(f.value).then(s,u)}c((n=n.apply(r,e||[])).next())})},sv=uo&&uo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.MangroveReviews=void 0;const sS=sv(E2),qs=sv(UE),uS=aS;class br{static signReview(e,t){return na(this,void 0,void 0,function*(){t=br.cleanPayload(t);const n="ES256",i=yield br.publicToPem(e.publicKey),o=JSON.stringify(yield crypto.subtle.exportKey("jwk",e.publicKey));return yield new uS.SignJWT(t).setProtectedHeader({alg:n,kid:i,jwk:o,enc:"utf-8"}).sign(e.privateKey)})}static submitReview(e,t=br.ORIGINAL_API){return qs.default.put(`${t}/submit/${e}`)}static signAndSubmitReview(e,t,n=br.ORIGINAL_API){return na(this,void 0,void 0,function*(){const i=yield br.signReview(e,t);return br.submitReview(i,n)})}static getReviews(e,t=br.ORIGINAL_API){return na(this,void 0,void 0,function*(){const{data:n}=yield qs.default.get(`${t}/reviews`,{params:e,headers:{"Content-Type":"application/json"}});return n})}static getSubject(e,t=br.ORIGINAL_API){return qs.default.get(`${t}/subject/${encodeURIComponent(e)}`).then(({data:n})=>n)}static getIssuer(e,t=br.ORIGINAL_API){return qs.default.get(`${t}/issuer/${encodeURIComponent(e)}`).then(({data:n})=>n)}static batchAggregate(e,t=br.ORIGINAL_API){return!e.pems&&!e.subs?null:qs.default.post(`${t}/batch`,e).then(({data:n})=>n)}static generateKeypair(){return crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}static jwkToKeypair(e){return na(this,void 0,void 0,function*(){let t=Object.assign({},e);if(!t||t.metadata!==br.PRIVATE_KEY_METADATA)throw new Error(`does not contain the required metadata field "${br.PRIVATE_KEY_METADATA}"`);const n=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]);delete t.d,delete t.dp,delete t.dq,delete t.q,delete t.qi,t.key_ops=["verify"];const i=yield crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return{privateKey:n,publicKey:i}})}static keypairToJwk(e){return na(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("jwk",e.privateKey);return t.metadata=br.PRIVATE_KEY_METADATA,t})}static u8aToString(e){return new TextDecoder().decode(e)}static privateToPem(e){return na(this,void 0,void 0,function*(){try{const t=yield crypto.subtle.exportKey("pkcs8",e);return`-----BEGIN PRIVATE KEY-----
${btoa(String.fromCharCode(...new Uint8Array(t)))}
-----END PRIVATE KEY-----`}catch{const n=yield crypto.subtle.exportKey("jwk",e);return(0,sS.default)(n,{private:!0})}})}static publicToPem(e){return na(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("spki",e);return`-----BEGIN PUBLIC KEY-----${btoa(String.fromCharCode(...new Uint8Array(t)))}-----END PUBLIC KEY-----`})}static cleanPayload(e){if(!e.sub)throw"Payload must include subject URI in `sub` field.";if(!e.rating&&!e.opinion)throw"Payload must include either rating or opinion.";if(e.rating!==void 0&&(e.rating<0||e.rating>100))throw"Rating must be in the range from 0 to 100.";e.iat=Math.floor(Date.now()/1e3),e.rating===null&&delete e.rating,e.opinion||delete e.opinion,(!e.images||!e.images.length)&&delete e.images;const t=Object.assign({client_id:window.location.href},e.metadata);for(const n in t){const i=t[n];(i===null||i===!1)&&delete t[n]}return e.metadata=t,e}}Bc.MangroveReviews=br;br.ORIGINAL_API="https://api.mangrove.reviews";br.PRIVATE_KEY_METADATA="Mangrove private key";(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MangroveReviews=void 0;const e=Bc;Object.defineProperty(r,"MangroveReviews",{enumerable:!0,get:function(){return e.MangroveReviews}})})(Pi);class cf{constructor(e){_e(this,"keypair");_e(this,"key_id");const t=new aa(void 0);this.key_id=t;const n=new aa(void 0);this.keypair=n,e.addCallbackAndRunD(async i=>{if(!i)return;const o=await Pi.MangroveReviews.jwkToKeypair(JSON.parse(i));n.setData(o);const a=await Pi.MangroveReviews.publicToPem(o.publicKey);t.setData(a)});try{!Mi.runningFromConsole&&(e.data??"")===""&&cf.CreateIdentity(e).then(i=>{})}catch(i){console.error("Could not create identity: ",i)}}static async CreateIdentity(e){const t=await Pi.MangroveReviews.generateKeypair(),n=await Pi.MangroveReviews.keypairToJwk(t);(e.data??"")===""&&e.setData(JSON.stringify(n))}}const qa=class qa{constructor(e,t,n,i){_e(this,"subjectUri");_e(this,"average");_e(this,"_reviews",new aa([]));_e(this,"reviews",this._reviews);_e(this,"_lat");_e(this,"_lon");_e(this,"_uncertainty");_e(this,"_name");_e(this,"_identity");const o=An.centerpointCoordinates(e);[this._lon,this._lat]=o,this._identity=n??new cf(new aa(void 0));const a=(i==null?void 0:i.nameKey)??"name";if(e.geometry.type==="Point")this._uncertainty=(i==null?void 0:i.uncertaintyRadius)??10;else{let u;e.geometry.type==="LineString"?u=[e.geometry.coordinates]:(e.geometry.type==="MultiLineString"||e.geometry.type==="Polygon")&&(u=e.geometry.coordinates);let c=0;for(const f of u)for(const h of f)c=Math.max(c,An.distanceBetween(o,h));this._uncertainty=(i==null?void 0:i.uncertaintyRadius)??c}this._name=t.map(u=>u[a]??(i==null?void 0:i.fallbackName)),this.subjectUri=this.ConstructSubjectUri();const s=this;this.subjectUri.addCallbackAndRunD(async u=>{const c=await Pi.MangroveReviews.getReviews({sub:u});s.addReviews(c.reviews)}),this.ConstructSubjectUri(!0).addCallbackAndRunD(async u=>{try{const c=await Pi.MangroveReviews.getReviews({sub:u});s.addReviews(c.reviews)}catch{console.log("Could not fetch reviews for partially incorrect query ",u)}}),this.average=this._reviews.map(u=>{if(!u||u.length===0)return null;let c=0,f=0;for(const h of u)h.rating!==void 0&&(f++,c+=h.rating);return Math.round(c/f)})}static construct(e,t,n,i){const o=e.properties.id,a=qa._featureReviewsCache[o];if(a!==void 0)return a;const s=new qa(e,t,n,i);return qa._featureReviewsCache[o]=s,s}async createReview(e){const t={sub:this.subjectUri.data,...e},n=this._identity.keypair.data,i=await Pi.MangroveReviews.signReview(n,t),o=await Pi.MangroveReviews.publicToPem(n.publicKey);await Pi.MangroveReviews.submitReview(i),this._reviews.data.push({...t,kid:o,signature:i,madeByLoggedInUser:new Vs(!0)}),this._reviews.ping()}addReviews(e){const t=this,n=new Set(t._reviews.data.map(o=>o.rating+" "+o.opinion));let i=!1;for(const o of e){const a=o.payload;try{const u=new URL(a.sub);if(u.protocol==="geo:"){const c=u.pathname.split(",").map(h=>Number(h));if(An.distanceBetween([this._lat,this._lon],c)>this._uncertainty)continue}}catch(u){console.warn(u)}const s=a.rating+" "+a.opinion;n.has(s)||(t._reviews.data.push({...a,kid:o.kid,signature:o.signature,madeByLoggedInUser:this._identity.key_id.map(u=>o.kid===u)}),i=!0)}i&&(t._reviews.data.sort((o,a)=>a.iat-o.iat),t._reviews.ping())}ConstructSubjectUri(e=!1){const t=this;return this._name.map(function(n){let i=`geo:${t._lat},${t._lon}?u=${Math.round(t._uncertainty)}`;return n&&(i+="&q="+(e?n:encodeURIComponent(n))),i})}};_e(qa,"_featureReviewsCache",{});let zp=qa;class nd{constructor(e){_e(this,"features");if(e===void 0)throw"Static feature source received undefined as source";let t;e.features?t=e.features:t=e,Array.isArray(t)?this.features=new Vs(t):this.features=t}static fromGeojson(e){return new nd(e)}}const cS=[{commits:321,contributor:"kjon"},{commits:300,contributor:"Pieter Vander Vennet"},{commits:179,contributor:"paunofu"},{commits:95,contributor:"Allan Nordhøy"},{commits:72,contributor:"Robin van der Linde"},{commits:61,contributor:"danieldegroot2"},{commits:45,contributor:"Anonymous"},{commits:36,contributor:"Iago"},{commits:33,contributor:"Jiří Podhorecký"},{commits:32,contributor:"Lucas"},{commits:32,contributor:"Babos Gábor"},{commits:31,contributor:"Supaplex"},{commits:29,contributor:"mcliquid"},{commits:29,contributor:"Artem"},{commits:25,contributor:"Reza Almanda"},{commits:23,contributor:"Marco"},{commits:21,contributor:"SC"},{commits:18,contributor:"el_libre como el chaval"},{commits:15,contributor:"macpac"},{commits:15,contributor:"WaldiS"},{commits:14,contributor:"LeJun"},{commits:14,contributor:"J. Lavoie"},{commits:13,contributor:"gallegonovato"},{commits:13,contributor:"Olivier"},{commits:13,contributor:"Romain de Bossoreille"},{commits:13,contributor:"Joost"},{commits:12,contributor:"Piotr Strebski"},{commits:11,contributor:"Jaime Marquínez Ferrándiz"},{commits:11,contributor:"Túllio Franca"},{commits:10,contributor:"Ettore Atalan"},{commits:10,contributor:"brunnerpaul"},{commits:10,contributor:"pdassori"},{commits:10,contributor:"bgo-eiu"},{commits:10,contributor:"Win Olario"},{commits:10,contributor:"Johannes Rössel"},{commits:10,contributor:"Irina"},{commits:9,contributor:"快乐的老鼠宝宝"},{commits:9,contributor:"deep map"},{commits:9,contributor:"Fjuro"},{commits:9,contributor:"Niels Madsen"},{commits:9,contributor:"Jacque Fresco"},{commits:8,contributor:"Vinicius"},{commits:7,contributor:"NetworkedPoncho"},{commits:7,contributor:"Joost Schouppe"},{commits:7,contributor:"Andrews Leruth"},{commits:7,contributor:"Niels Elgaard Larsen"},{commits:6,contributor:"Juele juele"},{commits:6,contributor:"Leonardo Gómez Berniga"},{commits:6,contributor:"Felipe Nogueira"},{commits:6,contributor:"David Haberthür"},{commits:6,contributor:"eMerzh"},{commits:6,contributor:"ⵣⵓⵀⵉⵔ ⴰⵎⴰⵣⵉⵖ زهير أمازيغ"},{commits:6,contributor:"Štefan Baebler"},{commits:6,contributor:"seppesantens"},{commits:6,contributor:"Nikolay Korotkiy"},{commits:6,contributor:"William Weber Berrutti"},{commits:6,contributor:"lvgx"},{commits:5,contributor:"ⵣⵓⵀⵉⵔ ⴰⵎⴰⵣⵉⵖ ZOUHIR DEHBI"},{commits:5,contributor:"sylvain-m"},{commits:5,contributor:"Fabio Bettani"},{commits:5,contributor:"BMN"},{commits:5,contributor:"Dingcycle"},{commits:5,contributor:"phlostically"},{commits:5,contributor:"Piotr"},{commits:5,contributor:"Alexey Shabanov"},{commits:4,contributor:"Krzysztof Chorzempa"},{commits:4,contributor:"Emory Shaw"},{commits:4,contributor:"André Marcelo Alvarenga"},{commits:4,contributor:"Klára Fleischhansová"},{commits:4,contributor:"Hiroshi Miura"},{commits:4,contributor:"Jeff Huang"},{commits:4,contributor:"Adolfo Jayme Barrientos"},{commits:4,contributor:"Polgár Sándor"},{commits:4,contributor:"Jan Zabel"},{commits:3,contributor:"Lasse Liehu"},{commits:3,contributor:"Peter Brodersen"},{commits:3,contributor:"ssantos"},{commits:3,contributor:"Stéphane De Greef"},{commits:3,contributor:"Alexey Lutskyi"},{commits:3,contributor:"Bibi56"},{commits:3,contributor:"aleksej0R"},{commits:3,contributor:"liimee"},{commits:3,contributor:"foxandpotatoes"},{commits:3,contributor:"Sasha"},{commits:3,contributor:"Jose Luis Infante"},{commits:3,contributor:"Francois"},{commits:3,contributor:"Eduardo Addad de Oliveira"},{commits:3,contributor:"Wiktor Przybylski"},{commits:3,contributor:"Erik Palm"},{commits:3,contributor:"vankos"},{commits:3,contributor:"JCGF-OSM"},{commits:3,contributor:"SiegbjornSitumeang"},{commits:2,contributor:"larusalka"},{commits:2,contributor:"Smith Brown"},{commits:2,contributor:"Michel"},{commits:2,contributor:"Kelson Vibber"},{commits:2,contributor:"nilocram"},{commits:2,contributor:"מוימוי טרייצקי"},{commits:2,contributor:"lmagreault"},{commits:2,contributor:"galder158@hotmail.com"},{commits:2,contributor:"HO Gin Wang"},{commits:2,contributor:"multiflexi"},{commits:2,contributor:"Tarcila Cataldi"},{commits:2,contributor:"Valerio Bozzolan"},{commits:2,contributor:"Manuel Tassi"},{commits:2,contributor:"Marc Marc"},{commits:2,contributor:"Midgard"},{commits:2,contributor:"M. Rey"},{commits:2,contributor:"Localizer"},{commits:2,contributor:"Eric Armijo"},{commits:2,contributor:"MeblIkea"},{commits:2,contributor:"わたなべけんご"},{commits:2,contributor:"Mateusz Konieczny"},{commits:2,contributor:"Kristoffer Grundström"},{commits:2,contributor:"Sebastian Kürten"},{commits:2,contributor:"Damian Tokarski"},{commits:2,contributor:"mic140"},{commits:2,contributor:"Heiko"},{commits:2,contributor:"Leo Alcaraz"},{commits:1,contributor:"Federica Gaspari"},{commits:1,contributor:"Henry00572"},{commits:1,contributor:"Julio Salas"},{commits:1,contributor:"Michal Čermák"},{commits:1,contributor:"Juan"},{commits:1,contributor:"Traladarer"},{commits:1,contributor:"LuPa"},{commits:1,contributor:"gnu-ewm"},{commits:1,contributor:"Magnitudee"},{commits:1,contributor:"Dario Crespi"},{commits:1,contributor:"Hungarian_user"},{commits:1,contributor:"Falk Rund"},{commits:1,contributor:"sparky-oxford"},{commits:1,contributor:"jcn706"},{commits:1,contributor:"whatismoss"},{commits:1,contributor:"LePirlouit"},{commits:1,contributor:"SoftwareByRedline"},{commits:1,contributor:"plic ploc"},{commits:1,contributor:"Janina Ellinghaus"},{commits:1,contributor:"Andre Fajar N"},{commits:1,contributor:"Ahen Purwakarta"},{commits:1,contributor:"Luna Jernberg"},{commits:1,contributor:"Rodrigo Tavares"},{commits:1,contributor:"Michał Targoński"},{commits:1,contributor:"Sean Young"},{commits:1,contributor:"Damian Pułka"},{commits:1,contributor:"Iváns"},{commits:1,contributor:"Beardhatcode"},{commits:1,contributor:"riiga"},{commits:1,contributor:"Carlos Ramos Carreño"}],fS={contributors:cS},lS=[{commits:6607,contributor:"Pieter Vander Vennet"},{commits:424,contributor:"Robin van der Linde"},{commits:55,contributor:"Tobias"},{commits:38,contributor:"Win Olario"},{commits:33,contributor:"Christian Neumann"},{commits:32,contributor:"Hosted Weblate"},{commits:31,contributor:"Andrews Leruth"},{commits:31,contributor:"Pieter Fiers"},{commits:30,contributor:"paunofu"},{commits:28,contributor:"riQQ"},{commits:26,contributor:"Joost"},{commits:26,contributor:"karelleketers"},{commits:25,contributor:"dependabot[bot]"},{commits:24,contributor:"Ward"},{commits:21,contributor:"wjtje"},{commits:21,contributor:"AlexanderRebai"},{commits:19,contributor:"Niels Elgaard Larsen"},{commits:19,contributor:"yopaseopor"},{commits:19,contributor:"Sebastian Kürten"},{commits:18,contributor:"Arno Deceuninck"},{commits:17,contributor:"pgm-chardelv1"},{commits:15,contributor:"Brice Maron"},{commits:15,contributor:"ToastHawaii"},{commits:13,contributor:"Nicole"},{commits:12,contributor:"Tobias Jordans"},{commits:12,contributor:"Bavo Vanderghote"},{commits:11,contributor:"Thibault Molleman"},{commits:11,contributor:"RobJN"},{commits:10,contributor:"LiamSimons"},{commits:9,contributor:"Codain"},{commits:9,contributor:"Midgard"},{commits:8,contributor:"pelderson"},{commits:8,contributor:"Mateusz Konieczny"},{commits:7,contributor:"OliNau"},{commits:7,contributor:"Flo Edelmann"},{commits:7,contributor:"Binnette"},{commits:6,contributor:"David Haberthür"},{commits:6,contributor:"danieldegroot2"},{commits:4,contributor:"Nadhem"},{commits:4,contributor:"Ward Beyens"},{commits:3,contributor:"Thierry1030"},{commits:3,contributor:"Weblate (bot)"},{commits:3,contributor:"Léo Villeveygoux"},{commits:2,contributor:"eMerzh"},{commits:2,contributor:"bxl-forever"},{commits:2,contributor:"Lu"},{commits:2,contributor:"Paul Brunner"},{commits:2,contributor:"ⵣⵓⵀⵉⵔ ⴰⵎⴰⵣⵉⵖ زهير أمازيغ"},{commits:2,contributor:"Jiří Podhorecký"},{commits:2,contributor:"pdassori"},{commits:2,contributor:"快乐的老鼠宝宝"},{commits:2,contributor:"arrival-spring"},{commits:2,contributor:"Strubbl"},{commits:2,contributor:"RayBB"},{commits:2,contributor:"Charlotte Delvaux"},{commits:2,contributor:"Supaplex"},{commits:2,contributor:"pbarban"},{commits:2,contributor:"graveelius"},{commits:2,contributor:"Stanislas Gueniffey"},{commits:1,contributor:"Roman Zhukov"},{commits:1,contributor:"Ciprian"},{commits:1,contributor:"redfast00"},{commits:1,contributor:"Daniel McDonald"},{commits:1,contributor:"M!dgard"},{commits:1,contributor:"galder158@hotmail.com"},{commits:1,contributor:"Bart Hanssens"},{commits:1,contributor:"brunnerpaul"},{commits:1,contributor:"flaburgan"},{commits:1,contributor:"bgo-eiu"},{commits:1,contributor:"Wouter van der Wal"},{commits:1,contributor:"Reiner Herrmann"},{commits:1,contributor:"Hopperpop"},{commits:1,contributor:"Arya"},{commits:1,contributor:"Robbert Gurdeep Singh"},{commits:1,contributor:"HispanicMojitos"},{commits:1,contributor:"kaipankrath"},{commits:1,contributor:"loviuz"},{commits:1,contributor:"kjonosm"},{commits:1,contributor:"Štefan Baebler"},{commits:1,contributor:"Mark Rogerson"},{commits:1,contributor:"nicole_s"},{commits:1,contributor:"SC"},{commits:1,contributor:"Raphael Das Gupta"},{commits:1,contributor:"Nikolay Korotkiy"},{commits:1,contributor:"Seppe Santens"},{commits:1,contributor:"root"},{commits:1,contributor:"Allan Nordhøy"},{commits:1,contributor:"Sebastian"},{commits:1,contributor:"Hiroshi Miura"},{commits:1,contributor:"riiga"},{commits:1,contributor:"Vinicius"},{commits:1,contributor:"Alexey Shabanov"},{commits:1,contributor:"Polgár Sándor"},{commits:1,contributor:"SiegbjornSitumeang"},{commits:1,contributor:"Marco"},{commits:1,contributor:"mozita"},{commits:1,contributor:"Schouppe Joost"},{commits:1,contributor:"Noémie"},{commits:1,contributor:"Tomas Fiers"},{commits:1,contributor:"tbowdecl97"}],hS={contributors:lS},dS="usersettings",pS={en:"A special layer which is not meant to be shown on a map, but which is used to set user settings",de:"Eine spezielle Ebene, die nicht für die Darstellung auf einer Karte gedacht ist, sondern für die Festlegung von Benutzereinstellungen verwendet wird",nl:"Een speciale lag die niet getoond wordt op de kaart, maar die de instellingen van de gebruiker weergeeft",pt:"Uma camada especial que não deve ser mostrada em um mapa, mas que é usada para definir as configurações do usuário",ca:"Una capa especial que no està pensada per mostrar-se en un mapa, però que s'utilitza per configurar la configuració de l'usuari",cs:"Speciální vrstva, která není určena k zobrazení na mapě, ale slouží k nastavení uživatelských nastavení"},gS="special",mS=["_mastodon_candidate_md=feat.properties._description.match(/\\[[^\\]]*\\]\\((.*(mastodon|en.osm.town).*)\\).*/)?.at(1)","_d=feat.properties._description?.replace(/&lt;/g,'<')?.replace(/&gt;/g,'>') ?? ''",`_mastodon_candidate_a=(feat => {const e = document.createElement('div');e.innerHTML = feat.properties._d;return Array.from(e.getElementsByTagName("a")).filter(a => a.href.match(/mastodon|en.osm.town/) !== null)[0]?.href   }) (feat) `,`_mastodon_link=(feat => {const e = document.createElement('div');e.innerHTML = feat.properties._d;return Array.from(e.getElementsByTagName("a")).filter(a => a.getAttribute("rel")?.indexOf('me') >= 0)[0]?.href})(feat) `,"_mastodon_candidate=feat.properties._mastodon_candidate_md ?? feat.properties._mastodon_candidate_a","__current_background:='initial_value'"],vS={render:{en:"Settings",nl:"Instellingen",de:"Einstellungen",fr:"Paramètres",da:"Indstillinger",ca:"Configuració",cs:"Nastavení",fi:"Asetukset"}},yS=null,_S=null,bS=[{id:"profile",render:{"*":"{user_profile()}"}},{id:"language_picker",render:{"*":"{language_picker()}"},mappings:[{if:"__url_parameter_initialized:language=yes",icon:"./assets/layers/usersettings/translate_disabled.svg",then:{en:"The language was set via an URL-parameter and cannot be set by the user.",de:"Die Sprache wurde über einen URL-Parameter gesetzt und kann nicht vom Benutzer eingestellt werden.",ca:"L'idioma es va establir mitjançant un paràmetre d'URL i l'usuari no pot definir-lo.",cs:"Jazyk byl nastaven pomocí parametru URL a uživatel jej nemůže nastavit.²",nl:"De taal werd ingesteld via een URL-parameter en kan niet manueel ingesteld worden."}}]},{id:"inbox",mappings:[{if:"_unreadMessages=0",then:{ca:"{link(Obre la teva safata d'entrada,&LBRACE_backend&RBRACE/messages/inbox,,,)}",cs:"{link(Otevřít schránku,&LBRACE_backend&RBRACE/messages/inbox,,,)}",de:"{link(Deinen Posteingang öffnen,&LBRACE_backend&RBRACE/messages/inbox,,,)}",en:"{link(Open your inbox,&LBRACE_backend&RBRACE/messages/inbox,,,)}",nl:"{link(Ga naar je inbox,&LBRACE_backend&RBRACE/messages/inbox,,,)}"}},{if:"_unreadMessages>0",then:{ca:"{link(<b class='alert'>Tens &LBRACE_unreadMessages&RBRACE missatges </b><br/>Obri la safata d'entrada,&LBRACE_backend&RBRACE/messages/inbox,,,)}",cs:"{link(<b class='alert'>Máte &LBRACE_unreadMessages&RBRACE</b><br/>Otevřít schránku,&LBRACE_backend&RBRACE/messages/inbox,,,)}",de:"{link(<b class='alert'>Sie haben &LBRACE_unreadMessages&RBRACE Nachrichten</b><br/>Posteingang öffnen,&LBRACE_backend&RBRACE/messages/inbox,,,)}",en:"{link(<b class='alert'>You have &LBRACE_unreadMessages&RBRACE messages</b><br/>Open your inbox,&LBRACE_backend&RBRACE/messages/inbox,,,)}",nl:"{link(<b class='alert'>Je hebt &LBRACE_unreadMessages&RBRACE ongelezen berichten</b><br/>Ga naar je inbox,&LBRACE_backend&RBRACE/messages/inbox,,,)}"}}]},{id:"settings-link",render:{ca:"{link(Obriu la vostra configuració a OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,,)}",cs:"{link(Otevřít vaše nastavení na OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,,)}",de:"{link(Öffne Deine Einstellungen auf OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,,)}",en:"{link(Open your settings on OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,,)}",nl:"{link(Open je instellingen op OpenStreetMap.org,&LBRACE_backend&RBRACE/account/edit,,,)}"}},{id:"logout",render:{"*":"{logout()}"}},{id:"a11y-features",question:{en:"What accessibility features should be applied?",nl:"Wanneer moet de toegankelijkheidsmode ingeschakeld worden?",de:"Welche Barrierefrei-Funktionen sollen angewendet werden?"},mappings:[{if:"mapcomplete-a11y=default",alsoShowIf:"mapcomplete-a11y=",then:{en:"Enable accessibility features when arrow keys are used to navigate the map",ca:"Activar les funcions d'accessibilitat quan s'utilitzen les tecles de fletxa per navegar pel mapa",nl:"Schakel toegankelijkheidsmode aan wanneer op de pijltjestoetsen wordt geduwd om de kaart te bewegen",de:"Barrierefrei-Modus aktivieren, wenn Pfeiltasten zum Navigieren in der Karte verwendet werden"}},{if:"mapcomplete-a11y=always",then:{en:"Always enable accessibility features",ca:"Sempre habilita les característiques d'accessibilitat",nl:"Schakel de toegankelijkheidsmode altijd aan",de:"Barrierefrei-Modus immer aktivieren"}},{if:"mapcomplete-a11y=never",then:{en:"Never enable accessibility features",nl:"Gebruik geen toegankelijkheidsmode",de:"Barrierefrei-Modus niemals aktivieren"}}]},{id:"background-layer-readonly",condition:{and:["_theme:backgroundLayer~*","mapcomplete-preferred-background-layer~*","_theme:backgroundLayer!:={mapcomplete-preferred-background-layer}"]},render:{en:"This thematic map has a predefined background layer set. Your default theme setting does not apply",ca:"Aquest mapa temàtic té un conjunt de capes de fons predefinides. La configuració predeterminada del tema no s'aplica",de:"Diese thematische Karte hat einen vordefinierten Hintergrund. Ihr Standardhintergrund wird nicht angewendet",cs:"Tato tematická mapa má předdefinovanou sadu podkladových vrstev. Vaše výchozí nastavení tématu se nepoužije",nl:"Deze kaart heeft een achtegrondlaag instgesteld. Je instellingen worden niet gebruikt"}},{id:"background-layer",question:{en:"What background layer should be shown by default?",ca:"Quina capa de fons s'ha de mostrar per defecte?",de:"Welche Hintergrundebene soll als Standard verwendet werden?",cs:"Jaká vrstva pozadí by se měla zobrazovat ve výchozím nastavení?",nl:"Welke achtergrondlaag moet altijd gebruikt worden?"},condition:"_theme:backgroundLayer=",mappings:[{if:"mapcomplete-preferred-background-layer=default",alsoShowIf:"mapcomplete-preferred-background-layer=",then:{en:"Use the default background layer",ca:"Utilitzeu la capa de fons predeterminada",de:"Standardhintergrund verwenden",cs:"Použití výchozí vrstvu pozadí",nl:"Gebruik de standaard achtergrondlaag"}},{if:"mapcomplete-preferred-background-layer=osm",then:{en:"Use OpenStreetMap-carto as default layer",ca:"Utilitzeu OpenStreetMap-carto com a capa predeterminada",de:"OpenStreetMap-carto als Standardhintergrund verwenden",cs:"Použít OpenStreetMap-carto jako výchozí vrstvu",nl:"Gebruik OpenStreetMap-carto altijd als achtergrondlaag"}},{if:"mapcomplete-preferred-background-layer=photo",then:{en:"Use aerial imagery as default background",ca:"Utilitzeu imatges aèries com a fons predeterminat",de:"Satellitenbilder als Standardhintergrund verwenden",cs:"Použít letecké snímky jako výchozí pozadí",nl:"Gebruik luchtfoto's als standaard achtergrondlaag"}},{if:"mapcomplete-preferred-background-layer=map",then:{en:"Use a non-openstreetmap based map as default background",ca:"Utilitzeu un mapa que no sigui openstreetmap com a fons predeterminat",de:"Eine eigene Karte als Standardhintergrund verwenden",cs:"Použití mapy, která není založena na mapě openstreetmap, jako výchozího pozadí",nl:"Gebruik altijd een kaart di niet op OpenStreetMap gebaseerd is als achtergrond"}},{if:"mapcomplete-preferred-background-layer:={__current_background}",then:{en:"Use the current background layer (<span class='code'>{__current_background}</span>) as default background",ca:"Utilitzeu la capa de fons actual (<span class='code'>{__current_background}</span>) com a fons predeterminat",de:"Aktuelle Hintergrundebene (<span class='code'>{__current_background}</span>) als Standardhintergrund verwenden",cs:"Použít aktuální vrstvu pozadí (<span class='code'>{__current_background}</span>) jako výchozí pozadí",nl:"Gebruik altijd <span class='code'>{__current_background}</span>) als achtergrondlaag. Dit is de huidige achtergrond."},hideInAnswer:{or:["__current_background=","__current_background=osm","__current_background=initial_value"]}},{if:"mapcomplete-preferred-background-layer~*",then:{en:"Use background layer <span class='code'>{mapcomplete-preferred-background-layer}</span> as default background",ca:"Utilitza la capa de fons <span class='code'>{mapcomplete-preferred-background-layer}</span> com a fons predeterminat",de:"Hintergrundebene <span class='code'>{mapcomplete-preferred-background-layer}</span> als Standardhintergrund verwenden",cs:"Použít vrstvu pozadí <span class='code'>{mapcomplete-preferred-background-layer}</span> jako výchozí pozadí",nl:"Gebruik <span class='code'>{mapcomplete-preferred-background-layer}</span> altijd als achtergrondlaag"},hideInAnswer:!0}]},{id:"picture-license",description:"This question is not meant to be placed on an OpenStreetMap-element; however it is used in the user information panel to ask which license the user wants",question:{en:"Under what license do you want to publish your pictures?",de:"Unter welcher Lizenz möchten Sie Ihre Bilder veröffentlichen?",nl:"Met welke licentie wil je je afbeeldingen toevoegen?",ca:"Sota quina llicència vols publicar les teves fotos?",pt:"Sob que licença você deseja publicar suas fotos?",cs:"Pod jakou licencí chcete své fotografie zveřejnit?"},mappings:[{if:"mapcomplete-pictures-license=",then:{en:"Pictures you take will be licensed with <b>CC0</b> and added to the public domain. This means that everyone can use your pictures for any purpose. <span class='subtle'>This is the default choice.</span>",de:"Die von Ihnen aufgenommenen Bilder werden mit <b>CC0</b> lizenziert und der Public Domain hinzugefügt. Das bedeutet, dass jeder Ihre Bilder für jeden Zweck verwenden kann. <span class='subtle'>Dies ist die Standardeinstellung.</span>",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC0</b>-licentie en dus aan het publieke domein toegevoegd worden. Dit betekent dat iedereen je afbeeldingen kan gebruiken voor elk mogelijks gebruik. <span class='subtle'>Dit is de standaard-instelling</span>",cs:"Pořízené fotografie budou licencovány pod <b>CC0</b> a přidány do veřejné domény. To znamená, že kdokoli může vaše snímky použít k jakémukoli účelu. <span class='subtle'>Toto je výchozí volba.</span>",ca:"Les imatges que feu tindran llicència <b>CC0</b> i s'afegiran al domini públic. Això vol dir que tothom pot utilitzar les vostres imatges per a qualsevol propòsit. <span class='subtle'>Aquesta és l'opció predeterminada. </span>",pt:"As fotos que você tirar serão licenciadas com <b>CC0</b> e adicionadas ao domínio público. Isso significa que todos podem usar suas fotos para qualquer finalidade. <span class='subtle'>Esta é a escolha padrão.</span>"},hideInAnswer:!0},{if:"mapcomplete-pictures-license=CC0",then:{en:"Pictures you take will be licensed with <b>CC0</b> and added to the public domain. This means that everyone can use your pictures for any purpose.",de:"Ihre aufgenommenen Bilder werden mit <b>CC0</b> lizenziert und der Public Domain hinzugefügt. Das bedeutet, dass jeder Ihre Bilder für jeden Zweck verwenden kann.",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC0</b>-licentie en dus aan het publieke domein toegevoegd worden. Dit betekent dat iedereen je afbeeldingen kan gebruiken voor elk mogelijks gebruik.",ru:"Изображения будут опубликованы под лицензией <b>CC0</b> и перейдут в общественное достояние. Это значит, что кто угодно имеет право использовать их без ограничений.",cs:"Pořízené fotografie budou licencovány pod <b>CC0</b> a přidány do veřejné domény. To znamená, že kdokoli může vaše snímky použít k jakémukoli účelu.",ca:"Les imatges que feu tindran llicència <b>CC0</b> i s'afegiran al domini públic. Això vol dir que tothom pot utilitzar les vostres imatges per a qualsevol propòsit.",es:"Las fotografías que tome tendrán una licencia con <b>CC0</b> y se agregarán al dominio público. Esto significa que todos pueden usar sus imágenes para cualquier propósito.",pt:"As fotos que você tirar serão licenciadas com <b>CC0</b> e adicionadas ao domínio público. Isso significa que todos podem usar suas fotos para qualquer finalidade.",da:"Billeder, som du har taget, vil blive udgivet under <b>CC0</b>-licensen og lagt ud i fælleseje. Det betyder, at alle kan bruge dine billeder til ethvert formål."}},{if:"mapcomplete-pictures-license=CC-BY 4.0",then:{en:"Pictures you take will be licensed with <b>CC-BY 4.0</b> which requires everyone using your picture that they have to attribute you",ca:"Les fotografies que facis es publicaran sota <b>CC-BY 4.0</b> que requereix que qualsevol que utilitzi la vostra imatge us ha de donar crèdits",de:"Die von Ihnen aufgenommenen Bilder werden mit <b>CC-BY 4.0</b> lizenziert, was bedeutet, dass jeder, der Ihr Bild verwendet, Sie als Urheber nennen muss",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC-BY 4.0</b>-licentie. Dit betekent dat iedereen je afbeelding mag gebruiken voor elke toepassing mits het vermelden van je naam",cs:"Pořízené fotografie budou licencovány pod <b>CC-BY 4.0</b>, což vyžaduje, aby vás uvedl každý, kdo použije vaší fotku",pt:"As fotos que você tirar serão licenciadas com <b>CC-BY 4.0</b>, que exige que todos que usam sua foto atribuam a você"}},{if:"mapcomplete-pictures-license=CC-BY-SA 4.0",then:{en:"Pictures you take will be licensed with <b>CC-BY-SA 4.0</b> which means that everyone using your picture must attribute you and that derivatives of your picture must be reshared with the same license.",de:"Die von Ihnen aufgenommenen Bilder werden mit <b>CC-BY-SA 4.0</b> lizenziert, was bedeutet, dass jeder, der Ihr Bild verwendet, Sie als Urheber nennen muss und dass Ableitungen Ihres Bildes mit der gleichen Lizenz weitergegeben werden müssen.",nl:"Afbeeldingen die je toevoegt zullen gepubliceerd worden met de <b>CC-BY-SA 4.0</b>-licentie. Dit betekent dat iedereen je afbeelding mag gebruiken voor elke toepassing mits het vermelden van je naam en dat afgeleide werken van je afbeelding ook ondere deze licentie moeten gepubliceerd worden.",cs:"Pořízené fotografie budou licencovány pod <b>CC-BY-SA 4.0</b>, což vyžaduje, aby vás uvedl každý, kdo použije vaší fotku a že odvozené fotky musí být dále sdíleny se stejnou licencí.",ca:"Les imatges que feu tindran una llicència amb <b>CC-BY-SA 4.0</b> el que significa que tothom que utilitzi la vostra imatge us ha d'atribuir i que els derivats de la vostra imatge s'han de tornar a compartir amb la mateixa llicència.",fr:"Les photos que vous prenez seront sous la licence <b>CC-BY-SA 4.0</b> ce qui signifie que quiconque utilisant votre photo doit vous créditer et que les modifications apportées à votre photo doivent être repartagées avec la même licence.",pt:"As fotos que você tirar serão licenciadas com <b>CC-BY-SA 4.0</b>, o que significa que todos que usarem sua foto devem atribuí-lo e que os derivados de sua foto devem ser compartilhados novamente com a mesma licença."}}]},{id:"show_tags",question:{en:"Show the raw OpenStreetMap-tags?",de:"Rohe OpenStreetMap-Tags anzeigen?",fr:"Afficher les attributs OpenStreetMap bruts ?",ca:"Mostra les etiquetes d'OpenStreetMap en brut?",cs:"Zobrazit nezpracované/raw tagy OpenStreetMap?",nl:"Moeten de data-attributen getoond worden?"},questionHint:{en:"<b>Tags</b> are attributes that every element has. This is the technical data that is stored in the database. You don't need this information to edit with MapComplete, but advanced users might want to use this as reference.",de:"<b>Tags</b> sind die Eigenschaften, die jedes Objekt hat. Das sind die technischen Daten, die in der Datenbank gespeichert werden. Du brauchst diese Informationen nicht, um mit MapComplete Änderungen zu machen, aber fortgeschrittenen Nutzer*innen kann es als Referenz dienen.",ca:"Les <b>etiquetes</b> són atributs que té cada element. Aquestes són les dades tècniques que s'emmagatzemen a la base de dades. No necessiteu aquesta informació per editar amb MapComplete, però és possible que els usuaris avançats la vulguin fer servir com a referència.",cs:"<b>Tagy</b> jsou atributy, které má každý element. Jedná se o technické údaje, které jsou uloženy v databázi. K úpravám pomocí MapComplete tyto informace nepotřebujete, ale pokročilí uživatelé by je mohli chtít použít jako referenci.",nl:"<b>Data-attributen</b> zijn stukjes data die elk element in OpenStreetMap heeft. Dit is technische data die in de databank komt. Je hoeft deze informatie niet te kennen om aanpassingen te maken met MapComplete, maar geavanceerde gebruikers kunnen dit als referentie gebruiken."},mappings:[{if:"mapcomplete-show_tags=no",then:{en:"Never show the tags.",de:"Tags nie anzeigen.",ca:"No mostris mai les etiquetes.",cs:"Nikdy nezobrazovat tagy.",nl:"Verberg data-attributen"}},{if:"mapcomplete-show_tags=",then:{en:"Show the tags that will be applied once I have made {__userjourney_tagsVisibleAt} changesets",de:"Tags anzeigen sobald ich {__userjourney_tagsVisibleAt} Changesets erstellt habe",ca:"Mostra les etiquetes que s'aplicaran un cop hagi fet {__userjourney_tagsVisibleAt} conjunts de canvis",cs:"Zobrazit tagy, které budou použity, jakmile provedu {__userjourney_tagsVisibleAt} sady změn",nl:"Toon data-attributen bij wijzigingen indien je meer dan {__userjourney_tagsVisibleAt} changesets hebt gemaakt"}},{if:"mapcomplete-show_tags=yes",then:{en:"Show the tags that will be applied when making a change",de:"Tags anzeigen, die bei der Änderung hinzugefügt werden",ca:"Mostra les etiquetes que s'aplicaran en fer un canvi",cs:"Zobrazení tagů, které budou použity při provádění změny",nl:"Toon de data-attributen die toegepast zullen worden bij wijzigingen"}},{if:"mapcomplete-show_tags=full",then:{en:"Show the tags that will be applied when making a change and show the tags table on every feature",de:"Tags anzeigen, die bei der Änderung hinzugefügt werden, und Tag-Tabelle bei jedem Objekt anzeigen",ca:"Mostra les etiquetes que s'aplicaran a l'hora de fer un canvi i mostra la taula d'etiquetes a cada element",cs:"Zobrazení tagů, které se použijí při provádění změny, a zobrazení tabulky tagů u každé funkce",nl:"Toon de data-attributen die toegepast zullen worden bij wijzigingen en toon een tabel met alle data-attributen bij elk object."}}]},{id:"all-questions-at-once",question:{en:"Should questions for unknown data fields appear one-by-one or together?",de:"Sollen Fragen für unbekannte Datenfelder einzeln oder zusammen angezeigt werden?",fr:"Est-ce que les questions pour les champs sans donnée doivent apparaître une à une ou toutes ensembles ?",pt:"As perguntas para campos de dados desconhecidos devem aparecer uma a uma ou juntas?",ca:"Les preguntes amb camps de dades desconeguts haurien d'aparèixer una per una o juntes?",nl:"Moeten onbeantwoorde vragen om beurt of allemaal samen getoond worden?",cs:"Mají se otázky pro neznámá datová pole zobrazovat jednotlivě, nebo společně?"},mappings:[{if:"mapcomplete-show-all-questions=true",then:{en:"Show all questions in the infobox together",de:"Alle Fragen in der Infobox zusammen anzeigen",ca:"Mostra totes les preguntes al quadre d'informació",fr:"Afficher toutes les question en même temps dans l'infobox",pt:"Mostrar todas as perguntas na caixa de informações juntas",nl:"Toon alle onbeantwoorde vragen",cs:"Zobrazit všechny otázky v infoboxu dohromady"}},{if:"mapcomplete-show-all-questions=false",then:{en:"Show questions one-by-one",de:"Fragen der Reihe nach anzeigen",ca:"Mostra les preguntes una per una",fr:"Afficher les questions une à une",pt:"Mostrar perguntas uma a uma",nl:"Toon de vragen één per één",cs:"Zobrazit otázky jednu po druhé"}}]},{id:"show_crosshair",question:{en:"Should a crosshair be shown in the center of the display?",cs:"Měl by se uprostřed displeje zobrazovat kříž?",de:"Soll ein Fadenkreuz in der Mitte des Bildschirms angezeigt werden?",nl:"Moet er een kruisje getoond worden in het centrum van je display?"},questionHint:{en:"This can help to accurately position a new element",cs:"To může pomoci přesněji umístit nový prvek",de:"Dies kann dazu beitragen, ein neues Element genau zu positionieren",nl:"Dit kan helpen om nieuwe elementen accuraat te plaatsen",ca:"Això pot ajudar a posicionar amb precisió un nou element"},mappings:[{if:"mapcomplete-show_crosshair=yes",then:"Show a crosshair in the center of the map when zoomed in above level 17"},{if:"mapcomplete-show_crosshair=no",then:"Do not show a crosshair in the center of the map"},{if:"mapcomplete-show_crosshair=",then:"Do not show a crosshair in the center of the map",hideInAnswer:!0},{if:"mapcomplete-show_crosshair=always",then:"Always show a crosshair in the center of the map"}]},{id:"fixate-north",question:{en:"Should north always be up?",de:"Soll Norden immer oben sein?",ca:"El nord hauria d'estar sempre amunt?",cs:"Měl by být sever vždy nahoře?",nl:"Moet het noorden altijd naar boven getoond worden?"},mappings:[{if:"mapcomplete-fixate-north=",then:{en:"Allow to rotate the map",de:"Drehen der Karte zulassen",ca:"Permet girar el mapa",fr:"Autoriser la rotation de la carte",da:"Tillad rotation af kortet",cs:"Umožnit otáčení mapy",nl:"Sta kaartrotatie toe"}},{if:"mapcomplete-fixate-north=yes",then:{en:"Always keep north pointing up",de:"Norden immer nach oben zeigen lassen",fr:"Toujours garder le nord en haut",ca:"Mantingueu sempre el nord apuntant cap amunt",cs:"Sever vždy směřujte nahoru",nl:"Hou het noorden altijd naar boven"}}]},{id:"mangrove-keys",render:{ca:"{link(Baixeu la clau privada del vostre compte de Mangrove,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE,)}Qualsevol persona que tingui aquest fitxer pot fer ressenyes amb la vostra identitat",cs:"{link(Stáhnout soukromý klíč pro Mangrove účet,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE,)}Kdokoli, kdo má tento soubor, může provádět recenze s vaší identitou",da:"{link(Hent den private nøgle til din Mangrove-konto,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE,)}Enhver, der har denne fil, kan lave ændringer med din identitet",de:"{link(Laden Sie den privaten Schlüssel für Ihr Mangrove-Konto herunter,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE,)}Jeder, der diese Datei besitzt, kann mit Ihrer Identität Rezensionen vornehmen",en:"{link(Download the private key for your Mangrove Account,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE,)}Anyone possessing this file can make reviews with your identity",nl:"{link(Download de private sleutel van je Mangrove-account,data:application/json&COMMA&LBRACEmangroveidentity&RBRACE,,mangrove_private_key_&LBRACE_name&RBRACE,)}Iedereen die dit bestand bezit, kan met jouw identiteit wijzigingen maken"}},{id:"translations-title",label:["translations"],render:"<h3>Translating MapComplete</h3>"},{label:["translations"],id:"translation-mode",question:{en:"Do you want to help translating MapComplete?",de:"Möchten Sie bei der Übersetzung von MapComplete helfen?",cs:"Chcete pomoci s překladem MapComplete?",ca:"Vols ajudar a traduir MapComplete?",fr:"Voulez-vous aider à traduire MapComplete ?",pt:"Quer ajudar na tradução do MapComplete?",nl:"Wil je MapComplete helpen vertalen?"},mappings:[{if:"mapcomplete-translation-mode=false",icon:"./assets/layers/usersettings/translate_disabled.svg",then:{en:"Don't show a button to quickly change translations",de:"Keine Schaltfläche zum schnellen Wechseln von Übersetzungen anzeigen",ca:"No mostris cap botó per a canviar ràpidament les traduccions",fr:"Ne pas afficher de bouton pour modifier les traductions rapidement",pt:"Não mostrar um botão para alterar as traduções rapidamente",cs:"Nezobrazovat tlačítko pro rychlou změnu překladů",nl:"Verberg de knoppen om een vertaling in te voeren."}},{if:"mapcomplete-translation-mode=true",icon:"./assets/svg/translate.svg",then:{en:"Show a button to quickly open translations when using MapComplete on a big screen",de:"Schaltfläche anzeigen zum schnellen Öffnen von Übersetzungen beim Verwenden von MapComplete auf einem großen Bildschirm",fr:"Afficher un bouton pour ouvrir rapidement les traductions lorsque vous utilisez MapComplete sur un grand écran",ca:"Mostra un botó per a obrir ràpidament les traduccions quan utilitzes MapComplet en una pantalla gran",pt:"Mostrar um botão para abrir traduções rapidamente ao usar o MapComplete em uma tela grande",da:"Vis en knap for hurtigt at åbne oversættelser, når du bruger MapComplete på en stor skærm",cs:"Zobrazit tlačítko pro rychlé otevření překladů při použití MapComplete na velké obrazovce",nl:"Toon een knopje om snel vertalingen te maken indien MapComplete op een groot scherm is geopend"}},{if:"mapcomplete-translation-mode=mobile",icon:"./assets/layers/usersettings/translate_mobile.svg",then:{en:"Always show the translation buttons, including on mobile",de:"Übersetzungsschaltflächen immer anzeigen, auch auf dem Handy",ca:"Mostra sempre els botons de traducció, fins i tot al mòbil",fr:"Toujours afficher les boutons de traduction, même sur mobile",pt:"Mostrar sempre os botões de tradução, inclusive no celular",cs:"Vždy zobrazovat tlačítka překladu, a to i na mobilu",nl:"Toon een knopje om snel vertalingen te maken op mobiel en op grote schermen"}}]},{label:["translations"],id:"translation-help",mappings:[{if:{or:["mapcomplete-translation-mode=yes","mapcomplete-translation-mode=true","mapcomplete-translation-mode=mobile"]},then:{ca:"Fes clic a la icona 'tradueix' al costat d'una cadena per introduir o actualitzar un fragment de text. Necessites un compte de Weblate per a això. Crea'n un amb el teu nom d'usuari OSM per desbloquejar automàticament el mode de traducció.",da:"Klik på 'oversæt'-ikonet ved siden af en streng for at indtaste eller opdatere et stykke tekst. Du skal have en Weblate-konto for at kunne gøre dette. Opret en med dit OSM-brugernavn for automatisk at låse oversættelsestilstanden op.",de:"Klicken Sie auf das Übersetzungssymbol neben einer Zeichenfolge, um den Übersetzungstext einzugeben oder zu aktualisieren. Dazu benötigen Sie ein Weblate-Konto. Erstellen Sie eines mit Ihrem OSM-Benutzernamen, um den Übersetzungsmodus automatisch freizuschalten.",en:"Click the 'translate'-icon next to a string to enter or update a piece of text. You need a Weblate-account for this. Create one with your OSM-username to automatically unlock translation mode.",es:"Haz clic en el icono 'traducir' al lado de una cadena para introducir o actualizar un texto. Necesitas una cuenta de Weblate para esto. Crea una con tu usuario de OSM para desbloquear el modo de traducción automáticamente.",fr:`Cliquez sur l'icône "traduire" à côté d'une chaîne de caractères pour saisir ou mettre à jour la chaine de texte. Vous aurez besoin d'un compte Weblate pour cela. Créez-en un avec votre nom d'utilisateur OSM pour déverrouiller automatiquement le mode traduction.`,nl:"Klik op het 'vertaal'-icoontje die naast een stukje tekst staat om deze tekst te vertalen of aan te passen. Hiervoor heb je een (gratis) Weblate-account nodig. Indien je jouw account maakt met dezelfde naam als je OSM-gebruikersnaam, dan zullen de vertaalknoppen automatisch verschijnen.",zh_Hant:"點字串旁邊的 'translate'-icon 來輸入或是更新一段文字。你需要 Weblate 帳號。用你 OSM 帳號名稱來創建帳號，並且自動解鎖翻譯模式。",cs:"Chcete-li zadat nebo aktualizovat část textu, klikněte na ikonu „přeložit“ vedle řetězce. K tomu potřebujete účet Weblate. Vytvořte si jej s vaším uživatelským jménem OSM, abyste automaticky odemkli režim překladu."},icon:"translate"}]},{label:["translations"],id:"translation-completeness",render:{ca:"Les traduccions de {_theme} en {_language} tenen un {_translation_percentage}%: {_translation_translated_count} cadenes de {_translation_total} estan traduïdes",da:"Oversættelser for {_theme} i {_language} er på {_translation_percentage}%: {_translation_translated_count} strenge ud af {_translation_total} er oversat",de:"Die Übersetzung für {_theme} in {_language} ist zu {_translation_percentage}% vollständig: {_translation_translated_count} Zeichenfolgen von {_translation_total} sind übersetzt",en:"Translations for {_theme} in {_language} are at {_translation_percentage}%: {_translation_translated_count} strings out of {_translation_total} are translated",es:"Las traducciones para {_theme} en {_language} están al {_translation_percentage}%: {_translation_translated_count} cadenas de {_translation_total} están traducidas",id:"Terjemahan untuk {_theme} dalam {_language} masih {_translation_percentage}%: {_translation_translated_count} string dari {_translation_total} diterjemahkan",nb_NO:"Oversettelsen for {_theme} i {_language} har {_translation_percentage}% dekning: {_translation_translated_count} strenger av {_translation_total} har blitt oversatt",nl:"Vertalingen voor {_theme} in {_language} zijn momenteel op {_translation_percentage}%: van {_translation_total} teksten zijn er reeds {_translation_translated_count} vertaald",zh_Hant:"{_theme} 的 {_language} 翻譯目前是 {_translation_percentage}%：{_translation_total} 中的 {_translation_translated_count} 已經翻譯了",fr:"Les traductions pour {_theme} en {_language} sont à {_translation_percentage} % : {_translation_translated_count} chaînes traduites sur {_translation_total}",cs:"Překlady pro {_theme} v {_language} jsou na úrovni {_translation_percentage}%: {_translation_translated_count} z {_translation_total} je přeloženo"},condition:{or:["mapcomplete-translation-mode=yes","mapcomplete-translation-mode=true","mapcomplete-translation-mode=mobile"]},mappings:[{if:"_translation_percentage=100",icon:"confirm",then:{en:"Completely translated",nl:"Volledig vertaald",de:"Vollständig übersetzt",ca:"Completament traduït",pt:"Traduzido completamente",cs:"Kompletně přeloženo"}}]},{id:"translation-links",label:["translations"],condition:{and:["_translation_links~*",{or:["mapcomplete-translation-mode=true","mapcomplete-translation-mode=mobile"]}]},render:{"*":"{multi(_translation_links,<a href='&LBRACElink&RBRACE' target='_blank' rel='noopener'>Translate entries of &LBRACEid&RBRACE</a>,)}"}},{id:"verified-mastodon",mappings:[{if:"_mastodon_link~*",then:{en:"A link to your Mastodon-profile has been been found: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",de:"Es wurde ein Link zu deinem Mastodon-Profil gefunden: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",nl:"Een link naar je Mastodon-profiel werd gevonden: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",fr:"Un lien vers votre profil Mastodon a été trouvé : <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",ca:"S'ha trobat un enllaç al vostre perfil de Mastodon: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>",cs:"Byl nalezen odkaz na váš profil Mastodon: <a href='{_mastodon_link}' target='_blank' rel='noopener'>{_mastodon_link}</a>"},icon:"mastodon"},{if:"_mastodon_candidate~*",then:{en:`We found a link to what looks to be a mastodon account, but it is unverified. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Edit your profile description</a> and place the following there: <span class='code'>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,de:`Wir haben einen Link gefunden, der aussieht wie ein Mastodon-Konto, aber nicht verifiziert ist. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Bearbeiten Sie Ihre Profilbeschreibung</a> und fügen Sie dort Folgendes ein: <span class='code'>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,nl:`Je profielbeschrijving bevat een link die vermoedelijk naar je Mastodon gaat, maar deze link is niet verifieerdbaar voor Mastodon.<a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Pas je profielbeschrijving aan</a> en plaats er de volgende code: <span class='code'>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,ca:`Hem trobat un enllaç al que sembla ser un compte de mastodon, però no està verificat. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Editeu la descripció del vostre perfil</a> i col·loqueu-hi el següent: <span class='code '>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`,cs:`Našli jsme odkaz na to, co vypadá jako účet mastodon, ale je neověřený. <a href='https://www.openstreetmap.org/profile/edit' target='_blank' rel='noopener'>Upravte popis svého profilu</a> a umístěte tam následující: <span class='code '>&lta href="{_mastodon_candidate}" rel="me"&gtMastodon&lt/a&gt`},icon:"invalid"}]},{id:"cscount-thanks",mappings:[{if:"_csCount>0",then:{en:"You have made changes on {_csCount} different occasions! That is awesome!",de:"Sie haben bei {_csCount} verschiedenen Gelegenheiten Änderungen vorgenommen! Das ist großartig!",ca:"Has fet {_csCount} en diferents ocasions! Això és sorprenent!",fr:"Vous avez fait {_csCount} modifications ! C'est génial !",pt:"Você fez alterações em {_csCount} ocasiões diferentes! Isso é incrível!",nl:"Je hebt {_csCount} verschillende keren bijgedragen! Dat is indrukwekkend!",da:"Du har lavet ændringer ved {_csCount} forskellige begivenheder! Det er fantastisk!",es:"Has hecho cambios en {_csCount} ocasiones diferentes. ¡Es alucinante!",cs:"Změny jste provedli při {_csCount} různých příležitostech! To je úžasné!"},icon:"party"}]},{id:"translation-thanks",mappings:[{if:"_translation_contributions>0",then:{en:"You have contributed to translating MapComplete! That's awesome!",ca:"Has contribuït a traduir MapComplete! Això és fantàstic!",de:"Sie haben dazu beigetragen, MapComplete zu übersetzen! Das ist großartig!",nl:"Je hebt MapComplete helpen vertalen! Dat is fantastisch! Bedankt hiervoor!",cs:"Přispěli jste k překladu MapComplete! To je úžasné!",pt:"Você contribuiu para a tradução do MapComplete! Fantástico!"},icon:"party"}]},{id:"contributor-thanks",mappings:[{if:"_code_contributions>0",then:{en:"You have contributed code to MapComplete with {_code_contributions} commits! That's awesome!",de:"Sie haben Code zu MapComplete mit {_code_contributions} Commits beigetragen! Das ist großartig!",nl:"Je hebt mee geprogrammeerd aan MapComplete met {_code_contributions} commits! Das supercool van je! Bedankt hiervoor!",ca:"Heu aportat codi a MapComplete amb {_code_contributions} commits! Això és increïble!",cs:"Přispěli jste do MapComplete kódem s {_code_contributions} revizemi! To je úžasné!"},icon:"party",hideInAnswer:!0}]},{id:"show_debug",question:{en:"Show user settings debug info?",de:"Debug-Informationen zu den Benutzereinstellungen anzeigen?",cs:"Zobrazit informace o ladění v nastavení?",ca:"Vols mostrar la informació de depuració de la configuració de l'usuari?",pt:"Mostrar informações de depuração das configurações do usuário?",nl:"Moet debug-informatie getoond worden?"},mappings:[{if:"mapcomplete-show_debug=yes",icon:"./assets/svg/bug.svg",then:{en:"Show debug info",de:"Debug-Informationen anzeigen",cs:"Zobrazit informace o ladění",ca:"Mostra la informació de depuració",pt:"Mostrar informações de depuração",nl:"Toon debug-informatie"}},{if:"mapcomplete-show_debug=no",then:{en:"Don't show debug info",de:"Keine Debug-Informationen anzeigen",cs:"Nezobrazovat informace o ladění",ca:"No mostris informació de depuració",pt:"Não mostrar informações de depuração",nl:"Verberg debug-informatie"}},{if:"mapcomplete-show_debug=",then:{en:"Don't show debug info",de:"Keine Debug-Informationen anzeigen",cs:"Nezobrazovat informace o ladění",pt:"Não mostrar informações de depuração",da:"Vis ikke debug-informationer",ca:"No mostris informació de depuració",nl:"Verberg debug-informatie"},hideInAnswer:!0}]},{id:"debug-gps",condition:"mapcomplete-show_debug=yes",render:"{gps_all_tags()}"},{id:"debug",condition:"mapcomplete-show_debug=yes",render:"{all_tags()}"}],wS=[{id:"wikipedialink",labels:["defaults","in_favourite"],render:"<a href='https://wikipedia.org/wiki/{wikipedia}' target='_blank' rel='noopener'><img src='./assets/svg/wikipedia.svg' textmode='📖' alt='Wikipedia'/></a>",condition:{or:["wikipedia~*","wikidata~*"]},mappings:[{"#":"ignore-image-in-then",if:"wikipedia=",then:"<a class='h-8' href='https://www.wikidata.org/wiki/{wikidata}' target='_blank' rel='noopener'><img src='./assets/svg/wikidata.svg' alt='Wikidata'/></a>"}]},{id:"open_until",labels:["defaults","in_favourite"],"#":"Titleicon showing e.g. 'open until 17:00'",icon:{class:"w-20 mx-1 flex items-center"},render:"{opening_hours_state()}",condition:{or:["opening_hours~*",{or:[{and:["seasonal~.*winter.*","_now:date~....-(12|01|02)-.."]},{and:["seasonal~.*spring.*","_now:date~....-(03|04|05)-.."]},{and:["seasonal~.*summer.*","_now:date~....-(06|07|08)-.."]},{and:["seasonal~.*autumn.*","_now:date~....-(09|10|11)-.."]}]}]}},{id:"phonelink",labels:["defaults","in_favourite"],render:{de:"{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEphone&RBRACE,,,Telefon)}",en:"{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEphone&RBRACE,,,phone)}",nl:"{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEphone&RBRACE,,,Telefoneer)}",_context:"layers:icons.tagRenderings.phonelink.render"},mappings:[{"#":"ignore-image-in-then",if:"contact:phone~*",then:{de:"{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEcontact:phone&RBRACE,,,Telefon)}",en:"{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEcontact:phone&RBRACE,,,phone)}",nl:"{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEcontact:phone&RBRACE,,,Telefoneer)}",_context:"layers:icons.tagRenderings.phonelink.mappings.0.then"}}],condition:{or:["phone~*","contact:phone~*"]}},{id:"emaillink",labels:["defaults","in_favourite"],render:"<a href='mailto:{email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>",mappings:[{"#":"ignore-image-in-then",if:"contact:email~*",then:"<a href='mailto:{contact:email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>"}],condition:{or:["email~*","contact:email~*"]}},{id:"websitelink",labels:["defaults","in_favourite"],render:"<a href='{website}' target='_blank' rel='noopener'><img textmode='🌐' alt='website' src='./assets/layers/icons/website.svg'/></a>",condition:"website~*"},{id:"smokingicon",labels:["defaults","in_favourite"],mappings:[{"#":"ignore-image-in-then",if:"smoking=no",then:"<img textmode='🚭️' alt='no smoking' src='./assets/layers/questions/no_smoking.svg'/>"},{"#":"ignore-image-in-then",if:"smoking=yes",then:"<img textmode='🚬️' alt='smoking allowed' src='./assets/layers/questions/smoking.svg'/>"}]},{id:"sharelink",labels:["defaults"],render:"{share_link()}",metacondition:"_supports_sharing=yes"},{id:"favourite_title_icon",labels:["defaults"],render:{"*":"{favourite_icon()}"},metacondition:"_loggedIn=true"},{id:"osmlink",labels:["defaults"],render:{de:"{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,https://openstreetmap.org/&LBRACEid&RBRACE,,,Auf openstreetmap.org öffnen)}",en:"{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,https://openstreetmap.org/&LBRACEid&RBRACE,,,Open on openstreetmap.org)}",nl:"{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,https://openstreetmap.org/&LBRACEid&RBRACE,,,Bekijk op openstreetmap.org)}",_context:"layers:icons.tagRenderings.osmlink.render"},mappings:[{if:"id~.*/-.*",then:""},{"#":"ignore-image-in-then",if:"_backend~*",then:{de:"{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,&LBRACE_backend&RBRACE/&LBRACEid&RBRACE,,,Auf openstreetmap.org öffnen)}",en:"{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,&LBRACE_backend&RBRACE/&LBRACEid&RBRACE,,,Open on openstreetmap.org)}",nl:"{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,&LBRACE_backend&RBRACE/&LBRACEid&RBRACE,,,Bekijk op openstreetmap.org)}",_context:"layers:icons.tagRenderings.osmlink.mappings.1.then"}}],condition:"id~(node|way|relation)/[0-9]*"},{id:"dogicon",labels:["defaults","in_favourite"],mappings:[{if:"dog=no","#":"ignore-image-in-then",then:"<img textmode='🐕 ⃠' alt='no_dogs' src='./assets/layers/questions/no_dogs.svg'>"},{if:"dog=leashed","#":"ignore-image-in-then",then:"<img textmode='🐕' alt='dogs are allowed but leashed' src='./assets/layers/questions/dogs_leashed.svg'>"},{if:{or:["dog=yes","dog=unleashed"]},"#":"ignore-image-in-then",then:"<img textmode='🐕' alt='dogs are allowed' src='./assets/layers/questions/dogs_allowed.svg'>"}]},{id:"direction",labels:["defaults","in_favourite"],render:"{direction_indicator()}"},{id:"rating",icon:{class:"w-20 mx-1 flex items-center"},render:"{rating()}"}],ES=[],xS={id:dS,description:pS,source:gS,calculatedTags:mS,title:vS,pointRendering:yS,lineRendering:_S,tagRenderings:bS,titleIcons:wS,_layerIcon:ES};class uv{metaTaggging_for_usersettings(e){Mi.AddLazyProperty(e.properties,"_mastodon_candidate_md",()=>{var t;return(t=e.properties._description.match(/\[[^\]]*\]\((.*(mastodon|en.osm.town).*)\).*/))==null?void 0:t.at(1)}),Mi.AddLazyProperty(e.properties,"_d",()=>{var t,n;return((n=(t=e.properties._description)==null?void 0:t.replace(/&lt;/g,"<"))==null?void 0:n.replace(/&gt;/g,">"))??""}),Mi.AddLazyProperty(e.properties,"_mastodon_candidate_a",()=>(t=>{var i;const n=document.createElement("div");return n.innerHTML=t.properties._d,(i=Array.from(n.getElementsByTagName("a")).filter(o=>o.href.match(/mastodon|en.osm.town/)!==null)[0])==null?void 0:i.href})(e)),Mi.AddLazyProperty(e.properties,"_mastodon_link",()=>(t=>{var i;const n=document.createElement("div");return n.innerHTML=t.properties._d,(i=Array.from(n.getElementsByTagName("a")).filter(o=>{var a;return((a=o.getAttribute("rel"))==null?void 0:a.indexOf("me"))>=0})[0])==null?void 0:i.href})(e)),Mi.AddLazyProperty(e.properties,"_mastodon_candidate",()=>e.properties._mastodon_candidate_md??e.properties._mastodon_candidate_a),e.properties.__current_backgroun="initial_value"}}_e(uv,"themeName","usersettings");var Jp,Xp;const Mo=class Mo{constructor(e,t,n,i,o){_e(this,"osmConnection");_e(this,"mangroveIdentity");_e(this,"installedUserThemes");_e(this,"showAllQuestionsAtOnce");_e(this,"showTags");_e(this,"showCrosshair");_e(this,"fixateNorth");_e(this,"a11y");_e(this,"homeLocation");_e(this,"language");_e(this,"preferredBackgroundLayer");_e(this,"imageLicense");_e(this,"gpsLocationHistoryRetentionTime",new aa(7*24*60*60,"gps_location_retention"));_e(this,"preferencesAsTags");_e(this,"_mapProperties");this.osmConnection=e,this._mapProperties=o,this.osmConnection.GetPreference("translation-mode","false").addCallbackAndRunD(s=>{s=s.toLowerCase(),s==="true"||s==="yes"?(eo.showLinkOnMobile.setData(!1),eo.showLinkToWeblate.setData(!0)):s==="false"||s==="no"?eo.showLinkToWeblate.setData(!1):s==="mobile"?(eo.showLinkOnMobile.setData(!0),eo.showLinkToWeblate.setData(!0)):(eo.showLinkOnMobile.setData(!1),eo.showLinkToWeblate.setData(!1))}),this.showAllQuestionsAtOnce=aa.asBoolean(this.osmConnection.GetPreference("show-all-questions","false",{documentation:"Either 'true' or 'false'. If set, all questions will be shown all at once"})),this.language=this.osmConnection.GetPreference("language"),this.showTags=this.osmConnection.GetPreference("show_tags"),this.showCrosshair=this.osmConnection.GetPreference("show_crosshair"),this.fixateNorth=this.osmConnection.GetPreference("fixate-north"),this.a11y=this.osmConnection.GetPreference("a11y"),this.mangroveIdentity=new cf(this.osmConnection.GetLongPreference("identity","mangrove")),this.preferredBackgroundLayer=this.osmConnection.GetPreference("preferred-background-layer",void 0,{documentation:"The ID of a layer or layer category that MapComplete uses by default"}),this.imageLicense=this.osmConnection.GetPreference("pictures-license","CC0",{documentation:"The license under which new images are uploaded"}),this.installedUserThemes=this.InitInstalledUserThemes(),this.homeLocation=this.initHomeLocation(),this.preferencesAsTags=this.initAmendedPrefs(n,i),this.syncLanguage()}syncLanguage(){_d.wasInitialized("language")||this.language.syncWith(eo.language)}static initUserSettingsState(){try{return new yv(xS,"userinformationpanel")}catch{return}}GetUnofficialTheme(e){console.log("GETTING UNOFFICIAL THEME");const t=this.osmConnection.GetLongPreference("unofficial-theme-"+e),n=t.data;if(n===void 0||n==="undefined"||n===""){t.setData(null);return}try{const i=JSON.parse(n);return i.isOfficial=!1,i}catch{console.warn("Removing theme "+e+" as it could not be parsed from the preferences; the content is:",n),t.setData(null);return}}markLayoutAsVisited(e){if(!e){console.error("Trying to mark a layout as visited, but ",e," got passed");return}e.hideFromOverview&&this.osmConnection.isLoggedIn.addCallbackAndRunD(t=>{if(t)return this.osmConnection.GetPreference("hidden-theme-"+(e==null?void 0:e.id)+"-enabled").setData("true"),!0}),e.official||this.osmConnection.GetLongPreference("unofficial-theme-"+e.id).setData(JSON.stringify({id:e.id,icon:e.icon,title:e.title.translations,shortDescription:e.shortDescription.translations,definition:e.definition}))}InitInstalledUserThemes(){const e="mapcomplete-unofficial-theme-",t="-combined-length";return this.osmConnection.preferencesHandler.preferences.map(n=>Object.keys(n).filter(i=>i.startsWith(e)&&i.endsWith(t)).map(i=>i.substring(e.length,i.length-t.length)))}initHomeLocation(){const e=[],t=vv.ListStabilized(this.osmConnection.userDetails.map(n=>{if(n===void 0)return;const i=n.home;if(i!==void 0)return[i.lon,i.lat]})).map(n=>n===void 0?e:[{type:"Feature",properties:{id:"home","user:home":"yes",_lon:n[0],_lat:n[1]},geometry:{type:"Point",coordinates:n}}]);return new nd(t)}initAmendedPrefs(e,t){var s,u;const n=new aa({_theme:e==null?void 0:e.id,"_theme:backgroundLayer":e==null?void 0:e.defaultBackgroundId,_backend:this.osmConnection.Backend(),_applicationOpened:new Date().toISOString(),_supports_sharing:typeof window>"u"?"no":window.navigator.share?"yes":"no"});for(const c in yd.userJourney)n.data["__userjourney_"+c]=yd.userJourney[c];for(const c of _d.initializedParameters())n.data["__url_parameter_initialized:"+c]="yes";const i=this.osmConnection;i.preferencesHandler.preferences.addCallback(c=>{for(const f in c){const h=c[f];if(!(h==="undefined"||!h))if(f.endsWith("-combined-length")){const p=Number(h),b=f.substring(0,f.length-6);let _="";for(let S=0;S<p;S++)_+=c[b+S];n.data[b.substring(0,b.length-10)]=_}else n.data[f]=c[f]}n.ping()});const o=i.GetPreference("translation-mode");eo.language.mapD(c=>{n.data._language=c;const f=o.data;if((f==="true"||f==="mobile")&&e!==void 0){const h=Mo.usersettingsConfig,p=e.missingTranslations(h),b=p.total,_=p.untranslated.get(c)??[],S=_.some(E=>E.startsWith("themes:")),R=Mi.Dedup(_.filter(E=>E.startsWith("layers:")).map(E=>E.slice(7).split(".")[0])),D=Mi.NoNull([S?{id:"theme:"+e.id,link:bd.hrefToWeblateZen(c,"themes",e.id)}:void 0,...R.map(E=>({id:"layer:"+E,link:bd.hrefToWeblateZen(c,"layers",E)}))]),v=_.length;n.data._translation_total=""+b,n.data._translation_translated_count=""+(b-v),n.data._translation_percentage=""+Math.floor(100*(b-v)/b),n.data._translation_links=JSON.stringify(D)}n.ping()},[o]);const a=new uv;i.userDetails.addCallback(c=>{for(const b in c)n.data["_"+b]=""+c[b];a.metaTaggging_for_usersettings({properties:n.data});const f=c.name.toLowerCase().replace(/\s+/g,""),h=fS.contributors.find(b=>b.contributor.toLowerCase().replace(/\s+/g,"")===f);h&&(n.data._translation_contributions=""+h.commits);const p=hS.contributors.find(b=>b.contributor.toLowerCase().replace(/\s+/g,"")===f);p&&(n.data._code_contributions=""+p.commits),n.ping()}),n.addCallbackD(c=>{for(const f in c)f.startsWith("_")||f==="mapcomplete-language"||(c[f+"-combined-0"]?this.osmConnection.GetLongPreference(f,"").setData(c[f]):this.osmConnection.GetPreference(f,void 0,{prefix:""}).setData(c[f]))});for(const c in t)t[c].addCallbackAndRun&&t[c].addCallbackAndRun(f=>{n.data["__"+c]!==f&&(n.data["__"+c]=""+f,n.ping())});return(u=(s=this._mapProperties)==null?void 0:s.rasterLayer)==null||u.addCallbackAndRun(c=>{var f;n.data.__current_background=(f=c==null?void 0:c.properties)==null?void 0:f.id,n.ping()}),n}};_e(Mo,"usersettingsConfig",Mo.initUserSettingsState()),_e(Mo,"availableUserSettingsIds",((Xp=(Jp=Mo.usersettingsConfig)==null?void 0:Jp.tagRenderings)==null?void 0:Xp.map(e=>e.id))??[]),_e(Mo,"SHOW_TAGS_VALUES",["always","yes","full"]);let Up=Mo;const SS=r=>({}),qp=r=>({}),CS=r=>({}),Hp=r=>({}),IS=r=>({}),Gp=r=>({});function Vp(r){let e,t,n,i;const o=[PS,NS,MS,AS],a=[];function s(u,c){return!u[0]&&u[2]==="loading"?0:u[2]==="error"?1:u[2]==="logged-in"?2:u[2]==="not-attempted"?3:-1}return~(e=s(r))&&(t=a[e]=o[e](r)),{c(){t&&t.c(),n=_c()},m(u,c){~e&&a[e].m(u,c),Yo(u,n,c),i=!0},p(u,c){let f=e;e=s(u),e===f?~e&&a[e].p(u,c):(t&&(bc(),Qt(a[f],1,1,()=>{a[f]=null}),wc()),~e?(t=a[e],t?t.p(u,c):(t=a[e]=o[e](u),t.c()),mt(t,1),t.m(n.parentNode,n)):t=null)},i(u){i||(mt(t),i=!0)},o(u){Qt(t),i=!1},d(u){~e&&a[e].d(u),u&&jo(n)}}}function AS(r){let e;const t=r[10]["not-logged-in"],n=fa(t,r,r[9],qp);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&512)&&la(n,t,i,i[9],e?da(t,i[9],o,SS):ha(i[9]),qp)},i(i){e||(mt(n,i),e=!0)},o(i){Qt(n,i),e=!1},d(i){n&&n.d(i)}}}function MS(r){let e;const t=r[10].default,n=fa(t,r,r[9],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&512)&&la(n,t,i,i[9],e?da(t,i[9],o,null):ha(i[9]),null)},i(i){e||(mt(n,i),e=!0)},o(i){Qt(n,i),e=!1},d(i){n&&n.d(i)}}}function NS(r){let e;const t=r[10].error,n=fa(t,r,r[9],Hp),i=n||LS(r);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){n?n.p&&(!e||a&512)&&la(n,t,o,o[9],e?da(t,o[9],a,CS):ha(o[9]),Hp):i&&i.p&&(!e||a&8)&&i.p(o,e?a:-1)},i(o){e||(mt(i,o),e=!0)},o(o){Qt(i,o),e=!1},d(o){i&&i.d(o)}}}function PS(r){let e;const t=r[10].loading,n=fa(t,r,r[9],Gp),i=n||RS();return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){n&&n.p&&(!e||a&512)&&la(n,t,o,o[9],e?da(t,o[9],a,IS):ha(o[9]),Gp)},i(o){e||(mt(i,o),e=!0)},o(o){Qt(i,o),e=!1},d(o){i&&i.d(o)}}}function LS(r){let e,t,n,i,o;return t=new _v({props:{class:"m-2 h-8 w-8 shrink-0"}}),i=new wv({props:{t:r[6][r[3]]}}),{c(){e=jl("div"),Vu(t.$$.fragment),n=Yp(),Vu(i.$$.fragment),Cn(e,"class","alert max-w-64 flex items-center")},m(a,s){Yo(a,e,s),Ku(t,e,null),Yl(e,n),Ku(i,e,null),o=!0},p(a,s){const u={};s&8&&(u.t=a[6][a[3]]),i.$set(u)},i(a){o||(mt(t.$$.fragment,a),mt(i.$$.fragment,a),o=!0)},o(a){Qt(t.$$.fragment,a),Qt(i.$$.fragment,a),o=!1},d(a){a&&jo(e),Wu(t),Wu(i)}}}function RS(r){let e,t;return e=new Ev({}),{c(){Vu(e.$$.fragment)},m(n,i){Ku(e,n,i),t=!0},i(n){t||(mt(e.$$.fragment,n),t=!0)},o(n){Qt(e.$$.fragment,n),t=!1},d(n){Wu(e,n)}}}function TS(r){let e,t,n=r[1]&&Vp(r);return{c(){n&&n.c(),e=_c()},m(i,o){n&&n.m(i,o),Yo(i,e,o),t=!0},p(i,[o]){i[1]?n?(n.p(i,o),o&2&&mt(n,1)):(n=Vp(i),n.c(),mt(n,1),n.m(e.parentNode,e)):n&&(bc(),Qt(n,1,1,()=>{n=null}),wc())},i(i){t||(mt(n),t=!0)},o(i){Qt(n),t=!1},d(i){n&&n.d(i),i&&jo(e)}}}function OS(r,e,t){var S,R,D;let n,i,o,{$$slots:a={},$$scope:s}=e,{state:u}=e,{ignoreLoading:c=!1}=e,f=((S=u==null?void 0:u.osmConnection)==null?void 0:S.loadingStatus)??new Vs("logged-in");Nf(r,f,v=>t(2,i=v));let h=((R=u==null?void 0:u.featureSwitches)==null?void 0:R.featureSwitchEnableLogin)??new Vs(!0);Nf(r,h,v=>t(1,n=v));const p=bv.t.general,b={offline:p.loginFailedOfflineMode,unreachable:p.loginFailedUnreachableMode,unknown:p.loginFailedUnreachableMode,readonly:p.loginFailedReadonlyMode},_=((D=u==null?void 0:u.osmConnection)==null?void 0:D.apiIsOnline)??new Vs("online");return Nf(r,_,v=>t(3,o=v)),r.$$set=v=>{"state"in v&&t(8,u=v.state),"ignoreLoading"in v&&t(0,c=v.ignoreLoading),"$$scope"in v&&t(9,s=v.$$scope)},[c,n,i,o,f,h,b,_,u,s,a]}class ZS extends Wl{constructor(e){super(),Jl(this,e,OS,TS,Xl,{state:8,ignoreLoading:0})}}function QS(r,e){let t;return e.current.map(n=>{r.setAttribute("placeholder",n)},[],n=>{t=n}),{destroy:t}}const DS=r=>({}),Kp=r=>({});function Wp(r){let e,t,n,i;const o=[BS,kS],a=[];function s(u,c){return typeof u[0]=="string"?0:1}return e=s(r),t=a[e]=o[e](r),{c(){t.c(),n=_c()},m(u,c){a[e].m(u,c),Yo(u,n,c),i=!0},p(u,c){let f=e;e=s(u),e===f?a[e].p(u,c):(bc(),Qt(a[f],1,1,()=>{a[f]=null}),wc(),t=a[e],t?t.p(u,c):(t=a[e]=o[e](u),t.c()),mt(t,1),t.m(n.parentNode,n))},i(u){i||(mt(t),i=!0)},o(u){Qt(t),i=!1},d(u){a[e].d(u),u&&jo(n)}}}function kS(r){let e;return{c(){e=jl("template")},m(t,n){Yo(t,e,n),r[8](e)},p:Pf,i:Pf,o:Pf,d(t){t&&jo(e),r[8](null)}}}function BS(r){let e,t;return e=new xv({props:{src:r[0],class:r[5]}}),{c(){Vu(e.$$.fragment)},m(n,i){Ku(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.src=n[0]),e.$set(o)},i(n){t||(mt(e.$$.fragment,n),t=!0)},o(n){Qt(e.$$.fragment,n),t=!1},d(n){Wu(e,n)}}}function FS(r){let e,t,n=r[0]!==void 0&&Wp(r);return{c(){n&&n.c(),e=_c()},m(i,o){n&&n.m(i,o),Yo(i,e,o),t=!0},p(i,o){i[0]!==void 0?n?(n.p(i,o),o&1&&mt(n,1)):(n=Wp(i),n.c(),mt(n,1),n.m(e.parentNode,e)):n&&(bc(),Qt(n,1,1,()=>{n=null}),wc())},i(i){t||(mt(n),t=!0)},o(i){Qt(n),t=!1},d(i){n&&n.d(i),i&&jo(e)}}}function zS(r){let e,t,n,i,o,a;const s=r[7].image,u=fa(s,r,r[6],Kp),c=u||FS(r),f=r[7].default,h=fa(f,r,r[6],null);return{c(){e=jl("a"),c&&c.c(),t=Yp(),h&&h.c(),Cn(e,"class",n=vd(r[3].extraClasses,"button text-ellipsis")),Cn(e,"href",r[1]),Cn(e,"target",i=r[2]?"_blank":void 0),Cn(e,"rel",o=r[2]?"noopener":void 0)},m(p,b){Yo(p,e,b),c&&c.m(e,null),Yl(e,t),h&&h.m(e,null),a=!0},p(p,[b]){u?u.p&&(!a||b&64)&&la(u,s,p,p[6],a?da(s,p[6],b,DS):ha(p[6]),Kp):c&&c.p&&(!a||b&17)&&c.p(p,a?b:-1),h&&h.p&&(!a||b&64)&&la(h,f,p,p[6],a?da(f,p[6],b,null):ha(p[6]),null),(!a||b&8&&n!==(n=vd(p[3].extraClasses,"button text-ellipsis")))&&Cn(e,"class",n),(!a||b&2)&&Cn(e,"href",p[1]),(!a||b&4&&i!==(i=p[2]?"_blank":void 0))&&Cn(e,"target",i),(!a||b&4&&o!==(o=p[2]?"noopener":void 0))&&Cn(e,"rel",o)},i(p){a||(mt(c,p),mt(h,p),a=!0)},o(p){Qt(c,p),Qt(h,p),a=!1},d(p){p&&jo(e),c&&c.d(p),h&&h.d(p)}}}function US(r,e,t){let{$$slots:n={},$$scope:i}=e,{imageUrl:o=void 0}=e,{href:a}=e,{newTab:s=!1}=e,{options:u={}}=e,c,f=pv("block justify-center shrink-0 mr-4",(u==null?void 0:u.imgSize)??"h-11 w-11");gv(()=>{if(c&&o){let p;(o??"")===""?p=void 0:typeof o!="string"&&(p=o==null?void 0:o.SetClass(f)),p&&c.replaceWith(p.ConstructElement())}});function h(p){mv[p?"unshift":"push"](()=>{c=p,t(4,c)})}return r.$$set=p=>{"imageUrl"in p&&t(0,o=p.imageUrl),"href"in p&&t(1,a=p.href),"newTab"in p&&t(2,s=p.newTab),"options"in p&&t(3,u=p.options),"$$scope"in p&&t(6,i=p.$$scope)},[o,a,s,u,c,f,i,n,h]}class e3 extends Wl{constructor(e){super(),Jl(this,e,US,zS,Xl,{imageUrl:0,href:1,newTab:2,options:3})}}export{ia as B,zp as F,An as G,ZS as L,nd as S,Ue as T,Up as U,$S as a,QS as b,hS as c,cl as d,e3 as e,Pi as f,_s as p,fS as t};
//# sourceMappingURL=SubtleLink-f27fe7e3.js.map
