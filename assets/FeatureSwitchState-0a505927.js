var o=Object.defineProperty;var l=(s,n,e)=>n in s?o(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e;var t=(s,n,e)=>(l(s,typeof n!="symbol"?n+"":n,e),e);import{U as f}from"./LocalStorageSource-8810ea8f.js";import{Q as a}from"./tw-merge-b9351875.js";import{C as w}from"./Constants-b0e1f442.js";import{U as S}from"./Utils-f43fc41d.js";window.addEventListener("load",async()=>{if(!("serviceWorker"in navigator)){console.log("Service workers are not supported");return}try{await navigator.serviceWorker.register("/service-worker.js"),console.log("Service worker registration successful")}catch(s){console.error("Service worker registration failed",s)}});class i{static initSwitch(n,e,h){const r=e;return a.GetQueryParameter(n,""+r,h,{stackOffset:-1}).sync(c=>c===void 0?r:c!=="false",[],c=>c==r?void 0:""+c)}}class d{constructor(){t(this,"featureSwitchFakeUser");this.featureSwitchFakeUser=a.GetBooleanQueryParameter("fake-user",!1,"If true, 'dryrun' mode is activated and a fake user account is loaded")}}class k extends d{constructor(e){super();t(this,"layoutToUse");t(this,"featureSwitchEnableLogin");t(this,"featureSwitchSearch");t(this,"featureSwitchBackgroundSelection");t(this,"featureSwitchWelcomeMessage");t(this,"featureSwitchCommunityIndex");t(this,"featureSwitchExtraLinkEnabled");t(this,"featureSwitchMoreQuests");t(this,"featureSwitchShareScreen");t(this,"featureSwitchGeolocation");t(this,"featureSwitchIsTesting");t(this,"featureSwitchIsDebugging");t(this,"featureSwitchShowAllQuestions");t(this,"featureSwitchFilter");t(this,"featureSwitchEnableExport");t(this,"overpassUrl");t(this,"overpassTimeout");t(this,"overpassMaxZoom");t(this,"osmApiTileSize");t(this,"backgroundLayerId");this.layoutToUse=e,this.featureSwitchEnableLogin=i.initSwitch("fs-enable-login",(e==null?void 0:e.enableUserBadge)??!0,"Disables/Enables logging in and thus disables editing all together. This effectively puts MapComplete into read-only mode."),a.wasInitialized("fs-userbadge")&&this.featureSwitchEnableLogin.setData(a.GetBooleanQueryParameter("fs-userbadge",void 0,"Legacy").data),this.featureSwitchSearch=i.initSwitch("fs-search",(e==null?void 0:e.enableSearch)??!0,"Disables/Enables the search bar"),this.featureSwitchBackgroundSelection=i.initSwitch("fs-background",(e==null?void 0:e.enableBackgroundLayerSelection)??!0,"Disables/Enables the background layer control"),this.featureSwitchFilter=i.initSwitch("fs-filter",(e==null?void 0:e.enableLayers)??!0,"Disables/Enables the filter view"),this.featureSwitchWelcomeMessage=i.initSwitch("fs-welcome-message",!0,"Disables/enables the help menu or welcome message"),this.featureSwitchCommunityIndex=i.initSwitch("fs-community-index",this.featureSwitchEnableLogin.data,"Disables/enables the button to get in touch with the community"),this.featureSwitchExtraLinkEnabled=i.initSwitch("fs-iframe-popout",!0,"Disables/Enables the extraLink button. By default, if in iframe mode and the welcome message is hidden, a popout button to the full mapcomplete instance is shown instead (unless disabled with this switch or another extraLink button is enabled)"),this.featureSwitchMoreQuests=i.initSwitch("fs-more-quests",(e==null?void 0:e.enableMoreQuests)??!0,"Disables/Enables the 'More Quests'-tab in the welcome message"),this.featureSwitchShareScreen=i.initSwitch("fs-share-screen",(e==null?void 0:e.enableShareScreen)??!0,"Disables/Enables the 'Share-screen'-tab in the welcome message"),this.featureSwitchGeolocation=i.initSwitch("fs-geolocation",(e==null?void 0:e.enableGeolocation)??!0,"Disables/Enables the geolocation button"),this.featureSwitchShowAllQuestions=i.initSwitch("fs-all-questions",(e==null?void 0:e.enableShowAllQuestions)??!1,"Always show all questions"),this.featureSwitchEnableExport=i.initSwitch("fs-export",(e==null?void 0:e.enableExportButton)??!0,"Enable the export as GeoJSON and CSV button");let h=!1;!S.runningFromConsole&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")&&(h=!0),this.featureSwitchIsTesting=a.GetBooleanQueryParameter("test",h,"If true, 'dryrun' mode is activated. The app will behave as normal, except that changes to OSM will be printed onto the console instead of actually uploaded to osm.org"),this.featureSwitchIsDebugging=a.GetBooleanQueryParameter("debug",!1,"If true, shows some extra debugging help such as all the available tags on every object"),this.overpassUrl=a.GetQueryParameter("overpassUrl",((e==null?void 0:e.overpassUrl)??w.defaultOverpassUrls).join(","),"Point mapcomplete to a different overpass-instance. Example: https://overpass-api.de/api/interpreter").sync(r=>r==null?void 0:r.split(","),[],r=>r==null?void 0:r.join(",")),this.overpassTimeout=f.asInt(a.GetQueryParameter("overpassTimeout",""+(e==null?void 0:e.overpassTimeout),"Set a different timeout (in seconds) for queries in overpass")),this.overpassMaxZoom=f.asFloat(a.GetQueryParameter("overpassMaxZoom",""+(e==null?void 0:e.overpassMaxZoom)," point to switch between OSM-api and overpass")),this.osmApiTileSize=f.asInt(a.GetQueryParameter("osmApiTileSize",""+(e==null?void 0:e.osmApiTileSize),"Tilesize when the OSM-API is used to fetch data within a BBOX")),this.backgroundLayerId=a.GetQueryParameter("background",e==null?void 0:e.defaultBackgroundId,"The id of the background layer to start with")}}export{k as F,d as O};
//# sourceMappingURL=FeatureSwitchState-0a505927.js.map
