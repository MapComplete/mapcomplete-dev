{"version":3,"file":"statistics-7b8cd3e2.js","sources":["../../src/UI/StatisticsGUI.ts"],"sourcesContent":["/**\n * The statistics-gui shows statistics from previous MapComplete-edits\n */\nimport { UIEventSource } from \"../Logic/UIEventSource\"\nimport { VariableUiElement } from \"./Base/VariableUIElement\"\nimport Loading from \"./Base/Loading\"\nimport { Utils } from \"../Utils\"\nimport Combine from \"./Base/Combine\"\nimport TagRenderingChart, { StackedRenderingChart } from \"./BigComponents/TagRenderingChart\"\nimport BaseUIElement from \"./BaseUIElement\"\nimport Title from \"./Base/Title\"\nimport { FixedUiElement } from \"./Base/FixedUiElement\"\nimport List from \"./Base/List\"\nimport LayoutConfig from \"../Models/ThemeConfig/LayoutConfig\"\nimport mcChanges from \"../../src/assets/generated/themes/mapcomplete-changes.json\"\nimport SvelteUIElement from \"./Base/SvelteUIElement\"\nimport Filterview from \"./BigComponents/Filterview.svelte\"\nimport FilteredLayer from \"../Models/FilteredLayer\"\nimport DownloadButton from \"./DownloadFlow/DownloadButton.svelte\"\nimport { SubtleButton } from \"./Base/SubtleButton\"\nimport { GeoOperations } from \"../Logic/GeoOperations\"\nimport { Polygon } from \"geojson\"\nimport { Feature } from \"geojson\"\n\nclass StatsticsForOverviewFile extends Combine {\n    constructor(homeUrl: string, paths: string[]) {\n        paths = paths.filter((p) => !p.endsWith(\"file-overview.json\"))\n        const layer = new LayoutConfig(<any>mcChanges, true).layers[0]\n        const filteredLayer = new FilteredLayer(layer)\n        const filterPanel = new Combine([\n            new Title(\"Filters\"),\n            new SvelteUIElement(Filterview, { filteredLayer }),\n        ])\n\n        const downloaded = new UIEventSource<{ features: ChangeSetData[] }[]>([])\n\n        for (const filepath of paths) {\n            if (filepath.endsWith(\"file-overview.json\")) {\n                continue\n            }\n            Utils.downloadJson(homeUrl + filepath).then((data) => {\n                if (data === undefined) {\n                    return\n                }\n                if (data.features === undefined) {\n                    data.features = data\n                }\n                data?.features?.forEach((item) => {\n                    item.properties = { ...item.properties, ...item.properties.metadata }\n                    delete item.properties.metadata\n                })\n                downloaded.data.push(data)\n                downloaded.ping()\n            })\n        }\n\n        const loading = new Loading(\n            new VariableUiElement(\n                downloaded.map((dl) => \"Downloaded \" + dl.length + \" items out of \" + paths.length)\n            )\n        )\n\n        super([\n            filterPanel,\n            new VariableUiElement(\n                downloaded.map(\n                    (downloaded) => {\n                        if (downloaded.length !== paths.length) {\n                            return loading\n                        }\n\n                        const overview = ChangesetsOverview.fromDirtyData(\n                            [].concat(...downloaded.map((d) => d.features))\n                        ).filter((cs) => filteredLayer.isShown(<any>cs.properties))\n                        console.log(\"Overview is\", overview)\n\n                        if (overview._meta.length === 0) {\n                            return \"No data matched the filter\"\n                        }\n\n                        const dateStrings = Utils.NoNull(\n                            overview._meta.map((cs) => cs.properties.date)\n                        )\n                        const dates: number[] = dateStrings.map((d) => new Date(d).getTime())\n                        const mindate = Math.min(...dates)\n                        const maxdate = Math.max(...dates)\n\n                        const diffInDays = (maxdate - mindate) / (1000 * 60 * 60 * 24)\n                        console.log(\"Diff in days is \", diffInDays, \"got\", overview._meta.length)\n                        const trs = layer.tagRenderings.filter(\n                            (tr) => tr.mappings?.length > 0 || tr.freeform?.key !== undefined\n                        )\n\n                        const allKeys = new Set<string>()\n                        for (const cs of overview._meta) {\n                            for (const propertiesKey in cs.properties) {\n                                allKeys.add(propertiesKey)\n                            }\n                        }\n                        console.log(\"All keys:\", allKeys)\n\n                        const valuesToSum = [\n                            \"create\",\n                            \"modify\",\n                            \"delete\",\n                            \"answer\",\n                            \"move\",\n                            \"deletion\",\n                            \"add-image\",\n                            \"plantnet-ai-detection\",\n                            \"import\",\n                            \"conflation\",\n                            \"link-image\",\n                            \"soft-delete\",\n                        ]\n\n                        const allThemes = Utils.Dedup(overview._meta.map((f) => f.properties.theme))\n\n                        const excludedThemes = new Set<string>()\n                        if (allThemes.length > 1) {\n                            excludedThemes.add(\"grb\")\n                            excludedThemes.add(\"etymology\")\n                        }\n                        const summedValues = valuesToSum\n                            .map((key) => [key, overview.sum(key, excludedThemes)])\n                            .filter((kv) => kv[1] != 0)\n                            .map((kv) => kv.join(\": \"))\n                        const elements: BaseUIElement[] = [\n                            new Title(\n                                allThemes.length === 1\n                                    ? \"General statistics for \" + allThemes[0]\n                                    : \"General statistics (excluding etymology- and GRB-theme changes)\"\n                            ),\n                            new Combine([\n                                overview._meta.length + \" changesets match the filters\",\n                                new List(summedValues),\n                            ]).SetClass(\"flex flex-col border rounded-xl\"),\n\n                            new Title(\"Breakdown\"),\n                        ]\n                        for (const tr of trs) {\n                            if (tr.question === undefined) {\n                                continue\n                            }\n                            console.log(tr)\n                            let total = undefined\n                            if (tr.freeform?.key !== undefined) {\n                                total = new Set(\n                                    overview._meta.map((f) => f.properties[tr.freeform.key])\n                                ).size\n                            }\n\n                            try {\n                                elements.push(\n                                    new Combine([\n                                        new Title(tr.question ?? tr.id).SetClass(\"p-2\"),\n                                        total > 1 ? total + \" unique value\" : undefined,\n                                        new Title(\"By number of changesets\", 4).SetClass(\"p-2\"),\n                                        new StackedRenderingChart(tr, <any>overview._meta, {\n                                            period: diffInDays <= 367 ? \"day\" : \"month\",\n                                            groupToOtherCutoff:\n                                                total > 50 ? 25 : total > 10 ? 3 : 0,\n                                        }).SetStyle(\"width: 75%; height: 600px\"),\n                                        new TagRenderingChart(<any>overview._meta, tr, {\n                                            groupToOtherCutoff:\n                                                total > 50 ? 25 : total > 10 ? 3 : 0,\n                                            chartType: \"doughnut\",\n                                            chartclasses: \"w-8 h-8\",\n                                            sort: true,\n                                        }).SetStyle(\"width: 25rem\"),\n                                        new Title(\"By number of modifications\", 4).SetClass(\"p-2\"),\n                                        new StackedRenderingChart(\n                                            tr,\n                                            <any>Utils.Clone(overview._meta),\n                                            {\n                                                period: diffInDays <= 367 ? \"day\" : \"month\",\n                                                groupToOtherCutoff: total > 50 ? 10 : 0,\n                                                sumFields: valuesToSum,\n                                            }\n                                        ).SetStyle(\"width: 100%; height: 600px\"),\n                                    ]).SetClass(\"block border-2 border-subtle p-2 m-2 rounded-xl\")\n                                )\n                            } catch (e) {\n                                console.log(\"Could not generate a chart\", e)\n                                elements.push(\n                                    new FixedUiElement(\n                                        \"No relevant information for \" + tr.question.txt\n                                    )\n                                )\n                            }\n                        }\n\n\n                        elements.push(new SubtleButton(\n                            undefined, \"Download as csv\"\n                        ).onClick(() => {\n                            const data = GeoOperations.toCSV(overview._meta,\n                                {\n                                    ignoreTags: /^((deletion:node)|(import:node)|(move:node)|(soft-delete:))/\n                                })\n                            Utils.offerContentsAsDownloadableFile(data , \"statistics.csv\", {mimetype: \"text/csv\"})\n                        }))\n\n                        return new Combine(elements)\n                    },\n                    [filteredLayer.currentFilter]\n                )\n            ).SetClass(\"block w-full h-full\"),\n        ])\n        this.SetClass(\"block w-full h-full\")\n    }\n}\n\nclass StatisticsGUI extends VariableUiElement {\n    private static readonly homeUrl =\n        \"https://raw.githubusercontent.com/pietervdvn/MapComplete-data/main/changeset-metadata/\"\n    private static readonly stats_files = \"file-overview.json\"\n\n    constructor() {\n        const index = UIEventSource.FromPromise(\n            Utils.downloadJson(StatisticsGUI.homeUrl + StatisticsGUI.stats_files)\n        )\n        super(\n            index.map((paths) => {\n                if (paths === undefined) {\n                    return new Loading(\"Loading overview...\")\n                }\n\n                return new StatsticsForOverviewFile(StatisticsGUI.homeUrl, paths)\n            })\n        )\n        this.SetClass(\"block w-full h-full\")\n    }\n}\n\nclass ChangesetsOverview {\n    private static readonly theme_remappings = {\n        metamap: \"maps\",\n        groen: \"buurtnatuur\",\n        \"updaten van metadata met mapcomplete\": \"buurtnatuur\",\n        \"Toevoegen of dit natuurreservaat toegangkelijk is\": \"buurtnatuur\",\n        \"wiki:mapcomplete/fritures\": \"fritures\",\n        \"wiki:MapComplete/Fritures\": \"fritures\",\n        lits: \"lit\",\n        pomp: \"cyclofix\",\n        \"wiki:user:joost_schouppe/campersite\": \"campersite\",\n        \"wiki-user-joost_schouppe-geveltuintjes\": \"geveltuintjes\",\n        \"wiki-user-joost_schouppe-campersite\": \"campersite\",\n        \"wiki-User-joost_schouppe-campersite\": \"campersite\",\n        \"wiki-User-joost_schouppe-geveltuintjes\": \"geveltuintjes\",\n        \"wiki:User:joost_schouppe/campersite\": \"campersite\",\n        arbres: \"arbres_llefia\",\n        aed_brugge: \"aed\",\n        \"https://llefia.org/arbres/mapcomplete.json\": \"arbres_llefia\",\n        \"https://llefia.org/arbres/mapcomplete1.json\": \"arbres_llefia\",\n        \"toevoegen of dit natuurreservaat toegangkelijk is\": \"buurtnatuur\",\n        \"testing mapcomplete 0.0.0\": \"buurtnatuur\",\n        entrances: \"indoor\",\n        \"https://raw.githubusercontent.com/osmbe/play/master/mapcomplete/geveltuinen/geveltuinen.json\":\n            \"geveltuintjes\",\n    }\n    public readonly _meta: ChangeSetData[]\n\n    private constructor(meta: ChangeSetData[]) {\n        this._meta = Utils.NoNull(meta)\n    }\n\n    public static fromDirtyData(meta: ChangeSetData[]): ChangesetsOverview {\n        return new ChangesetsOverview(meta?.map((cs) => ChangesetsOverview.cleanChangesetData(cs)))\n    }\n\n    private static cleanChangesetData(cs: ChangeSetData): ChangeSetData {\n        if (cs === undefined) {\n            return undefined\n        }\n        if (cs.properties.editor?.startsWith(\"iD\")) {\n            // We also fetch based on hashtag, so some edits with iD show up as well\n            return undefined\n        }\n        if (cs.properties.theme === undefined) {\n            cs.properties.theme = cs.properties.comment.substr(\n                cs.properties.comment.lastIndexOf(\"#\") + 1\n            )\n        }\n        cs.properties.theme = cs.properties.theme.toLowerCase()\n        const remapped = ChangesetsOverview.theme_remappings[cs.properties.theme]\n        cs.properties.theme = remapped ?? cs.properties.theme\n        if (cs.properties.theme.startsWith(\"https://raw.githubusercontent.com/\")) {\n            cs.properties.theme =\n                \"gh://\" + cs.properties.theme.substr(\"https://raw.githubusercontent.com/\".length)\n        }\n        if (cs.properties.modify + cs.properties.delete + cs.properties.create == 0) {\n            cs.properties.theme = \"EMPTY CS\"\n        }\n        try {\n            cs.properties.host = new URL(cs.properties.host).host\n        } catch (e) {}\n        return cs\n    }\n\n    public filter(predicate: (cs: ChangeSetData) => boolean) {\n        return new ChangesetsOverview(this._meta.filter(predicate))\n    }\n\n    public sum(key: string, excludeThemes: Set<string>): number {\n        let s = 0\n        for (const feature of this._meta) {\n            if (excludeThemes.has(feature.properties.theme)) {\n                continue\n            }\n            const parsed = Number(feature.properties[key])\n            if (!isNaN(parsed)) {\n                s += parsed\n            }\n        }\n        return s\n    }\n}\n\ninterface ChangeSetData extends Feature<Polygon> {\n    id: number\n    type: \"Feature\"\n    geometry: {\n        type: \"Polygon\"\n        coordinates: [number, number][][]\n    }\n    properties: {\n        check_user: null\n        reasons: []\n        tags: []\n        features: []\n        user: string\n        uid: string\n        editor: string\n        comment: string\n        comments_count: number\n        source: string\n        imagery_used: string\n        date: string\n        reviewed_features: []\n        create: number\n        modify: number\n        delete: number\n        area: number\n        is_suspect: boolean\n        harmful: any\n        checked: boolean\n        check_date: any\n        host: string\n        theme: string\n        imagery: string\n        language: string\n    }\n}\n\nnew StatisticsGUI().AttachTo(\"main\")\n"],"names":["StatsticsForOverviewFile","Combine","homeUrl","paths","p","layer","LayoutConfig","mcChanges","filteredLayer","FilteredLayer","filterPanel","Title","SvelteUIElement","Filterview","downloaded","UIEventSource","filepath","Utils","data","_a","item","loading","Loading","VariableUiElement","dl","overview","ChangesetsOverview","d","cs","dates","mindate","diffInDays","trs","tr","_b","allKeys","propertiesKey","valuesToSum","allThemes","f","excludedThemes","summedValues","key","kv","elements","List","total","StackedRenderingChart","TagRenderingChart","e","FixedUiElement","SubtleButton","GeoOperations","_StatisticsGUI","index","__publicField","StatisticsGUI","_ChangesetsOverview","meta","remapped","predicate","excludeThemes","s","feature","parsed"],"mappings":"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"}