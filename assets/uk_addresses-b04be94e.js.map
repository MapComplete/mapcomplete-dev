{"version":3,"file":"uk_addresses-b04be94e.js","sources":["../../src/assets/generated/metatagging/uk_addresses.ts","../../index_uk_addresses.ts"],"sourcesContent":["import {Feature} from 'geojson'\nimport { ExtraFuncType } from \"../../../Logic/ExtraFunctions\";\nimport { Utils } from \"../../../Utils\"\nexport class ThemeMetaTagging {\n   public static readonly themeName = \"uk_addresses\"\n\n   public metaTaggging_for_address(feat: Feature, helperFunctions: Record<ExtraFuncType, (feature: Feature) => Function>) {\n      const {distanceTo, overlapWith, enclosingFeatures, intersectionsWith, closest, closestn, get} = helperFunctions\n      Utils.AddLazyProperty(feat.properties, '_closest_3_street_names', () => closestn(feat)('named_streets',3, 'name').map(f => f.feat.properties.name) ) \n      Utils.AddLazyProperty(feat.properties, '_closest_street:0:name', () => JSON.parse(feat.properties._closest_3_street_names)[0] ) \n      Utils.AddLazyProperty(feat.properties, '_closest_street:1:name', () => JSON.parse(feat.properties._closest_3_street_names)[1] ) \n      Utils.AddLazyProperty(feat.properties, '_closest_street:2:name', () => JSON.parse(feat.properties._closest_3_street_names)[2] ) \n   }\n   public metaTaggging_for_raw_inspire_polygons(feat: Feature, helperFunctions: Record<ExtraFuncType, (feature: Feature) => Function>) {\n      const {distanceTo, overlapWith, enclosingFeatures, intersectionsWith, closest, closestn, get} = helperFunctions\n      Utils.AddLazyProperty(feat.properties, '_has_address', () => overlapWith(feat)('address').length > 0 ) \n   }\n   public metaTaggging_for_to_import(feat: Feature, helperFunctions: Record<ExtraFuncType, (feature: Feature) => Function>) {\n      const {distanceTo, overlapWith, enclosingFeatures, intersectionsWith, closest, closestn, get} = helperFunctions\n      Utils.AddLazyProperty(feat.properties, '_embedding_object', () => overlapWith(feat)('address')[0]?.feat?.properties ?? null ) \n      Utils.AddLazyProperty(feat.properties, '_embedding_object:addr:housenumber', () => JSON.parse(feat.properties._embedding_object)?.['addr:housenumber'] ) \n      Utils.AddLazyProperty(feat.properties, '_embedding_object:addr:street', () => JSON.parse(feat.properties._embedding_object)?.['addr:street'] ) \n      Utils.AddLazyProperty(feat.properties, '_embedding_inspire_polygon_has_address', () => overlapWith(feat)('raw_inspire_polygons')[0]?.feat?.properties?._has_address ) \n      Utils.AddLazyProperty(feat.properties, '_embedding_object:id', () => get(feat, '_embedding_object')?.id ?? feat.properties._embedding_inspire_polygon_has_address ) \n   }\n   public metaTaggging_for_uk_address(feat: Feature, helperFunctions: Record<ExtraFuncType, (feature: Feature) => Function>) {\n      const {distanceTo, overlapWith, enclosingFeatures, intersectionsWith, closest, closestn, get} = helperFunctions\n      Utils.AddLazyProperty(feat.properties, '_closest_3_street_names', () => closestn(feat)('named_streets',3, 'name').map(f => f.feat.properties.name) ) \n      Utils.AddLazyProperty(feat.properties, '_closest_street:0:name', () => JSON.parse(feat.properties._closest_3_street_names)[0] ) \n      Utils.AddLazyProperty(feat.properties, '_closest_street:1:name', () => JSON.parse(feat.properties._closest_3_street_names)[1] ) \n      Utils.AddLazyProperty(feat.properties, '_closest_street:2:name', () => JSON.parse(feat.properties._closest_3_street_names)[2] ) \n   }\n   public metaTaggging_for_named_streets(feat: Feature, helperFunctions: Record<ExtraFuncType, (feature: Feature) => Function>) {\n      const {distanceTo, overlapWith, enclosingFeatures, intersectionsWith, closest, closestn, get} = helperFunctions\n   }\n}","import layout from \"./src/assets/generated/themes/uk_addresses.json\"\nimport { ThemeMetaTagging } from \"./src/assets/generated/metatagging/uk_addresses\"\nimport selected_element from \"./src/assets/generated/layers/selected_element.json\"\nimport gps_location from \"./src/assets/generated/layers/gps_location.json\"\nimport gps_location_history from \"./src/assets/generated/layers/gps_location_history.json\"\nimport home_location from \"./src/assets/generated/layers/home_location.json\"\nimport gps_track from \"./src/assets/generated/layers/gps_track.json\"\nimport range from \"./src/assets/generated/layers/range.json\"\nimport last_click from \"./src/assets/generated/layers/last_click.json\"\nimport favourite from \"./src/assets/generated/layers/favourite.json\"\nimport summary from \"./src/assets/generated/layers/summary.json\"\nimport ThemeViewState from \"./src/Models/ThemeViewState\"\nimport SvelteUIElement from \"./src/UI/Base/SvelteUIElement\"\nimport ThemeViewGUI from \"./src/UI/ThemeViewGUI.svelte\"\nimport LayoutConfig from \"./src/Models/ThemeConfig/LayoutConfig\";\nimport MetaTagging from \"./src/Logic/MetaTagging\";\nimport { FixedUiElement } from \"./src/UI/Base/FixedUiElement\";\nimport { Utils } from \"./src/Utils\"\nimport Constants from \"./src/Models/Constants\"\n\nfunction webgl_support() {\n    try {\n        var canvas = document.createElement(\"canvas\")\n        return (\n            !!window.WebGLRenderingContext &&\n            (canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\"))\n        )\n    } catch (e) {\n        return false\n    }\n}\nasync function getAvailableLayers(): Promise<Set<string>> {\n    try {\n        const host = new URL(Constants.VectorTileServer).host\n        const status = await Utils.downloadJson(\"https://\" + host + \"/summary/status.json\")\n        return new Set<string>(status.layers)\n    } catch (e) {\n        console.error(\"Could not get MVT available layers due to\", e)\n        return new Set<string>()\n    }\n}\n\nasync function main() {\n    if (!webgl_support()) {\n         new FixedUiElement(\"WebGL is not supported or not enabled. This is essential for MapComplete to function, please enable this.\").SetClass(\"block alert\").AttachTo(\"maindiv\")\n    }else{\n        const availableLayers = await getAvailableLayers()\n        MetaTagging.setThemeMetatagging(new ThemeMetaTagging())\n        layout.layers.push(<any> selected_element)\n    layout.layers.push(<any> gps_location)\n    layout.layers.push(<any> gps_location_history)\n    layout.layers.push(<any> home_location)\n    layout.layers.push(<any> gps_track)\n    layout.layers.push(<any> range)\n    layout.layers.push(<any> last_click)\n    layout.layers.push(<any> favourite)\n    layout.layers.push(<any> summary)\n        const state = new ThemeViewState(new LayoutConfig(<any> layout), availableLayers)\n        const main = new SvelteUIElement(ThemeViewGUI, { state })\n        main.AttachTo(\"maindiv\")\n    }\n}\nmain()\n"],"names":["ThemeMetaTagging","feat","helperFunctions","distanceTo","overlapWith","enclosingFeatures","intersectionsWith","closest","closestn","get","Utils","f","_b","_a","_c","__publicField","webgl_support","canvas","getAvailableLayers","host","Constants","status","e","main","FixedUiElement","availableLayers","MetaTagging","layout","selected_element","gps_location","gps_location_history","home_location","gps_track","range","last_click","favourite","summary","state","ThemeViewState","LayoutConfig","SvelteUIElement","ThemeViewGUI"],"mappings":"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"}