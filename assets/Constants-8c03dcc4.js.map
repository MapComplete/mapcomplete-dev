{"version":3,"file":"Constants-8c03dcc4.js","sources":["../../src/Models/Constants.ts"],"sourcesContent":["import * as packagefile from \"../../package.json\"\nimport * as extraconfig from \"../../config.json\"\nimport { Utils } from \"../Utils\"\nimport { AuthConfig } from \"../Logic/Osm/AuthConfig\"\n\nexport type PriviligedLayerType = (typeof Constants.priviliged_layers)[number]\n\nexport default class Constants {\n    public static vNumber: string = packagefile.version\n    /**\n     * API key for Maproulette\n     *\n     * Currently there is no user-friendly way to get the user's API key.\n     * See https://github.com/maproulette/maproulette2/issues/476 for more information.\n     * Using an empty string however does work for most actions, but will attribute all actions to the Superuser.\n     */\n    public static readonly MaprouletteApiKey = \"\"\n    public static readonly added_by_default = [\n        \"selected_element\",\n        \"gps_location\",\n        \"gps_location_history\",\n        \"home_location\",\n        \"gps_track\",\n        \"range\",\n        \"last_click\",\n        \"favourite\",\n    ] as const\n    /**\n     * Special layers which are not included in a theme by default\n     */\n    public static readonly no_include = [\n        \"conflation\",\n        \"split_point\",\n        \"split_road\",\n        \"current_view\",\n        \"import_candidate\",\n        \"usersettings\",\n        \"icons\",\n        \"filters\"\n    ] as const\n    /**\n     * Layer IDs of layers which have special properties through built-in hooks\n     */\n    public static readonly priviliged_layers = [\n        ...Constants.added_by_default,\n        ...Constants.no_include,\n    ] as const\n    // The user journey states thresholds when a new feature gets unlocked\n    public static userJourney = {\n        moreScreenUnlock: 1,\n        personalLayoutUnlock: 5,\n        historyLinkVisible: 10,\n        deletePointsOfOthersUnlock: 20,\n        tagsVisibleAt: 25,\n        tagsVisibleAndWikiLinked: 30,\n\n        mapCompleteHelpUnlock: 50,\n        themeGeneratorReadOnlyUnlock: 50,\n        themeGeneratorFullUnlock: 500,\n        addNewPointWithUnreadMessagesUnlock: 500,\n\n        importHelperUnlock: 5000,\n    }\n    static readonly minZoomLevelToAddNewPoint = Constants.isRetina() ? 17 : 18\n    /**\n     * Used by 'PendingChangesUploader', which waits this amount of seconds to upload changes.\n     * (Note that pendingChanges might upload sooner if the popup is closed or similar)\n     */\n    static updateTimeoutSec: number = 15\n    /**\n     * If the contributor has their GPS location enabled and makes a change,\n     * the points visited less then `nearbyVisitTime`-seconds ago will be inspected.\n     * The point closest to the changed feature will be considered and this distance will be tracked.\n     * ALl these distances are used to calculate a nearby-score\n     */\n    static nearbyVisitTime: number = 30 * 60\n    /**\n     * If a user makes a change, the distance to the changed object is calculated.\n     * If a user makes multiple changes, all these distances are put into multiple bins, depending on this distance.\n     * For every bin, the totals are uploaded as metadata\n     */\n    static distanceToChangeObjectBins = [25, 50, 100, 500, 1000, 5000, Number.MAX_VALUE]\n    static themeOrder = [\n        \"personal\",\n        \"cyclofix\",\n        \"waste\",\n        \"etymology\",\n        \"food\",\n        \"cafes_and_pubs\",\n        \"shops\",\n        \"playgrounds\",\n        \"hailhydrant\",\n        \"toilets\",\n        \"aed\",\n        \"bookcases\",\n    ]\n    /**\n     * Upon initialization, the GPS will search the location.\n     * If the location is found within the given timout, it'll automatically fly to it.\n     *\n     * In seconds\n     */\n    static zoomToLocationTimeout = 15\n    public static readonly viewportCenterCloseToGpsCutoff: number = 20\n    private static readonly config = (() => {\n        const defaultConfig = packagefile.config\n        return { ...defaultConfig, ...extraconfig }\n    })()\n    public static ImgurApiKey = Constants.config.api_keys.imgur\n    public static readonly mapillary_client_token_v4 = Constants.config.api_keys.mapillary_v4\n    public static defaultOverpassUrls = Constants.config.default_overpass_urls\n    public static countryCoderEndpoint: string = Constants.config.country_coder_host\n    public static osmAuthConfig: AuthConfig = Constants.config.oauth_credentials\n    public static nominatimEndpoint: string = Constants.config.nominatimEndpoint\n    /**\n     * These are the values that are allowed to use as 'backdrop' icon for a map pin\n     */\n    private static readonly _defaultPinIcons = [\n        \"pin\",\n        \"square\",\n        \"circle\",\n        \"checkmark\",\n        \"clock\",\n        \"close\",\n        \"crosshair\",\n        \"help\",\n        \"home\",\n        \"invalid\",\n        \"location\",\n        \"location_empty\",\n        \"location_locked\",\n        \"note\",\n        \"resolved\",\n        \"ring\",\n        \"scissors\",\n        \"teardrop\",\n        \"teardrop_with_hole_green\",\n        \"triangle\",\n        \"brick_wall_square\",\n        \"brick_wall_round\",\n        \"gps_arrow\",\n        \"checkmark\",\n        \"help\",\n        \"close\",\n        \"invalid\",\n        \"heart\",\n        \"heart_outline\",\n        \"confirm\",\n        \"direction\",\n        \"not_found\",\n        \"mastodon\",\n        \"party\",\n        \"addSmall\",\n\n    ] as const\n    public static readonly defaultPinIcons: string[] = <any>Constants._defaultPinIcons\n\n    private static isRetina(): boolean {\n        if (Utils.runningFromConsole) {\n            return false\n        }\n        // The cause for this line of code: https://github.com/pietervdvn/MapComplete/issues/115\n        // See https://stackoverflow.com/questions/19689715/what-is-the-best-way-to-detect-retina-support-on-a-device-using-javascript\n        return (\n            (window.matchMedia &&\n                (window.matchMedia(\n                    \"only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)\"\n                ).matches ||\n                    window.matchMedia(\n                        \"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)\"\n                    ).matches)) ||\n            (window.devicePixelRatio && window.devicePixelRatio >= 2)\n        )\n    }\n}\n"],"names":["_Constants","Utils","__publicField","packagefile.version","packagefile.config","extraconfig","Constants"],"mappings":"iwFAOqBA,EAArB,MAAqBA,CAAU,CAsJ3B,OAAe,UAAoB,CAC/B,OAAIC,EAAM,mBACC,GAKN,OAAO,aACH,OAAO,WACJ,+HAAA,EACF,SACE,OAAO,WACH,sMAAA,EACF,UACT,OAAO,kBAAoB,OAAO,kBAAoB,CAE/D,CACJ,EAtKIC,EADiBF,EACH,UAAkBG,GAQhCD,EATiBF,EASM,oBAAoB,IAC3CE,EAViBF,EAUM,mBAAmB,CACtC,mBACA,eACA,uBACA,gBACA,YACA,QACA,aACA,WAAA,GAKJE,EAvBiBF,EAuBM,aAAa,CAChC,aACA,cACA,aACA,eACA,mBACA,eACA,QACA,SAAA,GAKJE,EApCiBF,EAoCM,oBAAoB,CACvC,GAAGA,EAAU,iBACb,GAAGA,EAAU,UAAA,GAGjBE,EAzCiBF,EAyCH,cAAc,CACxB,iBAAkB,EAClB,qBAAsB,EACtB,mBAAoB,GACpB,2BAA4B,GAC5B,cAAe,GACf,yBAA0B,GAE1B,sBAAuB,GACvB,6BAA8B,GAC9B,yBAA0B,IAC1B,oCAAqC,IAErC,mBAAoB,GAAA,GAExBE,EAxDiBF,EAwDD,4BAA4BA,EAAU,SAAA,EAAa,GAAK,IAKxEE,EA7DiBF,EA6DV,mBAA2B,IAOlCE,EApEiBF,EAoEV,kBAA0B,GAAK,IAMtCE,EA1EiBF,EA0EV,6BAA6B,CAAC,GAAI,GAAI,IAAK,IAAK,IAAM,IAAM,OAAO,SAAS,GACnFE,EA3EiBF,EA2EV,aAAa,CAChB,WACA,WACA,QACA,YACA,OACA,iBACA,QACA,cACA,cACA,UACA,MACA,WAAA,GAQJE,EA/FiBF,EA+FV,wBAAwB,IAC/BE,EAhGiBF,EAgGM,iCAAyC,IAChEE,EAjGiBF,EAiGO,UAAU,KAEvB,CAAE,GADaI,EACK,GAAGC,QAElCH,EArGiBF,EAqGH,cAAcA,EAAU,OAAO,SAAS,OACtDE,EAtGiBF,EAsGM,4BAA4BA,EAAU,OAAO,SAAS,cAC7EE,EAvGiBF,EAuGH,sBAAsBA,EAAU,OAAO,uBACrDE,EAxGiBF,EAwGH,uBAA+BA,EAAU,OAAO,oBAC9DE,EAzGiBF,EAyGH,gBAA4BA,EAAU,OAAO,mBAC3DE,EA1GiBF,EA0GH,oBAA4BA,EAAU,OAAO,mBAI3DE,EA9GiBF,EA8GO,mBAAmB,CACvC,MACA,SACA,SACA,YACA,QACA,QACA,YACA,OACA,OACA,UACA,WACA,iBACA,kBACA,OACA,WACA,OACA,WACA,WACA,2BACA,WACA,oBACA,mBACA,YACA,YACA,OACA,QACA,UACA,QACA,gBACA,UACA,YACA,YACA,WACA,QACA,UAAA,GAGJE,EApJiBF,EAoJM,kBAAiCA,EAAU,kBApJtE,IAAqBM,EAArBN"}