import{S as x,i as $,s as ee,G as re,o as J,p as F,b as m,r as K,d as q,f as p,u as E,H as ne,I as oe,J as ie,v as ue,t as M,g as C,h as z,w as fe,x as Q,y as ce,z as A,A as de,C as te,D as se,E as me,e as y,a as N,c as L,q as W,m as O,j as V,n as P,N as X,R as _e,T as ve}from"./Svg-ee7c8bb0.js";import{U as B}from"./LocalStorageSource-046df3bc.js";import{T as le,a as ae}from"./Tr-82be137b.js";function pe(l){let e,s,t,r,o;const d=l[2].default,u=re(d,l,l[1],null);let g=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},l[0]],h={};for(let n=0;n<g.length;n+=1)h=J(h,g[n]);return{c(){e=F("svg"),u&&u.c(),s=F("path"),m(s,"fill-rule","evenodd"),m(s,"d","M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z"),m(s,"clip-rule","evenodd"),K(e,h)},m(n,_){q(n,e,_),u&&u.m(e,null),p(e,s),t=!0,r||(o=[E(e,"click",l[3]),E(e,"mouseover",l[4]),E(e,"mouseenter",l[5]),E(e,"mouseleave",l[6]),E(e,"keydown",l[7])],r=!0)},p(n,[_]){u&&u.p&&(!t||_&2)&&ne(u,d,n,n[1],t?ie(d,n[1],_,null):oe(n[1]),null),K(e,h=ue(g,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 20 20"},{fill:"currentColor"},{"aria-hidden":"true"},_&1&&n[0]]))},i(n){t||(M(u,n),t=!0)},o(n){C(u,n),t=!1},d(n){n&&z(e),u&&u.d(n),r=!1,fe(o)}}}function ge(l,e,s){const t=[];let r=Q(e,t),{$$slots:o={},$$scope:d}=e;function u(i){A.call(this,l,i)}function g(i){A.call(this,l,i)}function h(i){A.call(this,l,i)}function n(i){A.call(this,l,i)}function _(i){A.call(this,l,i)}return l.$$set=i=>{e=J(J({},e),ce(i)),s(0,r=Q(e,t)),"$$scope"in i&&s(1,d=i.$$scope)},[r,d,o,u,g,h,n,_]}class he extends x{constructor(e){super(),$(this,e,ge,pe,ee,{})}}function Y(l){let e,s,t,r,o,d,u,g,h,n,_,i,w,k,I,c,v,U,T,b,D;w=new he({props:{class:"",style:`transform: rotate( ${l[4]}deg )`}});const j=[be,we],a=[];function H(f,S){return f[6]?0:1}return c=H(l),v=a[c]=j[c](l),b=new le({props:{t:ae.t.validation.slope.inputExplanation}}),{c(){e=y("div"),s=y("div"),t=y("div"),r=y("div"),d=N(),u=y("div"),h=N(),n=y("div"),_=N(),i=y("div"),L(w.$$.fragment),k=N(),I=y("div"),v.c(),U=N(),T=y("div"),L(b.$$.fragment),m(r,"class","absolute top-0 left-0 w-16 h-16 interactive"),m(r,"style",o=`transform: rotate( ${-l[2]}deg ); transform-origin: 100% 100%`),m(u,"class","absolute top-0 left-0 w-16 h-16 interactive"),m(u,"style",g=`transform: rotate( ${90+l[2]}deg ); transform-origin: 100% 100%`),m(n,"class","absolute top-0 mt-8 left-0 w-32 h-32 interactive"),m(i,"class","absolute w-30 h-30 top-0 left-0 rounded-full"),m(t,"class","shrink-0 relative w-32 h-32 p-0 m-0 overflow-hidden"),W(t,"border-radius","9999px"),W(t,"background","greenyellow"),m(I,"class","font-bold w-full flex justify-center items-center"),m(s,"class","flex w-full"),m(e,"class","flex flex-col m-2")},m(f,S){q(f,e,S),p(e,s),p(s,t),p(t,r),p(t,d),p(t,u),p(t,h),p(t,n),p(t,_),p(t,i),O(w,i,null),p(s,k),p(s,I),a[c].m(I,null),p(e,U),p(e,T),O(b,T,null),D=!0},p(f,S){(!D||S&4&&o!==(o=`transform: rotate( ${-f[2]}deg ); transform-origin: 100% 100%`))&&m(r,"style",o),(!D||S&4&&g!==(g=`transform: rotate( ${90+f[2]}deg ); transform-origin: 100% 100%`))&&m(u,"style",g);const R={};S&16&&(R.style=`transform: rotate( ${f[4]}deg )`),w.$set(R);let G=c;c=H(f),c===G?a[c].p(f,S):(te(),C(a[G],1,1,()=>{a[G]=null}),se(),v=a[c],v?v.p(f,S):(v=a[c]=j[c](f),v.c()),M(v,1),v.m(I,null))},i(f){D||(M(w.$$.fragment,f),M(v),M(b.$$.fragment,f),D=!0)},o(f){C(w.$$.fragment,f),C(v),C(b.$$.fragment,f),D=!1},d(f){f&&z(e),V(w),a[c].d(),V(b)}}}function we(l){let e,s;return e=new le({props:{cls:"alert",t:ae.t.validation.slope.inputIncorrect}}),{c(){L(e.$$.fragment)},m(t,r){O(e,t,r),s=!0},p:P,i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){C(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function be(l){let e,s,t,r;return{c(){e=y("div"),s=_e(l[7]),m(e,"class","text-5xl")},m(o,d){q(o,e,d),p(e,s),t||(r=E(e,"click",l[10]),t=!0)},p(o,d){d&128&&ve(s,o[7])},i:P,o:P,d(o){o&&z(e),t=!1,r()}}}function ye(l){let e,s,t=l[5]&&Y(l);return{c(){t&&t.c(),e=de()},m(r,o){t&&t.m(r,o),q(r,e,o),s=!0},p(r,[o]){r[5]?t?(t.p(r,o),o&32&&M(t,1)):(t=Y(r),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(te(),C(t,1,1,()=>{t=null}),se())},i(r){s||(M(t),s=!0)},o(r){C(t),s=!1},d(r){t&&t.d(r),r&&z(e)}}}function ke(l){return l==="degrees"?"percentage":"degrees"}function Z(l){const e=Math.tan(l*Math.PI/180)*100;return Math.round(e/5)*5+"%"}function Me(l,e,s){let t,r,o=P,d=()=>(o(),o=X(n,a=>s(6,r=a)),n),u,g=P,h=()=>(g(),g=X(i,a=>s(7,u=a)),i);l.$$.on_destroy.push(()=>o()),l.$$.on_destroy.push(()=>g());let{value:n}=e;d();let{mode:_="percentage"}=e,{preview:i=new B(void 0)}=e;h();let w=_,{safetyMargin:k=10}=e;if(k<5)throw"Safetymargin should be at least 5, it is "+JSON.stringify(k);let I=new B(void 0),c=new B(void 0),v=new B(45),U=new B(void 0),T=new B(!1);me(l,T,a=>s(5,t=a));let b;function D(a){console.debug("Got gyro measurement"),T.setData(!0),I.setData(Math.floor(a.alpha)),c.setData(Math.floor(a.beta)),v.setData(Math.floor(a.gamma)),U.setData(a.absolute),c.data<0?s(4,b=v.data+180):s(4,b=-v.data)}console.log("Starting device orientation listener");try{window.addEventListener("deviceorientation",a=>D(a))}catch(a){console.log("Could not init device orientation api due to",a)}c.map(a=>{-k<b&&b<k?(_==="degrees"?n.setData(""+a+"°"):n.setData(Z(a)),w==="degrees"?i.setData(""+a+"°"):i.setData(Z(a))):n.setData(void 0)},[c]);const j=()=>{s(3,w=ke(w))};return l.$$set=a=>{"value"in a&&d(s(0,n=a.value)),"mode"in a&&s(9,_=a.mode),"preview"in a&&h(s(1,i=a.preview)),"safetyMargin"in a&&s(2,k=a.safetyMargin)},[n,i,k,w,b,t,r,u,T,_,j]}class Ie extends x{constructor(e){super(),$(this,e,Me,ye,ee,{value:0,mode:9,preview:1,safetyMargin:2})}}export{Ie as S};
