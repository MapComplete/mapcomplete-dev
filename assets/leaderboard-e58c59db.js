import"./modulepreload-polyfill-3cfb730f.js";import{S as q,i as y,s as z,e as h,a as w,M as k,d as v,f as u,g as S,A,t as U,N as I,h as C,B,z as D,c as F,m as H,n as j,j as J,L as P,b as O}from"./index-747a309a.js";import{a as R,U as T}from"./UIEventSource-aaf6665c.js";import{L as G}from"./Loading-15c835f3.js";import{O as K}from"./OsmConnection-1e5a3c2d.js";import"./LocalStorageSource-39fbe4ea.js";import"./Constants-cc5ee43e.js";function E(r,e,o){const a=r.slice();return a[6]=e[o],a}function Q(r){let e,o;return e=new G({}),{c(){F(e.$$.fragment)},m(a,n){H(e,a,n),o=!0},p:j,i(a){o||(U(e.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),o=!1},d(a){J(e,a)}}}function V(r){let e,o,a,n,l=r[0].date+"",i,f=r[0].leaderboard,s=[];for(let t=0;t<f.length;t+=1)s[t]=N(E(r,f,t));return{c(){e=h("table"),o=h("tr"),o.innerHTML=`<th>Rank</th> 
        <th>Contributor</th> 
        <th>Number of images contributed</th>`,a=w();for(let t=0;t<s.length;t+=1)s[t].c();n=k(`
    Statistics generated on `),i=k(l)},m(t,m){v(t,e,m),u(e,o),u(e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);v(t,n,m),v(t,i,m)},p(t,m){if(m&3){f=t[0].leaderboard;let c;for(c=0;c<f.length;c+=1){const d=E(t,f,c);s[c]?s[c].p(d,m):(s[c]=N(d),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=f.length}m&1&&l!==(l=t[0].date+"")&&I(i,l)},i:j,o:j,d(t){t&&C(e),P(s,t),t&&C(n),t&&C(i)}}}function W(r){let e,o=r[6].name+"",a,n;return{c(){e=h("a"),a=k(o),O(e,"href",n=r[6].account)},m(l,i){v(l,e,i),u(e,a)},p(l,i){i&1&&o!==(o=l[6].name+"")&&I(a,o),i&1&&n!==(n=l[6].account)&&O(e,"href",n)},d(l){l&&C(e)}}}function X(r){let e,o=r[6].name+"",a,n;return{c(){e=h("a"),a=k(o),O(e,"class","thanks"),O(e,"href",n=r[6].account)},m(l,i){v(l,e,i),u(e,a)},p(l,i){i&1&&o!==(o=l[6].name+"")&&I(a,o),i&1&&n!==(n=l[6].account)&&O(e,"href",n)},d(l){l&&C(e)}}}function N(r){let e,o,a=r[6].rank+"",n,l,i,f,s,t,m=r[6].nrOfImages+"",c,d,M;function _(b,L){return b[1]===b[6].name?X:W}let g=_(r),p=g(r);return{c(){e=h("tr"),o=h("td"),n=k(a),l=w(),i=h("td"),p.c(),f=w(),s=h("td"),t=h("b"),c=k(m),d=k(`
            total images`),M=w()},m(b,L){v(b,e,L),u(e,o),u(o,n),u(e,l),u(e,i),p.m(i,null),u(e,f),u(e,s),u(s,t),u(t,c),u(s,d),u(e,M)},p(b,L){L&1&&a!==(a=b[6].rank+"")&&I(n,a),g===(g=_(b))&&p?p.p(b,L):(p.d(1),p=g(b),p&&(p.c(),p.m(i,null))),L&1&&m!==(m=b[6].nrOfImages+"")&&I(c,m)},d(b){b&&C(e),p.d()}}}function Y(r){let e,o,a,n,l,i,f,s,t,m;const c=[V,Q],d=[];function M(_,g){return _[0]?0:1}return n=M(r),l=d[n]=c[n](r),{c(){e=h("main"),o=h("h1"),o.textContent="Contributed images with MapComplete: leaderboard",a=w(),l.c(),i=w(),f=h("div"),s=k("Logged in as "),t=k(r[1])},m(_,g){v(_,e,g),u(e,o),u(e,a),d[n].m(e,null),u(e,i),u(e,f),u(f,s),u(f,t),m=!0},p(_,[g]){let p=n;n=M(_),n===p?d[n].p(_,g):(D(),S(d[p],1,1,()=>{d[p]=null}),A(),l=d[n],l?l.p(_,g):(l=d[n]=c[n](_),l.c()),U(l,1),l.m(e,i)),(!m||g&2)&&I(t,_[1])},i(_){m||(U(l),m=!0)},o(_){S(l),m=!1},d(_){_&&C(e),d[n].d()}}}function Z(r,e,o){let a,n,i=new K({attemptLogin:!0}).userDetails.map(t=>t.name);B(r,i,t=>o(1,n=t));let{source:f="https://raw.githubusercontent.com/pietervdvn/MapComplete-data/main/picture-leaderboard.json"}=e,s=R.FromPromise(T.downloadJsonCached(f));return B(r,s,t=>o(0,a=t)),r.$$set=t=>{"source"in t&&o(4,f=t.source)},[a,n,i,s,f]}class $ extends q{constructor(e){super(),y(this,e,Z,Y,z,{source:4})}}new $({target:document.getElementById("main")});
//# sourceMappingURL=leaderboard-e58c59db.js.map
