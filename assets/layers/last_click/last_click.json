{
  "id": "last_click",
  "description": "This layer defines how to render the 'last click'-location. By default, it will show a marker with the possibility to add a new point (if there are some presets) and/or to add a new note (if the 'note' layer attribute is set). If none are possible, this layer won't show up",
  "source": "special",
  "isShown": {
    "or": [
      "has_presets=yes",
      "has_note_layer=yes"
    ]
  },
  "name": null,
  "titleIcons": [],
  "popupInFloatover": true,
  "title": {
    "mappings": [
      {
        "if": {
          "and": [
            "has_note_layer=yes",
            "has_presets=yes"
          ]
        },
        "then": {
          "en": "Add a new point or add a note",
          "nl": "Voeg een nieuw punt of een nieuwe kaartnota toe",
          "de": "Objekt oder Hinweis auf der Karte hinzufügen",
          "ca": "Afegeix un nou punt o nota",
          "fr": "Ajouter un nouveau point ou ajouter une note",
          "pl": "Dodaj nowy punkt lub dodaj notatkę",
          "cs": "Přidání nového bodu nebo přidání poznámky"
        }
      },
      {
        "if": "has_note_layer=yes",
        "then": {
          "en": "Add a new note",
          "nl": "Voeg een nieuwe kaartnota toe",
          "de": "Hinweis hinzufügen",
          "ca": "Afegeix una nova nota",
          "fr": "Ajouter une nouvelle note",
          "pl": "Dodaj nową notatkę",
          "cs": "Přidání nové poznámky"
        }
      },
      {
        "if": "has_presets=yes",
        "then": {
          "en": "Add a new point",
          "nl": "Voeg een nieuw punt toe",
          "de": "Objekt hinzufügen",
          "ca": "Afegeix un nou punt",
          "fr": "Ajouter un nouveau point",
          "pl": "Dodaj nowy punkt",
          "cs": "Přidání nového bodu"
        }
      }
    ]
  },
  "tagRenderings": [
    {
      "id": "add_new",
      "condition": "has_presets=yes",
      "render": {
        "*": "{add_new_point()}"
      }
    },
    {
      "id": "add_note",
      "condition": "has_note_layer=yes",
      "render": {
        "*": "{open_note()}"
      }
    }
  ],
  "mapRendering": [
    {
      "icon": {
        "mappings": [
          {
            "if": {
              "and": [
                "has_note_layer=yes",
                "has_presets=no"
              ]
            },
            "then": "./assets/svg/note.svg"
          },
          {
            "if": "number_of_presets=1",
            "then": "{first_preset}"
          }
        ],
        "render": "<div class='relative'> <img src='./assets/svg/add_pin.svg' class='absolute' style='height: 50px'> <div class='absolute top-0 left-0 rounded-full overflow-hidden noselect' style='width: 40px; height: 40px'><div class='flex slide min-w-min' style='animation: slide linear {number_of_presets}s infinite; width: calc( (1 + {number_of_presets}) * 40px ); height: 40px'>{renderings}{first_preset}</div></div></div>"
      },
      "labelCssClasses": "text-sm min-w-min px-2 rounded-full text-white opacity-65 whitespace-nowrap block-ruby",
      "labelCss": "background: #00000088",
      "label": {
        "render": {
          "ca": "Afegir nou element",
          "cs": "Klikněte zde pro přidání nové položky",
          "da": "Klik her for at tilføje et nyt punkt",
          "de": "Hier klicken, um ein neues Element hinzuzufügen",
          "en": "Click here to add a new item",
          "es": "Haga clic aquí para añadir un nuevo ítem",
          "fil": "I-click ito para mag-dagdag ng bagong bagay",
          "fr": "Cliquez ici pour ajouter un élément",
          "hu": "Új elem hozzáadásához kattints ide",
          "id": "Klik di sini untuk menambahkan item baru",
          "it": "Aggiungi nuovo elemento",
          "nb_NO": "Legg til nytt element",
          "nl": "Klik hier om een item toe te voegen",
          "pt": "Adicionar novo item",
          "zh_Hant": "點這邊新增新項目",
          "pl": "Kliknij tutaj, aby dodać nowy obiekt"
        },
        "mappings": [
          {
            "if": {
              "and": [
                "has_note_layer=yes",
                "has_presets=yesno"
              ]
            },
            "then": {
              "en": "Create a new map note",
              "nl": "Maak een nieuwe kaartnotitie",
              "de": "Hinweis auf der Karte hinzufügen",
              "ca": "Crea una nova nota del mapa",
              "fr": "Créer une nouvelle note de carte",
              "pl": "Utwórz nową notatkę na mapie",
              "cs": "Vytvoření nové poznámky k mapě"
            }
          }
        ]
      },
      "iconBadges": [
        {
          "if": {
            "or": [
              "has_note_layer=yes",
              "has_presets=yes"
            ]
          },
          "then": "<img class='animate-pulse' src='./assets/svg/addSmall.svg'>"
        }
      ],
      "location": [
        "point"
      ],
      "anchor": "bottom",
      "iconSize": {
        "mappings": [
          {
            "if": {
              "and": [
                "has_note_layer=yes",
                "has_presets=no"
              ]
            },
            "then": "40,40"
          }
        ],
        "render": "40,50"
      }
    }
  ],
  "filter": [
    {
      "id": "action",
      "options": [
        {
          "default": true,
          "question": "only_if_action_is_possible",
          "osmTags": {
            "or": [
              "has_note_layer=yes",
              "has_presets=yes"
            ]
          }
        }
      ]
    }
  ]
}
