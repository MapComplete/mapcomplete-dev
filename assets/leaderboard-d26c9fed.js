import{U as T}from"./Utils-45e0ac39.js";import{S as A,i as D,s as F,e as b,a as I,L as v,d as k,f as m,g as M,p as H,t as O,M as S,h as g,q,o as J,c as P,m as Q,n as j,j as R,Q as y,b as U,k as z}from"./index-12fb4b6f.js";import{U as B}from"./LocalStorageSource-0ff4d07b.js";import{L as G}from"./Loading-74ae0b1d.js";import{O as K}from"./OsmConnection-23a54faf.js";import"./Constants-fdd91bd9.js";function E(u,e,o){const t=u.slice();return t[6]=e[o],t}function V(u){let e,o;return e=new G({}),{c(){P(e.$$.fragment)},m(t,l){Q(e,t,l),o=!0},p:j,i(t){o||(O(e.$$.fragment,t),o=!0)},o(t){M(e.$$.fragment,t),o=!1},d(t){R(e,t)}}}function W(u){let e,o,t,l,a=u[0].date+"",i,f=u[0].leaderboard,s=[];for(let n=0;n<f.length;n+=1)s[n]=N(E(u,f,n));return{c(){e=b("table"),o=b("tr"),o.innerHTML=`<th>Rank</th> 
      <th>Contributor</th> 
      <th>Number of images contributed</th>`,t=I();for(let n=0;n<s.length;n+=1)s[n].c();l=v(`
  Statistics generated on `),i=v(a)},m(n,_){k(n,e,_),m(e,o),m(e,t);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);k(n,l,_),k(n,i,_)},p(n,_){if(_&3){f=n[0].leaderboard;let r;for(r=0;r<f.length;r+=1){const C=E(n,f,r);s[r]?s[r].p(C,_):(s[r]=N(C),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=f.length}_&1&&a!==(a=n[0].date+"")&&S(i,a)},i:j,o:j,d(n){n&&g(e),y(s,n),n&&g(l),n&&g(i)}}}function X(u){let e,o=u[6].name+"",t,l;return{c(){e=b("a"),t=v(o),U(e,"href",l=u[6].account)},m(a,i){k(a,e,i),m(e,t)},p(a,i){i&1&&o!==(o=a[6].name+"")&&S(t,o),i&1&&l!==(l=a[6].account)&&U(e,"href",l)},d(a){a&&g(e)}}}function Y(u){let e,o=u[6].name+"",t,l;return{c(){e=b("a"),t=v(o),U(e,"class","thanks"),U(e,"href",l=u[6].account)},m(a,i){k(a,e,i),m(e,t)},p(a,i){i&1&&o!==(o=a[6].name+"")&&S(t,o),i&1&&l!==(l=a[6].account)&&U(e,"href",l)},d(a){a&&g(e)}}}function N(u){let e,o,t=u[6].rank+"",l,a,i,f,s,n,_=u[6].nrOfImages+"",r,C,c;function d(p,w){return p[1]===p[6].name?Y:X}let L=d(u),h=L(u);return{c(){e=b("tr"),o=b("td"),l=v(t),a=I(),i=b("td"),h.c(),f=I(),s=b("td"),n=b("b"),r=v(_),C=v(`
          total images`),c=I()},m(p,w){k(p,e,w),m(e,o),m(o,l),m(e,a),m(e,i),h.m(i,null),m(e,f),m(e,s),m(s,n),m(n,r),m(s,C),m(e,c)},p(p,w){w&1&&t!==(t=p[6].rank+"")&&S(l,t),L===(L=d(p))&&h?h.p(p,w):(h.d(1),h=L(p),h&&(h.c(),h.m(i,null))),w&1&&_!==(_=p[6].nrOfImages+"")&&S(r,_)},d(p){p&&g(e),h.d()}}}function Z(u){let e,o,t,l,a,i,f,s,n;const _=[W,V],r=[];function C(c,d){return c[0]?0:1}return t=C(u),l=r[t]=_[t](u),{c(){e=b("h1"),e.textContent="Contributed images with MapComplete: leaderboard",o=I(),l.c(),a=I(),i=b("div"),f=v("Logged in as "),s=v(u[1])},m(c,d){k(c,e,d),k(c,o,d),r[t].m(c,d),k(c,a,d),k(c,i,d),m(i,f),m(i,s),n=!0},p(c,[d]){let L=t;t=C(c),t===L?r[t].p(c,d):(J(),M(r[L],1,1,()=>{r[L]=null}),H(),l=r[t],l?l.p(c,d):(l=r[t]=_[t](c),l.c()),O(l,1),l.m(a.parentNode,a)),(!n||d&2)&&S(s,c[1])},i(c){n||(O(l),n=!0)},o(c){M(l),n=!1},d(c){c&&g(e),c&&g(o),r[t].d(c),c&&g(a),c&&g(i)}}}function $(u,e,o){let t,l,i=new K({attemptLogin:!0}).userDetails.map(n=>n.name);q(u,i,n=>o(1,l=n));let{source:f="https://raw.githubusercontent.com/pietervdvn/MapComplete-data/main/picture-leaderboard.json"}=e,s=B.FromPromise(T.downloadJsonCached(f));return q(u,s,n=>o(0,t=n)),u.$$set=n=>{"source"in n&&o(4,f=n.source)},[t,l,i,s,f]}class x extends A{constructor(e){super(),D(this,e,$,Z,F,{source:4})}}new z(x,{}).AttachTo("main");
//# sourceMappingURL=leaderboard-d26c9fed.js.map
