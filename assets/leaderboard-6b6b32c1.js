import"./modulepreload-polyfill-ec808ebb.js";import{S as N,i as A,s as D,e as b,a as L,U as v,d as k,f as m,g as O,v as F,t as M,V as U,h as g,q as j,u as H,c as J,m as P,n as T,j as R,T as V,b as S,k as y}from"./tw-merge-84eb4a03.js";import{U as z}from"./Utils-7814fca2.js";import{U as B}from"./LocalStorageSource-7f535556.js";import{L as G}from"./Loading-70ca05dc.js";import{O as K}from"./OsmConnection-e923a716.js";import"./ToSvelte-5c058492.js";import"./_commonjsHelpers-87174ba5.js";import"./Constants-c67befae.js";function q(u,e,l){const t=u.slice();return t[6]=e[l],t}function Q(u){let e,l;return e=new G({}),{c(){J(e.$$.fragment)},m(t,o){P(e,t,o),l=!0},p:T,i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function W(u){let e,l,t,o,a=u[0].date+"",i,f=u[0].leaderboard,s=[];for(let n=0;n<f.length;n+=1)s[n]=E(q(u,f,n));return{c(){e=b("table"),l=b("tr"),l.innerHTML=`<th>Rank</th> 
      <th>Contributor</th> 
      <th>Number of images contributed</th>`,t=L();for(let n=0;n<s.length;n+=1)s[n].c();o=v(`
  Statistics generated on `),i=v(a)},m(n,_){k(n,e,_),m(e,l),m(e,t);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);k(n,o,_),k(n,i,_)},p(n,_){if(_&3){f=n[0].leaderboard;let r;for(r=0;r<f.length;r+=1){const C=q(n,f,r);s[r]?s[r].p(C,_):(s[r]=E(C),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=f.length}_&1&&a!==(a=n[0].date+"")&&U(i,a)},i:T,o:T,d(n){n&&g(e),V(s,n),n&&g(o),n&&g(i)}}}function X(u){let e,l=u[6].name+"",t,o;return{c(){e=b("a"),t=v(l),S(e,"href",o=u[6].account)},m(a,i){k(a,e,i),m(e,t)},p(a,i){i&1&&l!==(l=a[6].name+"")&&U(t,l),i&1&&o!==(o=a[6].account)&&S(e,"href",o)},d(a){a&&g(e)}}}function Y(u){let e,l=u[6].name+"",t,o;return{c(){e=b("a"),t=v(l),S(e,"class","thanks"),S(e,"href",o=u[6].account)},m(a,i){k(a,e,i),m(e,t)},p(a,i){i&1&&l!==(l=a[6].name+"")&&U(t,l),i&1&&o!==(o=a[6].account)&&S(e,"href",o)},d(a){a&&g(e)}}}function E(u){let e,l,t=u[6].rank+"",o,a,i,f,s,n,_=u[6].nrOfImages+"",r,C,c;function p(d,I){return d[1]===d[6].name?Y:X}let w=p(u),h=w(u);return{c(){e=b("tr"),l=b("td"),o=v(t),a=L(),i=b("td"),h.c(),f=L(),s=b("td"),n=b("b"),r=v(_),C=v(`
          total images`),c=L()},m(d,I){k(d,e,I),m(e,l),m(l,o),m(e,a),m(e,i),h.m(i,null),m(e,f),m(e,s),m(s,n),m(n,r),m(s,C),m(e,c)},p(d,I){I&1&&t!==(t=d[6].rank+"")&&U(o,t),w===(w=p(d))&&h?h.p(d,I):(h.d(1),h=w(d),h&&(h.c(),h.m(i,null))),I&1&&_!==(_=d[6].nrOfImages+"")&&U(r,_)},d(d){d&&g(e),h.d()}}}function Z(u){let e,l,t,o,a,i,f,s,n;const _=[W,Q],r=[];function C(c,p){return c[0]?0:1}return t=C(u),o=r[t]=_[t](u),{c(){e=b("h1"),e.textContent="Contributed images with MapComplete: leaderboard",l=L(),o.c(),a=L(),i=b("div"),f=v("Logged in as "),s=v(u[1])},m(c,p){k(c,e,p),k(c,l,p),r[t].m(c,p),k(c,a,p),k(c,i,p),m(i,f),m(i,s),n=!0},p(c,[p]){let w=t;t=C(c),t===w?r[t].p(c,p):(H(),O(r[w],1,1,()=>{r[w]=null}),F(),o=r[t],o?o.p(c,p):(o=r[t]=_[t](c),o.c()),M(o,1),o.m(a.parentNode,a)),(!n||p&2)&&U(s,c[1])},i(c){n||(M(o),n=!0)},o(c){O(o),n=!1},d(c){c&&g(e),c&&g(l),r[t].d(c),c&&g(a),c&&g(i)}}}function $(u,e,l){let t,o,i=new K({attemptLogin:!0}).userDetails.map(n=>n.name);j(u,i,n=>l(1,o=n));let{source:f="https://raw.githubusercontent.com/pietervdvn/MapComplete-data/main/picture-leaderboard.json"}=e,s=B.FromPromise(z.downloadJsonCached(f));return j(u,s,n=>l(0,t=n)),u.$$set=n=>{"source"in n&&l(4,f=n.source)},[t,o,i,s,f]}class x extends N{constructor(e){super(),A(this,e,$,Z,D,{source:4})}}new y(x,{}).AttachTo("main");
//# sourceMappingURL=leaderboard-6b6b32c1.js.map
