{"version":3,"file":"Motion-90b79108.js","sources":["../../src/Sensors/Motion.ts"],"sourcesContent":["import { UIEventSource } from \"../Logic/UIEventSource\"\n\nexport default class Motion {\n    public static singleton = new Motion()\n    /**\n     * In m/sÂ²\n     */\n    public maxAcc = new UIEventSource<number>(0)\n\n    public lastShakeEvent = new UIEventSource<Date>(undefined)\n\n    private isListening = false\n    private constructor() {\n        this.startListening()\n    }\n\n    private onUpdate(eventData: DeviceMotionEvent) {\n        const acc = eventData.acceleration\n        this.maxAcc.setData(Math.max(acc.x, acc.y, acc.z))\n        if (this.maxAcc.data > 22) {\n            this.lastShakeEvent.setData(new Date())\n        }\n    }\n\n    startListening() {\n        if (this.isListening) {\n            return\n        }\n        this.isListening = true\n        console.log(\"Listening to motion events\", this)\n        window.addEventListener(\"devicemotion\", (e) => this.onUpdate(e))\n    }\n}\n"],"names":["_Motion","__publicField","UIEventSource","eventData","acc","e","Motion"],"mappings":"wNAEA,MAAqBA,EAArB,MAAqBA,CAAO,CAUhB,aAAc,CALfC,EAAA,cAAS,IAAIC,EAAsB,CAAC,GAEpCD,EAAA,sBAAiB,IAAIC,EAAoB,MAAS,GAEjDD,EAAA,mBAAc,IAElB,KAAK,eAAe,CACxB,CAEQ,SAASE,EAA8B,CAC3C,MAAMC,EAAMD,EAAU,aACjB,KAAA,OAAO,QAAQ,KAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,EAAI,CAAC,CAAC,EAC7C,KAAK,OAAO,KAAO,IACnB,KAAK,eAAe,QAAY,IAAA,IAAM,CAE9C,CAEA,gBAAiB,CACT,KAAK,cAGT,KAAK,YAAc,GACX,QAAA,IAAI,6BAA8B,IAAI,EAC9C,OAAO,iBAAiB,eAAiBC,GAAM,KAAK,SAASA,CAAC,CAAC,EACnE,CACJ,EA7BIJ,EADiBD,EACH,YAAY,IAAIA,GADlC,IAAqBM,EAArBN"}